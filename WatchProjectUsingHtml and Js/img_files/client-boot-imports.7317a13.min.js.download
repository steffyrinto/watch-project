(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{"+9CW":function(e,t,n){},"+BnW":function(e,t,n){},"+V7z":function(e,t,n){},"+ZNJ":function(e,t,n){},"+yrr":function(e,t,n){"use strict";var a=n("m1cH"),r=n.n(a),i=n("YEIV"),o=n.n(i),s=n("QbLZ"),l=n.n(s),c=n("c8Bs"),u=n("u3oV"),d=n("Z0Cl"),p=n("Fsnq"),m=n("3Hq1"),h=n("1Lli"),b=n("owWc"),f=n("zmn3"),g=n("lCmp"),_=n("m8R6"),v=n("AFNo"),y=n("peh1"),k=n("k55U"),O=n("iCc5"),C=n.n(O),E=n("V7oC"),j=n.n(E),S=["#FFE0E0","#DBEB8D","#B5E0FF","#FFE5B2","#BDE595","#D4D5FF","#F9EF6E","#D0F2ED","#FFCCFF"],I=function(){function e(){C()(this,e),this.startIndex=Math.floor(Math.random()*(S.length-1))}return j()(e,[{key:"getSelfColor",value:function(){return S[this.startIndex]}},{key:"getColorForJoinIndex",value:function(e){return S[(this.startIndex+1+e)%S.length]}}]),e}(),w=n("Fdc0"),N=n("1YQg"),T=n("4zXV"),A=n("TM4O"),R=Object(v.b)("Sends an invite to the web API from the call window",function(e,t,n){var a=n.id,r=n.invitedUserIds;return Object(k.f)(Object(A.a)(),"We expect this to run in a call window context"),Promise.all([r.map(function(t){return e(Object(T.a)({method:"screenhero.rooms.invite",reason:"calls-invite",args:{responder:t,room:a,should_share:!0,cancelable:!0}}))})])});R.meta={name:"sendInvites",key:"appCallsFetchersSendInvitesSendInvites",description:"Sends an invite to the web API from the call window"},n.d(t,"D",function(){return F}),n.d(t,"C",function(){return L}),n.d(t,"c",function(){return D}),n.d(t,"G",function(){return U}),n.d(t,"O",function(){return B}),n.d(t,"b",function(){return q}),n.d(t,"P",function(){return H}),n.d(t,"E",function(){return W}),n.d(t,"I",function(){return G}),n.d(t,"J",function(){return K}),n.d(t,"M",function(){return V}),n.d(t,"N",function(){return z}),n.d(t,"L",function(){return Y}),n.d(t,"a",function(){return Q}),n.d(t,"F",function(){return X}),n.d(t,"H",function(){return J}),n.d(t,"q",function(){return ee}),n.d(t,"x",function(){return te}),n.d(t,"n",function(){return ne}),n.d(t,"o",function(){return ae}),n.d(t,"h",function(){return se}),n.d(t,"z",function(){return le}),n.d(t,"d",function(){return ce}),n.d(t,"w",function(){return ue}),n.d(t,"u",function(){return de}),n.d(t,"t",function(){return me}),n.d(t,"v",function(){return he}),n.d(t,"k",function(){return be}),n.d(t,"r",function(){return fe}),n.d(t,"i",function(){return ge}),n.d(t,"B",function(){return _e}),n.d(t,"g",function(){return ve}),n.d(t,"f",function(){return ye}),n.d(t,"m",function(){return ke}),n.d(t,"l",function(){return Oe}),n.d(t,"y",function(){return Ce}),n.d(t,"j",function(){return Ee}),n.d(t,"s",function(){return je}),n.d(t,"p",function(){return Se}),n.d(t,"K",function(){return we}),n.d(t,"A",function(){return Ne});var P=new I;function M(e,t){return"Could not "+t+": problem with peerId "+e+"."}function x(e){return"self"===e.id}function F(e){return x(e)}function L(e){return x(e)}var D=Object(v.a)("Add a remote peer");D.meta={name:"addRemotePeer",key:"appCallsReduxPeersStoreAddRemotePeer",description:"Add a remote peer"};var U=Object(v.a)("Remove a remote peer");U.meta={name:"removeRemotePeer",key:"appCallsReduxPeersStoreRemoveRemotePeer",description:"Remove a remote peer"};var B=Object(v.a)("Update a peer");B.meta={name:"updatePeer",key:"appCallsReduxPeersStoreUpdatePeer",description:"Update a peer"};var q=Object(v.a)("Add an invited user");q.meta={name:"addInvitedUser",key:"appCallsReduxPeersStoreAddInvitedUser",description:"Add an invited user"};var H=Object(v.a)("Update a response for an invited user");H.meta={name:"updateResponseForInvitedUser",key:"appCallsReduxPeersStoreUpdateResponseForInvitedUser",description:"Update a response for an invited user"};var W=Object(v.a)("Remove an invited user");W.meta={name:"markInviteExpired",key:"appCallsReduxPeersStoreMarkInviteExpired",description:"Remove an invited user"};var G=Object(v.a)("Update a peer's connection");G.meta={name:"setRemotePeerIsConnected",key:"appCallsReduxPeersStoreSetRemotePeerIsConnected",description:"Update a peer's connection"};var K=Object(v.a)("Update the screen share of a peer");K.meta={name:"setRemotePeerScreenshareDoNotDispatch",key:"appCallsReduxPeersStoreSetRemotePeerScreenshareDoNotDispatch",description:"Update the screen share of a peer"};var V=Object(v.a)("Set the ID of the peer selected by the user");V.meta={name:"setUserSelectedPeerId",key:"appCallsReduxPeersStoreSetUserSelectedPeerId",description:"Set the ID of the peer selected by the user"};var z=Object(v.a)("Set the ID of the peer selected by the user");z.meta={name:"unsetUserSelectedPeerId",key:"appCallsReduxPeersStoreUnsetUserSelectedPeerId",description:"Set the ID of the peer selected by the user"};var Y=Object(v.a)("Set the ID of the active speaker");Y.meta={name:"setSpeakingPeerId",key:"appCallsReduxPeersStoreSetSpeakingPeerId",description:"Set the ID of the active speaker"};var Q=Object(v.a)("Add an emoji reaction");Q.meta={name:"addEphemeralMessage",key:"appCallsReduxPeersStoreAddEphemeralMessage",description:"Add an emoji reaction"};var X=Object(v.a)("Remove an emoji reaction");X.meta={name:"removeEmojiReaction",key:"appCallsReduxPeersStoreRemoveEmojiReaction",description:"Remove an emoji reaction"};var J=Object(v.a)("Send an emoji reaction");J.meta={name:"sendEphemeralMessage",key:"appCallsReduxPeersStoreSendEphemeralMessage",description:"Send an emoji reaction"};var Z={self:{id:"self",isMicrophoneEnabled:!0,isDrawEnabled:!0,reactionColor:P.getSelfColor(),drawHue:Math.floor(360*Math.random())},invitedUsers:{},byId:{},leftById:{},reacjis:[],reacjiShownCounter:0,remotePeerJoinedCounter:0},$=Object(v.d)({},Z,{storeKey:"peers",persistenceEnabled:!1}).on(D,function(e,t){Object(k.f)(!e.byId[t.id],M(t.id,"addRemotePeer"));var n=e.remotePeerJoinedCounter;return l()(l()(l()({},e),{remotePeerJoinedCounter:e.remotePeerJoinedCounter+1,lastRemoteScreensharePeerId:Ie(e,t),byId:l()(l()({},e.byId),o()({},t.id,l()(l()({},t),{joinIndex:n,reactionColor:P.getColorForJoinIndex(n)})))}),e.invitedUsers[t.userId]?{invitedUsers:l()(l()({},e.invitedUsers),o()({},t.userId,l()(l()({},e.invitedUsers[t.userId]),{isExpired:!0})))}:null)}).on(U,function(e,t){var n=e.byId[t];return Object(k.f)(!!n,"Peer should exist in order to remove"),l()(l()({},e),{speakingPeerId:e.speakingPeerId===t?void 0:e.speakingPeerId,userSelectedPeerId:e.userSelectedPeerId===t?void 0:e.userSelectedPeerId,lastRemoteScreensharePeerId:e.lastRemoteScreensharePeerId===t?void 0:e.lastRemoteScreensharePeerId,byId:l()({},Object(_.a)(e.byId,t)),leftById:l()(l()({},e.leftById),o()({},n.id,l()({},n)))})}).on(q,function(e,t){var n=t.userId,a=t.isCancelable,r=void 0===a||a;return l()(l()({},e),{invitedUsers:l()(l()({},e.invitedUsers),o()({},n,{response:"pending",isCancelable:r,isExpired:!1}))})}).on(H,function(e,t){var n=t.userId,a=t.response;return l()(l()({},e),{invitedUsers:l()(l()({},e.invitedUsers),o()({},n,l()(l()({},e.invitedUsers[n]),{response:a})))})}).on(W,function(e,t){return l()(l()({},e),{invitedUsers:l()(l()({},e.invitedUsers),o()({},t,l()(l()({},e.invitedUsers[t]),{isExpired:!0})))})}).on(B,function(e,t){return F(t)?l()(l()({},e),{self:l()(l()(l()({},e.self),t),!Object(m.a)(t.isScreenshareEnabled)&&{isHostDrawEnabled:!1})}):(Object(k.f)(!!e.byId[t.id],M(t.id,"updatePeer")),l()(l()({},e),{byId:l()(l()({},e.byId),o()({},t.id,l()(l()({},e.byId[t.id]),t)))}))}).on(K,function(e,t){return Object(k.f)(!!e.byId[t.id],M(t.id,"setRemotePeerScreenshare")),l()(l()({},e),{lastRemoteScreensharePeerId:Ie(e,t),byId:l()(l()({},e.byId),o()({},t.id,l()(l()({},e.byId[t.id]),t)))})}).on(G,function(e,t){var n=t.id,a=t.isConnected;return Object(k.f)(!!e.byId[n],M(n,"setRemotePeerIsConnected")),l()(l()(l()({},e),!a&&{lastRemoteScreensharePeerId:Ie(e,{id:n,isScreenshareEnabled:!1})}),{byId:l()(l()({},e.byId),o()({},n,l()(l()(l()({},e.byId[n]),{isConnected:a}),!a&&{isCameraEnabled:!1,isScreenshareEnabled:!1})))})}).on(V,function(e,t){return"self"!==t&&Object(k.f)(!!e.byId[t],M(t,"setUserSelectedPeerId")),l()(l()({},e),{userSelectedPeerId:t})}).on(z,function(e){return l()(l()({},e),{userSelectedPeerId:void 0})}).on(Y,function(e,t){return Object(k.f)(!!e.byId[t],M(t,"setSpeakingPeerId")),l()(l()({},e),{speakingPeerId:t})}).on(Q,function(e,t){var n=e.reacjiShownCounter+1;return l()(l()({},e),{reacjiShownCounter:n,reacjis:[{peerId:t.peerId,emoji:t.emoji,id:n,isEmoji:t.isEmoji}].concat(r()(e.reacjis))})}).on(X,function(e,t){var n=e.reacjis.filter(function(e){return e.id!==t});return l()(l()({},e),{reacjis:n})}),ee=(t.e=$,Object(v.e)(function(e,t){var n=e.peers;if("self"===t)return n.self;var a=n.byId[t];return Object(k.f)(!!a,M(t,"getPeer")),a}));ee.meta={name:"getPeer",key:"appCallsReduxPeersStoreGetPeer"},Object(v.e)(function(e,t){var n=e.peers.byId[t];return Object(k.f)(!!n,M(t,"getPeer")),n}).meta={name:"getRemotePeer",key:"appCallsReduxPeersStoreGetRemotePeer"};var te=Object(v.e)(function(e){return e.peers.self});te.meta={name:"getSelf",key:"appCallsReduxPeersStoreGetSelf"};var ne=Object(v.e)(function(e,t){return"self"===t?e.peers.self:ae(e,t)});ne.meta={name:"getMaybeLeftPeer",key:"appCallsReduxPeersStoreGetMaybeLeftPeer"};var ae=Object(v.e)(function(e,t){var n=e.peers,a=n.byId[t],r=n.leftById[t];return Object(k.f)(!!a||!!r,"No record of peer ever existing with id: "+t),a||r});ae.meta={name:"getMaybeLeftRemotePeer",key:"appCallsReduxPeersStoreGetMaybeLeftRemotePeer"};var re=Object(v.e)(function(e){return e.peers.leftById});re.meta={name:"getLeftPeers",key:"appCallsReduxPeersStoreGetLeftPeers"};var ie=Object(v.e)(function(e){return e.peers.invitedUsers});ie.meta={name:"getAllInvitedUsers",key:"appCallsReduxPeersStoreGetAllInvitedUsers"};var oe=Object(y.createSelector)(ie,function(e){return Object(u.a)(e,function(e){return!e.isExpired})}),se=Object(y.createSelector)(ie,function(e){return Object.keys(e)}),le=Object(y.createSelector)(oe,function(e){return Object.keys(e)}),ce=Object(y.createSelector)(ie,function(e){return 0!==Object(p.a)(e)&&Object(c.a)(e,function(e){return e.response===N.c.DoNotDisturb})}),ue=Object(v.e)(function(e){return e.peers.byId});ue.meta={name:"getRemotePeers",key:"appCallsReduxPeersStoreGetRemotePeers"};var de=Object(y.createSelector)(ue,function(e){return Object(f.a)(e,"userId")}),pe=Object(y.createSelector)(ue,function(e){return Object(h.a)(e,"joinIndex","desc")}),me=Object(y.createSelector)(pe,function(e){return Object(f.a)(e,"id")}),he=Object(y.createSelector)(pe,function(e){return Object(f.a)(e,"userId")}),be=Object(v.e)(function(e){return!!Object.keys(e.peers.byId).length||!!Object.keys(e.peers.leftById).length});be.meta={name:"getHasRemotePeerEverJoined",key:"appCallsReduxPeersStoreGetHasRemotePeerEverJoined"};Object(y.createSelector)(ue,function(e){return Object(g.a)(e,function(e){return!!e.isScreenshareEnabled})});var fe=Object(y.createSelector)(oe,function(e){return Object(b.a)(e,function(e,t,n){var a=t.response,r=t.isExpired;return("pending"===a||a===N.c.Accept&&!r)&&e.push(n),e},[])}),ge=Object(y.createSelector)(oe,function(e){return Object(d.a)(e,function(e){return e.isCancelable})}),_e=Object(y.createSelector)(ie,ue,re,function(e){return e.activeCall.conversationId},function(e,t,n,a){return!Object(p.a)(t)&&!Object(p.a)(n)&&Object(p.a)(e)&&!!a&&!Object(N.n)(a)&&Object(c.a)(e,function(e){return"pending"!==e.response&&e.response!==N.c.Accept})}),ve=Object(v.e)(function(e){return Ce(e)||e.peers.lastRemoteScreensharePeerId||e.peers.speakingPeerId||Number(Object.keys(e.peers.byId)[0])});ve.meta={name:"getActivePeerId",key:"appCallsReduxPeersStoreGetActivePeerId"};var ye=Object(y.createSelector)(fe,function(e){return e[0]}),ke=Object(v.e)(function(e){var t=ve(e);return!!t&&!!ee(e,t).isScreenshareEnabled});ke.meta={name:"getIsActivePeerScreenSharing",key:"appCallsReduxPeersStoreGetIsActivePeerScreenSharing"};var Oe=Object(v.e)(function(e){var t=ve(e);return!!t&&!!ee(e,t).isCameraEnabled});Oe.meta={name:"getIsActivePeerCameraEnabled",key:"appCallsReduxPeersStoreGetIsActivePeerCameraEnabled"};var Ce=Object(v.e)(function(e){return e.peers.userSelectedPeerId});Ce.meta={name:"getUserSelectedPeerId",key:"appCallsReduxPeersStoreGetUserSelectedPeerId"};var Ee=Object(v.e)(function(e){var t=te(e);if(t.isScreenshareEnabled&&t.screens)return t.screens[t.thumbnailIndex||0]});Ee.meta={name:"getCurrentlySharedScreen",key:"appCallsReduxPeersStoreGetCurrentlySharedScreen"};var je=Object(v.e)(function(e){return e.peers.reacjis});je.meta={name:"getReactions",key:"appCallsReduxPeersStoreGetReactions"};var Se=Object(v.e)(function(e,t){return Object(w.W)(e,ae(e,t).userId)});function Ie(e,t){var n=t.isScreenshareEnabled;if(e.lastRemoteScreensharePeerId!==t.id||n)return n&&t.id||e.lastRemoteScreensharePeerId}Se.meta={name:"getMemberNameByRemotePeerId",key:"appCallsReduxPeersStoreGetMemberNameByRemotePeerId"};var we=Object(v.f)("Set the screen sharing of a peer. If screen sharing is turned on, turn off our screen share",function(e,t,n){var a=n.id,r=n.isScreenshareEnabled;e(K({id:a,isScreenshareEnabled:r})),r&&e(B({id:"self",isScreenshareEnabled:!1}))});we.meta={name:"setRemoteScreenshareAndDisableForSelf",key:"appCallsReduxPeersStoreSetRemoteScreenshareAndDisableForSelf",description:"Set the screen sharing of a peer. If screen sharing is turned on, turn off our screen share"};var Ne=Object(v.f)("Invite new members to an existing call",function(e,t,n){var a=t();Object(k.b)(a.activeCall.id,"Must have an active call to send an invite")&&(n.forEach(function(t){return e(q({userId:t}))}),e(R({id:a.activeCall.id,invitedUserIds:n})))});Ne.meta={name:"inviteMembersToCall",key:"appCallsReduxPeersStoreInviteMembersToCall",description:"Invite new members to an existing call"}},"/6P7":function(e,t,n){},"/7Bh":function(e,t,n){},"/9ln":function(e,t,n){"use strict";var a=n("aK/h"),r=n("QbLZ"),i=n.n(r),o=n("4zXV"),s=n("om+M"),l=n("hOQf"),c=Object(s.a)("Deletes a message",function(e,t,n){var a=n.channelId,r=n.ts,s=n.broadcastDelete,u=n.attempts,d=void 0===u?0:u,p=n.reason;if(Object(l.tb)(r))return Promise.reject(new Error("message_not_found"));var m={channel:a,ts:r};return s&&(m.broadcast_delete=!0),e(Object(o.a)({method:"chat.delete",args:m,reason:p})).catch(function(t){var a=t.data,r=void 0===a?{}:a;if("message_not_found"===r.error&&d<10){return Promise.delay(175).then(function(){return e(c(i()({},n,{attempts:d+1})))})}return Promise.reject(new Error(r.error||"unknown_error"))})});c.meta={name:"chatDeleteApi",key:"fetchersChatDeleteApiChatDeleteApi",description:"Deletes a message"},c.propTypes={channelId:a.b.string,ts:a.b.string,broadcastDelete:a.b.bool,attempts:a.b.number,reason:a.b.string.isRequired};var u=c,d=Object(s.a)("Deletes a join/leave message rollup",function(e,t,n){var a={channel_id:n.channelId,first_message_ts:n.firstMessageTs,last_message_ts:n.lastMessageTs};return e(Object(o.a)({method:"chat.deleteBulkJoinLeave",args:a}))});d.meta={name:"chatDeleteApi",key:"fetchersChatBulkDeleteApiChatDeleteApi",description:"Deletes a join/leave message rollup"},d.propTypes={channelId:a.b.string,firstMessageTs:a.b.string,lastMessageTs:a.b.string};var p=d,m=n("XfeM"),h=n("4M+g"),b=n("DTfP"),f=n("ejSh"),g=n("fYfO"),_=n("pfyZ"),v=n("MhQa"),y=Object(m.b)("Animate a message deletion as well as calling the delete API endpoint",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.channelId,r=n.ts,i=n.broadcastDelete,o=void 0!==i&&i,s=n.rollupTimestamps,c=t(),d=Object(g.a)(c,a,r),m=s&&s.length>1;if(!d)return Promise.resolve();if(m||Object(l.S)(d)||o||e(Object(_.a)({channelId:a,ts:r})),Object(l.tb)(r)||Object(l.bb)(d))return Promise.resolve();if(m){var y=s[0],k=s.pop();return e(p({channelId:a,firstMessageTs:y,lastMessageTs:k}))}return e(u({channelId:a,ts:r,broadcastDelete:o,reason:"animateAndDeleteMessageApi"})).then(function(){if(Object(l.lb)(d)&&!o){var e=Object(h.e)(c,a);Object(v.g)(e,d)}}).catch(function(t){throw"message_not_found"!==t.message&&(e(Object(_.a)({channelId:a,ts:r,isDeleting:!1})),o?e(Object(f.l)({channelId:a,ts:r})):(e(Object(b.b)({channelId:a,timestamps:[r]})),e(Object(f.a)([d])))),t})});y.meta={name:"animateAndDeleteMessageApi",key:"actionsAnimateAndDeleteMessageApiAnimateAndDeleteMessageApi",description:"Animate a message deletion as well as calling the delete API endpoint"},y.propTypes={channelId:a.b.string.isRequired,ts:a.b.string.isRequired,broadcastDelete:a.b.bool,rollupTimestamps:a.b.array};t.a=y},"/FWe":function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("kxpR"),p=n.n(d),m=n("XHGt"),h=n("aK/h"),b=n("TSYQ"),f=n.n(b),g=n("Uk1S"),_=(n("G59f"),h.b.node,h.b.string,h.b.oneOf(["light","dense"]),{className:void 0,children:void 0,theme:"light"}),v=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.children;if("light"===e.theme)return t;var n=f()("c-message_kit__indent",this.props.className);return p.a.createElement("div",{className:n},t)}}]),t}(d.Component);v.displayName="MessageIndent",v.defaultProps=_,t.a=Object(m.b)(function(e){return{theme:Object(g.a)(e)}})(v)},"/PGu":function(e,t,n){},"/Qam":function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("ifKl"),p=n("kxpR"),m=n.n(p),h=n("XHGt"),b=n("aK/h"),f=n("nNoG"),g=n("MREy"),_=n("rz65"),v=n("4Twu"),y=n("llxT"),k=n("od5y"),O=n("RAhH"),C=n("t85p"),E=n("XL7r"),j=n("dxEi"),S=n("7dYf"),I=n("6kok"),w=n("/LVU"),N=n("qN/r"),T=n("jcvV"),A=n("dohy"),R=n("mqzt"),P=n("negh"),M=n("kOzZ"),x=new f.b("do_not_disturb"),F=(b.b.func.isRequired,b.b.object,b.b.object,b.b.func,b.b.func,b.b.func,b.b.object,b.b.func,b.b.bool,b.b.bool,b.b.bool.isRequired,b.b.bool.isRequired,{currentChannel:{},menuProps:{},openDndDialog:d.a,openChannelNotificationPrefsModal:d.a,openPrefsModal:d.a,clogger:{track:d.a},setUserPrefByApi:d.a,showNotificationScheduleNewBadge:!1,featureGranularDnd:!1}),L=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClickDoNotDisturbSchedule=n.onClickDoNotDisturbSchedule.bind(n),n.onClickNotificationPreferences=n.onClickNotificationPreferences.bind(n),n}return u()(t,e),o()(t,[{key:"onClickDoNotDisturbSchedule",value:function(){var e=this.props,t=e.featureGranularDnd,n=e.showNotificationScheduleNewBadge;this.props.openPrefsModal({activeSection:"notifications",activeSubsection:"prefs_dnd"}),t&&n&&this.props.setUserPrefByApi({pref:"dnd_notification_schedule_new_badge_seen",value:!0})}},{key:"onClickNotificationPreferences",value:function(){this.props.openPrefsModal({activeSection:"notifications"})}},{key:"renderSettingsMenuItem",value:function(){var e=this,t=this.props.currentChannel;if(!t.id||Object(I.hb)(t))return null;var n=m.a.createElement(v.a,{channelId:t.id,iconProps:{inherit:!0,align:"baseline"},inline:!0}),a=x.rt("Settings for {name}\u2026",{name:m.a.createElement("strong",null,n),fallbackHash:"c6c4739d1b58eef23e9c67fb55a1961f80e0cf65"});return m.a.createElement(g.b,{label:a,onSelected:function(){return e.props.openChannelNotificationPrefsModal({channelId:t.id,entryPoint:"dnd_disabled_menu"})}})}},{key:"render",value:function(){var e=this,t=this.props,n=t.menuProps,a=t.clogger,r=t.featureGranularDnd,i=t.showNotificationScheduleNewBadge,o=t.featureOfflineMode,s=t.isOffline,l=void 0,c=void 0,u=void 0;return r&&(l=x.t("Do Not Disturb allows you to pause your Slack notifications"),c=m.a.createElement("span",{className:"p-dnd_menu__new_pill"},x.t("NEW")),u=i?m.a.createElement("span",null,x.t("Notification schedule\u2026")," ",c):x.t("Notification schedule\u2026")),m.a.createElement(g.f,n,m.a.createElement(g.c,{label:r?x.t("Do Not Disturb"):x.t("Pause notifications")}),r&&m.a.createElement(O.c,{tip:l,position:"right",zIndex:"above_fs"},m.a.createElement(y.a,{className:"p-dnd_menu_question_button"},m.a.createElement(k.b,{type:"question-circle"}))),m.a.createElement(g.b,{type:_.a.subheaderChild,label:x.t("30 minutes"),onSelected:function(){e.props.snoozeNotifications({duration:30,reason:"DndDisabledMenu:30m"}),a.track(P.EventId.DND_SNOOZE_NOTIFICATIONS,{dnd_duration:30,dnd_preset:P.DndPreset.DURATION_30_MINUTES,dnd_snooze_type:P.DndSnoozeType.SNOOZE_INITIAL})},"data-qa":"snooze_btn_30",disabled:o&&s,showOfflineIcon:o&&s}),m.a.createElement(g.b,{type:_.a.subheaderChild,label:x.t("1 hour"),onSelected:function(){e.props.snoozeNotifications({duration:60,reason:"DndDisabledMenu:1hr"}),a.track(P.EventId.DND_SNOOZE_NOTIFICATIONS,{dnd_duration:60,dnd_preset:P.DndPreset.DURATION_1_HOUR,dnd_snooze_type:P.DndSnoozeType.SNOOZE_INITIAL})},"data-qa":"snooze_btn_60",disabled:o&&s,showOfflineIcon:o&&s}),m.a.createElement(g.b,{type:_.a.subheaderChild,label:x.t("2 hours"),onSelected:function(){e.props.snoozeNotifications({duration:120,reason:"DndDisabledMenu:2hr"}),a.track(P.EventId.DND_SNOOZE_NOTIFICATIONS,{dnd_duration:120,dnd_preset:P.DndPreset.DURATION_2_HOURS,dnd_snooze_type:P.DndSnoozeType.SNOOZE_INITIAL})},"data-qa":"snooze_btn_120",disabled:o&&s,showOfflineIcon:o&&s}),m.a.createElement(g.b,{type:_.a.subheaderChild,label:x.t("4 hours"),onSelected:function(){e.props.snoozeNotifications({duration:240,reason:"DndDisabledMenu:4hr"}),a.track(P.EventId.DND_SNOOZE_NOTIFICATIONS,{dnd_duration:240,dnd_preset:P.DndPreset.DURATION_4_HOURS,dnd_snooze_type:P.DndSnoozeType.SNOOZE_INITIAL})},"data-qa":"snooze_btn_240",disabled:o&&s,showOfflineIcon:o&&s}),m.a.createElement(g.b,{type:_.a.subheaderChild,label:x.t("Until tomorrow"),onSelected:function(){var t=Object(R.d)();e.props.snoozeNotifications({duration:t,reason:"DndDisabledMenu:tomorrow"}),a.track(P.EventId.DND_SNOOZE_NOTIFICATIONS,{dnd_duration:t,dnd_preset:P.DndPreset.DURATION_TOMORROW,dnd_snooze_type:P.DndSnoozeType.SNOOZE_INITIAL})},"data-qa":"snooze_btn_tomorrow",disabled:o&&s,showOfflineIcon:o&&s}),m.a.createElement(g.b,{type:_.a.subheaderChild,label:x.t("Until next week"),onSelected:function(){var t=Object(R.c)();e.props.snoozeNotifications({duration:t,reason:"DndDisabledMenu:week"}),a.track(P.EventId.DND_SNOOZE_NOTIFICATIONS,{dnd_duration:t,dnd_preset:P.DndPreset.DURATION_NEXT_WEEK,dnd_snooze_type:P.DndSnoozeType.SNOOZE_INITIAL})},"data-qa":"snooze_btn_next_week",disabled:o&&s,showOfflineIcon:o&&s}),m.a.createElement(g.b,{type:_.a.subheaderChild,label:x.t("Custom\u2026"),onSelected:function(){e.props.openDndDialog(),a.track(P.EventId.DND_OPEN_CUSTOM_SNOOZE_DIALOG)},"data-qa":"snooze_btn_custom",disabled:o&&s,showOfflineIcon:o&&s}),m.a.createElement(g.d,null),m.a.createElement(g.b,{label:r?u:x.t("Do Not Disturb schedule\u2026"),onSelected:this.onClickDoNotDisturbSchedule}),!r&&m.a.createElement(g.d,null),!r&&this.renderSettingsMenuItem(),!r&&m.a.createElement(g.b,{label:x.t("Your notification preferences\u2026"),onSelected:this.onClickNotificationPreferences}))}}]),t}(p.PureComponent);L.displayName="DndDisabledMenu",L.defaultProps=F;t.a=Object(h.b)(function(e){return{clogger:Object(M.a)({state:e}),featureGranularDnd:Object(C.m)(e,"feature_granular_dnd"),showNotificationScheduleNewBadge:!Object(E.j)(e,"dnd_notification_schedule_new_badge_seen"),featureOfflineMode:Object(C.m)(e,"feature_offline_mode"),isOffline:!Object(j.c)(e)}},function(e){return{snoozeNotifications:function(t){return e(Object(w.e)(t))},openDndDialog:function(){return e(Object(A.a)())},openChannelNotificationPrefsModal:function(t){return e(Object(T.a)(t))},setUserPrefByApi:function(t){return e(Object(S.f)(t))},openPrefsModal:function(t){return e(Object(N.a)(t))}}})(L)},"/UDf":function(e,t,n){},"/VNe":function(e,t,n){},"/X+W":function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n("P1FA");function r(e){return Object(a.a)((e||"").trim().toLowerCase())}},"/e6G":function(e,t,n){},"/gIb":function(e,t,n){},"/xs0":function(e,t,n){"use strict";var a=n("QbLZ"),r=n.n(a),i=n("m1cH"),o=n.n(i),s=n("iCc5"),l=n.n(s),c=n("V7oC"),u=n.n(c),d=n("FYw3"),p=n.n(d),m=n("mRg0"),h=n.n(m),b=n("OL4R"),f=n("+Z1G"),g=n("qAkX"),_=n("kxpR"),v=n("aK/h"),y=n("XHGt"),k=n("RMmo"),O=n("brL+"),C=n("nNoG"),E=n("x3CK"),j=n("lhZz"),S=n("yHhI"),I=n("LWrH"),w=n("gLeh"),N={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},T=Object(b.a)(N),A=(v.b.array.isRequired,v.b.string.isRequired,v.b.string,v.b.func.isRequired,v.b.object.isRequired,v.b.bool,!1),R=function(e){function t(){return l()(this,t),p()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return h()(t,e),u()(t,[{key:"componentDidMount",value:function(){var e=this.props.logger;A?e.error("More than one global key command handler was mounted"):this.initializeKeyCommands()}},{key:"componentDidUpdate",value:function(e){e.keyboardLocale!==this.props.keyboardLocale&&this.keyCommands&&(this.destroyKeyCommands(),this.initializeKeyCommands())}},{key:"componentWillUnmount",value:function(){this.keyCommands&&this.destroyKeyCommands()}},{key:"getFilterFunctionWithInjectedState",value:function(e){var t=this;return function(n){return e(Object(j.getStateByTeamId)(t.props.teamId),t.getMetaDataPayload(n))}}},{key:"getMetaDataPayload",value:function(e){return{event:e,keyCode:Object(C.h)(e.keyCode,{kb:this.props.keyboardLocale,useReverseMap:!0}),isScreenReaderEnabled:this.props.isScreenReaderEnabled}}},{key:"getLocalizedKeys",value:function(e){var t=this.props.keyboardLocale;return t===E.a?e:e.map(function(e){var n=e.split("+"),a=T[Object(g.a)(n)];if(!a)return e;var r=Object(C.h)(a,{kb:t});if(!r)return e;var i=N[r];return i?[].concat(o()(Object(f.a)(n,1)),[i]).join("+"):e})}},{key:"initializeKeyCommands",value:function(){var e=this.props.commands;this.keyCommands=new k.a(window),this.keyCommands.bindAll(this.connectCommandsWithRedux(e)),A=!0}},{key:"destroyKeyCommands",value:function(){this.keyCommands.reset(),this.keyCommands=null,A=!1}},{key:"connectCommandsWithRedux",value:function(e){var t=this;return e.map(function(e){return r()({},e,{keys:t.getLocalizedKeys(e.keys),handler:function(n){t.props.dispatch(e.handler(t.getMetaDataPayload(n)))},filter:e.ignoreIf?t.getFilterFunctionWithInjectedState(e.ignoreIf):void 0})})}},{key:"render",value:function(){return!1}}]),t}(_.PureComponent);R.displayName="GlobalKeyCommandHandler",R.defaultProps={keyboardLocale:null,isScreenReaderEnabled:!1};var P=Object(y.b)(function(e){return{teamId:Object(O.b)(e),logger:Object(S.a)(e),isScreenReaderEnabled:Object(w.b)(e)}})(R);t.a=Object(I.a)(P)},"02hs":function(e,t,n){"use strict";var a=n("Z7NI"),r=n("FQfs");t.a=Object(a.a)(r.a,{useShortMode:!0})},"05X0":function(e,t,n){},"08gB":function(e,t,n){},"0BC7":function(e,t,n){"use strict";var a=n("QbLZ"),r=n.n(a),i=n("m1cH"),o=n.n(i),s=n("iCc5"),l=n.n(s),c=n("V7oC"),u=n.n(c),d=n("FYw3"),p=n.n(d),m=n("mRg0"),h=n.n(m),b=n("xWuZ"),f=n("lE2N"),g=n("7EGn"),_=n("kxpR"),v=n.n(_),y=n("aK/h"),k=n("XHGt"),O=n("1hAG"),C=n("G4ux"),E=n("t85p"),j=n("KGMq"),S=n("5mKg"),I=n("nNoG"),w=n("Smdl"),N=n("x4bP"),T=n("um7Q"),A=n("MREy"),R=new I.b("global_nav"),P=(y.b.object,y.b.arrayOf(y.b.shape({id:y.b.string,name:y.b.string,teams:y.b.arrayOf(y.b.object)})),y.b.arrayOf(y.b.shape({id:y.b.string,name:y.b.string,url:y.b.string})),y.b.string,y.b.string,y.b.string,y.b.bool,y.b.bool,y.b.func.isRequired,{menuProps:void 0,enterprises:[],others:[],currentEnterpriseId:void 0,currentUserId:void 0,signinURL:void 0,featureGlobalNav:!1,featureClassicNav:!1}),M=function(e){function t(e){l()(this,t);var n=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getTeamItem=n.getTeamItem.bind(n),n.getEnterpriseItems=n.getEnterpriseItems.bind(n),n.getOtherItems=n.getOtherItems.bind(n),n}return h()(t,e),u()(t,[{key:"getTeamItem",value:function(e){var t=this.props,n=t.featureGlobalNav,a=t.featureClassicNav;if(!n&&!a)return null;if(!e.url)return null;var r=Object(w.a)()?Object(S.o)({domain:"app"},"client/"+e.id+window.location.search):e.url+("/"===e.url.substr(-1)?"messages":"/messages"),i=e.icons&&(e.icons.image_44||e.icons.image_88);return{label:v.a.createElement(_.Fragment,null,v.a.createElement("div",{className:"p-global_nav__top_switch_workspaces_icon",style:{backgroundImage:"url("+i+")"}}),v.a.createElement("strong",null,e.name)),href:r,target:"_self",showLinkIndicatorIcon:!1}}},{key:"getEnterpriseItems",value:function(){var e=this,t=this.props,n=t.enterprises,a=t.currentEnterpriseId,r=t.currentUserId,i=t.featureGlobalNav,s=t.featureClassicNav;return i||s?Object(b.a)(n.map(function(t){var n=t.teams.map(e.getTeamItem),i=t.id===a&&t.overLimit?{label:R.rt("See all <strong>{enterpriseName}</strong> workspaces",{enterpriseName:t.name}),click:function(){return e.props.openFindMoreWorkspacesModal(r)}}:null;return[{type:"header",label:t.name}].concat(o()(n),[i,{type:"separator"}])})):[]}},{key:"getOtherItems",value:function(){var e=this,t=this.props,n=t.others,a=t.featureGlobalNav,r=t.featureClassicNav;if(!a&&!r)return[];if(!n||!n.length)return[];var i=n.map(function(t){return e.getTeamItem(t)});return[{type:"header",label:R.t("Your other workspaces")}].concat(o()(i))}},{key:"render",value:function(){var e=this.props,t=e.signinURL,n=e.featureGlobalNav,a=e.featureClassicNav,i=e.menuProps;if(!n&&!a)return null;var s=t&&[{type:"separator"},{label:R.t("Sign in to another workspace"),href:t}],l=[].concat(o()(this.getEnterpriseItems()),o()(this.getOtherItems()),o()(s||[]));return v.a.createElement(A.a,r()({},i,{template:l,stripTerminalSeparators:!0}))}}]),t}(_.Component);M.displayName="SwitchWorkspacesSubmenu",M.defaultProps=P;var x={openFindMoreWorkspacesModal:function(){return j.a.apply(void 0,arguments)}};t.a=Object(k.b)(function(e){var t=function(e){var t=Object(E.g)(e).map(function(e){return{id:e.team_id,enterpriseId:e.enterprise_id,url:e.team_url,name:e.team_name,enterpriseName:e.enterprise_name,icons:e.team_icon}});if(!Object(N.a)()){var n=Object(C.b)(e);(Object(g.a)(n,"enterprise_user.teams")||[]).map(function(t){return Object(O.i)(e,t)}).forEach(function(a){t.push({id:a.id,enterpriseId:Object(g.a)(n,"enterprise_user.enterprise_id")||a.enterprise_id,url:Object(T.b)(e,a.domain),name:Object(S.f)(a),enterpriseName:Object(g.a)(n,"enterprise_user.enterprise_name")||a.enterprise_name,icons:a.icon,isUnknown:Object(S.O)(a)})})}var a=Object(O.d)(e),r=a.enterprise_id;t=t.sort(function(e,t){if(r){if(e.enterpriseId===r&&t.enterpriseId!==r)return-1;if(t.enterpriseId===r&&e.enterpriseId!==r)return 1}return!e.isUnknown&&t.isUnknown?-1:!t.isUnknown&&e.isUnknown?1:Object(I.q)(e.name,t.name)});var i=a.id;return t=t.filter(function(e){return e.id!==i}),Object(f.a)(t,"id")}(e);return{enterprises:function(e){var t={};return e.filter(function(e){return e.enterpriseId}).forEach(function(e){var n=e.enterpriseId;t[n]?t[n].teams.length<3?t[n].teams.push(e):t[n].overLimit=!0:t[n]={id:n,name:e.enterpriseName,teams:[e]}}),Object.values(t)}(t),others:t.filter(function(e){return!e.enterpriseId}),currentEnterpriseId:Object(O.d)(e).enterprise_id,currentUserId:Object(E.c)(e),signinURL:Object(E.e)(e,"signin_url"),featureGlobalNav:Object(E.m)(e,"feature_global_nav"),featureClassicNav:Object(E.m)(e,"feature_classic_nav")}},x)(M)},"0Eo7":function(e,t,n){},"0Mct":function(e,t,n){"use strict";var a=n("XfeM"),r=n("S3eg"),i=n("5tH5"),o=Object(a.b)("Switches to the All Threads view",function(e){e(Object(r.a)({id:i.a.allThreads}))});o.meta={name:"openThreadsView",key:"actionsOpenThreadsViewOpenThreadsView",description:"Switches to the All Threads view"},t.a=o},"0Qg5":function(e,t,n){"use strict";n.d(t,"a",function(){return b}),n.d(t,"b",function(){return g});var a=n("QbLZ"),r=n.n(a),i=n("jo6Y"),o=n.n(i),s=n("NFsq"),l=n("HI9p"),c=n("nNoG"),u=n("x3CK"),d=n("rWF5"),p=n("g5qt"),m=new c.b("shortcuts_flexpane"),h=/key_(Cmd|Option|Ctrl|CtrlAlternative|ShiftAlternative)/,b=function(e,t){var n=Object(d.B)(),a=Object(d.o)(),r=n||a;return"Cmd"!==e&&"Ctrl"!==e||!r||"de"!==t?"Cmd"===e&&r?"Ctrl":"Option"===e&&r?"Alt":"CtrlAlternative"===e?"Ctrl":"ShiftAlternative"===e?"Shift":e:"Strg"},f=function(e){return function(t){var n=t.keys,a=t.keysWin,i=t.keysLinux,s=o()(t,["keys","keysWin","keysLinux"]);if(Object(d.B)()&&a)return r()({},s,{keys:a});if(Object(d.o)()&&i)return r()({},s,{keys:i});var l=function(e){return function(t){if(!h.test(t))return t;var n=t.split("key_")[1];if(!n)return t;var a=b(n,e);return t.replace(n,a)}}(e);return r()({},s,{keys:n.map(l)})}},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.keyboardLocale,n=e.enableUnreadView,a=e.featureWysiwygComposer,i=e.featureWysiwygCodeBlockShortcut,c=e.featureContextualMessageShortcuts,h=void 0!==c&&c,b=[{title:m.t("Basics"),id:"basics",shortcuts:[{title:m.t("Quick Switcher"),keys:p.Q?["key_Cmd","key_K","  or  ","key_T"]:["key_Cmd","key_K"],hasInfoButton:!0,infoButtonMessage:m.t("Jump to another conversation by just typing its name"),id:"quick_switcher"},{title:m.t("Browse DMs"),keys:["key_Cmd","key_Shift","key_K"],id:"browse_dms"},{title:m.t("Browse channels",{ns:"channel_browser"}),keys:["key_Cmd","key_Shift","key_L"],id:"browse_channels"},{title:m.t("Edit last message (in empty text input)"),keys:h?["key_Cmd","key_\u2191"]:["key_\u2191"]},{title:m.t("Back in history"),keys:["key_Cmd","key_["],keysWin:["key_Alt","key_\u2190"],keysLinux:["key_Alt","key_\u2190"],localeBlackList:["de","fr"]},{title:m.t("Forward in history"),keys:["key_Cmd","key_]"],keysWin:["key_Alt","key_\u2192"],keysLinux:["key_Alt","key_\u2192"],localeBlackList:["de","fr"]},{title:m.t("Back in history"),keys:["key_Cmd","key_\u2190"],keysWin:["key_Alt","key_\u2190"],keysLinux:["key_Alt","key_\u2190"],localeBlackList:["us","gb","es","ja"]},{title:m.t("Forward in history"),keys:["key_Cmd","key_\u2192"],keysWin:["key_Alt","key_\u2192"],keysLinux:["key_Alt","key_\u2192"],localeBlackList:["us","gb","es","ja"]},{title:m.t("All Unreads"),keys:["key_Cmd","key_Shift","key_A"],id:"open_all_unreads"},{title:m.t("Threads"),keys:["key_Cmd","key_Shift","key_T"],id:"open_all_threads",isSsbOnly:!0},{title:m.t("Search"),keys:["key_Cmd","key_F"],isSsbOnly:!0},{title:m.t("Dismiss dialogs"),keys:["key_Esc"]}]},{title:m.t("Navigation"),id:"navigation",shortcuts:[{title:m.t("Move focus to the next element"),keys:["key_Tab"]},{title:m.t("Move focus to the previous element"),keys:["key_Shift","key_Tab"]},{title:m.t("Move focus through messages"),keys:["key_\u2191","  or  ","key_\u2193"]},{title:m.t("Move focus to the next section"),keys:p.Q?["key_F6"]:["key_Cmd","key_F6"]},{title:m.t("Move focus to the previous section"),keys:p.Q?["key_Shift","key_F6"]:["key_Cmd","key_Shift","key_F6"]},{title:m.t('Take action or "click" on selected element'),keys:["key_Enter"]},{title:m.t("Increase text size"),keys:["key_Cmd","key_+"]},{title:m.t("Decrease text size"),keys:["key_Cmd","key_-"]},{title:m.t("Scroll up"),keys:["key_\u2191","  or  ","key_Page Up"]},{title:m.t("Scroll down"),keys:["key_\u2193","  or  ","key_Page Down"]},{title:m.t("Scroll to previous day"),keys:["key_Shift","key_Page Up"]},{title:m.t("Scroll to next day"),keys:["key_Shift","key_Page Down"]},{title:m.t("Preferences"),keys:["key_Cmd","key_,"],id:"open_preferences",isSsbOnly:!0,browserBlackList:["windows","linux"]},{title:m.t("Close or re-open right pane",{fallbackHash:"1b790540b5c4590525e4706f1e3023888862a175"}),keys:["key_Cmd","key_"+Object(u.c)(".",{kb:t})]},{title:m.t("Channel Info"),keys:["key_Cmd","key_Shift","key_I"],isSsbOnly:!0},{title:m.t("Activity"),keys:["key_Cmd","key_Shift","key_M"],browserBlackList:["chrome"]},{title:m.t("Directory"),keys:["key_Cmd","key_Shift","key_E"],browserBlackList:["firefox"]},{title:m.t("Starred items"),keys:["key_Cmd","key_Shift","key_S"],browserBlackList:["firefox"]},{title:m.t("Toggle full screen"),keys:["key_Ctrl","key_Cmd","key_F"],keysWin:["key_Ctrl","key_Shift","key_F"],keysLinux:["key_Ctrl","key_Shift","key_F"]}]},{title:m.t("Messaging"),id:"messaging",shortcuts:[{title:m.t("Select text to beginning of current line"),keys:["key_Shift","key_\u2191"]},{title:m.t("Select text to end of current line"),keys:["key_Shift","key_\u2193"]},{title:m.t("Start a new line"),keys:["key_Shift","key_Enter"]},{title:m.t("React to last message (or message with focus)"),keys:["key_Cmd","key_Shift","key_"+Object(u.c)("\\",{kb:t})]},{title:m.t("Autocomplete @username"),keys:["key_@"]},{title:m.t("Autocomplete channel"),keys:["key_#"]},{title:m.t("Autocomplete emoji"),keys:["key_:"]}]},{title:m.t("Mark Messages Read and Unread"),shortcuts:[{title:m.t("Mark all messages in current channel as read"),keys:["key_Esc"]},{title:m.t("Mark all messages as read"),keys:["key_Shift","key_Esc"]},{title:m.t("Mark a message as unread"),keys:["key_Option",m.t("  and click message")],keysWin:["key_Alt",m.t("  and click message")],keysLinux:["key_Alt",m.t("  and click message")]}]},{title:m.t("Channels & Direct Messages"),shortcuts:[{title:m.t("Previous channel or DM"),keys:["key_Option","key_\u2191"]},{title:m.t("Next channel or DM"),keys:["key_Option","key_\u2193"]},{title:m.t("Previous unread channel or DM"),keys:["key_Option","key_Shift","key_\u2191"]},{title:m.t("Next unread channel or DM"),keys:["key_Option","key_Shift","key_\u2193"]}]},{title:m.t("All Unreads"),id:"all_unreads",shortcuts:[{title:m.t("Expand channel"),keys:["key_\u2192"]},{title:m.t("Collapse channel"),keys:["key_\u2190"]},{title:m.t("Mark channel as read"),keys:["key_Esc"]},{title:m.t("Previous channel"),keys:["key_Shift","key_Page Up"]},{title:m.t("Next channel"),keys:["key_Shift","key_Page Down"]}]},{title:m.t("Files and Snippets"),shortcuts:[{title:m.t("Add a file",{fallbackHash:"454a8bf181f08812db03551730d074d78ce5743f"}),keys:["key_Cmd","key_U"],browserBlackList:["firefox"]},{title:m.t("Create a snippet"),keys:["key_Cmd","key_Shift","key_Enter"]}]},{title:m.t("Calls"),shortcuts:[{title:m.t("Toggle mute"),keys:["key_M"]},{title:m.t("Toggle video"),keys:["key_V"]},{title:m.t("Invite list"),keys:["key_+",m.t("  or  "),"key_A"]},{title:m.t("Emoji reactions"),keys:["key_E",m.t("  then 1-9")]}]},{title:m.t("Workspace Switching"),id:"workspaces",shortcuts:[{title:m.t("Next workspace"),keys:["key_Cmd","key_Shift","key_["],keysWin:["key_Ctrl","key_Tab"]},{title:m.t("Previous workspace"),keys:["key_Cmd","key_Shift","key_]"],keysWin:["key_Ctrl","key_Shift","key_Tab"]},{title:m.t("A specific workspace"),keys:["key_Cmd",m.t("  and 1-9")]}]}];h&&b.push({title:m.t("When focused on a message"),id:"message_shortcuts",shortcuts:[{title:m.t("Edit (your own message)"),keys:["key_E"]},{title:m.t("Delete (your own message)"),keys:["key_Delete"]},{title:m.t("Add an emoji reaction"),keys:["key_R"]},{title:m.t("Open a thread"),keys:["key_\u2192",m.t("or"),"key_T"]},{title:m.t("Pin / unpin"),keys:["key_P"]},{title:m.t("Share"),keys:["key_S"]},{title:m.t("Star / unstar"),keys:["key_A"]},{title:m.t("Mark as unread from this message"),keys:["key_U"]},{title:m.t("Remind me about this message"),keys:["key_M"]}]});var g=b[Object(l.a)(b,["id","basics"])].shortcuts,_=b[Object(l.a)(b,["id","navigation"])].shortcuts,v=b[Object(l.a)(b,["id","messaging"])].shortcuts;p.Q&&_.push({title:m.t("Jump to unread messages"),keys:["key_Cmd","key_J"]}),v.push({title:m.t("Bold text"),keys:["key_Cmd","key_B"]}),v.push({title:m.t("Italic text"),keys:["key_Cmd","key_I"]}),v.push({title:m.t("Strikethrough text"),keys:["key_Cmd","key_Shift","key_X"]}),v.push({title:m.t("Format text as code"),keys:["key_Cmd","key_Shift","key_C"]}),p.Q&&!Object(d.v)("3.0.0")||(v.push({title:m.t("Format selection as bullet list"),keys:["key_Cmd","key_Shift","key_8"]}),v.push({title:m.t("Format selection as numbered list"),keys:["key_Cmd","key_Shift","key_7"]})),a?v.push({title:m.t("Format selection as quote"),keys:["key_Cmd","key_Shift","key_9"]}):v.push({title:m.t("Format selection as quote"),keys:["key_Cmd","key_Shift","key_>"]}),i&&v.push({title:m.t("Format selection as code block"),keys:["key_Cmd","key_Alt","key_Shift","key_c"]}),g.push({title:m.t("Set a status"),keys:["key_Cmd","key_Shift","key_Y"],id:"set_a_status"});var y=function(e){var t=e.keyboardLocale,n=e.enableUnreadView;return function(e){var a=p.Q?"":Object(d.g)(),r=Object(d.i)();if(e.isSsbOnly&&!p.Q)return!1;var i=e.browserBlackList||[];return!(Object(s.a)(i,a)||Object(s.a)(i,r)||Object(s.a)(e.localeBlackList,t)||"open_all_unreads"===e.id&&!n)}}({keyboardLocale:t,enableUnreadView:n}),k=f(t);return b.map(function(e){var t=e.shortcuts,n=o()(e,["shortcuts"]);return r()({},n,{shortcuts:t.filter(y).map(k)})})}},"0agN":function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("ifKl"),p=n("kxpR"),m=n.n(p),h=n("aK/h"),b=n("tn36"),f=n("XHGt"),g=n("x3CK"),_=n("rWF5"),v=n("nNoG"),y=n("XL7r"),k=n("Zr7G"),O=n("Smdl"),C=n("LWrH"),E=n("Kdk+"),j=n("sIET"),S=n("a+Oh"),I=n("t85p"),w=n("x4bP"),N=n("XfeM"),T=n("vVZ5"),A=n("eqKo"),R=n("d24p"),P=n("QOdn"),M=n("qN/r"),x=n("0Mct"),F=n("Nc5J"),L=n("ROZo"),D=Object(L.b)("TS.ui.react_keyboard_shortcuts.executeShortcut",function(){return null}),U=Object(N.b)("Run a keyboard shortcut without the keyboard",function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).id,a=t();"browse_dms"===n&&Object(I.m)(a,"feature_sonic_dm_browser")?e(Object(R.a)()):"open_preferences"!==n?"open_all_threads"!==n?"open_all_unreads"!==n?"browse_channels"!==n?Object(w.a)()?"set_a_status"===n?e(Object(A.a)()):"quick_switcher"===n?e(Object(T.a)()):"open_all_unreads"===n&&e(Object(F.a)()):D(n):e(Object(P.a)()):e(Object(F.a)()):e(Object(x.a)()):e(Object(M.a)())});U.meta={name:"executeKeyboardShortcut",key:"componentsFlexpaneKeyboardShortcutsUtilityExecuteKeyboardShortcutExecuteKeyboardShortcut",description:"Run a keyboard shortcut without the keyboard"},U.propTypes={id:h.b.oneOf(["open_all_unreads","set_a_status","browse_dms","browse_channels","quick_switcher","open_preferences","open_all_threads"]).isRequired};var B=U,q=n("0Qg5"),H=n("s/YD"),W=n("m1cH"),G=n.n(W),K=n("QbLZ"),V=n.n(K),z=n("uPpK"),Y=n("TSYQ"),Q=n.n(Y),X=n("oUPN"),J=n("fp5s"),Z=n("RAhH"),$=n("hOGb"),ee=n("ynxK"),te=n("18Pa"),ne=(n("/e6G"),new v.b("keyboard_shortcuts")),ae=(h.b.oneOfType([h.b.string,h.b.object]),h.b.array,h.b.bool,h.b.string,h.b.string,h.b.func,h.b.object,{title:"",keys:[],hasInfoButton:!1,infoButtonMessage:"",id:null,executeKeyboardShortcut:d.a,telemeter:{count:d.a}}),re=function(e){function t(){r()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.execShortcut=e.execShortcut.bind(e),e}return u()(t,e),o()(t,null,[{key:"makeAriaLabel",value:function(e){var t=e.title,n=(e.keys||[]).map(function(e){var t=e.split("key_")[1];return t?Object($.b)(t):e}).join(" ");return ne.t("{shortcutTitle}: {keyNames}",{shortcutTitle:t,keyNames:n})}}]),o()(t,[{key:"execShortcut",value:function(){this.props.executeKeyboardShortcut({id:this.props.id}),this.props.telemeter.count("clicked_keyboard_shortcut")}},{key:"renderKeys",value:function(){var e=this.props,t=e.keys,n=e.title;return t.map(function(e){var t=e.split("key_")[1];return t?m.a.createElement($.a,{label:t,key:n+" "+e+" "+Object(J.a)()}):e})}},{key:"renderInfoButton",value:function(){return m.a.createElement(Z.c,{tip:this.props.infoButtonMessage,delay:Z.b},m.a.createElement(te.a,{className:"p-shortcuts_flexpane__tip",icon:"question-circle"}))}},{key:"renderTitle",value:function(){var e=this.props.hasInfoButton?this.renderInfoButton():null,t=this.props.title;return null==this.props.id?m.a.createElement(p.Fragment,null,t,e):m.a.createElement(p.Fragment,null,m.a.createElement(ee.a,{type:"button",onClick:this.execShortcut},t),e)}},{key:"render",value:function(){return m.a.createElement("div",{className:"p-shortcuts_flexpane__shortcut"},m.a.createElement("div",{className:"p-shortcuts_flexpane__shortcut_title"},this.renderTitle()),m.a.createElement("div",{className:"p-shortcuts_flexpane__shortcut_keys"},this.renderKeys()))}}]),t}(m.a.PureComponent);re.displayName="Shortcut",re.defaultProps=ae;var ie=re,oe=(n("fHJC"),new v.b("shortcuts_flexpane")),se=(h.b.arrayOf(h.b.object.isRequired),h.b.func,h.b.object,h.b.func,h.b.string,h.b.func,{items:[],executeKeyboardShortcut:d.a,telemeter:{count:d.a},onItemTabWithin:d.a,focusKey:null,setFocusKey:d.a}),le=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(b.a)(n,["renderItem","isFocusableItem","focus","renderLabelForRow"]),n.list=m.a.createRef(),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.focusKey,n=e.items;"keyboard_shortcuts"===t&&n.length&&(this.setFocusOnFirstItem(),this.clearFocusKey())}},{key:"componentDidUpdate",value:function(e){var t=e.focusKey,n=this.props,a=n.focusKey,r=n.items;"keyboard_shortcuts"===a&&a!==t&&r.length&&(this.setFocusOnFirstItem(),this.clearFocusKey()),"keyboard_shortcuts"===a&&r.length&&(this.setFocusOnFirstItem(),this.clearFocusKey())}},{key:"setFocusOnFirstItem",value:function(){var e=this.getItemKeys()[1],t=this.list.current;t&&t.focusOnKey(e)}},{key:"getItemKeys",value:function(){return this.rows.map(function(e){return e.key})}},{key:"clearFocusKey",value:function(){this.props.setFocusKey(null)}},{key:"focus",value:function(){var e=this.list.current;e&&e.focus()}},{key:"isFocusableItem",value:function(e){var t=e.index,n=this.rows[t];return n&&"shortcut"===n.type}},{key:"createRows",value:function(){return this.props.items.reduce(function(e,t,n){var a=t.shortcuts.map(function(e,t){return V()({type:"shortcut",key:"shortcut-"+n+"-"+t},e)});return[].concat(G()(e),[{type:"header",key:"header-"+n,title:t.title,subtitle:t.subtitle}],G()(a))},[])}},{key:"renderItem",value:function(e){var t=this.rows[e];if(!t||!t.type)return null;var n=this.props,a=n.executeKeyboardShortcut,r=n.telemeter;if("shortcut"===t.type)return m.a.createElement(ie,{title:t.title,hasInfoButton:t.hasInfoButton,infoButtonMessage:t.infoButtonMessage,id:t.id,executeKeyboardShortcut:a,telemeter:r,keys:t.keys});var i=Q()("p-shortcuts_flexpane__shortcut_heading",{"p-shortcuts_flexpane__shortcut_heading_first":0===e});return"header"===t.type?m.a.createElement(p.Fragment,null,m.a.createElement("h3",{className:i},t.title),t.subtitle&&m.a.createElement("h4",{className:"p-shortcuts_flexpane__shortcut_sub_heading"},t.subtitle)):null}},{key:"renderLabelForRow",value:function(e){var t=e.index,n=this.rows[t];if(n&&n.type&&"shortcut"===n.type)return{"aria-label":ie.makeAriaLabel({title:n.title,keys:n.keys})}}},{key:"render",value:function(){var e=this;this.rows=this.createRows();var t=this.getItemKeys();return m.a.createElement(z.a,null,function(n){var a=n.width,r=n.height;return m.a.createElement(X.a,{className:"p-shortcuts_flexpane__list",ref:e.list,width:a,height:r,keys:t,rowRenderer:e.renderItem,getPropsForItem:e.renderLabelForRow,animateOnScroll:!1,"aria-label":oe.t("Keyboard Shortcuts"),isFocusableItem:e.isFocusableItem,onItemTabWithin:e.props.onItemTabWithin})})}}]),t}(p.PureComponent);le.displayName="KeyboardShortcutsList",le.defaultProps=se;var ce=le;n("445Q");n.d(t,"a",function(){return me});h.b.string,h.b.string,h.b.arrayOf(h.b.shape({title:h.b.string,shortcuts:h.b.arrayOf(h.b.shape({os:h.b.oneOf(["windows","mac","linux"]),browser:h.b.string,title:h.b.oneOfType([h.b.string,h.b.object]),keys:h.b.array,keysLinux:h.b.array,keysWin:h.b.array,hasInfoButton:h.b.bool,infoButtonMessage:h.b.string,id:h.b.string,isSsbOnly:h.b.bool,browserBlackList:h.b.array}))})),h.b.bool,h.b.func,h.b.object,h.b.string,h.b.func,h.b.bool,h.b.bool,h.b.bool;var ue={className:void 0,sections:void 0,keyboardLocale:null,enableUnreadView:!1,executeKeyboardShortcut:d.a,telemeter:{count:d.a},focusKey:null,setFocusKey:d.a,featureWysiwygComposer:!1,featureWysiwygCodeBlockShortcut:!1,featureContextualMessageShortcuts:!1},de=new v.b("shortcuts_flexpane"),pe=Object(_.i)(),me=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(b.a)(n,["renderBody","renderSubtitle","focus","onItemTabWithin"]),n.list=m.a.createRef(),n.flexpane=m.a.createRef(),n}return u()(t,e),o()(t,[{key:"onItemTabWithin",value:function(){var e=this.flexpane.current;e&&e.setInitialActiveSection()}},{key:"focus",value:function(){var e=this.list.current;e&&e.focus()}},{key:"renderSubtitle",value:function(){var e="mac"===pe?de.t("Cmd"):de.t("Ctrl"),t=Object(g.c)("/",{kb:this.props.keyboardLocale});return de.rt('Press <span className="c-keyboard_key c-keyboard_key--slim">{headerCmdButton}</span><span className="c-keyboard_key c-keyboard_key--slim">{headerSlashButton}</span> to toggle this panel.',{headerCmdButton:e,headerSlashButton:t})}},{key:"renderBody",value:function(){var e=this.props,t=e.keyboardLocale,n=e.enableUnreadView,a=e.featureWysiwygComposer,r=e.featureWysiwygCodeBlockShortcut,i=e.executeKeyboardShortcut,o=e.focusKey,s=e.setFocusKey,l=e.telemeter,c=e.featureContextualMessageShortcuts,u=this.props.sections||Object(q.b)({keyboardLocale:t,enableUnreadView:n,featureWysiwygComposer:a,featureWysiwygCodeBlockShortcut:r,featureContextualMessageShortcuts:c});return m.a.createElement(ce,{ref:this.list,items:u,keyboardLocale:t,executeKeyboardShortcut:i,telemeter:l,onItemTabWithin:this.onItemTabWithin,focusKey:o,setFocusKey:s})}},{key:"render",value:function(){var e=de.t("Keyboard Shortcuts");return m.a.createElement(H.b,{className:this.props.className,ref:this.flexpane,focus:this.focus,renderSubtitle:this.renderSubtitle,renderBody:this.renderBody,title:e,kbNavOrder:Object(O.a)()?void 0:4.6,viewId:"shortcuts"})}}]),t}(m.a.PureComponent);me.displayName="KeyboardShortcutsFlexpane",me.defaultProps=ue;var he=Object(f.b)(function(e){return{enableUnreadView:Object(y.j)(e,"enable_unread_view"),telemeter:Object(k.c)({state:e}),focusKey:Object(E.a)(e),featureWysiwygComposer:Object(S.a)(e),featureWysiwygCodeBlockShortcut:Object(I.m)(e,"feature_wysiwyg_code_block_shortcut"),featureContextualMessageShortcuts:Object(I.m)(e,"feature_contextual_message_shortcuts")}},function(e){return{executeKeyboardShortcut:function(){return e(B.apply(void 0,arguments))},setFocusKey:function(t){return e(Object(j.a)(t))}}})(me);t.b=Object(C.a)(he)},"0dCl":function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return ee});var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("UXvI"),p=n("ifKl"),m=n("kxpR"),h=n.n(m),b=n("rEtx"),f=n.n(b),g=n("9rZX"),_=n.n(g),v=n("7B0+"),y=n("aK/h"),k=n("TSYQ"),O=n.n(k),C=n("XHGt"),E=n("lhZz"),j=n("s/0T"),S=n("yHhI"),I=n("+Lv6"),w=n("IY6O"),N=n("gLeh"),T=n("mNhP"),A=n("Z7Ay"),R=n("g5qt"),P=n("4lvZ"),M=n("t1Oe"),x=n("c+ts"),F=n("jfx7"),L=n("p9qW"),D=n("Tc5z"),U=n("Gogr"),B=n("yw6X"),q=n("R//h"),H=n("7R01"),W=n("Mv5p"),G=(n("TY84"),n("fj0Z")),K=n("DEaQ"),V=n("xRgT"),z=n("lV17"),Y=(n("ztz9"),y.b.string,y.b.number,y.b.object,y.b.func,y.b.func,y.b.func,y.b.func,y.b.bool,y.b.bool,y.b.bool,y.b.bool,y.b.bool,y.b.bool,y.b.bool,y.b.bool,{teamId:"",numTeams:0,teamStore:null,handleWindowFocusEvent:p.a,handleWindowUnloadingEvent:p.a,handleWindowMouseDownEvent:p.a,handleWindowKeyDownEvent:p.a,isScreenReaderEnabled:!1,isCustomTitlebarShown:!1,isMainWindowVisible:!1,workspaceFailedToBoot:!1,workspaceIsMigrating:!1,workspaceMigrationIsComplete:!1,workspaceIsAccessLimited:!1,willNavigateToUnbootedWorkspace:!1}),Q=1e4,X={leading:!0,trailing:!1},J=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isMockingTeamSwitch:!1},Object(A.a)("mockSwitchTeams",function(){n.setState(function(){return{isMockingTeamSwitch:!0}}),setTimeout(function(){n.setState(function(){return{isMockingTeamSwitch:!1}})},500)}),n.handleWindowFocus=n.handleWindowFocus.bind(n),n.handleWindowBlur=n.handleWindowBlur.bind(n),n.handleWindowBeforeUnload=n.handleWindowBeforeUnload.bind(n),n.handleWindowDragOver=n.handleWindowDragOver.bind(n),n.handleWindowDrop=n.handleWindowDrop.bind(n),n.handleWindowMouseDown=n.handleWindowMouseDown.bind(n),n.handleWindowKeyDown=Object(d.a)(n.handleWindowKeyDown.bind(n),Q,X),n.handleVisibilityChange=n.handleVisibilityChange.bind(n),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){window.addEventListener("focus",this.handleWindowFocus),window.addEventListener("blur",this.handleWindowBlur),window.addEventListener("beforeunload",this.handleWindowBeforeUnload),window.addEventListener("dragover",this.handleWindowDragOver),window.addEventListener("drop",this.handleWindowDrop),window.addEventListener("mousedown",this.handleWindowMouseDown),window.addEventListener("keydown",this.handleWindowKeyDown),window.addEventListener("visibilitychange",this.handleVisibilityChange);var e=!!(document&&document.hasFocus&&document.hasFocus());this.props.handleWindowFocusEvent({isFocused:e}),(!e||"visible"!==document.visibilityState||R.Q&&!this.props.isMainWindowVisible)&&(Object(E.dispatchForClientStore)(Object(j.c)(!1)),Object(E.dispatchForClientStore)(Object(j.d)(!1)),Object(E.dispatchForClientStore)(Object(j.b)(!1))),Object(W.a)()&&document.body.classList.add("supports_custom_scrollbar")}},{key:"componentDidUpdate",value:function(){R.Q&&!this.props.isMainWindowVisible&&(Object(E.dispatchForClientStore)(Object(j.c)(!1)),Object(E.dispatchForClientStore)(Object(j.d)(!1)),Object(E.dispatchForClientStore)(Object(j.b)(!1)))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("focus",this.handleWindowFocus),window.removeEventListener("blur",this.handleWindowBlur),window.removeEventListener("beforeunload",this.handleWindowBeforeUnload),window.removeEventListener("dragover",this.handleWindowDragOver),window.removeEventListener("drop",this.handleWindowDrop),window.removeEventListener("mousedown",this.handleWindowMouseDown),window.removeEventListener("keydown",this.handleWindowKeyDown),window.removeEventListener("visibilitychange",this.handleVisibilityChange)}},{key:"handleWindowFocus",value:function(){Object(S.b)().info("FOCUS-EVENT","Client window focused"),this.props.handleWindowFocusEvent({isFocused:!0})}},{key:"handleWindowBlur",value:function(){Object(S.b)().info("FOCUS-EVENT","Client window blurred"),this.props.handleWindowFocusEvent({isFocused:!1}),Object(E.dispatchForClientStore)(Object(j.c)(!1))}},{key:"handleVisibilityChange",value:function(){"visible"!==document.visibilityState&&Object(E.dispatchForClientStore)(Object(j.c)(!1))}},{key:"handleWindowBeforeUnload",value:function(){Object(S.b)().info("WINDOW-UNLOADING","Client window is unloading"),this.props.handleWindowUnloadingEvent({isUnloading:!0})}},{key:"handleWindowDragOver",value:function(e){return e.preventDefault(),!1}},{key:"handleWindowDrop",value:function(e){return e.preventDefault(),!1}},{key:"handleWindowMouseDown",value:function(){this.props.handleWindowMouseDownEvent()}},{key:"handleWindowKeyDown",value:function(){this.props.handleWindowKeyDownEvent()}},{key:"renderMockSwitchTeamsDisplay",value:function(){return h.a.createElement("div",{style:{height:"100vh",width:"100vw",display:"flex",alignItems:"center",justifyContent:"center"}},h.a.createElement("h1",null,"Pretending to switch teams, will switch back shortly"))}},{key:"renderActiveMigrationView",value:function(){var e=this.props,t=e.teamId,n=e.workspaceFailedToBoot,a=e.workspaceMigrationIsComplete;if(!n)return null;var r=Object(U.d)(t,"name"),i=Object(U.d)(t,"enterprise_name");return h.a.createElement("span",{id:"migration_blocker_page__wrapper",className:"p-migration_blocker_page__wrapper"},h.a.createElement(B.a,{enterpriseName:i,teamId:t,teamName:r,migrationIsComplete:a}))}},{key:"renderBootErrorView",value:function(){var e=this.props,t=e.workspaceFailedToBoot,n=e.workspaceIsAccessLimited;return t?h.a.createElement(G.a,{isAccessLimited:n,shouldRetry:!0}):null}},{key:"renderWorkspace",value:function(){var e=this.props,t=e.workspaceFailedToBoot;if(e.workspaceIsMigrating)return this.renderActiveMigrationView();if(t)return this.renderBootErrorView();return h.a.createElement(z.a,{teamId:this.props.teamId,renderSonicMenu:function(e){return h.a.createElement(K.a,{menuProps:e})}})}},{key:"renderMainContent",value:function(){var e=this.state.isMockingTeamSwitch,t=this.props.willNavigateToUnbootedWorkspace;return e?this.renderMockSwitchTeamsDisplay():t?h.a.createElement(F.a,null):this.renderWorkspace()}},{key:"render",value:function(){var e=this.props,t=e.numTeams,n=e.teamId,a=e.teamStore,r=Object(E.getClientStoreInstance)(),i=Object(L.a)({numTeams:t}),o=i?h.a.createElement(C.a,{store:r},h.a.createElement(V.a,{className:"p-client__team_sidebar",selectedTeamId:n})):null,s=O()("p-client",{"p-client--show-team-sidebar":i,"p-client--custom-titlebar":this.props.isCustomTitlebarShown});return h.a.createElement(m.Fragment,null,h.a.createElement(x.a,null),h.a.createElement(M.a,{isScreenReaderEnabled:this.props.isScreenReaderEnabled},h.a.createElement(C.a,{key:n,store:a},h.a.createElement(q.a,null,h.a.createElement(P.a,{store:a},h.a.createElement(H.a,null,h.a.createElement("div",{className:s},h.a.createElement(I.b,null,o,h.a.createElement(I.b,null,this.renderMainContent())))))))))}}]),t}(m.Component);J.displayName="Client",J.defaultProps=Y;var Z={handleWindowFocusEvent:function(){return T.a.apply(void 0,arguments)},handleWindowUnloadingEvent:function(){return T.d.apply(void 0,arguments)},handleWindowMouseDownEvent:function(){return T.c.apply(void 0,arguments)},handleWindowKeyDownEvent:function(){return T.b.apply(void 0,arguments)}},$=Object(v.hot)(e)(Object(C.b)(function(e){var t=Object(w.getFocusedWorkspace)(e),n=Object(w.getNumberOfWorkspaces)(e),a=Object(E.getStoreInstanceByTeamId)(t),r=a&&a.getState();return{teamId:t,teamStore:a,numTeams:n,isScreenReaderEnabled:Object(N.b)(r),workspaceIsMigrating:Object(w.isWorkspaceMigrating)(e,t),workspaceMigrationIsComplete:Object(w.isWorkspaceMigrationComplete)(e,t),workspaceIsAccessLimited:Object(w.isWorkspaceAccessLimited)(e,t),isCustomTitlebarShown:Object(D.k)(e),isMainWindowVisible:Object(D.m)(e),workspaceFailedToBoot:Object(w.hasWorkspaceFailedToBoot)(e,t),willNavigateToUnbootedWorkspace:!!Object(w.getWillNavigateToUnbootedWorkspaceId)(e)}},Z)(J));function ee(e,t){var n=Object(E.getClientStoreInstance)(),a=Object(w.getFocusedWorkspace)(n.getState()),r=function(){f.a.render(h.a.createElement(C.a,{store:n},h.a.createElement($,null)),e,t)};Object(S.a)({teamId:a}).info("BOOT","("+a+") Mounting client"),r(),_.a.setAppElement(e),Object(A.a)("mountClient",function(){r()}),Object(A.a)("unmountClient",function(){f.a.unmountComponentAtNode(e)})}}).call(this,n("3UD+")(e))},"0gKA":function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("ifKl"),p=n("kxpR"),m=n.n(p),h=n("aK/h"),b=n("XHGt"),f=n("tn36"),g=n("TSYQ"),_=n.n(g),v=n("yPgC"),y=n("negh"),k=n("kOzZ"),O=n("BUzq"),C=n("0F/N"),E=n("t85p"),j=n("uvIC"),S=n("4M+g"),I=n("fYfO"),w=n("miRO"),N=n("oRxB"),T=n("dxEi"),A=n("iZHp"),R=n("hhak"),P=n("hOGb"),M=n("QbLZ"),x=n.n(M),F=n("4zXV"),L=n("om+M"),D=n("Y/4G"),U=Object(L.a)("Adds a reminder for a message via API call",function(e,t,n){var a=D.a.generateAndEnqueue(t()),r=x()({},n,{client_token:a});return e(Object(F.a)({method:"reminders.addFromMessage",args:r}))});U.meta={name:"addReminderForMessage",key:"fetchersMessageActionsApiAddReminderForMessage",description:"Adds a reminder for a message via API call"},U.propTypes={time:h.b.oneOf(["In 20 minutes","In 1 hour","In 3 hours","Tomorrow","Next week","Custom"]).isRequired,message_channel:h.b.string.isRequired,message_ts:h.b.string.isRequired,respond_in_channel:h.b.bool};var B=n("hOQf"),q=n("h9PG"),H=n("8dKT"),W=n("ICFZ"),G=n("nNoG"),K=n("Smdl"),V=n("PM8X"),z=n("ROZo"),Y=(Object(z.b)("TS.replies.promiseToGetSubscriptionState",function(){return Promise.resolve()}),Object(z.b)("TS.replies.setSubscriptionState")),Q=(Object(z.b)("TS.replies.getSubscriptionState"),Object(z.b)("TS.replies.canReplyToMsg"),Object(z.b)("TS.replies.requestOfflineThread"),Object(z.b)("TS.replies.dispatchThreadSyncedSig"),n("2Zgd")),X=n("wMtF"),J=n("J19L"),Z=n("1yga"),$=n("auxT"),ee=n("aLpA"),te=n("dhvi"),ne=n("MREy"),ae=n("jo6Y"),re=n.n(ae),ie=n("m1cH"),oe=n.n(ie),se=n("TGBA"),le=n("m8R6"),ce=n("NFsq"),ue=n("Z0Cl"),de=n("6FZx"),pe=n("BWAg"),me=n("XfeM"),he=n("zmn3"),be=n("hbEN"),fe=n("qcAq"),ge=n("U/ze"),_e=n("n2GJ"),ve=new G.b("message"),ye={ts:h.b.string.isRequired,channelId:h.b.string.isRequired},ke=Object(ge.b)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.ts,a=t.channelId,r=Object(I.a)(e,a,n);return r&&Object(B.e)(e,r)?{id:ee.T.addReaction,name:ve.t("Add reaction"),iconType:"add-reaction","data-qa":"add_reaction_menu_item",frecencyId:Object(_e.f)("add_reaction"),uiElement:y.UiElement.ADD_REACTION_BUTTON}:null});ke.meta={name:"addReaction",key:"componentsMessageActionSelectorsAddReactionAddReaction"},ke.propTypes=ye;var Oe=ke,Ce=new G.b("message"),Ee={ts:h.b.string.isRequired,channelId:h.b.string.isRequired},je=Object(ge.b)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.ts,a=t.channelId,r=Object(I.a)(e,a,n);if(!r)return null;var i=Object(S.e)(e,a);if(!Object(B.r)(e,{message:r,channel:i}))return null;var o=Ce.t("Start a thread"),s=y.UiElement.START_A_THREAD_BUTTON;return(Object(B.ub)(r)||Object(B.S)(r))&&(o=Ce.t("Reply to thread"),s=y.UiElement.REPLY_TO_THREAD_BUTTON),{id:ee.T.comment,name:o,iconType:"comment-alt","data-qa":"start_thread_menu",frecencyId:Object(_e.f)("thread_reply"),uiElement:s}});je.meta={name:"comment",key:"componentsMessageActionSelectorsCommentComment"},je.propTypes=Ee;var Se=je,Ie=new G.b("message"),we={ts:h.b.string.isRequired,channelId:h.b.string.isRequired},Ne=Object(ge.b)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.ts,a=t.channelId,r=Object(I.a)(e,a,n);if(!r)return null;var i=Object(S.e)(e,a);return Object(B.h)(e,{message:r,channel:i})?{id:ee.T.copyLink,name:Object(E.m)(e,"feature_desktop_copy_text")?Ie.t("Copy link to message"):Ie.t("Copy link"),iconType:"link","data-qa":"copy_link",frecencyId:Object(_e.f)("copy_link"),uiElement:y.UiElement.COPY_LINK_BUTTON}:null});Ne.meta={name:"copyLink",key:"componentsMessageActionSelectorsCopyLinkCopyLink"},Ne.propTypes=we;var Te=Ne,Ae=new G.b("message"),Re={ts:h.b.string.isRequired,channelId:h.b.string.isRequired,disabled:h.b.bool.isRequired,showOfflineIcon:h.b.bool.isRequired},Pe=Object(ge.b)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.ts,a=t.channelId,r=t.messageContainerType,i=t.disabled,o=void 0!==i&&i,s=t.showOfflineIcon,l=void 0!==s&&s,c=Object(I.a)(e,a,n);if(!c)return null;var u=Object(S.e)(e,a);if(!Object(B.k)(e,{message:c,channel:u,messageContainerType:r}))return null;var d=Object(E.m)(e,"feature_contextual_message_shortcuts");return{id:ee.T.deleteMessage,name:Ae.t("Delete message"),shortcut:d?Ae.t("delete"):void 0,iconType:"trash",danger:!0,"data-qa":"delete_message",frecencyId:Object(_e.f)("delete"),uiElement:y.UiElement.DELETE_MESSAGE_BUTTON,disabled:o,showOfflineIcon:l}});Pe.meta={name:"deleteMessage",key:"componentsMessageActionSelectorsDeleteMessageDeleteMessage"},Pe.propTypes=Re;var Me=Pe,xe=new G.b("message"),Fe={ts:h.b.string.isRequired,channelId:h.b.string.isRequired,disabled:h.b.bool.isRequired,showOfflineIcon:h.b.bool.isRequired},Le=Object(ge.b)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.ts,a=t.channelId,r=t.disabled,i=void 0!==r&&r,o=t.showOfflineIcon,s=void 0!==o&&o,l=Object(I.a)(e,a,n);if(!l)return null;var c=Object(S.e)(e,a),u=Object(E.c)(e),d=Object(q.a)(e,"msg_edit_window_mins");if(!Object(B.l)(e,u,l,c,d))return null;var p=Object(E.m)(e,"feature_contextual_message_shortcuts");return{id:ee.T.editMessage,name:xe.t("Edit message"),shortcut:p?xe.t("E"):void 0,iconType:"pencil","data-qa":"edit_message",frecencyId:Object(_e.f)("edit"),uiElement:y.UiElement.EDIT_MESSAGE_BUTTON,disabled:i,showOfflineIcon:s}});Le.meta={name:"editMessage",key:"componentsMessageActionSelectorsEditMessageEditMessage"},Le.propTypes=Fe;var De=Le,Ue=new G.b("message"),Be=new G.b("messages_action_items"),qe={ts:h.b.string.isRequired,channelId:h.b.string.isRequired,allUnreads:h.b.string.isRequired},He=Object(ge.b)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.ts,a=t.channelId,r=t.allUnreads,i=Object(I.a)(e,a,n);if(!i)return null;var o=Object(S.e)(e,a);if(!Object(B.m)(e,{message:i,channel:o}))return null;var s=Object(E.m)(e,"feature_contextual_message_shortcuts");return{id:ee.T.markUnread,name:r?Be.t("Mark above as read"):Ue.t("Mark unread"),shortcut:s?Ue.t("U"):void 0,iconType:"mark-unread","data-qa":"mark_unread",frecencyId:Object(_e.f)("mark_unread"),uiElement:y.UiElement.MARK_UNREAD_BUTTON}});He.meta={name:"markUnread",key:"componentsMessageActionSelectorsMarkUnreadMarkUnread"},He.propTypes=qe;var We=He,Ge=n("6kok"),Ke=new G.b("message");function Ve(e,t,n,a){var r="#"+t;switch(n){case"channel":return e?Ke.t("Un-pin from channel",{channelName:r,fallbackHash:"fde81182bd7937727711f50079046f2e43ab467c"}):a?Ke.t("Pin to channel",{channelName:r,fallbackHash:"017de9a57dbb4ec0a6c70cb3a18a8c6c762a3e0f"}):Ke.t("Pin to channel",{channelName:r,fallbackHash:"d8191c4354e474f5ec36b8cb35ee970f5c624260"});case"private":return e?Ke.t("Un-pin from channel",{channelName:t,fallbackHash:"fde81182bd7937727711f50079046f2e43ab467c"}):a?Ke.t("Pin to channel",{channelName:t,fallbackHash:"017de9a57dbb4ec0a6c70cb3a18a8c6c762a3e0f"}):Ke.t("Pin to channel",{channelName:t,fallbackHash:"d8191c4354e474f5ec36b8cb35ee970f5c624260"});default:return e?Ke.t("Un-pin from this conversation"):a?Ke.t("Pin to this conversation",{fallbackHash:"26463acec4f15a90924c42970bb258dae75e73f9"}):Ke.t("Pin to this conversation\u2026")}}var ze=new G.b("message"),Ye={ts:h.b.string.isRequired,channelId:h.b.string.isRequired,disabled:h.b.bool.isRequired,showOfflineIcon:h.b.bool.isRequired},Qe=Object(ge.b)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.ts,a=t.channelId,r=t.disabled,i=void 0!==r&&r,o=t.showOfflineIcon,s=void 0!==o&&o,l=Object(I.a)(e,a,n);if(!l)return null;var c=Object(S.e)(e,a);if(!Object(B.o)(e,{message:l,channel:c}))return null;var u=Object(O.j)(e,{channelId:a,ts:n}),d=Object(Ge.x)(e,c,{publicChannelIncludeHashSign:!1,imIncludeAtSign:!1}),p=Object(Ge.v)(c),m=u?y.UiElement.PIN_TO_THIS_CONVERSATION_BUTTON:y.UiElement.UNPIN_FROM_THIS_CONVERSATION_BUTTON,h=Object(E.m)(e,"feature_sonic_pins"),b=Object(E.m)(e,"feature_contextual_message_shortcuts");return{id:ee.T.pin,name:Ve(u,d,p,h),iconType:"thumb-tack",shortcut:b?ze.t("P"):void 0,"data-qa":"pin_message",frecencyId:Object(_e.f)(u?"unpin":"pin"),uiElement:m,disabled:i,showOfflineIcon:s}});Qe.meta={name:"pin",key:"componentsMessageActionSelectorsPinPin"},Qe.propTypes=Ye;var Xe=Qe,Je=n("JS8a"),Ze=n("J47P"),$e=n("hcpk"),et=Object(me.b)("Add a reminder for a message",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.time,r=n.channelId,i=n.ts,o=Object(I.a)(t(),r,i);return e(U({time:a,message_channel:r,message_ts:i,respond_in_channel:Object(B.yb)(o)}))});et.meta={name:"addReminderForMessage",key:"actionsAddReminderForMessageAddReminderForMessage",description:"Add a reminder for a message"},et.propTypes={channelId:h.b.string.isRequired,ts:h.b.string.isRequired,time:h.b.string.isRequired};var tt=et,nt=new G.b("message"),at=(h.b.string.isRequired,h.b.string.isRequired,h.b.string.isRequired,h.b.func.isRequired,h.b.object.isRequired,h.b.string,{shortcut:void 0}),rt=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onSelected=n.onSelected.bind(n),n}return u()(t,e),o()(t,[{key:"onSelected",value:function(){var e=this.props,t=e.remind,n=e.ts,a=e.channelId,r=e.time,i=e.clogger;t({ts:n,channelId:a,time:r}),i.track(y.EventId.MSG_ACTION,{contexts:{ui_context:{action:y.UiAction.CLICK,step:y.UiStep.MORE_ACTIONS_MENU,ui_element:y.UiElement.REMIND_ME_BUTTON}}})}},{key:"render",value:function(){var e=this.props,t=(e.remind,e.ts,e.channelId,e.time,re()(e,["remind","ts","channelId","time"]));return m.a.createElement(pe.a,x()({},t,{onSelected:this.onSelected}))}}]),t}(p.PureComponent);rt.displayName="RemindMenuItem",rt.defaultProps=at;var it={remind:tt},ot=Object(b.b)(function(e){return{clogger:Object(k.a)({state:e})}},it)(rt),st=Object(de.b)(ot),lt=(h.b.string.isRequired,h.b.string.isRequired,h.b.bool,h.b.bool,h.b.bool,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderSubmenu=n.renderSubmenu.bind(n),n}return u()(t,e),o()(t,[{key:"renderSubmenu",value:function(e){var t=this.props,n=t.channelId,a=t.ts,r=t.featureAppViewsReminders,i=t.featureContextualMessageShortcuts,o={channelId:n,ts:a};return m.a.createElement(Je.a,x()({},e,{"data-qa":"remind_submenu",width:"auto"}),m.a.createElement(st,x()({},o,{label:nt.t("In 20 minutes",{fallbackHash:"c473e4622b51d4d86dabe29940fee9c1796bb93d"}),time:"In 20 minutes"})),m.a.createElement(st,x()({},o,{label:nt.t("In 1 hour",{fallbackHash:"e2e5de960f1c2c574aaeac98339a787a5bdab8e6"}),time:"In 1 hour"})),m.a.createElement(st,x()({},o,{label:nt.t("In 3 hours",{fallbackHash:"9ec09cee220ff97e87efe884ad910bc050c301cb"}),time:"In 3 hours"})),m.a.createElement(st,x()({},o,{label:nt.t("Tomorrow"),time:"Tomorrow"})),m.a.createElement(st,x()({},o,{label:nt.t("Next week",{fallbackHash:"fdc2b827d9b1e8ed62eeb53c174f0ba91f90f490"}),time:"Next week"})),r&&m.a.createElement(st,x()({},o,{label:nt.t("Custom\u2026"),time:"Custom",shortcut:i?nt.t("M"):void 0})))}},{key:"render",value:function(){var e=this.props,t=(e.channelId,e.ts,re()(e,["channelId","ts"]));return m.a.createElement($e.a,x()({},t,{renderSubmenu:this.renderSubmenu}))}}]),t}(p.PureComponent));lt.displayName="Remind",lt.defaultProps={featureAppViewsReminders:!1,renderLegacySubmenu:!0,featureContextualMessageShortcuts:!1};var ct=Object(Ze.a)(lt),ut=Object(ge.b)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.ts,a=t.channelId,r=t.disabled,i=void 0!==r&&r,o=t.showOfflineIcon,s=void 0!==o&&o,l=Object(I.a)(e,a,n);if(!l)return null;var c=Object(S.e)(e,a);if(!Object(B.f)(e,{message:l,channel:c}))return null;var u=Object(E.m)(e,"feature_app_views_reminders"),d=Object(E.m)(e,"feature_contextual_message_shortcuts");return m.a.createElement(ct,{key:"remind_submenu",label:nt.t("Remind me about this"),"data-qa":"remind_me",frecencyId:Object(_e.f)("remind"),ts:n,channelId:a,featureAppViewsReminders:u,featureContextualMessageShortcuts:d,renderLegacySubmenu:!0,disabled:i,showOfflineIcon:s})});ut.meta={name:"remindSubmenu",key:"componentsMessageActionSelectorsRemindRemindSubmenu"};var dt=ut,pt=new G.b("message"),mt={ts:h.b.string.isRequired,channelId:h.b.string.isRequired,messageContainerType:h.b.oneOf(Object(se.a)(ee.H)),disabled:h.b.bool.isRequired,showOfflineIcon:h.b.bool.isRequired},ht=Object(ge.b)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.ts,a=t.channelId,r=t.messageContainerType,i=t.disabled,o=void 0!==i&&i,s=t.showOfflineIcon,l=void 0!==s&&s,c=Object(I.a)(e,a,n);if(!c)return null;var u=Object(S.e)(e,a);if(!Object(B.p)(e,{message:c,channel:u,messageContainerType:r}))return null;var d=Object(Ge.Cb)(u)||Object(Ge.Bb)(u)?pt.t("Remove from channel"):pt.t("Remove from conversation");return{id:ee.T.removeBroadcast,name:d,iconType:"times","data-qa":"remove_broadcast",frecencyId:Object(_e.f)("remove"),uiElement:y.UiElement.REMOVE_FROM_CONVERSATION_BUTTON,disabled:o,showOfflineIcon:l}});ht.meta={name:"removeBroadcast",key:"componentsMessageActionSelectorsRemoveBroadcastRemoveBroadcast"},ht.propTypes=mt;var bt=ht,ft=new G.b("message"),gt={ts:h.b.string.isRequired,channelId:h.b.string.isRequired},_t=Object(ge.b)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.ts,a=t.channelId,r=Object(I.a)(e,a,n);if(!r)return null;if(!Object(B.g)(r))return null;var i=Object(B.ob)(r)?ft.t("Share file\u2026",{fallbackHash:"9056b6c934805611f8d5a90ad5c937b656be6641"}):ft.t("Share message\u2026",{fallbackHash:"587f9ecd03b16e92d064f4fbbfd4ba7e76e29807"}),o=Object(E.m)(e,"feature_contextual_message_shortcuts");return{id:ee.T.shareMessage,name:i,iconType:"share-action","data-qa":"share_message_menu",frecencyId:Object(_e.f)("share"),uiElement:y.UiElement.SHARE_MESSAGE_BUTTON,shortcut:o?ft.t("S"):void 0}});_t.meta={name:"shareMessage",key:"componentsMessageActionSelectorsShareMessageShareMessage"},_t.propTypes=gt;var vt=_t,yt=n("F294"),kt=new G.b("message"),Ot={ts:h.b.string.isRequired,channelId:h.b.string.isRequired},Ct=Object(ge.b)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.ts,a=t.channelId,r=Object(I.a)(e,a,n);if(!r)return null;if(!Object(B.t)(r))return null;var i=Object(B.rb)(r),o=i?kt.t("Unstar message"):kt.t("Star message");if(Object(B.cb)(r)){var s=Object(yt.a)(r.files);r.comment&&Object(j.d)(e,s,r.comment.id)&&(o=i?kt.t("Unstar file comment"):kt.t("Star file comment"))}var l=i?y.UiElement.UNSTAR_MESSAGE_BUTTON:y.UiElement.STAR_MESSAGE_BUTTON;return{id:ee.T.star,name:o,iconType:i?"unstar-o":"star-o","data-qa":"star_message_menu",frecencyId:Object(_e.f)(i?"unstar":"star"),uiElement:l}});Ct.meta={name:"star",key:"componentsMessageActionSelectorsStarStar"},Ct.propTypes=Ot;var Et=Ct,jt=n("Xjfm"),St=n("XL7r"),It=new G.b("message"),wt=Object(ge.b)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.ts,a=t.threadTs,r=t.channelId,i=t.disabled,o=void 0!==i&&i,s=t.showOfflineIcon,l=void 0!==s&&s,c=Object(I.a)(e,r,a||n),u=Object(S.e)(e,r),d=Object(Ge.X)(u),p=Object(jt.b)(e,{ts:a||n,channelId:r}),m=d&&p;if(!Object(B.r)(e,{message:c,channel:u,ignoreMembership:m}))return null;var h=Object(St.j)(e,"threads_everything"),b=Object(B.S)(c),f=It.t("Follow message"),g=It.t("You\u2019ll be notified about any replies"),_=y.UiElement.FOLLOW_MESSAGE_BUTTON,v=void 0,k=Object(jt.c)(e,{ts:a||n,channelId:r});return!k||o&&l?p?(b?(f=It.t("Unfollow thread"),v=It.t("This will be removed from Threads"),g=h?It.t("You won\u2019t be notified about new replies"):v):(f=It.t("Unfollow message"),v=It.t("Replies will be excluded from Threads"),g=h?It.t("You won\u2019t be notified about replies"):v),_=y.UiElement.UNFOLLOW_MESSAGE_BUTTON):b?(f=It.t("Follow thread"),v=It.t("New replies will appear in Threads"),g=h?It.t("You\u2019ll be notified about new replies"):v):(f=It.t("Follow message"),v=It.t("Any replies will show up in Threads"),g=h?It.t("You\u2019ll be notified about any replies"):v):(f=It.t("Loading\u2026",{fallbackHash:"0e140d567d90b0014d95ffec7a755e52355079f3"}),g=""),{id:ee.T.subscribe,name:f,description:g,isLoading:k,iconType:"message-notification","data-qa":"follow_message",frecencyId:Object(_e.f)(p?"thread_unfollow":"thread_follow"),uiElement:_}});wt.meta={name:"subscribe",key:"componentsMessageActionSelectorsSubscribeSubscribe"},wt.propTypes={ts:h.b.string.isRequired,channelId:h.b.string.isRequired,disabled:h.b.bool.isRequired,showOfflineIcon:h.b.bool.isRequired};var Nt=wt,Tt=n("qSXi"),At=n("HYPA"),Rt=n("/X+W"),Pt=n("rtjy"),Mt=new G.b("app_actions"),xt=function(e){return x()({},e,{danger:!1,description:Mt.t("Slack")})},Ft=function(e){return{id:e.frecencyId,action:e}},Lt=Object(me.b)("Search message actions (app + Slack) in Redux store",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.query,r=void 0===a?"":a,i=re()(n,["query"]),o=t(),s=Object(At.c)(o).actions,l=function(e,t){return[Oe(e,t),Se(e,t),Te(e,t),Me(e,t),De(e,t),We(e,t),Xe(e,t),bt(e,t),vt(e,t),Et(e,t),Nt(e,t)]}(o,i).filter(function(e){return e&&!e.isLoading}),c=[].concat(oe()(l.map(xt)),oe()(s.map(Tt.a)));return c=c.filter(function(e){return Object(Tt.b)(e,Object(Rt.a)(r))}),c=(c=Object(Pt.e)(o,{query:r,list:c.map(Ft)})).map(function(e){return e.action})});Lt.meta={name:"searchLocalMessageActions",key:"actionsSearchMessageActionsSearchLocalMessageActions",description:"Search message actions (app + Slack) in Redux store"},Lt.propTypes={channelId:h.b.string.isRequired,ts:h.b.string.isRequired,messageContainerType:h.b.oneOf(Object(se.a)(ee.H)),query:h.b.string};var Dt=Object(me.b)("Search message actions (app + Slack), returns as Promise",function(e,t,n){var a=e(Lt(n));return Promise.resolve(a)});Dt.meta={name:"searchMessageActions",key:"actionsSearchMessageActionsSearchMessageActions",description:"Search message actions (app + Slack), returns as Promise"},Dt.propTypes=Lt.propTypes;var Ut=Dt,Bt=n("2/vs"),qt=n("9E9B"),Ht=n("yHhI"),Wt=n("Q+UV"),Gt=(h.b.string.isRequired,h.b.func.isRequired,h.b.func.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onEmojiSelected=n.onEmojiSelected.bind(n),n}return u()(t,e),o()(t,[{key:"onEmojiSelected",value:function(e,t){this.props.changeReactionFromUserAction({key:this.props.reactionKey,name:t})}},{key:"render",value:function(){return m.a.createElement(X.a,{showHandyReactions:!0,forceOpen:!0,onEmojiSelected:this.onEmojiSelected,onClose:this.props.closeModal,startsOpen:!0,contentStyle:{left:"auto",top:"auto"},overlayStyle:{display:"flex","justify-content":"center","align-items":"center"}},m.a.createElement("span",{style:{position:"absolute"}}))}}]),t}(p.PureComponent));Gt.displayName="AppActionsEmojiMenu";var Kt={changeReactionFromUserAction:function(){return N.a.apply(void 0,arguments)},closeModal:function(){return te.a.apply(void 0,arguments)}},Vt=Object(b.b)(null,Kt)(Gt),zt=function(e,t,n){var a=t.channelId,r=t.ts;return n(function(t,i){var o=i(),s=Object(I.a)(o,a,r),l=Object(Wt.b)(s);return Object(K.a)()?n(Object(te.e)({element:m.a.createElement(Vt,{reactionKey:l})})):Object(V.a)({e:e,rxn_key:l})})},Yt=n("HvGc"),Qt=Object(me.b)("Open a thread to reply to a message",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.channelId,r=n.ts,i=t(),o=Object(I.a)(i,a,r).thread_ts||r;e(Object(Yt.l)({channelId:a,threadTs:o}))});Qt.meta={name:"comment",key:"actionsCommentComment",description:"Open a thread to reply to a message"},Qt.propTypes={channelId:h.b.string.isRequired,ts:h.b.string.isRequired};var Xt=Qt,Jt=n("1hAG"),Zt=n("jLdI"),$t=Object(me.b)("Copy link to message",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.channelId,r=n.ts,i=t(),o=Object(I.a)(i,a,r),s=o.thread_ts,l=Object(Jt.d)(i),c=l&&l.domain,u=Object(B.u)({teamDomain:c,channelId:a,ts:r,threadTs:s});e(Object(Zt.a)({msg:o,payload:{subtype:"copy_link"}})),Object(W.b)(u)});$t.meta={name:"copyLink",key:"actionsCopyLinkCopyLink",description:"Copy link to message"},$t.propTypes={channelId:h.b.string.isRequired,ts:h.b.string.isRequired};var en=$t,tn=n("pWPO"),nn=n("+z37"),an=Object(me.b)("Copy message text",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.channelId,r=n.ts,i=t(),o=Object(I.a)(i,a,r);e(Object(Zt.a)({msg:o,payload:{subtype:"copy_text"}}));var s=Object(tn.a)(Object(nn.a)(i,{text:o.text,tsf_mode:"EDIT"}));Object(W.b)(s)});an.meta={name:"copyText",key:"actionsCopyTextCopyText",description:"Copy message text"},an.propTypes={channelId:h.b.string.isRequired,ts:h.b.string.isRequired};var rn=an,on=Object(me.b)("Delete message",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.channelId,r=n.ts,i=n.rollup,o=m.a.createElement(Z.a,{channelId:a,ts:r,rollup:i});Promise.resolve().then(function(){return e(Object(te.e)({element:o}))})});on.meta={name:"deleteMsg",key:"actionsDeleteMessageDeleteMsg",description:"Delete message"},on.propTypes={channelId:h.b.string.isRequired,ts:h.b.string.isRequired};var sn=on,ln=Object(me.b)("Remove message broadcast",function(e,t,n){var a=m.a.createElement(J.a,n);Promise.resolve().then(function(){return e(Object(te.e)({element:a}))})});ln.meta={name:"removeBroadcast",key:"actionsRemoveBroadcastRemoveBroadcast",description:"Remove message broadcast"},ln.propTypes={channelId:h.b.string.isRequired,ts:h.b.string.isRequired};var cn=ln,un=Object(me.b)("Share message in channel",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.channelId,r=n.ts;e(Object(A.a)({ts:r,channelId:a}))});un.meta={name:"shareMessage",key:"actionsShareMessageShareMessage",description:"Share message in channel"},un.propTypes={channelId:h.b.string.isRequired,ts:h.b.string.isRequired};var dn=un,pn=n("MYD1"),mn=Object(me.b)("Toggle message pinned status, with a confirmation dialog before un-pinning",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.ts,r=n.channelId,i=t();if(Object(O.j)(i,{ts:a,channelId:r})){var o=Object(O.g)(i,{type:O.a.MESSAGE,channel:r,ts:a});e(Object(te.e)({element:m.a.createElement(pn.a,{pin:o,channelId:r})}))}else e(Object(O.m)({ts:a,channelId:r}))});mn.meta={name:"togglePinWithUnpinConfirmation",key:"actionsTogglePinWithUnpinConfirmationTogglePinWithUnpinConfirmation",description:"Toggle message pinned status, with a confirmation dialog before un-pinning"},mn.propTypes={ts:h.b.string.isRequired,channelId:h.b.string.isRequired};var hn=function(e,t,n,a){var r=n.ts,i=n.threadTs,o=n.channelId,s=n.rollup,l=n.messageContainerType,c=Object(Ht.b)();if(t.appId)return a(Object(Bt.c)({actionId:t.id,appId:t.appId,messageTs:r,channelId:o}));switch(t.id){case ee.T.addReaction:return zt(e,n,a);case ee.T.comment:return a(Xt({ts:r,channelId:o}));case ee.T.copyLink:return a(en({ts:r,channelId:o}));case ee.T.copyText:return a(rn({ts:r,channelId:o}));case ee.T.deleteMessage:return a(sn({ts:r,channelId:o,rollup:s}));case ee.T.editMessage:return c.warn("Edit message is an unhandled case"),null;case ee.T.markUnread:return a(Object(qt.setUnreadPoint)({channelId:o,unreadTs:r}));case ee.T.pin:return Object(K.a)()?a(mn({ts:r,channelId:o})):a(Object(O.o)({ts:r,channelId:o}));case ee.T.remind:return c.warn("Remind is an unhandled case"),null;case ee.T.removeBroadcast:return a(cn({ts:r,channelId:o}));case ee.T.shareMessage:return a(dn({ts:r,channelId:o}));case ee.T.star:return a(Object(C.b)({ts:r,channelId:o}));case ee.T.subscribe:return a(Object(jt.h)({ts:i||r,channelId:o,messageContainerType:l}));default:return c.warn("Unknown action type "+t.id),null}},bn=n("U3Q0"),fn=n("cD5Y"),gn=n("cTBa"),_n=n("YEIV"),vn=n.n(_n),yn=n("Rrdp"),kn=n("od5y"),On=n("1zbP"),Cn=n("AE1P"),En=n("V/As"),jn=(v.a.MessageAction.isRequired,h.b.string,h.b.string,v.a.maybeUnknown(v.a.App),h.b.string.isRequired,{className:"",pillarClassName:"",app:void 0}),Sn=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(f.a)(n,["renderEnter","renderIcon","renderIconMaybe"]),n}return u()(t,e),o()(t,[{key:"renderIcon",value:function(){var e=this.props,t=e.action,n=e.app,a=e.defaultAppIcon,r=n&&n.icons||t.iconSet;if(r){var i=Object(En.b)({icons:r},56,a);return m.a.createElement("img",{alt:"",className:"p-message-actions__icon",src:i})}return t.iconType?m.a.createElement(kn.b,{type:t.iconType}):null}},{key:"renderIconMaybe",value:function(e){return e?m.a.createElement("div",{className:"c-menu_item__icon","data-qa":"menu_item_icon",role:"presentation"},e):null}},{key:"renderEnter",value:function(){var e=this.props,t=e.className,n=e.pillarClassName,a=_()(t,"c-menu_item__enter",vn()({},n+"__enter",n));return m.a.createElement(kn.a,{type:"enter",className:a,"data-qa":"menu_item_enter",role:"presentation"})}},{key:"render",value:function(){var e,t=this.props,n=t.action,a=t.app,r=t.className,i=t.pillarClassName,o=_()(r,"c-menu_item__button","c-button-unstyled",(e={"c-menu_item__button--danger":n.danger},vn()(e,""+i,i),vn()(e,i+"--danger",n.danger&&i),e)),s=a&&a.name||n.description;return!s&&a&&(s=m.a.createElement(yn.a,{type:Object(On.d)(a)?"unknown":"non-existent"})),m.a.createElement("div",{className:"c-menu_item__li",role:"presentation"},m.a.createElement("div",{className:o,"data-qa":n["data-qa"],key:n.id,id:n.id},this.renderIconMaybe(this.renderIcon()),m.a.createElement("div",{className:"c-menu_item__label",role:"presentation"},n.label||n.name,m.a.createElement("div",{className:"c-menu_item__description"},s)),this.renderEnter()))}}]),t}(p.PureComponent);Sn.displayName="AppActionsDialogItem",Sn.defaultProps=jn;var In=Object(b.b)(function(e,t){var n=t.action;return{app:n&&n.appId&&Object(Cn.e)(e,n.appId),defaultAppIcon:Object(Cn.f)(e)}})(Sn),wn=n("rEtx"),Nn=n("Uk1S"),Tn=n("Bekf"),An=n("t3QL"),Rn=n("qzqx"),Pn=n("6Iy0"),Mn=n("lek6"),xn=n("3dqR"),Fn=n("NvKv"),Ln=n("lV3N"),Dn=n("y7mK"),Un=(n("pic6"),h.b.string.isRequired,h.b.string.isRequired,h.b.object.isRequired,h.b.string,h.b.bool,h.b.string,h.b.string,h.b.string,h.b.string,h.b.arrayOf(h.b.object),h.b.string,v.a.BlockKitBlocks,h.b.object,{theme:"light",hasAdHocSender:!1,userId:null,username:null,botId:null,attachments:[],blocks:void 0,blocksContainerContext:Pn.a.app_actions,text:void 0,message:void 0}),Bn=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={gradient:!1},n.renderAttachment=n.renderAttachment.bind(n),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.maybeSetGradient()}},{key:"maybeSetGradient",value:function(){var e=Object(wn.findDOMNode)(this);e&&e.scrollHeight>e.clientHeight&&this.setState(function(){return{gradient:!0}})}},{key:"renderContent",value:function(){var e=this.props,t=e.text,n=e.blocksContainerContext,a=e.message;return a&&a.blocks?m.a.createElement(Rn.a,{msg:a,blocksContainerContext:n}):m.a.createElement(Mn.a,{"data-qa":"app-actions-pillow-message-text",text:t})}},{key:"renderAvatar",value:function(){var e=this.props,t=e.userId,n=e.hasAdHocSender,a=e.botId;return m.a.createElement(xn.c,{className:"p-app_actions_pillow__avatar",userId:t,isAdHocMember:n,botId:a,size:24,isInteractive:!1,showCard:!1,showTooltip:!1,tabIndex:"-1"})}},{key:"renderTimestamp",value:function(){var e=this.props.ts;return m.a.createElement(Fn.b,{timestamp:e,relative:!1,full:!0})}},{key:"renderAttachment",value:function(e,t){var n=this.props,a=n.ts,r=n.channelId,i=n.blocksContainerContext;return m.a.createElement(Ln.a,x()({key:t},Object(An.b)(e),{messageTs:a,activeChannelId:r,showDelete:!1,blocksContainerContext:i}))}},{key:"renderAttachments",value:function(){var e=this.props.attachments;return e&&e.length?m.a.createElement("div",{className:"p-app_actions_pillow__attachments"},e.map(this.renderAttachment)):null}},{key:"renderGutter",value:function(){return"light"===this.props.theme?m.a.createElement("div",{className:"p-app_actions_pillow__gutter"},this.renderAvatar()):m.a.createElement("div",{className:"p-app_actions_pillow__gutter"},this.renderTimestamp())}},{key:"renderContentHeader",value:function(){var e=this.props,t=e.userId,n=e.botId,a=e.username,r=e.theme,i=e.channel;return m.a.createElement("div",{className:"p-app_actions_pillow__content_header"},m.a.createElement(Dn.a,{userId:t,botId:n,username:a,channelName:Object(Ge.w)(i),isInteractive:!1}),"light"===r&&this.renderTimestamp())}},{key:"render",value:function(){var e=this.props.theme,t=_()("p-app_actions_pillow","p-app_actions_pillow--"+e,{"p-app_actions_pillow--gradient":this.state.gradient});return m.a.createElement("div",{className:t,role:"presentation","data-qa":"app_action_pillow"},this.renderGutter(),m.a.createElement("div",{className:"p-app_actions_pillow__content"},this.renderContentHeader(),m.a.createElement("div",{className:"p-app_actions_pillow__body",id:"p-app_actions_pillow__body"},this.renderContent(),this.renderAttachments(),m.a.createElement("span",{className:"p-app_actions_pillow__blocker"}))))}}]),t}(p.PureComponent);Bn.displayName="AppActionsPillow",Bn.defaultProps=Un;var qn=Object(b.b)(function(e,t){var n=t.ts,a=t.channelId,r=Object(I.a)(e,a,n),i=Object(S.e)(e,a),o=Object(B.H)(r),s=Object(B.R)(e,r),l=s.botId;return{channel:i,userId:o,username:s.username,botId:l,theme:Object(Nn.a)(e),hasAdHocSender:Object(Tn.a)(r),text:r.text,attachments:r.attachments,message:r}})(Bn),Hn=(n("qiqk"),new G.b("app_actions")),Wn=(h.b.string.isRequired,h.b.func,h.b.string.isRequired,h.b.func,h.b.func.isRequired,h.b.func.isRequired,h.b.func.isRequired,h.b.func.isRequired,h.b.object.isRequired,{onClose:d.a,onSelectAction:d.a}),Gn=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={filterQuery:"",isLoading:!0,isError:!1,actions:[]},n.initClogged=!1,Object(f.a)(n,["onFilterUpdate","onFooterLinkClick","onSelectAction","renderSingleAction","handleSelectEvent","searchActions"]),n.searchActionsDebounced=Object(be.a)(n.searchActions,200,{leading:!0}),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.searchActionsDebounced()}},{key:"componentDidUpdate",value:function(){this.initClogged||this.state.isLoading||this.state.isError||(this.props.clogger.track(y.EventId.MSG_ACTION,{contexts:{ui_context:{action:y.UiAction.IMPRESSION,step:y.UiStep.MESSAGE_ACTION_DIALOG,ui_element:y.UiElement.MESSAGE_ACTION_DIALOG}},app_actions_showing:this.state.actions.length}),this.initClogged=!0)}},{key:"componentWillUnmount",value:function(){this.activePromise&&delete this.activePromise}},{key:"onFooterLinkClick",value:function(){this.props.clogger.track(y.EventId.MSG_ACTION,{contexts:{ui_context:{action:y.UiAction.CLICK,step:y.UiStep.MESSAGE_ACTION_DIALOG,ui_element:y.UiElement.GET_MORE_APP_ACTIONS}},app_actions_showing:this.state.actions.length})}},{key:"onSelectAction",value:function(e,t){var n=this.props,a=n.ts,r=n.channelId,i=n.closeModal,o=n.handleMessageAction,s=n.onSelectAction,l=n.clogger;i(),this.props.onClose&&this.props.onClose(e),s(e,t,{ts:a,channelId:r})||o(e,t,{ts:a,channelId:r}),this.props.recordMessageActionFrecencyEvent({action:t,query:this.state.filterQuery});var c={ui_context:{action:y.UiAction.CLICK,step:y.UiStep.MESSAGE_ACTION_DIALOG,ui_element:t.uiElement}};t.appId?l.track(y.EventId.MSG_ACTION,{contexts:c,app_id:t.appId,action_id:t.id}):l.track(y.EventId.MSG_ACTION,{contexts:c})}},{key:"onFilterUpdate",value:function(e){this.setState(function(){return{filterQuery:e}},this.searchActionsDebounced)}},{key:"searchActions",value:function(){var e=this,t=this.props.searchMessageActions({channelId:this.props.channelId,ts:this.props.ts,query:this.state.filterQuery}).then(function(n){e.activePromise===t&&e.setState(function(){return{actions:n,isError:!1,isLoading:!1}})}).catch(function(){e.setState(function(){return{isError:!0,isLoading:!1}})});this.activePromise=t}},{key:"handleSelectEvent",value:function(e,t,n){this.onSelectAction(n,t.props.action)}},{key:"renderTitle",value:function(e){return m.a.createElement("div",{className:"p-app_actions_dialog__title","data-qa-app-actions-dialog-title":!0},m.a.createElement("div",{className:"p-app_actions_dialog__title_text"},e))}},{key:"renderMessagePreview",value:function(){var e=this.props,t=e.channelId,n=e.ts;return m.a.createElement("div",{className:"p-app_actions_dialog__message","data-qa-app-actions-dialog-message":!0},m.a.createElement(qn,{channelId:t,ts:n}))}},{key:"renderLoading",value:function(){return m.a.createElement("div",{className:"p-app_actions_dialog__loader"},m.a.createElement(fn.a,null))}},{key:"renderSingleAction",value:function(e){return{label:m.a.createElement(In,{key:e.id,pillarClassName:"p-app_actions_dialog_option",action:e}),value:e.id}}},{key:"renderSelect",value:function(){var e=Hn.t("Search message actions\u2026");return m.a.createElement(gn.b,{"data-qa":"app-actions-dialog-list",isAlwaysOpen:!0,usePlaceholderOption:!1,autoSelectFirstOption:!0,focusInputOnMount:!0,placeholder:e,icon:"search",id:"p-app_actions_dialog__select",className:"p-app_actions_dialog__select",pillarClassName:"p-app_actions_dialog",onChange:this.handleSelectEvent,onFilterInputChange:this.onFilterUpdate,options:Object(he.a)(this.state.actions,this.renderSingleAction),optionsRowHeight:64,useFullWidthOptions:!0})}},{key:"render",value:function(){var e=this.state.isLoading,t=Hn.t("Get more message actions"),n=Hn.t("Use an action");return m.a.createElement(bn.b,{contentLabel:n,className:"p-app_actions_dialog",overlayClassName:"p-app_actions_dialog__overlay",footerIcon:"external-link",footerLink:"/apps/collection/actions?utm_source=in-prod&utm_medium=inprod-get_more_app_actions-message_action_dialog-click",onFooterLinkClick:this.onFooterLinkClick,footerText:t,goOnEnterPressed:!1,onCancel:this.props.onClose,showCancelButton:!1,showGoButton:!1,title:this.renderTitle(n),ariaContent:{describedby:"p-app_actions_pillow__body"},useSlackScrollbar:!1},this.renderMessagePreview(),e?this.renderLoading():this.renderSelect())}}]),t}(p.PureComponent);Gn.displayName="AppActionsDialog",Gn.defaultProps=Wn;var Kn=Object(b.b)(function(e){return{clogger:Object(k.a)({state:e})}},function(e){return{closeModal:function(){return e(Object(te.a)())},handleMessageAction:function(){for(var t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];return hn.apply(void 0,n.concat([e]))},searchMessageActions:function(){return e(Ut.apply(void 0,arguments))},recordMessageActionFrecencyEvent:function(t){return e(Object(fe.a)(t))}}})(Gn),Vn=n("CpTu"),zn=n("umiW"),Yn=At.c,Qn=new G.b("app_actions"),Xn=(h.b.string.isRequired,h.b.func,h.b.string.isRequired,h.b.func,h.b.arrayOf(v.a.MessageAction).isRequired,h.b.arrayOf(v.a.AppActionMenuItem),h.b.bool.isRequired,h.b.func.isRequired,h.b.func.isRequired,h.b.func.isRequired,h.b.object.isRequired,{appActions:[],onClose:d.a,onSelectAction:d.a}),Jn=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={normalizedFilterQuery:""},Object(f.a)(n,["onFilterUpdate","onFooterLinkClick","onSelectAction","filterAction","formatSlackAction","renderSingleAction","handleSelectEvent"]),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.clogger.track(y.EventId.MSG_ACTION,{contexts:{ui_context:{action:y.UiAction.IMPRESSION,step:y.UiStep.MESSAGE_ACTION_DIALOG,ui_element:y.UiElement.MESSAGE_ACTION_DIALOG}},app_actions_showing:this.props.appActions.length}),this.props.onLoad()}},{key:"shouldComponentUpdate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channelId,n=e.ts,a=e.isLoading,r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).normalizedFilterQuery;return this.state.normalizedFilterQuery!==r||(!(!this.props.isLoading||a)||(this.props.channelId!==t||this.props.ts!==n))}},{key:"onFooterLinkClick",value:function(){this.props.clogger.track(y.EventId.MSG_ACTION,{contexts:{ui_context:{action:y.UiAction.CLICK,step:y.UiStep.MESSAGE_ACTION_DIALOG,ui_element:y.UiElement.GET_MORE_APP_ACTIONS}},app_actions_showing:this.props.appActions.length})}},{key:"onSelectAction",value:function(e,t){var n=this.props,a=n.ts,r=n.channelId,i=n.closeModal,o=n.handleMessageAction,s=n.onSelectAction,l=n.clogger;i(),this.props.onClose&&this.props.onClose(e),s(e,t,{ts:a,channelId:r})||o(e,t,{ts:a,channelId:r}),Object(_e.b)(t,this.state.normalizedFilterQuery);var c={ui_context:{action:y.UiAction.CLICK,step:y.UiStep.MESSAGE_ACTION_DIALOG,ui_element:t.uiElement}};t.appId?l.track(y.EventId.MSG_ACTION,{contexts:c,app_id:t.appId,action_id:t.id}):l.track(y.EventId.MSG_ACTION,{contexts:c})}},{key:"onFilterUpdate",value:function(e){var t=Object(Rt.a)(e);this.setState(function(){return{normalizedFilterQuery:t}})}},{key:"getActions",value:function(){var e=[].concat(oe()(Object(he.a)(this.props.slackActions,this.formatSlackAction)),oe()(Object(he.a)(this.props.appActions,Tt.a)));return e=Object(ue.a)(e,this.filterAction),e=Object(_e.c)(e,this.state.normalizedFilterQuery)}},{key:"handleSelectEvent",value:function(e,t,n){this.onSelectAction(n,t.props.action)}},{key:"filterAction",value:function(e){return Object(Tt.b)(e,this.state.normalizedFilterQuery)}},{key:"formatSlackAction",value:function(e){return x()({},e,{danger:!1,description:Qn.t("Slack")})}},{key:"renderTitle",value:function(e){return m.a.createElement("div",{className:"p-app_actions_dialog__title","data-qa-app-actions-dialog-title":!0},m.a.createElement("div",{className:"p-app_actions_dialog__title_text"},e))}},{key:"renderMessagePreview",value:function(){var e=this.props,t=e.channelId,n=e.ts;return m.a.createElement("div",{className:"p-app_actions_dialog__message","data-qa-app-actions-dialog-message":!0},m.a.createElement(qn,{channelId:t,ts:n}))}},{key:"renderLoading",value:function(){return m.a.createElement("div",{className:"p-app_actions_dialog__loader"},m.a.createElement(fn.a,null))}},{key:"renderSingleAction",value:function(e){return{label:m.a.createElement(In,{key:e.id,pillarClassName:"p-app_actions_dialog_option",action:e}),value:e.id}}},{key:"renderSelect",value:function(){var e=Qn.t("Search message actions\u2026");return m.a.createElement(gn.b,{"data-qa":"app-actions-dialog-list",isAlwaysOpen:!0,usePlaceholderOption:!1,autoSelectFirstOption:!0,focusInputOnMount:!0,placeholder:e,icon:"search",id:"p-app_actions_dialog__select",className:"p-app_actions_dialog__select",pillarClassName:"p-app_actions_dialog",onChange:this.handleSelectEvent,onFilterInputChange:this.onFilterUpdate,options:Object(he.a)(this.getActions(),this.renderSingleAction),optionsRowHeight:64})}},{key:"render",value:function(){var e=this.props.isLoading,t=Qn.t("Get more message actions"),n=Qn.t("Use an action");return m.a.createElement(bn.b,{contentLabel:n,className:"p-app_actions_dialog",overlayClassName:"p-app_actions_dialog__overlay",footerIcon:"external-link",footerLink:"/apps/collection/actions?utm_source=in-prod&utm_medium=inprod-get_more_app_actions-message_action_dialog-click",onFooterLinkClick:this.onFooterLinkClick,footerText:t,goOnEnterPressed:!1,onCancel:this.props.onClose,showCancelButton:!1,showGoButton:!1,title:this.renderTitle(n),ariaContent:{describedby:"p-app_actions_pillow__body"},useSlackScrollbar:!1},this.renderMessagePreview(),e?this.renderLoading():this.renderSelect())}}]),t}(p.Component);Jn.displayName="AppActionsDialog",Jn.defaultProps=Xn;var Zn=Object(b.b)(function(e,t){var n=Yn(e),a=n.loading,r=n.actions,i=Object(ue.a)([Oe(e,t),Se(e,t),Te(e,t),Me(e,t),De(e,t),We(e,t),Xe(e,t),bt(e,t),vt(e,t),Et(e,t),Nt(e,t)]);return{slackActions:i,appActions:r,isLoading:!(!a&&!Object(Vn.a)(i,"isLoading")),clogger:Object(k.a)({state:e})}},function(e){return{closeModal:function(){return e(Object(te.a)())},onLoad:function(){return e(Object(zn.b)())},handleMessageAction:function(){for(var t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];return hn.apply(void 0,n.concat([e]))}}})(Jn),$n=function(e){var t=e.featureAppActionsFeRefactor,n=re()(e,["featureAppActionsFeRefactor"]);return t?m.a.createElement(Kn,n):m.a.createElement(Zn,n)};$n.displayName="AppActionsSwitcher";var ea=Object(b.b)(function(e){return{featureAppActionsFeRefactor:Object(E.m)(e,"feature_app_actions_fe_refactor")}})($n),ta=Object(me.b)("Open app actions dialog",function(e,t,n){var a=m.a.createElement(ea,n);e(Object(te.e)({element:a}))});ta.meta={name:"browseAppActions",key:"actionsBrowseAppActionsBrowseAppActions",description:"Open app actions dialog"},ta.propTypes={channelId:h.b.string.isRequired,ts:h.b.string.isRequired,onSelectAction:h.b.func.isRequired};var na=ta,aa=new G.b("message"),ra="/apps/collection/actions?utm_source=in-prod&utm_medium=inprod-more_message_actions_button-more_actions_menu-click",ia=(h.b.string.isRequired,h.b.string.isRequired,h.b.func.isRequired,h.b.bool.isRequired,h.b.bool.isRequired,h.b.func.isRequired,h.b.object.isRequired,h.b.bool.isRequired,h.b.bool.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onSelected=n.onSelected.bind(n),n.state={hasActions:e.hasActions},n}return u()(t,e),o()(t,[{key:"onSelected",value:function(e){var t=this.props,n=t.ts,a=t.channelId,r=t.onSelectAction,i=t.clogger;this.props.hasOverflow?this.props.browseAppActions({ts:n,channelId:a,onSelectAction:r}):e&&"click"!==e.type&&window.open(ra,"_blank"),i.track(y.EventId.MSG_ACTION,{contexts:{ui_context:{action:y.UiAction.CLICK,step:y.UiStep.MORE_ACTIONS_MENU,ui_element:y.UiElement.MORE_MESSAGE_ACTIONS_BUTTON}}})}},{key:"render",value:function(){var e=this.props,t=(e.ts,e.channelId,e.onSelectAction,e.hasActions,e.browseAppActions,e.featureOfflineMode),n=e.isOffline,a=re()(e,["ts","channelId","onSelectAction","hasActions","browseAppActions","featureOfflineMode","isOffline"]),r=this.state.hasActions?aa.t("More message actions\u2026"):aa.t("Add a message action\u2026");return m.a.createElement(pe.a,x()({},a,{label:r,"data-qa":this.props.hasOverflow?"app_message_actions_dialog":"app_directory_link",onSelected:this.onSelected,href:this.props.hasOverflow?void 0:ra,disabled:t&&n,showOfflineIcon:t&&n}))}}]),t}(p.Component));ia.displayName="BrowseAppActions";var oa=Object(de.b)(Object(b.b)(function(e){var t=Object(At.c)(e),n=t.actions,a=t.loading,r=n.length;return{hasActions:a||!!r,hasOverflow:a||r>3,clogger:Object(k.a)({state:e}),featureOfflineMode:Object(E.m)(e,"feature_offline_mode"),isOffline:!Object(T.c)(e)}},function(e){return{browseAppActions:function(){return e(na.apply(void 0,arguments))}}})(ia)),sa=n("rz65"),la=new G.b("message"),ca={ts:h.b.string.isRequired,channelId:h.b.string.isRequired},ua=Object(ge.b)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.ts,a=t.channelId,r=Object(I.a)(e,a,n);return r&&Object(B.i)(e,{message:r})?{id:ee.T.copyText,name:la.t("Copy text"),iconType:"link","data-qa":"copy_text",frecencyId:Object(_e.f)("copy_text"),uiElement:y.UiElement.COPY_LINK_BUTTON}:null});ua.meta={name:"copyText",key:"componentsMessageActionSelectorsCopyTextCopyText"},ua.propTypes=ca;var da=ua,pa=n("Fdc0"),ma=(h.b.oneOf(Object(se.a)(sa.a)),v.a.MessageAction.isRequired,h.b.func.isRequired,v.a.maybeUnknown(v.a.App),h.b.string.isRequired,h.b.object.isRequired,h.b.string,{type:sa.a.default,app:void 0,shortcut:void 0}),ha=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onSelected=n.onSelected.bind(n),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.clogger,n=e.action;if(n.appId){var a={ui_context:{action:y.UiAction.IMPRESSION,step:y.UiStep.MORE_ACTIONS_MENU,ui_element:n.uiElement}};t.track(y.EventId.MSG_ACTION,{app_id:n.appId,action_id:n.id,contexts:a})}}},{key:"onSelected",value:function(e){var t=this.props,n=t.action,a=t.onSelected;a(e,n)}},{key:"renderIcon",value:function(){var e=this.props,t=e.action,n=e.app,a=e.type,r=e.defaultAppIcon,i=n&&n.icons||t.iconSet;if(i){var o=a===sa.a.compactItem?40:56,s=Object(En.b)({icons:i},o,r);return m.a.createElement("img",{alt:"",className:"p-message-actions__icon",src:s})}return t.iconType?m.a.createElement(kn.b,{type:t.iconType}):null}},{key:"render",value:function(){var e=this.props,t=e.action,n=e.app,a=(e.onSelected,e.type),r=e.shortcut,i=re()(e,["action","app","onSelected","type","shortcut"]),o=n&&n.name||t.description;return!o&&n&&(o=m.a.createElement(yn.a,{type:Object(On.d)(n)?"unknown":"non-existent"})),m.a.createElement(pe.a,x()({type:a,label:t.label||t.name,description:o,icon:this.renderIcon(),danger:t.danger,onSelected:this.onSelected,"data-qa":t["data-qa"],shortcut:r},i))}}]),t}(p.PureComponent);ha.displayName="MessageActionMenuItem",ha.defaultProps=ma;var ba=Object(b.b)(function(e,t){var n=t.action;return{app:n&&n.appId&&Object(Cn.e)(e,n.appId),defaultAppIcon:Object(Cn.f)(e),clogger:Object(k.a)({state:e})}})(ha),fa=Object(de.b)(ba),ga=(n("FeTz"),h.b.string.isRequired,h.b.string.isRequired,h.b.string,v.a.Rollup(),h.b.oneOf(Object(se.a)(ee.H)),h.b.func,h.b.func,h.b.func,h.b.arrayOf(h.b.oneOfType([v.a.MessageAction,h.b.node])).isRequired,h.b.bool,h.b.array,h.b.func.isRequired,h.b.func.isRequired,h.b.object.isRequired,h.b.bool.isRequired,h.b.bool.isRequired,{messageContainerType:ee.H.MESSAGE_PANE,onSelectAction:d.a,onMenuItemSelected:d.a,onLoad:d.a,canRunAppAction:!1,appActions:[],rollup:void 0,threadTs:void 0}),_a=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={appActions:e.appActions},Object(f.a)(n,["onSelectAction","renderSingleAppAction","renderSingleSlackAction"]),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.onLoad(),this.props.clogger.track(y.EventId.MSG_ACTION,{contexts:{ui_context:{action:y.UiAction.IMPRESSION,step:y.UiStep.MORE_ACTIONS_MENU,ui_element:y.UiElement.MORE_ACTIONS_MENU}},app_actions_showing:Math.min(this.state.appActions.length,3)})}},{key:"onSelectAction",value:function(e,t){var n=this.props,a=n.ts,r=n.threadTs,i=n.channelId,o=n.handleMessageAction,s=n.onSelectAction,l=n.rollup,c=n.clogger,u=n.messageContainerType;s(e,t,{ts:a,channelId:i})||o(e,t,{ts:a,threadTs:r,channelId:i,rollup:l,messageContainerType:u}),this.props.recordMessageActionFrecencyEvent({action:t});var d={ui_context:{action:y.UiAction.CLICK,step:y.UiStep.MORE_ACTIONS_MENU,ui_element:t.uiElement}};t.appId?c.track(y.EventId.MSG_ACTION,{contexts:d,app_id:t.appId,action_id:t.id}):c.track(y.EventId.MSG_ACTION,{contexts:d})}},{key:"renderAppActions",value:function(){var e=this.props,t=e.onSelectAction,n=e.ts,a=e.channelId,r=this.state.appActions.slice(0,3).map(this.renderSingleAppAction);return[].concat(oe()(r),[m.a.createElement(oa,{key:"browse_app_actions",ts:n,channelId:a,onSelectAction:t})])}},{key:"renderSingleAppAction",value:function(e){var t=this.props,n=t.featureOfflineMode,a=t.isOffline,r=Object(Tt.a)(e);return m.a.createElement(fa,{key:r.id,type:sa.a.compactItem,action:r,onSelected:this.onSelectAction,disabled:n&&a,showOfflineIcon:n&&a})}},{key:"renderSlackActions",value:function(){return this.props.slackActions.map(this.renderSingleSlackAction)}},{key:"renderSingleSlackAction",value:function(e,t){if(!e)return null;if(m.a.isValidElement(e))return m.a.cloneElement(e,{key:t});var n=Object(le.a)(e,["iconType","iconSet"]);return m.a.createElement(fa,{key:n.id,className:"p-message_actions_menu__"+n.id,action:n,onSelected:this.onSelectAction,disabled:n.disabled,showOfflineIcon:n.showOfflineIcon,shortcut:e.shortcut?e.shortcut:void 0})}},{key:"render",value:function(){var e=this.props,t=(e.ts,e.channelId,e.messageContainerType,e.onLoad,e.onMenuItemSelected),n=(e.onSelectAction,e.canRunAppAction),a=(e.appActions,e.slackActions,e.handleMessageAction,re()(e,["ts","channelId","messageContainerType","onLoad","onMenuItemSelected","onSelectAction","canRunAppAction","appActions","slackActions","handleMessageAction"]));return m.a.createElement(ne.f,x()({menuClassNames:"p-message_actions_menu",onMenuItemSelected:t,stripTerminalSeparators:!0},a),this.renderSlackActions(),m.a.createElement(ne.d,null),n&&this.renderAppActions())}}]),t}(p.PureComponent);_a.displayName="MessageActionsMenu",_a.defaultProps=ga;var va=Object(b.b)(function(e,t){var n=t.channelId,a=t.ts,r=t.messageContainerType||ee.H.MESSAGE_PANE,i=Object(I.a)(e,n,a),o=Object(B.s)(i),s=Object(pa.n)(e),l=Object(At.c)(e).actions,c=Object(E.m)(e,"feature_offline_mode"),u=!Object(T.c)(e),d=s&&o,p=c?x()({},t,{disabled:u,showOfflineIcon:u}):t;return{slackActions:Object(ue.a)([Nt(e,p),m.a.createElement(ne.d,null),Object(ce.a)([ee.H.THREADS_FLEXPANE,ee.H.THREADS_VIEW,ee.H.SLI_BRIEFING],r)&&vt(e,t),Te(e,t),da(e,t),Object(ce.a)([ee.H.MESSAGE_PANE,ee.H.UNREAD_VIEW],r)&&We(e,x()({},t,{allUnreads:r===ee.H.UNREAD_VIEW})),dt(e,p),Xe(e,p),De(e,p),bt(e,p),Me(e,p)]),appActions:l,canRunAppAction:d,clogger:Object(k.a)({state:e}),featureOfflineMode:c,isOffline:u}},function(e){return{onLoad:function(){return e(Object(zn.b)())},handleMessageAction:function(){for(var t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];return hn.apply(void 0,n.concat([e]))},recordMessageActionFrecencyEvent:function(t){return e(Object(fe.a)(t))}}})(_a),ya=n("RMmo"),ka=n("X28p"),Oa=n("UceB"),Ca=new G.b("message"),Ea=(h.b.string,h.b.string,h.b.arrayOf(h.b.string),h.b.string,h.b.arrayOf(h.b.shape({ts:h.b.string,user:h.b.string})),h.b.number,h.b.string,v.a.Rollup(),h.b.string,h.b.object,h.b.object,h.b.string,h.b.string,h.b.oneOf(["dense","light"]),h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.string,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.func,h.b.func,h.b.func,h.b.func,h.b.bool,h.b.bool.isRequired,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.bool,h.b.bool,h.b.bool,h.b.object.isRequired,h.b.func,h.b.func,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.string,{reactionKey:null,fileId:null,fileIds:null,comment:null,replies:[],replyCount:0,ts:null,rollup:void 0,threadTs:null,channel:null,file:null,subtype:null,channelId:null,theme:"light",isStarred:!1,isPinned:!1,isEphemeral:!1,isFileAuthorExternal:!1,isReply:!1,canUserReplyToMessage:!1,messageContainerType:void 0,editHandler:d.a,unreadHandler:d.a,onMenuOpen:d.a,onMenuClose:d.a,onEmojiPickerOpen:d.a,onEmojiPickerClose:d.a,showComment:!0,showShare:!0,showReact:!0,showJump:!1,showStar:!0,showMoreActions:!0,canEditMessage:!1,canPin:!1,canMarkUnread:!1,canAddReminder:!1,canDeleteMessage:!1,changeReactionFromUserAction:d.a,pinMessage:d.a,unpinMessage:d.a,updateStar:d.a,renderMenuBelowTrigger:!0,openModal:d.a,showThreadOrRefresh:d.a,addReminderForMessage:d.a,openShareDialog:d.a,jumpToMessage:d.a,featureOfflineMode:!1,wasRecentlyOnline:!1,featureSonicEmoji:!1,clogLinkClick:d.a,clogThreadEvent:d.a,featureContextualMessageShortcuts:!1,parentId:void 0,featureAppViewsReminders:!1}),ja=0,Sa=-8,Ia=4,wa=-16,Na=50,Ta={EDIT:["e"],REACT:["r"],COMMENT:["t"],PIN:["p"],SHARE:["s"],STAR:["a"],MARK_UNREAD:["u"],REMIND:["m"],DELETE:["Delete","del"]},Aa=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={moreActionsMenuOpen:!1,subscribed:"loading"},Object(f.a)(n,["onAddReaction","onEmojiSelected","onComment","onCopyLink","onDelete","onEdit","onMarkUnread","onMenuSelectAction","onMoreActionsMenuClose","onMoreActionsMenuOpen","onPin","onRemind","onRemoveBroadcast","onShare","onStar","onJump","onSubscribe","renderMoreActionsMenu","onMenuKeyDown"]),n.reactionBtnRef=m.a.createRef(),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.featureContextualMessageShortcuts&&this.bindContextualShortcuts()}},{key:"componentWillUnmount",value:function(){this.props.featureContextualMessageShortcuts&&this.unbindContextualShortcuts()}},{key:"onStar",value:function(e){if(this.canStarMessage()){if(this.props.featureContextualMessageShortcuts&&e&&"keydown"===e.type){if(e.target!==e.currentTarget)return;e.stopPropagation()}var t=this.props,n=t.channelId,a=t.ts,r=t.fileId,i=t.fileIds,o=t.comment,s=t.subtype,l=t.isStarred,c={channel:n,timestamp:a};if(r&&(c={file:r}),o&&"file_comment"===s)c={file_comment:o,file_comment_file:i&&i[0]||r};this.props.updateStar(!l,c);var u=l?y.UiElement.UNSTAR_MESSAGE_BUTTON:y.UiElement.STAR_MESSAGE_BUTTON;this.trackAction(u),a&&Object(K.a)()&&this.clogMsgStarClick()}}},{key:"onAddReaction",value:function(e){this.props.reactionKey&&(Object(V.a)({e:e,rxn_key:this.props.reactionKey}),this.trackAction(y.UiElement.ADD_REACTION_BUTTON))}},{key:"onEmojiSelected",value:function(e,t){var n=this.props.reactionKey;this.props.changeReactionFromUserAction({key:n,name:t})}},{key:"onComment",value:function(e){if(this.canCommentOnMessage()){if(this.props.featureContextualMessageShortcuts&&e&&"keydown"===e.type){if(e.target!==e.currentTarget)return;e.stopPropagation()}var t=this.props.threadTs||this.props.ts;this.props.showThreadOrRefresh({channelId:this.props.channel.id,threadTs:t});var n=this.state.subscribed?y.UiElement.REPLY_TO_THREAD_BUTTON:y.UiElement.START_A_THREAD_BUTTON;this.trackAction(n)}}},{key:"onShare",value:function(e){if(this.canShareMessage()){if(this.props.featureContextualMessageShortcuts&&e&&"keydown"===e.type){if(e.target!==e.currentTarget)return;e.stopPropagation()}var t=this.props,n=t.ts,a=t.channelId,r=t.fileId;this.props.fileId&&"file_comment"!==this.props.subtype?this.props.openShareDialog({fileId:r,initialChannelId:a}):this.props.openShareDialog({ts:n,channelId:a}),this.trackAction(y.UiElement.SHARE_MESSAGE_BUTTON)}}},{key:"onEdit",value:function(e){if(this.props.canEditMessage){if(this.props.featureContextualMessageShortcuts&&e&&"keydown"===e.type){if(e.target!==e.currentTarget)return;e.stopPropagation()}this.props.onMenuClose(),this.props.editHandler(),e.stopPropagation(),this.trackAction(y.UiElement.EDIT_MESSAGE_BUTTON,!0)}}},{key:"onDelete",value:function(e){if(this.props.canDeleteMessage){if(this.props.featureContextualMessageShortcuts&&e&&"keydown"===e.type){if(e.target!==e.currentTarget)return;e.stopPropagation()}var t=this.props,n=t.channelId,a=t.ts;this.props.openModal({element:m.a.createElement(Z.a,{channelId:n,ts:a})}),this.trackAction(y.UiElement.DELETE_MESSAGE_BUTTON,!0)}}},{key:"onMarkUnread",value:function(e){if(this.props.canMarkUnread){if(this.props.featureContextualMessageShortcuts&&e&&"keydown"===e.type){if(e.target!==e.currentTarget)return;e.stopPropagation()}this.props.unreadHandler({channelId:this.props.channel.id,unreadTs:this.props.ts}),this.trackAction(y.UiElement.MARK_UNREAD_BUTTON,!0)}}},{key:"onRemind",value:function(e){var t=this,n=this.props,a=n.channel,r=n.ts,i=n.subtype;return this.trackAction(y.UiElement.REMIND_ME_BUTTON,!0),function(){t.props.addReminderForMessage({time:e,message_channel:a.id,message_ts:r,respond_in_channel:"thread_broadcast"===i})}}},{key:"onSubscribe",value:function(){var e=this.props,t=e.replies,n=e.ts,a=e.channel,r=this.state.subscribed,i=t.length&&t[t.length-1].ts;Y(a.id,n,!r,i);var o=r?y.UiElement.UNFOLLOW_MESSAGE_BUTTON:y.UiElement.FOLLOW_MESSAGE_BUTTON;this.trackAction(o,!0)}},{key:"onPin",value:function(e){if(this.props.canPin){if(this.props.featureContextualMessageShortcuts&&e&&"keydown"===e.type){if(e.target!==e.currentTarget)return;e.stopPropagation()}var t=this.props,n=t.ts,a=t.channel,r=t.isPinned,i=t.pinMessage,o=t.unpinMessage;r?(o({ts:n,channelId:a.id}),this.trackAction(y.UiElement.UNPIN_FROM_THIS_CONVERSATION_BUTTON,!0)):(i({ts:n,channelId:a.id}),this.trackAction(y.UiElement.PIN_TO_THIS_CONVERSATION_BUTTON,!0))}}},{key:"onCopyLink",value:function(){var e=this.props,t=e.channel,n=e.ts,a=e.threadTs,r=e.file,i=e.subtype,o=Object(Q.a)(t.id,n,a);r&&"file_comment"!==i&&(o=r.permalink),Object(W.b)(o),this.trackAction(y.UiElement.COPY_LINK_BUTTON,!0)}},{key:"onJump",value:function(){var e=this.props,t=e.channel,n=e.ts,a=e.isReply,r=e.clogLinkClick,i=this.props.threadTs||this.props.ts;this.props.jumpToMessage({channelId:t&&t.id,ts:n,threadTs:a&&i}),this.props.messageContainerType===ee.H.THREADS_VIEW&&r("OPEN_IN_CHANNEL")}},{key:"onRemoveBroadcast",value:function(){var e=this.props,t=e.channelId,n=e.ts;this.props.openModal({element:m.a.createElement(J.a,{channelId:t,ts:n})}),this.trackAction(y.UiElement.REMOVE_FROM_CONVERSATION_BUTTON,!0)}},{key:"onMoreActionsMenuOpen",value:function(){this.setState(function(){return{moreActionsMenuOpen:!0}}),this.props.onMenuOpen(),this.trackAction(y.UiElement.MORE_ACTIONS_BUTTON)}},{key:"onMoreActionsMenuClose",value:function(){this.setState(function(){return{moreActionsMenuOpen:!1}}),this.props.onMenuClose()}},{key:"onMenuSelectAction",value:function(e,t){return t.id===ee.T.editMessage&&(this.onEdit(e),!0)}},{key:"onMenuKeyDown",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).isCurrentItemSubmenu,n=void 0!==t&&t;if(this.props.featureContextualMessageShortcuts)switch(e.key){case Ta.EDIT[0]:this.onEdit(e);break;case Ta.PIN[0]:this.onPin(e);break;case Ta.MARK_UNREAD[0]:this.onMarkUnread(e);break;case Ta.SHARE[0]:this.onShare(e);break;case Ta.DELETE[0]:case Ta.DELETE[1]:this.onDelete(e);break;case Ta.REMIND[0]:if(!n||!this.props.featureAppViewsReminders)return;this.onRemind("Custom")()}}},{key:"getContextualShortcutCommands",value:function(){var e=this,t=[];return t.push({keys:Ta.EDIT,handler:this.onEdit,action:"keydown"}),t.push({keys:Ta.REACT,handler:function(t){t.target===t.currentTarget&&(t.stopPropagation(),t.preventDefault(),e.reactionBtnRef&&e.reactionBtnRef.current&&e.reactionBtnRef.current.click())},action:"keydown"}),t.push({keys:Ta.COMMENT,handler:this.onComment,action:"keydown"}),t.push({keys:Ta.PIN,handler:this.onPin,action:"keydown"}),t.push({keys:Ta.SHARE,handler:this.onShare,action:"keydown"}),t.push({keys:Ta.STAR,handler:this.onStar,action:"keydown"}),t.push({keys:Ta.MARK_UNREAD,handler:this.onMarkUnread,action:"keydown"}),t.push({keys:Ta.REMIND,handler:function(t){t.target===t.currentTarget&&e.props.canAddReminder&&e.props.featureAppViewsReminders&&(t.stopPropagation(),e.onRemind("Custom")())},action:"keydown"}),t.push({keys:Ta.DELETE,handler:this.onDelete,action:"keydown"}),t}},{key:"getTooltipFocusText",value:function(e,t){return this.props.featureContextualMessageShortcuts?m.a.createElement(p.Fragment,null,e," ",m.a.createElement("br",null),Ca.rt("Press {keyShortcut}",{keyShortcut:m.a.createElement(P.a,{label:t})})):e}},{key:"makeAriaLabelForShortcutKey",value:function(e,t){return this.props.featureContextualMessageShortcuts?e+" "+Ca.t("Press {key}",{key:t}):e}},{key:"bindContextualShortcuts",value:function(){var e=this.props.parentId;if(e){var t=document.getElementById(e);t&&(this.keyCommands=new ya.a(t),this.keyCommands.bindAll(this.getContextualShortcutCommands()))}}},{key:"unbindContextualShortcuts",value:function(){this.keyCommands&&(this.keyCommands.reset(),this.keyCommands=null)}},{key:"isAutomated",value:function(){return Object(H.a)(this.props.subtype)}},{key:"isTemp",value:function(){return this.props.ts.indexOf("x")>-1}},{key:"trackAction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={action:y.UiAction.CLICK,ui_element:e};t&&(n.step=y.UiStep.MORE_ACTIONS_MENU),this.props.clogger.track(y.EventId.MSG_ACTION,{contexts:{ui_context:n}})}},{key:"clogMsgStarClick",value:function(){var e=this.props,t=e.channelId,n=e.isStarred,a=e.messageContainerType,r=e.threadTs,i=e.clogger,o=e.clogThreadEvent,s=n?y.EventId.STAR_REMOVE_CLICKED:y.EventId.STAR_ADD_CLICKED,l={channel_id:t,parent_message_id:r};a===ee.H.THREADS_VIEW?o({event:s,metadata:l}):i.track(s,l)}},{key:"canCommentOnMessage",value:function(){var e=this.props,t=e.replyCount,n=e.subtype,a=e.isEphemeral,r=e.canUserReplyToMessage,i=t||"thread_broadcast"===n;return!this.props.isFileAuthorExternal&&(!(this.isAutomated()||this.isTemp()||a)&&!(!r&&!i))}},{key:"canShareMessage",value:function(){var e=this.props,t=e.ts,n=e.subtype;return!e.isEphemeral&&"tombstone"!==n&&!Object(B.tb)(t)&&"file_comment"!==n}},{key:"canStarMessage",value:function(){var e=this.props,t=e.subtype,n=e.isStarred;return!(e.isEphemeral||"tombstone"===t&&!n)}},{key:"renderStar",value:function(){var e=this.props,t=e.fileId,n=e.subtype,a=e.isStarred,r=e.channel;if(!e.showStar||!this.canStarMessage())return null;var i="message";t&&(i="file_comment"===n?"file comment":"file");var o=void 0;o=a?"file"===i?Ca.t("Unstar file"):"file comment"===i?Ca.t("Unstar file comment"):Ca.t("Unstar message"):"file"===i?Ca.t("Star file"):"file comment"===i?Ca.t("Star file comment"):Ca.t("Star message");var s=this.props.featureContextualMessageShortcuts?Ca.t("A"):"",l=this.getTooltipFocusText(o,s);return m.a.createElement(Oa.a,{iconType:a?"small-star-filled":"small-star",label:function(e){return e.hasKeyboardFocus?l:o},ariaLabel:this.makeAriaLabelForShortcutKey(o,s),onClick:this.onStar,"data-qa":"star_message",tooltipPosition:r?"top":"top-right",shortcutKey:this.props.featureContextualMessageShortcuts?Ta.STAR[0]:null})}},{key:"renderShare",value:function(){var e=this.props,t=e.subtype,n=e.featureOfflineMode,a=e.wasRecentlyOnline;if(!e.showShare||!this.canShareMessage())return null;var r="file_share"===t||"file_mention"===t?Ca.t("Share file\u2026",{fallbackHash:"9056b6c934805611f8d5a90ad5c937b656be6641"}):Ca.t("Share message\u2026",{fallbackHash:"587f9ecd03b16e92d064f4fbbfd4ba7e76e29807"});n&&!a&&(r=m.a.createElement($.a,{tooltipLabel:r}));var i=this.props.featureContextualMessageShortcuts?Ca.t("S"):"",o=this.getTooltipFocusText(r,i);return m.a.createElement(Oa.a,{iconType:"share-action",label:function(e){return e.hasKeyboardFocus?o:r},ariaLabel:this.makeAriaLabelForShortcutKey(r,i),onClick:this.onShare,"data-qa":"share_message",shortcutKey:this.props.featureContextualMessageShortcuts?Ta.SHARE[0]:null})}},{key:"renderReaction",value:function(){if(!this.props.showReact)return null;if("tombstone"===this.props.subtype||this.props.isEphemeral)return null;if("file_comment"===this.props.subtype)return null;var e=Ca.t("Add reaction",{fallbackHash:"9203ff94f6bef40e4d9c9db045937b74c11957f1"}),t=this.props.featureContextualMessageShortcuts?Ca.t("R"):"",n=this.getTooltipFocusText(e,t);return this.props.featureSonicEmoji?m.a.createElement(X.a,{onEmojiSelected:this.onEmojiSelected,onClick:this.props.onEmojiPickerOpen,onClose:this.props.onEmojiPickerClose,showHandyReactions:!0},m.a.createElement(Oa.a,{iconType:"small-reaction",label:function(t){return t.hasKeyboardFocus?n:e},ariaLabel:this.makeAriaLabelForShortcutKey(e,t),"data-qa":"add_reaction_action",btnRef:this.reactionBtnRef,shortcutKey:this.props.featureContextualMessageShortcuts?Ta.REACT[0]:null})):m.a.createElement(Oa.a,{iconType:"small-reaction",label:Ca.t("Add reaction",{fallbackHash:"9203ff94f6bef40e4d9c9db045937b74c11957f1"}),onClick:this.onAddReaction,"data-qa":"add_reaction_action"})}},{key:"renderJump",value:function(){if(!this.props.showJump)return null;if(!this.props.channel)return null;var e=Ca.t("Jump");return this.props.messageContainerType!==ee.H.THREADS_VIEW&&this.props.messageContainerType!==ee.H.THREADS_FLEXPANE||(e=Ca.t("Open in channel",{fallbackHash:"1eba140fdd9c6860a1730c408e3064aa417ca2a3"})),m.a.createElement(Oa.a,{iconType:"jump",label:e,onClick:this.onJump,"data-qa":"jump_to_message"})}},{key:"renderComment",value:function(){var e=this.props,t=e.replyCount,n=e.subtype,a=e.canUserReplyToMessage,r=e.messageContainerType,i=e.featureOfflineMode,o=e.wasRecentlyOnline;if(!e.showComment||!this.canCommentOnMessage())return null;var s=t||"thread_broadcast"===n,l=void 0;r===ee.H.THREADS_VIEW?l=Ca.t("View thread in sidebar"):!a&&s?l=Ca.t("View thread"):s?(l=Ca.t("Reply to thread"),i&&!o&&(l=m.a.createElement($.a,{tooltipLabel:l}))):(l=Ca.t("Start a thread"),i&&!o&&(l=m.a.createElement($.a,{tooltipLabel:l})));var c=this.props.featureContextualMessageShortcuts?Ca.t("T"):"",u=this.getTooltipFocusText(l,c);return m.a.createElement(Oa.a,{iconType:"small-reply",label:function(e){return e.hasKeyboardFocus?u:l},ariaLabel:this.makeAriaLabelForShortcutKey(l,c),onClick:this.onComment,ariaHasPopup:null,"data-qa":"start_thread",shortcutKey:this.props.featureContextualMessageShortcuts?Ta.COMMENT[0]:null})}},{key:"renderEllipsis",value:function(){var e=this.props,t=e.renderMenuBelowTrigger,n=e.channel,a=e.featureOfflineMode,r=e.wasRecentlyOnline,i=e.showMoreActions;if(!n||!i)return null;var o=Ca.t("More actions",{fallbackHash:"3a91b1007dce1af87db6afdb266966dd5d7a3df1"});return a&&!r&&(o=m.a.createElement($.a,{tooltipLabel:Ca.t("More actions")})),m.a.createElement(ne.e,{renderMenu:this.renderMoreActionsMenu,position:t?"right-bottom":"top-right",allowanceX:t?Na:0,offsetX:t?Ia:ja,offsetY:t?wa:Sa,onOpen:this.onMoreActionsMenuOpen,onClose:this.onMoreActionsMenuClose},m.a.createElement(Oa.a,{iconType:"small-ellipsis",label:o,tooltipPosition:"top-right","data-qa":"more_message_actions"}))}},{key:"renderMoreActionsMenu",value:function(e){var t=this.props,n=t.channel,a=t.ts,r=t.threadTs,i=t.messageContainerType,o=t.rollup,s=e.onTriggerClose,l=e.onMenuItemSelected;return m.a.createElement(va,{rollup:o,ts:a,threadTs:r,channelId:n.id,onSelectAction:this.onMenuSelectAction,onTriggerClose:s,onMenuItemSelected:l,messageContainerType:i,onMenuKeyDown:this.onMenuKeyDown})}},{key:"render",value:function(){var e=_()("c-message__actions",{"c-message__actions--menu-showing":this.state.moreActionsMenuOpen,"c-message__actions--dense":"dense"===this.props.theme,"c-message__actions--offscreen":this.props.renderOffscreen}),t=Ca.t("Message actions");return m.a.createElement(ka.a,{className:e,ariaLabel:t},this.renderReaction(),this.renderJump(),this.renderComment(),this.renderShare(),this.renderStar(),this.renderEllipsis())}}]),t}(p.PureComponent);Aa.displayName="MessageActions",Aa.defaultProps=Ea;var Ra={changeReactionFromUserAction:N.a,pinMessage:O.m,unpinMessage:O.q,updateStar:C.a,openModal:te.e,showThreadOrRefresh:function(){return w.n.apply(void 0,arguments)},addReminderForMessage:U,openShareDialog:A.a,jumpToMessage:function(){return R.a.apply(void 0,arguments)}};t.a=Object(b.b)(function(e,t){var n=t.fileId,a=t.channelId,r=t.ts,i=t.showReact,o=t.messageContainerType,s=Object(S.e)(e,a),l=Object(I.a)(e,a,r),c=Object(E.c)(e),u=Object(q.a)(e,"msg_edit_window_mins");return{channel:s,file:Object(j.c)(e,n),isFileAuthorExternal:Object(j.f)(e,n),featureSonicEmoji:Object(E.m)(e,"feature_sonic_emoji"),clogger:Object(k.a)({state:e}),featureOfflineMode:Object(E.m)(e,"feature_offline_mode"),wasRecentlyOnline:Object(T.h)(e),canUserReplyToMessage:Object(B.r)(e,{message:l,channel:s}),showReact:Object(B.e)(e,l)&&i,canEditMessage:Object(B.l)(e,c,l,s,u),canPin:Object(B.o)(e,{message:l,channel:s}),canMarkUnread:Object(B.m)(e,{message:l,channel:s}),canAddReminder:Object(B.f)(e,{message:l,channel:s}),canDeleteMessage:Object(B.k)(e,{message:l,channel:s,messageContainerType:o}),featureContextualMessageShortcuts:Object(E.m)(e,"feature_contextual_message_shortcuts"),featureAppViewsReminders:Object(E.m)(e,"feature_app_views_reminders")}},Ra)(Aa)},"0rID":function(e,t,n){"use strict";n.d(t,"a",function(){return l});var a=n("sk9p"),r=n.n(a),i=n("ifKl"),o=n("yIs4"),s=n("kxpR");function l(e,t){var n=Object(s.useRef)(e),a=Object(s.useState)(e),l=r()(a,2),c=l[0],u=l[1];return Object(s.useEffect)(function(){if(c!==n.current&&Object(o.a)(t)&&t>0){var e=setTimeout(function(){u(n.current)},t);return function(){clearTimeout(e)}}return i.a},[t,c]),[c,u]}},"0xwB":function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return i});var a=n("ROZo"),r=(Object(a.b)("TS.permissions.members.canPostInModelOb",function(){return!1}),Object(a.b)("TS.permissions.members.canCreateConvertOrgSharedChannels",function(){return!1}),Object(a.b)("TS.permissions.members.canUserInviteToWorkspace",function(){return!1})),i=(Object(a.b)("TS.permissions.members.canEditUserGroups",function(){return!1}),Object(a.b)("TS.permissions.members.canCreateAndDeleteUserGroups",function(){return!1}))},"0z7M":function(e,t,n){"use strict";var a=n("kxpR"),r=n.n(a),i=n("XHGt"),o=n("aK/h"),s=n("DQNL"),l=n("HYSh"),c=n("t85p"),u=n("A+cF"),d=n("9mdM"),p=n("kd6D"),m=n("od5y"),h=n("nNoG"),b=(n("JfyJ"),new h.b("user_groups")),f=(o.b.string,o.b.object,o.b.bool.isRequired,{className:void 0,userGroup:void 0}),g={unknown:"unknown",nonexistent:"non-existent"},_=function(e){var t=Object(s.h)(e);return r.a.createElement(u.c,{className:"c-user_group__name"},r.a.createElement(m.b,{type:"user_groups",inline:!0,className:"c-medium_user_group__icon"}),t)};_.displayName="renderName";var v=function(e){var t=Object(s.e)(e);return r.a.createElement(u.b,null,t)};v.displayName="renderDescription";var y=function(e,t){var n=Object(s.f)(e),a=Object(s.l)(e);return r.a.createElement(u.a,null,r.a.createElement("span",{className:"c-medium_user_group__handle"},n),t?b.rt("{count} {count, plural, =1 {member} other {members}}",{count:a}):void 0)};function k(e){var t=e.className,n=e.userGroup,a=e.featureSonicUserGroups,i=!Object(s.u)(n);if(Object(s.s)(n)||Object(s.r)(n))return r.a.createElement(d.a,{type:Object(s.s)(n)?g.unknown:g.nonexistent,size:"medium"});var o=i?p.c.dim:null;return r.a.createElement(u.d,{className:t,size:"medium",style:o,text:_(n),subtext:v(n),metadata:y(n,a)})}y.displayName="renderMetaData",k.displayName="MediumUserGroupEntity",k.defaultProps=f,t.a=Object(i.b)(function(e,t){var n=t.id;return{userGroup:t.group||Object(l.e)(e,n),featureSonicUserGroups:Object(c.m)(e,"feature_sonic_user_groups")}})(k)},"1Uzj":function(e,t,n){"use strict";n.d(t,"a",function(){return l});var a=n("kxpR"),r=n.n(a),i=n("XHGt"),o=n("uvIC"),s=function(e,t){var n=t.fileId;return{file:Object(o.c)(e,n)}};function l(e){return Object(i.b)(s)(function(t){return t&&t.file?r.a.createElement(e,t):null})}},"1c4n":function(e,t,n){},"1iAE":function(e,t,n){},"1lYC":function(e,t,n){},"1yga":function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("owWc"),p=n("F294"),m=n("ifKl"),h=n("kxpR"),b=n.n(h),f=n("aK/h"),g=n("XHGt"),_=n("yPgC"),v=n("tbBR"),y=n("aLpA"),k=n("fYfO"),O=n("hOQf"),C=n("t85p"),E=n("uvIC"),j=n("nNoG"),S=n("/9ln"),I=n("U3Q0"),w=n("H3xq"),N=n("6Iy0"),T=n("dhvi"),A=new j.b("msg_edit"),R=(f.b.string.isRequired,f.b.string.isRequired,f.b.bool,f.b.string,f.b.func,f.b.bool,f.b.string,_.a.Rollup(),f.b.bool,f.b.func,{messageExists:!0,removeMessage:m.a,subtype:void 0,hasFile:!1,fileMode:void 0,rollup:void 0,useBulkDelete:!1,closeModal:m.a}),P=function(e){function t(){r()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onGo=e.onGo.bind(e),e}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.maybeCloseModal()}},{key:"componentDidUpdate",value:function(){this.maybeCloseModal()}},{key:"onGo",value:function(){var e=this.props,t=e.ts,n=e.channelId,a=e.removeMessage,r=e.useBulkDelete,i=e.rollup,o=r?Object(d.a)(i,function(e,t){return e.concat(t.timestamps)},[]):[];o.sort(),a({channelId:n,ts:t,rollupTimestamps:r&&o?o:[]}).catch(m.a)}},{key:"getBodyText",value:function(){var e=this.props.subtype;if(!e)return null;var t=this.getFileLabel();if("file_upload"===e){if("file"===t)return A.t("Note that deleting this message will not delete the file that was uploaded.");if("snippet"===t)return A.t("Note that deleting this message will not delete the snippet that was uploaded.");if("post"===t)return A.t("Note that deleting this message will not delete the post that was uploaded.")}else if("file_share"===e){if("file"===t)return A.t("Note that deleting this message will not unshare the file.");if("snippet"===t)return A.t("Note that deleting this message will not unshare the snippet.");if("post"===t)return A.t("Note that deleting this message will not unshare the post.")}else if("file_comment"===e)return A.t("Note that deleting this message will not delete the comment.");return null}},{key:"getFileLabel",value:function(){var e=this.props,t=e.hasFile,n=e.fileMode;return t?"snippet"===n?"snippet":"post"===n?"post":"file":null}},{key:"maybeCloseModal",value:function(){this.props.messageExists||this.props.closeModal()}},{key:"render",value:function(){var e=this.props,t=e.ts,n=e.channelId,a=e.rollup,r=e.useBulkDelete;if(!e.messageExists)return null;var i=this.getBodyText();return b.a.createElement(v.a,{id:y.H.DELETE_MSG_DIALOG},b.a.createElement(I.b,{title:A.t("Delete message"),goButtonText:A.t("Delete"),goButtonType:"danger",onGo:this.onGo},A.t("Are you sure you want to delete this message? This cannot be undone."),i&&b.a.createElement("div",{className:"margin_top_50"},i),b.a.createElement("div",{className:"margin_top_100"},b.a.createElement(w.a,{ts:t,channelId:n,rollup:r&&a?a:null,blocksContainerContext:N.a.delete_dialog,isStandalone:!0}))))}}]),t}(h.PureComponent);P.displayName="BaseDeleteMessageDialog",P.defaultProps=R;var M={removeMessage:function(){return S.a.apply(void 0,arguments)},closeModal:function(){return T.a.apply(void 0,arguments)}},x=Object(g.b)(function(e,t){var n=t.channelId,a=t.ts,r=t.rollup,i=Object(C.m)(e,"feature_allow_bulk_delete_join_leave_messages"),o=Object(k.a)(e,n,a);if(!o)return{messageExists:!1};var s=o.files,l=Object(E.c)(e,Object(p.a)(s)),c=!1,u=void 0;l&&(c=!0,u=l.mode);var d=!(!i||!r);return{messageExists:!0,hasFile:c,fileMode:u,subtype:Object(O.N)(o),rollup:r,useBulkDelete:d}},M)(P);x.propTypes={channelId:f.b.string.isRequired,ts:f.b.string.isRequired},t.a=x},"2/vs":function(e,t,n){"use strict";n.d(t,"c",function(){return g}),n.d(t,"b",function(){return _}),n.d(t,"a",function(){return v});var a=n("QbLZ"),r=n.n(a),i=n("aK/h"),o=n("Pb16"),s=n("vhAc"),l=n("XfeM"),c=n("t85p"),u=n("ns4K"),d=n("brL+"),p=n("DVJN"),m=n("jZWL"),h=n("umiW"),b=n("5/cL"),f=Object(l.b)("Runs a message action (deprecated)",function(e,t,n){var a=t(),i=Object(h.f)(a);return Object(h.c)(i,n)?Promise.resolve():(e(Object(h.e)(n)),e(Object(s.c)(r()({},n,{type:"message_action"}))).then(function(){return e(Object(h.j)(n))}).catch(function(){e(Object(h.i)(n));var t=Object(o.a)({onRetry:function(){return e(f(n))}});e(Object(u.c)({element:t}))}))});f.meta={name:"deprecatedRunMessageAction",key:"appActionsStoreActionsDeprecatedRunMessageAction",description:"Runs a message action (deprecated)"},f.propTypes={actionId:i.b.string,appId:i.b.string,channelId:i.b.string,messageTs:i.b.string};var g=Object(l.b)("Runs a message action",function(e,t,n){if(!Object(c.m)(t(),"feature_app_actions_fe_refactor"))return e(f(n));e(Object(b.c)());var a=r()({},n,{type:p.a.messageAction});return e(Object(s.c)(a)).catch(function(){var t=Object(o.a)({onRetry:function(){return e(g(a))}});e(Object(u.c)({element:t}))})});g.meta={name:"runMessageAction",key:"appActionsStoreActionsRunMessageAction",description:"Runs a message action"},g.propTypes={actionId:i.b.string.isRequired,appId:i.b.string.isRequired,channelId:i.b.string.isRequired,messageTs:i.b.string.isRequired};var _=Object(l.b)("Runs a global action",function(e,t,n){e(Object(b.c)());var a=r()({},n,{type:p.a.globalAction});return e(Object(s.c)(a)).catch(function(){var t=Object(o.a)({onRetry:function(){return e(_(a))}});e(Object(u.c)({element:t}))})});_.meta={name:"runGlobalAction",key:"appActionsStoreActionsRunGlobalAction",description:"Runs a global action"},_.propTypes={actionId:i.b.string.isRequired,appId:i.b.string.isRequired};var v=Object(l.b)("Explicitly load app actions",function(e,t){var n=t(),a=Object(d.b)(n);return Object(m.a)(a)});v.meta={name:"loadAppActions",key:"appActionsStoreActionsLoadAppActions",description:"Explicitly load app actions"}},"20nV":function(e,t,n){},"23La":function(e,t,n){},"2Dlx":function(e,t,n){},"2FVR":function(e,t,n){},"2LCd":function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("kxpR"),p=n.n(d),m=n("aK/h"),h=n("MIIS"),b=n("OZf9"),f=n("CpTu"),g=n("XHGt"),_=n("yHhI"),v=n("UF3u"),y=(m.b.string.isRequired,m.b.string,m.b.string,m.b.object.isRequired,0),k=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.originalFavicon=n.findFavicon(),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){y&&this.props.logger.error("Multiple Favicons mounted"),y+=1,this.updateFavicon()}},{key:"componentDidUpdate",value:function(e){Object(v.a)(this.getFaviconProps(e),this.getFaviconProps(this.props))||this.updateFavicon()}},{key:"componentWillUnmount",value:function(){y-=1,this.setOrRemoveFavicon(this.originalFavicon)}},{key:"getFaviconProps",value:function(e){return{rel:"shortcut icon",href:e.href,sizes:e.sizes,type:e.type}}},{key:"setOrRemoveFavicon",value:function(e){var t=document.querySelector("head");if(t){var n=this.findFavicon();n?e?t.replaceChild(e,n):n.remove():e&&t.appendChild(e)}else this.logger.error("<head> not found")}},{key:"findFavicon",value:function(){var e=document.querySelectorAll("head > link");return Object(f.a)(e,function(e){var t=e.getAttribute("rel");return!(!t||!t.split(" ").includes("icon"))})}},{key:"updateFavicon",value:function(){var e=document.createElement("link");Object(b.a)(this.getFaviconProps(this.props),function(t,n){e.setAttribute(n,t)}),this.setOrRemoveFavicon(e)}},{key:"render",value:function(){return null}}]),t}(d.PureComponent);k.displayName="Favicon",k.defaultProps={sizes:"16x16 32x32 48x48",type:"image/png"};var O=Object(g.b)(function(e){return{logger:Object(_.a)({state:e})}})(k),C=n("dxEi"),E=n("G3Sk"),j=n("9kTo"),S="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAzFBMVEVKFEyScpNLFU1cK16Mao1hMmOEX4WObZBWJFiQb5FZKFtNGE97VH1QHFJOGVBsQW5jNWV2TXdsQG1aKVxdLV9WI1dwRXGObI9pPGpTIFVPG1FfL2FSH1RVIld8VX1YJlpOGlBbK12RcZJMFk5iNGSBW4JmOGhgMGF3TniLaIx9Vn5lN2eFYYaNa45eLmB5UXtkN2ZUIVaGYodkNmVtQm9YJ1pRHVOHZImCXIN1THZgMWKDXoR9V392TniMaY1nOmmKZ4tpPWtXJVlvRHFqMc1IAAABCklEQVR4Xr3RxZLEIBSG0f9C3NPuPu7u/v7vNEE6dFdRM7s+i0sFvg0EO9X0/CQFeqfeCWwyh4gmCKgSwGJOlRCuWG5gMSKBrcTch03jvwD9Z9eFNcj4gcRj1EE2H5n7OaS93+lA7uXQPKo96kDt9aH4JnDUNS+xEEsLSmKCC0zFMoWY3RmUdBKSFCYDoHPmNCCCaw6DSTC2v8bnw+E9llHrCkBUHkvJbbz1hC4Tl+khWtDaHrQjGXAxH1CSEWwGzUJMH09ktKHkRPTCdBCEdfCKteItj6EDjDuHUvnBsKkO7EywIvr8+juofMNCnnTVUsCird6Gq99o80PkRFh6VcZgFafyYDDDbv0CWLgS6JWTyyIAAAAASUVORK5CYII=",I="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAABNVBMVEVKFEz///9NGE+EX4VLFU3w7PD9/f1SH1Tb0Nv59/n18/W4orhZKFt2TnhwRXF2TXdpPGqghKFMFk7FtMZTIFVhMmNxR3PHt8hfL2F6U3xpPWt/WYD+/v5nOWhWI1edgJ7z8POBW4LIuMhySHS6pruHZIl/WoGJZopuQ3CObI/Vydba0NtsQW7ArcHw6/DEs8VYJlqojqnx7fH8/PyfgqDGtcbg1+Du6e7e1N5kN2Z8VX2fg6BbKlxOGVBxRnJ4T3ljNWV6UnuDXoSLaIyih6NMF07az9qWd5f8+/zUx9Ts5+zj2+Pv6u/t5+13Tni1n7WYeZlTH1XYzdn49vjLu8uIZYm5pLpmOGipkKqMaY2UdJXr5euZe5prP2xsQG2JZovTxtSnjahOGlDSxdOQcJKHY4hXJVnkajHYAAABJUlEQVR4Xr3PNXbFMBCF4Tvmx8wYZmZmZmaG/S8hHke2UuikfF9xp9DfCC3V4YQzUeB01umDStYkogKS5EpCIUGukLHOZwMKRYsLrYv3EyqTljqQcm26DmWQXen2HNsIgrNEUf7PJGGm1w/yJlkLEBwK9PvBgLtWTgRhGQxD53OHCT5rIpiSwRCe+QyCt1kXQbQQIk9oZBQYGz9sAETV6RgChuaBpGlpSHPzlcoilpZLqwDikXZPZtOG0CCXvrXt7g7iu+TbM0Sw7wUx3gNESCqL4IiDfA9vGCck1USQIqLztAjKF+S7hO/qOmVDBLi57fRE7jX8FQRqMugienj8P3A9QeGLg+bveYFCjYNXxPiUoPJWJTOOd4foQ4OSHeUH47uO1voBEO4eo1Zt+vMAAAAASUVORK5CYII=",w="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAC9UlEQVR4AdSVA4wfXxDH/7H/rm3bttvzVWfbtm3btm3bVnC27Wk23dvu/VxPvsGbTOaz7w32j5f/v6ZKz/97mXSQoeIIM4WiGvDsvxeFh5l+H4Dsc/m26raZqZmC+MIPx9kQQNaZ998GwLyfdXx4fO2zFSUVg1PwplAZs/y3ASi+UVrD2MLcwqstb7TYtCuNXL8NgOscz8rKCpbxZju9Pq9he2lVxTHWb1MDL11vLAMABnxGY2NjRTwa36yLeC7y6bDp6nMZgOBoxG+ysLBQl1tUDqWmFgBVVaZX0fqog5MSnTLTPhYIQABwJ7hEga13xVEWKgDQkdiewdnowKjkI2kEAMelpaWurq58NatyygHQ72skraGkEQWsrq7CQ3V0dBg/4S84zEgRAKaJNGB8aBzCoBLIEWGoc2g8++d2HocK9BUZQGFCIWlAdkQOhInfl0A9wBC9J/7k32f19fXZkXG5apZF9NLFN7gLjzDBOkk8SO+779UGADYBzCpM0+bU4MyPK3h/9CMSGWwZMjEyMTY45qHtCccX/72Cq0DZ4cXiI+LZbrNf++sG6MZfN2/9fQffpjCr0Ow4kW1liHm9je7llk/LHJYVKjh+AeC/JqjOqqH1QRvEdpIdPHQ7GGSeyqoyq/NdEUDDpJ/IJPsmFycX4wQL0dfID21oRBsAuO8axqCY8FGtVa2ox1HJCcm+vLRMolT1RfXwDAQAw33DOIAinTLW09XWBWHw7WvkTOSOGAHASN8INkjmmZyJoCnWA30MYQleCWQBQjeECQC89X3QiOaKltdb6QgC4OvmZ+dJZC9LKyNcA5CxgEmKfyqQkEIRBIAErwuHWIemBqbhBK9nL++A6zoS25QwgFpRDUB2EdhQz5CLmut3BCAmdk+cdoARnzE219T41GaniaAZ7QDoNmyuusJ6cOKGA4acdgAoyCIYViYkgn8RzDB46HYyoH+O2oI6sptqfYTrZGCSBRa0YIMQBWK4amSYcjiFqYgwGhkWAAA494XLYBFPegAAAABJRU5ErkJggg==",N="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAzFBMVEVKFEyScpNLFU1cK16Mao1hMmOEX4WObZBWJFiQb5FZKFtNGE97VH1QHFJOGVBsQW5jNWV2TXdsQG1aKVxdLV9WI1dwRXGObI9pPGpTIFVPG1FfL2FSH1RVIld8VX1YJlpOGlBbK12RcZJMFk5iNGSBW4JmOGhgMGF3TniLaIx9Vn5lN2eFYYaNa45eLmB5UXtkN2ZUIVaGYodkNmVtQm9YJ1pRHVOHZImCXIN1THZgMWKDXoR9V392TniMaY1nOmmKZ4tpPWtXJVlvRHFqMc1IAAABCklEQVR4Xr3RxZLEIBSG0f9C3NPuPu7u/v7vNEE6dFdRM7s+i0sFvg0EO9X0/CQFeqfeCWwyh4gmCKgSwGJOlRCuWG5gMSKBrcTch03jvwD9Z9eFNcj4gcRj1EE2H5n7OaS93+lA7uXQPKo96kDt9aH4JnDUNS+xEEsLSmKCC0zFMoWY3RmUdBKSFCYDoHPmNCCCaw6DSTC2v8bnw+E9llHrCkBUHkvJbbz1hC4Tl+khWtDaHrQjGXAxH1CSEWwGzUJMH09ktKHkRPTCdBCEdfCKteItj6EDjDuHUvnBsKkO7EywIvr8+juofMNCnnTVUsCird6Gq99o80PkRFh6VcZgFafyYDDDbv0CWLgS6JWTyyIAAAAASUVORK5CYII=",T="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAzFBMVEVKFEyScpNLFU1cK16Mao1hMmOEX4WObZBWJFiQb5FZKFtNGE97VH1QHFJOGVBsQW5jNWV2TXdsQG1aKVxdLV9WI1dwRXGObI9pPGpTIFVPG1FfL2FSH1RVIld8VX1YJlpOGlBbK12RcZJMFk5iNGSBW4JmOGhgMGF3TniLaIx9Vn5lN2eFYYaNa45eLmB5UXtkN2ZUIVaGYodkNmVtQm9YJ1pRHVOHZImCXIN1THZgMWKDXoR9V392TniMaY1nOmmKZ4tpPWtXJVlvRHFqMc1IAAABCklEQVR4Xr3RxZLEIBSG0f9C3NPuPu7u/v7vNEE6dFdRM7s+i0sFvg0EO9X0/CQFeqfeCWwyh4gmCKgSwGJOlRCuWG5gMSKBrcTch03jvwD9Z9eFNcj4gcRj1EE2H5n7OaS93+lA7uXQPKo96kDt9aH4JnDUNS+xEEsLSmKCC0zFMoWY3RmUdBKSFCYDoHPmNCCCaw6DSTC2v8bnw+E9llHrCkBUHkvJbbz1hC4Tl+khWtDaHrQjGXAxH1CSEWwGzUJMH09ktKHkRPTCdBCEdfCKteItj6EDjDuHUvnBsKkO7EywIvr8+juofMNCnnTVUsCird6Gq99o80PkRFh6VcZgFafyYDDDbv0CWLgS6JWTyyIAAAAASUVORK5CYII=",A="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAABSlBMVEVKFEyScpNLFU1iNGSMao17VH2Qb5FZKFtNGE9hMmPGJFKObZCOb4+EX4WRcZJjNWVHE0lcK15sQG2Iaol2TXdIE0pQHFJaKVxVIlfMJVNwRXHMJVRdLV98VX1WI1dsQW5WJFhOGVA3DzlMFk5PG1FfL2GLaIzNJVOBW4J3Tnh9Vn5gMGGIXXu6JlKPcJCaRWdYJ1pbK11TIFV+Yn9zKE/FJFFSH1SCXINTI1WzNFxYJlpWJVhFEke3IlB3T2uTP2CwMlq+K1a2Ik+WP2FHETylNlyNa46MaY1/Y39sT21HIUheMGA5Dzo7ED1JFEtgM2JeLmBZMFpRHVNhM2N5UXunN11UIVZgMWJ5XnptQm9pPGqBWHbIKFSHZImiH0uQcZF1THaMR2dJE0uDXoR9V392TniBZYJnOmmKZ4tpPWtXJVmObI9vRHFOGlBSjo4eAAABPUlEQVR4Xr3QNWPrQBCF0TtiMzNTmJmZmZnh8fv/bVYrGWRbKVLka+c0c9FcZL7TUgvwO78OYh6XHIW/3w4UJCLKYGraDgwTS8HuoB2YID3hsC9lAxDk4DR0bgcwculwQHTf3rWAQqCXF9AA8TH0nGgCMYnMNocg0sCP1YQVeKjWJANe9+jYuAW46kCCg5g4XltPNQC5Ds4wQ0zMzl0tLC4tO50rD2BFM4oBFLkMJDekIF7coa3tnWJxbx9GAg/1BBxE/KwIB/GjSuUEJTV9AUAN9/Dka80yoUPQn7mB6qVqXTDr4CCgs3uEqV6+EcR8OnDhqQFkTZBj4FUwQV6pgTdU873nNJgA8WQ3L/xTgCUT2GcCkejX788B6w9aMy5/DeBrB7LGNnyONNr1j0hSUfIwJqBtWpQfyv/xvX0AvdA4SuBm2+sAAAAASUVORK5CYII=",R="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAw0lEQVR4AWOAg4IAAYaqqHqG6sj9QPo/jfB5IE5gwAAVEQpAifsgRXTC98F2wgB9LUc4AhzqoCCBC9IfNzAwVEefHzAHVALTG4gxoJiQglEHJKyZ8b9hzxpyMEgv5Q64//71f3LB/XevaRwFo2lgNA2MpoHRNDCaBgjHOZ3SACLOh2IUjDpg1AGV0fsHrlkO7KqBOgcD5oCKCGA/sSFBANhBoHvXDGQnSucUJEBPy8F2ogNwkFRH0ayrBu36N4A7pVAAAK813oG8J1mnAAAAAElFTkSuQmCC",P=(m.b.shape({getState:m.b.func.isRequired,subscribeImmediate:m.b.func,subscribe:m.b.func.isRequired}).isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderWithState=n.renderWithState.bind(n),n}return u()(t,e),o()(t,[{key:"renderWithState",value:function(e){var t=Object(C.d)(e),n=!!Object(E.f)(e),a=Object(E.o)(e),r=void 0;return t?r=n?w:a?I:Object(j.a)()?R:S:(r=N,r=n?A:a?T:N),p.a.createElement(O,{href:r})}},{key:"render",value:function(){return p.a.createElement(h.a,{render:this.renderWithState,store:this.props.store})}}]),t}(d.Component));P.displayName="WorkspaceFavicon";var M=P;t.a=M},"2XjY":function(e,t,n){},"2ekl":function(e,t,n){},"2ojh":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=new(n("nNoG").b)("message");function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.currentUserId,n=e.pinnedBy,r=e.renderPinnedBy;return n?n===t?a.t("Pinned by you"):a.rt("Pinned by {member}",{member:r(n)}):a.t("Pinned")}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.long,n=void 0!==t&&t,r=e.renderStarButton,i=e.featureMessageLabelsCopy;return n?a.rt("<star>Added to your starred items</star>",null,r):i?a.rt("<star>Starred</star>",null,r):a.rt("<star>starred</star>",null,r)}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isPinned,n=e.isStarred,o=e.isEphemeral,s=e.isBroadcast,l=e.isCustomResponse,c=e.isSliHighlight,u=e.isSelfIm,d=e.isSlackbotIm,p=e.currentUserId,m=e.pinnedBy,h=e.renderPinnedBy,b=e.renderStarButton,f=e.renderHighlight,g=e.renderBroadcast,_=e.featureMessageLabelsCopy;return o?u||d?null:a.t("Only visible to you"):_&&s?t&&n?a.rt("<a>Also sent to the channel</a> \u2219 {pinned} \u2219 {starred}",{pinned:r({currentUserId:p,pinnedBy:m,renderPinnedBy:h}),starred:i({renderStarButton:b,featureMessageLabelsCopy:_}),fallbackHash:"d2f0c6a83913776accbe386c64ce06300680f44f"},g):n?a.rt("<a>Also sent to the channel</a> \u2219 {starred}",{starred:i({renderStarButton:b,featureMessageLabelsCopy:_}),fallbackHash:"aead0d7a1eed4a8c18d29d9377a3f4fabc60f2cc"},g):t?a.rt("<a>Also sent to the channel</a> \u2219 {pinned}",{pinned:r({currentUserId:p,pinnedBy:m,renderPinnedBy:h}),fallbackHash:"b25a074514a36f2157703e7f0f332143878f55a8"},g):a.rt("<a>Also sent to the channel</a>",{fallbackHash:"5ee7c5390f0e1abffe537265bbbbb3316238001a"},g):l?t&&n?a.rt("{pinned} \u2219 {starred} \u2219 Custom response",{pinned:r({currentUserId:p,pinnedBy:m,renderPinnedBy:h}),starred:i({renderStarButton:b,featureMessageLabelsCopy:_})}):n?a.rt("{starred} \u2219 Custom response",{starred:i({long:!0,renderStarButton:b,featureMessageLabelsCopy:_})}):t?a.rt("{pinned} \u2219 Custom response",{pinned:r({currentUserId:p,pinnedBy:m,renderPinnedBy:h})}):a.t("Custom response"):c?t&&n?a.rt("{pinned} \u2219 {starred} \u2219 {highlight}",{highlight:f(),pinned:r({currentUserId:p,pinnedBy:m,renderPinnedBy:h}),starred:i({renderStarButton:b,featureMessageLabelsCopy:_})}):n?a.rt("{starred} \u2219 {highlight}",{highlight:f(),starred:i({long:!0,renderStarButton:b,featureMessageLabelsCopy:_})}):t?a.rt("{pinned} \u2219 {highlight}",{highlight:f(),pinned:r({currentUserId:p,pinnedBy:m,renderPinnedBy:h})}):a.rt("{highlight}",{highlight:f()}):t&&n?a.rt("{pinned} \u2219 {starred}",{pinned:r({currentUserId:p,pinnedBy:m,renderPinnedBy:h}),starred:i({renderStarButton:b,featureMessageLabelsCopy:_})}):t?r({currentUserId:p,pinnedBy:m,renderPinnedBy:h}):n?i({long:!0,renderStarButton:b,featureMessageLabelsCopy:_}):null}},"34TR":function(e,t,n){},"3JmS":function(e,t,n){"use strict";var a=n("kxpR"),r=n.n(a),i=n("XHGt"),o=n("TSYQ"),s=n.n(o),l=n("MnCE"),c=n("aK/h"),u=n("t85p"),d=n("Fdc0"),p=n("nNoG"),m=(n("/gIb"),new p.b("member_profile")),h=(c.b.string,c.b.object.isRequired,c.b.bool.isRequired,c.b.string.isRequired,{className:void 0});function b(e){var t=e.className,n=e.member,a=e.featureEasyProfileImgDownload,i=e.memberName,o=n.profile.image_512,l=n.profile.image_48,c=a?"url('"+l+"')":"url('"+o+"'), url('"+l+"')",u=a?m.t("Profile photo for {member_name}",{member_name:i}):"";return r.a.createElement("div",{className:s()(t,"p-member_profile_picture"),style:{backgroundImage:c}},a&&r.a.createElement("img",{src:o,alt:u,className:"p_member_profile_picture__img"}))}b.displayName="MemberProfilePicture",b.defaultProps=h;t.a=Object(i.b)(function(e,t){var n=t.member;return{featureEasyProfileImgDownload:Object(u.m)(e,"feature_easy_profile_img_download"),memberName:Object(d.V)(e,n)}})(Object(l.a)(b))},"3dej":function(e,t,n){},"3ise":function(e,t,n){},"3lVB":function(e,t,n){"use strict";n.d(t,"b",function(){return r});var a=null;function r(){return a}t.a=function(e){var t=e.prevTeamId,n=e.nextTeamId,r=e.navigationTimestamp;return t===n?Promise.resolve():(a=r,Promise.resolve())}},"3rHJ":function(e,t,n){},"445Q":function(e,t,n){},"4EIq":function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("vJtL"),p=n("aK/h"),m=n("kxpR"),h=n("XHGt"),b=n("brL+"),f=function(e,t){return e+"-"+t},g={add:function(e,t,n){this.sections||(this.sections={});var a=f(e,t);this.sections[a]||(this.sections[a]=n)},remove:function(e,t){if(this.sections){var n=f(e,t);this.sections[n]&&(this.sections[n]=null,delete this.sections[n])}},get:function(e,t){if(this.sections)return this.sections[f(e,t)]}},_=(p.b.string.isRequired,p.b.number.isRequired,p.b.object.isRequired,p.b.node,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),a=e.component,i=a.focus,o=a.blur;if(Object(d.a)(i)&&Object(d.a)(o))return l()(n);throw new Error("FocusableSection requires a single child that implements focus and blur methods.")}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.teamId,n=e.order,a=e.component;g.add(t,n,a)}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.teamId,n=e.order;g.remove(t,n)}},{key:"render",value:function(){return this.props.children}}]),t}(m.PureComponent));_.displayName="FocusableSection",_.defaultProps={children:null};var v=Object(h.b)(function(e){return{teamId:Object(b.b)(e)}})(_);n.d(t,"a",function(){return v})},"4F1B":function(e,t,n){},"4RH7":function(e,t,n){"use strict";var a=n("uXhx"),r=n("NFsq"),i=n("4Ok1"),o=n("aK/h"),s=n("kxpR"),l=n.n(s),c=n("XHGt"),u=n("MnCE"),d=n("TSYQ"),p=n.n(d),m=n("t85p"),h=n("RAhH"),b=n("nNoG"),f=n("05v1"),g=n("Fdc0"),_=new b.b("threads"),v=(o.b.string,o.b.arrayOf(o.b.string).isRequired,o.b.number.isRequired,o.b.number,o.b.bool,o.b.bool,o.b.bool,{className:void 0,replyCount:0,prefixWithReplyCount:!1,includesSelf:!1,broadcastPreabmle:!1});function y(e){var t=e.className,n=e.participantNames,a=e.replyUsersCount,r=e.replyCount,o=e.prefixWithReplyCount,s=e.includesSelf,c=e.broadcastPreabmle;if(0===a)return null;var u=p()("p-thread_participant_list",t);return l.a.createElement("span",{className:u,"data-qa":"thread_participant_list"},a<=3?function(e){var t=e.participantNames,n=e.includesSelf,a=e.replyCount,r=e.replyUsersCount,i=e.prefixWithReplyCount;if(e.broadcastPreabmle&&1===a)return _.rt("1 reply");if(n)switch(r){case 1:return i?_.rt("{replyCount} {replyCount, plural, =1 {reply} other {replies}} from you",{replyCount:a}):_.t("Just you");case 2:return i?_.rt("{replyCount} {replyCount, plural, =1 {reply} other {replies}} from {userName} and you",{replyCount:a,userName:t[0]}):_.rt("{userName} and you",{userName:t[0]});default:return i?_.rt("{replyCount} {replyCount, plural, =1 {reply} other {replies}} from {userName1}, {userName2}, and you",{replyCount:a,userName1:t[0],userName2:t[1]}):_.rt("{userName1}, {userName2}, and you",{userName1:t[0],userName2:t[1]})}var o=Object(b.j)(t,{noEscape:!0}).join("");return i?_.rt("{replyCount} {replyCount, plural, =1 {reply} other {replies}} from {names}",{replyCount:a,names:o}):o}({participantNames:n,replyCount:r,replyUsersCount:a,prefixWithReplyCount:o,includesSelf:s,broadcastPreabmle:c}):function(e){var t=e.participantNames,n=e.replyUsersCount,a=e.replyCount,r=e.prefixWithReplyCount,o=n-2,s=Object(i.a)(t,2);s.length<o&&s.push(_.rt("others"));var c=Object(b.j)(s,{noEscape:!0}).join("");return r?_.rt("{replyCount} {replyCount, plural, =1 {reply} other {replies}} from {userName1}, {userName2}, and <span>{numOthers,plural,=1{# other}other{# others}}</span>",{replyCount:a,userName1:t[0],userName2:t[1],numOthers:o},function(e){var t=e.text;return l.a.createElement(h.c,{tip:c},l.a.createElement("span",null,t))}):_.rt("{userName1}, {userName2}, and <span>{numOthers,plural,=1{# other}other{# others}}</span>",{userName1:t[0],userName2:t[1],numOthers:o},function(e){var t=e.text;return l.a.createElement(h.c,{tip:c},l.a.createElement("span",null,t))})}({participantNames:n,replyCount:r,replyUsersCount:a,prefixWithReplyCount:o}))}y.displayName="ThreadParticipantList",y.defaultProps=v;Object(u.a)(y);var k=Object(c.b)(function(e,t){var n=t.replyUsers,i=t.replyUsersCount,o=Object(m.c)(e),s=Object(r.a)(n,o),l=Object(r.a)(n,g.a),c=Object(f.a)(e,n);return i||(i=n.length),{participantNames:l?Object(a.a)(c,function(e){return e===g.b}):c,replyUsersCount:l?i-1:i,includesSelf:s}})(y);t.a=k},"4lvZ":function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("kxpR"),p=(n("aK/h"),n("OZf9")),m=n("UXvI"),h=n("ifKl"),b=n("t85p"),f=n("WDWG"),g=n("kOzZ"),_=n("/V1y"),v=0,y=6e4,k=["focus","focusin","touchstart","mousedown","mouseup","wheel","keydown","keyup","beforeinput","input","scroll","compositionstart","compositionupdate","compositionend"];function O(e){if(!Object(b.m)(e(),"feature_track_time_spent"))return h.a;var t={capture:!0,passive:!0},n=setInterval(function(){return function(e){var t=e(),n=Object(_.a)(Object(_.c)(t)),a=Object(g.a)({state:t});Object(p.a)(n,function(e){null===e.lastLogged?a.track("SESSION_START",{client_session:C(e)}):e.isActive&&e.needsRefresh&&a.track("SESSION_REFRESH",{client_session:C(e)}),e.isActive||a.track("SESSION_END",{client_session:C(e)})})}(e)},y),a=Object(m.a)(function(){document.hasFocus&&document.hasFocus()&&Object(_.e)(Object(_.c)(e()))},5e3,{leading:!0,trailing:!0});k.forEach(function(e){window.addEventListener(e,a,t)});return function(){k.forEach(function(e){window.removeEventListener(e,a,t)}),clearInterval(n)}}function C(e){return{uid:e.id,timestamp_start:Object(f.a)(e.startTime),timestamp_refresh:Object(f.a)(e.lastActivity),version:v}}var E=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.removeListener=null,n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){var e=this;this.removeListener=O(function(){return e.props.store.getState()})}},{key:"componentWillUnmount",value:function(){this.removeListener&&(this.removeListener(),this.removeListener=null)}},{key:"render",value:function(){return this.props.children}}]),t}(d.Component);E.displayName="TrackTimeSpent";t.a=E;E.defaultProps={children:null}},"4tN7":function(e,t,n){},"533h":function(e,t,n){"use strict";var a=n("jo6Y"),r=n.n(a),i=n("QbLZ"),o=n.n(i),s=n("iCc5"),l=n.n(s),c=n("V7oC"),u=n.n(c),d=n("FYw3"),p=n.n(d),m=n("mRg0"),h=n.n(m),b=n("ifKl"),f=n("kxpR"),g=n.n(f),_=(n("aK/h"),n("XHGt")),v=n("TSYQ"),y=n.n(v),k=n("HvGc"),O=n("18Pa"),C=n("RAhH"),E=n("nNoG"),j=(n("LFzE"),new E.b("flexpane")),S=function(e){function t(e){l()(this,t);var n=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.closeButtonRef=g.a.createRef(),n.focus=n.focus.bind(n),n}return h()(t,e),u()(t,[{key:"focus",value:function(){var e=this.closeButtonRef.current;e&&e.focus()}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,a=e.onOptionsClick,r=e.optionsHref,i=e.optionsIconType,s=e.optionsTooltipText,l=e.renderSecondary,c=a||r,u="dark"===e.clientTheme?{backgroundStyle:"dark"}:{},d=c?C.a:1e3,p=l(),m=s||j.t("View options",{fallbackHash:"a09052c3b42360a3492e17c37d74b78324785541",fallbackHashNs:"mentions"});return g.a.createElement("div",{className:y()("p-flexpane_header",n)},g.a.createElement("div",{className:"p-flexpane_header__primary"},g.a.createElement("div",{className:"p-flexpane_header__primary_content"},t),c&&g.a.createElement(C.c,{delay:d,tip:m},g.a.createElement(O.a,o()({"aria-label":j.t("View options",{fallbackHash:"a09052c3b42360a3492e17c37d74b78324785541",fallbackHashNs:"mentions"}),className:"p-flexpane_header__control",icon:i,href:r,onClick:a},u))),g.a.createElement(C.c,{delay:d,tip:j.t("Close",{fallbackHash:"1f863990d6ec5b308a2330f10e271f087ccf0bf7"})},g.a.createElement(O.a,o()({"aria-label":j.t("Close Right Sidebar"),className:"p-flexpane_header__control",onClick:this.props.closeFlexpane,"data-qa":"close_flexpane",icon:"times",ref:this.closeButtonRef},u)))),p&&g.a.createElement("div",{className:"p-flexpane_header__secondary"},p))}}]),t}(f.PureComponent);S.displayName="FlexpaneHeader",S.defaultProps={children:null,className:void 0,closeFlexpane:b.a,onOptionsClick:void 0,optionsHref:void 0,optionsIconType:"filters",optionsTooltipText:void 0,renderSecondary:b.a};var I=Object(_.b)(null,{closeFlexpane:k.a})(function(e){var t=e.forwardedRef,n=r()(e,["forwardedRef"]);return g.a.createElement(S,o()({ref:t},n))});t.a=g.a.forwardRef(function(e,t){return g.a.createElement(I,o()({forwardedRef:t},e))})},"53Ys":function(e,t,n){"use strict";var a=n("QbLZ"),r=n.n(a),i=n("jo6Y"),o=n.n(i),s=n("aK/h"),l=n("kxpR"),c=n.n(l),u=n("XfeM"),d=n("dhvi"),p=n("brL+"),m=n("1hAG"),h=n("rWF5"),b=n("g5qt"),f=n("5mKg"),g=n("kOzZ"),_=n("negh"),v=n("XHGt"),y=n("aolG"),k=n("yg0S"),O=n("iCc5"),C=n.n(O),E=n("V7oC"),j=n.n(E),S=n("FYw3"),I=n.n(S),w=n("mRg0"),N=n.n(w),T=n("ifKl"),A=n("fvjX"),R=n("nNoG"),P=n("vmJv"),M=n("za+y"),x=n("XLFM"),F=n("4Twu"),L=n("QkOX"),D=n("YEIV"),U=n.n(D),B=n("TSYQ"),q=n.n(B),H=n("XL7r"),W=n("O5cs"),G=n("IRvZ"),K=n("G4ux"),V=n("Fdc0"),z=n("wfE8"),Y=n("3C31"),Q=Object(u.b)("Adds app to channel by member id",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.memberId,r=n.channelId;if(a&&r){var i=Object(K.d)(t(),a);Object(V.jb)(i)?e(Object(Y.a)({appUserId:a,channelId:r,referringEventId:"INVITE_TO_CHANNEL_DIALOG",referringUiContext:{action:"IMPRESSION"}})):e(Object(z.M)({channelId:r,users:a}))}});Q.meta={name:"addAppToChannelByMemberId",key:"actionsAddAppToChannelByMemberIdAddAppToChannelByMemberId",description:"Adds app to channel by member id"},Q.propTypes={memberId:s.b.string.isRequired,channelId:s.b.string.isRequired};var X=Q,J=n("Lev8"),Z=n("t85p"),$=n("A8q6"),ee=n("NB3s");function te(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.image,n=e.title,a=e.description,r=e.children;return c.a.createElement(c.a.Fragment,null,c.a.createElement(ee.d,null,c.a.createElement(ee.i,{height:300,width:500,alt:"",src:t}),c.a.createElement(ee.j,{title:n}),c.a.createElement(ee.e,null,c.a.createElement("p",null,a))),r)}te.displayName="AppsTutorialStep";var ne=n("8W09");function ae(e){var t=e.tutorialStatus,n=e.actions;return c.a.createElement(ne.a,null,c.a.createElement("span",null,t),c.a.createElement(ee.g,null,n.map(function(e){var t=e.label,n=o()(e,["label"]);return c.a.createElement(x.d,r()({},n,{key:t}),t)})))}ae.displayName="AppsTutorialFooter",ae.defaultProps={tutorialStatus:"",actions:[]};var re=ae,ie=new R.b("step_tutorial");var oe=new R.b("apps_browser");function se(e){var t=e.closeModal,n=Object(l.useMemo)(function(){var e=[{id:"common_tasks",image:cdn_url+"/80588/img/app_space_tutorial_illustration_01.jpg",title:oe.t("Common tasks, done in a jiffy"),description:oe.t("Approve requests, schedule meetings, share documents, and more \u2014 all inside Slack.")},{id:"connect_tools",image:cdn_url+"/80588/img/app_space_tutorial_illustration_02.jpg",title:oe.t("Connect the tools you already use"),description:oe.t("Slack works with the systems you use, for everything from accounting to customer support.")},{id:"discover_ways",image:cdn_url+"/80588/img/app_space_tutorial_illustration_03.jpg",title:oe.t("Discover new ways to work"),description:oe.t("Poll your workspace, send kudos, and automate the coffee run. Have a better workday with apps.")}],n=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).steps,t=void 0===e?[]:e;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.index,a=e.navigate,r=e.end;if(!(n<0||n>=t.length)){var i=0===n,o=n===t.length-1,s=[],l=ie.t("{current} of {total}",{current:n+1,total:t.length});return i||s.push({type:"outline",label:ie.t("Back"),onClick:function(){return a(t[n-1].id)}}),s.push({label:o?ie.t("Done"):ie.t("Next"),onClick:o?r:function(){return a(t[n+1].id)}}),{step:t[n],footer:{tutorialStatus:l,actions:s}}}}}({steps:e});return e.reduce(function(e,a,r){return e[a.id]={render:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).switchPane,a=n({index:r,navigate:e,end:t});return c.a.createElement(te,a.step,c.a.createElement(re,a.footer))}},e},{})},[t]);return c.a.createElement($.b,{defaultPane:"common_tasks",isOpen:!0,invertCloseButton:!0,panes:n,closeModal:t})}se.displayName="AppsTutorial";var le=Object(v.b)(null,function(e){return Object(A.b)({closeModal:d.a},e)})(se),ce=n("F+Fq"),ue=n("s0HP"),de=Object(u.b)("Opens the apps tutorial modal",function(e,t){var n=t(),a=Object(g.a)({state:n});Object(Z.m)(n,"feature_m11n_apps_browser")?(a.track("APP_TUTORIAL_VIEW",null),Object(H.j)(n,"seen_app_space_tutorial")||e(Object(ue.b)({pref:"seen_app_space_tutorial",value:!0})),e(Object(d.e)({element:c.a.createElement(le),isStackable:!0}))):Object(ce.a)()});de.meta={name:"openAppsTutorialModal",key:"actionsOpenAppsTutorialModalOpenAppsTutorialModal",description:"Opens the apps tutorial modal"},de.propTypes=null;var pe=de,me=n("uksu"),he=n("eR+M"),be=n("eK0w"),fe=n("VBRD"),ge=n("cD5Y"),_e=n("M4HD"),ve=n("V/As"),ye=n("yywf"),ke=n("od5y"),Oe=n("llxT"),Ce=new R.b("apps_browser"),Ee=(s.b.shape({app_id:s.b.string,is_installed:s.b.bool,bot_user_id:s.b.string}).isRequired,s.b.bool.isRequired,s.b.string.isRequired,s.b.bool.isRequired,s.b.func,s.b.func,s.b.number.isRequired,{onClick:void 0,onMouseLeave:void 0}),je=function(e){return c.a.createElement(Oe.a,{className:"p-apps_browser__enter_button","aria-label":e,key:"enter-or-preview"},c.a.createElement(ke.b,{type:"enter",inline:!0}),c.a.createElement("span",null,e))};je.displayName="renderEnter";var Se=function(e){var t=e.app,n=e.appCanBeAdded,a=e.className,r=e.featureAppBrowserViewInstall,i=e.onClick,o=e.onMouseLeave,s=e["data-app_index"],l=Ce.t("Install"),u=Ce.t("Install app",{fallbackHash:"fd6c3ebf7befca9f8208f86c76e4d4180303745c"});"tutorial_app"===t.app_id?(l=Ce.t("Start"),u=Ce.t("Start app tutorial",{fallbackHash:"952f375412e89ff213a8aca383d18e5691354347"})):n?(l=Ce.t("Add"),u=Ce.t("Add app",{fallbackHash:"61cc55aa0453184734c3fa0b621eda6fa874bd83"})):t.is_installed&&(l=Ce.t("View"),u=Ce.t("View app",{fallbackHash:"69bd4ef9fbd0894a22759c3766b859defbdedbc8"}));var d=Object(ve.b)(t,72);return c.a.createElement("div",{className:a,onClick:i,onMouseLeave:o,"data-app":!0,"data-app_index":s,"data-is_installed":t.is_installed,"data-app_id":t.app_id,"data-bot_id":t.bot_id,"data-bot_user_id":t.bot_user_id,"data-can_app_be_added":n||null,"data-qa":"apps_browser_row",role:"presentation"},c.a.createElement("img",{className:"p-apps_browser__app_icon",src:d,alt:t.name}),c.a.createElement("div",{className:"p-apps_browser__app_info"},c.a.createElement("div",{className:"p-apps_browser__app_name"},c.a.createElement("strong",null,t.name)),c.a.createElement("div",{className:"p-apps_browser__app_description"},Object(ye.a)(t.short_description,function(e,t){return c.a.createElement("strong",{key:t},e)}))),r?je(l):c.a.createElement(x.d,{"data-qa":"apps_browser_row_action",className:"p-apps_browser__app_action",type:"outline","aria-label":u},l))};Se.displayName="AppsBrowserActionText",Se.defaultProps=Ee;var Ie=Object(v.b)(function(e,t){var n=t.addAppsVariant,a=t.app,r=t.channelId;return{appCanBeAdded:n&&Object(_e.a)(e,a,r),featureAppBrowserViewInstall:Object(Z.m)(e,"feature_app_browser_view_install")}})(Se),we=n("0f2Y"),Ne=n("m1cH"),Te=n.n(Ne),Ae=n("MnCE"),Re=n("RAhH"),Pe=(n("qqis"),new R.b("apps_browser")),Me=(s.b.arrayOf(s.b.object),s.b.bool,s.b.bool,s.b.bool,s.b.bool,function(e){var t=e.apps,n=e.isFirefoxAndWindows,a=e.isFirefoxAndMac,r=e.isInternetExplorer;if(!e.featureM11nAppsBrowser)return null;if(t.length>10)return null;var i=[].concat(Te()(t),Te()(Array(10-t.length))),o=i.map(function(e,t){var i=!e,o="limit-apps-"+t,s="bottom";0===t?s="bottom-left":9===t&&(s="bottom-right");var l=q()("p-apps_browser__app_limit_meter__apps","inline_block",{"p-apps_browser__app_limit_meter__blank_app_box":i,is_ff_and_win:n,is_ff_and_mac:a,is_ie:r});return c.a.createElement(Re.c,{key:o,tip:i?Pe.t("Try a new app"):e.name,position:s,offsetY:17},c.a.createElement("div",{className:l,"data-qa":i?"app_limit_meter__blank_app_box":"app_limit_meter__app_box"},!i&&c.a.createElement("img",{className:"p-apps_browser__app_limit_meter__app_icon align_top",src:Object(ve.b)(e,24),alt:""})))}),s=i.map(function(e,t){if(0===t)return null;var n="color-meter-"+t,a=!e,r=q()({first:1===t,meter_first_green:t<4&&!a,meter_second_green:4===t&&!a,meter_third_green:5===t&&!a,meter_fourth_green:6===t&&!a,meter_yellow:7===t&&!a,meter_orange:8===t&&!a,meter_red:9===t&&!a,on:!a,off:a&&1!==t});return c.a.createElement("li",{className:r,key:n})}),u=q()("p-apps_browser__app_limit_meter__color_meter",{is_ff_and_win:n});return c.a.createElement(l.Fragment,null,c.a.createElement("div",{className:"p-apps_browser__app_limit_meter__apps_container"},o),c.a.createElement("ul",{className:u},s))});Me.displayName="AppLimitMeter",Me.defaultProps={apps:[],isFirefoxAndWindows:!1,isFirefoxAndMac:!1,isInternetExplorer:!1,featureM11nAppsBrowser:!1};var xe=Object(Ae.a)(Me),Fe=new R.b("apps_browser"),Le=(s.b.bool,s.b.bool,s.b.bool,s.b.bool,s.b.object.isRequired,s.b.array,s.b.bool,s.b.bool,s.b.bool,function(e){function t(e){C()(this,t);var n=I()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.limitMeterClogId="",n.firstSelectableAppIndex=e.hasSeenAppSpaceTutorial?1:0,n.appLimitMeterClogPayload={},n.cloggedLimitMeterImpression=!1,n.showLimitMeter=!1,n.handleAppLimitMeterClickClog=n.handleAppLimitMeterClickClog.bind(n),n}return N()(t,e),j()(t,[{key:"handleAppLimitMeterClickClog",value:function(){var e=this.props.clogger;"GROWTH_PRICING"===this.LimitMeterClogId&&(this.appLimitMeterClogPayload.contexts.ui_context.action="click",e.track("UPGRDEXP_LIMIT_APPSPACE",this.appLimitMeterClogPayload))}},{key:"render",value:function(){var e=this,t=this.props.installedApps.length,n=this.props,a=n.isFirefoxAndWindows,r=n.isFirefoxAndMac,i=n.isInternetExplorer,o=n.clogger,s=n.featureM11nAppsBrowser,l=n.isShowingDefaultAppCategories;if(!t||t>10||!l)return null;var u="num_of_apps="+t,d=!!t,p="limit-meter-"+G.e;if(this.showLimitMeter=d,!this.showLimitMeter)return null;this.firstSelectableAppIndex=0;var m=void 0,h=void 0,b=void 0,f=void 0,g=void 0,_=q()("p-apps_browser__app_limit_meter",{is_ff_and_mac:r});return t<6?(m=Fe.t("Add apps to get things done"),b="/apps?utm_source=in-prod&utm_medium=inprod-link_see_app_suggestions-apps_browser-click",this.LimitMeterClogId="UPGRDEXP_LIMIT_APPSPACE",f="link_app_directory",h=Fe.rt("Schedule meetings, share docs, and more \u2014 straight from Slack. <a>See app suggestions</a>",null,function(t){var n=t.tag,a=t.text;return"a"!==n?null:c.a.createElement(we.a,{href:b,target:"new","data-app":!0,"data-app_index":e.firstSelectableAppIndex,"data-app_id":"app_limit_meter","data-clog-event":e.LimitMeterClogId,"data-clog-ui-element":f,"data-clog-ui-action":"click","data-clog-ui-step":"apps_browser","data-clog-params":u,onClick:e.handleAppLimitMeterClickClog},a)})):t<10?(m=Fe.t("Upgrade for unlimited apps"),b="/pricing?ui_step=280&ui_element=5",this.LimitMeterClogId="GROWTH_PRICING",f="pricing_link",g=q()({hidden:this.props.isMacSsbBuild}),h=Fe.rt("Your team\u2019s up and running \u2014\xa0they\u2019re using {numOfApps} apps already. On a paid plan you can add as many as you\u2019d like. <a>See upgrade options</a>",{numOfApps:t},function(t){var n=t.tag,a=t.text;return"a"!==n?null:c.a.createElement(we.a,{className:g,href:b,target:"new","data-app":!0,"data-app_index":e.firstSelectableAppIndex,"data-app_id":"app_limit_meter","data-clog-event":e.LimitMeterClogId,"data-clog-ui-element":f,"data-clog-ui-action":"click","data-clog-ui-step":"apps_browser","data-clog-params":u,onClick:e.handleAppLimitMeterClickClog},a)})):(m=Fe.t("Upgrade to add more apps"),b="/pricing?ui_step=280&ui_element=5",this.LimitMeterClogId="GROWTH_PRICING",f="pricing_link",g=q()({hidden:this.props.isMacSsbBuild}),h=Fe.rt("Your team\u2019s already using 10 apps, the max you can use with the free version of Slack. Upgrade to a paid plan to add as many apps as you\u2019d like. <a>See upgrade options</a>",null,function(t){var n=t.tag,a=t.text;return"a"!==n?null:c.a.createElement(we.a,{className:g,href:b,target:"new","data-app":!0,"data-app_index":e.firstSelectableAppIndex,"data-app_id":"app_limit_meter","data-clog-event":e.LimitMeterClogId,"data-clog-ui-element":f,"data-clog-ui-action":"click","data-clog-ui-step":"apps_browser","data-clog-params":u,onClick:e.handleAppLimitMeterClickClog},a)})),this.appLimitMeterClogPayload={num_of_apps:t,contexts:{ui_context:{step:"apps_browser",action:"impression",ui_element:f}}},this.cloggedLimitMeterImpression||("GROWTH_PRICING"===this.LimitMeterClogId?(o.track(this.LimitMeterClogId,this.appLimitMeterClogPayload),o.track("UPGRDEXP_LIMIT_APPSPACE",this.appLimitMeterClogPayload)):(o.track(this.LimitMeterClogId,this.appLimitMeterClogPayload),o.track("APP_CLICK_LINK_SEE_APP_SUGGESTIONS_IN_APPS_BROWSER",{contexts:{ui_context:{step:"apps_browser",action:"click",ui_element:"link_see_app_suggestions"}}})),this.cloggedLimitMeterImpression=!0),c.a.createElement("div",{className:"p-apps_browser__app_limit_meter__container",key:p},c.a.createElement("div",{className:_,"data-qa":"apps_browser_app_limit_meter"},c.a.createElement("p",{className:"p-apps_browser__app_limit_meter__heading very_small_bottom_margin"},c.a.createElement("b",null,m)),c.a.createElement("p",{className:"p-apps_browser__app_limit_meter__paragraph","data-qa":"apps_browser_app_limit_meter_paragraph"},h),c.a.createElement(xe,{apps:this.props.installedApps,isFirefoxAndWindows:a,isFirefoxAndMac:r,isInternetExplorer:i,featureM11nAppsBrowser:s})))}}]),t}(l.Component));Le.displayName="AppLimitMeterContainer",Le.defaultProps={isInternetExplorer:!1,isFirefoxAndMac:!1,isFirefoxAndWindows:!1,isMacSsbBuild:!1,installedApps:[],isShowingDefaultAppCategories:!0,featureM11nAppsBrowser:!1,hasSeenAppSpaceTutorial:!1};var De=Object(v.b)(function(e){var t=Object(h.g)();return{installedApps:Object(W.e)(e),isInternetExplorer:"ie"===t,isFirefoxAndWindows:"firefox"===t&&Object(h.B)(),isFirefoxAndMac:"firefox"===t&&Object(h.p)(),isMacSsbBuild:Object(b.O)(),clogger:Object(g.a)({state:e}),featureM11nAppsBrowser:Object(Z.m)(e,"feature_m11n_apps_browser")}},null)(Le),Ue=new R.b("apps_browser"),Be=(s.b.object.isRequired,s.b.string,s.b.object.isRequired,s.b.bool,s.b.func,s.b.bool.isRequired,s.b.func,s.b.string.isRequired,s.b.array.isRequired,s.b.array.isRequired,s.b.bool.isRequired,s.b.string,s.b.func,s.b.func,s.b.func,s.b.func,s.b.string,{addAppToChannelByMemberId:T.a,hasSeenAppSpaceTutorial:!1,channelId:void 0,nextCursor:void 0,loadMoreApps:T.a,openAboutApp:T.a,openAppsTutorialModal:T.a,closeModal:T.a,getChannelMembershipInfoForUsers:T.a,clientTheme:"light"}),qe=function(e){function t(e){C()(this,t);var n=I()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.isPaginating=!1,n.renderRow=n.renderRow.bind(n),n.isFocusableItem=n.isFocusableItem.bind(n),n.paginate=n.paginate.bind(n),n.handleItemClick=n.handleItemClick.bind(n),n}return N()(t,e),j()(t,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.results,a=t.addAppsVariant;if(n!==e.results&&a){var r=n.reduce(function(e,t){return"app"===t.type&&t.bot_user_id&&e.push(t.bot_user_id),e},[]);this.props.getChannelMembershipInfoForUsers({channelId:this.props.channelId,userIds:r})}}},{key:"paginate",value:function(){this.shouldPaginate()&&this.loadMoreApps()}},{key:"shouldPaginate",value:function(){return!!this.props.nextCursor}},{key:"loadMoreApps",value:function(){var e=this;this.isPaginating||(this.isPaginating=!0,this.props.loadMoreApps().then(function(){e.isPaginating=!1}))}},{key:"isFocusableItem",value:function(e){var t=e.index,n=(this.props.results[t]||{}).type;return n===G.g.APP||n===G.g.APP_LIMIT_METER||n===G.g.APP_TUTORIAL}},{key:"handleItemClick",value:function(e){var t=e.currentTarget.children[0].dataset;t.app_id&&this.selectApp(t)}},{key:"openAboutApp",value:function(e){this.props.openAboutApp({appId:e.app_id,serviceId:e.bot_id,memberId:e.bot_user_id})}},{key:"selectApp",value:function(e){var t=this.props,n=t.clogger,a=t.channelId,i={app_id:e.app_id,bot_id:e.bot_id,is_from_search:this.props.isShowingDefaultAppCategories?"0":"1",contexts:{core:{app_id:e.app_id,bot_id:e.bot_id}}};if("tutorial_app"===e.app_id)this.props.openAppsTutorialModal();else if("app_limit_meter"===e.app_id){var o=parseInt(e.clogParams.split("=")[1],10);"pricing_link"===e.clogUiElement?(Object(f.R)(this.props.team,"/pricing?ui_step=280&ui_element=5"),n.track("GROWTH_PRICING",{num_of_apps:o,contexts:{ui_context:{step:"apps_browser",action:"click",ui_element:"pricing_link"}}}),n.track("UPGRDEXP_LIMIT_APPSPACE",{num_of_apps:o,contexts:{ui_context:{step:"apps_browser",action:"click",ui_element:"pricing_link"}}})):(Object(f.R)(this.props.team,"/apps"),n.track("UPGRDEXP_LIMIT_APPSPACE",{num_of_apps:o,contexts:{ui_context:{step:"apps_browser",action:"click",ui_element:"link_app_directory"}}}))}else"true"===e.can_app_be_added?(this.props.closeModal(),this.props.addAppToChannelByMemberId({memberId:e.bot_user_id,channelId:a})):"true"===e.is_installed?(this.openAboutApp(e),n.track("APP_INDEX_VIEW_CLICK",i)):(Object(f.R)(this.props.team,"/apps/"+e.app_id+"?utm_source=in-prod&utm_medium=inprod-btn_app_install-index-click"),n.track("APP_INDEX_INSTALL_CLICK",i),n.track("APP_CLICK_BTN_APP_INSTALL_IN_INDEX",r()({},i,{contexts:r()({},i.contexts,{ui_context:{step:"index",action:"click",ui_element:"btn_app_install"}})})))}},{key:"renderRow",value:function(e,t){var n=t.key,a=this.props.results[e];switch(a.type){case G.g.LOADING:return c.a.createElement("div",{style:{height:62}},c.a.createElement(ge.a,{size:"jumbo"}));case G.g.APP_LIMIT_METER:var r=this.props,i={isShowingDefaultAppCategories:r.isShowingDefaultAppCategories,hasSeenAppSpaceTutorial:r.hasSeenAppSpaceTutorial};return c.a.createElement(De,i);case G.g.CATEGORY:var o=a.display_name;return c.a.createElement("div",{className:q()("p-apps_browser__category_header",{margin_top_150:!(0===e)}),"data-category_header":"true","data-qa":"apps_browser__category_header"},o);case G.g.APP_TUTORIAL:return c.a.createElement(Ie,{key:n,addAppsVariant:this.props.addAppsVariant,app:{name:Ue.t("What are apps?"),short_description:Ue.t("A quick look at how apps in Slack can streamline your work"),icons:{image_84:cdn_url+"/80588/img/tutorial@2x.png"},app_id:"tutorial_app",bot_id:"",bot_user_id:"",is_installed:!1},className:"p-apps_browser__app p-apps_browser__app--tutorial","data-app_index":e});case G.g.APP:return c.a.createElement(Ie,{key:n,addAppsVariant:this.props.addAppsVariant,channelId:this.props.channelId,app:a,className:"p-apps_browser__app","data-app_index":e});default:return c.a.createElement(c.a.Fragment,null)}}},{key:"render",value:function(){var e=this,t=this.props,n=t.clientTheme,a=t.results,r=t.keys,i=t.searchInput;if(!a.length&&i)return c.a.createElement("section",{key:"no-results",className:"p-apps_browser__no_results","data-qa":"apps_browser__no_results"},Ue.t("There are no apps matching"),"\xa0",c.a.createElement("strong",null,i));var o=q()("p-apps_browser__list_container",U()({"p-apps_browser__list_container--loading":0===r.length},"p-apps_browser__list_container--loading--"+n,0===r.length&&"light"!==n));return c.a.createElement(fe.a,null,function(t){var n=t.width,a=t.height,i=t.measureRef;return c.a.createElement("div",{className:o,"data-qa":"apps_browser__results_list",ref:i},c.a.createElement(be.a,{width:n,height:Math.floor(a),keys:r,rowRenderer:e.renderRow,onItemClick:e.handleItemClick,loadPost:e.paginate,loadAround:e.paginate,isFocusableItem:e.isFocusableItem,hideHiddenStopTabs:!0}))})}}]),t}(l.Component);qe.displayName="AppsBrowserResults",qe.defaultProps=Be;var He=Object(v.b)(function(e){return{clogger:Object(g.a)({state:e}),hasSeenAppSpaceTutorial:Object(H.j)(e,"seen_app_space_tutorial"),searchInput:Object(W.m)(e),results:Object(W.l)(e),keys:Object(W.i)(e),nextCursor:Object(W.j)(e),isShowingDefaultAppCategories:Object(W.h)(e),clientTheme:Object(J.c)(e)}},function(e){return Object(A.b)({openAboutApp:me.b,openAppsTutorialModal:pe,closeModal:d.a,getChannelMembershipInfoForUsers:he.g,loadMoreApps:M.d,addAppToChannelByMemberId:X},e)})(qe),We=(n("x4cI"),new R.b("apps_browser")),Ge=(s.b.object.isRequired,s.b.string,s.b.bool,s.b.object,s.b.func,s.b.func,{channelId:void 0,addAppsVariant:!1,team:void 0,fetchDefaultApps:T.a,resetSearch:T.a}),Ke=function(e){function t(e){C()(this,t);var n=I()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleAppDirectoryButtonClick=n.handleAppDirectoryButtonClick.bind(n),n.renderHeader=n.renderHeader.bind(n),n}return N()(t,e),j()(t,[{key:"componentDidMount",value:function(){this.props.fetchDefaultApps()}},{key:"componentWillUnmount",value:function(){this.props.resetSearch()}},{key:"handleAppDirectoryButtonClick",value:function(){var e=this.props.clogger;Object(f.R)(this.props.team,"/apps?utm_source=in-prod&utm_medium=inprod-link_app_directory-index-click"),e.track("APP_INDEX_VIEW_APP_DIRECTORY_CLICK"),e.track("APP_CLICK_LINK_APP_DIRECTORY_IN_INDEX",{contexts:{ui_context:{step:"index",action:"click",ui_element:"link_app_directory"}}})}},{key:"renderHeader",value:function(){var e=this.props,t=e.addAppsVariant,n=e.channelId,a=void 0;return a=t&&n?c.a.createElement("h2",{className:"overflow_hidden"},We.rt("Add apps to {channelName}",{channelName:c.a.createElement(F.a,{channelId:n,inline:!0,className:"overflow_ellipsis"})})):c.a.createElement("h2",null,We.t("Browse Apps")),c.a.createElement("div",{className:"p-apps_browser__filter_header","data-qa":"apps_browser__header"},a,c.a.createElement(x.d,{className:"p-apps_browser__browse_apps flex_shrink_none","data-qa":"apps_browser__app_directory_button",size:"large",type:"outline",onClick:this.handleAppDirectoryButtonClick},We.t("View App Directory")))}},{key:"render",value:function(){var e=this.props,t={addAppsVariant:e.addAppsVariant,channelId:e.channelId,team:e.team};return c.a.createElement("div",{className:"p-apps_browser","data-qa":"apps_browser"},c.a.createElement("div",{className:"p-apps_browser__filter_container"},this.renderHeader(),c.a.createElement(L.a,null)),c.a.createElement(He,t))}}]),t}(l.Component);Ke.displayName="AppsBrowser",Ke.defaultProps=Ge;var Ve=Object(v.b)(function(e){var t=Object(m.d)(e);return{channelId:Object(P.a)(e),team:t,clogger:Object(g.a)({state:e})}},function(e){return Object(A.b)({fetchDefaultApps:M.b,resetSearch:M.e},e)})(Ke),ze=n("4M+g"),Ye=n("6kok"),Qe=new R.b("apps_browser");function Xe(e){var t=e.tutorialSeen,n=e.openAppsTutorial,a=e.clogger,r=Object(l.useCallback)(function(){a.track("APP_INDEX_MANAGE_CLICK",null),a.track("APP_CLICK_LINK_MANAGE_APPS_IN_INDEX",{contexts:{ui_context:{step:"index",action:"click",ui_element:"link_manage_apps"}}})},[a]);return c.a.createElement("div",{className:"p-apps_browser_links"},c.a.createElement(Oe.a,{className:"p-apps_browser_links__link",href:"/apps/manage?utm_source=in-prod&utm_medium=inprod-link_manage_apps-index-click",onClick:r,"data-qa":"apps_browser_manage_apps"},c.a.createElement(ke.b,{type:"cog-o",inline:!0,className:"p-apps_browser_links__link_icon"}),Qe.t("Manage apps...")),t&&c.a.createElement(Oe.a,{className:"p-apps_browser_links__link","data-qa":"apps_browser_view_tutorial",onClick:n},c.a.createElement(ke.b,{type:"lightbulb-o",inline:!0,className:"p-apps_browser_links__link_icon"}),Qe.t("What are apps?")))}Xe.displayName="AppsBrowserHeaderLinks";var Je=Object(v.b)(function(e){return{tutorialSeen:Object(H.j)(e,"seen_app_space_tutorial"),clogger:Object(g.a)({state:e})}},function(e){return Object(A.b)({openAppsTutorial:pe},e)})(Xe),Ze=new R.b("apps_browser");function $e(e){var t=e.addAppsVariant,n=e.channelName,a=e.clogger,r=t&&n?Ze.t("Add apps to {channelName}",{channelName:n}):Ze.t("Browse Apps");return c.a.createElement(y.a,{showGoButton:!1,showCancelButton:!1,onCancel:function(){a.track(_.EventId.APP_BROWSER_CLOSE,{contexts:{ui_context:{step:_.UiStep.APPS_BROWSER,action:_.UiAction.CLICK,ui_properties:{element_type:_.ElementType.X,element_name:"app_browser_fullscreen_modal_close"}}}})},contentLabel:r,"data-qa":"apps_browser_modal",modalClasses:"p-apps_browser_modal"},c.a.createElement(Je,null),c.a.createElement(k.a,null,c.a.createElement("div",{className:"p-apps_browser_container"},c.a.createElement(Ve,e))))}$e.displayName="AppsBrowserModal",$e.defaultProps={addAppsVariant:!1,channelName:"",clogger:{}};var et=Object(v.b)(function(e){var t=Object(P.a)(e),n=Object(g.a)({state:e});if(!t)return{};var a=Object(ze.e)(e,t);return{channelName:Object(Ye.x)(e,a,{publicChannelIncludeHashSign:!1,imIncludeAtSign:!1}),clogger:n}})($e),tt=n("1tsX"),nt=n("97va"),at=Object(u.b)("Opens the apps browser modal",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.referringEventId,i=n.referringUiContext,s=n.channelId,l=o()(n,["referringEventId","referringUiContext","channelId"]),u=Object(tt.a)(t());!l.addAppsVariant&&u&&e(Object(nt.a)());var v=Object(g.a)({getState:t});v.track(_.EventId.APP_INDEX_OPEN,null),l.addAppsVariant&&a&&v.track(_.EventId.APPS_BROWSER_ADD_TO_CHANNEL,{contexts:{ui_context:{action:_.UiAction.IMPRESSION},referring_ui_context:i,core:{channel_id:s}},referring_event_id:a});var y=Object(p.b)(t()),k=Object(m.i)(t(),y),O=Object(f.s)(k),C=Object(f.D)(k),E=Object(h.g)(),j={isUnpaid:!C&&!O,isInternetExplorer:"ie"===E,isFirefoxAndWindows:"firefox"===E&&Object(h.B)(),isFirefoxAndMac:"firefox"===E&&Object(h.p)(),isMacSsbBuild:Object(b.O)()};e(Object(d.e)({element:c.a.createElement(et,r()({},l,j))}))});at.meta={name:"openAppsBrowserModal",key:"actionsOpenAppsBrowserModalOpenAppsBrowserModal",description:"Opens the apps browser modal"},at.propTypes={addAppsVariant:s.b.bool,eventId:s.b.number,uiContext:s.b.object,channelId:s.b.string};t.a=at},"59b6":function(e,t,n){"use strict";n.d(t,"a",function(){return u}),n.d(t,"b",function(){return d});var a=n("nNoG"),r=n("AFNo"),i=n("Fdc0"),o=n("+yrr"),s=n("OX5w"),l=n("7Ztl"),c=new a.b("calls"),u=Object(r.e)(function(e){var t=e.activeCall.incomingInviterUserId&&Object(i.W)(e,e.activeCall.incomingInviterUserId),n=e.activeCall.name,a=e.activeCall.conversationId,r=e.activeCall.hasJoined,l=Object(o.v)(e),u=l.length,d=Object(s.d)(e),p=Object(o.h)(e);if(n&&r)return n;if(d)return c.t("{inviterName} is calling you",{inviterName:t});if(a&&!u&&p.length){var m=Object(i.W)(e,p[0]),h=p.length-1;return p.length>1?c.t("Calling {namedInvitedUser} and {remainingInvitedUserCount,plural,=1{# other person}other{# other people}}",{namedInvitedUser:m,remainingInvitedUserCount:h,fallbackHash:"1f193c850fe96a988a352bb5c38247343e49f235"}):c.t("Calling {namedInvitedUser}",{namedInvitedUser:m})}if(!u)return c.t("Slack call, waiting for others to join");var b=Object(i.W)(e,l[0]),f=l.length-1;return l.length>1?c.t("Slack call with {namedPeer} and {remainingJoinedPeers,plural,=1{# other person}other{# other people}}",{namedPeer:b,remainingJoinedPeers:f,fallbackHash:"6f6600f1cf4eef0e7f75926baabfc8baf445c5c8"}):c.t("Slack call with {namedPeer}",{namedPeer:b})});u.meta={name:"getCallWindowTitle",key:"callsReduxSelectorsGetCallWindowTitleGetCallWindowTitle"};var d=Object(r.e)(function(e){var t=Object(l.c)(e),n=t&&t.incomingInvite&&Object(i.W)(e,t.incomingInvite.userId);return n?c.t("{inviterName} is calling you",{inviterName:n}):c.t("Incoming call")});d.meta={name:"getIncomingCallAriaLabelForBrowser",key:"callsReduxSelectorsGetCallWindowTitleGetIncomingCallAriaLabelForBrowser"}},"5DNE":function(e,t,n){},"5NHF":function(e,t,n){},"5SxQ":function(e,t,n){},"5g6K":function(e,t,n){},"5iqv":function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("kxpR"),p=n.n(d),m=n("aK/h"),h=n("TSYQ"),b=n.n(h),f=n("XHGt"),g=n("GbAX"),_=n("V18M"),v=n("Smdl"),y=n("tbBR"),k=n("aLpA"),O=n("QbLZ"),C=n.n(O),E=n("zmn3"),j=n("ifKl"),S=n("UXvI"),I=n("tn36"),w=n("vFlG"),N=n("t85p");function T(e,t){var n=Object(N.m)(e,"feature_fuzzy_match"),a=Object(w.a)(t,"metadata.query_rewriting.spell_correction_context.method");return n&&a}var A=n("9/ob"),R=n("yHhI"),P=n("Mj3f"),M=n("Szmb"),x=n("XfeM"),F=n("kyuO"),L=n("7dYf"),D=n("Rjjz"),U=n("nW5E"),B=Object(x.b)("Clog a search open event using data from redux",function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).messageSort;Object(R.a)({getState:t}).info("IMPROVED_SEARCH","Set message sort method. messageSort: "+n),e(Object(L.f)({pref:"search_sort",value:n})),e(Object(D.d)({module:"messages",reason:"search-messages-sort-changed"})),e(Object(F.i)({method:"set_sort_"+(n===U.d.relevantMessages?"score":"timestamp")}))});B.meta={name:"setMessageSort",key:"actionsUniversalSearchSetMessageSortSetMessageSort",description:"Clog a search open event using data from redux"},B.propTypes={method:m.b.string};var q=n("1hAG"),H=n("JrUZ"),W=n("quKg"),G=n("qgNY"),K=n("1F8+"),V=n("HvGc"),z=Object(x.b)("Clog a search open event using data from redux",function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).tab;e(Object(P.G)({tab:n})),Object(R.a)({getState:t}).info("IMPROVED_SEARCH",'Switching to tab "'+n+'"'),e(Object(F.i)({method:"search_tab"}))});z.meta={name:"setTab",key:"actionsUniversalSearchSetTabSetTab",description:"Clog a search open event using data from redux"},z.propTypes={method:m.b.string};var Y=z,Q=n("g5qt"),X=n("5mKg"),J=n("nNoG"),Z=n("MREy"),$=n("XLFM"),ee=n("od5y"),te=n("j4mf"),ne=n("U28S");function ae(e){return e>=1e4?Object(ne.a)(e,{precision:4,decimal_places:0,lowercase:!0}):Object(te.a)(e)}var re=n("ICFZ"),ie=n("HXD8"),oe=n("x91h"),se=n("qrk6"),le=n("82mD");function ce(e,t){var n=e[0]&&e[0].ts;if(!n)return"";var a=Object(le.n)(n,{returnMoment:!0});return Object(le.k)(a,{shortenMonth:t,excludeYear:Object(le.i)(n)})}var ue=n("Xthn"),de=n("fdJE"),pe=n("XL7r"),me=n("qc8s"),he=n("k2C/"),be=n("6kok"),fe=n("4M+g");function ge(e,t){return"string"==typeof t?Object(fe.e)(e,t,!0):Object(be.pb)(t)?Object(fe.e)(e,t.id,!0):(t&&t.id&&Object(fe.e)(e,t.id,!0),t)}var _e=new J.b("search"),ve=/[\ue000\ue001]/g;var ye=n("gLeh"),ke=n("tjIJ"),Oe=n("Zr7G"),Ce=n("jo6Y"),Ee=n.n(Ce),je=n("3dqR"),Se=n("y7mK"),Ie=n("Uk1S"),we=(n("L5SX"),new J.b("search"));m.b.bool,m.b.string;function Ne(e){var t=e.theme;return e.featureTinyspeck?p.a.createElement("div",{className:"c-search_message__tinyspeck_error_message"},p.a.createElement("strong",null,"Message Group failed to render. "),"Please go to #triage-search and"," ",p.a.createElement("strong",null,"read up/search to see if this was already reported."),"If it has not been reported yet please make a report with a link to the message before this one, if this is a public channel. This message is only displayed in workspaces in the Slack org."):p.a.createElement("div",{className:"c-message_group"},p.a.createElement("div",{className:"c-search_message c-search_message--"+t},p.a.createElement("div",{className:"c-search_message__gutter"},p.a.createElement(je.c,{className:"c-search_message__avatar",size:36,tabIndex:"-1"})),p.a.createElement("div",{className:"c-search_message__content"},p.a.createElement("div",{className:"c-search_message__content_header"},p.a.createElement(Se.a,{userId:"",isInteractive:!0})),p.a.createElement("div",{className:"c-search_message__body sk_foreground_max"},we.t("There was an error displaying this message.")))))}Ne.displayName="ErrorSearchMessage",Ne.defaultProps={featureTinyspeck:!1,theme:"light"};var Te=Object(f.b)(function(e){var t="",n=!1;try{t=Object(Ie.a)(e),n=Object(N.m)(e,"feature_tinyspeck")}catch(e){}return{theme:t,featureTinyspeck:n}})(Ne),Ae=n("owWc"),Re=n("jLdI"),Pe=n("UF3u"),Me=n("0f2Y"),xe=n("4Twu"),Fe=n("llxT"),Le=new J.b("search");m.b.bool,m.b.string,m.b.object,m.b.string,m.b.string;function De(e){var t=e.user,n=e.theme,a=e.ts,r=e.channel;return e.featureTinyspeck?p.a.createElement("div",{className:"c-search_message__tinyspeck_error_message"},p.a.createElement("strong",null,"Message ",a," in ",r.id||"[Channel id missing]"," failed to render."," "),"Please go to #triage-search and"," ",p.a.createElement("strong",null,"read up/search to see if this was already reported."),"If it has not been reported yet please make a report with a link to the message before this one, if this is a public channel. This message is only displayed in workspaces in the Slack org."):p.a.createElement("div",{className:"c-search_message c-search_message--"+n},p.a.createElement("div",{className:"c-search_message__gutter"},p.a.createElement(je.c,{className:"c-search_message__avatar",size:36,tabIndex:"-1"})),p.a.createElement("div",{className:"c-search_message__content"},p.a.createElement("div",{className:"c-search_message__content_header"},p.a.createElement(Se.a,{userId:t||"",isInteractive:!0})),p.a.createElement("div",{className:"c-search_message__body sk_foreground_max"},Le.t("There was an error displaying this message."))))}De.displayName="ErrorSearchMessage",De.defaultProps={featureTinyspeck:!1,user:"",ts:"[Message timestamp (ts) missing]",channel:{},theme:"light"};var Ue=Object(f.b)(function(e){var t="",n=!1;try{t=Object(Ie.a)(e),n=Object(N.m)(e,"feature_tinyspeck")}catch(e){}return{theme:t,featureTinyspeck:n}})(De),Be=n("lCmp"),qe=n("Bekf"),He=n("B/i4"),We=n("cErB"),Ge=n("bA/L"),Ke=Object(f.b)(function(e,t){var n=t.bot_id,a=t.bot_profile,r=t.thread_ts,i=t.teamId,o=t.ts,s=t.channel,l=t.replies,c=t.permalink,u=t.blocks,d=t.attachments,p=Object(Ie.a)(e),m=Object(q.d)(e),h=void 0;m&&(h=m.domain);var b=Object(Be.a)(t.extracts,function(e){return e.truncated_head||e.truncated_tail}),f=t.text.length>200,g=!(!t.attachments||!t.attachments.length),_=!!t.text,v=b&&f||g&&_;(u||Object(Be.a)(d,"blocks"))&&(v=!1);var y=Object(q.d)(e).id!==i,k="";if(l&&l.length){var O=l[0].ts;k="https://"+Object(We.k)(c).hostname+Object(He.a)({channelId:s.id,ts:O,threadTs:o})}return{logger:Object(R.a)({state:e}),hasText:_,isCrossWorkspace:y,botId:n,botProfile:a,threadTs:r,theme:p,permalinkToMessageThread:k,hasAdHocSender:Object(qe.a)(t),featureTinyspeck:Object(N.m)(e,"feature_tinyspeck"),canBeTruncated:v,teamDomain:h,channelName:Object(be.x)(e,s)}},null)(Ge.a),Ve=(m.b.object.isRequired,m.b.object.isRequired,function(e){function t(){r()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={hasError:!1},e}return u()(t,e),o()(t,[{key:"componentDidCatch",value:function(e,t){this.props.telemeter.count("search_ui_messages_result_message_render_error"),this.props.logger.error("IMPROVED_SEARCH","Error caught by ProtectedSearchMessage "+t.componentStack,e),this.setState(function(){return{hasError:!0}})}},{key:"render",value:function(){return this.state.hasError?p.a.createElement(Ue,this.props):p.a.createElement(Ke,this.props)}}]),t}(d.PureComponent));Ve.displayName="ProtectedSearchMessage";var ze=Object(f.b)(function(e){return{logger:Object(R.a)({state:e}),telemeter:Object(Oe.c)({state:e})}})(Ve),Ye=(n("zXku"),new J.b("search")),Qe=(m.b.func.isRequired,m.b.arrayOf(m.b.shape({iid:m.b.string.isRequired,user:m.b.string.isRequired,ts:m.b.string.isRequired,extracts:m.b.array})).isRequired,m.b.shape({id:m.b.string.isRequired,name:m.b.string.isRequired}).isRequired,m.b.string.isRequired,m.b.string,m.b.object.isRequired,m.b.bool.isRequired,m.b.func.isRequired,m.b.func.isRequired,m.b.func.isRequired,m.b.func,m.b.func,{workspaceName:"",clogSearchMessageClick:j.a,clogMessageClick:j.a}),Xe=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isExpanded:!1,isHoveringOnExpandLinks:!1},Object(I.a)(n,["expand","onChannelClick","onMessageJump","onFileJump","onExpandHoverStart","onExpandHoverEnd","onLinkClick","onRepliesClick"]),n}return u()(t,e),o()(t,[{key:"onChannelClick",value:function(){var e=this.state.isExpanded?this.props.messages:this.getCondensedMessageArray();e[0]&&this.onMessageJump({iid:e[0].iid,permalink:e[0].permalink,ts:e[0].ts,channelId:this.props.channel.id,userId:e[0].user,botId:e[0].botId})}},{key:"onLinkClick",value:function(e,t){this.props.clogSearchMessageClick({iid:t.iid,ts:t.ts,channelId:t.channelId,botId:t.botId,userId:t.userId,type:t.type}),"copy_link"===t.type?this.props.clogMessageClick({msg:e,payload:t}):"channel"===t.type&&this.props.close()}},{key:"onMessageJump",value:function(e){var t=e.iid,n=e.permalink,a=e.ts,r=e.channelId,i=e.userId,o=e.botId;this.props.onMessageJump({teamId:this.props.currentTeam.id,permalink:n}),this.props.clogSearchMessageClick({type:"message_jump",iid:t,ts:a,channelId:r,userId:i,botId:o})}},{key:"onFileJump",value:function(e,t){var n=t.file,a=t.iid,r=t.ts,i=t.channelId,o=t.userId,s=t.botId;this.props.onFileJump(e,{file:n,iid:a,ts:r,channelId:i,userId:o,botId:s})}},{key:"onRepliesClick",value:function(e){this.props.onRepliesClick(e),this.props.clogSearchMessageClick({type:"message_jump",iid:e.iid,ts:e.ts,channelId:e.channelId,userId:e.userId,botId:e.botId})}},{key:"onExpandHoverStart",value:function(){this.setState(function(){return{isHoveringOnExpandLinks:!0}})}},{key:"onExpandHoverEnd",value:function(){this.setState(function(){return{isHoveringOnExpandLinks:!1}})}},{key:"getCondensedMessageArray",value:function(){var e=this.props.messages;return Object(Ae.a)(e,function(e,t){var n=e.length&&e[e.length-1].collapsedStub;return t.stub&&(!t.text||t.text.length>200||n)?n?e[e.length-1].count+=1:e.push({collapsedStub:!0,count:1}):e.push(t),e},[])}},{key:"expand",value:function(e){var t=e.iid,n=e.ts,a=e.channelId,r=e.userId,i=e.botId;this.setState(function(){return{isExpanded:!0}}),this.props.clogSearchMessageClick({type:"expand",iid:t,ts:n,channelId:a,userId:r,botId:i})}},{key:"formatHeaderDate",value:function(){return ce(this.props.messages,!0)}},{key:"renderHeader",value:function(){var e=this.props.channel;if(!e)return null;var t=this.formatHeaderDate();return p.a.createElement(Me.a,{className:"c-message_group__header",onClick:this.onChannelClick,"data-qa":"search_message_group_header"},p.a.createElement(xe.a,{channel:e,teamIconSize:"14",showPresence:!0,inline:!0,showTeamIconForXwsChannels:!0}),p.a.createElement("span",null,"\u2013"),p.a.createElement("span",{className:"c-message_group__header_date"},t),p.a.createElement("span",{className:"c-message_group__header_view_label"},Ye.t("View in channel")))}},{key:"renderMessages",value:function(){var e=this,t=this.state.isExpanded?this.props.messages:this.getCondensedMessageArray();return Object(E.a)(t,function(t,n){return t.collapsedStub&&!e.state.isExpanded?p.a.createElement(Fe.a,{key:n,className:"c-message_group__divider",onClick:e.expand},p.a.createElement("hr",{className:"c-message_group__divider_rule"}),p.a.createElement("div",{className:"c-message_group__divider_text"},Ye.t("+{count, plural, =1 {# message} other {# messages}}",{count:t.count}))):p.a.createElement(ze,C()({key:t.ts},t,{teamId:e.props.team,channel:e.props.channel,expanded:e.state.isExpanded,onExpand:e.expand,onClick:e.onMessageJump,onLinkClick:function(n){e.onLinkClick(t,n)},onFileClick:e.onFileJump,onRepliesClick:e.onRepliesClick,onExpandHoverStart:e.onExpandHoverStart,onExpandHoverEnd:e.onExpandHoverEnd}))})}},{key:"render",value:function(){var e=b()("c-message_group",{"c-message_group--hover-expand":this.state.isHoveringOnExpandLinks});return p.a.createElement("div",{className:e,"data-qa":"search_message_group"},this.renderHeader(),this.renderMessages())}}]),t}(d.PureComponent);Xe.displayName="SearchMessageGroup",Xe.defaultProps=Qe;var Je={clogSearchMessageClick:function(){return F.h.apply(void 0,arguments)},clogMessageClick:function(){return Re.a.apply(void 0,arguments)},close:function(){return K.a.apply(void 0,arguments)}},Ze=Object(f.b)(function(e,t){var n=t.channel,a=t.team,r=Object(q.d)(e),i=Object(q.i)(e,a||r.id),o=Object(X.f)(i),s=ge(e,n);return{channel:C()({},s,{team_id:a}),isEnterpriseOrg:!(!r||!r.enterprise_id),workspaceName:o,currentTeam:r}},Je,null,{areStatePropsEqual:function(e,t){return Object(Pe.a)(e,t,2)}})(Xe),$e=(m.b.object.isRequired,m.b.object.isRequired,function(e){function t(){r()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={hasError:!1},e}return u()(t,e),o()(t,[{key:"componentDidCatch",value:function(e,t){this.props.telemeter.count("search_ui_messages_result_message_group_render_error"),this.props.logger.error("IMPROVED_SEARCH","Error caught by ProtectedMessageGroup "+t.componentStack,e),this.setState(function(){return{hasError:!0}})}},{key:"render",value:function(){var e=this.props,t=(e.logger,Ee()(e,["logger"]));return this.state.hasError?p.a.createElement(Te,t):p.a.createElement(Ze,t)}}]),t}(d.PureComponent));$e.displayName="ProtectedMessageGroup";var et=Object(f.b)(function(e){return{logger:Object(R.a)({state:e}),telemeter:Object(Oe.c)({state:e})}})($e),tt=n("wljo"),nt=(m.b.bool,m.b.number.isRequired,m.b.number.isRequired,m.b.func.isRequired,m.b.func.isRequired,m.b.func.isRequired,new J.b("search"));function at(e){var t=e.visible,n=e.currentPageOffset,a=e.totalPageCount,r=e.onBack,i=e.onForward,o=e.onFeedbackClick;if(!t)return null;var s,l=1===n,c=n===a,u={currentPageOffset:Object(te.a)(n),totalPageCount:Object(te.a)(a)};s=nt.t("Page {currentPageOffset} of {totalPageCount}",u,{fallbackHash:"12d107c2f54959a419ebf8a58dc959d76473b0ea"});var d=p.a.createElement(Me.a,{className:"c-search__pager__button_forward",onClick:i,disabled:c,"data-qa":"search_pager_forward_button"},l&&nt.t("See more")||nt.t("Next"),p.a.createElement(ee.b,{type:"chevron-medium-right",size:"inherit"})),m=p.a.createElement(Me.a,{className:"c-search__pager__button__back",onClick:r,disabled:l,"data-qa":"search_pager_back_button"},p.a.createElement(ee.b,{type:"chevron-medium-left",size:"inherit"}),nt.t("Previous")),h=p.a.createElement(tt.a,{short:!0,className:"c-search__pager_feedback",onClick:o});return p.a.createElement("div",{className:"c-search__pager"},l||m,p.a.createElement("div",null,p.a.createElement("span",{className:"c-search__pager__details"},s),h),c||d)}at.displayName="Pager",at.defaultProps={visible:!0};var rt=at,it=n("HI9p"),ot=n("G4ux"),st=n("brL+"),lt=n("zbZx"),ct=n("m1cH"),ut=n.n(ct),dt=n("TGBA"),pt=n("Hh47"),mt=n("wmz2"),ht=n("nOXG");function bt(e,t,n){var a=Object(H.n)(t()),r=a?a.query:"";return e(Object(H.d)()),e(Object(pt.a)()),e(Object(D.a)({query:r,reason:n,fetchSuggestions:Object(ht.a)(t())}))}var ft=Object(x.b)("Message/file search: exclude bots checkbox changed",function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).value;e(Object(M.i)({value:n})),bt(e,t,"search-exclude-bots-changed")});ft.meta={name:"messageAndFileSearchExcludeBotsChanged",key:"actionsUniversalSearchSearchPrefsChangedMessageAndFileSearchExcludeBotsChanged",description:"Message/file search: exclude bots checkbox changed"},ft.propTypes={value:m.b.bool.isRequired};var gt=Object(x.b)("Message/file search: only my channels checkbox changed",function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).value;e(Object(M.j)({value:n})),bt(e,t,"search-only-my-channels-changed")});gt.meta={name:"messageAndFileSearchOnlyMyChannelsChanged",key:"actionsUniversalSearchSearchPrefsChangedMessageAndFileSearchOnlyMyChannelsChanged",description:"Message/file search: only my channels checkbox changed"},gt.propTypes={value:m.b.bool.isRequired};var _t=Object(x.b)("Channel search: hide member channels flag changed",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.value,r=n.refetch,i=void 0===r||r;e(Object(M.g)({value:a})),i&&bt(e,t,"search-hide-member-channels-changed")});_t.meta={name:"channelSearchHideMemberChannelsChanged",key:"actionsUniversalSearchSearchPrefsChangedChannelSearchHideMemberChannelsChanged",description:"Channel search: hide member channels flag changed"},_t.propTypes={value:m.b.bool.isRequired};var vt=Object(x.b)("File search: sort changed",function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).sort;e(Object(mt.b)({sort:n})),e(Object(D.d)({module:"files",reason:"search-files-sort-changed"}))});vt.meta={name:"fileSearchSortChanged",key:"actionsUniversalSearchSearchPrefsChangedFileSearchSortChanged",description:"File search: sort changed"},vt.propTypes={sort:m.b.oneOf(Object(dt.a)(U.c)).isRequired};var yt=Object(x.b)("Channel search: sort changed",function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).sort;e(Object(M.h)({sort:n})),e(Object(D.d)({module:"channels",reason:"search-channels-sort-changed"}))});yt.meta={name:"channelSearchSortChanged",key:"actionsUniversalSearchSearchPrefsChangedChannelSearchSortChanged",description:"Channel search: sort changed"},yt.propTypes={sort:m.b.oneOf(Object(dt.a)(U.b)).isRequired};var kt=Object(x.b)("People search: sort changed",function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).sort;e(Object(M.l)({sort:n})),e(Object(D.d)({module:"people",reason:"search-people-sort-changed"}))});kt.meta={name:"peopleSearchSortChanged",key:"actionsUniversalSearchSearchPrefsChangedPeopleSearchSortChanged",description:"People search: sort changed"},kt.propTypes={sort:m.b.oneOf(Object(dt.a)(U.b)).isRequired};var Ot=Object(x.b)("Channel search: filter type changed",function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).type;e(Object(P.i)({type:n})),bt(e,t,"search-channels-filter-type-changed")});Ot.meta={name:"channelSearchFilterTypeChanged",key:"actionsUniversalSearchSearchPrefsChangedChannelSearchFilterTypeChanged",description:"Channel search: filter type changed"},Ot.propTypes={type:m.b.oneOf(Object(dt.a)(U.a)).isRequired};var Ct=Object(x.b)("All of search: search only current workspace changed",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.value,r=n.refetch,i=void 0===r||r;e(Object(M.m)({value:a})),i&&bt(e,t,"search-only-search-workspace-changed")});Ct.meta={name:"searchOnlySearchWorkspaceChanged",key:"actionsUniversalSearchSearchPrefsChangedSearchOnlySearchWorkspaceChanged",description:"All of search: search only current workspace changed"},Ct.propTypes={value:m.b.bool.isRequired};var Et=Object(x.b)("All of search: search by selected enterprise team id",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.value,r=n.refetch,i=void 0===r||r;e(Object(P.f)({selectedEnterpriseTeamId:a})),i&&bt(e,t,"search-only-by-enterprise-team-id")});Et.meta={name:"searchOnlyByEnterpriseTeamId",key:"actionsUniversalSearchSearchPrefsChangedSearchOnlyByEnterpriseTeamId",description:"All of search: search by selected enterprise team id"},Et.propTypes={value:m.b.string.isRequired};var jt=Object(x.b)("Channel search: update an external org filter",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.teamId,r=n.value,i=t(),o=[].concat(ut()(Object(g.e)(i))),s=Object(g.d)(i);r?o.push(a):o=o.filter(function(e){return e!==a}),e(Object(P.j)({teamIds:Array.from(new Set([].concat(ut()(s),[a])))})),e(Object(P.k)({orgFilters:o})),bt(e,t,"search-channels-org-filter-changed")});jt.meta={name:"toggleChannelSearchOrgFilter",key:"actionsUniversalSearchSearchPrefsChangedToggleChannelSearchOrgFilter",description:"Channel search: update an external org filter"},jt.propTypes={teamId:m.b.string.isRequired,value:m.b.bool.isRequired};var St=Object(x.b)("People search: update an external org filter",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.teamId,r=n.value,i=t(),o=[].concat(ut()(Object(g.m)(i))),s=Object(g.l)(i);r?o.push(a):o=o.filter(function(e){return e!==a}),e(Object(P.v)({teamIds:Array.from(new Set([].concat(ut()(s),[a])))})),e(Object(P.w)({orgFilters:o})),bt(e,t,"search-people-org-filter-changed")});St.meta={name:"togglePeopleSearchOrgFilter",key:"actionsUniversalSearchSearchPrefsChangedTogglePeopleSearchOrgFilter",description:"People search: update an external org filter"},St.propTypes={teamId:m.b.string.isRequired,value:m.b.bool.isRequired};var It=Object(x.b)("People search: filter type changed",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.type,r=n.teamId,i=n.refetch,o=void 0===i||i;e(Object(P.u)({type:a,teamId:r})),o&&bt(e,t,"search-people-filter-type-changed")});It.meta={name:"peopleSearchFilterTypeChanged",key:"actionsUniversalSearchSearchPrefsChangedPeopleSearchFilterTypeChanged",description:"People search: filter type changed"},It.propTypes={type:m.b.oneOf(Object(dt.a)(U.f)).isRequired,teamId:m.b.string};var wt=Object(x.b)("People search: custom filter changed",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.id,r=n.value,i=n.checked;e(Object(P.t)({id:a,value:r,checked:i})),bt(e,t,"search-people-custom-filter-changed")});wt.meta={name:"peopleSearchCustomFilterChanged",key:"actionsUniversalSearchSearchPrefsChangedPeopleSearchCustomFilterChanged",description:"People search: custom filter changed"},wt.propTypes={id:m.b.string.isRequired,value:m.b.string.isRequired,checked:m.b.bool.isRequired};var Nt=Object(x.b)("People search: hide deactivated users pref changed",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.value,r=n.refetch,i=void 0===r||r;e(Object(M.k)({value:a})),i&&bt(e,t,"search-people-hide-deactivated-users-changed")});Nt.meta={name:"peopleSearchHideDeactivatedUsersChanged",key:"actionsUniversalSearchSearchPrefsChangedPeopleSearchHideDeactivatedUsersChanged",description:"People search: hide deactivated users pref changed"},Nt.propTypes={value:m.b.bool.isRequired};var Tt=Object(x.b)("People search: timezone filter changed",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.label,r=n.value,i=n.checked;e(Object(P.A)({label:a,value:r,checked:i})),bt(e,t,"search-people-timezone-filter-changed")});Tt.meta={name:"peopleSearchTimezoneFilterChanged",key:"actionsUniversalSearchSearchPrefsChangedPeopleSearchTimezoneFilterChanged",description:"People search: timezone filter changed"},Tt.propTypes={label:m.b.string.isRequired,value:m.b.string.isRequired,checked:m.b.bool.isRequired};var At=n("FHcd"),Rt=n("+1yX"),Pt=n("jYCR"),Mt=n("fujP");var xt=n("Fdc0"),Ft=n("c48M"),Lt=n("NOj5"),Dt=n("nlS/"),Ut=n("AgpX"),Bt=(n("ym0a"),new J.b("search")),qt=(m.b.bool,m.b.string.isRequired,m.b.string.isRequired,m.b.string.isRequired,m.b.arrayOf(m.b.shape({value:m.b.string.isRequired,label:m.b.node,checked:m.b.bool.isRequired})).isRequired,m.b.func.isRequired,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,{onOptionChange:j.a,onOptionAdd:j.a,renderVisibleOption:void 0,renderOption:void 0,filterOptions:function(e,t){return t},showMoreOptions:!0}),Ht={},Wt=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.initialState={isSelectVisible:!1,isLoading:!1,emptyMessage:Ht,activeRowIndex:null,filterQuery:"",options:[],selectId:"search-multi-select-filter-"+e.checkboxName,isExpanded:!1,isInvalid:!1,isDisabled:!1},n.state=n.initialState,Object(I.a)(n,["onShowSelectClick","setSelectState","renderOption","emptyStateMessage"]),n.loadOptionsPromise=null,n.inputRef=p.a.createRef(),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.reloadOptions("")}},{key:"componentWillUnmount",value:function(){this.loadOptionsPromise&&this.loadOptionsPromise.cancel()}},{key:"onShowSelectClick",value:function(){var e=this;this.setState(function(){return{isSelectVisible:!0}},function(){e.inputRef.current.focus()})}},{key:"setSelectState",value:function(e,t){var n=this,a=!1;this.setState(function(t){var r=e(),i=r.activeRowIndex,o=void 0===i?t.activeRowIndex:i,s=r.filterQuery,l=void 0===s?t.filterQuery:s,c=r.isExpanded,u=void 0===c?t.isExpanded:c,d=r.isInvalid,p=void 0===d?t.isInvalid:d,m=r.isDisabled,h=void 0===m?t.isDisabled:m,b=r.options,f=void 0===b?t.options:b,g=r.selectId,_=void 0===g?t.selectId:g;void 0!==l&&l!==t.filterQuery&&(a=!0);var v=Object(Lt.a)(f,t.options,"value").length;return v===f.length&&v===t.options.length||(a=!0),{activeRowIndex:o,filterQuery:l,isExpanded:u,isInvalid:p,isDisabled:h,options:n.props.filterOptions(l,f),selectId:_}},function(){a&&n.reloadOptions(n.state.filterQuery),t&&t()})}},{key:"refilterOptions",value:function(){var e=this;this.setState(function(t){return{options:e.props.filterOptions(t.filterQuery,t.options)}})}},{key:"reloadOptions",value:function(e){var t=this;this.loadOptionsPromise&&this.loadOptionsPromise.cancel(),this.setState(function(){return{isLoading:!0}}),this.loadOptionsPromise=this.props.loadOptions(e).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.options,a=e.emptyMessage,r=void 0===a?Ht:a;t.setState(function(e){return{options:t.props.filterOptions(e.filterQuery,n),emptyMessage:r}})}).catch(j.a).finally(function(){t.loadOptionsPromise.isCancelled()||t.setState(function(){return{isLoading:!1}})})}},{key:"emptyStateMessage",value:function(){return this.state.emptyMessage===Ht?Bt.t("Nothing found",{fallbackHash:"f4e12416c6b8d6a75b8a34fc79a221e1a43d1120",fallbackHashNs:"select"}):this.state.emptyMessage}},{key:"renderOption",value:function(e,t){var n=t.isActive,a=t.isSelected;return p.a.createElement("div",{className:b()("p-search_filter__option p-search_filter__option--suggestion",{"p-search_filter__option--active":n,"p-search_filter__option--selected":a})},this.props.renderOption?this.props.renderOption(e,t):p.a.createElement("span",{className:"p-search_filter__option_label"},e.label))}},{key:"render",value:function(){var e=this,t=this.props,n=t.checkboxName,a=t.visibleOptions,r=t.placeholderText,i=t.onOptionChange,o=t.onOptionAdd,s=t.renderVisibleOption,l=t.showMoreOptions,c=t.showMoreOptionsAriaLabel,u=this.state.isSelectVisible,d=0===a.length;return p.a.createElement("div",null,a.map(function(t){return p.a.createElement("label",{key:t.value,htmlFor:"search-filter-"+n+"-"+t.value,className:b()("p-search_filter__visible_option",{"p-search_filter__visible_option--selected":t.checked}),"data-qa":"search_filter_suggestion"},s?s(t):p.a.createElement("span",{className:"p-search_filter__option_label"},t.label),p.a.createElement("span",{className:"p-search_filter__visible_checkbox"},p.a.createElement("input",{id:"search-filter-"+n+"-"+t.value,type:"checkbox",name:n,value:t.value,checked:t.checked,onChange:function(n){i(t,n.target.checked),e.refilterOptions()}})))}),l&&(u?p.a.createElement("div",{className:"p-search_filter__select"},p.a.createElement(Dt.b,{width:"100%",inputRef:this.inputRef,selectId:"search-multi-select-filter-"+n,placeholderText:r,emptyStateMessage:this.emptyStateMessage,options:this.state.options,isLoading:this.state.isLoading,setSelectState:this.setSelectState,isExpanded:!!this.state.emptyMessage&&this.state.isExpanded,selectState:{activeRowIndex:this.state.activeRowIndex,filterQuery:this.state.filterQuery,options:this.state.options,selectId:this.state.selectId,isExpanded:!!this.state.emptyMessage&&this.state.isExpanded,isInvalid:this.state.isInvalid,isDisabled:this.state.isDisabled},onOptionSelected:function(){e.setState(function(t){return C()({},e.initialState,{options:t.options})}),o.apply(void 0,arguments)},renderOption:this.renderOption})):p.a.createElement(Ut.a,{className:b()("p-search_filter__more_link",{"p-search_filter__empty_more_link":d}),"data-qa":"search_filter_multi_select__more_link",onClick:this.onShowSelectClick,"aria-label":c,"aria-expanded":"false"},Bt.t("More\u2026"))))}}]),t}(d.Component);Wt.displayName="SearchFilterMultiSelect",Wt.defaultProps=qt;var Gt=Wt,Kt=n("fX3E"),Vt=n("derf"),zt=n("hUMe"),Yt=n("WTjW"),Qt=n("wd/R"),Xt=n.n(Qt),Jt=n("/NHa"),Zt=(n("D3Vj"),function(e){return p.a.createElement("div",{className:"c-search_filter_section"},p.a.createElement("h3",{className:"c-search_filter_section__title"},e.title),e.children)});Zt.displayName="SearchFilterSection",Zt.defaultProps={children:null};var $t=Zt,en=n("hFPh"),tn=(m.b.func.isRequired,m.b.func.isRequired,m.b.string,m.b.string,m.b.string,m.b.string.isRequired,m.b.string.isRequired,m.b.string.isRequired,m.b.string,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(I.a)(n,["onClearDateChange"]),n}return u()(t,e),o()(t,[{key:"onClearDateChange",value:function(){this.props.onDateChange(null)}},{key:"render",value:function(){var e=this.props,t=e.onDateChange,n=e.date,a=e.isDateDisabled,r=e.disableDatesBefore,i=e.disableDatesAfter,o=e.dateLabel,s=e.dateAriaLabel,l=e.removeAriaLabel,c=e.qaLabel,u="es-ES"===Object(J.r)()||"es-LA"===Object(J.r)(),d=n?Object(le.k)(Xt()(n),{shortenMonth:u,shortenDay:u}):"",m=b()("p-search_filter__datepicker_trigger",{"p-search_filter__datepicker_trigger--empty":!n});return p.a.createElement("div",{className:"p-search_filter__date","data-qa":c},p.a.createElement(en.d,{position:"bottom",offsetY:-364,selectedDate:n,dateFormat:"YYYY-MM-DD",onDateChange:t,isDateDisabled:a,disableDatesBefore:r,disableDatesAfter:i},p.a.createElement(Fe.a,{className:m,"aria-label":n?void 0:s,"data-qa":c+"_button"},p.a.createElement("div",{className:"p-search_filter__date_label"},o),p.a.createElement("div",{className:"p-search_filter__date_readout"},d),n?null:p.a.createElement(ee.b,{type:"calendar",className:"p-search_filter__calendar_icon"}))),n?p.a.createElement(Fe.a,{"aria-label":l,className:"p-search_filter__date_close",onClick:this.onClearDateChange,"data-qa":c+"_close"},p.a.createElement(ee.b,{type:" c-icon--times-small"})):null)}}]),t}(d.PureComponent));tn.displayName="DateSelector",tn.defaultProps={date:null,disableDatesBefore:null,disableDatesAfter:null,qaLabel:""};var nn=tn,an=new J.b("search"),rn=(m.b.func.isRequired,m.b.func.isRequired,m.b.string,m.b.string,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(I.a)(n,["isDateDisabledStart","isDateDisabledEnd"]),n}return u()(t,e),o()(t,[{key:"isDateDisabledStart",value:function(e){var t=this.props.endDate;return t&&e.isAfter(t)||e.isAfter(Xt()())}},{key:"isDateDisabledEnd",value:function(e){var t=this.props.startDate;return t&&e.isBefore(t)||e.isAfter(Xt()())}},{key:"render",value:function(){var e=this.props,t=e.onStartDateChange,n=e.onEndDateChange,a=e.endDate,r=e.startDate;return p.a.createElement($t,{title:an.t("Date")},p.a.createElement("div",{className:"p-search_filter__dates"},p.a.createElement(nn,{date:r,onDateChange:function(e){t(e?Xt()(e):null)},isDateDisabled:this.isDateDisabledStart,disableDatesAfter:a||Xt()().format("YYYY-MM-DD"),dateLabel:an.t("Starting"),dateAriaLabel:an.t("Starting date"),removeAriaLabel:an.t("Remove starting date"),qaLabel:"search_starting_date"}),p.a.createElement(nn,{date:a,onDateChange:function(e){n(e?Xt()(e):null)},isDateDisabled:this.isDateDisabledEnd,disableDatesBefore:r,disableDatesAfter:Xt()().format("YYYY-MM-DD"),dateLabel:an.t("Ending"),dateAriaLabel:an.t("Ending date"),removeAriaLabel:an.t("Remove ending date"),qaLabel:"search_ending_date"})))}}]),t}(d.PureComponent));rn.displayName="DateRangeFilter",rn.defaultProps={startDate:null,endDate:null};var on=rn;m.b.number.isRequired,m.b.bool;function sn(e){var t=e.variation,n=e.includeAvatar;return p.a.createElement("div",{className:"p-search_filter__placeholder_suggestion"},n?p.a.createElement("div",{className:"p-search_filter__placeholder_avatar"}):null,p.a.createElement("div",{className:"p-search_filter__placeholder_name p-search_filter__placeholder_name--"+t}))}sn.displayName="PlaceholderSuggestion",sn.defaultProps={includeAvatar:!1};var ln=sn,cn=n("g9w/"),un=new J.b("search");function dn(e){var t=e.loggedInEnterpriseTeams,n=e.searchOnlyWorkspaceTeamId,a=e.selfEnterpriseOrgName,r=e.featureSearchTeamLimitFilter;if(r&&!1===r)return null;var i=[{renderLabel:p.a.createElement("div",{className:"p-search_filter__limit_team_filter_dropdown_item"},un.rt("All {enterpriseName} Workspaces",{enterpriseName:a})),label:un.t("All {enterpriseName} Workspaces",{enterpriseName:a}),value:""}].concat(ut()(t.map(function(e){return{renderLabel:p.a.createElement("div",{className:"p-search_filter__limit_team_filter_dropdown_item"},p.a.createElement(d.Fragment,null,p.a.createElement(Vt.b,{className:"p-search_filter__limit_team_filter_icon",id:e.id,size:18})," ",p.a.createElement(zt.a,{id:e.id,bold:!1}))),label:e.name,value:e.id}}))),o=""===n?i[0]:i.find(function(e){return e.value===n});return p.a.createElement(cn.a,{options:i,selectId:"search_limit_team_filter_dropdown",width:"100%",onOptionSelected:function(t){e.onChange(t)},renderOption:function(e){return p.a.createElement("span",null,e.renderLabel)},selectedOption:o,renderSelectedOption:function(e){return p.a.createElement("span",null,e.renderLabel)}})}dn.displayName="SearchLimitTeamFilterDropdown",dn.defaultProps={loggedInEnterpriseTeams:[],searchOnlyWorkspaceTeamId:"",selfEnterpriseOrgName:"",onChange:j.a,featureSearchTeamLimitFilter:!1};var pn=dn,mn=(n("YyUD"),new J.b("search")),hn=(m.b.bool,m.b.bool,m.b.object.isRequired,m.b.object.isRequired,m.b.object.isRequired,m.b.func.isRequired,m.b.func.isRequired,m.b.object.isRequired,m.b.bool.isRequired,m.b.func.isRequired,m.b.func.isRequired,m.b.func.isRequired,m.b.func.isRequired,m.b.func.isRequired,m.b.func.isRequired,m.b.shape({searchOnlyCurrentTeam:m.b.bool.isRequired,searchExcludeBots:m.b.bool.isRequired,searchOnlyMyChannels:m.b.bool.isRequired}).isRequired,m.b.object.isRequired,m.b.bool.isRequired,m.b.bool.isRequired,m.b.func,m.b.func.isRequired,m.b.bool.isRequired,m.b.bool.isRequired,m.b.func.isRequired,m.b.func,m.b.func,m.b.bool.isRequired,m.b.string,m.b.bool.isRequired,m.b.string,m.b.array.isRequired,m.b.func,{showOnlyActiveFilters:!1,showFileFilters:!1,logInfo:j.a,clogSearchFilterAdded:j.a,clogSearchFilterRemoved:j.a,searchOnlyWorkspaceTeamId:"",selfEnterpriseOrgName:"",searchOnlyByEnterpriseTeamId:j.a}),bn=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(I.a)(n,["onChannelSelect","onMemberSelect","onEndDateSelect","onStartDateSelect","onFileTypeChange","loadInFilterOptions","loadFromFilterOptions","onSearchLimitTeamFilterDropdownChange"]),n.onStartDateSelect=n.onStartDateSelect.bind(n),n.onEndDateSelect=n.onEndDateSelect.bind(n),n}return u()(t,e),o()(t,[{key:"onChannelSelect",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).offset;if(e){var n={filter_in:!0,filter_position:t};Object(At.a)(e)?n.click_user_id=e:n.click_channel_id=e,this.props.filters.in.indexOf(e)>-1?this.props.clogSearchFilterRemoved(n):this.props.clogSearchFilterAdded(n);var a=e;this.props.imToUserMap[e]&&(a=this.props.imToUserMap[e]),this.props.toggleEditableRequestQueryFilterInItem({channelId:a})}}},{key:"onMemberSelect",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).offset;e&&(this.props.filters.from.indexOf(e)>-1?this.props.clogSearchFilterRemoved({click_user_id:e,filter_from:!0,filter_position:t}):this.props.clogSearchFilterAdded({click_user_id:e,filter_from:!0,filter_position:t}),this.props.toggleEditableRequestQueryFilterFromItem({memberId:e}))}},{key:"onEndDateSelect",value:function(e){var t=e&&e.add(1,"days").format(Jt.a);t?this.props.clogSearchFilterAdded({filter_before:t}):this.props.clogSearchFilterRemoved({filter_before:""}),this.props.setEditableRequestQueryFilterBefore({dateString:t})}},{key:"onStartDateSelect",value:function(e){var t=e&&e.subtract(1,"days").format(Jt.a);t?this.props.clogSearchFilterAdded({filter_after:t}):this.props.clogSearchFilterRemoved({filter_after:""}),this.props.setEditableRequestQueryFilterAfter({dateString:t})}},{key:"onSearchPrefChange",value:function(e){var t=this.props.searchPrefs,n=t.searchOnlyCurrentTeam,a=t.searchExcludeBots,r=t.searchOnlyMyChannels;this.props.logInfo("IMPROVED_SEARCH","Changing search pref. pref: "+e);var i=void 0;switch(e){case U.l:i=!n,this.props.searchOnlySearchWorkspaceChanged({value:i});break;case U.i:i=!a,this.props.messageAndFileSearchExcludeBotsChanged({value:i});break;case U.m:i=!r,this.props.messageAndFileSearchOnlyMyChannelsChanged({value:i});break;default:return}i?this.props.clogSearchFilterAdded({filter_other:e}):this.props.clogSearchFilterRemoved({filter_other:e})}},{key:"onSearchLimitTeamFilterDropdownChange",value:function(e){this.props.searchOnlyByEnterpriseTeamId({value:e.value})}},{key:"onFileTypeChange",value:function(e){this.props.clogSearchFilterAdded({filter_file_type:e}),this.props.setEditableRequestQueryFilterFileType({fileType:e})}},{key:"loadInFilterOptions",value:function(e){var t=this;return!e||e.length<=1?Promise.resolve({options:[],emptyMessage:null}):this.props.search({query:e,options:{limit:150,entities:{channels:{includeArchived:!0,onlyIfMember:this.props.searchPrefs.searchOnlyMyChannels,includeFromAnotherTeam:!this.props.searchPrefs.searchOnlyCurrentTeam,includeMpims:!0},members:{includeSelf:!0,includeSlackbot:!this.props.searchPrefs.searchExcludeBots,includeBots:!this.props.searchPrefs.searchExcludeBots,includeDeleted:!0}}}}).then(function(e){var n=e.filter(function(e){return-1===Object(it.a)(t.props.suggestions.in,function(t){return t.id===e.id})}),a={};return t.props.suggestions.in.forEach(function(e){a[e.name]=(a[e.name]||0)+1}),n.forEach(function(e){a[e.name]=(a[e.name]||0)+1}),{options:n.map(function(e){return{label:null,model:e,member:Object(xt.yb)(e)&&e,mpim:Object(be.pb)(e)&&e,channel:Object(be.Y)(e)&&e,value:e.id}})}})}},{key:"loadFromFilterOptions",value:function(e){var t=this;return!e||e.length<=1?Promise.resolve({options:[],emptyMessage:null}):this.props.search({query:e,options:{entities:{members:{includeSelf:!0,includeSlackbot:!0,includeBots:!0,includeDeleted:!0}}}}).then(function(e){return{options:e.filter(function(e){return-1===t.props.suggestions.from.indexOf(e.id)}).map(function(e){return{label:null,model:e,member:Object(xt.yb)(e)&&e,mpim:Object(be.pb)(e)&&e,channel:Object(be.Y)(e)&&e,value:e.id}})}})}},{key:"shouldRenderDateFilter",value:function(){var e,t=this.props,n=t.filters,a=t.showOnlyActiveFilters;return!((!(e=n)||Object(Mt.a)(e)||!(e.in&&e.in.length||e.from&&e.from.length||e.to&&e.to.length||e.before||e.after||e.has_star||e.has_pin||e.has_link||e.has_rxn))&&a)&&(!a||n.before&&n.after)}},{key:"renderInFilter",value:function(){var e=this,t=this.props,n=t.filters,a=t.suggestions,r=t.fileSuggestions,i=t.loading,o=t.loadingFileSuggestions,s=t.showFileFilters;if(i&&!s||o&&s)return this.renderInPlaceholder();var l=(s?r:a).in,c={};l.forEach(function(e){c[e.name]=(c[e.name]||0)+1});var u=[],d={};return l.forEach(function(e){var t=n.in.indexOf(e.id)>-1;t&&(d[e.id]=!0),u.push({label:null,model:e,member:Object(xt.yb)(e)&&e,mpim:Object(be.pb)(e)&&e,channel:Object(be.Y)(e)&&e,value:e.id,checked:t})}),p.a.createElement($t,{title:mn.t("Channels & direct messages")},p.a.createElement(Gt,{checkboxName:"in_filter",placeholderText:mn.t("Enter a channel or direct message",{fallbackHash:"f95c98e247b782d3e4650fac888dac7c9ca383a9"}),showMoreOptionsAriaLabel:mn.t("More channels or direct messages to filter by"),loadOptions:this.loadInFilterOptions,renderVisibleOption:function(e){return p.a.createElement(xe.a,{className:"p-search_filter__in_channel",channel:e.model,showTeamIconForLocalChannels:c[e.model.name]>1,showTeamIconForXwsChannels:!0})},renderOption:function(e){return e.member?p.a.createElement(Yt.a,{className:"p-search_filter__in_member",id:e.member.id}):p.a.createElement(xe.a,{className:"p-search_filter__in_channel",channel:e.model,teamIconSize:18,showTeamIconForLocalChannels:c[e.model.name]>1,showTeamIconForXwsChannels:!0})},visibleOptions:u,onOptionChange:function(t){e.onChannelSelect(t.value,{offset:u.indexOf(t)})},onOptionAdd:function(t){e.onChannelSelect(t.value,{offset:null})},filterOptions:function(e,t){return t.filter(function(e){return!d[e.value]})}}))}},{key:"renderInPlaceholder",value:function(){return p.a.createElement($t,{title:mn.t("Channels & direct messages")},p.a.createElement(ln,{variation:0}),p.a.createElement(ln,{variation:1}),p.a.createElement(Me.a,{className:"p-search_filter__more_link",disabled:!0,"aria-label":mn.t("More channels or direct messages to filter by"),"aria-expanded":"false"},mn.t("More\u2026")))}},{key:"renderFromFilter",value:function(){var e=this,t=this.props,n=t.filters,a=t.suggestions,r=t.fileSuggestions,i=t.loading,o=t.loadingFileSuggestions,s=t.showFileFilters;if(i&&!s||o&&s)return this.renderFromPlaceholder();var l=[],c={};return(s?r:a).from.forEach(function(e){var t=n.from.indexOf(e.id)>-1;t&&(c[e.id]=!0),l.push({label:null,model:e,member:Object(xt.yb)(e)&&e,mpim:Object(be.pb)(e)&&e,channel:Object(be.Y)(e)&&e,value:e.id,checked:t})}),p.a.createElement($t,{title:mn.t("People")},p.a.createElement(Gt,{checkboxName:"from_filter",placeholderText:mn.t("Enter a teammate\u2019s name",{fallbackHash:"670ca2ba897531a14d0d51f4b85583c58e9b03dc"}),showMoreOptionsAriaLabel:mn.t("More people to filter by"),loadOptions:this.loadFromFilterOptions,renderVisibleOption:function(e){return p.a.createElement(d.Fragment,null,p.a.createElement(je.c,{className:"p-search_filter__from_avatar",userId:e.model.id,size:18,ariaHidden:"true",tabIndex:"-1",isInteractive:!1}),p.a.createElement(Yt.a,{className:"p-search_filter__from_name",id:e.model.id}))},renderOption:function(e){return p.a.createElement(d.Fragment,null,p.a.createElement(je.c,{className:"p-search_filter__from_avatar",userId:e.model.id,size:18,ariaHidden:"true",tabIndex:"-1",isInteractive:!1}),p.a.createElement(Yt.a,{className:"p-search_filter__from_name",id:e.model.id}))},visibleOptions:l,onOptionChange:function(t){e.onMemberSelect(t.value,{offset:l.indexOf(t)})},onOptionAdd:function(t){e.onMemberSelect(t.value,{offset:null})},filterOptions:function(e,t){return t.filter(function(e){return!c[e.value]})}}))}},{key:"renderFromPlaceholder",value:function(){return p.a.createElement($t,{title:mn.t("People")},p.a.createElement(ln,{includeAvatar:!0,variation:0}),p.a.createElement(ln,{includeAvatar:!0,variation:1}),p.a.createElement(Me.a,{className:"p-search_filter__more_link",disabled:!0,"aria-label":mn.t("More people to filter by"),"aria-expanded":"false"},mn.t("More\u2026")))}},{key:"renderFileTypeFilter",value:function(){var e=this.props,t=e.filters,n=e.showOnlyActiveFilters;return!e.showFileFilters||n&&!t.fileType?null:p.a.createElement($t,{title:mn.t("File type")},p.a.createElement(Kt.a,{filetype:t.fileType,onChange:this.onFileTypeChange}))}},{key:"renderPrefs",value:function(){var e=this,t=this.props,n=t.showOnlyActiveFilters,a=t.isEnterpriseOrg,r=t.showDebugOption,i=t.isDebugInfoVisible,o=t.currentTeam,s=t.featureSearchLimitTeamFilter,l=t.searchOnlyWorkspaceTeamId,c=t.selfEnterpriseOrgName,u=t.loggedInEnterpriseTeams,m=t.showEnterpriseOptions,h=this.props.searchPrefs,f=h.searchOnlyCurrentTeam,g=h.searchExcludeBots,_=h.searchOnlyMyChannels;return n?null:p.a.createElement(d.Fragment,null,m&&s?p.a.createElement($t,{title:mn.t("Workspace"),"data-qa":"search-filter-workspace-section"},p.a.createElement("div",{className:"p-search_filter__select"},p.a.createElement(pn,{loggedInEnterpriseTeams:u,selfEnterpriseOrgName:c,searchOnlyWorkspaceTeamId:l,onChange:this.onSearchLimitTeamFilterDropdownChange,featureSearchLimitTeamFilter:s}))):null,p.a.createElement($t,{title:mn.t("More options")},a&&!s?p.a.createElement("label",{className:b()("p-search_filter__checkbox_label",{"p-search_filter__checkbox_label--selected":f}),htmlFor:"search_only_current_team"},mn.rt("Only search {currentTeamNameAndIcon}",{fallbackHash:"b326da02faf635a430ceb2bda81e5803542e7b21",currentTeamNameAndIcon:p.a.createElement(d.Fragment,null,p.a.createElement(Vt.b,{className:"p-search_filter__workspace_only_team_icon",team:o,size:18})," ",p.a.createElement(zt.a,{id:o.id,bold:f}))}),p.a.createElement("input",{type:"checkbox",className:"flex_shrink_none",id:"search_only_current_team",checked:f,onChange:function(){return e.onSearchPrefChange(U.l)}})):null,p.a.createElement("label",{className:b()("p-search_filter__checkbox_label",{"p-search_filter__checkbox_label--selected":_}),htmlFor:"search_only_my_channels"},mn.t("Only search my channels")," ",p.a.createElement("input",{type:"checkbox",className:"flex_shrink_none",id:"search_only_my_channels",checked:_,onChange:function(){return e.onSearchPrefChange(U.m)}})),p.a.createElement("label",{className:b()("p-search_filter__checkbox_label",{"p-search_filter__checkbox_label--selected":g}),htmlFor:"search_exclude_bots"},mn.t("Hide apps and bots")," ",p.a.createElement("input",{type:"checkbox",className:"flex_shrink_none",id:"search_exclude_bots",checked:g,onChange:function(){return e.onSearchPrefChange(U.i)}})),r&&p.a.createElement("label",{className:b()("p-search_filter__checkbox_label",{"p-search_filter__checkbox_label--selected":i}),htmlFor:"search_show_debug_info"},"[DEBUG] Show solr debug info"," ",p.a.createElement("input",{type:"checkbox",className:"flex_shrink_none",id:"search_show_debug_info",checked:i,onChange:function(){return e.props.toggleDebugInfoVisible()}}))))}},{key:"render",value:function(){var e=this.props.filters.after&&Xt()(this.props.filters.after,Jt.a).add(1,"days").format(Jt.a),t=this.props.filters.before&&Xt()(this.props.filters.before,Jt.a).subtract(1,"days").format(Jt.a);return p.a.createElement("div",{className:"p-search_filters"},this.renderFromFilter(),this.renderInFilter(),this.renderFileTypeFilter(),p.a.createElement(on,{onStartDateChange:this.onStartDateSelect,onEndDateChange:this.onEndDateSelect,startDate:e,endDate:t}),this.renderPrefs())}}]),t}(d.PureComponent);bn.displayName="MessagesFilterUIBase",bn.defaultProps=hn;function fn(e,t){return Object(Rt.a)(t)?Object(fe.e)(e,t):Object(At.a)(t)?Object(ot.d)(e,t):null}var gn={setEditableRequestQueryFilterAfter:function(){return H.t.apply(void 0,arguments)},setEditableRequestQueryFilterBefore:function(){return H.u.apply(void 0,arguments)},setEditableRequestQueryFilterFileType:function(){return H.v.apply(void 0,arguments)},toggleEditableRequestQueryFilterFromItem:function(){return H.E.apply(void 0,arguments)},toggleEditableRequestQueryFilterInItem:function(){return H.F.apply(void 0,arguments)},search:function(){return Pt.c.apply(void 0,arguments)},toggleDebugInfoVisible:function(){return P.I.apply(void 0,arguments)},clogSearchFilterAdded:function(){return F.f.apply(void 0,arguments)},clogSearchFilterRemoved:function(){return F.g.apply(void 0,arguments)},searchOnlySearchWorkspaceChanged:function(){return Ct.apply(void 0,arguments)},messageAndFileSearchExcludeBotsChanged:function(){return ft.apply(void 0,arguments)},messageAndFileSearchOnlyMyChannelsChanged:function(){return gt.apply(void 0,arguments)},searchOnlyByEnterpriseTeamId:function(){return Et.apply(void 0,arguments)}},_n=Object(f.b)(function(e){var t=Object(H.h)(e)||Ft.b,n=Object(H.j)(e)||Ft.b,a=Object(H.k)(e)||Ft.b,r=Object(N.c)(e),i=Object(q.d)(e),o=!!i.enterprise_id,s=function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).reduce(function(t,n){if(Object(At.a)(n)){var a=Object(fe.l)(e,n);a&&(t[a]=n)}return t},{})}(e,t.in),l=(Object(g.i)(e,"suggestions")||Ft.b).loading,c=(Object(g.i)(e,"suggestionsForFiles")||{loading:!1}).loading,u="solr_rank_debug"===Object(W.c)(e,"solr_rank_debug"),d=Object(st.a)(e),p=Object(N.b)(e).filter(function(e){return!!e.enterprise_id&&e.enterprise_id===d}),m={searchOnlyCurrentTeam:Object(pe.j)(e,U.l),searchExcludeBots:Object(pe.j)(e,U.i),searchOnlyMyChannels:Object(pe.j)(e,U.m)};return{suggestions:{in:(n.in||Ft.a).map(function(t){return fn(e,t)}).filter(function(e){return!!e}),from:(n.from||Ft.a).map(function(t){return fn(e,t)}).filter(function(e){return!!e})},fileSuggestions:{in:(a.in||Ft.a).map(function(t){return fn(e,t)}).filter(function(e){return!!e}),from:(a.from||Ft.a).map(function(t){return fn(e,t)}).filter(function(e){return!!e})},currentTeam:i,isEnterpriseOrg:o,myUserId:r,filters:{in:t.in||Ft.a,from:t.from||Ft.a,before:t.before,after:t.after,fileType:t.fileType},imToUserMap:s,searchPrefs:m,loading:l,loadingFileSuggestions:c,logInfo:Object(R.a)({state:e}).info,isDebugInfoVisible:Object(g.g)(e),showDebugOption:u,filterWorkspaceOnly:Object(M.f)(e),allAccountsOfCurrentEnterprise:p,loggedInEnterpriseTeams:p.map(function(t){return Object(q.i)(e,t.id)}),featureSearchLimitTeamFilter:Object(N.m)(e,"feature_search_limit_team_filter"),searchOnlyWorkspaceTeamId:Object(g.q)(e),selfEnterpriseOrgName:Object(q.e)(e),showEnterpriseOptions:Object(lt.d)(e)}},gn,null,{areStatePropsEqual:function(e,t){return Object(Pe.a)(e,t,2)}})(bn),vn=n("negh"),yn=n("kOzZ"),kn=Object(x.b)("Clog clicks on the message/storage limit banner that appears in search for free teams",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.elementName,r=n.uiAction,i=n.elementType;Object(yn.a)({state:t()}).track(vn.EventId.GROWTH_PRICING,{contexts:{ui_context:{step:vn.UiStep.SEARCH_PANE,action:r,element_name:a,element_type:i}}})});kn.meta={name:"clogLimitBannerInteraction",key:"actionsUniversalSearchClogLimitBannerInteractionClogLimitBannerInteraction",description:"Clog clicks on the message/storage limit banner that appears in search for free teams"},kn.propTypes={elementName:m.b.string.isRequired,uiAction:m.b.number.isRequired,elementType:m.b.number.isRequired};var On=kn,Cn=(n("IpQt"),new J.b("search")),En=(m.b.oneOf(["messages","files"]).isRequired,m.b.bool.isRequired,m.b.bool.isRequired,m.b.func.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.clogLinkClick=n.clogLinkClick.bind(n),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.isVisible()&&this.props.clogLimitBannerInteraction({uiAction:vn.UiAction.IMPRESSION,elementName:this.getClogElementName(),elementType:vn.ElementType.BANNER})}},{key:"getClogElementName",value:function(){return this.props.overStorageLimit?"storage_limit_banner":"message_limit_banner"}},{key:"getClogUIElement",value:function(){return this.props.overStorageLimit?vn.UiElement.FILE_SEARCH_PRICING_LINK:vn.UiElement.MESSAGE_SEARCH_LINK_TOP}},{key:"clogLinkClick",value:function(){this.props.clogLimitBannerInteraction({uiAction:vn.UiAction.CLICK,elementName:this.getClogElementName(),elementType:vn.ElementType.LINK})}},{key:"isVisible",value:function(){var e=this.props,t=e.overMessageLimit,n=e.overStorageLimit,a=e.type;return t||n&&"files"===a}},{key:"render",value:function(){if(!this.isVisible())return null;var e=this.props,t=e.type,n=void 0,a=void 0;return e.overStorageLimit&&"files"===t?(n=Cn.t("Some additional results aren\u2019t visible because your workspace has passed the free plan\u2019s 5 GB storage limit."),a=Cn.t("See paid plans")):(n="messages"===t?Cn.t("Some older messages may not be shown because your workspace has over 10,000 messages."):Cn.t("Some older files may not be shown because your workspace has over 10,000 messages."),a=Cn.t("Learn more")),p.a.createElement("div",{className:"p-message_limit_banner"},p.a.createElement("div",{className:"p-message_limit_banner__graphic"},p.a.createElement(ee.b,{type:"eye-closed"})),p.a.createElement("div",{className:"p-message_limit_banner__content"},n,"\xa0",p.a.createElement(Me.a,{href:"/pricing?ui_step="+vn.UiStep.SEARCH_PANE+"&ui_element="+this.getClogUIElement(),onClick:this.clogLinkClick,target:"new","data-qa":"message-limit-banner_pricing-link"},a)))}}]),t}(d.PureComponent));En.displayName="MessageLimitBanner";var jn={clogLimitBannerInteraction:On},Sn=Object(f.b)(function(e){var t=Object(q.d)(e);return{overMessageLimit:Object(X.B)(t),overStorageLimit:Object(X.C)(t)}},jn)(En),In=n("yt6e"),wn=n("RMmo"),Nn=n("3zPy"),Tn=(m.b.any.isRequired,m.b.bool.isRequired,m.b.func.isRequired,m.b.func.isRequired,m.b.func.isRequired,m.b.string.isRequired,m.b.any.isRequired,function(e){function t(){r()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Object(I.a)(e,["setContainerRef","onFocusEnter","onKeyDown","onFocusLeave"]),e.focusedAfterUpdate=!1,e}return u()(t,e),o()(t,[{key:"componentDidUpdate",value:function(e){!e.focused&&this.props.focused&&this.container&&(this.focusedAfterUpdate=!0,this.container.focus())}},{key:"onFocusEnter",value:function(e){var t=e.relatedEvent;t&&"mousedown"===t.type||(this.props.onFocusEnter({id:this.props.id,isLifeCycleUpdate:this.focusedAfterUpdate}),this.focusedAfterUpdate&&(this.focusedAfterUpdate=!1))}},{key:"onFocusLeave",value:function(){this.props.onFocusLeave({id:this.props.id})}},{key:"onKeyDown",value:function(e){e.keyCode===Nn.codes.enter&&e.target===this.container&&this.props.onSelect(e,this.props.id)}},{key:"setContainerRef",value:function(e){this.container=e}},{key:"focus",value:function(){this.container&&this.container.focus()}},{key:"render",value:function(){var e=this.props,t=e.ariaLabel,n=e.focused,a=e.children;return p.a.createElement(In.a,{onFocusEnter:this.onFocusEnter,onFocusLeave:this.onFocusLeave,onFocusWithin:this.onFocusLeave},p.a.createElement("div",{tabIndex:"-1",className:b()("c-focus_manage_list__item",{"c-focus_manage_list__item--focus":n}),ref:this.setContainerRef,role:"listitem","aria-label":t,onKeyDown:this.onKeyDown},a))}}]),t}(d.PureComponent));Tn.displayName="FocusManagedListItem";var An=Tn;function Rn(e,t,n,a){if(0===e.length)return null;if(null===t&&null!==n)return n;var r=e.indexOf(t),i=r+a;return i>=e.length?i=e.length-1:-1===r&&a<0?i=e.length-1:i<0&&(i=0),e[i]}n("guNz"),m.b.array.isRequired,m.b.func.isRequired,m.b.func.isRequired,m.b.func;var Pn={onSelectItem:j.a},Mn=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(I.a)(n,["onFocusLeave","onItemFocusEnter","onItemFocusLeave","onArrowKeyDown","setContainerRef"]),n.state={activeItem:null},n.inferredActiveItem=null,n.containerRef=null,n.keyCommands=null,n.itemRefs={},n}return u()(t,e),o()(t,[{key:"onArrowKeyDown",value:function(e){var t=this;e.preventDefault();var n=0;e.keyCode===Nn.codes.up&&(n=-1),e.keyCode===Nn.codes.down&&(n=1),0!==n&&this.setState(function(e){return{activeItem:Rn(t.props.ids,e.activeItem,t.inferredActiveItem,n)}})}},{key:"onItemFocusEnter",value:function(e){var t=e.id;e.isLifeCycleUpdate||(this.inferredActiveItem=t,this.setState(function(){return{activeItem:null}}))}},{key:"onItemFocusLeave",value:function(e){var t=e.id;this.setState(function(e){var n=e.activeItem;return{activeItem:n===t?null:n}})}},{key:"onFocusLeave",value:function(){this.setState(function(){return{activeItem:null}}),this.inferredActiveItem=null}},{key:"setContainerRef",value:function(e){if(this.containerRef=e,this.keyCommands&&(this.keyCommands.reset(),this.keyCommands=null),this.containerRef){var t=[{keys:["up","down"],handler:this.onArrowKeyDown,ignoreInputs:!0}];this.keyCommands=new wn.a(this.containerRef),this.keyCommands.bindAll(t)}}},{key:"setItemRef",value:function(e,t){this.itemRefs[e]=t}},{key:"focus",value:function(){this.containerRef&&this.containerRef.focus()}},{key:"focusItem",value:function(e){this.itemRefs[e]&&(this.itemRefs[e].focus(),this.inferredActiveItem=e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.ids,a=t.itemAriaLabel,r=t.renderItem,i=t.onSelectItem;return p.a.createElement(In.a,{onFocusLeave:this.onFocusLeave},p.a.createElement("div",{role:"list",ref:this.setContainerRef,className:"c-search_focus_managed_list",tabIndex:"-1"},n.map(function(t){return p.a.createElement(An,{ref:function(n){return e.setItemRef(t,n)},key:t,id:t,ariaLabel:a(t),focused:e.state.activeItem===t,onFocusEnter:e.onItemFocusEnter,onFocusLeave:e.onItemFocusLeave,onSelect:i},r(t))})))}}]),t}(d.PureComponent);Mn.displayName="FocusManagedList",Mn.defaultProps=Pn;var xn=Mn,Fn=n("cD5Y"),Ln=n("zoXk"),Dn=n("Go8C"),Un=new J.b("search");m.b.func.isRequired;function Bn(e){return p.a.createElement("div",{className:"c-search__back_to_filters"},p.a.createElement($.d,{type:"outline",size:"small",className:"padding_left_50",onClick:e.onClick},p.a.createElement(ee.b,{type:"arrow-up-medium"}),"\xa0",Un.t("Back to Filters",{fallbackHash:"2e2575b332e9f936eb1d97f0ef2c04e7ec73cefe"})))}Bn.displayName="BackToFiltersButton";var qn=Bn,Hn=new J.b("search"),Wn=300,Gn=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isScrolledTop:e.scrollPosition<Wn,scrollPosition:n.props.scrollPosition},n.wrapperRef=p.a.createRef(),n.topScrollElementRef=p.a.createRef(),Object(I.a)(n,["onScroll","scrollTop"]),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.scrollPosition&&(this.wrapperRef.current.scrollTop=this.props.scrollPosition),this.logTelemetry()}},{key:"componentDidUpdate",value:function(e){e.loading===this.props.loading&&e.errorType===this.props.errorType||this.logTelemetry()}},{key:"componentWillUnmount",value:function(){this.props.setScrollPosition(this.state.scrollPosition)}},{key:"onScroll",value:function(){this.updateScrollPosition(this.wrapperRef.current.scrollTop)}},{key:"getToastOffset",value:function(){var e=window.innerWidth,t=window.innerHeight,n=this.wrapperRef.current?this.wrapperRef.current.getBoundingClientRect():{right:e,top:t};return{offsetX:24+e-n.right,offsetY:24+t-n.bottom}}},{key:"logTelemetry",value:function(){var e=this.props.module.replace(/\./g,"_");if(this.props.loading)this.props.telemeter.count("search_ui_"+e+"_view_loading");else switch(this.props.errorType){case U.e.None:this.props.telemeter.count("search_ui_"+e+"_view");break;case U.e.NoQuery:this.props.telemeter.count("search_ui_"+e+"_error_noquery");break;case U.e.Timeout:this.props.telemeter.count("search_ui_"+e+"_error_timeout");break;case U.e.RenderErrorCaught:this.props.telemeter.count("search_ui_"+e+"_error_render");break;case U.e.Unknown:this.props.telemeter.count("search_ui_"+e+"_error_unknown");break;default:this.props.telemeter.count("search_ui_"+e+"_unknown")}}},{key:"scrollTop",value:function(){this.props.logInfo("IMPROVED_SEARCH","Scrolling to top of results page"),this.topScrollElementRef.current&&(this.updateScrollPosition(0),this.wrapperRef.current.scrollTop=0)}},{key:"updateScrollPosition",value:function(e){this.setState(function(){return{isScrolledTop:e<Wn,scrollPosition:e}})}},{key:"render",value:function(){var e=this.props,t=e.errorType,n=e.loading,a=e.filterUI,r=e.id,i=e.children,o=e.emptyResultsTitle,s=e.numResults,l=e.sortDropdown,c=e.onClickRefreshSearch,u=e.alertHeader,d=e.userQuery,m=this.state.isScrolledTop,h=!this.props.usePrimarySearch||!this.props.secondaryView,f=s?Hn.rt("{totalItemCount, plural, =1 {{totalItemCountStr} result} other {{totalItemCountStr} results}}",{totalItemCount:s,totalItemCountStr:ae(s)}):null,g=!n&&t===U.e.NoQuery,_=!n&&!g&&t!==U.e.None,v=!!d,y=!(n||g||_||s),k=!n&&!g&&!_&&s>0;return p.a.createElement("div",{className:"c-search__results",onScroll:this.onScroll,ref:this.wrapperRef},u,p.a.createElement("div",{className:b()("c-search__view",{"c-search__view--hide_filters":!h}),id:r,role:"tabpanel"},p.a.createElement("div",{className:"c-search__section c-search__main"},p.a.createElement("h4",{className:"c-search__section_header"},g&&Hn.t("Search for messages, files, and more",{fallbackHash:"8d886c0ba6f2b683daba5f19568a316226ce3e4c"}),_&&Hn.t("Something went wrong"),y&&o,k&&f,p.a.createElement("div",{className:"c-search__section_more_link","data-qa":"search_sort_toggle"},l)),n&&p.a.createElement(Fn.a,{size:"large"}),g&&p.a.createElement("p",null,Hn.t("To start your search, simply type into the box above.",{fallbackHash:"e0a09e2db4a36cd1de53ef2d911b8faa689b8983"})),_&&p.a.createElement("p",null,Hn.t("For some reason, Slack wasn\u2019t able to complete your search."),"\xa0",v&&p.a.createElement(Me.a,{"data-qa":"search-retry",onClick:c},Hn.t("Try again"))),y&&i,k&&i),h&&p.a.createElement("div",{className:"c-search__extras",ref:this.topScrollElementRef},p.a.createElement("div",{className:"c-search__section"},p.a.createElement("h4",{className:"c-search__section_header"},Hn.t("Filter by")),a)),!m&&p.a.createElement(qn,{onClick:this.scrollTop})))}}]),t}(d.Component);Gn.displayName="SearchResultsContainerBase",Gn.defaultProps={id:void 0,children:void 0,filterUI:void 0,numResults:void 0,emptyResultsTitle:void 0,sortDropdown:void 0,alertHeader:void 0,loading:!1,module:"unknown",errorType:U.e.None,secondaryView:void 0,setScrollPosition:j.a,onClickRefreshSearch:j.a,scrollPosition:0,userQuery:void 0,logInfo:j.a,usePrimarySearch:!1,telemeter:Oe.d};var Kn=Object(f.b)(function(e){return{logInfo:Object(R.a)({state:e}).info,usePrimarySearch:Object(_.a)(e),userQuery:Object(Dn.d)(e),secondaryView:Object(Ln.j)(e),telemeter:Object(Oe.c)({state:e})}},null,null,{withRef:!0})(Gn),Vn=n("sk9p"),zn=n.n(Vn),Yn=n("AjwY"),Qn=n("WD4z"),Xn=n("Atrf"),Jn=(n("YlHk"),new J.b("search")),Zn=(m.b.bool,m.b.func.isRequired,m.b.number,m.b.arrayOf(m.b.shape({id:m.b.string.isRequired}).isRequired),m.b.shape({id:m.b.string}),m.b.shape({track:m.b.func.isRequired}).isRequired,{featurePersSearchMsgLimitWarningI18N:!1,hiddenMessagesCount:void 0,hiddenUsers:[],currentUser:{}}),$n=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(I.a)(n,["getBannerData","handleClick"]),n.impressionClogged=!1,n}return u()(t,e),o()(t,[{key:"getBannerData",value:function(){var e=this.props,t=e.currentUser,n=void 0===t?{}:t,a=e.hiddenUsers,r=(void 0===a?[]:a).slice(0,3),i=void 0,o=[],s=0;return r.forEach(function(e){e.id===n.id?i=e:o.push(e),Object(xt.Z)(e)&&(s+=1)}),{currentUserToDisplay:i,otherUsersToDisplay:o,shouldDisplayAvatars:3===s}}},{key:"getFormattedMessagesCount",value:function(){var e=this.props.hiddenMessagesCount,t=e<1e4?Object(te.a)(e):Object(ne.a)(e,{precision:4,decimal_places:0,lowercase:!0});return p.a.createElement("span",{"data-qa":"banner_hidden_messages_message_count"},t)}},{key:"getClogStepVariantString",value:function(){var e=this.getBannerData(),t=e.currentUserToDisplay,n=e.shouldDisplayAvatars,a="";switch(this.props.hiddenUsers.length){case 0:a="0_users";break;case 1:a="1_user";break;case 2:a="2_users";break;case 3:a="3_users";break;default:a="more_than_3_users"}return t&&(a+="_incl_current"),n&&(a+="_with_avatars"),a}},{key:"clogImpression",value:function(){this.impressionClogged||(this.clog(vn.UiAction.IMPRESSION,vn.ElementType.BANNER,"banner"),this.impressionClogged=!0)}},{key:"clogClick",value:function(){this.clog(vn.UiAction.CLICK,vn.ElementType.LINK,"cta")}},{key:"clog",value:function(e,t,n){this.props.clogger.track(vn.EventId.GROWTH_PRICING,{contexts:{ui_context:{step:vn.UiStep.SEARCH_PANE,action:e,ui_component:vn.UiComponent.HIDDEN_MESSAGES_BANNER,ui_properties:{element_type:t,element_name:n,step_variant:this.getClogStepVariantString()}}}})}},{key:"handleClick",value:function(){this.clogClick(),this.props.goToPricingPlans()}},{key:"renderBannerMessage",value:function(e){var t=this,n=e.currentUserToDisplay,a=e.otherUsersToDisplay,r=this.props,i=r.featurePersSearchMsgLimitWarningI18N,o=r.hiddenMessagesCount,s=r.hiddenUsers;if(!i)return null;var l=a.map(function(e){var t=e.id;return p.a.createElement(Xn.a,{key:t,id:t,noLinking:!0})}),c=zn()(l,3),u=c[0],d=c[1],m=c[2],h=function(e){var n=e.tag,a=e.text;return"a"!==n?null:p.a.createElement(Me.a,{onClick:t.handleClick,"data-qa":"banner_hidden_messages_upgrade_cta"},a)},b=void 0;switch(s.length){case 0:b=Jn.rt("<a>Upgrade to a paid plan</a> to see <strong>{formattedHiddenMessagesCount} additional {hiddenMessagesCount, plural, =1 {message} other {messages}}</strong> that {hiddenMessagesCount, plural, =1 {matches} other {match}} your search.",{hiddenMessagesCount:o,formattedHiddenMessagesCount:this.getFormattedMessagesCount(),fallbackHash:"49cf70bf4860e256ac4ad7c39249c1d905e1278b"},h);break;case 1:b=n?Jn.rt("<a>Upgrade to a paid plan</a> to see <strong>{formattedHiddenMessagesCount} additional {hiddenMessagesCount, plural, =1 {message} other {messages}}</strong> that {hiddenMessagesCount, plural, =1 {matches} other {match}} your search.",{hiddenMessagesCount:o,formattedHiddenMessagesCount:this.getFormattedMessagesCount(),fallbackHash:"49cf70bf4860e256ac4ad7c39249c1d905e1278b"},h):Jn.rt("<a>Upgrade to a paid plan</a> to see <strong>{formattedHiddenMessagesCount} additional {hiddenMessagesCount, plural, =1 {message} other {messages}}</strong> from {user1Handle} that {hiddenMessagesCount, plural, =1 {matches} other {match}} your search.",{hiddenMessagesCount:o,formattedHiddenMessagesCount:this.getFormattedMessagesCount(),user1Handle:u,fallbackHash:"e0e00b306fcf1dc9be2f8968aba4c663a998fdd2"},h);break;case 2:b=n?Jn.rt("<a>Upgrade to a paid plan</a> to see <strong>{formattedHiddenMessagesCount} additional {hiddenMessagesCount, plural, =1 {message} other {messages}}</strong> that {hiddenMessagesCount, plural, =1 {matches} other {match}} your search, from {user1Handle} and yourself.",{hiddenMessagesCount:o,formattedHiddenMessagesCount:this.getFormattedMessagesCount(),user1Handle:u,fallbackHash:"db9c908e896007c4ca03a95d22a348bfdc3606b3"},h):Jn.rt("<a>Upgrade to a paid plan</a> to see <strong>{formattedHiddenMessagesCount} additional {hiddenMessagesCount, plural, =1 {message} other {messages}}</strong> that {hiddenMessagesCount, plural, =1 {matches} other {match}} your search, from {user1Handle} and {user2Handle}.",{hiddenMessagesCount:o,formattedHiddenMessagesCount:this.getFormattedMessagesCount(),user1Handle:u,user2Handle:d,fallbackHash:"f75fc3a0de5cbbd8192386c8f8dbad5c6aefc555"},h);break;case 3:b=n?Jn.rt("<a>Upgrade to a paid plan</a> to see <strong>{formattedHiddenMessagesCount} additional {hiddenMessagesCount, plural, =1 {message} other {messages}}</strong> that {hiddenMessagesCount, plural, =1 {matches} other {match}} your search, from {user1Handle}, {user2Handle}, and yourself.",{hiddenMessagesCount:o,formattedHiddenMessagesCount:this.getFormattedMessagesCount(),user1Handle:u,user2Handle:d,fallbackHash:"027a3831dd2785910794440ff4a2fdf825866666"},h):Jn.rt("<a>Upgrade to a paid plan</a> to see <strong>{formattedHiddenMessagesCount} additional {hiddenMessagesCount, plural, =1 {message} other {messages}}</strong> that {hiddenMessagesCount, plural, =1 {matches} other {match}} your search, from {user1Handle}, {user2Handle}, and {user3Handle}.",{hiddenMessagesCount:o,formattedHiddenMessagesCount:this.getFormattedMessagesCount(),user1Handle:u,user2Handle:d,user3Handle:m,fallbackHash:"0834aed47d2f532db9ac4251f198eb17d1e60de4"},h);break;default:b=n?Jn.rt("<a>Upgrade to a paid plan</a> to see <strong>{formattedHiddenMessagesCount} additional {hiddenMessagesCount, plural, =1 {message} other {messages}}</strong> that {hiddenMessagesCount, plural, =1 {matches} other {match}} your search, from {user1Handle}, {user2Handle}, yourself, and other teammates.",{hiddenMessagesCount:o,formattedHiddenMessagesCount:this.getFormattedMessagesCount(),user1Handle:u,user2Handle:d,fallbackHash:"1b18372df292c706b9c8e6b0344379fc91fb2cb4"},h):Jn.rt("<a>Upgrade to a paid plan</a> to see <strong>{formattedHiddenMessagesCount} additional {hiddenMessagesCount, plural, =1 {message} other {messages}}</strong> that {hiddenMessagesCount, plural, =1 {matches} other {match}} your search, from {user1Handle}, {user2Handle}, {user3Handle}, and other teammates.",{hiddenMessagesCount:o,formattedHiddenMessagesCount:this.getFormattedMessagesCount(),user1Handle:u,user2Handle:d,user3Handle:m,fallbackHash:"fe9326538241a04ce8b934d622e15e3cee334dc2"},h)}return p.a.createElement("div",{className:"p-hidden_messages_banner__text","data-qa":"banner_hidden_messages_text"},b)}},{key:"renderAvatars",value:function(e){var t=e.currentUserToDisplay,n=e.otherUsersToDisplay,a=(t?[].concat(ut()(n),[t]):n).map(function(e){var t=e.id;return p.a.createElement(je.c,{key:t,userId:t,ariaHidden:"true",size:36,isInteractive:!1,tabIndex:"-1",className:"p-hidden_messages_banner__avatar","data-qa":"banner_hidden_messages_avatar"})});return p.a.createElement("div",{className:"p-hidden_messages_banner__avatars","data-qa":"banner_hidden_messages_avatars"},a)}},{key:"render",value:function(){if(!(this.props.hiddenMessagesCount>0))return null;var e=this.getBannerData();return this.clogImpression(),p.a.createElement(Qn.a,{type:"custom",level:"warning",className:"p-hidden_messages_banner","data-qa":"banner_hidden_messages"},p.a.createElement("div",{className:"p-hidden_messages_banner__content"},e.shouldDisplayAvatars&&this.renderAvatars(e),this.renderBannerMessage(e)))}}]),t}(d.PureComponent);$n.displayName="HiddenMessagesBanner",$n.defaultProps=Zn;var ea=Object(f.b)(function(e){var t=Object(H.l)(e)||{from:[]},n=[];t.from.forEach(function(t){n.push(Object(ot.d)(e,t.id))});var a=Yn.h+"?ui_step="+vn.UiStep.SEARCH_PANE+"&entry_point=hidden_messages_banner";return{featurePersSearchMsgLimitWarningI18N:Object(N.m)(e,"feature_pers_search_msg_limit_warning_i18n"),goToPricingPlans:function(){return Object(X.R)(Object(q.d)(e),a)},currentUser:Object(ot.b)(e),hiddenUsers:n,hiddenMessagesCount:t.count,clogger:Object(yn.a)({state:e})}})($n),ta=new J.b("search"),na=(m.b.func.isRequired,m.b.func.isRequired,m.b.func.isRequired,m.b.func.isRequired,m.b.object.isRequired,m.b.object,m.b.object,m.b.func.isRequired,m.b.func.isRequired,m.b.func.isRequired,m.b.string.isRequired,m.b.func.isRequired,m.b.number.isRequired,m.b.func.isRequired,m.b.func.isRequired,m.b.func.isRequired,m.b.func,m.b.func.isRequired,m.b.bool.isRequired,m.b.func,m.b.object,m.b.func,m.b.oneOf(["HIDDEN_MESSAGES_BANNER","MESSAGE_LIMIT_BANNER",""]),m.b.bool,{results:{},uiState:{},logInfo:j.a,setTab:j.a,telemeter:Oe.d,openSearchFeedbackDialog:j.a,bannerType:"",featureFuzzyMatch:!1}),aa=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(I.a)(n,["pageForward","pageBack","jumpToMessage","jumpToFile","onSelectItem","onRepliesClick","onSeeFilesClick","setListRef","renderSortToggleMenu","onFeedbackClick","setScrollPosition"]),n.searchResultsContainerRef=p.a.createRef(),n.markSearchModuleRenderStart=Object(S.a)(function(){var t=n.props.results;Object(ie.f)("messages","messages",t&&t.pagination&&t.pagination.page||1,e.telemeter)},2e3,{leading:!0}),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.logTelemetry()}},{key:"componentDidUpdate",value:function(e){e.uiState.loading===this.props.uiState.loading&&e.uiState.error===this.props.uiState.error&&e.uiState.page===this.props.uiState.page||this.logTelemetry()}},{key:"onRepliesClick",value:function(e){var t=this,n=e.channelId,a=e.ts,r=e.permalink;this.props.logInfo("IMPROVED_SEARCH","Jumping to message replies. channel: "+n+" ts: "+a),this.props.openPermalink({permalink:r}).then(function(){return t.props.close()})}},{key:"onSelectItem",value:function(e,t){var n=this.getVisibleMessages()[t];if(n&&n.messages&&n.messages.length){var a=n.messages[0];this.jumpToMessage({permalink:a.permalink,teamId:this.props.currentTeam.id})}}},{key:"onSeeFilesClick",value:function(){this.props.setTab({tab:"files"})}},{key:"onFeedbackClick",value:function(){this.props.openSearchFeedbackDialog({module:"messages"})}},{key:"getVisibleMessages",value:function(){return this.props.results.items[this.props.uiState.page]}},{key:"setListRef",value:function(e){this.listEl=e}},{key:"setScrollPosition",value:function(e){this.props.setViewScrollPosition({view:"messages",position:e})}},{key:"makeNoResultsSuggestions",value:function(){return p.a.createElement("ul",null,p.a.createElement("li",null,ta.t("Using different keywords.")),p.a.createElement("li",null,ta.t("Checking for typos.")),p.a.createElement("li",null,ta.t("Adjusting your filters.")))}},{key:"makeNoResultsFragment",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=e?ta.t("Slack couldn\u2019t find any exact matches for your search. You may want to try\u2026"):ta.t("Slack couldn\u2019t find any messages related to your search. You may want to try\u2026"),n=p.a.createElement(d.Fragment,null,p.a.createElement("p",null," ",t," "),this.makeNoResultsSuggestions());return e?p.a.createElement(A.a,{enabled:["feature_fuzzy_match"]},n):n}},{key:"jumpToMessage",value:function(e){var t=this,n=e.teamId,a=e.permalink;this.props.logInfo("IMPROVED_SEARCH","Jumping to message. team: "+n+" permalink: "+a),this.props.openPermalink({permalink:a}).then(function(){return t.props.close()}).catch(function(){return t.props.logInfo("IMPROVED_SEARCH","FAILED:(")})}},{key:"jumpToFile",value:function(e,t){var n=t.file,a=t.iid,r=t.ts,i=t.channelId,o=t.userId,s=t.botId;this.props.logInfo("IMPROVED_SEARCH","Jumping to file. file: "+n.id),this.props.clogSearchFileClick({iid:a,ts:r,channelId:i,userId:o,botId:s,fileId:n.id}),this.props.previewFile({fileId:n.id}),this.props.close()}},{key:"logTelemetry",value:function(){if(!this.props.uiState.loading&&this.props.uiState.error===U.e.None){var e=this.getVisibleMessages();e&&this.props.telemeter.count("search_ui_messages_results_view_count",e.length)}}},{key:"pageForward",value:function(){this.listEl&&this.listEl.focus(),this.searchResultsContainerRef.current.getWrappedInstance().scrollTop(),this.props.logInfo("IMPROVED_SEARCH","Page forwards in search results"),this.pageSearchResults(1)}},{key:"pageBack",value:function(){this.listEl&&this.listEl.focus(),this.searchResultsContainerRef.current.getWrappedInstance().scrollTop(),this.props.logInfo("IMPROVED_SEARCH","Page backwards in search results"),this.pageSearchResults(-1)}},{key:"pageSearchResults",value:function(e){var t=this.props,n=t.results,a=t.uiState,r=Math.max(a.page+e,1);n.items[r]?this.props.setPageForModule({moduleType:"messages",page:r}):(this.props.logInfo("IMPROVED_SEARCH","Fetching more results to display on next page"),this.props.fetchSearchResultsByModule({module:"messages",reason:"search-messages-page",page:r}))}},{key:"shouldRenderBottomHiddenMessagesBanner",value:function(){var e=this.props,t=e.bannerType,n=e.uiState,a=this.getVisibleMessages()||[];return"HIDDEN_MESSAGES_BANNER"===t&&!n.loading&&a.length>10}},{key:"renderResults",value:function(){var e=this,t=this.props.uiState,n=[],a=[];return t.loading||(n=this.getVisibleMessages(),a=Object(E.a)(n,function(e,t){return t})||[]),p.a.createElement(xn,{ref:this.setListRef,ids:a,onSelectItem:this.onSelectItem,itemAriaLabel:function(t){return e.props.getMessageResultSummary(n[t])},renderItem:function(t){return p.a.createElement(et,C()({key:n[t].iid},n[t],{onMessageJump:e.jumpToMessage,onFileJump:e.jumpToFile,onRepliesClick:e.onRepliesClick}))}})}},{key:"renderSortToggleMenu",value:function(e){var t=this;return p.a.createElement(Z.f,e,p.a.createElement(Z.b,{key:"recent",label:ta.t("Most recent"),onSelected:function(){return t.props.setMessageSort({messageSort:U.d.recentMessages})}}),p.a.createElement(Z.b,{key:"relevant",label:ta.t("Most relevant"),onSelected:function(){return t.props.setMessageSort({messageSort:U.d.relevantMessages})}}))}},{key:"renderSortToggle",value:function(){var e=this.props.messageSort===U.d.recentMessages?ta.t("Most recent"):ta.t("Most relevant");return p.a.createElement(Z.e,{renderMenu:this.renderSortToggleMenu,position:"bottom-right",width:180,offsetX:0,offsetY:0},p.a.createElement($.c,null,e,p.a.createElement(ee.b,{type:"chevron-down",inline:!0})))}},{key:"renderHiddenMessagesBanner",value:function(){return this.props.uiState.loading?null:p.a.createElement(ea,null)}},{key:"renderMessageLimitBanner",value:function(){return this.props.uiState.loading?null:p.a.createElement(Sn,{type:"messages"})}},{key:"renderDebug",value:function(){var e=this.props,t=e.isDebugInfoVisible,n=e.results,a=t&&n.debug,r=a&&JSON.stringify(n.debug,null,2);return a&&p.a.createElement("div",{className:"c-search__debug"},p.a.createElement("h4",{className:"c-search__section_header"},"Solr debug info"),p.a.createElement("pre",{className:"c-search__debug_json"},r),p.a.createElement($.d,{className:"c-search__debug_copy",size:"small",type:"outline",onClick:function(){return Object(re.b)(r)}},"Copy to clipboard"))}},{key:"renderSearchResults",value:function(){var e=this.props,t=e.results,n=e.uiState,a=e.bannerType,r=e.featureFuzzyMatch,i=t&&t.pagination&&t.pagination.total_count||0,o=ae(i),s=t&&t.pagination&&t.pagination.page_count||0,l=s>1&&!n.loading,c=n.page||1;return p.a.createElement(d.Fragment,null,this.renderDebug(),"HIDDEN_MESSAGES_BANNER"===a&&this.renderHiddenMessagesBanner(),"MESSAGE_LIMIT_BANNER"===a&&this.renderMessageLimitBanner(),r&&this.makeNoResultsFragment(!0),r&&i>0&&p.a.createElement(A.a,{enabled:["feature_fuzzy_match"]},p.a.createElement("h4",{className:"c-search__section_header"},ta.rt("{totalItemCount, plural, =1 {{totalItemCountStr} related result} other {{totalItemCountStr} related results}}",{totalItemCount:i,totalItemCountStr:o}))),r&&i>0&&this.renderResults(),!r&&i>0&&this.renderResults(),!r&&i<=0&&this.makeNoResultsFragment(),this.shouldRenderBottomHiddenMessagesBanner()&&this.renderHiddenMessagesBanner(),!l&&p.a.createElement(tt.a,{className:i>0?"c-search__feedback_small":"c-search__feedback",onClick:this.onFeedbackClick}),p.a.createElement(rt,{visible:l,currentPageOffset:c,totalPageCount:s,onForward:this.pageForward,onBack:this.pageBack,onFeedbackClick:this.onFeedbackClick}))}},{key:"render",value:function(){var e=this.props,t=e.results,n=e.uiState,a=e.scrollPosition,r=e.featureFuzzyMatch;n.loading||this.markSearchModuleRenderStart();var i=t&&t.pagination&&t.pagination.total_count||0,o=r?0:i;return p.a.createElement(Kn,{id:"c-search__tab__messages",module:"messages",scrollPosition:a,loading:n.loading,errorType:n.error,setScrollPosition:this.setScrollPosition,filterUI:p.a.createElement(_n,null),numResults:o,emptyResultsTitle:ta.t("No results",{fallbackHash:"09e2b0361ef96f7c05039903cace2ab512999989"}),sortDropdown:this.renderSortToggle(),onClickRefreshSearch:this.props.onClickRefreshSearch,ref:this.searchResultsContainerRef},this.renderSearchResults())}}]),t}(d.PureComponent);aa.displayName="MessageView",aa.defaultProps=na;var ra={clogSearchFileClick:function(){return F.e.apply(void 0,arguments)},previewFile:function(){return V.c.apply(void 0,arguments)},displayModelOrViewById:G.a,fetchSearchResultsByModule:function(){return D.d.apply(void 0,arguments)},setMessageSort:B,setPageForModule:function(){return P.s.apply(void 0,arguments)},setViewScrollPosition:function(){return P.H.apply(void 0,arguments)},showThread:function(){return V.l.apply(void 0,arguments)},setTab:Y,close:function(){return K.a.apply(void 0,arguments)},openPermalink:function(){return ke.a.apply(void 0,arguments)},openSearchFeedbackDialog:function(){return D.p.apply(void 0,arguments)}},ia=Object(f.b)(function(e){var t=Object(q.d)(e),n=Object(H.q)(e,{module:"messages"})||{items:{}},a=Object(g.i)(e,"messages"),r=Object(M.c)(e),i=Object(H.q)(e,{module:"files"})||{items:{}},o=i.pagination&&i.pagination.total_count,s=Object(ye.b)(e),l=(Object(H.l)(e)||{}).count,c=void 0;return Object(N.m)(e,"feature_pers_search_msg_limit_warning_i18n")?void 0!==l&&(l>0&&!Object(Q.O)()&&"treatment"===Object(W.c)(e,"pers_search_msg_limit_warning")?c="HIDDEN_MESSAGES_BANNER":Object(X.B)(t)&&(c="MESSAGE_LIMIT_BANNER")):Object(X.B)(t)&&(c="MESSAGE_LIMIT_BANNER"),{results:n,uiState:a,messageSort:r,currentTeam:t,numOfFileResults:o,getMessageResultSummary:function(t){return s?function(e,t){if(!t)return null;var n=t.team,a=ge(e,t.channel),r=t.messages||[],i=Object(q.d)(e),o=null;if(n&&Object(he.a)(n)&&i.id!==n){var s=Object(q.i)(e,n||i.id);o=Object(X.f)(s)}var l=void 0,c=Object(be.x)(e,a,{publicChannelIncludeHashSign:!1,imIncludeAtSign:!1}),u=ce(r),d=r.length,p=i&&i.id!==n&&Object(he.a)(n);return l=Object(be.hb)(a)?_e.t("{count, plural, =1 {Direct} other {# messages from a direct}} message with {conversationName} on {date}:",{conversationName:c,date:u,count:d}):Object(be.pb)(a)?_e.t("{count, plural, =1 {Group} other {# messages from group}} message with {conversationName} on {date}:",{conversationName:c,date:u,count:d}):Object(be.yb)(a)?_e.t("{count, plural, =1 {From} other {# messages in}} {conversationName}, a pending shared channel, on {date}:",{conversationName:c,date:u,count:d,fallbackHash:"24663e65e2ac4dc269e630e2237e65674bc121fd"}):Object(be.ab)(a)?_e.t("{count, plural, =1 {From} other {# messages in}} {conversationName}, a shared channel, on {date}:",{conversationName:c,date:u,count:d}):p?_e.t("{count, plural, =1 {From} other {# messages in}} {conversationName} in {workspaceName} on {date}:",{conversationName:c,date:u,count:d,workspaceName:o}):Object(be.vb)(a)?_e.t("{count, plural, =1 {From} other {# messages in}} {conversationName}, a shared channel, on {date}:",{conversationName:c,date:u,count:d}):_e.t("{count, plural, =1 {From} other {# messages in}} {conversationName} on {date}:",{conversationName:c,date:u,count:d}),(l=Object(oe.a)(l))+" "+r.map(function(t){return Object(se.a)({day:{ts:t.ts,isFirstDay:!1,isLastDay:!1},name:Object(ue.a)(e,{userId:t.user}),time:Object(me.a)(t.ts,{do24hrTime:Object(pe.j)(e,"time24"),includeSeconds:!1}),text:Object(de.a)(e,t.text.replace(ve,"")),reactionCount:t.reactions&&t.reactions.length||0,replyCount:t.reply_count||0,isStarred:t.is_starred,isPinned:!1,isFirstMsgForDay:!1,isLastMsgForDay:!1,isFirstUnreadMsg:!1})}).join(". ")+"."}(e,t):null},logInfo:Object(R.a)({state:e}).info,isDebugInfoVisible:Object(g.g)(e),scrollPosition:Object(g.p)(e).messages,telemeter:Object(Oe.c)({state:e}),bannerType:c,featureFuzzyMatch:T(e,n)}},ra)(aa),oa=n("GTwG"),sa=n("vP1t"),la=new J.b("search"),ca=/[\ue000\ue001]/g;var ua=new J.b("search"),da=(m.b.func,m.b.func,m.b.func,m.b.string,m.b.func,m.b.object,m.b.func,m.b.oneOf(Object(dt.a)(U.c)),m.b.object,m.b.func,m.b.bool,m.b.func,m.b.func,m.b.func,m.b.number,m.b.func,m.b.func,m.b.func,m.b.object,m.b.func,{clogFileClick:j.a,clogSearchFileClick:j.a,close:j.a,error:"",fetchSearchResultsByModule:j.a,fileResults:{},fileSearchSortChanged:j.a,fileSort:U.c.relevant,fileState:{},getFileResultSummary:j.a,loading:!1,logInfo:j.a,onClickRefreshSearch:j.a,previewFile:j.a,scrollPosition:0,setPageForModule:j.a,setTab:j.a,setViewScrollPosition:j.a,telemeter:Oe.d,openSearchFeedbackDialog:j.a}),pa=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(I.a)(n,["pageForward","pageBack","pageSearchResults","setListRef","onFileClick","onSelectItem","onSeeMessagesClick","setScrollPosition","clogLinkClick","onFeedbackClick"]),n.searchResultsContainerRef=p.a.createRef(),n.markSearchModuleRenderStart=Object(S.a)(function(){var t=n.props.fileResults;Object(ie.f)("files","score",t&&t.pagination&&t.pagination.page||1,e.telemeter)},2e3,{leading:!0}),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.logTelemetry()}},{key:"componentDidUpdate",value:function(e){e.loading===this.props.loading&&e.error===this.props.error&&e.fileState.page===this.props.fileState.page||this.logTelemetry()}},{key:"onFileClick",value:function(e,t){var n=t.file,a=t.index;this.props.logInfo("IMPROVED_SEARCH","Jumping to file. file: "+n.id),this.props.clogSearchFileClick({iid:n.iid,userId:n.user,fileId:n.id,position:a}),this.props.previewFile({fileId:n.id}),this.props.close()}},{key:"onSelectItem",value:function(e,t){var n=this.getVisibleFiles()[t];this.onFileClick(e,{file:n,index:t})}},{key:"onSeeMessagesClick",value:function(){this.props.setTab({tab:"messages"})}},{key:"onFeedbackClick",value:function(){this.props.openSearchFeedbackDialog({module:"files"})}},{key:"setListRef",value:function(e){this.listEl=e}},{key:"setScrollPosition",value:function(e){this.props.setViewScrollPosition({view:"files",position:e})}},{key:"getVisibleFiles",value:function(){return this.props.fileResults.items[this.props.fileState.page]||[]}},{key:"clogLinkClick",value:function(e,t){this.props.clogFileClick({file:e,payload:t})}},{key:"logTelemetry",value:function(){if(!this.props.loading&&this.props.error===U.e.None){var e=this.getVisibleFiles();e&&this.props.telemeter.count("search_ui_files_results_view_count",e.length)}}},{key:"pageForward",value:function(){this.listEl&&this.listEl.focus(),this.searchResultsContainerRef.current.getWrappedInstance().scrollTop(),this.props.logInfo("IMPROVED_SEARCH","Page forwards in search results"),this.pageSearchResults(1)}},{key:"pageBack",value:function(){this.listEl&&this.listEl.focus(),this.searchResultsContainerRef.current.getWrappedInstance().scrollTop(),this.props.logInfo("IMPROVED_SEARCH","Page backwards in search results"),this.pageSearchResults(-1)}},{key:"pageSearchResults",value:function(e){var t=this.props,n=t.fileState,a=t.fileResults,r=Math.max(n.page+e,1);a.items[r]?this.props.setPageForModule({moduleType:"files",page:r}):this.props.fetchSearchResultsByModule({module:"files",sort:"score",reason:"search-files-page",page:r})}},{key:"renderFiles",value:function(){var e=this,t=this.props,n=t.fileState,a=t.fileResults,r=[],i=[];return a.items[n.page||1]&&(this.markSearchModuleRenderStart(),i=(r=this.getVisibleFiles()).map(function(e,t){return t})),p.a.createElement(xn,{ref:this.setListRef,ids:i,onSelectItem:this.onSelectItem,renderItem:function(t){return p.a.createElement(sa.a,{key:r[t].id,index:t,file:r[t],onClick:e.onFileClick,clogLinkClick:function(t){e.clogLinkClick(r[0],t)}})},itemAriaLabel:function(t){return e.props.getFileResultSummary(r[t])}})}},{key:"renderSearchResults",value:function(){var e=this.props,t=e.fileState,n=e.fileResults,a=e.loading,r=n&&n.pagination&&n.pagination.total_count||0,i=n&&n.pagination&&n.pagination.page_count||0,o=i>1&&!this.props.loading,s=t.page||1;return p.a.createElement(d.Fragment,null,!a&&p.a.createElement(Sn,{type:"files"}),r>0&&this.renderFiles(),r<=0&&p.a.createElement(d.Fragment,null,p.a.createElement("p",null,ua.t("Slack couldn\u2019t find any files related to your search. You may want to try\u2026")),p.a.createElement("ul",null,p.a.createElement("li",null,ua.t("Using different keywords.")),p.a.createElement("li",null,ua.t("Checking for typos.")),p.a.createElement("li",null,ua.t("Adjusting your filters.")))),!o&&p.a.createElement(tt.a,{className:r>0?"c-search__feedback_small":"c-search__feedback",onClick:this.onFeedbackClick}),p.a.createElement(rt,{visible:o,currentPageOffset:s,totalPageCount:i,onForward:this.pageForward,onBack:this.pageBack,onFeedbackClick:this.onFeedbackClick}))}},{key:"render",value:function(){var e=this;this.props.loading||this.markSearchModuleRenderStart();var t=this.props,n=t.scrollPosition,a=t.loading,r=t.fileResults,i=t.fileSort,o=r&&r.pagination&&r.pagination.total_count||0;return p.a.createElement(Kn,{id:"c-search__tab_file",module:"files",scrollPosition:n,loading:a,setScrollPosition:this.setScrollPosition,filterUI:p.a.createElement(_n,{showFileFilters:!0}),numResults:o,emptyResultsTitle:ua.t("No results",{fallbackHash:"7cded9ea830e64e87819b27ea57209379f4858af"}),errorType:this.props.error,onClickRefreshSearch:this.props.onClickRefreshSearch,ref:this.searchResultsContainerRef,sortDropdown:p.a.createElement(Z.e,{"data-qa":"file_sort_toggle",renderMenu:function(t){var n=t.onTriggerClose;return p.a.createElement(Z.f,null,p.a.createElement(Z.b,{"data-qa-sort":U.c.recent,onSelected:function(){e.props.fileSearchSortChanged({sort:U.c.recent}),n()}},ua.t("Most recent")),p.a.createElement(Z.b,{"data-qa-sort":U.c.relevant,onSelected:function(){e.props.fileSearchSortChanged({sort:U.c.relevant}),n()}},ua.t("Most relevant")))},position:"bottom-right",width:180,offsetX:0,offsetY:0},p.a.createElement($.c,{"data-qa":"file_sort_selection"},i===U.c.recent&&ua.t("Most recent"),i===U.c.relevant&&ua.t("Most relevant"),p.a.createElement(ee.b,{type:"chevron-down",inline:!0})))},this.renderSearchResults())}}]),t}(d.PureComponent);pa.displayName="FileViewBase",pa.defaultProps=da;var ma={setPageForModule:function(){return P.s.apply(void 0,arguments)},setViewScrollPosition:function(){return P.H.apply(void 0,arguments)},setTab:function(){return Y.apply(void 0,arguments)},fetchSearchResultsByModule:function(){return D.d.apply(void 0,arguments)},clogSearchFileClick:function(){return F.e.apply(void 0,arguments)},clogFileClick:function(){return oa.a.apply(void 0,arguments)},previewFile:function(){return V.c.apply(void 0,arguments)},close:function(){return K.a.apply(void 0,arguments)},fileSearchSortChanged:function(){return vt.apply(void 0,arguments)},openSearchFeedbackDialog:function(){return D.p.apply(void 0,arguments)}},ha=Object(f.b)(function(e){var t=Object(H.q)(e,{module:"files"})||{items:[]},n=Object(g.i)(e,"files"),a=Object(H.q)(e,{module:"messages"})||{items:{}},r=a.pagination&&a.pagination.total_count,i=Object(ye.b)(e);return{fileResults:t,fileState:n,numOfMessageResults:r,getFileResultSummary:function(t){return i?function(e,t){if(!t)return null;var n=t.pretty_type,a=t.name,r=t.timestamp,i=t.user,o=Object(le.k)(Object(le.n)(r,{returnMoment:!0}),{shortenMonth:!1,excludeYear:Object(le.i)(r)});return Object(oe.a)(la.t("{type} file \u201c{fileName}\u201d shared by {user} on {date}",{type:n,fileName:a.replace(ca,""),user:Object(ue.a)(e,{userId:i}),date:o}))}(e,t):null},scrollPosition:Object(g.p)(e).files,loading:n&&n.loading,error:n&&n.error,logInfo:Object(R.a)({state:e}).info,fileSort:Object(mt.a)(e),telemeter:Object(Oe.c)({state:e})}},ma)(pa),ba=n("1myf"),fa=n("K7TJ"),ga=n("Z7Ay"),_a=n("ynxK"),va=n("qafc"),ya=n("Qrgz"),ka=n("ns4K"),Oa=n("S3eg"),Ca=n("CUc0"),Ea=n("G4Tr"),ja=new J.b("search");var Sa=n("x4bP"),Ia=n("lek6"),wa=n("RAhH"),Na=n("qkTT"),Ta=n("xE6W"),Aa=n("Yujr"),Ra=n("4aLn"),Pa=(n("PIS5"),new J.b("search")),Ma=(m.b.object.isRequired,m.b.string.isRequired,m.b.string,m.b.string.isRequired,m.b.string,m.b.string,m.b.number.isRequired,m.b.string,m.b.func,m.b.func,m.b.func,m.b.bool,m.b.bool,m.b.string,m.b.bool,m.b.string,m.b.object,m.b.object,{joinState:"",leaveState:"",justification:null,onClickLeave:j.a,onClickJoin:j.a,onClickChannel:j.a,canJoinChannel:!0,canLeaveChannel:!0,canLeaveChannelReason:"",channelPreviousName:null,useChannelEntity:!1,iid:"unknown",logger:{error:j.a},telemeter:{count:j.a}}),xa=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(I.a)(n,["onFocus","onBlur","onClickJoin","onClickLeave","onActionButtonFocus","onActionButtonBlur","onActionsMouseEnter","onActionsMouseLeave","onInteractionButtonClick","onInteractionButtonFocus","onInteractionButtonBlur"]),n.state={didCatch:!1,hasFocus:!1,hasActionFocus:!1,hasActionHover:!1},n.interactionTooltipRef=p.a.createRef(),n.rootRef=p.a.createRef(),n.hasRenderedNonexistentChannel=!1,n}return u()(t,e),o()(t,[{key:"onFocus",value:function(){this.setState(function(){return{hasFocus:!0}})}},{key:"onBlur",value:function(){this.setState(function(){return{hasFocus:!1}})}},{key:"onInteractionButtonClick",value:function(e){e.preventDefault(),e.stopPropagation()}},{key:"onInteractionButtonFocus",value:function(){this.interactionTooltipRef.current&&this.interactionTooltipRef.current.showTip()}},{key:"onInteractionButtonBlur",value:function(){this.interactionTooltipRef.current&&this.interactionTooltipRef.current.hideTip()}},{key:"onActionButtonFocus",value:function(e){this.setState(function(){return{hasActionFocus:!0}}),e.target.parentNode.scrollTop=0}},{key:"onActionButtonBlur",value:function(){this.setState(function(){return{hasActionFocus:!1}})}},{key:"onActionsMouseEnter",value:function(){this.setState(function(){return{hasActionHover:!0}})}},{key:"onActionsMouseLeave",value:function(){this.setState(function(){return{hasActionHover:!1}})}},{key:"onClickJoin",value:function(e){var t=this;this.props.onClickJoin(e).then(function(){t.updateFocusState()})}},{key:"onClickLeave",value:function(e){var t=this;this.props.onClickLeave(e).then(function(){t.updateFocusState()})}},{key:"componentDidCatch",value:function(e,t){this.props.telemeter.count("search_ui_channels_result_channel_render_error"),this.props.logger.error("IMPROVED_SEARCH","Error caught by ChannelSearchResult "+t.componentStack,e)}},{key:"updateFocusState",value:function(){var e=this;this.rootRef&&this.rootRef.current&&this.setState(function(){return{hasFocus:e.rootRef.current.contains(document.activeElement)}})}},{key:"trackNonExistentChannelRender",value:function(){this.hasRenderedNonexistentChannel||(this.hasRenderedNonexistentChannel=!0,this.props.telemeter.count("search_channels_nonexistent_channel_rendered",1),this.props.logger.error("Channel search displayed nonexistent channel",{channelId:this.props.channel.id,iid:this.props.iid},{subtype:"search_channels"}))}},{key:"renderError",value:function(){var e=this.props.onClickChannel;return p.a.createElement("div",{className:"c-channel_search_result","data-qa":"channel_search_result"},p.a.createElement("div",{role:"presentation",onClick:e},p.a.createElement("div",{className:"c-channel_search_result__channel"},p.a.createElement("div",{className:"c-channel_search_result__name_error"},p.a.createElement(Ta.a,{type:"unknown"})),p.a.createElement("div",null,Pa.t("For some reason, Slack wasn\u2019t able to fetch info about this channel.")))))}},{key:"render",value:function(){if(this.state.didCatch)return this.renderError();var e=this.props,t=e.channel,n=e.channelTeamName,a=e.channelPreviousName,r=e.memberCount,i=e.joinState,o=e.leaveState,s=e.justification,l=e.onClickChannel,c=e.useChannelEntity,u=Pa.t("Required"),d=Pa.t("Archived"),m=Pa.t("Can\u2019t leave"),h=Pa.t("Another workspace"),f=Pa.t("Can\u2019t leave"),g=Pa.t("Your organization requires everyone to be in this channel."),_=Pa.t("You can\u2019t join an archived channel, but you can view and search its contents."),v=Pa.t("To join this channel, you\u2019ll need to switch to the {channelTeamName} workspace.",{channelTeamName:n}),y=Pa.t("To leave this channel, you\u2019ll need to switch to the {channelTeamName} workspace.",{channelTeamName:n}),k=Pa.t("For some reason, you can\u2019t currently change your membership for {channelName}.",{channelName:this.props.channelName}),O=Pa.t("As a guest, you can\u2019t leave the channel you were invited to."),C=Pa.t("As a guest, you need to be in at least one channel."),E=Object(be.nb)(t),j="loading"===i,S="loading"===o,I=E&&this.props.canLeaveChannel,w=null,N=null;if(E&&!I){switch(this.props.canLeaveChannelReason){case ya.b.LAST_MEMBER:break;case ya.b.USER_IS_RESTRICTED:w=m,N=O;break;case ya.b.USER_IS_RESTRICTED_LAST_CHANNEL:case ya.b.USER_IS_ULTRA_RESTRICTED:w=m,N=C;break;case ya.b.CANT_LEAVE_GENERAL:case ya.b.CANT_LEAVE_MANDATORY_SHARED_CHANNEL:w=u,N=g;break;case ya.b.USER_NOT_FOUND:case ya.b.CHANNEL_NOT_FOUND:default:w=f,N=k}Object(be.cb)(t)&&(w=h,N=y)}else Object(be.X)(t)?(w=d,N=_):Object(be.cb)(t)?E?(w=h,N=y):(w=h,N=v):E||this.props.canJoinChannel||(w=f,N=k);var T=!Object(be.Nb)(t)&&w&&N,A=!(Object(be.Nb)(t)||w&&N),R=Object(be.rb)(t);return R?(this.trackNonExistentChannelRender(),this.renderError()):p.a.createElement("div",{className:b()("c-channel_search_result",{"c-channel_search_result--focused":this.state.hasFocus,"c-channel_search_result--show_suffix":!(this.state.hasActionFocus||this.state.hasActionHover),"c-channel_search_result--can_leave":I}),ref:this.rootRef,onFocus:this.onFocus,onBlur:this.onBlur,"data-qa":"channel_search_result"},p.a.createElement("div",{role:"presentation",onClick:l},!R&&(c?p.a.createElement(Aa.a,{className:"c-channel_search_result__channel",channel:t,bestFormerName:a,onClick:l,inlineNameSuffix:Pa.t("View channel"),nameSuffix:T&&p.a.createElement("div",{className:"c-channel_search_result__inaction_label","data-qa":"channel_search_result_inaction_label"},p.a.createElement(wa.c,{tip:N,ref:this.interactionTooltipRef},p.a.createElement($.c,{"aria-disabled":"true",className:"c-channel_search_result__inaction_label_button",onClick:this.onInteractionButtonClick,onFocus:this.onInteractionButtonFocus,onBlur:this.onInteractionButtonBlur},w," ",p.a.createElement(ee.b,{type:"info-circle",size:"inherit"})))),showUnreadBadge:!0,metadata:p.a.createElement("div",{className:"c-channel_search_result__metadata","data-qa":"channel_search_result_metadata"},Pa.t("{count, plural, =1 {# member} other {# members}}",{count:r}),s&&p.a.createElement(p.a.Fragment,null,p.a.createElement("span",{className:"c-channel_search_result__vline"}),p.a.createElement(ee.b,{type:"sparkles-filled",size:"inherit",className:"c-channel_search_result__justification_icon"})," ",p.a.createElement(Ia.a,{className:"c-channel_search_result__justification",text:s,emojiSize:Na.a.MEDIUM,showTooltips:!1,noHighlights:!0})))}):p.a.createElement(Ra.a,{size:"medium",className:"c-channel_search_result__channel",channel:t,bestFormerName:a,onClick:l,inlineNameSuffix:Pa.t("View channel"),nameSuffix:T&&p.a.createElement("div",{className:"c-channel_search_result__inaction_label","data-qa":"channel_search_result_inaction_label"},p.a.createElement(wa.c,{tip:N,ref:this.interactionTooltipRef},p.a.createElement($.c,{"aria-disabled":"true",className:"c-channel_search_result__inaction_label_button",onClick:this.onInteractionButtonClick,onFocus:this.onInteractionButtonFocus,onBlur:this.onInteractionButtonBlur},w," ",p.a.createElement(ee.b,{type:"info-circle",size:"inherit"})))),showUnreadBadge:!0,metadata:p.a.createElement("div",{className:"c-channel_search_result__metadata","data-qa":"channel_search_result_metadata"},Pa.t("{count, plural, =1 {# member} other {# members}}",{count:r}),s&&p.a.createElement(p.a.Fragment,null,p.a.createElement("span",{className:"c-channel_search_result__vline"}),p.a.createElement(ee.b,{type:"sparkles-filled",size:"inherit",className:"c-channel_search_result__justification_icon"})," ",p.a.createElement(Ia.a,{className:"c-channel_search_result__justification",text:s,emojiSize:Na.a.MEDIUM,showTooltips:!1,noHighlights:!0})))}))),A&&p.a.createElement("div",{className:"c-channel_search_result__actions","data-qa":"channel_search_result_actions",onMouseEnter:this.onActionsMouseEnter,onMouseLeave:this.onActionsMouseLeave},p.a.createElement($.b,{type:"danger",className:"c-channel_search_result__action_leave","data-qa":"leave-channel",loading:S,onClick:this.onClickLeave,onFocus:this.onActionButtonFocus,onBlur:this.onActionButtonBlur},S?Pa.t("Leaving..."):Pa.t("Leave")),p.a.createElement("div",{className:b()("c-button","c-button--medium","c-button--primary","c-channel_search_result__joined_indicator")},Pa.t("Joined")),p.a.createElement($.b,{type:"outline-primary",className:"c-channel_search_result__action_join","data-qa":"join-channel",loading:j,onClick:this.onClickJoin,onFocus:this.onActionButtonFocus,onBlur:this.onActionButtonBlur},j?Pa.t("Joining..."):Pa.t("Join")),p.a.createElement("div",{className:"c-button c-button--medium c-button--primary c-channel_search_result__width_placeholder"},Pa.t("Joined")),p.a.createElement("div",{className:"c-button c-button--medium c-button--outline-primary c-channel_search_result__width_placeholder"},Pa.t("Join")),p.a.createElement("div",{className:"c-button c-button--medium c-button--danger c-channel_search_result__width_placeholder"},Pa.t("Leave")),p.a.createElement($.b,{type:"danger",className:"c-channel_search_result__width_placeholder",loading:!0,role:"presentation"},Pa.t("Leaving...")),p.a.createElement($.b,{type:"outline-primary",className:"c-channel_search_result__width_placeholder",loading:!0,role:"presentation"},Pa.t("Joining..."))))}}],[{key:"getDerivedStateFromError",value:function(){return{didCatch:!0}}}]),t}(p.a.Component);xa.displayName="ChannelSearchResult",xa.defaultProps=Ma;var Fa=Object(f.b)(function(e,t){var n=t.channel,a=t.channelData,r=C()({},n,{name:a.name,purpose:a.purpose}),i=Object(ya.j)(e,a.id),o=Object(q.d)(e);return{useChannelEntity:"channel_search_new_entity"===Object(W.c)(e,"channel_search_new_entity"),channel:Object(be.Nb)(n)?n:r,channelName:Object(be.x)(e,n),channelPreviousName:a.previous_name,channelTeamName:Object(X.f)(Object(be.cb)(n)?Object(q.i)(e,Object(be.Zb)(e,n)):o),isMember:Object(be.cb)(n)?Object(be.nb)(n):a.is_member,memberCount:a.member_count,justification:a.justification,joinState:Object(g.a)(e,a.id),leaveState:Object(g.b)(e,a.id),canJoinChannel:Object(ya.f)(e,a.id),canLeaveChannel:i.ok,canLeaveChannelReason:i.reason,logger:Object(R.a)({state:e}),telemeter:Object(Oe.c)({state:e})}})(xa),La=(m.b.shape({type:m.b.oneOf(Object(dt.a)(U.a)),teamId:m.b.string,teamDisplayName:m.b.string}),m.b.shape({state:m.b.oneOf(["ready","loading","error"]).isRequired,teams:m.b.arrayOf(m.b.shape({id:m.b.string.isRequired,name:m.b.string.isRequired})).isRequired}),m.b.arrayOf(m.b.string),m.b.arrayOf(m.b.string),n("YEIV")),Da=n.n(La),Ua=n("BeL+"),Ba=n("wfE8"),qa=Object(x.b)("Channel/people search: fetch shared teams",function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).reason,a=Object(g.r)(t());return"ready"===a.state&&a.refreshed<=Date.now()-36e5||"error"===a.state?(e(Object(P.C)()),e(Object(Ba.n)({reason:n})).then(function(n){if(!n.ok)throw new Error(n);var a=Object(Ua.a)(n.channels.map(function(e){return e.team.id})),r=t(),i=Da()({},Object(st.b)(r),!0);Object(lt.d)(r)&&(i[Object(st.a)(r)]=!0,Object(q.a)(r).forEach(function(e){i[e.id]=!0}));var o=a.filter(function(e){return!i[e]});e(Object(P.D)({teamIds:o})),e(Object(P.j)({teamIds:o.slice(0,3)})),e(Object(P.v)({teamIds:o.slice(0,3)}))}).catch(function(){e(Object(P.B)())})):Promise.resolve()});qa.meta={name:"fetchSharedTeams",key:"actionsUniversalSearchFetchSharedTeamsFetchSharedTeams",description:"Channel/people search: fetch shared teams"},qa.propTypes={reason:m.b.string};var Ha=Object(x.b)("Channel search filter select is opened",function(e){return e(qa({reason:"channel_search_open"}))});Ha.meta={name:"channelSearchOpened",key:"actionsUniversalSearchChannelSearchOpenedChannelSearchOpened",description:"Channel search filter select is opened"},Ha.propTypes=null;var Wa=n("hE2u"),Ga=new J.b("search"),Ka=(m.b.func.isRequired,m.b.func,m.b.func,{sharedTeams:{state:"ready",teams:[]},filters:[],filterSuggestions:[],clogSearchFilterAdded:j.a,clogSearchFilterRemoved:j.a}),Va=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(I.a)(n,["loadOptions","filterOptions","renderOption"]),n}return u()(t,e),o()(t,[{key:"onOrgFilterChange",value:function(e,t){var n=!this.props.filters.includes(e);n?this.props.clogSearchFilterAdded({filter_channel_team:e,filter_position:t}):this.props.clogSearchFilterRemoved({filter_channel_team:e,filter_position:t}),this.props.toggleSearchOrgFilter({teamId:e,value:n})}},{key:"loadOptions",value:function(e){var t=this.props.sharedTeams,n=new Wa.b(e);return Promise.resolve({options:Object(ba.a)(t.teams.map(function(t){return{value:t.id,score:0===e.length?0:n.normalizeAndScore(Object(X.f)(t))}}),"score")})}},{key:"filterOptions",value:function(e,t){var n=this.props.filters;return t.filter(function(e){return isFinite(e.score)&&!n.includes(e.value)})}},{key:"renderOption",value:function(e){var t=this.props.filters,n=e.value;return p.a.createElement(d.Fragment,null,p.a.createElement(Vt.b,{id:n,size:18,ariaHidden:"true",tabIndex:"-1"})," ",p.a.createElement("span",{className:"no_wrap overflow_ellipsis padding_left_50"},p.a.createElement(zt.a,{bold:t.includes(n),id:n})))}},{key:"render",value:function(){var e=this,t=this.props,n=t.sharedTeams,a=t.filters,r=t.filterSuggestions,i="loading"===n.state,o=n.teams&&n.teams.length>0;if(i||!o)return null;var s=r.map(function(e){return{value:e,checked:a.includes(e)}});return p.a.createElement($t,{title:Ga.t("External organizations")},p.a.createElement(Gt,{checkboxName:"external_org",placeholderText:Ga.t("Enter an external organization"),showMoreOptionsAriaLabel:Ga.t("More external organizations to filter by"),loadOptions:this.loadOptions,renderVisibleOption:this.renderOption,renderOption:this.renderOption,visibleOptions:s,onOptionChange:function(t){e.onOrgFilterChange(t.value,s.indexOf(t))},onOptionAdd:function(t){e.onOrgFilterChange(t.value,null)},filterOptions:this.filterOptions}))}}]),t}(d.PureComponent);Va.displayName="SearchOrgFilter";var za=Va;Va.defaultProps=Ka;n("a001");var Ya=new J.b("search"),Qa=function(e){function t(){r()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onChange=e.onChange.bind(e),e}return u()(t,e),o()(t,[{key:"onChange",value:function(e){this.props.onChannelTypeChange({type:e.value})}},{key:"render",value:function(){var e=this,t=this.props.sharedTeams,n=["all","private","archived"];"ready"===t.state&&t.teams.length>1&&n.push("shared");var a={all:Ya.t("All channels"),private:Ya.t("Private channels"),archived:Ya.t("Archived channels"),shared:Ya.t("Shared channels")},r=n.map(function(e){return{label:a[e],value:e}}),i=r.find(function(t){return t.value===e.props.channelType.type});return p.a.createElement(cn.a,{width:"100%",selectId:"channel_filter_type",options:r,selectedOption:i,onOptionSelected:this.onChange})}}]),t}(d.Component);Qa.displayName="ChannelsFilterChannelType";var Xa=Qa;Qa.defaultProps={channelType:{type:U.a.all},sharedTeams:{state:"ready",teams:[]},onChannelTypeChange:j.a};var Ja=new J.b("search");function Za(e){var t=e.filterWorkspaceOnly,n=e.currentTeam;return p.a.createElement("label",{className:b()("p-search_filter__checkbox_label",{"p-search_filter__checkbox_label--selected":t}),htmlFor:"search-channel-filter-workspace-only"},Ja.rt("Only search {currentTeamNameAndIcon}",{fallbackHash:"b326da02faf635a430ceb2bda81e5803542e7b21",currentTeamNameAndIcon:p.a.createElement(d.Fragment,null,p.a.createElement(Vt.b,{className:"p-search_filter__workspace_only_team_icon",team:n,size:18})," ",p.a.createElement(zt.a,{id:n.id,bold:t}))}),p.a.createElement("input",{type:"checkbox",className:"flex_shrink_none",checked:t,onChange:function(t){return e.checkOnlySearchWorkspace(t)},id:"search-channel-filter-workspace-only"}))}Za.displayName="SearchLimitTeamFilterCheckbox",Za.defaultProps={filterWorkspaceOnly:j.a,checkOnlySearchWorkspace:j.a};var $a=Za,er=new J.b("search"),tr=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(I.a)(n,["onOnlySearchWorkspaceChange","onHideMemberChannelsChange","onChannelTypeChange","onSearchLimitTeamFilterDropdownChange"]),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.onChannelSearchOpened()}},{key:"onChannelTypeChange",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).type;this.props.clogSearchFilterAdded({filter_channel_type:e}),this.props.setChannelSearchFilterType({type:e})}},{key:"onOnlySearchWorkspaceChange",value:function(e){e.target.checked?this.props.clogSearchFilterAdded({filter_other:"workspace_only"}):this.props.clogSearchFilterRemoved({filter_other:"workspace_only"}),this.props.setSearchOnlySearchWorkspace({value:e.target.checked})}},{key:"onHideMemberChannelsChange",value:function(e){e.target.checked?this.props.clogSearchFilterAdded({filter_other:"hide_my_channels"}):this.props.clogSearchFilterRemoved({filter_other:"hide_my_channels"}),this.props.setChannelSearchHideMemberChannels({value:e.target.checked})}},{key:"onSearchLimitTeamFilterDropdownChange",value:function(e){this.props.searchOnlyByEnterpriseTeamId({value:e.value})}},{key:"renderPrefs",value:function(){var e=this.props,t=e.showEnterpriseOptions,n=e.filterWorkspaceOnly,a=e.hideMemberChannels,r=e.currentTeam,i=e.featureSearchLimitTeamFilter,o=e.searchOnlyWorkspaceTeamId,s=e.selfEnterpriseOrgName,l=e.loggedInEnterpriseTeams;return p.a.createElement(d.Fragment,null,t&&i?p.a.createElement($t,{title:er.t("Workspace"),"data-qa":"search-filter-workspace-section"},p.a.createElement("div",{className:"p-search_filter__select"},p.a.createElement(pn,{loggedInEnterpriseTeams:l,selfEnterpriseOrgName:s,searchOnlyWorkspaceTeamId:o,onChange:this.onSearchLimitTeamFilterDropdownChange,featureSearchLimitTeamFilter:i}))):null,p.a.createElement($t,{title:er.t("More options")},t&&!i?p.a.createElement($a,{currentTeam:r,filterWorkspaceOnly:n,checkOnlySearchWorkspace:this.onOnlySearchWorkspaceChange,featureSearchLimitTeamFilter:i}):null,p.a.createElement("label",{className:b()("p-search_filter__checkbox_label",{"p-search_filter__checkbox_label--selected":a}),htmlFor:"search-channel-filter-hide-member-channels"},er.t("Hide my channels")," ",p.a.createElement("input",{type:"checkbox",className:"flex_shrink_none",checked:a,onChange:this.onHideMemberChannelsChange,id:"search-channel-filter-hide-member-channels"}))))}},{key:"render",value:function(){var e=this.props,t=e.channelType,n=e.sharedTeams,a=e.filters,r=e.filterSuggestions,i="loading"===n.state;return p.a.createElement("div",{className:"p-search_filters"},p.a.createElement($t,{title:er.t("Channel type")},p.a.createElement("div",{className:"p-search_filter__select"},p.a.createElement(Xa,{isLoading:i,sharedTeams:n,channelType:t,onChannelTypeChange:this.onChannelTypeChange}))),n.teams.length>0&&p.a.createElement(za,{sharedTeams:n,filters:a,filterSuggestions:r,toggleSearchOrgFilter:this.props.toggleChannelSearchOrgFilter,clogSearchFilterAdded:this.props.clogSearchFilterAdded,clogSearchFilterRemoved:this.props.clogSearchFilterRemoved}),this.renderPrefs())}}]),t}(d.Component);tr.displayName="ChannelsFilterUIBase",tr.defaultProps={channelType:{type:U.a.all},sharedTeams:{state:"ready",teams:[]},filters:[],filterSuggestions:[],clogSearchFilterAdded:j.a,clogSearchFilterRemoved:j.a,selfEnterpriseOrgName:"",loggedInEnterpriseTeams:[],searchOnlyByEnterpriseTeamId:j.a};var nr={setChannelSearchFilterType:function(){return Ot.apply(void 0,arguments)},setSearchOnlySearchWorkspace:function(){return Ct.apply(void 0,arguments)},setChannelSearchHideMemberChannels:function(){return _t.apply(void 0,arguments)},onChannelSearchOpened:function(){return Ha.apply(void 0,arguments)},toggleChannelSearchOrgFilter:function(){return jt.apply(void 0,arguments)},clogSearchFilterAdded:function(){return F.f.apply(void 0,arguments)},clogSearchFilterRemoved:function(){return F.g.apply(void 0,arguments)},searchOnlyByEnterpriseTeamId:function(){return Et.apply(void 0,arguments)}},ar=Object(f.b)(function(e){var t=Object(g.r)(e),n=Object(g.d)(e),a=Object(q.d)(e),r=Object(g.c)(e),i=r.type,o=r.teamId,s=Object(st.a)(e),l=Object(N.b)(e).filter(function(e){return!!e.enterprise_id&&e.enterprise_id===s});return{channelType:{type:i,teamId:o,teamDisplayName:o&&Object(X.f)(Object(q.i)(e,o))},filters:Object(g.e)(e),filterSuggestions:Object(q.j)(e,n).map(function(e){return e.id}),currentTeam:a,showEnterpriseOptions:Object(lt.d)(e),filterWorkspaceOnly:Object(M.f)(e),hideMemberChannels:Object(M.a)(e),sharedTeams:{state:t.state,teams:Object(q.j)(e,t.teamIds).map(function(e){return{id:e.id,name:Object(X.f)(e)}})},allAccountsOfCurrentEnterprise:l,loggedInEnterpriseTeams:l.map(function(t){return Object(q.i)(e,t.id)}),featureSearchLimitTeamFilter:Object(N.m)(e,"feature_search_limit_team_filter"),searchOnlyWorkspaceTeamId:Object(g.q)(e),selfEnterpriseOrgName:Object(q.e)(e)}},nr)(tr),rr=(n("9wy/"),new J.b("search"));function ir(e){var t=e.channelName,n=e.onRetry,a=Ee()(e,["channelName","onRetry"]);return p.a.createElement(va.b,C()({position:"bottom-right",icon:"warning",showCloseButton:!0},a),p.a.createElement("span",null,p.a.createElement("strong",null,rr.rt("Couldn\u2019t join {channelName}.",{channelName:t}))," ",rr.t("This could be a connection issue, or just a little blip.")," ",p.a.createElement(_a.a,{onClick:n},rr.t("Try again"))))}function or(e){var t=e.channelName,n=Ee()(e,["channelName"]);return p.a.createElement(va.b,C()({position:"bottom-right",icon:"warning",showCloseButton:!0},n),p.a.createElement("span",null,p.a.createElement("strong",null,rr.rt("Couldn\u2019t leave {channelName}.",{channelName:t}))," ",rr.t("Your organization requires everyone to be in it, so no one misses important info.")," "))}function sr(e){var t=e.channelName,n=e.onRetry,a=Ee()(e,["channelName","onRetry"]);return p.a.createElement(va.b,C()({position:"bottom-right",icon:"warning",showCloseButton:!0},a),p.a.createElement("span",null,p.a.createElement("strong",null,rr.rt("Couldn\u2019t leave {channelName}.",{channelName:t}))," ",rr.t("This could be a connection issue, or just a little blip.")," ",p.a.createElement(_a.a,{onClick:n},rr.t("Try again"))))}ir.displayName="ErrorToastCannotJoinBlip",or.displayName="ErrorToastCannotLeaveRestricted",sr.displayName="ErrorToastCannotLeaveBlip";var lr=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(I.a)(n,["setScrollPosition","pageForward","pageBack","pageSearchResults","setListRef","onFeedbackClick"]),n.searchResultsContainerRef=p.a.createRef(),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.logTelemetry()}},{key:"componentDidUpdate",value:function(e){e.moduleState.loading===this.props.moduleState.loading&&e.moduleState.error===this.props.moduleState.error&&e.moduleState.page===this.props.moduleState.page||this.logTelemetry()}},{key:"onNavigateChannel",value:function(e){var t=this;this.props.clogSearchChannelClick({type:F.a.channel,iid:this.props.iidMap[e.id],channelId:e.id});var n=void 0;if(Object(be.cb)(e)){var a=this.props.teamIdForChannelFromAnotherTeam(e);n=Object(Sa.a)()?this.props.setPrimaryView({id:e.id,teamId:a}):this.props.openChannelFromAnotherTeam({channelId:e.id,teamId:a})}else n=this.props.setPrimaryView({id:e.id,teamId:e.team_id});return n.then(function(){return t.props.close()})}},{key:"onJoinChannelId",value:function(e){var t=this;return this.props.clogSearchChannelClick({type:F.a.channelJoin,iid:this.props.iidMap[e],channelId:e}),this.props.joinChannelFromSearch({channelId:e}).then(function(){t.listEl&&t.listEl.focusItem(e)}).catch(function(){var n=t.props.getDisplayNameForChannel(t.props.flannelChannelMap[e]);t.props.enqueueToast({element:p.a.createElement(ir,C()({channelName:n,onRetry:function(){return t.onJoinChannelId(e)}},t.getToastOffset()))})})}},{key:"onLeaveChannelId",value:function(e){var t=this;return this.props.clogSearchChannelClick({type:F.a.channelLeave,iid:this.props.iidMap[e],channelId:e}),this.props.leaveChannelFromSearch({channelId:e}).then(function(){t.listEl&&t.listEl.focusItem(e)}).catch(function(){var n=t.props.getDisplayNameForChannel(t.props.flannelChannelMap[e]),a=t.props.canLeaveChannelWithReason(e),r=a.ok,i=a.reason,o=!r&&[ya.b.CANT_LEAVE_GENERAL,ya.b.CANT_LEAVE_MANDATORY_SHARED_CHANNEL].includes(i);t.props.enqueueToast({element:o?p.a.createElement(or,C()({channelName:n},t.getToastOffset())):p.a.createElement(sr,C()({channelName:n,onRetry:function(){return t.onLeaveChannelId(e)}},t.getToastOffset()))})})}},{key:"onFeedbackClick",value:function(){this.props.openSearchFeedbackDialog({module:"channels"})}},{key:"getVisibleChannels",value:function(){return this.props.channelsResponse.items[this.props.moduleState.page||1]}},{key:"getToastOffset",value:function(){return this.searchResultsContainerRef.current?this.searchResultsContainerRef.current.getWrappedInstance().getToastOffset():{}}},{key:"setListRef",value:function(e){this.listEl=e}},{key:"setScrollPosition",value:function(e){this.props.setViewScrollPosition({view:"channels",position:e})}},{key:"logTelemetry",value:function(){if(!this.props.moduleState.loading&&this.props.moduleState.error===U.e.None){var e=this.getVisibleChannels();e&&this.props.telemeter.count("search_ui_channels_results_view_count",e.length)}}},{key:"pageForward",value:function(){this.props.clogSearchChannelClick({type:F.a.channelPageNext}),this.listEl&&this.listEl.focus(),this.searchResultsContainerRef.current.getWrappedInstance().scrollTop(),this.props.logInfo("IMPROVED_SEARCH","Page forward in channel results"),this.pageSearchResults(1)}},{key:"pageBack",value:function(){this.props.clogSearchChannelClick({type:F.a.channelPagePrev}),this.listEl&&this.listEl.focus(),this.searchResultsContainerRef.current.getWrappedInstance().scrollTop(),this.props.logInfo("IMPROVED_SEARCH","Page backwards in channel results"),this.pageSearchResults(-1)}},{key:"pageSearchResults",value:function(e){var t=this.props,n=t.moduleState,a=t.channelsResponse,r=t.sort,i=Math.max(n.page+e,1);a.items[i]?this.props.setPageForModule({moduleType:"channels",page:i}):this.props.fetchSearchResultsByModule({module:"channels",sort:r,reason:"search-channels-page",page:i})}},{key:"render",value:function(){var e=this,t=this.props,n=t.sort,a=t.setSort,r=t.scrollPosition,i=t.moduleState,o=t.channelsResponse,s=t.channelSummaryLabels,l=t.flannelChannelMap,c=[[U.b.relevant,rr.t("Most relevant")],[U.b.created,rr.t("Date created (newest to oldest)")],[U.b.name,rr.t("Name (A to Z)")],[U.b.memberCount,rr.t("Members (most to least)")]],u=Object(fa.a)(c),m=this.getVisibleChannels()||[],h=m.reduce(function(e,t){return e[t.id]=t,e},{}),b=o.pagination&&o.pagination.total_count,f=b>0;o.debug&&Object(ga.a)("channelSearchExplain",Object(ba.a)(o.debug.features,function(e){return-e.total_score}));var g=o&&o.pagination&&o.pagination.page_count||0,_=g>1&&!i.loading,v=i.page||1;return p.a.createElement(Kn,{id:"c-search__tab_channel",module:"channels",loading:i.loading,errorType:i.error,scrollPosition:r,setScrollPosition:this.setScrollPosition,filterUI:p.a.createElement(ar,null),numResults:b,emptyResultsTitle:rr.t("No results"),ref:this.searchResultsContainerRef,onClickRefreshSearch:this.props.onClickRefreshSearch,sortDropdown:p.a.createElement(Z.e,{"data-qa":"channel_sort_toggle",renderMenu:function(e){var t=e.onTriggerClose;return p.a.createElement(Z.f,null,c.map(function(e){var n=zn()(e,2),r=n[0],i=n[1];return p.a.createElement(Z.b,{"data-qa-sort":r,key:r,onSelected:function(){a({sort:r}),t()}},i)}))},position:"bottom-right",width:180,offsetX:0,offsetY:0},p.a.createElement($.c,{"data-qa":"channel_sort_selection"},u[n],p.a.createElement(ee.b,{type:"chevron-down",inline:!0})))},f&&p.a.createElement(xn,{ref:this.setListRef,ids:m.map(function(e){return e.id}),onSelectItem:function(t,n){return e.onNavigateChannel(l[n])},itemAriaLabel:function(e){return s[e]},renderItem:function(t){return p.a.createElement(Fa,{key:t,channel:l[t],channelData:h[t],iid:e.props.iidMap[t],onClickChannel:function(n){for(var a=n.target,r=!1;a&&a!==n.currentTarget;)"A"===a.tagName&&a.href&&(r=!0),a=a.parentNode;r?e.props.clogSearchChannelClick({type:F.a.channelPurposeLink,iid:e.props.iidMap[t],channelId:t}):(n.preventDefault(),e.onNavigateChannel(l[t]))},onClickJoin:function(n){return n.preventDefault(),e.onJoinChannelId(t)},onClickLeave:function(n){return n.preventDefault(),e.onLeaveChannelId(t)}})}}),!f&&p.a.createElement(d.Fragment,null,p.a.createElement("p",null,rr.t("Slack couldn\u2019t find any channels related to your search. You may want to try\u2026")),p.a.createElement("ul",null,p.a.createElement("li",null,rr.t("Using different keywords.")),p.a.createElement("li",null,rr.t("Checking for typos.")),p.a.createElement("li",null,rr.t("Adjusting your filters.")))),!_&&p.a.createElement(tt.a,{className:b>0?"c-search__feedback_small":"c-search__feedback",onClick:this.onFeedbackClick}),p.a.createElement(rt,{visible:_,currentPageOffset:v,totalPageCount:g,onForward:this.pageForward,onBack:this.pageBack,onFeedbackClick:this.onFeedbackClick}))}}]),t}(d.Component);lr.displayName="ChannelViewBase",lr.defaultProps={sort:U.b.relevant,setSort:j.a,scrollPosition:0,setViewScrollPosition:j.a,moduleState:{},channelsResponse:{items:{}},setPageForModule:j.a,fetchSearchResultsByModule:j.a,logInfo:j.a,setPrimaryView:j.a,openChannelFromAnotherTeam:j.a,close:j.a,teamIdForChannelFromAnotherTeam:j.a,clogSearchChannelClick:j.a,channelSummaryLabels:{},iidMap:{},joinChannelFromSearch:j.a,leaveChannelFromSearch:j.a,flannelChannelMap:{},getDisplayNameForChannel:j.a,enqueueToast:j.a,canLeaveChannelWithReason:j.a,onClickRefreshSearch:j.a,openSearchFeedbackDialog:j.a,telemeter:Oe.d};var cr=Object(f.b)(function(e){var t=Object(g.i)(e,"channels")||{},n=Object(H.q)(e,{module:"channels"})||{items:{}},a=n.items[t.page||1]||[],r={},i={},o={};return a.forEach(function(t){i[t.id]=function(e,t){var n=Object(fe.e)(e,t.id),a=Object(q.i)(e,Object(be.cb)(n)?Object(be.Zb)(e,n):n.team_id),r=Object(X.f)(a),i=Object(X.s)(a)?Object(q.e)(e):null,o=Object(be.x)(e,n,{publicChannelIncludeHashSign:!1}),s=Object(Ea.a)({channelName:o,workspaceName:r,orgName:i,isOrgGlobalSharedPublicOrPrivateChannel:Object(be.ub)(n),isOrgSharedPublicOrPrivateChannel:Object(be.wb)(n),isExternallySharedChannel:Object(be.ab)(n),isArchived:Object(be.X)(n),isPrivate:Object(be.Bb)(n),isNotMember:!Object(be.nb)(n)}),l=Object(de.a)(e,Object(be.Q)(n));return ja.t("{channelDescription}, {memberCount, plural, =1 {# member} other {# members}}, {channelPurpose}",{channelDescription:s,memberCount:t.member_count,channelPurpose:l})}(e,t);var n=Object(fe.e)(e,t.id);o[t.id]=n,r[t.id]=t.iid}),{sort:Object(M.b)(e),scrollPosition:Object(g.p)(e).channels,moduleState:t,channelsResponse:n,iidMap:r,channelSummaryLabels:i,flannelChannelMap:o,logInfo:Object(R.a)({state:e}).info,teamIdForChannelFromAnotherTeam:function(){for(var t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];return be.Zb.apply(void 0,[e].concat(n))},getDisplayNameForChannel:function(){for(var t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];return be.x.apply(void 0,[e].concat(n))},canLeaveChannelWithReason:function(){for(var t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];return ya.j.apply(void 0,[e].concat(n))},telemeter:Object(Oe.c)({state:e})}},function(e){return{setSort:function(){return e(yt.apply(void 0,arguments))},setViewScrollPosition:function(){return e(P.H.apply(void 0,arguments))},setPageForModule:function(){return e(P.s.apply(void 0,arguments))},fetchSearchResultsByModule:function(){return e(D.d.apply(void 0,arguments))},setPrimaryView:function(){return e(Oa.a.apply(void 0,arguments))},openChannelFromAnotherTeam:function(){return e(Ca.a.apply(void 0,arguments))},close:function(){return e(K.a.apply(void 0,arguments))},clogSearchChannelClick:function(){return e(F.c.apply(void 0,arguments))},joinChannelFromSearch:function(){return e(D.g.apply(void 0,arguments))},leaveChannelFromSearch:function(){return e(D.h.apply(void 0,arguments))},enqueueToast:function(){return e(ka.c.apply(void 0,arguments))},openSearchFeedbackDialog:function(){return e(D.p.apply(void 0,arguments))}}})(lr),ur=n("9oTK"),dr=n("9E9B"),pr=n("h9PG"),mr=n("eJ6O"),hr=n("Ik/9"),br=n("ipyK"),fr=n("Muja"),gr=n("IF1j"),_r=n("hCvz"),vr=n("Cudy"),yr=n("Apsv"),kr=n("mOAw"),Or=n("O/xh"),Cr=n("ZYn4"),Er=n("zZZw"),jr=n("1zbP"),Sr=n("e9Nc"),Ir=n("BrU6"),wr=Object(x.b)("People search result top terms clicked",function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).member,a=t(),r=Object(Dn.b)(a)+" "+Object(Sr.b)(a,n);return e(Object(Ir.a)({textyString:r,queryIsUserGenerated:!1})).then(function(){return e(Object(P.G)({tab:"messages"})),e(Object(H.x)({query:r}))})});wr.meta={name:"peopleSearchRefineTopTerms",key:"actionsUniversalSearchPeopleSearchTopTermsPeopleSearchRefineTopTerms",description:"People search result top terms clicked"},wr.propTypes={member:m.b.object.isRequired};n("Bui7");var Nr=new J.b("member_profile"),Tr=(m.b.bool.isRequired,m.b.string,m.b.object.isRequired,m.b.object.isRequired,m.b.arrayOf(m.b.shape({label:m.b.string.isRequired,name:m.b.string.isRequired,type:m.b.string.isRequired})).isRequired,m.b.objectOf(m.b.string).isRequired,m.b.string,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.object,m.b.object,{iid:"",displayQuery:"",onClickMember:j.a,clogSearchPeopleClick:j.a,startImByMemberId:j.a,closeSearch:j.a,onClickTopTerms:j.a,showMemberProfile:j.a,onNavigateError:j.a,onViewProfileError:j.a,logger:{error:j.a},telemeter:Oe.d}),Ar=function(e){return p.a.createElement(Ia.a,{emojiSize:Na.a.SMALL,text:e,noJumbomoji:!0,noLinking:!0,noSpecials:!0,noEmojiText:!0,noHexColors:!0,noCode:!0,noQuotes:!0,noHighlights:!0})};Ar.displayName="renderSearchHighlightText";var Rr=function(e){return/[\ue000\ue001]/g.test(e)},Pr=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(I.a)(n,["onClickMemberName","onClickMember","onFocusResult","onBlurResult","onFocusPerson","onBlurPerson","onClickShowMore","onClickNavigate","onClickViewProfile","onInfoTooltipClick","onInfoTooltipFocus","onInfoTooltipBlur","onClickTopTerms"]),n.infoTooltipRef=p.a.createRef(),n.state={didCatch:!1,resultHasFocus:!1,personHasFocus:!1,isExpanded:!1},n}return u()(t,e),o()(t,[{key:"shouldComponentUpdate",value:function(e,t){return!Object(fr.a)(this.props,e)||!Object(fr.a)(this.state,t)}},{key:"onFocusResult",value:function(){this.setState(function(){return{resultHasFocus:!0}})}},{key:"onBlurResult",value:function(){this.setState(function(){return{resultHasFocus:!1}})}},{key:"onFocusPerson",value:function(){this.setState(function(){return{personHasFocus:!0}})}},{key:"onBlurPerson",value:function(){this.setState(function(){return{personHasFocus:!1}})}},{key:"onClickMember",value:function(e){e.isDefaultPrevented()||this.props.onClickMember(e)}},{key:"onClickMemberName",value:function(e){e.preventDefault(),e.stopPropagation(),this.props.clogSearchPeopleClick({type:F.b.avatar,iid:this.props.iid,userId:this.props.member.id}),this.props.featureReactMemberProfileCard||(e.persist(),Object(kr.a)(e,this.props.member.id))}},{key:"onClickShowMore",value:function(e){e.preventDefault(),e.stopPropagation(),this.props.clogSearchPeopleClick({type:F.b.showMore,iid:this.props.iid,userId:this.props.member.id}),this.setState(function(){return{isExpanded:!0}})}},{key:"onClickNavigate",value:function(e){var t=this;e.preventDefault(),e.stopPropagation(),this.props.clogSearchPeopleClick({type:F.b.navigateToMessages,iid:this.props.iid,userId:this.props.member.id}),this.props.startImByMemberId({memberId:this.props.member.id}).then(function(){t.props.closeSearch()}).catch(function(n){throw t.props.onNavigateError(function(){return t.onClickNavigate(e)}),n})}},{key:"onClickViewProfile",value:function(e){var t=this;e.preventDefault(),e.stopPropagation(),this.props.clogSearchPeopleClick({type:F.b.viewProfile,iid:this.props.iid,userId:this.props.member.id}),this.props.showMemberProfile({memberId:this.props.member.id}).then(function(){t.props.closeSearch()}).catch(function(n){throw t.props.onViewProfileError(function(){return t.onClickViewProfile(e)}),n})}},{key:"onClickTopTerms",value:function(e){e.preventDefault(),e.stopPropagation(),this.props.clogSearchPeopleClick({type:F.b.topTerms,iid:this.props.iid,userId:this.props.member.id}),this.props.onClickTopTerms({member:this.props.member})}},{key:"onInfoTooltipClick",value:function(e){e.preventDefault(),e.stopPropagation()}},{key:"onInfoTooltipFocus",value:function(){this.infoTooltipRef.current&&this.infoTooltipRef.current.showTip()}},{key:"onInfoTooltipBlur",value:function(){this.infoTooltipRef.current&&this.infoTooltipRef.current.hideTip()}},{key:"getRenderingData",value:function(){var e=this.props,t=e.member,n=e.memberWithHighlights,a=e.teamCustomProfileFields,r=e.customProfileFieldMemberNamesById,i=Object(xt.xb)(t),o=!!n.top_terms,s=Object(xt.K)(n),l=Object(xt.F)(n),c=Object(xt.S)(n),u=Object(xt.D)(n),d=Object(xt.v)(n),m=Object(xt.J)(n),h=Object(xt.E)(n),b=h&&h.status_emoji,f=h&&h.status_text;if(i)return{rows:[],realName:s,memberTitle:c};var g=[];if(l&&s!==l&&Rr(l)&&g.push({className:null,key:"displayname",term:Nr.t("Display name",{ns:"member_profile"}),valueAsText:l,node:Ar(l)}),d&&Rr(d)&&g.push({className:null,key:"email",term:Nr.t("Email address",{ns:"member_profile"}),valueAsText:d,node:Ar(d)}),u&&Rr(u)&&g.push({className:null,key:"phone",term:Nr.t("Phone number",{ns:"member_profile"}),valueAsText:u,node:Ar(u)}),b&&Rr(b)||f&&Rr(f)){var _=[];b&&_.push(b),f&&_.push(f);var v=_.join(" ");g.push({className:null,key:"status",term:Nr.t("Status",{ns:"member_profile"}),valueAsText:v,node:Ar(v)})}return a.forEach(function(e){var t=e.name;if(m&&m[t]&&m[t].value&&/[\ue000\ue001]/g.test(m[t].value))if("user"===e.type){var n=m[t].value.split(","),a=Object(Er.a)(n.map(function(e){var t=Rr(e),n=e.replace(/[\ue000\ue001]/g,"");return t?"\ue000"+r[n]+"\ue001":r[n]}),{noConj:!0}).join("");g.push({className:null,key:t,term:e.label,valueAsText:a,node:Ar(a)})}else"link"!==e.type&&g.push({className:null,key:t,term:e.label,valueAsText:m[t].value,node:Ar(m[t].value)})}),o&&g.push({className:"p-people_search_result__row--top_terms",key:"top_terms",term:null,valueAsText:"top_terms",node:p.a.createElement("span",{className:"p-people_search_result__top_terms"},p.a.createElement(ee.b,{className:"p-people_search_result__top_terms_sparkles",type:"sparkles_filled",inline:!0,size:"inherit"}),p.a.createElement(Ut.a,{className:"p-people_search_result__top_terms_link","data-qa":"people_search_result__top_terms_link",onClick:this.onClickTopTerms},Nr.rt("Talks about \u201c{query}\u201d",{query:p.a.createElement(Ia.a,{className:"p-people_search_result__top_terms_term",emojiSize:Na.a.SMALL,text:this.props.displayQuery,noJumbomoji:!0,noLinking:!0,noSpecials:!0,noHexColors:!0,noCode:!0,noQuotes:!0,noHighlights:!0})})),p.a.createElement(wa.c,{tip:Nr.t("Based on public channels and conversations with you"),ref:this.infoTooltipRef},p.a.createElement(Fe.a,{"aria-disabled":"true",className:"p-people_search_result__top_terms_info",onClick:this.onInfoTooltipClick,onFocus:this.onInfoTooltipFocus,onBlur:this.onInfoTooltipBlur},p.a.createElement(ee.b,{type:"info-circle",inline:!0,size:"inherit"}))))}),{rows:g=Object(br.a)(g,function(e,t){return e.term===t.term&&e.valueAsText===t.valueAsText}),realName:s,memberTitle:c}}},{key:"componentDidCatch",value:function(e,t){this.props.telemeter.count("search_ui_people_result_people_render_error"),this.props.logger.error("IMPROVED_SEARCH","Error caught by PeopleSearchResult "+t.componentStack,e)}},{key:"render",value:function(){var e=this.props,t=e.member,n=e.featureReactMemberProfileCard,a=Object(xt.P)(t),r=Object(xt.ib)(t),i=Object(xt.mb)(t),o=Object(xt.Kb)(t),s=Object(xt.tb)(t),l=Object(xt.Hb)(t),c=Object(jr.c)(t),u=Object(jr.d)(t),d=Object(xt.xb)(t);if(this.state.didCatch||c)return p.a.createElement("div",{className:"p-people_search_result p-people_search_result--non_existent"},p.a.createElement("div",{className:"p-people_search_result__person"},p.a.createElement("div",{className:"p-people_search_result__avatar_placeholder"}),p.a.createElement("div",{className:"p-people_search_result__body"},Nr.t("For some reason, Slack wasn\u2019t able to display this result."))));if(u)return p.a.createElement("div",{className:"p-people_search_result p-people_search_result--unknown"},p.a.createElement("div",{className:"p-people_search_result__person"},p.a.createElement("div",{className:"p-people_search_result__avatar_placeholder"}),p.a.createElement("div",{className:"p-people_search_result__body"},p.a.createElement("div",{className:"p-people_search_result__row"},p.a.createElement(_r.b,{size:"random"})),p.a.createElement("div",{className:"p-people_search_result__row"},p.a.createElement(_r.b,{size:"random"})))));var m=void 0;m=i||o?Nr.t("View History"):Nr.t("Message");var h=this.getRenderingData(),f=h.rows,g=h.realName,_=h.memberTitle,v=!!_||d,y=f.length>0,k=v?f.length>1:f.length>2,O=this.state.isExpanded?f.length:3,C=!this.state.isExpanded&&f.length>O;return p.a.createElement("div",{className:b()("p-people_search_result",{"p-people_search_result--has-focus":this.state.resultHasFocus}),onFocus:this.onFocusResult,onBlur:this.onBlurResult},p.a.createElement("div",{role:"presentation",onClick:this.onClickMember,"data-qa":"people_search_result"},p.a.createElement("div",{className:b()("p-people_search_result__person",{"p-people_search_result__person--has-focus":this.state.personHasFocus,"p-people_search_result__person--deactivated":i}),onFocus:this.onFocusPerson,onBlur:this.onBlurPerson},p.a.createElement(gr.c,{className:"p-people_search_result__avatar",size:70,user:t,userId:t.id,isExternal:s,teamId:a,isInteractive:!0,showCard:!0,showTooltip:!0,showBadge:!1,ariaHidden:"true",tabIndex:"-1"}),p.a.createElement("div",{className:b()("p-people_search_result__body",{"p-people_search_result__body--many_rows":k,"p-people_search_result__body--no_title":!v})},p.a.createElement("div",{className:"p-people_search_result__name","data-qa":"people_search_result__name"},n?p.a.createElement(Or.a,{userId:t.id,onClick:this.onClickMemberName},p.a.createElement(Fe.a,{className:"p-people_search_result__name_button","data-qa":"people_search_result__name_button"},p.a.createElement(vr.a,{"data-qa":"name",name:Ar(g),isAppOrBot:r,isDeleted:i,isSelf:l,isNonExistent:c,isUnknown:u}))):p.a.createElement(Fe.a,{onClick:this.onClickMemberName,className:"p-people_search_result__name_button","data-qa":"people_search_result__name_button"},p.a.createElement(vr.a,{"data-qa":"name",name:Ar(g),isAppOrBot:r,isDeleted:i,isSelf:l,isNonExistent:c,isUnknown:u})),!i&&p.a.createElement(Cr.a,{memberId:t.id,"data-qa":"people_search_result__presence",className:"c-member__presence"})),v&&p.a.createElement("div",{className:"p-people_search_result__title","data-qa":"people_search_result__title"},d?Nr.t("Invited member",{fallbackHash:"c4649618a3f5b67c775775107529f167c8d739e5",fallbackHashNs:"members"}):Ar(_)),y&&p.a.createElement("div",{className:"p-people_search_result__rows","data-qa":"people_search_result__rows"},f.slice(0,O).map(function(e){return p.a.createElement("div",{key:e.key,className:b()("p-people_search_result__row",e.className),"data-qa":"people_search_result__row"},e.term&&p.a.createElement("b",{"data-qa":"people_search_result__term",className:"p-people_search_result__term"},e.term,":"," "),p.a.createElement("span",{"data-qa":"people_search_result__definition",className:"p-people_search_result__definition"},e.node))})),C&&!this.state.isExpanded&&p.a.createElement(Ut.a,{className:"p-people_search_result__show_more","data-qa":"people_search_result__show_more",onClick:this.onClickShowMore,"aria-expanded":"false"},Nr.t("Show more\u2026"))))),p.a.createElement("div",{className:"p-people_search_result__actions"},p.a.createElement($.d,{className:"p-people_search_result__action_button",type:"outline",size:"medium",onClick:this.onClickNavigate,"data-qa":"people_search_result__message-button"},m),p.a.createElement($.d,{className:"p-people_search_result__action_button",type:"outline",size:"medium",onClick:this.onClickViewProfile,"data-qa":"people_search_result__profile-button"},Nr.t("View Profile"))))}}],[{key:"getDerivedStateFromError",value:function(){return{didCatch:!0}}}]),t}(p.a.Component);Pr.displayName="PeopleSearchResult",Pr.defaultProps=Tr;var Mr=Object(f.b)(function(e,t){var n=t.memberWithHighlights,a=Object(q.d)(e),r=Object(yr.a)(a),i=Object(xt.J)(n),o={};return i&&r.forEach(function(t){if("user"===t.type){var n=i&&i[t.name];n&&n.value&&n.value.split(",").forEach(function(t){var n=t.replace(/[\ue000\ue001]/g,""),a=Object(ot.d)(e,n);o[n]=Object(xt.K)(a)})}}),{featureReactMemberProfileCard:Object(N.m)(e,"feature_react_member_profile_card"),teamCustomProfileFields:r,customProfileFieldMemberNamesById:o,displayQuery:Object(Dn.b)(e),logger:Object(R.a)({state:e}),telemeter:Object(Oe.c)({state:e})}},function(e){return{clogSearchPeopleClick:function(){return e(F.j.apply(void 0,arguments))},closeSearch:function(){return e(K.a.apply(void 0,arguments))},onClickTopTerms:function(){return e(wr.apply(void 0,arguments))}}})(Pr),xr=new J.b("search"),Fr=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(I.a)(n,["onChange"]),n}return u()(t,e),o()(t,[{key:"onChange",value:function(e){this.props.onAccountTypeChange({type:e.value})}},{key:"render",value:function(){var e=this,t=[{value:U.f.all,label:xr.t("All types")},{value:U.f.owners,label:xr.t("Owners")},{value:U.f.admins,label:xr.t("Admins")},{value:U.f.full,label:xr.t("Full Members (includes owners and admins)")},{value:U.f.guests,label:xr.t("Guests")},{value:U.f.deactivated,label:xr.t("Deactivated accounts"),isDisabled:this.props.hideDeactivatedUsers}],n=t.find(function(t){return t.value===e.props.accountType.type}),a=this.props.hideDeactivatedUsers?"deactivated-accounts-disabled":"deactivated-accounts-enabled";return p.a.createElement(cn.a,{key:a,width:"100%",options:t,ariaLabel:xr.t("Select an account type to filter by"),className:"c-people_filter",selectedOption:n,onOptionSelected:this.onChange})}}]),t}(d.Component);Fr.displayName="PeopleFilterAccountType",Fr.defaultProps={accountType:{type:U.f.all},hideDeactivatedUsers:!1,onAccountTypeChange:j.a};var Lr=Fr,Dr=n("okZA"),Ur=Object(x.b)("people search: tab opened, initializing data",function(e,t){var n=t(),a=Object(q.d)(n),r=Object(ot.b)(n),i=Object(yr.a)(a),o=Object(xt.J)(r),s=Object(g.j)(n);i.forEach(function(t){if(t.options&&t.options.length>1){var n=t.name,a=[];if(o&&o[n]){var r=t.options.find(function(e){return e.value===o[n].value});r&&a.push(r.value)}a.push.apply(a,ut()(t.options.slice(0,3).map(function(e){return e.value}))),Object(Ua.a)(a).slice(0,3).forEach(function(t){var a=s&&s[n]&&s[n].find(function(e){return e.value===t});e(Object(P.t)({id:n,value:t,checked:!!a&&a.checked}))})}})});Ur.meta={name:"populateVisibleOptions",key:"actionsUniversalSearchPeopleSearchOpenedPopulateVisibleOptions",description:"people search: tab opened, initializing data"};var Br=Object(x.b)("people search: tab opened, initializing data",function(e,t){var n=t(),a=Object(g.n)(n);return a&&"ready"===a.state&&a.refreshed>=Date.now()-36e5?(e(Ur()),Promise.resolve()):(e(Object(P.y)()),e(Object(Dr.e)({reason:"people_search_open"})).then(function(){e(Ur()),e(Object(P.z)())}).catch(function(){e(Object(P.x)())}))});Br.meta={name:"updatePeopleSearchProfileFieldValues",key:"actionsUniversalSearchPeopleSearchOpenedUpdatePeopleSearchProfileFieldValues",description:"people search: tab opened, initializing data"};var qr=Object(x.b)("people search: tab opened, initializing data",function(e,t){var n=t();return Object(N.m)(n,"feature_steeple_church_ext")?Promise.all([e(qa({reason:"people_search_open"})),e(Br())]):e(Br())});qr.meta={name:"peopleSearchOpened",key:"actionsUniversalSearchPeopleSearchOpenedPeopleSearchOpened",description:"people search: tab opened, initializing data"},qr.propTypes={};var Hr=qr,Wr=n("oTSI"),Gr=(n("Olm7"),n("vKOW")),Kr=n("JvzI"),Vr=Object(Wr.a)(function(){var e=Object(Gr.a)(Object(Kr.a)()),t={};return e.forEach(function(e){var n=e[1],a=e[0];t[n]=a}),t});var zr=new J.b("search"),Yr=(m.b.shape({type:m.b.oneOf(Object(dt.a)(U.f))}),m.b.func,m.b.func.isRequired,m.b.object.isRequired,m.b.objectOf(m.b.arrayOf(m.b.shape({value:m.b.string.isRequired,checked:m.b.bool.isRequired}))),m.b.func,m.b.array,m.b.func.isRequired,m.b.func,m.b.func,m.b.bool.isRequired,m.b.bool,m.b.bool.isRequired,m.b.func.isRequired,m.b.func.isRequired,m.b.func.isRequired,m.b.shape({state:m.b.oneOf(["loading","error","ready"]),refreshed:m.b.number}),m.b.bool.isRequired,m.b.string,m.b.func,m.b.array,m.b.string,{accountType:{type:U.f.all},visibleFilterState:{},sharedTeams:{state:"ready",teams:[]},filters:[],filterSuggestions:[],clogSearchFilterAdded:j.a,clogSearchFilterRemoved:j.a,peopleSearchOpened:j.a,peopleSearchCustomFilterChanged:j.a,timezoneSuggestions:[],teamProfileState:{state:"ready",refreshed:0},filterWorkspaceOnly:!1,searchOnlyWorkspaceTeamId:"",searchOnlyByEnterpriseTeamId:j.a,loggedInEnterpriseTeams:[],selfEnterpriseOrgName:""}),Qr=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(I.a)(n,["onAccountTypeChange","onOnlySearchWorkspaceChange","onHideDeactivatedUsersChange","onSearchLimitTeamFilterDropdownChange"]),n.peopleSearchOpenedPromise=null,n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.peopleSearchOpenedPromise=this.props.peopleSearchOpened()}},{key:"componentWillUnmount",value:function(){this.peopleSearchOpenedPromise&&this.peopleSearchOpenedPromise.cancel()}},{key:"onAccountTypeChange",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).type;this.props.clogSearchFilterAdded({filter_account_type:e}),this.props.setPeopleSearchFilterType({type:e})}},{key:"onOnlySearchWorkspaceChange",value:function(e){e.target.checked?this.props.clogSearchFilterAdded({filter_other:"workspace_only"}):this.props.clogSearchFilterRemoved({filter_other:"workspace_only"}),this.props.setSearchOnlySearchWorkspace({value:e.target.checked})}},{key:"onSearchLimitTeamFilterDropdownChange",value:function(e){this.props.searchOnlyByEnterpriseTeamId({value:e.value})}},{key:"onHideDeactivatedUsersChange",value:function(e){e.target.checked?this.props.clogSearchFilterAdded({filter_other:"hide_deactivated_users"}):this.props.clogSearchFilterRemoved({filter_other:"hide_deactivated_users"}),this.props.setPeopleSearchHideDeactivatedUsers({value:e.target.checked})}},{key:"loadOptions",value:function(e,t){var n=new Wa.b(e);return Object(ba.a)(t.map(function(t){return{value:t.value,label:t.label,score:0===e.length?0:n.normalizeAndScore(t.label)}}),"score")}},{key:"filterOptions",value:function(e,t,n){return t.filter(function(e){return isFinite(e.score)&&!n.some(function(t){return t.checked&&t.value===e.value})})}},{key:"renderTimezoneFilter",value:function(){var e=this,t=this.props.timezoneSuggestions,n=Vr(),a=Object.keys(n).map(function(e){return{value:e,label:n[e]}}),r=zr.t("Choose another");return p.a.createElement($t,{title:zr.t("Time zone",{ns:"edit_profile"}),"data-qa":"search-filter-section-people-timezones"},p.a.createElement(Gt,{checkboxName:"timezone",placeholderText:r,showMoreOptionsAriaLabel:r,loadOptions:function(t){return Promise.resolve({options:e.loadOptions(t,a)})},visibleOptions:t,onOptionChange:function(t,n){e.props.peopleSearchTimezoneFilterChanged({label:t.label,value:t.value,checked:n})},onOptionAdd:function(n){var a=t&&t.find(function(e){return e.value===n.value}),r=a&&a.checked;e.props.peopleSearchTimezoneFilterChanged({label:n.label,value:n.value,checked:!r})},filterOptions:function(n,a){return e.filterOptions(n,a,t)}}))}},{key:"renderPrefs",value:function(){var e=this.props,t=e.showEnterpriseOptions,n=e.filterWorkspaceOnly,a=e.hideDeactivatedUsers,r=e.currentTeam,i=e.accountType,o=e.featureSearchLimitTeamFilter,s=e.searchOnlyWorkspaceTeamId,l=e.selfEnterpriseOrgName,c=e.loggedInEnterpriseTeams,u=i.type===U.f.deactivated;return p.a.createElement("div",null,t&&o?p.a.createElement($t,{title:zr.t("Workspace"),"data-qa":"search-filter-workspace-section"},p.a.createElement("div",{className:"p-search_filter__select"},p.a.createElement(pn,{loggedInEnterpriseTeams:c,selfEnterpriseOrgName:l,searchOnlyWorkspaceTeamId:s,onChange:this.onSearchLimitTeamFilterDropdownChange,featureSearchLimitTeamFilter:o}))):null,p.a.createElement($t,{title:zr.t("More options")},p.a.createElement("div",{className:"p-search_filter__select"},t&&!o?p.a.createElement($a,{currentTeam:r,filterWorkspaceOnly:n,checkOnlySearchWorkspace:this.onOnlySearchWorkspaceChange,featureSearchLimitTeamFilter:o}):null,p.a.createElement("label",{className:b()("p-search_filter__checkbox_label",{"p-search_filter__checkbox_label--selected":a,"p-search_filter__checkbox_label--disabled":u}),htmlFor:"search-people-filter-hide-deactivated-users"},zr.t("Hide deactivated accounts")," ",p.a.createElement("input",{type:"checkbox",className:"flex_shrink_none",disabled:u,checked:a,onChange:this.onHideDeactivatedUsersChange,id:"search-people-filter-hide-deactivated-users"})))))}},{key:"render",value:function(){var e=this,t=this.props,n=t.accountType,a=t.currentTeam,r=t.visibleFilterState,i=t.sharedTeams,o=t.teamProfileState,s=t.filters,l=t.filterSuggestions,c=t.hideDeactivatedUsers,u="loading"===o.state||"loading"===i.state,m=zr.t("Choose another"),h=Object(yr.a)(a).filter(function(e){return e.options&&e.options.length>1}),b={};return h.forEach(function(e){var t=e.name,n={};e.options.forEach(function(e){n[e.value]=e}),b[t]=r[t]?r[t].filter(function(e){return n[e.value]}).map(function(e){return{value:e.value,label:n[e.value].label,checked:e.checked}}):[]}),p.a.createElement(d.Fragment,null,p.a.createElement($t,{title:zr.t("Account type")},p.a.createElement("div",{className:"p-search_filter__select"},p.a.createElement(Lr,{accountType:n,hideDeactivatedUsers:c,onAccountTypeChange:this.onAccountTypeChange}))),p.a.createElement(A.a,{enabled:["feature_steeple_church_ext"]},!u&&i.teams.length>0&&p.a.createElement(za,{sharedTeams:i,filters:s,filterSuggestions:l,toggleSearchOrgFilter:this.props.togglePeopleSearchOrgFilter,clogSearchFilterAdded:this.props.clogSearchFilterAdded,clogSearchFilterRemoved:this.props.clogSearchFilterRemoved})),this.renderPrefs(),u?p.a.createElement("div",null,p.a.createElement(ln,{variation:0}),p.a.createElement(ln,{variation:1})):h.map(function(t,n){return p.a.createElement($t,{key:t.name,title:t.label,"data-qa":"search-filter-section-people-custom"},p.a.createElement(Gt,{checkboxName:t.name,visibleOptions:b[t.name],loadOptions:function(n){return Promise.resolve({options:e.loadOptions(n,t.options)})},filterOptions:function(n,a){return e.filterOptions(n,a,b[t.name])},onOptionChange:function(a,r){r?e.props.clogSearchFilterAdded({filter_custom_profile:!0,filter_module_position:n,filter_position:b[t.name].indexOf(a)}):e.props.clogSearchFilterRemoved({filter_custom_profile:!0,filter_module_position:n,filter_position:b[t.name].indexOf(a)}),e.props.peopleSearchCustomFilterChanged({id:t.name,value:a.value,checked:r})},onOptionAdd:function(a){var i=r[t.name]&&r[t.name].find(function(e){return e.value===a.value}),o=i&&i.checked;e.props.peopleSearchCustomFilterChanged({id:t.name,value:a.value,checked:!o}),o?e.props.clogSearchFilterRemoved({filter_custom_profile:!0,filter_module_position:n,filter_position:null}):e.props.clogSearchFilterAdded({filter_custom_profile:!0,filter_module_position:n,filter_position:null})},placeholderText:m,showMoreOptionsAriaLabel:m,showMoreOptions:t.options.length>b[t.name].length}))}))}}]),t}(d.Component);Qr.displayName="PeopleFilterUIBase",Qr.defaultProps=C()({},Yr);var Xr={setPeopleSearchFilterType:function(){return It.apply(void 0,arguments)},peopleSearchCustomFilterChanged:function(){return wt.apply(void 0,arguments)},peopleSearchTimezoneFilterChanged:function(){return Tt.apply(void 0,arguments)},clogSearchFilterAdded:function(){return F.f.apply(void 0,arguments)},clogSearchFilterRemoved:function(){return F.g.apply(void 0,arguments)},peopleSearchOpened:function(){return Hr.apply(void 0,arguments)},togglePeopleSearchOrgFilter:function(){return St.apply(void 0,arguments)},setSearchOnlySearchWorkspace:function(){return Ct.apply(void 0,arguments)},setPeopleSearchHideDeactivatedUsers:function(){return Nt.apply(void 0,arguments)},searchOnlyByEnterpriseTeamId:function(){return Et.apply(void 0,arguments)}},Jr=Object(f.b)(function(e){var t=Object(g.k)(e),n=Object(g.r)(e),a=Object(g.l)(e),r=Object(st.a)(e),i=Object(N.b)(e).filter(function(e){return!!e.enterprise_id&&e.enterprise_id===r});return{accountType:t,currentTeam:Object(q.d)(e),visibleFilterState:Object(g.j)(e),sharedTeams:{state:n.state,teams:Object(q.j)(e,n.teamIds).map(function(e){return{id:e.id,name:Object(X.f)(e)}})},filters:Object(g.m)(e),filterSuggestions:Object(q.j)(e,a).map(function(e){return e.id}),showEnterpriseOptions:Object(lt.d)(e),filterWorkspaceOnly:Object(M.f)(e),hideDeactivatedUsers:Object(M.d)(e),timezoneSuggestions:Object(g.o)(e),teamProfileState:Object(g.n)(e),featureSearchLimitTeamFilter:Object(N.m)(e,"feature_search_limit_team_filter"),allAccountsOfCurrentEnterprise:i,loggedInEnterpriseTeams:i.map(function(t){return Object(q.i)(e,t.id)}),searchOnlyWorkspaceTeamId:Object(g.q)(e),selfEnterpriseOrgName:Object(q.e)(e)}},Xr)(Qr),Zr=(n("yNt+"),new J.b("search")),$r=(m.b.oneOf(Object(dt.a)(U.g)),m.b.func,m.b.number,m.b.func,m.b.object,m.b.object,m.b.func,m.b.func,m.b.object,m.b.object,m.b.func,m.b.objectOf(m.b.string),m.b.objectOf(m.b.string),m.b.func.isRequired,m.b.bool,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.func,m.b.bool,m.b.string,m.b.bool,m.b.bool,{sort:U.g.relevant,setSort:j.a,scrollPosition:0,setViewScrollPosition:j.a,moduleState:{},peopleResponse:{items:{}},setPageForModule:j.a,fetchSearchResultsByModule:j.a,logger:{error:j.a,info:j.a},telemeter:Oe.d,clogSearchPeopleClick:j.a,memberSummaryLabels:{},iidMap:{},showNewPeopleSearch:!1,displayEmailAddresses:!1,currentDisplayQuery:"",featureFantailNurture:!1,markPeopleSearchSeen:j.a,incrementPeopleSearchSeenCount:j.a,onClickRefreshSearch:j.a,showMemberProfile:j.a,closeSearch:j.a,startImByMemberId:j.a,enqueueToast:j.a,openSearchFeedbackDialog:j.a,shouldIncrementPeopleSearchSeenCount:!1}),ei=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(I.a)(n,["setScrollPosition","pageForward","pageBack","pageSearchResults","setListRef","onNavigateError","onViewProfileError","onFeedbackClick"]),n.searchResultsContainerRef=p.a.createRef(),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.logTelemetry()}},{key:"componentDidUpdate",value:function(e){e.moduleState.loading===this.props.moduleState.loading&&e.moduleState.error===this.props.moduleState.error&&e.moduleState.page===this.props.moduleState.page||this.logTelemetry()}},{key:"componentWillUnmount",value:function(){this.props.showNewPeopleSearch&&this.props.markPeopleSearchSeen(),this.props.shouldIncrementPeopleSearchSeenCount&&this.props.incrementPeopleSearchSeenCount()}},{key:"onSelectItem",value:function(){var e=Object(ur.coroutine)(regeneratorRuntime.mark(function e(t){var n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.clogSearchPeopleClick({type:F.b.people,iid:this.props.iidMap[t.id],userId:t.id}),e.prev=1,e.next=4,Object(ur.resolve)(this.props.startImByMemberId({memberId:t.id}));case 4:e.next=10;break;case 6:throw e.prev=6,e.t0=e.catch(1),this.onNavigateError(function(){return n.onSelectItem(t)}),e.t0;case 10:return e.prev=10,e.next=13,Object(ur.resolve)(this.props.showMemberProfile({memberId:t.id}));case 13:e.next=19;break;case 15:throw e.prev=15,e.t1=e.catch(10),this.onViewProfileError(function(){return n.onSelectItem(t)}),e.t1;case 19:this.props.closeSearch();case 20:case"end":return e.stop()}},e,this,[[1,6],[10,15]])}));return function(t){return e.apply(this,arguments)}}()},{key:"onNavigateError",value:function(e){this.props.enqueueToast({element:p.a.createElement(va.b,C()({position:"bottom-right",icon:"warning",showCloseButton:!0},this.getToastOffset()),p.a.createElement("span",null,Zr.rt("<strong>Couldn\u2019t open conversation</strong>. This could be a connection issue or just a temporary blip. <a>Try again</a>",null,function(t){var n=t.tag,a=t.key,r=t.text;switch(n){case"strong":return p.a.createElement("strong",{key:a},r);case"a":return p.a.createElement(Me.a,{key:a,onClick:e},r);default:return null}})))})}},{key:"onViewProfileError",value:function(e){this.props.enqueueToast({element:p.a.createElement(va.b,C()({position:"bottom-right",icon:"warning",showCloseButton:!0},this.getToastOffset()),p.a.createElement("span",null,Zr.rt("<strong>Couldn\u2019t open profile</strong>. This could be a connection issue or just a temporary blip. <a>Try again</a>",null,function(t){var n=t.tag,a=t.key,r=t.text;switch(n){case"strong":return p.a.createElement("strong",{key:a},r);case"a":return p.a.createElement(Me.a,{key:a,onClick:e},r);default:return null}})))})}},{key:"onFeedbackClick",value:function(){this.props.openSearchFeedbackDialog({module:"people"})}},{key:"getToastOffset",value:function(){return this.searchResultsContainerRef.current?this.searchResultsContainerRef.current.getWrappedInstance().getToastOffset():{}}},{key:"getVisiblePeople",value:function(){return this.props.peopleResponse.items[this.props.moduleState.page||1]||[]}},{key:"setListRef",value:function(e){this.listEl=e}},{key:"setScrollPosition",value:function(e){this.props.setViewScrollPosition({view:"people",position:e})}},{key:"logTelemetry",value:function(){if(!this.props.moduleState.loading&&this.props.moduleState.error===U.e.None){var e=this.getVisiblePeople();e&&this.props.telemeter.count("search_ui_people_results_view_count",e.length)}}},{key:"pageForward",value:function(){this.props.clogSearchPeopleClick({type:F.b.peoplePageNext}),this.listEl&&this.listEl.focus(),this.searchResultsContainerRef.current.getWrappedInstance().scrollTop(),this.props.logger.info("IMPROVED_SEARCH","Page forward in people results"),this.pageSearchResults(1)}},{key:"pageBack",value:function(){this.props.clogSearchPeopleClick({type:F.b.peoplePagePrev}),this.listEl&&this.listEl.focus(),this.searchResultsContainerRef.current.getWrappedInstance().scrollTop(),this.props.logger.info("IMPROVED_SEARCH","Page backwards in people results"),this.pageSearchResults(-1)}},{key:"pageSearchResults",value:function(e){var t=this.props,n=t.moduleState,a=t.peopleResponse,r=t.sort,i=Math.max(n.page+e,1);a.items[i]?this.props.setPageForModule({moduleType:"people",page:i}):this.props.fetchSearchResultsByModule({module:"people",sort:r,reason:"search-people-page",page:i})}},{key:"renderEmptyResults",value:function(){var e=this.props,t=e.displayEmailAddresses,n=e.currentDisplayQuery,a=e.featureFantailNurture,r=n.replace(/<@[^>]*>/g,"").indexOf("@")>-1;return!t&&r&&a?p.a.createElement(d.Fragment,null,p.a.createElement("p",null,Zr.t("Slack couldn\u2019t find any people related to your search.")),p.a.createElement("p",null,Zr.t("Searching for people by email has been disabled in this workspace. Questions? Contact a Workspace Admin."))):p.a.createElement(d.Fragment,null,p.a.createElement("p",null,Zr.t("Slack couldn\u2019t find any people related to your search. You may want to try\u2026")),p.a.createElement("ul",null,p.a.createElement("li",null,Zr.t("Using different keywords.")),p.a.createElement("li",null,Zr.t("Checking for typos.")),p.a.createElement("li",null,Zr.t("Adjusting your filters."))))}},{key:"render",value:function(){var e=this,t=this.props,n=t.sort,a=t.setSort,r=t.scrollPosition,i=t.moduleState,o=t.peopleResponse,s=t.memberSummaryLabels,l=[[U.g.relevant,Zr.t("Most relevant")],[U.g.name,Zr.t("Name (A to Z)")]],c=Object(fa.a)(l),u=this.getVisiblePeople(),d=u.reduce(function(e,t){return e[t.id]=t,e},{}),m=o.pagination&&o.pagination.total_count,h=m>0;o.debug&&Object(ga.a)("peopleSearchExplain",Object(ba.a)(o.debug.features,function(e){return-e.total_score}));var b=o&&o.pagination&&o.pagination.page_count||0,f=b>1&&!i.loading,g=i.page||1;return p.a.createElement(Kn,{id:"c-search__tab_people",module:"people",loading:i.loading,errorType:i.error,scrollPosition:r,setScrollPosition:this.setScrollPosition,filterUI:p.a.createElement(Jr,null),numResults:m,emptyResultsTitle:Zr.t("No results"),ref:this.searchResultsContainerRef,onClickRefreshSearch:this.props.onClickRefreshSearch,sortDropdown:p.a.createElement(Z.e,{"data-qa":"people_sort_toggle",renderMenu:function(e){var t=e.onTriggerClose;return p.a.createElement(Z.f,null,l.map(function(e){var n=zn()(e,2),r=n[0],i=n[1];return p.a.createElement(Z.b,{"data-qa-sort":r,key:r,onSelected:function(){a({sort:r}),t()}},i)}))},position:"bottom-right",width:180,offsetX:0,offsetY:0},p.a.createElement($.c,{"data-qa":"people_sort_selection"},c[n],p.a.createElement(ee.b,{type:"chevron-down",inline:!0}))),alertHeader:this.props.showNewPeopleSearch&&p.a.createElement("div",{className:"c-channel_search__new_feature_alert"},p.a.createElement(ee.b,{className:"c-channel_search__new_feature_icon",type:"sparkles_filled"}),p.a.createElement("div",null,Zr.rt("<strong>Find people at your organization</strong>. Now you can search for people by their name, profile info, or even the topics they talk about.",{fallbackHash:"07cbc99aff3e533e8b10d9bf430890987c65f7ae"})))},h?p.a.createElement(xn,{ref:this.setListRef,ids:u.map(function(e){return e.id}),onSelectItem:function(t,n){return e.onSelectItem(e.props.getMemberById(n))},itemAriaLabel:function(e){return s[e]},renderItem:function(t){return p.a.createElement(Mr,{key:t,iid:e.props.iidMap[t],member:e.props.getMemberById(t),memberWithHighlights:d[t],onClickMember:function(n){n.preventDefault(),e.onSelectItem(e.props.getMemberById(t))},startImByMemberId:e.props.startImByMemberId,showMemberProfile:e.props.showMemberProfile,onViewProfileError:e.onViewProfileError,onNavigateError:e.onNavigateError})}}):this.renderEmptyResults(),!f&&p.a.createElement(tt.a,{className:m>0?"c-search__feedback_small":"c-search__feedback",onClick:this.onFeedbackClick}),p.a.createElement(rt,{visible:f,currentPageOffset:g,totalPageCount:b,onForward:this.pageForward,onBack:this.pageBack,onFeedbackClick:this.onFeedbackClick}))}}]),t}(d.Component);ei.displayName="PeopleViewBase",ei.defaultProps=$r;var ti=Object(f.b)(function(e){var t=Object(g.i)(e,"people")||{},n=Object(H.q)(e,{module:"people"})||{items:{}},a=n.items[t.page||1]||[],r={},i={};return a.forEach(function(t){var n=Object(ot.d)(e,t.id);i[t.id]=Object(hr.a)({name:Object(xt.K)(n),isGuest:Object(xt.wb)(n),isSelf:Object(xt.Hb)(n),isDeleted:Object(xt.mb)(n),isAppOrBot:Object(xt.ib)(n)}),r[t.id]=t.iid}),{sort:Object(M.e)(e),scrollPosition:Object(g.p)(e).people,moduleState:t,peopleResponse:n,iidMap:r,memberSummaryLabels:i,getMemberById:function(t){return Object(ot.d)(e,t)},logger:Object(R.a)({state:e}),telemeter:Object(Oe.c)({state:e}),showNewPeopleSearch:!Object(pe.j)(e,"seen_people_search"),displayEmailAddresses:Object(pr.a)(e,"display_email_addresses"),currentDisplayQuery:Object(Dn.b)(e),featureFantailNurture:Object(mr.a)(e),shouldIncrementPeopleSearchSeenCount:Object(pe.f)(e)}},function(e){return{setSort:function(){return e(kt.apply(void 0,arguments))},setViewScrollPosition:function(){return e(P.H.apply(void 0,arguments))},setPageForModule:function(){return e(P.s.apply(void 0,arguments))},fetchSearchResultsByModule:function(){return e(D.d.apply(void 0,arguments))},clogSearchPeopleClick:function(){return e(F.j.apply(void 0,arguments))},markPeopleSearchSeen:function(){return e(D.i.apply(void 0,arguments))},incrementPeopleSearchSeenCount:function(){return e(D.e.apply(void 0,arguments))},showMemberProfile:function(){return e(V.j.apply(void 0,arguments))},closeSearch:function(){return e(K.a.apply(void 0,arguments))},startImByMemberId:function(){return e(dr.startImByMemberId.apply(void 0,arguments))},enqueueToast:function(){return e(ka.c.apply(void 0,arguments))},openSearchFeedbackDialog:function(){return e(D.p.apply(void 0,arguments))}}})(ei),ni=n("TnU2"),ai=(n("DFT4"),new J.b("search")),ri=(m.b.string.isRequired,m.b.func.isRequired,m.b.bool,m.b.bool,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderSwitchItem=n.renderSwitchItem.bind(n),n}return u()(t,e),o()(t,[{key:"renderSwitchItem",value:function(e){var t=this,n=e.name,a=e.id;return p.a.createElement(Fe.a,{key:a,className:b()("c-search__tab c-tabs__tab",{"c-tabs__tab--active":this.props.tab===a}),onClick:function(){return t.props.setTab({tab:a})},"aria-selected":this.props.tab===a,role:"tab","data-qa":"search_tab_"+a.toString().toLowerCase(),"data-qa-tab":a},n)}},{key:"render",value:function(){var e=this,t=[{id:"messages",name:ai.t("Messages")},{id:"files",name:ai.t("Files")},{id:"channels",name:p.a.createElement(d.Fragment,null,ai.t("Channels"))}];return t.push({id:"people",name:p.a.createElement(d.Fragment,null,ai.t("People"),this.props.showNewPeopleSearch&&p.a.createElement(d.Fragment,null," ",p.a.createElement(ni.a,null,ai.t("NEW"))))}),p.a.createElement("div",{role:"tablist",className:b()("c-search__tabs","c-tabs__tab_menu",{"c-search__tabs--primary_search_legacy":this.props.usePrimarySearch&&!Object(v.a)(),"c-search__tabs--primary_search_sonic":this.props.usePrimarySearch&&Object(v.a)()})},t.map(function(t){return e.renderSwitchItem(t)}))}}]),t}(d.PureComponent));ri.displayName="SearchTypeSwitch",ri.defaultProps={usePrimarySearch:!1,showNewPeopleSearch:!1};var ii={setTab:Y},oi=Object(f.b)(function(e){return{tab:Object(g.t)(e),usePrimarySearch:Object(_.a)(e),showNewPeopleSearch:!Object(pe.j)(e,"seen_people_search")}},ii)(ri),si=(m.b.string.isRequired,m.b.func.isRequired,m.b.bool,function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"renderCurrentView",value:function(){switch(this.props.tab){case"messages":return p.a.createElement(ia,{onClickRefreshSearch:this.props.onClickRefreshSearch});case"files":return p.a.createElement(ha,{onClickRefreshSearch:this.props.onClickRefreshSearch});case"channels":return p.a.createElement(cr,{onClickRefreshSearch:this.props.onClickRefreshSearch});case"people":return p.a.createElement(ti,{onClickRefreshSearch:this.props.onClickRefreshSearch});default:return null}}},{key:"render",value:function(){var e=b()("c-search__container",{"c-search__container--primary_search_sonic":this.props.usePrimarySearch&&Object(v.a)(),"c-search__container--primary_search_legacy":this.props.usePrimarySearch&&!Object(v.a)()});return p.a.createElement(y.a,{id:k.H.SEARCH},p.a.createElement("div",{className:e},p.a.createElement("div",{className:"c-search","data-qa":"search_view"},!this.props.usePrimarySearch&&p.a.createElement(oi,null),this.renderCurrentView())))}}]),t}(d.PureComponent));si.displayName="SearchView",si.defaultProps={usePrimarySearch:!1};t.a=Object(f.b)(function(e){return{tab:Object(g.t)(e),usePrimarySearch:Object(_.a)(e)}})(si)},"5oz1":function(e,t,n){},"67Ky":function(e,t,n){},"6EwF":function(e,t,n){"use strict";n.r(t);var a=n("QbLZ"),r=n.n(a),i=n("iCc5"),o=n.n(i),s=n("V7oC"),l=n.n(s),c=n("FYw3"),u=n.n(c),d=n("mRg0"),p=n.n(d),m=n("NZ+B"),h=n("tn36"),b=n("kxpR"),f=n.n(b),g=n("aK/h"),_=n("XHGt"),v=n("TSYQ"),y=n.n(v),k=n("sJy+"),O=n("U3Q0"),C=n("Rszm"),E=n("O0RF"),j=n("8wro"),S=n("XfeM"),I=n("t85p"),w=n("brL+"),N=n("S3eg"),T=n("h9dl"),A=n("H2PH"),R=n("nNoG"),P=n("oLrU"),M=n("e+d/"),x=new R.b("snippet-dialog"),F=Object(S.b)("Upload a Snippet, maybe share it too",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.broadcast,r=n.fileName,i=n.fileType,o=n.fileContent,s=n.channelOrMemberId,l=n.threadTs,c=n.introMessage,u=n.blocks,d=t(),p=Object(I.m)(d,"feature_sonic_snippets"),m=r||(p?x.t("Untitled"):""),h=M.a[i],b=h&&h.mimeType||"text/plain",f=new Blob([o],{type:b});f.name=m,f.snippetType=i;var g=Object(w.b)(d),_=Object(A.a)(g);return s?e(Object(T.a)({channelOrMemberId:s})).then(function(t){return _.uploadFiles({files:[f],shareData:{channelId:t,threadTs:t?l:void 0,clientMsgId:t?Object(P.a)():void 0,introMessage:c,blocks:u,broadcast:!(!t||!l)&&a}}).then(function(){return e(Object(N.a)({id:t}))})}):_.uploadFiles({files:[f]})});F.meta={name:"uploadSnippet",key:"actionsUploadSnippetUploadSnippet",description:"Upload a Snippet, maybe share it too"},F.propTypes={fileName:g.b.string,fileType:g.b.string,fileContent:g.b.string.isRequired,channelOrMemberId:g.b.string,threadTs:g.b.string,introMessage:g.b.string,blocks:g.b.array,broadcast:g.b.bool};var L=F,D=n("AzV5"),U=n("aLpA"),B=n("RB1+"),q=n("JvzI"),H=n("+1yX"),W=n("XoJV"),G=n("dhvi"),K=n("IyaR"),V=n("Y6FH"),z=n("Hvpu"),Y=n("Zwlx"),Q=n("iJ4v"),X=n("r6UO");n("T/b3");n.d(t,"BaseSnippetDialog",function(){return $});var J=new R.b("snippet-dialog"),Z=(g.b.string,g.b.string,g.b.string,g.b.string,g.b.bool,g.b.string,g.b.string,g.b.string,g.b.object,g.b.string,g.b.func.isRequired,g.b.func.isRequired,g.b.func.isRequired,g.b.bool,g.b.string,g.b.func.isRequired,g.b.string,g.b.func.isRequired,g.b.string,g.b.oneOf(["mpim","im","channel","private"]),g.b.node.isRequired,g.b.bool.isRequired,g.b.bool.isRequired,g.b.array,g.b.func.isRequired,g.b.func.isRequired,g.b.bool,{initialName:"",initialType:void 0,initialSnippetText:"",initialChannelId:void 0,initialShareWith:void 0,threadTs:void 0,viewContext:void 0,resetSnippetText:void 0,initialContents:void 0,resetChannelId:void 0,featureSonicSnippets:!1,msgText:"",channelType:null,selectedChannelId:null,disallowedKeywordInMsgText:null,msgOps:void 0,featureWysiwygComposer:!1}),$=function(e){function t(e){o()(this,t);var n=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(h.a)(n,["handleBroadcastChange","handleFileNameChange","handleFileTypeChange","handleFileContentChange","handleShareWithChange","handleMsgTextChange","handleSubmit","handleSubmitError","shouldShowSpeedBump","handleCancel"]),n.state={fileName:e.initialName,fileType:e.initialType,fileContent:e.initialSnippetText,shareWith:Object(m.a)(e.initialShareWith)?e.initialShareWith:!!e.initialChannelId,overMsgLengthLimit:!1,broadcast:!1},n}return p()(t,e),l()(t,[{key:"isGoButtonDisabled",value:function(){var e=this.props,t=e.disallowedKeywordInMsgText,n=e.canPostInSelectedChannel,a=e.threadTs,r=e.canThread,i=this.state,o=i.overMsgLengthLimit,s=i.fileName,l=i.fileContent,c=i.shareWith,u=s.length>U.y;return c&&!n&&!a||c&&a&&!r||!!t||!l||o||u}},{key:"shouldShowSpeedBump",value:function(e){if("cancel"===e||"close"===e){var t=this.state.fileContent,n=this.props,a=n.resetSnippetText,r=n.initialSnippetText;return n.featureWysiwygComposer?t!==r:t!==a}return!1}},{key:"handleBroadcastChange",value:function(e){this.setState(function(){return{broadcast:e}})}},{key:"handleFileNameChange",value:function(e){this.setState(function(){return{fileName:e}})}},{key:"handleFileTypeChange",value:function(e){this.setState(function(){return{fileType:e}})}},{key:"handleFileContentChange",value:function(e){this.setState(function(){return{fileContent:e}})}},{key:"handleShareWithChange",value:function(e){var t=e.target.checked;this.setState(function(){return{shareWith:!!t}})}},{key:"handleMsgTextChange",value:function(e){var t=e.text,n=e.msgOps,a=e.overLimit;this.props.featureWysiwygComposer?this.props.setMsgOps(n):this.props.setMsgText(t),this.setState(function(){return{overMsgLengthLimit:a}})}},{key:"handleSubmit",value:function(){var e=this.props,t=e.selectedChannelId,n=e.msgText,a=e.msgOps,r=e.threadTs,i=e.featureWysiwygComposer,o=this.state,s=o.broadcast,l=o.fileName,c=o.fileType,u=o.fileContent,d=o.shareWith,p=void 0;i&&(p=this.props.converMsgOpsToRichTextMessage({msgOps:a,channelId:t,inThread:!!r})),this.props.uploadSnippet({fileName:Object(W.c)({locale:Object(q.a)(),text:l}),fileType:c,fileContent:u,channelOrMemberId:d?t:void 0,threadTs:d?r:void 0,introMessage:n,blocks:i?p:void 0,broadcast:s}).catch(this.handleSubmitError),this.props.closeModal()}},{key:"handleSubmitError",value:function(){var e=this.props,t=e.selectedChannelId,n=e.threadTs,a=e.msgText,r=e.initialContents,i=e.resetSnippetText,o=e.resetChannelId,s=e.viewContext,l=this.state,c=l.fileName,u=l.fileType,d=l.fileContent,p=l.shareWith;this.props.openModal({element:f.a.createElement(te,{initialName:c,initialType:u,initialSnippetText:d,initialChannelId:t,initialShareWith:p,initialContents:r,initialText:a,threadTs:n,resetSnippetText:i,resetChannelId:o,viewContext:s})})}},{key:"handleCancel",value:function(){var e=this.props,t=e.resetSnippetText,n=e.initialContents,a=e.resetChannelId,r=e.threadTs,i=e.viewContext,o=e.featureWysiwygComposer,s=Object(B.a)({channelId:a,threadTs:r,viewContext:i});if(s)if(o){if(!n||!s.setContents||!s.focus)return;s.setContents(n),s.focus()}else if(t){if(!s.setText)return;s.setText(t)}}},{key:"maybeRenderBroadcast",value:function(){var e=this.props,t=e.threadTs,n=e.canPostInSelectedChannel,a=e.channelType,r=e.selectedChannelName,i=this.state.broadcast;return t&&n?f.a.createElement("div",{className:"p-snippet_dialog__broadcast_section"},f.a.createElement(X.a,{channelType:a,selectedChannelName:r,value:i,onChange:this.handleBroadcastChange})):null}},{key:"renderShareWith",value:function(){var e=this.state.shareWith,t=J.t("Share with:",{fallbackHash:"134bfa9822f411e84749498f9747ec887fd5d0fd",fallbackHashNs:"share-dialog"});return f.a.createElement(E.a,{text:t,htmlFor:"create-snippet-share-with-checkbox",type:"inline"},f.a.createElement(C.a,{id:"create-snippet-share-with-checkbox","data-qa":"share_with",checked:e,onChange:this.handleShareWithChange}))}},{key:"renderChannelPicker",value:function(){var e=this.props,t=e.selectedChannelId,n=e.setSelectedChannel,a=this.state.shareWith;return f.a.createElement(V.a,{onChange:n,initialChannelId:t,isDisabled:!a,dialogType:"share_snippet_dialog"})}},{key:"renderShareWithPicker",value:function(){var e=this.props,t=e.selectedChannelId,n=e.featureSonicSnippets,a=e.threadTs;return a?f.a.createElement(Q.a,{label:n?J.t("Sharing snippet in a thread"):"",channelId:t,threadTs:a}):f.a.createElement("div",{className:"p-snippet_dialog__footer_share_inputs"},this.renderShareWith(),this.renderChannelPicker())}},{key:"renderShareAlert",value:function(){if(!this.state.shareWith)return null;var e=Object(Y.a)(r()({},this.props));return e?f.a.createElement("div",{className:"p-share_dialog__section"},f.a.createElement(k.d,{type:"inline",level:"warning",className:"margin_bottom_100"},e)):null}},{key:"renderMessageInput",value:function(){var e=this.props,t=e.selectedChannelId,n=e.msgText,a=this.state.shareWith,r=J.t("Add a message, if you\u2019d like.",{fallbackHash:"23c9aa1fa55b5fbe8da1b3748ad70b595d6fadc5",fallbackHashNs:"share-dialog"}),i=y()("p-share_dialog__section","p-share_dialog__create_snippet_message_input",{"p-share_dialog__create_snippet_message_input--hide":!a}),o=Object(H.a)(t)?t:void 0;return f.a.createElement("div",{className:i},f.a.createElement(K.a,{text:n,channelId:o,onTextChange:this.handleMsgTextChange,enabled:a,placeholder:r,ariaLabel:r,onEnter:this.handleSubmit}),this.maybeRenderBroadcast())}},{key:"render",value:function(){var e=this.state,t=e.fileName,n=e.fileType,a=e.fileContent;if(!this.props.featureSonicSnippets)return null;var r=J.t("Create snippet"),i=J.t("Create Snippet");return f.a.createElement(O.b,{className:"p-snippet_dialog",title:r,goButtonText:i,useSlackScrollbarWithPadding:!0,shouldCloseOnGo:!1,onGo:this.handleSubmit,onClose:this.handleCancel,footerText:this.renderShareWithPicker(),goButtonIsDisabled:this.isGoButtonDisabled(),getShouldShowSpeedBump:this.shouldShowSpeedBump,speedBumpTitleText:J.t("Are you sure you want to discard this snippet permanently?"),speedBumpCancelButtonText:J.t("No, keep it"),speedBumpContinueButtonText:J.t("Yes, discard this snippet"),showCancelButton:!1},f.a.createElement(j.a,{fileName:t,onFileNameChange:this.handleFileNameChange,fileType:n,onFileTypeChange:this.handleFileTypeChange,fileContent:a,onFileContentChange:this.handleFileContentChange,onKBSubmit:this.handleSubmit}),this.renderShareAlert(),this.renderMessageInput())}}]),t}(b.PureComponent);$.displayName="SnippetDialog",$.defaultProps=Z;var ee=Object(_.b)(function(e,t){return r()({},Object(z.b)(e,t),{featureSonicSnippets:Object(I.m)(e,"feature_sonic_snippets")})},function(e){return{uploadSnippet:function(){return e(L.apply(void 0,arguments))},closeModal:function(){return e(G.a.apply(void 0,arguments))},openModal:function(){return e(G.e.apply(void 0,arguments))},converMsgOpsToRichTextMessage:function(){return e(D.a.apply(void 0,arguments))}}})($),te=Object(z.a)(ee);t.default=te},"6S4m":function(e,t,n){},"6mX7":function(e,t,n){},"6ne/":function(e,t,n){"use strict";var a=n("QbLZ"),r=n.n(a),i=n("jo6Y"),o=n.n(i),s=n("kxpR"),l=n.n(s),c=n("aK/h"),u=n("hXpn"),d=n("kd6D"),p=n("0z7M"),m=(n("JfyJ"),c.b.string,c.b.string.isRequired,c.b.bool,c.b.bool,c.b.bool,c.b.node,{className:void 0,isActive:!1,isDeactivated:!1,isDisabled:!1,secondaryContent:void 0});function h(e){var t=e.className,n=e.isActive,a=e.isDeactivated,i=e.isDisabled,s=e.secondaryContent,c=o()(e,["className","isActive","isDeactivated","isDisabled","secondaryContent"]),m=void 0;return n?m=i||a?d.c.highlightDim:d.c.highlightLight:(i||a)&&(m=d.c.dim),l.a.createElement(u.a,{className:t,primaryContent:l.a.createElement(p.a,r()({isDeactivated:a},c)),secondaryContent:s,size:"medium",style:m})}h.displayName="MediumUserGroupListEntity",h.defaultProps=m,t.a=h},"7ARk":function(e,t,n){"use strict";var a=n("XfeM"),r=n("BrU6"),i=n("GbAX"),o=n("Mj3f"),s=n("HG/F"),l=Object(a.b)("Reset people search UI",function(e,t){var n=t().searchUi.sharedTeams.teamIds;e(Object(o.d)()),n&&Array.isArray(n)&&n.length&&e(Object(s.e)({teamIds:n.slice(0,3)}))});l.meta={name:"resetPeopleSearchUi",key:"actionsUniversalSearchResetPeopleSearchUiResetPeopleSearchUi",description:"Reset people search UI"};var c=l,u=n("iW0Y"),d=n("tfx1"),p=n("YYb+"),m=n("JrUZ"),h=n("smh8"),b=n("hPzE"),f=Object(a.b)("Clear the search input, resetting the editable query and ending the search and query sessions",function(e,t){var n=t();if(e(Object(r.a)({textyString:"",fetchAutocompleteSuggestions:!0})),e(Object(u.a)({interfaceMode:d.a.EDIT})),e(Object(m.r)()),e(Object(o.l)()),e(Object(h.a)()),e(Object(o.c)()),e(Object(p.g)()),e(c()),!Object(i.u)(n)){e(Object(b.c)());var a=Object(i.s)(n);a&&(clearTimeout(a),e(Object(o.E)({sessionTimeoutId:null})))}});f.meta={name:"clearSearchInput",key:"actionsUniversalSearchClearSearchInputClearSearchInput",description:"Clear the search input, resetting the editable query and ending the search and query sessions"},f.propTypes=null;t.a=f},"81jb":function(e,t,n){"use strict";var a=n("kxpR"),r=n.n(a),i=n("aK/h"),o=n("MnCE"),s=n("TSYQ"),l=n.n(s),c=(n("dVmK"),i.b.node.isRequired,i.b.string,i.b.string,{className:void 0,"data-qa":void 0}),u=function(e){var t=e.children,n=e.className,a=e["data-qa"];return r.a.createElement("div",{className:l()(n,"c-card"),"data-qa":a},t)};u.displayName="Card",u.displayName="Card",u.defaultProps=c;var d=Object(o.a)(u),p=(i.b.node.isRequired,i.b.string,i.b.string,{className:void 0,"data-qa":void 0}),m=function(e){var t=e.children,n=e.className,a=e["data-qa"];return r.a.createElement("div",{className:l()("c-card__header",n),"data-qa":a},t)};m.displayName="CardHeader",m.displayName="CardHeader",m.defaultProps=p;var h=Object(o.a)(m),b=(i.b.node.isRequired,i.b.string,i.b.string,{className:void 0,"data-qa":void 0}),f=function(e){var t=e.children,n=e.className,a=e["data-qa"];return r.a.createElement("div",{className:l()("c-card__section",n),"data-qa":a},t)};f.displayName="CardSection",f.displayName="CardSection",f.defaultProps=b;var g=Object(o.a)(f);n.d(t,"a",function(){return d}),n.d(t,"b",function(){return h}),n.d(t,"c",function(){return g})},"8IIt":function(e,t,n){},"8ISr":function(e,t,n){},"8LWd":function(e,t,n){},"8Mhq":function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("ifKl"),p=n("kxpR"),m=n.n(p),h=n("XHGt"),b=n("aK/h"),f=n("M1FR"),g=n("HvGc"),_=n("1hAG"),v=n("kOzZ"),y=n("tn36"),k=n("aolG"),O=n("nNoG"),C=n("5mKg"),E=n("81nI"),j=n("ynxK"),S=new O.b("help"),I=(b.b.shape({open:b.b.number,closed:b.b.number,unread:b.b.number}),b.b.object.isRequired,b.b.object.isRequired,b.b.string,{tickets:{open:0,closed:0,unread:0},helpCenterToken:b.b.string}),w="/help/requests",N=function(e,t,n,a){return e.closed>0&&0===e.unread&&0===e.open?m.a.createElement("div",null,m.a.createElement("span",null,S.t("No pending requests.")),m.a.createElement(j.a,{className:"p-help_modal__requests",onClick:function(){return function(e,t,n){e.track("HELP_MODAL_ACTION",{action:"view_request_history",trigger:"click_view_request_history"}),Object(C.R)(n,Object(E.a)(w,t))}(t,n,a)},"data-qa":"help_modal_requests_closed"},m.a.createElement("span",{className:"p-help_modal__requests__message bold"},S.t("View your help request history"),"."))):null},T=function(e,t,n,a){if(e>0){var r=e>1?S.t("You have new replies to your help requests."):S.t("You have a new reply to your help request.");return m.a.createElement(j.a,{className:"p-help_modal__requests",onClick:function(){return function(e,t,n){e.track("HELP_MODAL_ACTION",{action:"view_new_replies",trigger:"click_view_new_replies"}),Object(C.R)(n,Object(E.a)(w,t))}(t,n,a)},"data-qa":"help_modal_requests_unread"},m.a.createElement("span",{className:"p-help_modal__requests_badge unread"},e),m.a.createElement("span",{className:"p-help_modal__requests__message bold"},r))}return null},A=function(e,t,n,a){if(e>0){var r=e>1?S.t("You have open help requests."):S.t("You have an open help request.");return m.a.createElement(j.a,{className:"p-help_modal__requests",onClick:function(){return function(e,t,n){e.track("HELP_MODAL_ACTION",{action:"view_open_requests",trigger:"click_view_open_requests"}),Object(C.R)(n,Object(E.a)(w,t))}(t,n,a)},"data-qa":"help_modal_requests_read"},m.a.createElement("span",{className:"p-help_modal__requests_badge read"},e),m.a.createElement("span",{className:"p-help_modal__requests__message read bold"},r))}return null},R=function(e){return m.a.createElement("div",{className:"display_flex flex_direction_column"},N(e.tickets,e.clogger,e.helpCenterToken,e.team),m.a.createElement("div",{className:e.tickets.unread>0?"padding_top_50":""},T(e.tickets.unread,e.clogger,e.helpCenterToken,e.team)),m.a.createElement("div",{className:e.tickets.closed>0||e.tickets.unread>0?"padding_top_50":""},A(e.tickets.open,e.clogger,e.helpCenterToken,e.team)))};R.displayName="TicketsStatus",R.defaultProps=I;var P=R,M=n("+6YQ"),x=n("7nxQ"),F=n("od5y"),L=n("ftfc"),D=(n("zG9j"),new O.b("help")),U=(b.b.string,b.b.string,b.b.object.isRequired,b.b.shape({open:b.b.number,closed:b.b.number,unread:b.b.number}),b.b.func,b.b.func,b.b.string.isRequired,b.b.object.isRequired,{query:"",helpCenterToken:"",tickets:{closed:0,read:0,unread:0},onClose:d.a,showKeyboardShortcuts:d.a}),B=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isModalOpen:!0,query:e.query},n.zdLocale=Object(x.a)(),Object(y.a)(n,["onClickBrowseLink","onClickContactUsButton","onClickShortcutsButton","onOpenSearchLink","onQueryChange"]),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.trigger;e.clogger.track("HELP_MODAL_ACTION",{action:"open_modal",trigger:t})}},{key:"onClickBrowseLink",value:function(){var e=this.state.query,t=this.props.clogger,n=Object(E.b)({zdLocale:this.zdLocale,query:e,sidTrackingToken:this.props.helpCenterToken});e&&t.track("HELP_MODAL_SEARCH",{search_terms:e}),t.track("HELP_MODAL_ACTION",{action:"browse_all",trigger:"click_browse_all"}),window.open(n)}},{key:"onClickContactUsButton",value:function(){var e=this.props,t=e.clogger,n=e.team;t.track("HELP_MODAL_ACTION",{action:"submit_new_request",trigger:"click_submit_new_request"}),Object(C.R)(n,Object(E.a)("/help/requests/new",this.props.helpCenterToken))}},{key:"onClickShortcutsButton",value:function(){var e=this.props.clogger;this.setState(function(){return{isModalOpen:!1}}),e.track("HELP_MODAL_ACTION",{action:"keyboard_shorcuts",trigger:"click_keyboard_shorcuts"}),this.props.showKeyboardShortcuts()}},{key:"onOpenSearchLink",value:function(e){var t=e.url,n=e.query,a=this.props.clogger;n&&a.track("HELP_MODAL_SEARCH",{search_terms:this.state.query,locale:this.zdLocale}),a.track("HELP_MODAL_ZD_HIT",{zd_article_url:t})}},{key:"onQueryChange",value:function(e){this.setState(function(){return{query:e}})}},{key:"render",value:function(){var e=this.state.isModalOpen,t=this.props,n=t.tickets,a=t.clogger,r=t.onClose,i=t.team,o=t.query;return m.a.createElement(k.a,{isOpen:e,showCancelButton:!1,showGoButton:!1,onCancel:r,modalClasses:"p-help_modal",contentLabel:"help-modal","data-qa":"help_modal"},m.a.createElement(M.b,{className:"p-help_modal__shortcuts__button c-button--outline",type:"outline",onClick:this.onClickShortcutsButton,"data-qa":"help_modal_shortcuts_button"},m.a.createElement(F.b,{type:"keyboard",className:"small_right_margin"}),m.a.createElement("strong",null,D.t("Keyboard shortcuts"))),m.a.createElement("div",{className:"display_flex align_items_baseline justify_content_between padding_top_200"},m.a.createElement("h1",{className:"p-help_modal_title"},D.t("How can we help?")),m.a.createElement(j.a,{className:"p-help_modal__browse display_flex align_items_end",onClick:this.onClickBrowseLink,"data-qa":"help_modal_browse"},m.a.createElement("span",{className:"p-help_modal__browse__text"},D.t("Browse all answers")),m.a.createElement(F.b,{type:"arrow-large-right",className:"padding_left_100 p-help_modal__browse__icon"}))),m.a.createElement(L.a,{query:o,onOpenLink:this.onOpenSearchLink,autoFocus:!0,onQueryChange:this.onQueryChange}),m.a.createElement("div",{className:"p-help_modal__footer display_flex align_items_center justify_content_between"},m.a.createElement("div",{className:"p-help_modal__footer_tickets display_flex flex_direction_column"},m.a.createElement(P,{tickets:n,team:i,clogger:a,helpCenterToken:this.props.helpCenterToken})),m.a.createElement("div",{className:"p-help_modal__footer_contact"},m.a.createElement("div",null,m.a.createElement("span",{className:"p-help_modal__contact_us__message"},D.t("Can\u2019t find what you need, or have some feedback?")),m.a.createElement(M.b,{type:"primary",size:"medium",className:"margin_left_100 p-help_modal__contact_us__button",onClick:this.onClickContactUsButton,"data-qa":"help_modal_contact_button"},D.t("Contact Us"))))))}}]),t}(p.Component);B.displayName="HelpModal",B.defaultProps=U;var q=B,H=(b.b.string,b.b.string,b.b.object.isRequired,b.b.func,b.b.string.isRequired,b.b.shape({open:b.b.number,closed:b.b.number,unread:b.b.number}).isRequired,b.b.object.isRequired,b.b.func,{query:"",helpCenterTrackingToken:"",showKeyboardShortcuts:d.a,onClose:d.a}),W=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.trigger,n=e.clogger,a=e.onClose,r=e.team,i=e.tickets,o=e.query;return m.a.createElement(q,{query:o,team:r,helpCenterToken:this.props.helpCenterTrackingToken,tickets:i,onClose:a,showKeyboardShortcuts:this.props.showKeyboardShortcuts,trigger:t,clogger:n})}}]),t}(p.Component);W.displayName="HelpModalContainer",W.defaultProps=H;var G={showKeyboardShortcuts:g.h},K=Object(h.b)(function(e){return{clogger:Object(v.a)({state:e}),helpCenterTrackingToken:Object(f.b)(e),team:Object(_.d)(e),tickets:Object(f.c)(e)}},G)(W);t.a=K},"8XR2":function(e,t,n){},"8vJI":function(e,t,n){"use strict";n.d(t,"a",function(){return c});var a=n("kxpR"),r=n.n(a),i=n("aK/h"),o=n("XfeM"),s=n("dhvi"),l=n("8Mhq"),c=Object(o.b)("Opens the help modal",function(e,t,n){e(Object(s.e)({element:r.a.createElement(l.a,n)}))});c.meta={name:"openHelpModal",key:"actionsHelpActionsOpenHelpModal",description:"Opens the help modal"},c.propTypes={trigger:i.b.string.isRequired}},"9/ob":function(e,t,n){"use strict";var a=n("aK/h"),r=n("t85p"),i={children:a.b.node,enabled:a.b.array,disabled:a.b.array,featureFlags:a.b.object};function o(e,t){var n=function(e){var t=e&&e.store;if(t&&t.getState)return t.getState();return}(t);if(!n)throw new Error("Feature component is being used without being provided a redux instance. A Feature component must have a Provider ancestor");var a=function(e,t){var n=t.enabled,a=void 0===n?[]:n,i=t.disabled,o=void 0===i?[]:i,s={};return a.concat(o).forEach(function(t){s[t]=!!Object(r.m)(e,t)}),{featureFlags:s}}(n,e).featureFlags,i=e.enabled,o=e.disabled,s=e.children;return i.length&&i.some(function(e){return!a[e]})?null:o.some(function(e){return a[e]})?null:s}o.contextTypes={store:a.b.object},o.propTypes=i,o.defaultProps={children:null,enabled:[],disabled:[],featureFlags:{}};var s=o;t.a=s},"97va":function(e,t,n){"use strict";var a=n("XfeM"),r=n("S3eg"),i=Object(a.b)("Switches to the App Launcher view",function(e){e(Object(r.a)({id:"Papps"}))});i.meta={name:"openAppLauncherView",key:"actionsOpenAppLauncherViewOpenAppLauncherView",description:"Switches to the App Launcher view"},t.a=i},"9Oym":function(e,t,n){},"9m5W":function(e,t,n){},"9pzU":function(e,t,n){},"9wy/":function(e,t,n){},ABxf:function(e,t,n){},AByf:function(e,t,n){},ALaB:function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("ifKl"),p=n("aK/h"),m=n("kxpR"),h=n.n(m),b=n("XHGt"),f=n("TSYQ"),g=n.n(f),_=n("fYfO"),v=n("t85p"),y=n("hOQf"),k=n("HvGc"),O=n("nNoG"),C=n("ynxK"),E=new O.b("message"),j=(p.b.string.isRequired,p.b.string.isRequired,p.b.string.isRequired,p.b.string.isRequired,p.b.string,p.b.func,p.b.bool,{className:void 0,showThread:d.a,featureNewRepliesAfterBcast:!1}),S=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return u()(t,e),o()(t,[{key:"onClick",value:function(e){var t=this.props,n=t.channelId,a=t.threadTs,r=t.ts;e.preventDefault(),this.props.showThread({channelId:n,threadTs:a,highlightTs:r})}},{key:"render",value:function(){var e=this.props,t=e.ts,n=e.latestReply;if(!e.featureNewRepliesAfterBcast||!n)return null;if(n<=t)return null;var a=g()("c-message__broadcast_footer",this.props.className);return h.a.createElement(C.a,{className:a,onClick:this.onClick},E.t("View newer replies"))}}]),t}(m.PureComponent);S.displayName="ThreadBroadcastFooter",S.defaultProps=j;t.a=Object(b.b)(function(e,t){var n=t.channelId,a=t.threadTs,r=Object(_.a)(e,n,a);return{latestReply:Object(y.C)(r),featureNewRepliesAfterBcast:Object(v.m)(e,"feature_new_replies_after_bcast")}},{showThread:k.l})(S)},AuaN:function(e,t,n){},BfV3:function(e,t,n){},BuFM:function(e,t,n){},Bui7:function(e,t,n){},C2OJ:function(e,t,n){},C8Zo:function(e,t,n){},"C9/x":function(e,t,n){"use strict";var a=n("pfyZ");t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isPinned,n=void 0!==t&&t,r=e.isEphemeral,i=void 0!==r&&r,o=e.isStarred,s=void 0!==o&&o,l=e.isBroadcast,c=void 0!==l&&l,u=e.subtype,d=e.sliHighlight;return{isPinned:n,isStarred:s,isEphemeral:i,isBroadcast:c,isCustomResponse:"slackbot_response"===u,isSliHighlight:Object(a.i)(d)}}},CDIG:function(e,t,n){},CDdZ:function(e,t,n){},CSrb:function(e,t,n){},CUc0:function(e,t,n){"use strict";var a=n("NFsq"),r=n("7EGn"),i=n("aK/h"),o=n("XfeM"),s=n("um7Q"),l=n("g5qt"),c=n("1hAG"),u=n("rWF5"),d=n("cewN"),p=n("n74X"),m=n("GdsW"),h=Object(o.b)("Open channel from another workspace",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.channelId,o=n.teamId,h=t();if(Object(u.u)())return(Object(a.a)(Object(l.lb)(h),o)?Promise.resolve():Object(m.i)(o)).then(function(){return new Promise(function(e){return window.requestAnimationFrame(e)})}).then(function(){if(Object(u.v)("3.2"))Object(l.l)(o,i);else{var e=document.createElement("iframe"),t=Object(d.c)({team:o,id:i});e.src="slack://channel"+t,document.body.appendChild(e),setTimeout(function(){return e.remove()},1e3)}});var b=Object(c.i)(h,o),f=Object(r.a)(b,"domain"),g=Object(s.b)(h,f)+"/messages/"+i;return Object(p.e)(g,o),Promise.resolve()});h.meta={name:"openChannelFromAnotherTeam",key:"actionsOpenChannelFromAnotherTeamOpenChannelFromAnotherTeam",description:"Open channel from another workspace"},h.propTypes={channelId:i.b.string.isRequired,teamId:i.b.string.isRequired},t.a=h},CoJr:function(e,t,n){},CsEc:function(e,t,n){"use strict";var a=n("QbLZ"),r=n.n(a),i=n("iCc5"),o=n.n(i),s=n("V7oC"),l=n.n(s),c=n("FYw3"),u=n.n(c),d=n("mRg0"),p=n.n(d),m=n("ifKl"),h=n("kxpR"),b=n.n(h),f=n("XHGt"),g=n("aK/h"),_=n("TSYQ"),v=n.n(_),y=n("4M+g"),k=n("pfyZ"),O=n("t85p"),C=n("Uk1S"),E=n("vmJv"),j=n("S3eg"),S=n("LzXF"),I=n("HvGc"),w=n("hOQf"),N=n("6kok"),T=n("C9/x"),A=n("YmYS"),R=n("2ojh"),P=n("od5y"),M=n("0f2Y"),x=n("o4CG"),F=n("tMdt"),L=n("Q/6m"),D=(n("GZud"),{pinned:"thumb-tack-filled",starred:"star",custom_response:"pencil",sli_highlight:"sparkles-filled",ephemeral:"eye-filled",broadcast:"jump"}),U=(g.b.object.isRequired,g.b.string,g.b.node,g.b.bool,g.b.bool,g.b.bool,g.b.oneOf(["light","dense"]),g.b.object,g.b.string,g.b.string,g.b.bool,g.b.bool,g.b.func,g.b.func,{className:void 0,children:void 0,showPinned:!0,showStarred:!0,showBroadcast:!1,theme:"light",sliHighlight:void 0,currentUserId:void 0,primaryView:void 0,isSelfIm:!1,isSlackbotIm:!1,dispatch:m.a,setBackground:m.a}),B=function(e){function t(e){o()(this,t);var n=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onBroadcastClick=n.onBroadcastClick.bind(n),n.renderHighlight=n.renderHighlight.bind(n),n.renderStarButton=n.renderStarButton.bind(n),n.renderBroadcast=n.renderBroadcast.bind(n),n.onStarClick=n.onStarClick.bind(n),n.labelText=null,n.primaryLabelType=null,n}return p()(t,e),l()(t,[{key:"componentDidMount",value:function(){this.setBackground()}},{key:"componentDidUpdate",value:function(){this.setBackground()}},{key:"onStarClick",value:function(){(0,this.props.dispatch)(Object(I.k)())}},{key:"onBroadcastClick",value:function(e){var t=this.props,n=t.dispatch,a=t.msg,r=t.primaryView;e.preventDefault(),r!==a.channel?n(Object(j.a)({id:a.channel,startTs:a.ts})):n(Object(S.c)({ts:a.ts,highlight:!0}))}},{key:"setBackground",value:function(){var e=this.props.setBackground;e({labels:this.labelText&&this.primaryLabelType})}},{key:"getLabelTypes",value:function(){var e=this.props,t=e.msg,n=e.sliHighlight,a=e.showPinned,r=e.showStarred,i=e.showBroadcast,o=Object(w.K)(t);return Object(T.a)({isPinned:a&&!!o,isEphemeral:Object(w.bb)(t),isStarred:r&&Object(w.rb)(t),isBroadcast:i&&Object(w.ub)(t),subtype:t.subtype,sliHighlight:!!n})}},{key:"renderPinnedBy",value:function(e){return b.a.createElement(x.a,{className:"c-message_kit__labels__link",id:e})}},{key:"renderStarButton",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).text;return e?b.a.createElement(M.a,{onClick:this.onStarClick,className:"c-message_kit__labels__link"},e):null}},{key:"renderBroadcast",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).text;return e?b.a.createElement(M.a,{onClick:this.onBroadcastClick,className:"c-message_kit__labels__link"},e):null}},{key:"renderLabelText",value:function(e){var t=this.props,n=t.msg,a=t.currentUserId,i=t.isSelfIm,o=t.isSlackbotIm,s=Object(w.K)(n),l=s&&s.pinnedBy,c=Object(R.a)(r()({},e,{isSelfIm:i,isSlackbotIm:o,currentUserId:a,pinnedBy:l,renderPinnedBy:this.renderPinnedBy,renderStarButton:this.renderStarButton,renderHighlight:this.renderHighlight,renderBroadcast:this.renderBroadcast,featureMessageLabelsCopy:!0}));return c?b.a.createElement("span",{className:"c-message_kit__labels__text"},c):null}},{key:"renderLabelIcon",value:function(e){var t=D[e];return t?b.a.createElement("div",{className:"c-message_kit__labels__icon"},b.a.createElement(P.b,{type:t,size:"inherit"})):null}},{key:"renderHighlight",value:function(){var e=this.props,t=e.msg,n=e.sliHighlight,a=t.channel,r=t.ts;return Object(k.i)(n)?b.a.createElement(F.a,{sliHighlight:n,channelId:a,ts:r}):null}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.theme,a=this.getLabelTypes(),r=Object(A.a)(a),i=this.renderLabelIcon(r),o=this.renderLabelText(a);if(this.labelText=o,this.primaryLabelType=r,!o)return t;var s=v()(this.props.className,"c-message_kit__labels","c-message_kit__labels--"+r,"c-message_kit__labels--"+n);return b.a.createElement("div",{className:s},b.a.createElement("div",{className:"c-message_kit__labels__label"},i,o),t)}}]),t}(h.PureComponent);B.displayName="MessageLabels",B.defaultProps=U;t.a=Object(L.b)(Object(f.b)(function(e,t){var n=t.msg;if(!n)return null;var a=n.channel,r=n.ts,i=Object(O.c)(e),o=Object(y.e)(e,a),s=Object(E.a)(e),l=Object(k.e)(e,{channelId:a,ts:r}).sliHighlight,c=Object(N.Hb)(o),u=Object(N.Tb)(i,o);return{theme:Object(C.a)(e),currentUserId:i,primaryView:s,sliHighlight:l,isSlackbotIm:c,isSelfIm:u}})(B))},D3Vj:function(e,t,n){},DBPf:function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("kxpR"),p=n("XHGt"),m=n("aK/h"),h=n("yHhI"),b=n("G3Sk"),f=new(n("nNoG").b)("view"),g=(m.b.string.isRequired,m.b.number,m.b.object.isRequired,0),_=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){g&&this.props.logger.error("Multiple DocumentTitles mounted"),g+=1,this.originalTitle=document.title,this.updateTitle()}},{key:"componentDidUpdate",value:function(e){e.title===this.props.title&&e.totalUnreadHighlights===this.props.totalUnreadHighlights||this.updateTitle()}},{key:"componentWillUnmount",value:function(){g-=1,document.title=this.originalTitle}},{key:"updateTitle",value:function(){var e=this.props,t=e.totalUnreadHighlights,n=e.title,a=f.t("Slack");0!==n.length?document.title=t?a+" | "+n+" | "+this.unreadHighlightsCountString():a+" | "+n:document.title=a}},{key:"unreadHighlightsCountString",value:function(){return f.t("{totalUnreadHighlights, plural, =1 {# new item} other {# new items}}",{totalUnreadHighlights:this.props.totalUnreadHighlights})}},{key:"render",value:function(){return null}}]),t}(d.PureComponent);_.displayName="DocumentTitle",_.defaultProps={totalUnreadHighlights:null};var v=Object(p.b)(function(e){return{logger:Object(h.a)({state:e}),totalUnreadHighlights:Object(b.f)(e)}})(_);t.a=v},DEaQ:function(e,t,n){"use strict";var a=n("QbLZ"),r=n.n(a),i=n("iCc5"),o=n.n(i),s=n("V7oC"),l=n.n(s),c=n("FYw3"),u=n.n(c),d=n("mRg0"),p=n.n(d),m=n("kxpR"),h=n.n(m),b=n("aK/h"),f=n("XHGt"),g=n("MREy"),_=n("od5y"),v=n("Gogr"),y=n("1hAG"),k=n("vmJv"),O=n("Gmrf"),C=n("rWF5"),E=n("YB7p"),j=n("ICFZ"),S=n("GNdI"),I=n("rb67"),w=n("4ULK"),N=n("rz65"),T=n("nOCT"),A=(b.b.object,b.b.string.isRequired,b.b.string,b.b.string.isRequired,b.b.string.isRequired,b.b.object.isRequired,{menuProps:void 0,lastError:void 0}),R="not registered",P=document&&document.documentElement&&document.documentElement.dataset,M={versionTs:P.versionTs,versionHash:P.versionHash,minVersionDataTs:T.a},x=function(e){function t(e){o()(this,t);var n=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.resetCredentials=n.resetCredentials.bind(n),n.copyVersionInfo=n.copyVersionInfo.bind(n),n.debugMenuPurgeStoredModel=n.debugMenuPurgeStoredModel.bind(n),n.copyVersionInfo=n.copyVersionInfo.bind(n),n.state={sw:R,cachedRequests:{},storageQuota:0,storageUsage:0},n}return p()(t,e),l()(t,[{key:"componentWillUnmount",value:function(){this.serviceWorkerP&&this.serviceWorkerP.cancel&&this.serviceWorkerP.cancel(),this.cachedRequestsP&&this.cachedRequestsP.cancel&&this.cachedRequestsP.cancel(),this.storageEstimateP&&this.storageEstimateP.cancel&&this.storageEstimateP.cancel()}},{key:"UNSAFE_componentWillMount",value:function(){var e=this;this.serviceWorkerP=Object(I.c)().then(function(t){void 0!==t&&t.active&&e.setState(function(){return{sw:t.active.state}})}),this.cachedRequestsP=Object(I.b)().then(function(t){t&&e.setState(function(){return{cachedRequests:t}})}),Object(C.q)()&&(this.storageEstimateP=navigator.storage.estimate().then(function(t){e.setState(function(){return{storageQuota:t.quota,storageUsage:t.usage}})}))}},{key:"copyVersionInfo",value:function(){var e=F(M.versionTs),t=F(M.minVersionDataTs);Object(j.b)("Version TS: "+M.versionTs+(e&&" ("+e+")"||"")+", Version Hash: "+M.versionHash+", Min Version Data TS: "+M.minVersionDataTs+(t&&" ("+t+")"||""))}},{key:"debugMenuPurgeStoredModel",value:function(){return Object(w.a)(Object(S.a)())}},{key:"resetCredentials",value:function(){Object(v.g)(),Object(E.b)({reason:"Reload initiated from user clicking reset credentials in sonic debug menu",reasonKey:"sonic_debug_menu",noCache:!0})}},{key:"renderSWStorage",value:function(){return Object(C.q)()&&this.state.storageUsage&&this.state.storageQuota?h.a.createElement(h.a.Fragment,null,"Storage: ",(this.state.storageUsage/1024/1024).toFixed(1)," of"," ",Math.round(this.state.storageQuota/1024/1024),"MB (",(this.state.storageUsage/this.state.storageQuota).toFixed(2),"%)"):null}},{key:"render",value:function(){var e=this,t=this.props,n=t.menuProps,a=t.lastError,i=t.version,o=Object.keys(this.state.cachedRequests).map(function(t){return{label:t+": "+e.state.cachedRequests[t].length}}),s=[{children:h.a.createElement("div",{style:{whiteSpace:"normal"}},h.a.createElement(_.b,{type:"warning",inline:!0})," ",a),hide:!a,key:"last-error"},{label:"Cold boot",click:function(){return Object(E.a)({reason:"debug-menu",reasonKey:"debug_menu"})}},{label:"Cold boot immediately",click:function(){return Object(E.a)({reason:"debug-menu-immediate",reasonKey:"debug_menu",immediate:!0})}},{label:"Re-fetch credentials",click:this.resetCredentials},{label:"Copy Version Info",click:this.copyVersionInfo},{type:"separator"},{children:h.a.createElement("div",{style:{whiteSpace:"normal",opacity:.7}},h.a.createElement("strong",null,"Version TS:")," ",i.versionTs,h.a.createElement("br",null),F(i.versionTs),F(i.versionTs)&&h.a.createElement("br",null),h.a.createElement("strong",null,"Data Version:")," ",i.minVersionDataTs,h.a.createElement("br",null),F(i.minVersionDataTs),h.a.createElement("br",null),h.a.createElement("strong",null,"Version Hash:")," ",i.versionHash&&i.versionHash.slice(0,14)),click:this.copyVersionInfo,key:"version-info"},{type:"separator"},{label:"Service Worker",type:N.a.submenu,template:[{children:h.a.createElement("div",{style:{whiteSpace:"normal",opacity:.7}},"State: ",this.state.sw,h.a.createElement("br",null),this.renderSWStorage()),key:"sw-state"},{type:"separator"},{label:"Cached Requests",type:N.a.submenu,template:o.length>0?o:[{label:"None"}]},{type:"separator"},{label:"Register SW",click:I.d,hide:"not registered"!==this.state.sw},{label:"Unregister SW",click:I.e,hide:"not registered"===this.state.sw},{label:"Update SW",click:I.f,hide:"not registered"===this.state.sw},{label:"Clear the SW cache",click:I.a,hide:0===Object.keys(this.state.cachedRequests).length}].filter(function(e){return!e.hide})},{label:"IndexedDB",type:N.a.submenu,template:[{label:"Purge Stored Model for this Workspace",click:this.debugMenuPurgeStoredModel}]}].filter(function(e){return!e.hide});return h.a.createElement(g.a,r()({},n,{template:s}))}}]),t}(m.Component);function F(e){return parseInt(e,10)?new Date(1e3*e).toLocaleString("en-CA",{hour12:!1,timeZoneName:"short"}):null}x.displayName="DebugMenu",x.defaultProps=A,t.a=Object(f.b)(function(e){var t=Object(k.a)(e),n=Object(y.d)(e),a=Object(O.b)(e);return{channelId:t,lastError:a?a.message:"",teamDomain:n.domain,teamId:n.id,version:M}})(x)},DFT4:function(e,t,n){},Dcvo:function(e,t,n){},DodW:function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("ifKl"),p=n("kxpR"),m=n.n(p),h=n("aK/h"),b=n("nNoG"),f=n("bo4X"),g=n("pmOY"),_=n("FdTv"),v=n("JVYW"),y=n("+J1t"),k=n("8W09"),O=n("CGJF"),C=n("+6YQ"),E=new b.b("generic_dialog"),j=(h.b.string,h.b.node,h.b.oneOf(["primary","danger"]),h.b.string,h.b.string,h.b.bool,h.b.func,h.b.func,h.b.func,h.b.string,h.b.oneOf(["dialog","alertdialog"]),h.b.string,{title:"",children:null,submitButtonType:"primary",submitButtonText:null,showCancelButton:!0,cancelButtonText:"Cancel",onSubmit:d.a,onCancel:d.a,onClose:d.a,"aria-describedby":null,role:"alertdialog","data-qa":"dialog"}),S=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e["aria-describedby"],n=e.role,a=e["data-qa"],r=e.title,i=e.children,o=e.submitButtonType,s=e.submitButtonText,l=e.cancelButtonText,c=e.showCancelButton,u=e.onCancel,d=e.onClose,p=e.onSubmit;return m.a.createElement(f.a,{labelledby:"base_dialog_title",describedby:t,closeModal:d,role:n},m.a.createElement(g.a,null,m.a.createElement(_.a,{title:r,id:"base_dialog_title","data-qa":a+"_header"})),m.a.createElement(v.a,null,m.a.createElement(y.a,{"data-qa":a+"_body"},i)),m.a.createElement(k.a,{"data-qa":a+"_footer"},m.a.createElement(O.a,null,c&&m.a.createElement(C.b,{type:"outline",onClick:u,"data-qa":a+"_cancel"},l),m.a.createElement(C.b,{type:o,onClick:p,"data-qa":a+"_go"},s||E.t("Confirm")))))}}]),t}(p.PureComponent);S.displayName="BaseDialog",S.defaultProps=j,t.a=S},Drpm:function(e,t,n){},Ect7:function(e,t,n){"use strict";var a=n("kxpR"),r=n.n(a),i=n("TSYQ"),o=n.n(i),s=n("MnCE"),l=n("aK/h"),c=n("nNoG"),u=n("5mKg"),d=n("Fdc0"),p=n("derf"),m=n("od5y"),h=n("RAhH"),b=n("/m+M"),f=(n("e3Uf"),new c.b("team"));function g(e){return r.a.createElement(h.c,{position:"bottom-right",tip:e,zIndex:"above_fs"},r.a.createElement(m.b,{type:"question-circle"}))}g.displayName="renderTooltip";l.b.string,l.b.object.isRequired,l.b.object.isRequired;var _={className:void 0};function v(e){var t=e.className,n=e.member,a=e.team;if(!Object(b.a)().featureModernProfileFlexpane)return null;var i=o()(t,"p-member_profile_restriction"),s=Object(d.xb)(n)&&f.t("This person hasn\u2019t finished signing up. They may receive messages via email.");return Object(d.tb)(n)?r.a.createElement("div",{className:i},r.a.createElement(p.b,{className:"p-member_profile_restriction__team_icon",id:a.id,size:16}),r.a.createElement("span",{className:"p-member_profile_restriction__text"},Object(u.f)(a))):Object(d.mb)(n)?r.a.createElement("div",{className:i},r.a.createElement(m.b,{className:"p-member_profile_restriction__icon",type:"archived-channel"}),r.a.createElement("span",{className:"p-member_profile_restriction__text"},f.t("Deactivated account",{fallbackHash:"d57fa5164165105a1507c830ae06f7af8307870a",fallbackHashNs:"team"}))):Object(d.Mb)(n)?r.a.createElement("div",{className:i},r.a.createElement(m.b,{className:"p-member_profile_restriction__icon",type:"single-channel-guest"}),r.a.createElement("span",{className:"p-member_profile_restriction__text"},Object(d.xb)(n)?f.t("Invited Guest"):f.t("Single-Channel Guest")),g(s||f.t("Single-Channel Guests see a partial directory and can only access messages and files from selected channels."))):Object(d.Gb)(n)?r.a.createElement("div",{className:i},r.a.createElement(m.b,{className:"p-member_profile_restriction__icon",type:"restricted-user"}),r.a.createElement("span",{className:"p-member_profile_restriction__text"},Object(d.xb)(n)?f.t("Invited Guest"):f.t("Multi-Channel Guest")),g(s||f.t("Multi-Channel Guests see a partial directory and can only access messages and files from selected channels."))):Object(d.Eb)(n)?r.a.createElement("div",{className:i},r.a.createElement("span",{className:"p-member_profile_restriction__text"},f.t("Owner of {teamName}",{teamName:Object(c.p)(Object(u.f)(a))}))):Object(d.eb)(n)?r.a.createElement("div",{className:i},r.a.createElement("span",{className:"p-member_profile_restriction__text"},f.t("Workspace Admin"))):Object(d.xb)(n)?r.a.createElement("div",{className:i},r.a.createElement(m.b,{className:"p-member_profile_restriction__icon",type:"envelope-o"}),r.a.createElement("span",{className:"p-member_profile_restriction__text"},f.t("Invited Member")),g(s)):null}v.defaultProps=_,t.a=Object(s.a)(v)},EnhK:function(e,t,n){},"F+Fq":function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return o});var a=n("ifKl"),r=n("ROZo"),i=(Object(r.b)("TS.ui.apps_browser.routeAppOpen",a.a),Object(r.b)("TS.ui.apps_browser.showAppTutorial",a.a)),o=(Object(r.b)("TS.ui.apps_browser.canAppBeAdded",a.a),Object(r.b)("TS.ui.apps_browser.addAppToChannel",a.a),Object(r.b)("TS.ui.apps_browser.buildAddAppsTitle",a.a),Object(r.b)("TS.ui.apps_browser.startAddApps",a.a));Object(r.b)("TS.ui.apps_browser.ensureAppMembershipIsKnown",a.a)},F5ou:function(e,t,n){},F8qq:function(e,t,n){"use strict";var a=n("XfeM"),r=n("YYb+"),i=n("rzSx"),o=n("hPzE"),s=n("aK/h"),l=n("kOzZ"),c=n("Go8C"),u=n("GbAX"),d=n("9vuj"),p=Object(a.b)("Clog clicks on a message or file using data from redux",function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).suggestion,a=t(),i=e(Object(o.g)()),s=e(Object(o.f)()),p=Object(r.d)(a),m=Object(r.c)(a),h=p.map(function(e){return e.featureVector}),b=Object(l.a)({state:a}),f=Object(c.d)(a),g=f?f.length:0,_=Object(u.h)(a),v={accept_module_name:"results_unified",accept_module_length:p.length,accept_item_offset:m,feature_vector_list:h,suggestion_type:n.type,is_navigational:n.is_type_navigational,is_action:n.is_type_action,navigation_model_id:n.id,request_id:Object(d.a)(a),search_session_id:i,client_request_id:s,query_length:g,open_method:_};b.track("SEARCH_AUTOCOMPLETE_ACCEPT",v)});p.meta={name:"clogAutocompleteAccept",key:"actionsUniversalSearchClogAutocompleteClogAutocompleteAccept",description:"Clog clicks on a message or file using data from redux"},p.propTypes={suggestion:s.b.object.isRequired};var m=p,h=n("za+y"),b=n("JrUZ"),f=n("BrU6"),g=n("iW0Y"),_=n("tfx1"),v=n("HvGc"),y=n("qgNY"),k=n("1F8+"),O=n("yHhI"),C=n("k2C/"),E=n("MjS2"),j=n("V18M"),S=n("s19S"),I=n("S3eg"),w=n("CUc0"),N=n("6kok"),T=n("Fdc0"),A=n("Smdl"),R=n("vRZS"),P=n("rtjy"),M=n("YCXn"),x=n("53Ys"),F=n("97va"),L=n("hUCq"),D=n("brL+"),U=n("toaU"),B=n("kLJo"),q=n("5mKg"),H=n("hjTk"),W=n("t85p"),G=n("24Q/"),K=n("1Tny"),V=n("1tsX"),z=n("FHcd"),Y=n("4M+g"),Q=n("lhZz"),X=n("wR6u"),J=n("0nhw"),Z=n("G4ux"),$=n("KXvl"),ee=n("s5Is"),te=n("IY6O");n.d(t,"a",function(){return ne});var ne=Object(a.b)("Accept the selected (or 0th) search autocomplete suggestion",function(e,t){Object(O.a)({getState:t}).info("IMPROVED_SEARCH","Accepted search query");var n=t(),a=Object(r.c)(n)||0,s=Object(r.d)(n)[a];if(s)if(e(m({suggestion:s})),s.is_type_query_completion){var l=Object(i.f)(s.suggestion_replacement),u=Object(i.f)(s.suggestion_replacement_for_request);Object(O.a)({getState:t}).info("IMPROVED_SEARCH","Accepting query suggestion"),e(Object(b.x)({query:u})),e(Object(o.j)({query:u})),e(Object(c.g)({displayQuery:l})),Object(j.a)(n)?(e(Object(r.a)()),Object(S.n)("Vsearch")):e(Object(g.a)({interfaceMode:_.a.SEARCH_RESULTS}))}else if(s.is_type_navigational){if(s.is_type_file)Object(O.a)({getState:t}).info("IMPROVED_SEARCH","Navigating to file. file: "+s.file.id),e(Object(v.c)({fileId:s.file.id}));else{if(Object(O.a)({getState:t}).info("IMPROVED_SEARCH","Navigating to model: id: "+s.id),Object(C.a)(s.id))if(Object(A.a)()){var d=Object(Z.b)(n);ae(s.id)?Object(B.g)(U.a,{teamId:s.id},{reason:"omniswitcher:searchAutocompleteSuggestionAccept"}):Object($.b)()?re(e,t,d,s.id):ie(e,t,d,s.id)}else if(Object(R.a)())Object(E.m)(s.id);else{var p=s.team.url||Object(q.o)(s.team);Object(H.a)(p)}else if(s.channel&&Object(N.cb)(s.channel)){var T=s.channel.id,Q=Object(L.a)({state:n,channel:s.channel,currentTeamId:Object(D.b)(n)})||Object(N.Zb)(n,s.channel);if(Object(A.a)()){var X=Object(Z.b)(n);ae(Q)?e(Object(I.a)({id:T,teamId:Q})):Object($.b)()?re(e,t,X,Q,T):ie(e,t,X,Q,T)}else e(Object(w.a)({teamId:Q,channelId:T}))}else if(s.channel&&Object(N.Ub)(n,s.channel)){var J=s.channel.team_id,ee=s.channel.id;Object(A.a)()?e(Object(I.a)({id:ee,teamId:J})):e(Object(w.a)({teamId:J,channelId:ee}))}else if("Vapp_space"===s.id){var te=Object(W.m)(t(),"feature_m11n_apps_browser"),ne=Object(V.a)(t());te?ne?(e(Object(F.a)()),e(Object(h.a)({eventId:"APP_LAUNCHER_OPEN_FROM_SEARCH"}))):e(Object(x.a)()):Object(M.a)()}else{var oe=void 0;Object(z.a)(s.id)&&(oe=Object(Y.l)(n,s.id)),e(Object(y.a)({id:oe||s.id}))}var se=s.channel||s.member||{id:s.id},le=Object(c.d)(n);e(Object(P.c)({id:se.id,text:le}))}e(Object(f.a)({textyString:""})),e(Object(k.a)()),e(Object(r.a)())}else if(s.is_type_action&&Object(G.a)(n)){if(s.is_type_app_action){var ce=s.app_action,ue=Object(c.d)(n);e(Object(K.a)({actionId:ce.id,appId:ce.app_id,referrer:"quickswitcher"})),e(Object(P.c)({id:ce.id,text:ue}))}Object(O.a)({getState:t}).action("Executed action",s),e(Object(f.a)({textyString:""})),e(Object(k.a)()),e(Object(r.a)())}});function ae(e){var t=Object(Q.getStateForClientStore)();return!(!Object(te.getWorkspacesMeta)(t)[e]||Object(te.isWorkspaceExpired)(t,e))}function re(e,t,n,a,r){return Object(T.zb)(n,a)?Object(Q.dispatchForClientStore)(Object(ee.fetchAuthAndSetFocusedWorkspace)({teamId:a,channelId:r})):(Object(X.d)(!1),e(Object(J.b)({teamId:a})).catch(function(e){if(!e.data||"user_already_team_member"!==e.data.error)throw e}).then(function(){return Object(Q.dispatchForClientStore)(Object(ee.fetchAuthAndSetFocusedWorkspace)({teamId:a,channelId:r}))}).catch(function(e){Object(O.a)({getState:t}).error("Unable to join team "+a+": "+e),Object(X.d)(!0)}))}function ie(e,t,n,a,r){return Object(T.zb)(n,a)?Promise.resolve(oe(e,a,r)):(Object(X.d)(!1),e(Object(J.b)({teamId:a})).catch(function(e){if(!e.data||"user_already_team_member"!==e.data.error)throw e}).then(function(){oe(e,a,r)}).catch(function(e){Object(O.a)({getState:t}).error("Unable to join team "+a+": "+e)}).finally(function(){return Object(X.d)(!0)}))}function oe(e,t,n){n?e(Object(I.a)({id:n,teamId:t})):Object(B.g)(U.a,{teamId:t},{reason:"omniswitcher:searchAutocompleteSuggestionAccept"})}ne.meta={name:"searchAutocompleteSuggestionAccept",key:"actionsUniversalSearchSearchAutocompleteSuggestionAcceptSearchAutocompleteSuggestionAccept",description:"Accept the selected (or 0th) search autocomplete suggestion"},ne.propTypes={}},FQfs:function(e,t,n){"use strict";var a=n("QbLZ"),r=n.n(a),i=n("iCc5"),o=n.n(i),s=n("V7oC"),l=n.n(s),c=n("FYw3"),u=n.n(c),d=n("mRg0"),p=n.n(d),m=n("TGBA"),h=n("kxpR"),b=n.n(h),f=n("XHGt"),g=n("TSYQ"),_=n.n(g),v=n("aK/h"),y=n("G4ux"),k=n("Fdc0"),O=n("hXpn"),C=n("WeBd"),E=n("HfwO"),j=n("kd6D"),S=(v.b.string,v.b.string.isRequired,v.b.bool,v.b.bool,v.b.bool,v.b.node,v.b.oneOf(Object(m.a)(E.a)),v.b.bool,v.b.number,{className:void 0,isActive:!1,isDeactivated:!1,isDisabled:!1,secondaryContent:void 0,secondaryContentPosition:E.a.right,showUnreadCount:!1,unreadCount:null}),I=function(e){function t(){return o()(this,t),u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p()(t,e),l()(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.id,a=e.isActive,i=e.isDeactivated,o=e.isDisabled,s=e.secondaryContent,l=e.secondaryContentPosition,c=e.showUnreadCount,u=e.unreadCount,d=b.a.createElement(C.b,{className:"c-member__unread_count",count:u,style:C.a.red}),p=b.a.createElement("span",{className:"c-member__details","data-qa":"member-entity__secondary-content"},s),m=b.a.createElement("span",{className:"c-member__secondary_content"},s&&l===E.a.right&&p,c&&u&&d),h=_()(t,"c-medium_member_list_entity"),f=void 0;return a?f=o||i?j.c.highlightDim:j.c.highlightLight:(o||i)&&(f=j.c.dim),b.a.createElement(O.a,{"data-qa":"medium_member_list_entity",className:h,style:f,primaryContent:b.a.createElement(E.b,r()({id:n,isDeactivated:i},this.props,{secondaryContent:l===E.a.right?null:s})),secondaryContent:m,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,size:"medium"})}}]),t}(h.Component);I.displayName="MediumMemberListEntity",I.defaultProps=S,t.a=Object(f.b)(function(e,t){var n=t.id,a=Object(y.d)(e,n);return{member:a,unreadCount:Object(k.s)(e,a)}})(I)},FXxD:function(e,t,n){},FeTz:function(e,t,n){},FghR:function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("ifKl"),p=n("oaNE"),m=n("aK/h"),h=n("kxpR"),b=n.n(h),f=n("9rZX"),g=n.n(f),_=n("TSYQ"),v=n.n(_),y=n("18Pa"),k=n("yg0S"),O=n("QbLZ"),C=n.n(O),E=n("jo6Y"),j=n.n(E),S=n("+6YQ"),I=(m.b.node,m.b.func,{children:void 0,onClick:d.a}),w=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.buttonRef=b.a.createRef(),n.focusOnButton=n.focusOnButton.bind(n),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.focusOnButton()}},{key:"focusOnButton",value:function(){this.buttonRef.current.focus()}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.onClick,a=j()(e,["children","onClick"]);return b.a.createElement(S.b,C()({ref:this.buttonRef,"data-qa":"coachmark_close_button",onClick:n},a),t)}}]),t}(h.PureComponent);w.displayName="CoachmarkCloseButton",w.defaultProps=I;var N=w,T=n("cnLP"),A=(n("KwLZ"),m.b.instanceOf(Element),m.b.oneOf([10,20,30,40,50,60,70,80,90]),m.b.node.isRequired,m.b.string,m.b.string,m.b.bool.isRequired,m.b.func,m.b.number,m.b.number,m.b.func,m.b.func,m.b.string,m.b.string,m.b.oneOf(T.a).isRequired,m.b.bool,m.b.object,{anchorElement:null,arrowPosition:50,closeCoachmark:d.a,coachmarkClassNames:void 0,qa:"coachmark",offsetX:0,offsetY:0,onClickPrimaryButton:d.a,onClickSecondaryButton:d.a,primaryCallToActionText:void 0,secondaryCallToActionText:void 0,centerOnArrow:!1,style:{}}),R=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.contentRef=b.a.createRef(),n}return u()(t,e),o()(t,[{key:"getComputedStyles",value:function(e,t){var n=this.props,a=n.offsetX,r=n.offsetY,i=n.centerOnArrow,o=window.scrollX||window.pageXOffset,s=window.scrollY||window.pageYOffset,l={};switch(t){case"top":l.left=e.left+o+parseInt(a,10),l.top=e.top+s-e.height+parseInt(r,10),i&&(l.left+=e.width/2);break;case"bottom":l.left=e.left+o+parseInt(a,10),l.top=e.top+s+e.height+20+parseInt(r,10),i&&(l.left+=e.width/2);break;case"right":l.left=e.left+o+e.width+20+parseInt(a,10),l.top=e.top+s+e.height/2+parseInt(r,10);break;case"left":l.left=e.left+o+parseInt(a,10),l.top=e.top+s+e.height/2+parseInt(r,10)}return l}},{key:"render",value:function(){var e=this.props,t=e.anchorElement,n=e.arrowPosition,a=e.children,r=e.closeCoachmark,i=e.coachmarkClassNames,o=e.qa,s=e.isOpen,l=e.onClickPrimaryButton,c=e.onClickSecondaryButton,u=e.orientation,d=e.primaryCallToActionText,m=e.secondaryCallToActionText,h=e.centerOnArrow,f=e.style;if(!s||!t)return null;var _=v()("c-coachmark","c-coachmark--"+u,"c-coachmark--"+n,{"c-coachmark--center_on_arrow":h},i),O=t.getBoundingClientRect?this.getComputedStyles(t.getBoundingClientRect(),u):{},C=Object(p.a)({},O,f);return b.a.createElement(g.a,{data:{qa:o},className:_,isOpen:s,onRequestClose:r,overlayClassName:"c-coachmark__overlay",ref:this.contentRef,shouldCloseOnEsc:!0,style:{overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"transparent",zIndex:1e3},content:C}},b.a.createElement(k.a,null,b.a.createElement(y.a,{className:"c-coachmark__close",icon:"times",onClick:r,"aria-label":"Close Coachmark","data-qa":"close_coachmark_button"}),a,b.a.createElement("div",{className:"c-coachmark__footer"},m&&b.a.createElement(N,{onClick:c,type:"outline",className:"margin_right_75","data-action-type":"secondary"},m),d&&b.a.createElement(N,{onClick:l,type:"primary","data-action-type":"primary"},d))))}}]),t}(h.PureComponent);R.displayName="Coachmark",R.defaultProps=A;t.a=R},Fsvi:function(e,t,n){},G4Tr:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=new(n("nNoG").b)("a11y");function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channelName,n=e.previousChannelName,r=e.workspaceName,i=e.orgName,o=e.isOrgGlobalSharedPublicOrPrivateChannel,s=e.isOrgSharedPublicOrPrivateChannel,l=e.isExternallySharedChannel,c=e.isArchived,u=e.isCurrent,d=e.hasUnreads,p=e.hasNotifications,m=e.isPrivate,h=e.isNotMember,b=e.isMuted,f=e.isStarred,g=e.hasDraft,_=l&&r?a.t("shared with {workspaceName}",{workspaceName:r}):o&&i?a.t("shared across all {orgName} workspaces",{orgName:i}):s?a.t("shared channel"):"",v=c?a.t("archived channel"):u&&d&&p&&m&&h&&b&&f&&g?a.t("current channel, has unread messages and notifications, private, not a member, muted, starred, has a draft message"):!u&&d&&p&&m&&h&&b&&f&&g?a.t("has unread messages and notifications, private, not a member, muted, starred, has a draft message"):u&&!d&&p&&m&&h&&b&&f&&g?a.t("current channel, has notifications, private, not a member, muted, starred, has a draft message"):!u&&!d&&p&&m&&h&&b&&f&&g?a.t("has notifications, private, not a member, muted, starred, has a draft message"):u&&d&&!p&&m&&h&&b&&f&&g?a.t("current channel, has unread messages, private, not a member, muted, starred, has a draft message"):!u&&d&&!p&&m&&h&&b&&f&&g?a.t("has unread messages, private, not a member, muted, starred, has a draft message"):u&&!d&&!p&&m&&h&&b&&f&&g?a.t("current channel, private, not a member, muted, starred, has a draft message"):!u&&!d&&!p&&m&&h&&b&&f&&g?a.t("private, not a member, muted, starred, has a draft message"):u&&d&&p&&!m&&h&&b&&f&&g?a.t("current channel, has unread messages and notifications, not a member, muted, starred, has a draft message"):!u&&d&&p&&!m&&h&&b&&f&&g?a.t("has unread messages and notifications, not a member, muted, starred, has a draft message"):u&&!d&&p&&!m&&h&&b&&f&&g?a.t("current channel, has notifications, not a member, muted, starred, has a draft message"):!u&&!d&&p&&!m&&h&&b&&f&&g?a.t("has notifications, not a member, muted, starred, has a draft message"):u&&d&&!p&&!m&&h&&b&&f&&g?a.t("current channel, has unread messages, not a member, muted, starred, has a draft message"):!u&&d&&!p&&!m&&h&&b&&f&&g?a.t("has unread messages, not a member, muted, starred, has a draft message"):u&&!d&&!p&&!m&&h&&b&&f&&g?a.t("current channel, not a member, muted, starred, has a draft message"):!u&&!d&&!p&&!m&&h&&b&&f&&g?a.t("not a member, muted, starred, has a draft message"):u&&d&&p&&m&&!h&&b&&f&&g?a.t("current channel, has unread messages and notifications, private, muted, starred, has a draft message"):!u&&d&&p&&m&&!h&&b&&f&&g?a.t("has unread messages and notifications, private, muted, starred, has a draft message"):u&&!d&&p&&m&&!h&&b&&f&&g?a.t("current channel, has notifications, private, muted, starred, has a draft message"):!u&&!d&&p&&m&&!h&&b&&f&&g?a.t("has notifications, private, muted, starred, has a draft message"):u&&d&&!p&&m&&!h&&b&&f&&g?a.t("current channel, has unread messages, private, muted, starred, has a draft message"):!u&&d&&!p&&m&&!h&&b&&f&&g?a.t("has unread messages, private, muted, starred, has a draft message"):u&&!d&&!p&&m&&!h&&b&&f&&g?a.t("current channel, private, muted, starred, has a draft message"):!u&&!d&&!p&&m&&!h&&b&&f&&g?a.t("private, muted, starred, has a draft message"):u&&d&&p&&!m&&!h&&b&&f&&g?a.t("current channel, has unread messages and notifications, muted, starred, has a draft message"):!u&&d&&p&&!m&&!h&&b&&f&&g?a.t("has unread messages and notifications, muted, starred, has a draft message"):u&&!d&&p&&!m&&!h&&b&&f&&g?a.t("current channel, has notifications, muted, starred, has a draft message"):!u&&!d&&p&&!m&&!h&&b&&f&&g?a.t("has notifications, muted, starred, has a draft message"):u&&d&&!p&&!m&&!h&&b&&f&&g?a.t("current channel, has unread messages, muted, starred, has a draft message"):!u&&d&&!p&&!m&&!h&&b&&f&&g?a.t("has unread messages, muted, starred, has a draft message"):u&&!d&&!p&&!m&&!h&&b&&f&&g?a.t("current channel, muted, starred, has a draft message"):u||d||p||m||h||!b||!f||!g?u&&d&&p&&m&&h&&!b&&f&&g?a.t("current channel, has unread messages and notifications, private, not a member, starred, has a draft message"):!u&&d&&p&&m&&h&&!b&&f&&g?a.t("has unread messages and notifications, private, not a member, starred, has a draft message"):u&&!d&&p&&m&&h&&!b&&f&&g?a.t("current channel, has notifications, private, not a member, starred, has a draft message"):!u&&!d&&p&&m&&h&&!b&&f&&g?a.t("has notifications, private, not a member, starred, has a draft message"):u&&d&&!p&&m&&h&&!b&&f&&g?a.t("current channel, has unread messages, private, not a member, starred, has a draft message"):!u&&d&&!p&&m&&h&&!b&&f&&g?a.t("has unread messages, private, not a member, starred, has a draft message"):u&&!d&&!p&&m&&h&&!b&&f&&g?a.t("current channel, private, not a member, starred, has a draft message"):!u&&!d&&!p&&m&&h&&!b&&f&&g?a.t("private, not a member, starred, has a draft message"):u&&d&&p&&!m&&h&&!b&&f&&g?a.t("current channel, has unread messages and notifications, not a member, starred, has a draft message"):!u&&d&&p&&!m&&h&&!b&&f&&g?a.t("has unread messages and notifications, not a member, starred, has a draft message"):u&&!d&&p&&!m&&h&&!b&&f&&g?a.t("current channel, has notifications, not a member, starred, has a draft message"):!u&&!d&&p&&!m&&h&&!b&&f&&g?a.t("has notifications, not a member, starred, has a draft message"):u&&d&&!p&&!m&&h&&!b&&f&&g?a.t("current channel, has unread messages, not a member, starred, has a draft message"):!u&&d&&!p&&!m&&h&&!b&&f&&g?a.t("has unread messages, not a member, starred, has a draft message"):u&&!d&&!p&&!m&&h&&!b&&f&&g?a.t("current channel, not a member, starred, has a draft message"):u||d||p||m||!h||b||!f||!g?u&&d&&p&&m&&!h&&!b&&f&&g?a.t("current channel, has unread messages and notifications, private, starred, has a draft message"):!u&&d&&p&&m&&!h&&!b&&f&&g?a.t("has unread messages and notifications, private, starred, has a draft message"):u&&!d&&p&&m&&!h&&!b&&f&&g?a.t("current channel, has notifications, private, starred, has a draft message"):!u&&!d&&p&&m&&!h&&!b&&f&&g?a.t("has notifications, private, starred, has a draft message"):u&&d&&!p&&m&&!h&&!b&&f&&g?a.t("current channel, has unread messages, private, starred, has a draft message"):!u&&d&&!p&&m&&!h&&!b&&f&&g?a.t("has unread messages, private, starred, has a draft message"):u&&!d&&!p&&m&&!h&&!b&&f&&g?a.t("current channel, private, starred, has a draft message"):u||d||p||!m||h||b||!f||!g?u&&d&&p&&!m&&!h&&!b&&f&&g?a.t("current channel, has unread messages and notifications, starred, has a draft message"):!u&&d&&p&&!m&&!h&&!b&&f&&g?a.t("has unread messages and notifications, starred, has a draft message"):u&&!d&&p&&!m&&!h&&!b&&f&&g?a.t("current channel, has notifications, starred, has a draft message"):u||d||!p||m||h||b||!f||!g?u&&d&&!p&&!m&&!h&&!b&&f&&g?a.t("current channel, has unread messages, starred, has a draft message"):u||!d||p||m||h||b||!f||!g?!u||d||p||m||h||b||!f||!g?u||d||p||m||h||b||!f||!g?u&&d&&p&&m&&h&&b&&!f&&g?a.t("current channel, has unread messages and notifications, private, not a member, muted, has a draft message"):!u&&d&&p&&m&&h&&b&&!f&&g?a.t("has unread messages and notifications, private, not a member, muted, has a draft message"):u&&!d&&p&&m&&h&&b&&!f&&g?a.t("current channel, has notifications, private, not a member, muted, has a draft message"):!u&&!d&&p&&m&&h&&b&&!f&&g?a.t("has notifications, private, not a member, muted, has a draft message"):u&&d&&!p&&m&&h&&b&&!f&&g?a.t("current channel, has unread messages, private, not a member, muted, has a draft message"):!u&&d&&!p&&m&&h&&b&&!f&&g?a.t("has unread messages, private, not a member, muted, has a draft message"):u&&!d&&!p&&m&&h&&b&&!f&&g?a.t("current channel, private, not a member, muted, has a draft message"):!u&&!d&&!p&&m&&h&&b&&!f&&g?a.t("private, not a member, muted, has a draft message"):u&&d&&p&&!m&&h&&b&&!f&&g?a.t("current channel, has unread messages and notifications, not a member, muted, has a draft message"):!u&&d&&p&&!m&&h&&b&&!f&&g?a.t("has unread messages and notifications, not a member, muted, has a draft message"):u&&!d&&p&&!m&&h&&b&&!f&&g?a.t("current channel, has notifications, not a member, muted, has a draft message"):!u&&!d&&p&&!m&&h&&b&&!f&&g?a.t("has notifications, not a member, muted, has a draft message"):u&&d&&!p&&!m&&h&&b&&!f&&g?a.t("current channel, has unread messages, not a member, muted, has a draft message"):!u&&d&&!p&&!m&&h&&b&&!f&&g?a.t("has unread messages, not a member, muted, has a draft message"):u&&!d&&!p&&!m&&h&&b&&!f&&g?a.t("current channel, not a member, muted, has a draft message"):u||d||p||m||!h||!b||f||!g?u&&d&&p&&m&&!h&&b&&!f&&g?a.t("current channel, has unread messages and notifications, private, muted, has a draft message"):!u&&d&&p&&m&&!h&&b&&!f&&g?a.t("has unread messages and notifications, private, muted, has a draft message"):u&&!d&&p&&m&&!h&&b&&!f&&g?a.t("current channel, has notifications, private, muted, has a draft message"):!u&&!d&&p&&m&&!h&&b&&!f&&g?a.t("has notifications, private, muted, has a draft message"):u&&d&&!p&&m&&!h&&b&&!f&&g?a.t("current channel, has unread messages, private, muted, has a draft message"):!u&&d&&!p&&m&&!h&&b&&!f&&g?a.t("has unread messages, private, muted, has a draft message"):u&&!d&&!p&&m&&!h&&b&&!f&&g?a.t("current channel, private, muted, has a draft message"):u||d||p||!m||h||!b||f||!g?u&&d&&p&&!m&&!h&&b&&!f&&g?a.t("current channel, has unread messages and notifications, muted, has a draft message"):!u&&d&&p&&!m&&!h&&b&&!f&&g?a.t("has unread messages and notifications, muted, has a draft message"):u&&!d&&p&&!m&&!h&&b&&!f&&g?a.t("current channel, has notifications, muted, has a draft message"):u||d||!p||m||h||!b||f||!g?u&&d&&!p&&!m&&!h&&b&&!f&&g?a.t("current channel, has unread messages, muted, has a draft message"):u||!d||p||m||h||!b||f||!g?!u||d||p||m||h||!b||f||!g?u||d||p||m||h||!b||f||!g?u&&d&&p&&m&&h&&!b&&!f&&g?a.t("current channel, has unread messages and notifications, private, not a member, has a draft message"):!u&&d&&p&&m&&h&&!b&&!f&&g?a.t("has unread messages and notifications, private, not a member, has a draft message"):u&&!d&&p&&m&&h&&!b&&!f&&g?a.t("current channel, has notifications, private, not a member, has a draft message"):!u&&!d&&p&&m&&h&&!b&&!f&&g?a.t("has notifications, private, not a member, has a draft message"):u&&d&&!p&&m&&h&&!b&&!f&&g?a.t("current channel, has unread messages, private, not a member, has a draft message"):!u&&d&&!p&&m&&h&&!b&&!f&&g?a.t("has unread messages, private, not a member, has a draft message"):u&&!d&&!p&&m&&h&&!b&&!f&&g?a.t("current channel, private, not a member, has a draft message"):u||d||p||!m||!h||b||f||!g?u&&d&&p&&!m&&h&&!b&&!f&&g?a.t("current channel, has unread messages and notifications, not a member, has a draft message"):!u&&d&&p&&!m&&h&&!b&&!f&&g?a.t("has unread messages and notifications, not a member, has a draft message"):u&&!d&&p&&!m&&h&&!b&&!f&&g?a.t("current channel, has notifications, not a member, has a draft message"):u||d||!p||m||!h||b||f||!g?u&&d&&!p&&!m&&h&&!b&&!f&&g?a.t("current channel, has unread messages, not a member, has a draft message"):u||!d||p||m||!h||b||f||!g?!u||d||p||m||!h||b||f||!g?u||d||p||m||!h||b||f||!g?u&&d&&p&&m&&!h&&!b&&!f&&g?a.t("current channel, has unread messages and notifications, private, has a draft message"):!u&&d&&p&&m&&!h&&!b&&!f&&g?a.t("has unread messages and notifications, private, has a draft message"):u&&!d&&p&&m&&!h&&!b&&!f&&g?a.t("current channel, has notifications, private, has a draft message"):u||d||!p||!m||h||b||f||!g?u&&d&&!p&&m&&!h&&!b&&!f&&g?a.t("current channel, has unread messages, private, has a draft message"):u||!d||p||!m||h||b||f||!g?!u||d||p||!m||h||b||f||!g?u||d||p||!m||h||b||f||!g?u&&d&&p&&!m&&!h&&!b&&!f&&g?a.t("current channel, has unread messages and notifications, has a draft message"):u||!d||!p||m||h||b||f||!g?!u||d||!p||m||h||b||f||!g?u||d||!p||m||h||b||f||!g?!u||!d||p||m||h||b||f||!g?u||!d||p||m||h||b||f||!g?!u||d||p||m||h||b||f||!g?u||d||p||m||h||b||f||!g?u&&d&&p&&m&&h&&b&&f&&!g?a.t("current channel, has unread messages and notifications, private, not a member, muted, starred"):!u&&d&&p&&m&&h&&b&&f&&!g?a.t("has unread messages and notifications, private, not a member, muted, starred"):u&&!d&&p&&m&&h&&b&&f&&!g?a.t("current channel, has notifications, private, not a member, muted, starred"):!u&&!d&&p&&m&&h&&b&&f&&!g?a.t("has notifications, private, not a member, muted, starred"):u&&d&&!p&&m&&h&&b&&f&&!g?a.t("current channel, has unread messages, private, not a member, muted, starred"):!u&&d&&!p&&m&&h&&b&&f&&!g?a.t("has unread messages, private, not a member, muted, starred"):u&&!d&&!p&&m&&h&&b&&f&&!g?a.t("current channel, private, not a member, muted, starred"):!u&&!d&&!p&&m&&h&&b&&f&&!g?a.t("private, not a member, muted, starred"):u&&d&&p&&!m&&h&&b&&f&&!g?a.t("current channel, has unread messages and notifications, not a member, muted, starred"):!u&&d&&p&&!m&&h&&b&&f&&!g?a.t("has unread messages and notifications, not a member, muted, starred"):u&&!d&&p&&!m&&h&&b&&f&&!g?a.t("current channel, has notifications, not a member, muted, starred"):!u&&!d&&p&&!m&&h&&b&&f&&!g?a.t("has notifications, not a member, muted, starred"):u&&d&&!p&&!m&&h&&b&&f&&!g?a.t("current channel, has unread messages, not a member, muted, starred"):!u&&d&&!p&&!m&&h&&b&&f&&!g?a.t("has unread messages, not a member, muted, starred"):u&&!d&&!p&&!m&&h&&b&&f&&!g?a.t("current channel, not a member, muted, starred"):u||d||p||m||!h||!b||!f||g?u&&d&&p&&m&&!h&&b&&f&&!g?a.t("current channel, has unread messages and notifications, private, muted, starred"):!u&&d&&p&&m&&!h&&b&&f&&!g?a.t("has unread messages and notifications, private, muted, starred"):u&&!d&&p&&m&&!h&&b&&f&&!g?a.t("current channel, has notifications, private, muted, starred"):!u&&!d&&p&&m&&!h&&b&&f&&!g?a.t("has notifications, private, muted, starred"):u&&d&&!p&&m&&!h&&b&&f&&!g?a.t("current channel, has unread messages, private, muted, starred"):!u&&d&&!p&&m&&!h&&b&&f&&!g?a.t("has unread messages, private, muted, starred"):u&&!d&&!p&&m&&!h&&b&&f&&!g?a.t("current channel, private, muted, starred"):u||d||p||!m||h||!b||!f||g?u&&d&&p&&!m&&!h&&b&&f&&!g?a.t("current channel, has unread messages and notifications, muted, starred"):!u&&d&&p&&!m&&!h&&b&&f&&!g?a.t("has unread messages and notifications, muted, starred"):u&&!d&&p&&!m&&!h&&b&&f&&!g?a.t("current channel, has notifications, muted, starred"):u||d||!p||m||h||!b||!f||g?u&&d&&!p&&!m&&!h&&b&&f&&!g?a.t("current channel, has unread messages, muted, starred"):u||!d||p||m||h||!b||!f||g?!u||d||p||m||h||!b||!f||g?u||d||p||m||h||!b||!f||g?u&&d&&p&&m&&h&&!b&&f&&!g?a.t("current channel, has unread messages and notifications, private, not a member, starred"):!u&&d&&p&&m&&h&&!b&&f&&!g?a.t("has unread messages and notifications, private, not a member, starred"):u&&!d&&p&&m&&h&&!b&&f&&!g?a.t("current channel, has notifications, private, not a member, starred"):!u&&!d&&p&&m&&h&&!b&&f&&!g?a.t("has notifications, private, not a member, starred"):u&&d&&!p&&m&&h&&!b&&f&&!g?a.t("current channel, has unread messages, private, not a member, starred"):!u&&d&&!p&&m&&h&&!b&&f&&!g?a.t("has unread messages, private, not a member, starred"):u&&!d&&!p&&m&&h&&!b&&f&&!g?a.t("current channel, private, not a member, starred"):u||d||p||!m||!h||b||!f||g?u&&d&&p&&!m&&h&&!b&&f&&!g?a.t("current channel, has unread messages and notifications, not a member, starred"):!u&&d&&p&&!m&&h&&!b&&f&&!g?a.t("has unread messages and notifications, not a member, starred"):u&&!d&&p&&!m&&h&&!b&&f&&!g?a.t("current channel, has notifications, not a member, starred"):u||d||!p||m||!h||b||!f||g?u&&d&&!p&&!m&&h&&!b&&f&&!g?a.t("current channel, has unread messages, not a member, starred"):u||!d||p||m||!h||b||!f||g?!u||d||p||m||!h||b||!f||g?u||d||p||m||!h||b||!f||g?u&&d&&p&&m&&!h&&!b&&f&&!g?a.t("current channel, has unread messages and notifications, private, starred"):!u&&d&&p&&m&&!h&&!b&&f&&!g?a.t("has unread messages and notifications, private, starred"):u&&!d&&p&&m&&!h&&!b&&f&&!g?a.t("current channel, has notifications, private, starred"):u||d||!p||!m||h||b||!f||g?u&&d&&!p&&m&&!h&&!b&&f&&!g?a.t("current channel, has unread messages, private, starred"):u||!d||p||!m||h||b||!f||g?!u||d||p||!m||h||b||!f||g?u||d||p||!m||h||b||!f||g?u&&d&&p&&!m&&!h&&!b&&f&&!g?a.t("current channel, has unread messages and notifications, starred"):u||!d||!p||m||h||b||!f||g?!u||d||!p||m||h||b||!f||g?u||d||!p||m||h||b||!f||g?!u||!d||p||m||h||b||!f||g?u||!d||p||m||h||b||!f||g?!u||d||p||m||h||b||!f||g?u||d||p||m||h||b||!f||g?u&&d&&p&&m&&h&&b&&!f&&!g?a.t("current channel, has unread messages and notifications, private, not a member, muted"):!u&&d&&p&&m&&h&&b&&!f&&!g?a.t("has unread messages and notifications, private, not a member, muted"):u&&!d&&p&&m&&h&&b&&!f&&!g?a.t("current channel, has notifications, private, not a member, muted"):!u&&!d&&p&&m&&h&&b&&!f&&!g?a.t("has notifications, private, not a member, muted"):u&&d&&!p&&m&&h&&b&&!f&&!g?a.t("current channel, has unread messages, private, not a member, muted"):!u&&d&&!p&&m&&h&&b&&!f&&!g?a.t("has unread messages, private, not a member, muted"):u&&!d&&!p&&m&&h&&b&&!f&&!g?a.t("current channel, private, not a member, muted"):u||d||p||!m||!h||!b||f||g?u&&d&&p&&!m&&h&&b&&!f&&!g?a.t("current channel, has unread messages and notifications, not a member, muted"):!u&&d&&p&&!m&&h&&b&&!f&&!g?a.t("has unread messages and notifications, not a member, muted"):u&&!d&&p&&!m&&h&&b&&!f&&!g?a.t("current channel, has notifications, not a member, muted"):u||d||!p||m||!h||!b||f||g?u&&d&&!p&&!m&&h&&b&&!f&&!g?a.t("current channel, has unread messages, not a member, muted"):u||!d||p||m||!h||!b||f||g?!u||d||p||m||!h||!b||f||g?u||d||p||m||!h||!b||f||g?u&&d&&p&&m&&!h&&b&&!f&&!g?a.t("current channel, has unread messages and notifications, private, muted"):!u&&d&&p&&m&&!h&&b&&!f&&!g?a.t("has unread messages and notifications, private, muted"):u&&!d&&p&&m&&!h&&b&&!f&&!g?a.t("current channel, has notifications, private, muted"):u||d||!p||!m||h||!b||f||g?u&&d&&!p&&m&&!h&&b&&!f&&!g?a.t("current channel, has unread messages, private, muted"):u||!d||p||!m||h||!b||f||g?!u||d||p||!m||h||!b||f||g?u||d||p||!m||h||!b||f||g?u&&d&&p&&!m&&!h&&b&&!f&&!g?a.t("current channel, has unread messages and notifications, muted"):u||!d||!p||m||h||!b||f||g?!u||d||!p||m||h||!b||f||g?u||d||!p||m||h||!b||f||g?!u||!d||p||m||h||!b||f||g?u||!d||p||m||h||!b||f||g?!u||d||p||m||h||!b||f||g?u||d||p||m||h||!b||f||g?u&&d&&p&&m&&h&&!b&&!f&&!g?a.t("current channel, has unread messages and notifications, private, not a member"):!u&&d&&p&&m&&h&&!b&&!f&&!g?a.t("has unread messages and notifications, private, not a member"):u&&!d&&p&&m&&h&&!b&&!f&&!g?a.t("current channel, has notifications, private, not a member"):u||d||!p||!m||!h||b||f||g?u&&d&&!p&&m&&h&&!b&&!f&&!g?a.t("current channel, has unread messages, private, not a member"):u||!d||p||!m||!h||b||f||g?!u||d||p||!m||!h||b||f||g?u||d||p||!m||!h||b||f||g?u&&d&&p&&!m&&h&&!b&&!f&&!g?a.t("current channel, has unread messages and notifications, not a member"):u||!d||!p||m||!h||b||f||g?!u||d||!p||m||!h||b||f||g?u||d||!p||m||!h||b||f||g?!u||!d||p||m||!h||b||f||g?u||!d||p||m||!h||b||f||g?!u||d||p||m||!h||b||f||g?u||d||p||m||!h||b||f||g?!(u&&d&&p&&m)||h||b||f||g?u||!d||!p||!m||h||b||f||g?!u||d||!p||!m||h||b||f||g?u||d||!p||!m||h||b||f||g?!u||!d||p||!m||h||b||f||g?u||!d||p||!m||h||b||f||g?!u||d||p||!m||h||b||f||g?u||d||p||!m||h||b||f||g?!(u&&d&&p)||m||h||b||f||g?u||!d||!p||m||h||b||f||g?!u||d||!p||m||h||b||f||g?u||d||!p||m||h||b||f||g?!u||!d||p||m||h||b||f||g?u||!d||p||m||h||b||f||g?!u||d||p||m||h||b||f||g?"":a.t("current channel"):a.t("has unread messages"):a.t("current channel, has unread messages"):a.t("has notifications"):a.t("current channel, has notifications"):a.t("has unread messages and notifications"):a.t("current channel, has unread messages and notifications"):a.t("private"):a.t("current channel, private"):a.t("has unread messages, private"):a.t("current channel, has unread messages, private"):a.t("has notifications, private"):a.t("current channel, has notifications, private"):a.t("has unread messages and notifications, private"):a.t("current channel, has unread messages and notifications, private"):a.t("not a member"):a.t("current channel, not a member"):a.t("has unread messages, not a member"):a.t("current channel, has unread messages, not a member"):a.t("has notifications, not a member"):a.t("current channel, has notifications, not a member"):a.t("has unread messages and notifications, not a member"):a.t("private, not a member"):a.t("current channel, private, not a member"):a.t("has unread messages, private, not a member"):a.t("has notifications, private, not a member"):a.t("muted"):a.t("current channel, muted"):a.t("has unread messages, muted"):a.t("current channel, has unread messages, muted"):a.t("has notifications, muted"):a.t("current channel, has notifications, muted"):a.t("has unread messages and notifications, muted"):a.t("private, muted"):a.t("current channel, private, muted"):a.t("has unread messages, private, muted"):a.t("has notifications, private, muted"):a.t("not a member, muted"):a.t("current channel, not a member, muted"):a.t("has unread messages, not a member, muted"):a.t("has notifications, not a member, muted"):a.t("private, not a member, muted"):a.t("starred"):a.t("current channel, starred"):a.t("has unread messages, starred"):a.t("current channel, has unread messages, starred"):a.t("has notifications, starred"):a.t("current channel, has notifications, starred"):a.t("has unread messages and notifications, starred"):a.t("private, starred"):a.t("current channel, private, starred"):a.t("has unread messages, private, starred"):a.t("has notifications, private, starred"):a.t("not a member, starred"):a.t("current channel, not a member, starred"):a.t("has unread messages, not a member, starred"):a.t("has notifications, not a member, starred"):a.t("private, not a member, starred"):a.t("muted, starred"):a.t("current channel, muted, starred"):a.t("has unread messages, muted, starred"):a.t("has notifications, muted, starred"):a.t("private, muted, starred"):a.t("not a member, muted, starred"):a.t("has a draft message"):a.t("current channel, has a draft message"):a.t("has unread messages, has a draft message"):a.t("current channel, has unread messages, has a draft message"):a.t("has notifications, has a draft message"):a.t("current channel, has notifications, has a draft message"):a.t("has unread messages and notifications, has a draft message"):a.t("private, has a draft message"):a.t("current channel, private, has a draft message"):a.t("has unread messages, private, has a draft message"):a.t("has notifications, private, has a draft message"):a.t("not a member, has a draft message"):a.t("current channel, not a member, has a draft message"):a.t("has unread messages, not a member, has a draft message"):a.t("has notifications, not a member, has a draft message"):a.t("private, not a member, has a draft message"):a.t("muted, has a draft message"):a.t("current channel, muted, has a draft message"):a.t("has unread messages, muted, has a draft message"):a.t("has notifications, muted, has a draft message"):a.t("private, muted, has a draft message"):a.t("not a member, muted, has a draft message"):a.t("starred, has a draft message"):a.t("current channel, starred, has a draft message"):a.t("has unread messages, starred, has a draft message"):a.t("has notifications, starred, has a draft message"):a.t("private, starred, has a draft message"):a.t("not a member, starred, has a draft message"):a.t("muted, starred, has a draft message");return!n||_||v?n||_||!v?n&&!_&&v?a.t("{channelName}, previously {previousChannelName} ({context})",{channelName:t,previousChannelName:n,context:v}):n||!_||v?n&&_&&!v?a.t("{channelName}, previously {previousChannelName}, {workspaceDescription}",{channelName:t,workspaceDescription:_,previousChannelName:n}):!n&&_&&v?a.t("{channelName}, {workspaceDescription} ({context})",{channelName:t,workspaceDescription:_,context:v}):n&&_&&v?a.t("{channelName}, previously {previousChannelName}, {workspaceDescription} ({context})",{channelName:t,workspaceDescription:_,previousChannelName:n,context:v}):t||"":a.t("{channelName}, {workspaceDescription}",{channelName:t,workspaceDescription:_}):a.t("{channelName} ({context})",{channelName:t,context:v}):a.t("{channelName}, previously {previousChannelName}",{channelName:t,previousChannelName:n})}},G4eq:function(e,t,n){},G59f:function(e,t,n){},G7w5:function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("ifKl"),p=n("kxpR"),m=n.n(p),h=n("XHGt"),b=n("aK/h"),f=n("nNoG"),g=n("XqP4"),_=n("Fdc0"),v=n("h9PG"),y=n("t85p"),k=n("KD8n"),O=n("0f2Y"),C=n("lwWk"),E=n("Atrf"),j=n("llxT"),S=n("6avh"),I=n("RAhH"),w=n("XLFM"),N=n("QbLZ"),T=n.n(N),A=n("fujP"),R=n("5mKg");var P=n("guIn");var M=n("sk9p"),x=n.n(M),F=n("ICFZ"),L=n("/m+M"),D=n("0rID"),U=n("TSYQ"),B=n.n(U),q=n("Rjct"),H=(n("LCkN"),b.b.node,b.b.string.isRequired,b.b.node,{children:void 0,value:void 0});function W(e){var t=e.children,n=e.label,a=e.value,r=Object(p.useContext)(q.a);return n?m.a.createElement("div",{className:B()("p-member_profile_field",{"p-member_profile_field--keyboard":r})},m.a.createElement("div",{className:"p-member_profile_field__primary"},m.a.createElement("div",{className:"p-member_profile_field__label"},n),m.a.createElement("div",{className:"p-member_profile_field__value"},a)),t&&m.a.createElement("div",{className:"p-member_profile_field__secondary"},t)):null}W.displayName="MemberProfileField",W.defaultProps=H;var G=W,K=new f.b("member_profile"),V=(b.b.object,{member:void 0});function z(e){var t=e.member,n=Object(D.a)(!1,2e3),a=x()(n,2),r=a[0],i=a[1];if(!Object(L.a)().featureModernProfileFlexpane)return null;var o=void 0,s=void 0;r?(s="success",o=K.t("Copied!")):o=K.t("Copy");var l=Object(_.v)(t);return m.a.createElement(G,{label:K.t("Email address"),value:m.a.createElement(O.a,{href:"mailto:"+l},l)},Object(F.a)()&&m.a.createElement(I.c,{status:s,tip:o,zIndex:"above_fs"},m.a.createElement(w.d,{"aria-label":K.t("Copy Email Address"),onClick:function(){Object(F.b)(l),i(!0)},icon:"all-files",type:"outline"})))}z.displayName="MemberEmailField",z.defaultProps=V;var Y=z,Q=n("whT2"),X=n("XL7r"),J=n("NYp8"),Z=new f.b("member_profile");b.b.object,b.b.bool;var $={member:void 0,time24:!1};function ee(e){var t=e.member,n=e.time24,a=Object(p.useState)(),r=x()(a,2),i=r[0],o=r[1];return Object(J.a)(function(){o(function(e,t){return Object(Q.a)(Date.now(),{timeZone:Object(_.Q)(e),timeZoneOffset:Object(_.R)(e),do24hrTime:t})}(t,n))}),m.a.createElement(G,{label:Z.t("Local time"),value:i})}ee.displayName="MemberLocalTimeField",ee.defaultProps=$;var te=Object(h.b)(function(e){return{time24:Object(X.j)(e,"time24")}})(ee),ne=n("CPJ1"),ae=n("cD5Y"),re=n("zmn3"),ie=n("Z0Cl"),oe=n("1zbP"),se=n("B/i4"),le=n("4M+g"),ce=n("4Twu"),ue=new f.b("member_profile"),de=(b.b.arrayOf(b.b.object.isRequired),{channels:void 0});function pe(e){var t=e.channels;if(!Object(L.a)().featureModernProfileFlexpane)return null;var n=Object(ie.a)(t,oe.b);return Object(A.a)(n)?ue.t("None"):m.a.createElement("ul",{className:"p-member_profile_field__list"},n.map(function(e){return m.a.createElement("li",{key:e.id,className:"p-member_profile_field__list_item"},m.a.createElement(O.a,{href:Object(se.a)({channelId:e.id})},m.a.createElement(ce.a,{channelId:e.id,className:"cursor_pointer",iconProps:{inherit:!0}})))}))}pe.displayName="ChannelList",pe.defaultProps=de;var me=Object(h.b)(function(e,t){var n=t.channelIds;return{channels:Object(re.a)(n,function(t){return Object(le.e)(e,t)})}})(pe);function he(e){var t=e.fetchMemberProfileExtras,n=e.member,a=Object(p.useState)(!1),r=x()(a,2),i=r[0],o=r[1],s=Object(p.useState)([]),l=x()(s,2),c=l[0],u=l[1];return Object(p.useEffect)(function(){var e=void 0;Object(_.Gb)(n)?e=["channels"]:Object(_.tb)(n)&&(e=["shared_channels"]),e&&(o(!0),t({keys:e,userId:n.id,reason:"useProfileExtras"}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u(e.channels||e.shared_channels)}).finally(function(){o(!1)}))},[t,n]),{extras:c,isLoading:i}}var be=new f.b("member_profile"),fe=(b.b.func,b.b.object,{fetchMemberProfileExtras:d.a,member:void 0});function ge(e){var t=e.fetchMemberProfileExtras,n=(e.member,he(t)),a=n.extras,r=n.isLoading;return Object(L.a)().featureModernProfileFlexpane?m.a.createElement(G,{label:be.t("Shared Channels"),value:r?m.a.createElement(ae.a,{size:"small",inline:!0}):m.a.createElement(me,{channelIds:a})}):null}ge.displayName="MemberSharedChannelsField",ge.defaultProps=fe;var _e={fetchMemberProfileExtras:function(){return ne.e.apply(void 0,arguments)}},ve=Object(h.b)(null,_e)(ge),ye=n("UF3u"),ke=n("9soY"),Oe=n("G4ux"),Ce=n("1hAG"),Ee=new f.b("member_profile"),je=(b.b.arrayOf(b.b.object.isRequired),{teams:void 0});function Se(e){var t=e.teams;if(!Object(L.a)().featureModernProfileFlexpane)return null;var n=Object(ie.a)(t,oe.b);return Object(A.a)(n)?Ee.t("None"):m.a.createElement("ul",{className:"p-member_profile_field__list"},n.map(function(e){return m.a.createElement("li",{key:e.id,className:"p-member_profile_field__list_item"},Object(R.f)(e))}))}Se.displayName="TeamList",Se.defaultProps=je;var Ie=Object(h.b)(function(e,t){var n=t.teamIds;return{teams:Object(re.a)(n,function(t){return Object(Ce.i)(e,t)})}})(Se),we=new f.b("member_profile");b.b.func,b.b.arrayOf(b.b.string.isRequired);var Ne={fetchAndUpsertTeamsFromAPI:d.a,sharedTeamIds:void 0};function Te(e){var t=e.fetchAndUpsertTeamsFromAPI,n=e.sharedTeamIds,a=function(e,t){var n=Object(p.useState)(!1),a=x()(n,2),r=a[0],i=a[1];return Object(p.useEffect)(function(){Object(A.a)(t)||(i(!0),e({ids:t,reason:"MemberSharedWorkspacesField"}).finally(function(){return i(!1)}))},[e,t]),{isLoading:r}}(t,n).isLoading;if(!Object(L.a)().featureModernProfileFlexpane)return null;var r=a?m.a.createElement(ae.a,{size:"small",inline:!0}):m.a.createElement(Ie,{teamIds:n});return m.a.createElement(G,{label:we.t("Shared Workspaces"),value:r})}Te.displayName="MemberSharedWorkspacesField",Te.defaultProps=Ne;var Ae=m.a.memo(Te,function(e,t){return Object(ye.a)(t,e,2)});var Re={fetchAndUpsertTeamsFromAPI:function(){return ke.b.apply(void 0,arguments)}},Pe=Object(h.b)(function(e,t){var n=t.member,a=Object(Oe.b)(e);return{sharedTeamIds:Object(_.U)(n,a)}},Re)(Ae),Me=new f.b("member_profile"),xe=(b.b.object,{member:void 0});function Fe(e){var t=e.member;if(!Object(L.a)().featureModernProfileFlexpane)return null;var n=Object(_.x)(t);return n?m.a.createElement(G,{key:"invited_by",label:Me.t("Invited By"),value:m.a.createElement(E.a,{id:n})}):null}Fe.displayName="MemberGuestInvitedByField",Fe.defaultProps=xe;var Le=Fe,De=n("j/30"),Ue=n("qc8s"),Be=new f.b("member_profile"),qe=(b.b.object,{member:void 0});function He(e){var t=e.member;if(!Object(L.a)().featureModernProfileFlexpane)return null;var n=Object(_.w)(t);return n?m.a.createElement(G,{label:Be.t("Member Until"),value:Be.t("{date} at {time}",{date:Object(De.a)(n),time:Object(Ue.a)(n)})}):null}He.displayName="MemberGuestUntilField",He.defaultProps=qe;var We=He,Ge=new f.b("member_profile"),Ke=(b.b.object,b.b.func,b.b.object,b.b.object,{currentMember:void 0,fetchMemberProfileExtras:d.a,member:void 0,team:void 0});function Ve(e){var t=e.currentMember,n=e.fetchMemberProfileExtras,a=e.member,r=e.team,i=he({fetchMemberProfileExtras:n,member:a}),o=i.extras,s=i.isLoading;if(!Object(L.a)().featureModernProfileFlexpane)return null;var l=s?m.a.createElement(ae.a,{size:"small",inline:!0}):m.a.createElement(me,{channelIds:o});return m.a.createElement(G,{key:"channels",label:Ge.t("Channels"),value:l},Object(_.Gb)(a)&&Object(_.eb)(t)&&m.a.createElement(I.c,{tip:Ge.t("Manage")},m.a.createElement(w.d,{"aria-label":Ge.t("Manage Guest Channels"),href:Object(R.o)(r)+"admin?#restricted",icon:"filters",type:"outline"})))}Ve.displayName="MemberGuestChannelsField",Ve.defaultProps=Ke;var ze={fetchMemberProfileExtras:function(){return ne.e.apply(void 0,arguments)}},Ye=Object(h.b)(function(e){return{currentMember:Object(Oe.b)(e)}},ze)(Ve);n.d(t,"a",function(){return Qe});var Qe={CUSTOM:"custom",EMAIL:"email",PHONE:"phone",STATUS:"status",TIME:"time",NAME:"name",CHANNELS:"channels",SHARED_WORKSPACES:"shared_workspaces",GUEST:"guest"},Xe=new f.b("member_profile"),Je=(b.b.bool,b.b.bool,b.b.object,b.b.func,b.b.func,b.b.bool,b.b.object,b.b.arrayOf(b.b.oneOf(Object.values(Qe)).isRequired).isRequired,b.b.bool.isRequired,{hasStatus:!1,isEnterprise:!1,member:void 0,onClick:d.a,openCustomStatusDialog:d.a,prefDisplayEmailAddresses:!1,team:void 0}),Ze=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"getProfileLinkHTML",value:function(e,t){return m.a.createElement(C.a,{href:e,onClick:this.props.onClick,target:"_blank",title:e},t||e)}},{key:"getProfileUserFieldHTML",value:function(e){var t=e.split(/\s*,\s*/).map(function(e){return m.a.createElement(E.a,{id:e})});return Object(f.j)(t,{noConj:!0,react:!0})}},{key:"getVisibleTeamProfileFieldsForMember",value:function(){var e=this,t=this.props;return function(e,t){var n=Object(R.n)(t);if(Object(A.a)(n))return[];var a=Object(_.J)(e);if(Object(A.a)(a))return[];var r=[];return n.forEach(function(e){if(!e.is_hidden){var t=a[e.id];t&&t.value&&r.push(T()({},e,{alt:t.alt,value:t.value}))}}),r}(t.member,t.team).map(function(t){var n=void 0,a=void 0;if("date"===t.type)n=Object(g.a)(t.value),a=t.value;else if("user"===t.type)a=e.getProfileUserFieldHTML(t.value);else if("link"===t.type)a=e.getProfileLinkHTML(t.value,t.alt||t.label);else if(function(e){return e&&"text"===e.type&&"skype"===e.label.toLowerCase()}(t)){var r="skype:"+t.value+"?call";a=e.getProfileLinkHTML(r,t.value)}else n=t.alt,a=t.value;return{alt:n,id:t.id,label:t.label,value:a}})}},{key:"render",value:function(){var e=this,t=this.props,n=t.featureModernProfileFlexpane,a=t.hasStatus,r=t.isEnterprise,i=t.member,o=t.onClick,s=t.prefDisplayEmailAddresses,l=t.team,c=t.types;if(!n)return null;var u=[];return c.forEach(function(t){if(t===Qe.EMAIL&&(s||Object(_.Hb)(i))){var n=Object(_.v)(i);Object(P.a)(n)&&u.push(m.a.createElement(Y,{key:"email",member:i}))}else if(t===Qe.PHONE){var c=Object(_.D)(i);Object(P.a)(c)&&u.push(m.a.createElement(G,{key:"phone",label:Xe.t("Phone number"),value:m.a.createElement(C.a,{href:"tel:"+c,onClick:o},c)}))}else if(t===Qe.STATUS){var d=void 0;if(a){var p=m.a.createElement(S.b,{animated:!0,className:"p-member_profile_field__status",memberId:i.id,tooltip:!1});d=Object(_.Hb)(i)?m.a.createElement(I.c,{tip:Xe.t("Edit")},m.a.createElement(j.a,{onClick:function(){o(),e.props.openCustomStatusDialog()},tabIndex:-1},p,m.a.createElement(S.a,{className:"p-member_profile_field__status_expiration",memberId:i.id}))):p}else Object(_.Hb)(i)&&(d=m.a.createElement(O.a,{className:"p-member_profile_field__interactable",onClick:function(){o(),e.props.openCustomStatusDialog()}},Xe.t("Set a status")));d&&u.push(m.a.createElement(G,{key:"status",label:Xe.t("Status"),value:d},Object(_.Hb)(i)&&a&&m.a.createElement(I.c,{tip:Xe.t("Edit"),zIndex:"above_fs"},m.a.createElement(w.d,{"aria-label":Xe.t("Edit Custom Status"),onClick:function(){o(),e.props.openCustomStatusDialog()},icon:"pencil",type:"outline"}))))}else if(t!==Qe.TIME||Object(_.Ib)(i))if(t===Qe.NAME){var h=Object(_.F)(i);Object(P.a)(h)&&u.push(m.a.createElement(G,{key:"name",label:Xe.t("Display name"),value:h}))}else if(t===Qe.CUSTOM){e.getVisibleTeamProfileFieldsForMember().forEach(function(e){Object(P.a)(e.value)&&u.push(m.a.createElement(G,{key:e.id,label:e.label,value:e.alt||e.value}))})}else t===Qe.SHARED_CHANNELS?Object(_.tb)(i)&&u.push(m.a.createElement(ve,{key:Qe.SHARED_CHANNELS,member:i})):t===Qe.SHARED_WORKSPACES?r&&u.push(m.a.createElement(Pe,{key:Qe.SHARED_WORKSPACES,member:i})):t===Qe.GUEST&&Object(_.Gb)(i)&&u.push(m.a.createElement(Le,{key:"guest-invited",member:i}),m.a.createElement(We,{key:"guest-until",member:i}),m.a.createElement(Ye,{key:"guest-channels",member:i,team:l}));else u.push(m.a.createElement(te,{key:"time",member:i}))}),m.a.createElement("div",null,u)}}]),t}(p.Component);Ze.displayName="MemberProfileFields",Ze.defaultProps=Je;var $e={openCustomStatusDialog:function(){return k.a.apply(void 0,arguments)}};t.b=Object(h.b)(function(e,t){var n=t.member;return{hasStatus:Object(_.ab)(n),isEnterprise:Object(y.q)(e),prefDisplayEmailAddresses:Object(v.a)(e,"display_email_addresses"),featureModernProfileFlexpane:Object(y.m)(e,"feature_modern_profile_flexpane")}},$e)(Ze)},GZud:function(e,t,n){},GdkL:function(e,t,n){},GhVE:function(e,t,n){},Gmrf:function(e,t,n){"use strict";n.d(t,"b",function(){return p});var a=n("YEIV"),r=n.n(a),i=n("aK/h"),o=n("EzZj"),s=n("MNvw"),l=n("lhZz"),c=n("Z7Ay"),u=Object(o.b)("Stores an Error object");u.meta={name:"setLastError",key:"appSonicReduxErrorStoreSetLastError",description:"Stores an Error object"},u.propTypes=i.b.string;var d=Object(s.b)(r()({},u,function(e,t){return{lastError:t}}),{lastError:null},{storeKey:"error",persistenceEnabled:!1});d.meta={name:"error",key:"appSonicReduxErrorStoreError"},d.propTypes={lastError:i.b.object};var p=function(e){return e&&e.error&&e.error.lastError};t.a=d,Object(c.a)("setLastError",function(e,t){Object(l.dispatchForTeamId)(e,u(t))})},GoIT:function(e,t,n){},H3xq:function(e,t,n){"use strict";var a=n("QbLZ"),r=n.n(a),i=n("F294"),o=n("XHGt"),s=n("kOzZ"),l=n("yHhI"),c=n("jLdI"),u=n("NuWb"),d=n("fYfO"),p=n("qnZ7"),m=n("0wDQ"),h=n("AUAP"),b=n("G4ux"),f=n("brL+"),g=n("1hAG"),_=n("4M+g"),v=n("uvIC"),y=n("XL7r"),k=n("Uk1S"),O=n("pfyZ"),C=n("ULIY"),E=n("h0LD"),j=n("0sSB"),S=n("IxGy"),I=n("t85p"),w=n("BUzq"),N=n("6kok"),T=n("hOQf"),A=n("Q+UV"),R=n("Bekf"),P=n("mVkb"),M=n("Smdl"),x=n("YEIV"),F=n.n(x),L=n("sk9p"),D=n.n(L),U=n("iCc5"),B=n.n(U),q=n("V7oC"),H=n.n(q),W=n("FYw3"),G=n.n(W),K=n("mRg0"),V=n.n(K),z=n("fujP"),Y=n("qAkX"),Q=n("TGBA"),X=n("bPB8"),J=n("S1sa"),Z=n("x91h"),$=n("Z0Cl"),ee=n("CpTu"),te=n("ifKl"),ne=n("zmn3"),ae=n("aK/h"),re=n("kxpR"),ie=n.n(re),oe=n("TSYQ"),se=n.n(oe),le=n("8dKT"),ce=n("HHn2"),ue=n("Jnln"),de=n("YmYS"),pe=n("C9/x"),me=n("yPgC"),he=n("aLpA"),be=n("vSXf"),fe=n("lfjV"),ge=n("t3QL"),_e=n("VymY"),ve=n("qc8s"),ye=n("/MYD"),ke=n("UF3u"),Oe=n("nNoG"),Ce=n("HOOb"),Ee=n("uQ8d"),je=n("EHyS"),Se=n("s19S"),Ie=n("gtcZ"),we=n("ubOb"),Ne=n("XLFM"),Te=n("lV3N"),Ae=n("3dqR"),Re=n("oqAd"),Pe=n("lek6"),Me=n("RAhH"),xe=n("FXaq"),Fe=n("VwYs"),Le=n("m36V"),De=n("cAy8"),Ue=n("od5y"),Be=n("qzqx"),qe=n("6Iy0"),He=n("Aeia"),We=n("f+8a"),Ge=n("y7mK"),Ke=n("qYtJ"),Ve=n("NvKv"),ze=n("y/l/"),Ye=n("Wzrj"),Qe=n("yk+1"),Xe=n("RjVJ"),Je=n("ALaB"),Ze=n("0gKA"),$e=n("Y6eO"),et=n("xUg9"),tt=n("HvGc"),nt=n("2ojh"),at=n("tMdt"),rt=n("Atrf"),it={pinned:"thumb-tack-filled",starred:"star",custom_response:"pencil",sli_highlight:"sparkles-filled",ephemeral:"eye-filled"},ot=(ae.b.bool,ae.b.bool,ae.b.bool,ae.b.bool,ae.b.bool,ae.b.bool,ae.b.bool,ae.b.oneOf(["ephemeral","custom_response","pinned","starred","sli_highlight"]),ae.b.shape({loading:ae.b.bool,isHighlight:ae.b.bool,feedbackOptions:ae.b.object,justification:ae.b.string,feedback:ae.b.string}),ae.b.bool,ae.b.string,ae.b.string,ae.b.string,ae.b.string,ae.b.bool.isRequired,ae.b.func,{isPinned:!1,isStarred:!1,isEphemeral:!1,isCustomResponse:!1,isSliHighlight:!1,isSelfIm:!1,isSlackbotIm:!1,primaryType:void 0,sliHighlight:void 0,isHovered:!1,channelId:void 0,ts:void 0,currentUserId:void 0,pinnedByMemberId:void 0,showStarredItemsList:te.a}),st=function(e){function t(e){B()(this,t);var n=G()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderHighlight=n.renderHighlight.bind(n),n.renderStarButton=n.renderStarButton.bind(n),n}return V()(t,e),H()(t,[{key:"renderHighlight",value:function(){var e=this.props,t=e.sliHighlight,n=e.channelId,a=e.ts,r=e.isHovered;return Object(O.i)(t)?ie.a.createElement(at.a,{channelId:n,ts:a,isHovered:r,sliHighlight:t}):null}},{key:"renderPinnedBy",value:function(e){return ie.a.createElement(rt.a,{id:e,className:"c-message__label_link"})}},{key:"renderStarButton",value:function(e){var t=e.text;return ie.a.createElement(Ne.c,{onClick:this.props.showStarredItemsList,className:"c-message__label_button"},t)}},{key:"render",value:function(){var e=this.props,t=e.primaryType,n=e.isPinned,a=e.isStarred,r=e.isEphemeral,i=e.isCustomResponse,o=e.isSliHighlight,s=e.isSelfIm,l=e.isSlackbotIm,c=e.currentUserId,u=e.pinnedByMemberId,d=e.featureSonicInputs,p=Object(nt.a)({isPinned:n,isStarred:a,isEphemeral:r,isCustomResponse:i,isSliHighlight:o,isSelfIm:s,isSlackbotIm:l,currentUserId:c,pinnedBy:u,renderHighlight:this.renderHighlight,renderPinnedBy:this.renderPinnedBy,renderStarButton:this.renderStarButton});if(!p)return null;var m=it[t],h=se()("c-message__label__gutter",{"c-message__label__gutter--feature_sonic_inputs":d});return ie.a.createElement("div",{className:"c-message__label"},ie.a.createElement("div",{className:h},m&&ie.a.createElement(Ue.b,{type:m,className:"c-message__label__icon",size:"inherit",inline:!0})),ie.a.createElement("div",{className:"c-message__label__text"},p))}}]),t}(re.PureComponent);st.displayName="MessageLabel",st.defaultProps=ot;var lt=Object(o.b)(function(e){return{featureSonicInputs:Object(I.m)(e,"feature_sonic_inputs")}},function(e){return{showStarredItemsList:function(){return e(tt.k.apply(void 0,arguments))}}})(st),ct=(n("67Ky"),new Oe.b("message")),ut={quote:!0,pre:!0},dt=(ae.b.object,ae.b.object,ae.b.string,ae.b.bool,ae.b.string,ae.b.string,ae.b.string,ae.b.string,ae.b.bool,ae.b.oneOf(["dense","light"]),ae.b.string,ae.b.string,ae.b.string,ae.b.string,ae.b.bool,ae.b.string,ae.b.string,ae.b.arrayOf(ae.b.shape({ts:ae.b.string,user:ae.b.string})),ae.b.number,ae.b.arrayOf(ae.b.string),ae.b.number,ae.b.string,ae.b.bool,ae.b.bool,ae.b.bool,ae.b.string,ae.b.arrayOf(ae.b.shape({color:ae.b.string,fallback:ae.b.string})),ae.b.string,ae.b.arrayOf(ae.b.string),ae.b.shape({id:ae.b.string,user:ae.b.string,comment:ae.b.string,is_starred:ae.b.bool}),ae.b.bool,ae.b.bool,ae.b.bool,ae.b.bool,ae.b.bool,ae.b.func,ae.b.shape({ts:ae.b.string,user:ae.b.string}),ae.b.bool,ae.b.string,me.a.Rollup(),ae.b.func,ae.b.func,ae.b.bool,ae.b.bool,ae.b.bool,ae.b.string,ae.b.string,ae.b.shape({loading:ae.b.bool,isHighlight:ae.b.bool,feedbackOptions:ae.b.object,justification:ae.b.string,feedback:ae.b.string}),ae.b.bool,ae.b.bool,ae.b.bool,ae.b.bool,ae.b.shape({emoji:ae.b.string}),ae.b.object,ae.b.string,ae.b.bool,ae.b.func,ae.b.bool,ae.b.bool,ae.b.bool,ae.b.string,ae.b.func,ae.b.func,ae.b.bool,ae.b.bool,ae.b.bool,ae.b.bool,ae.b.bool,ae.b.bool,ae.b.string,ae.b.bool.isRequired,ae.b.bool.isRequired,ae.b.bool,ae.b.string,ae.b.bool,ae.b.bool,ae.b.bool,ae.b.string,ae.b.object,ae.b.string,ae.b.bool,ae.b.bool,ae.b.string,ae.b.bool,me.a.BlockKitBlocks,ae.b.string,ae.b.bool,ae.b.func,ae.b.func,ae.b.bool,ae.b.string,ae.b.func,ae.b.oneOf(Object(Q.a)(qe.a)),ae.b.string,ae.b.bool,ae.b.func,ae.b.func,ae.b.bool.isRequired,{logger:{info:te.a,warn:te.a,error:te.a},message:null,ts:null,messageNotFound:!1,channelId:void 0,text:null,noSpecials:!1,alertType:null,subtype:null,theme:"light",userId:null,botId:null,appId:null,username:null,hasAdHocSender:!1,reactionKey:null,reactionKeyForInitialFileComment:null,replies:[],replyCount:0,replyUsers:[],replyUsersCount:0,latestReply:null,threadsEverythingPref:null,expandInlineImgsPref:!1,expandNonMediaAttachmentsPref:!1,threadTs:null,attachments:[],fileId:null,fileIds:null,comment:null,isUpload:!1,showUser:!0,isFileFollowup:!1,isEditing:!1,isHovered:!1,maybeStartEditingMessage:te.a,edited:null,isLast:!1,latestMessageTsWithReactions:null,rollup:null,logMessage:te.a,setUnreadPoint:te.a,isStarred:!1,isStandalone:!1,isPinned:!1,currentUserId:void 0,pinnedByMemberId:void 0,sliHighlight:null,isEphemeral:!1,isRichTextMessage:!1,shouldRenderBlocks:!1,isDeleting:!1,icons:null,botProfile:null,slackbotFeels:null,fadeAwayHighlight:!1,doneHighlighting:te.a,isUnprocessed:!1,showResend:!1,showCancel:!1,sourceTeamId:"",resendMsg:te.a,removeMsg:te.a,shouldJumpToTimestamp:!1,isSelfIm:!1,isSlackbotIm:!1,isTombstonedMessage:!1,isUnknown:!1,isEKMError:!1,featureAttachmentsV2:!1,teamDomain:void 0,channelSessionId:null,previousMessageIsPinned:void 0,previousMessageIsEphemeral:void 0,previousMessageIsStarred:void 0,previousMessageSubtype:void 0,previousMessageSliHighlight:void 0,previousMessagePinnedByMemberId:void 0,renderActions:!1,renderActionsOffscreen:!1,messageContainerType:void 0,ariaAssertive:void 0,blocks:void 0,serviceTeamId:void 0,featureSonicInputs:!1,clogMessageClick:te.a,clogUserClick:te.a,isThreadExpanded:!1,threadListId:void 0,showThreadIfThreadable:te.a,blocksContainerContext:qe.a.message,hasKeyboardFocusWithin:!1,onFocus:te.a,onBlur:te.a,parentId:void 0}),pt=function(e){function t(e){B()(this,t);var n=G()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setRef=n.setRef.bind(n),n.onContainerClick=n.onContainerClick.bind(n),n.onTimestampClick=n.onTimestampClick.bind(n),n.startEditing=n.startEditing.bind(n),n.onMouseEnter=n.onMouseEnter.bind(n),n.onMouseLeave=n.onMouseLeave.bind(n),n.onMenuToggle=n.onMenuToggle.bind(n),n.startHighlightingTimer=n.startHighlightingTimer.bind(n),n.onDoneHighlighting=n.onDoneHighlighting.bind(n),n.onDeleteAnimationTick=n.onDeleteAnimationTick.bind(n),n.onDeleteAnimationEnd=n.onDeleteAnimationEnd.bind(n),n.resendMsg=n.resendMsg.bind(n),n.removeMsg=n.removeMsg.bind(n),n.formatInlineAttachmentMaybe=n.formatInlineAttachmentMaybe.bind(n),n.formatThemeInstallButton=n.formatThemeInstallButton.bind(n),n.customFormatHandler=n.customFormatHandler.bind(n),n.customContentHandler=n.customContentHandler.bind(n),n.clogLinkClick=n.clogLinkClick.bind(n),n.clogUserClick=n.clogUserClick.bind(n),n.shouldShowAttachment=n.shouldShowAttachment.bind(n),n.messageRef=null,n.deleteAnimation=null,n.hasDisplayedContent=!0,n.inlineAttachmentsKey=0,n.setAttachmentsSorted(),n.state={isHovered:e.isHovered,actionsMenuOpen:!1,height:null},n}return V()(t,e),H()(t,[{key:"componentDidMount",value:function(){this.props.fadeAwayHighlight&&this.startHighlightingTimer(),this.isDeleting()&&this.onDeleteAnimationEnd()}},{key:"componentWillUnmount",value:function(){this.highlightTimer&&(clearTimeout(this.highlightTimer),this.onDoneHighlighting()),this.deleteAnimation&&(this.deleteAnimation.cancel(),this.onDeleteAnimationEnd())}},{key:"onContainerClick",value:function(e){if(e.shiftKey&&Object(je.a)(e)&&!Object(Ce.a)(e.target))return e.stopPropagation(),void this.props.logMessage({channelId:this.props.channelId,ts:this.props.ts});e.altKey&&(e.preventDefault(),this.props.setUnreadPoint({channelId:this.props.channelId,unreadTs:this.props.ts}))}},{key:"onDeleteAnimationEnd",value:function(){this.removeMsg(),this.deleteAnimation=null}},{key:"onDeleteAnimationTick",value:function(e){var t=e.value,n=e.nextTick;this.messageRef&&this.setState(function(){return{height:t}},n)}},{key:"onDoneHighlighting",value:function(){this.props.doneHighlighting(),this.highlightTimer=null}},{key:"onMenuToggle",value:function(e){var t=this;e?this.setState(function(){return{actionsMenuOpen:e}}):setTimeout(function(){t.setState(function(){return{actionsMenuOpen:!1}})},100)}},{key:"onMouseEnter",value:function(){this.setState(function(){return{isHovered:!0}})}},{key:"onMouseLeave",value:function(){this.setState(function(){return{isHovered:!1}})}},{key:"onTimestampClick",value:function(e){e.preventDefault(),this.props.shouldJumpToTimestamp&&Object(Se.q)(this.props.channelId,this.props.ts,this.props.threadTs)}},{key:"getResendText",value:function(){return this.props.isEKMError?ct.t("Your message couldn\u2019t be sent because your admins have disabled sending messages to this channel."):ct.t("Slack couldn\u2019t send this message")}},{key:"getTextWithThemes",value:function(){if(!this.props.text)return this.props.text;return this.props.text.replace(/((?:#[A-Fa-f0-9]{6} {0,}, {0,}){7})(#[A-Fa-f0-9]{6})(\b)/g,function(e){return e+" <theme_install_button|"+e+">"})}},{key:"getUrlsToHide",value:function(){var e=this.props,t=e.attachments;return e.featureHideUnfurlUrls?Object(X.a)(Object(ne.a)(Object(ne.a)(Object($.a)(Object(ne.a)(Object($.a)(t,this.shouldShowAttachment),ge.b),"isMsgUnfurl"),"fromUrl"),Z.a)):[]}},{key:"setAttachmentsSorted",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,n=t.attachments,a=t.text,r=Object(J.a)(Object(ne.a)(Object($.a)(n,this.shouldShowAttachment),ge.b),function(t){return e.isInlineImage(t,a)}),i=D()(r,2),o=i[0],s=i[1];this.attachmentsInline&&o&&!Object(ke.a)(this.attachmentsInline,o,2)&&(this.inlineAttachmentsKey+=1),this.attachmentsInline=o,this.attachmentsBelow=s}},{key:"setRef",value:function(e){this.messageRef=e}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props.fadeAwayHighlight;e.fadeAwayHighlight&&!t&&this.startHighlightingTimer(),this.isDeleting(e)&&!this.isDeleting()&&this.startDeleteAnimation(),this.setAttachmentsSorted(e),this.setState(function(){return{isHovered:e.isHovered}})}},{key:"clogLinkClick",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.props,n=t.ts,a=t.channelId,i={ts:n,user:t.userId,channel:a,bot_id:t.botId},o=r()({},e,{request_id:null});"user_link"===e.type?this.props.clogUserClick({msg:i,payload:o}):this.props.clogMessageClick({msg:i,payload:o})}},{key:"clogUserClick",value:function(e){this.clogLinkClick(r()({type:"user_link"},e))}},{key:"componentDidCatch",value:function(e){this.setState(function(){return{caughtError:!0}});var t=e?e.message:"",n=e?e.stack:"",a=this.props||{},r=a.channel&&a.channelId,i=a.logger;i.error("Message componentDidCatch: "+a.subtype+" "+a.ts+" in "+r+", "+t),n&&i.error(n)}},{key:"customContentHandler",value:function(e){var t=this.props.edited,n=e,a=this.getUrlsToHide();if(a.length&&(n=Object(We.a)({content:e,urls:a})),t){var r=Object(Y.a)(n)||{};n.push({type:"custom_edited_label",omitWhitespace:!!ut[r.type]})}return this.hasDisplayedContent=!!n.length,n}},{key:"customFormatHandler",value:function(e){var t=e.item,n=e.getDefaultOutput,a=void 0;return"link"===t.type?a="theme_install_button"===t.url?this.formatThemeInstallButton(e):this.formatInlineAttachmentMaybe(e):"custom_edited_label"===t.type&&(a=this.renderEditedLabel({omitWhitespace:t.omitWhitespace})),a||n()}},{key:"focusFirst",value:function(e){this.focusNode(Object(_e.b)(e))}},{key:"focusLast",value:function(e){this.focusNode(Object(_e.c)(e))}},{key:"focusNode",value:function(e){e&&document.activeElement!==e&&(e.focus(),e.classList.add("focus-ring"))}},{key:"formatInlineAttachmentMaybe",value:function(e){var t=e.item,n=e.getDefaultOutput,a=this.props,i=a.ts,o=a.channelId,s=a.sourceTeamId,l=t.url,c=Object(ee.a)(this.attachmentsInline,{fromUrl:Object(Z.a)(l)});return c?ie.a.createElement(re.Fragment,null,n(),ie.a.createElement(Te.a,r()({},c,{messageTs:i,activeChannelId:o,sourceTeamId:s,clogLinkClick:this.clogLinkClick,botProfile:this.props.botProfile,isInline:!0}))):n()}},{key:"formatThemeInstallButton",value:function(e){var t=e.item.contents[0].text.replace(/\s/g,"").split(",");return ie.a.createElement("div",{className:"c-message__theme_button_container"},ie.a.createElement(et.a,{colors:t,clogLinkClick:this.clogLinkClick}))}},{key:"isDeleting",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.isDeleting,n=e.isStandalone;return t&&!n}},{key:"isInlineImage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props.text;return t&&-1!==Object(Z.a)(t).indexOf(e.fromUrl)&&Object(xe.l)(e)}},{key:"isThreadRootTombstone",value:function(){return"tombstone"===this.props.subtype}},{key:"removeMsg",value:function(){var e=this.props,t=e.ts,n=e.channelId,a=e.messageContainerType,r="thread_broadcast"===e.subtype&&a===he.H.THREADS_FLEXPANE;this.props.removeMsg({channelId:n,ts:t,broadcastDelete:r})}},{key:"resendMsg",value:function(){var e=this.props,t=e.ts,n=e.channelId;this.props.resendMsg(n,t)}},{key:"shouldShowAttachment",value:function(e){var t=this.props,n=t.text,a=t.blocks,r=t.subtype,i=t.isStandalone,o=t.expandInlineImgsPref,s=t.expandNonMediaAttachmentsPref,l=t.isRichTextMessage;return Object(ue.h)({attachment:e,messageText:n,messageBlocks:a,messageSubtype:r,messageIsStandalone:i,expandInlineImgsPref:o,expandNonMediaAttachmentsPref:s,isRichTextMessage:l})}},{key:"shouldShowMessageLabel",value:function(e){var t=e.labelTypes,n=this.props,a=n.showUser,r=n.isFileFollowup,i=n.pinnedByMemberId,o=n.previousMessageIsStarred,s=n.previousMessageIsPinned,l=n.previousMessageIsEphemeral,c=n.previousMessageSubtype,u=n.previousMessageSliHighlight,d=n.previousMessagePinnedByMemberId;if(Object(z.a)(t))return!1;if(t.sliHighlight)return!0;if(!a||r){var p=Object(pe.a)({isStarred:o,isPinned:s,isEphemeral:l,subtype:c,sliHighlight:u});if(Object(ke.a)(t,p))return t.isPinned&&p.isPinned&&d!==i}return!0}},{key:"shouldShowResendControls",value:function(){var e=this.props,t=e.showResend,n=e.showCancel;return t||n}},{key:"startDeleteAnimation",value:function(){if(this.messageRef){var e=this.messageRef.clientHeight;this.deleteAnimation=Object(fe.a)({fromValue:e,toValue:0,duration:200,easing:"easeInOutQuad",onTick:this.onDeleteAnimationTick,onComplete:this.onDeleteAnimationEnd})}}},{key:"startEditing",value:function(){var e=this.props;(0,e.maybeStartEditingMessage)({channelId:e.channelId,ts:e.ts,scroll:!0})}},{key:"startHighlightingTimer",value:function(){this.highlightTimer||(this.highlightTimer=setTimeout(this.onDoneHighlighting,4500))}},{key:"renderActions",value:function(){var e=this,t=this.props,n=t.ts,a=t.reactionKey,r=t.fileId,i=t.fileIds,o=t.comment,s=t.replies,l=t.replyCount,c=t.rollup,u=t.threadsEverythingPref,d=t.threadTs,p=t.channelId,m=t.subtype,h=t.isStarred,b=t.isPinned,f=t.isEphemeral,g=t.isDeleting,_=t.isStandalone,v=t.isUnknown,y=t.setUnreadPoint,k=t.theme,O=t.renderActions,C=t.renderActionsOffscreen,E=t.messageContainerType,j=t.hasKeyboardFocusWithin,S=t.parentId,I=this.state,w=I.actionsMenuOpen,N=I.isHovered;if(!n||!p)return null;var T=C&&!j&&!N&&!O;return w||N||j||T||O?g||_||v?null:ie.a.createElement(Ze.a,{reactionKey:a,fileId:r,fileIds:i,comment:o&&o.id,replies:s,replyCount:l,rollup:c,ts:n,threadsEverythingPref:u,threadTs:d,channelId:p,subtype:m,isStarred:h,isPinned:b,isEphemeral:f,editHandler:this.startEditing,unreadHandler:y,onMenuOpen:function(){return e.onMenuToggle(!0)},onMenuClose:function(){return e.onMenuToggle(!1)},onEmojiPickerOpen:function(){return e.onMenuToggle(!0)},onEmojiPickerClose:function(){return e.onMenuToggle(!1)},theme:k,renderOffscreen:T,messageContainerType:E,parentId:S}):null}},{key:"renderAttachments",value:function(){var e=this,t=this.props,n=t.ts,a=t.channelId,i=t.blocks,o=t.text,s=t.blocksContainerContext,l=t.sourceTeamId,c=this.attachmentsBelow;if(!c||!c.length)return null;var u=20,d=Object(ne.a)(c,function(t,c){var d=t.id||c+1,p=t.botId||e.props.botId;return t.blocks&&(u=10),ie.a.createElement(Te.a,r()({},t,{service:p,messageTs:n,activeChannelId:a,sourceTeamId:l,key:d,clogLinkClick:e.clogLinkClick,botProfile:e.props.botProfile,isOnlyMessageContent:!e.hasDisplayedContent||!i&&!o,blocksContainerContext:s}))}),p=d.splice(u);return ie.a.createElement("div",{className:"c-message__attachments"},d,this.renderAttachmentsOverLimitMaybe(p,u))}},{key:"renderAttachmentsOverLimitMaybe",value:function(e,t){if(!e.length)return null;var n=this.props.featureAllyBugbash,a={useAttachmentRules:!1,shouldBeExpandedByDefault:!1,expandableKey:Object(ce.a)("attachmentsOverLimit",this.props.ts,{limit:t})},i=e.length-t,o=n?{"aria-label":ct.t("{remainingAttachments, plural, =1 {Toggle attachment} other {Toggle additional {remainingAttachments} attachments}}",{remainingAttachments:i,note:"the label for the button that expands/collapses addtional message attachments, describes the button for customers using screen readers"})}:{};return ie.a.createElement("div",null,ie.a.createElement(Fe.a,r()({},a,o),e),ie.a.createElement(Le.a,r()({},a,{render:function(t,n){return ie.a.createElement(De.a,{isExpanded:t.isExpanded,onClick:n,attachmentsOverLimitCount:e.length})}})))}},{key:"renderAutomatedSubtype",value:function(){return ie.a.createElement(Qe.a,{subtype:this.props.subtype,channelId:this.props.channelId,timestamp:this.props.ts})}},{key:"renderAvatar",value:function(){if(this.isThreadRootTombstone())return ie.a.createElement("div",{className:"c-message__tombstone_icon"},ie.a.createElement(Ue.a,{type:"trash",align:"top"}));var e=this.props,t=e.userId,n=e.hasAdHocSender,a=e.botId,r=e.botProfile,i=e.isStandalone,o=e.icons,s=e.slackbotFeels,l=e.isTombstonedMessage,c=e.isUnknown;return ie.a.createElement(Ae.c,{className:"c-message__avatar",userId:t,isAdHocMember:n,botId:a,botProfile:r,slackbotFeels:s,size:36,icons:o,isInteractive:!l&&!i,isUnknown:c,showCard:!0,showTooltip:!0,clogLinkClick:this.clogUserClick,ariaHidden:"true",tabIndex:"-1"})}},{key:"renderBody",value:function(){var e=this.props,t=e.ts,n=e.fileId,a=e.subtype,r=e.rollup,i=e.userId,o=e.edited,s=e.noSpecials,l=e.ariaAssertive,c=e.attachments,u=e.blocks,d=e.shouldRenderBlocks,p=e.isTombstonedMessage,m=e.isUnknown,h=e.sourceTeamId,b=e.message,f=e.blocksContainerContext,g=e.isRichTextMessage,_=e.theme;if(this.isThreadRootTombstone())return ie.a.createElement("span",{className:"c-message__body c-message__body--tombstone"},ct.t("This message was deleted."));if(m)return ie.a.createElement("span",{className:"c-message__body c-message__body--unknown"},"\xa0");if(n||"file_comment"===a||"file_mention"===a)return null;if(r)return this.renderRollup();if(Object(le.a)(a))return this.renderAutomatedSubtype();var v=se()("c-message__body",{"c-message__body--me":"me_message"===a,"c-message__body--automated":p});if(u&&d)return ie.a.createElement(Be.a,{blocksContainerContext:f,msg:b,clogLinkClick:this.clogLinkClick,inline:g&&"dense"===_});var y=parseInt(t,10)>he.a;return ie.a.createElement(Pe.a,{"data-qa":"message-text",className:v,text:this.getTextWithThemes(),memberId:i,customFormatHandler:this.customFormatHandler,customContentHandler:this.customContentHandler,key:this.inlineAttachmentsKey,doSlackActionLinks:!0,clogLinkClick:this.clogLinkClick,noSpecials:s,ariaAssertive:l,ignoredPropEdited:o,ignoredPropAttachments:c,addDirectionAttr:y,sourceTeamId:h})}},{key:"renderContent",value:function(){var e=this.props,t=e.showUser,n=e.theme,a=e.isStandalone,r=e.reactionKey,i=e.reactionKeyForInitialFileComment,o=se()("c-message__content",{"c-message__content--feature_sonic_inputs":this.props.featureSonicInputs});return ie.a.createElement("div",{className:o,"data-qa":"message_content"},t&&this.renderContentHeader(),"light"===n&&this.renderThreadBroadcastPreamble(),this.renderBody(),this.renderFile(),this.renderFiles(),this.renderAttachments(),!a&&!this.isThreadRootTombstone()&&this.renderReactions(r),!a&&!this.isThreadRootTombstone()&&this.renderReactions(i),!a&&this.renderReplyBar(),this.renderThreadBroadcastFooter(),this.shouldShowResendControls()&&this.renderResendControls())}},{key:"renderContentHeader",value:function(){var e=this.props,t=e.userId,n=e.botId,a=e.username,r=e.theme,i=e.isUpload,o=e.isStandalone,s=e.isTombstonedMessage,l=e.botProfile;if(this.isThreadRootTombstone())return null;var c=s?Object(Ee.a)({upload:i}):void 0;return ie.a.createElement("div",{className:"c-message__content_header"},ie.a.createElement(Ge.a,{overrideNameText:c,userId:t,botId:n,username:a,isInteractive:!o&&!s,botProfile:l,clogLinkClick:this.clogUserClick})," ","light"===r&&this.renderTimestamp(),"dense"===r&&ie.a.createElement("span",{className:"c-message__dense_copy_timestamp copy_only"},this.renderTimestamp(),ie.a.createElement("br",null)),"dense"===r&&"\xa0","dense"===r&&this.renderThreadBroadcastPreamble())}},{key:"renderEdit",value:function(){var e=this.props,t=e.channelId,n=e.ts,a=e.messageContainerType;return n&&t?ie.a.createElement("div",{className:"c-message__content"},ie.a.createElement($e.a,{channelId:t,ts:n,messageContainerType:a})):null}},{key:"renderEditedLabel",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).omitWhitespace,t=void 0!==e&&e,n=this.props.edited.ts,a=ie.a.createElement("span",{key:"edited",className:"c-message__edited_label",dir:"ltr"},!t&&"\xa0",ct.t("(edited)"),!t&&"\xa0");if(n){var r=ct.t("{date} at {time}",{date:Object(ye.a)(n,{shortenMonth:!0}),time:Object(ve.a)(n)});return ie.a.createElement(Me.c,{key:"edited",delay:Me.a,tip:r},a)}return a}},{key:"renderError",value:function(){if(!this.props.featureTinyspeck)return null;var e=this.props,t=e.ts,n=e.channelId;return ie.a.createElement("div",{style:{background:"#FFCFCF",padding:"24px"}},ie.a.createElement("strong",null,"TS-ONLY: Message ",t," in ",n," failed to render.")," ","Please go to #escal-messages and read up to see if this was already reported. If not, please make a report including a link to the message before this one (if in a public channel.)")}},{key:"renderFile",value:function(){var e=this.props,t=e.fileId,n=e.comment,a=e.subtype;return t&&n&&"file_comment"===a?this.renderFileComment():null}},{key:"renderFileComment",value:function(){var e=this.props,t=e.fileId,n=e.comment,a=e.isFileFollowup,r=e.theme,i=e.subtype,o=e.userId;return t&&n?["file_comment"===i&&(!a||"dense"===r)&&ie.a.createElement(ze.a,{fileId:t,comment:n,followup:a,key:n.id+"-meta"})||null,ie.a.createElement(Pe.a,{text:n.comment,memberId:o,className:"c-message__comment c-message__body",key:n.id+"-body",clogLinkClick:this.clogLinkClick})]:null}},{key:"renderFiles",value:function(){var e=this.props,t=e.fileIds,n=e.channelId,a=e.subtype,r=e.text;if(!t||!t.length||!n)return null;if("file_comment"===a)return null;var i=ie.a.createElement(He.b,{msg:this.props.message}),o=se()("c-message__files","c-message__files--file_threads_meta_data","c-message__files--pillow",{"c-message__files--empty_body":!r});return ie.a.createElement("div",{className:o},i)}},{key:"renderGutter",value:function(){var e=se()("c-message__gutter",{"c-message__gutter--feature_sonic_inputs":this.props.featureSonicInputs});if("light"===this.props.theme){if(this.props.isFileFollowup)return ie.a.createElement("div",{className:se()(e,"c-message__gutter--empty")});if(this.props.isEditing||this.props.showUser)return ie.a.createElement("div",{className:e},this.renderAvatar())}return ie.a.createElement("div",{className:e},this.renderTimestamp({isHiddenFromCopy:"dense"===this.props.theme}))}},{key:"renderMessageLabel",value:function(e){var t=e.labelTypes,n=e.primaryLabelType,a=this.props,i=a.sliHighlight,o=a.isSlackbotIm,s=a.isSelfIm,l=a.channelId,c=a.ts,u=a.currentUserId,d=a.pinnedByMemberId,p=a.sourceTeamId,m=this.state.isHovered;return this.shouldShowMessageLabel({labelTypes:t})?ie.a.createElement(lt,r()({},t,{primaryType:n,channelId:l,ts:c,isHovered:m,isSlackbotIm:o,isSelfIm:s,sliHighlight:i,currentUserId:u,pinnedByMemberId:d,sourceTeamId:p})):null}},{key:"renderReactions",value:function(e){var t=this.props,n=t.ts,a=t.latestMessageTsWithReactions;if("file_comment"===this.props.subtype)return null;if(!e)return null;var r=n===a;return ie.a.createElement(Re.a,{reactionKey:e,isLatestReactionInChannel:r})}},{key:"renderReplyBar",value:function(){var e=this.props,t=e.replies,n=e.replyCount,a=e.replyUsers,r=e.replyUsersCount,i=e.latestReply,o=e.channelId,s=e.threadTs,l=e.isThreadExpanded,c=e.threadListId,u=e.showThreadIfThreadable;return o&&n?ie.a.createElement(Ke.a,{channelId:o,threadTs:s,replies:t,replyCount:n,replyUsers:a,replyUsersCount:r,latestReply:i,isThreadExpanded:l,threadListId:c,showThreadIfThreadable:u}):null}},{key:"renderResendControls",value:function(){var e=this.props,t=e.isEKMError,n=e.showResend,a=e.showCancel,r=null;n&&(r=ie.a.createElement(Ne.c,{className:"c-message__resend",onClick:this.resendMsg},ct.t("Try again")));var i=null;a&&(i=ie.a.createElement(Ne.c,{className:"c-message__cancel",onClick:this.removeMsg},t?ct.t("Clear"):ct.t("Cancel")));var o=null;return n&&a&&(o=" | "),ie.a.createElement("div",{className:"c-message__resend_controls"},ie.a.createElement("div",{className:"c-message__resend_column"}),this.getResendText(),r,o,i)}},{key:"renderRollup",value:function(){var e=this.props,t=e.rollup,n=e.channelId,a=e.userId;return t&&n?ie.a.createElement(Ye.a,{rollup:t,channelId:n,user:a}):null}},{key:"renderThreadBroadcastFooter",value:function(){var e=this.props,t=e.ts,n=e.threadTs,a=e.channelId,r=e.subtype,i=e.isStandalone;return t&&a&&n&&!i&&"thread_broadcast"===r?ie.a.createElement(Je.a,{ts:t,threadTs:n,channelId:a}):null}},{key:"renderThreadBroadcastPreamble",value:function(){var e=this.props,t=e.ts,n=e.threadTs,a=e.channelId,r=e.subtype,i=e.isStandalone;return t&&a&&!i&&"thread_broadcast"===r?ie.a.createElement(Xe.a,{ts:t,threadTs:n,channelId:a}):null}},{key:"renderTimestamp",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).isHiddenFromCopy,t=void 0!==e&&e,n=this.props,a=n.teamDomain,i=n.channelId,o=n.ts,s=n.threadTs,l=n.isStandalone,c=n.isTombstonedMessage;if(!o||!i||c)return null;var u=void 0,d=void 0;l||(u=Object(T.u)({teamDomain:a,channelId:i,ts:o,threadTs:s}),d=this.onTimestampClick);var p={};return t&&(p["data-stringify-text"]=""),ie.a.createElement(Ve.b,r()({timestamp:o,relative:!1,full:!1,link:u,onClick:d},p))}},{key:"render",value:function(){var e;if(this.state.caughtError)return this.renderError();if(this.props.messageNotFound)return null;var t=this.props,n=t.theme,a=t.isEditing,r=t.showUser,i=t.alertType,o=t.fadeAwayHighlight,s=t.isLast,l=t.isStandalone,c=t.isUnprocessed,u=t.subtype,d=t.rollup,p=t.sliHighlight,m=t.ts,h=t.isPinned,b=t.isEphemeral,f=t.isStarred,g=t.isTombstonedMessage,_=t.isEKMError,v=t.hasKeyboardFocusWithin,y=this.state,k=y.isHovered,C=y.actionsMenuOpen,E=y.height,j=Object(pe.a)({isPinned:h,isEphemeral:b,isStarred:f,subtype:u,sliHighlight:p}),S=Object(de.a)(j),I=se()("c-message",(e={},F()(e,"c-message--"+n,n),F()(e,"c-message--hover",k||C),F()(e,"c-message--focus-within",v),F()(e,"c-message--adjacent",!a&&!r&&!l),F()(e,"c-message--thread_broadcast","thread_broadcast"===u),F()(e,"c-message--highlight_yellow_bg","shared_channel_join"===i),F()(e,"c-message--highlight",!l&&a),F()(e,"c-message--fade_highlight",o&&!S),F()(e,"c-message--last",s),F()(e,"c-message--rollup",d),F()(e,"c-message--standalone",l),F()(e,"c-message--unprocessed",c),F()(e,"c-message--resend",this.shouldShowResendControls()),F()(e,"c-message--deleting",this.isDeleting()),F()(e,"c-message--editing",a),F()(e,"c-message--sli_highlight_negative",Object(O.f)(p)),F()(e,"c-message--"+S,S),e)),w={};return null!==E&&(w={height:E}),ie.a.createElement("div",{ref:this.setRef,className:I,onClick:this.onContainerClick,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onMouseOver:this.onMouseEnter,onFocus:this.props.onFocus,onBlur:this.props.onBlur,style:w,role:"document","data-qa":"message_container","data-qa-placeholder":Object(T.tb)(m)},this.renderMessageLabel({labelTypes:j,primaryLabelType:S}),this.renderGutter(),!l&&a&&this.renderEdit(),(l||!a)&&this.renderContent(),!g&&!_&&!l&&!a&&this.renderActions())}}]),t}(re.PureComponent);pt.displayName="Message",pt.defaultProps=dt;var mt=Object(be.a)("feature_ally_bugbash")(Object(we.a)(Object(Ie.a)(pt))),ht={logMessage:function(){return E.a.apply(void 0,arguments)},clogMessageClick:function(){return c.a.apply(void 0,arguments)},clogUserClick:function(){return u.a.apply(void 0,arguments)},maybeStartEditingMessage:function(){return S.f.apply(void 0,arguments)},removeMsg:function(){return m.a.apply(void 0,arguments)},resendMsg:function(){return p.a.apply(void 0,arguments)}};t.a=Object(o.b)(function(e,t){var n=t.ts,a=t.channelId,o=t.previousMessageTs,c=Object(d.a)(e,a,n),u=Object(k.a)(e),p=Object(y.j)(e,"threads_everything"),m=Object(y.j)(e,"expand_inline_imgs"),E=Object(y.j)(e,"expand_non_media_attachments"),x=Object(_.e)(e,a),F=Object(I.m)(e,"feature_hide_unfurl_urls"),L=Object(I.m)(e,"feature_attachments_v2"),D=Object(I.m)(e,"feature_sonic_inputs"),U=Object(I.m)(e,"feature_tinyspeck"),B=Object(s.a)({state:e}),q=Object(l.a)({state:e});if(!c)return{channelId:a,clogger:B,logger:q,featureTinyspeck:U,featureHideUnfurlUrls:F,messageNotFound:!0};var H=Object(f.b)(e);n&&Object(C.d)(H,a,n),o&&Object(C.d)(H,a,o);var W=c.files,G=Object(v.c)(e,Object(i.a)(W)),K=Object(T.cb)(c)?G&&G.id:void 0,V=Object(d.a)(e,a,o,!1),z=!Object(T.W)(e,c,V),Y=Object(P.a)(c,V),Q=Object(A.b)(c),X=Object(T.R)(e,c),J=X.botId&&Object(h.d)(e,c),Z=J?J.app_id:null,$=c.slackbot_feels||null,ee=c.comment&&G&&Object(v.d)(e,G.id,c.comment.id)||c.comment,te=Object(O.e)(e,{channelId:a,ts:n}),ne=te.isDeleting,ae=te.sliHighlight,re=!!Object(S.d)(e,{channelId:a,ts:n}),ie=Object(T.K)(c),oe=ie?ie.pinnedBy:null,se=void 0;if(V){var le=Object(T.K)(V),ce=le?le.pinnedBy:null;se={previousMessageIsStarred:Object(T.rb)(V),previousMessageIsPinned:Object(w.j)(e,{channelId:a,ts:o}),previousMessageIsEphemeral:Object(T.bb)(V),previousMessageSubtype:V.subtype,previousMessageSliHighlight:V.sliHighlight,previousMessagePinnedByMemberId:ce}}var ue=c.thread_ts,de=void 0;ue&&(de={replyCount:c.reply_count},Object(M.a)()?c.reply_users?(de.replyUsers=c.reply_users,de.replyUsersCount=c.reply_users_count,de.latestReply=c.latest_reply):c.replies&&(de.replies=c.replies):c.replies?de.replies=c.replies:(de.replyUsers=c.reply_users,de.replyUsersCount=c.reply_users_count,de.latestReply=c.latest_reply));var pe=Object(I.c)(e),me=Object(g.d)(e),he=me&&me.domain,be=void 0;if(J){var fe=Object(b.d)(e,c.user);be=Object(j.c)({bot:J,botProfile:c.bot_profile,member:fe,teamId:H})}return r()({message:c,channelId:a,clogger:B,logger:q,blocks:c.blocks,alertType:c.alert_type,subtype:c.subtype,text:c.text,noSpecials:!1===c.mrkdwn,theme:u},X,{appId:Z,hasAdHocSender:Object(R.a)(c)},de,{threadTs:ue,threadsEverythingPref:p,expandInlineImgsPref:m,expandNonMediaAttachmentsPref:E,attachments:c.attachments,fileId:K,fileIds:W,comment:ee,isUpload:c.upload,reactionKey:Q,showUser:z,isFileFollowup:Y,edited:c.edited,isStarred:Object(T.rb)(c,G,"file_comment"===c.subtype&&ee),isPinned:Object(w.j)(e,{channelId:a,ts:n}),currentUserId:pe,pinnedByMemberId:oe,sliHighlight:ae,botProfile:c.bot_profile,slackbotFeels:$,icons:c.icons,isEditing:re,isUnprocessed:Object(T.sb)(c)&&!Object(T.bb)(c),isEphemeral:Object(T.bb)(c),isDeleting:ne,showResend:c.showResend,showCancel:c.showCancel,isSlackbotIm:Object(N.Hb)(x),isRichTextMessage:Object(T.mb)(c),shouldRenderBlocks:Object(T.Cb)(e,c),sourceTeamId:Object(T.V)(c)||Object(f.b)(e),isSelfIm:Object(N.Tb)(pe,x),isTombstonedMessage:Object(T.ab)(c)||Object(T.Y)(c),isUnknown:Object(T.jb)(c),isEKMError:c.isEKMError,teamDomain:he},se,{featureTinyspeck:U,featureHideUnfurlUrls:F,featureAttachmentsV2:L,ariaAssertive:Object(T.Z)(c),serviceTeamId:be,featureSonicInputs:D})},ht)(mt)},"HAG/":function(e,t,n){},HOOb:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n("yZHI");function r(e){return Object(a.a)(e,function(e){return"A"===e.nodeName})}},HQme:function(e,t,n){},HfwO:function(e,t,n){"use strict";n.d(t,"a",function(){return w});var a=n("QbLZ"),r=n.n(a),i=n("TGBA"),o=n("NZ+B"),s=n("kxpR"),l=n.n(s),c=n("XHGt"),u=n("TSYQ"),d=n.n(u),p=n("aK/h"),m=n("1zbP"),h=n("4M+g"),b=n("G4ux"),f=n("6kok"),g=n("Fdc0"),_=n("3dqR"),v=n("X5Eo"),y=n("0DE1"),k=n("8Sv9"),O=n("3tRM"),C=n("6avh"),E=n("od5y"),j=n("Cudy"),S=n("ZYn4"),I=n("kd6D"),w=(n("A4tE"),{right:"right",bottom:"bottom"}),N=(p.b.string,p.b.string.isRequired,p.b.node,p.b.oneOf(Object(i.a)(w)),p.b.bool,p.b.bool,p.b.bool,p.b.bool,p.b.bool,p.b.bool,p.b.object,p.b.string,p.b.string,p.b.bool,p.b.bool,{className:void 0,member:void 0,memberPrimaryName:void 0,memberSecondaryName:void 0,secondaryContent:void 0,secondaryContentPosition:w.bottom,invert:!1,showAvatar:!0,showDraftIcon:!1,showPresence:!0,showStatus:!0,showTooltip:!0,isDeactivated:!1,useShortMode:!1});function T(e){var t=e.className,n=e.id,a=e.invert,i=e.member,o=e.memberPrimaryName,s=e.memberSecondaryName,c=e.secondaryContent,u=e.secondaryContentPosition,p=e.showAvatar,h=e.showDraftIcon,b=e.showPresence,f=e.showStatus,N=e.showTooltip,T=e.isDeactivated,A=e.useShortMode,R=Object(g.ib)(i),P=Object(g.mb)(i),M=Object(g.Hb)(i),x=Object(m.c)(n),F=Object(m.d)(n),L=l.a.createElement(j.a,{"data-qa":"member-entity__primary-name",name:o,invert:a&&!T,isAppOrBot:R,isDeleted:P,isSelf:M,isNonExistent:x,isUnknown:F}),D=l.a.createElement(O.a,{className:"c-member__secondary-name","data-qa":"member-entity__secondary-name"},s),U=i&&l.a.createElement(k.a,{className:"c-member__title","data-qa":"member-entity__title"},Object(g.S)(i)),B=l.a.createElement(E.b,{type:"pencil",size:"inherit",className:"c-member__draft_icon","aria-hidden":!0,"data-qa":"member-entity__draft-icon"}),q=!P&&l.a.createElement(S.a,{memberId:n,className:"c-member__presence",invert:a&&!T,"data-qa":"member-entity__presence"}),H=l.a.createElement(C.b,{memberId:n,tooltip:N,animated:A,className:"c-member__current-status c-member__current-status--medium","data-qa":"member-entity__status"}),W=u===w.bottom&&c?l.a.createElement(y.a,{"data-qa":"member-entity__metadata"},c):null,G=l.a.createElement("span",{className:"c-member__primary_content"},L,b&&q,!A&&D,f&&H),K=P||T?I.c.dim:null,V=d()(t,"c-member","c-member--medium",{"c-member--with-presence":b});return l.a.createElement(v.a,{avatar:function(e){return p&&(h?B:l.a.createElement(_.c,r()({},e,{size:I.a.medium,userId:n,"data-qa":"member-entity__avatar",isInteractive:!1})))},className:V,size:"medium",style:K,text:G,subtext:U,metadata:!P&&W,"data-qa":"medium_member_entity"})}T.displayName="MediumMemberEntity",T.defaultProps=N,t.b=Object(c.b)(function(e,t){var n=t.id,a=t.isDraftContext,r=t.showStatus,i=t.isUnknown,s=Object(b.d)(e,n),l=void 0;if(a){var c=Object(h.k)(e,n);l=!(!c||!Object(f.y)(e,c.id))}return{member:s,memberPrimaryName:Object(g.V)(e,s,!1,!1),memberSecondaryName:Object(g.M)(e,s),showDraftIcon:l,showStatus:r&&Object(g.ab)(s),isUnknown:Object(o.a)(i)?i:Object(m.d)(s)}})(T)},Ho8D:function(e,t,n){},HyiT:function(e,t,n){},Hza5:function(e,t,n){},IEWa:function(e,t,n){"use strict";n.d(t,"b",function(){return p}),n.d(t,"a",function(){return m});var a=n("0VPD"),r=n("7EGn"),i=n("G4ux"),o=n("1hAG"),s=n("Fdc0"),l=n("5mKg"),c=n("t85p"),u=n("h9PG"),d=n("oZ18"),p=function(e){var t=Object(i.b)(e),n=Object(s.Gb)(t),a=Object(c.m)(e,"feature_builder_can_access");return!n&&!!a},m=function(e){var t=Object(i.b)(e),n=Object(s.Gb)(t),p=Object(o.d)(e),m=Object(d.d)(e);if(!Object(c.m)(e,"feature_builder_can_access"))return!1;if(!Object(l.D)(p))return!1;if(Object(l.s)(p)&&!1===Object(u.a)(e,"workflow_builder_enabled"))return!1;var h=Object(u.a)(e,"who_can_create_workflows"),b=Object(r.a)(h,"type",[]),f=Object(r.a)(h,"subteam",[]),g=Object(r.a)(h,"user",[]);return!(!b.includes("regular")||n)||(!(!b.includes("admin")||!Object(s.eb)(t))||(!(!b.includes("owner")||!Object(s.Eb)(t))||(!!g.includes(t.id)||(Object(a.a)(f,m).length>0||0===b.length&&!n))))}},"Ik/9":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n("nNoG"),r=n("NqlN"),i=new a.b("a11y");function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,n=e.isGuest,a=e.isSelf,o=e.isAppOrBot,s=e.isDeleted,l=e.isPrescenceAway,c=e.isPrescenceDND,u=e.statusEmojiCode,d=e.statusText,p=e.isCurrent,m=e.hasNotifications,h=e.isStarred,b=e.isMuted,f=e.hasDraft,g=s?i.t("deactivated"):o?i.t("APP"):n&&!l&&c?i.t("guest, do not disturb"):n&&l&&!c?i.t("guest, away"):!n||l||c?a&&!l&&c?i.t("you, do not disturb"):!a||l||c?n||l||!c?n||!l||c?"":i.t("away"):i.t("do not disturb"):i.t("you"):i.t("guest"),_=u&&Object(r.a)(u),v=_&&!d?_:_&&d?i.t("{statusEmoji} {statusText}",{statusEmoji:_,statusText:d,fallbackHash:"ad5c47c4aa7f1e2be1e151ea075d02eff6e54376"}):!_&&d?d:"",y=p&&m&&b&&h&&f?i.t("current conversation, has notifications, muted, starred, has a draft message"):!p&&m&&b&&h&&f?i.t("has notifications, muted, starred, has a draft message"):p&&!m&&b&&h&&f?i.t("current conversation, muted, starred, has a draft message"):!p&&!m&&b&&h&&f?i.t("muted, starred, has a draft message"):p&&m&&!b&&h&&f?i.t("current conversation, has notifications, starred, has a draft message"):!p&&m&&!b&&h&&f?i.t("has notifications, starred, has a draft message"):p&&!m&&!b&&h&&f?i.t("current conversation, starred, has a draft message"):p||m||b||!h||!f?p&&m&&b&&!h&&f?i.t("current conversation, has notifications, muted, has a draft message"):!p&&m&&b&&!h&&f?i.t("has notifications, muted, has a draft message"):p&&!m&&b&&!h&&f?i.t("current conversation, muted, has a draft message"):p||m||!b||h||!f?p&&m&&!b&&!h&&f?i.t("current conversation, has notifications, has a draft message"):p||!m||b||h||!f?!p||m||b||h||!f?p||m||b||h||!f?p&&m&&b&&h&&!f?i.t("current conversation, has notifications, muted, starred"):!p&&m&&b&&h&&!f?i.t("has notifications, muted, starred"):p&&!m&&b&&h&&!f?i.t("current conversation, muted, starred"):p||m||!b||!h||f?p&&m&&!b&&h&&!f?i.t("current conversation, has notifications, starred"):p||!m||b||!h||f?!p||m||b||!h||f?p||m||b||!h||f?p&&m&&b&&!h&&!f?i.t("current conversation, has notifications, muted"):p||!m||!b||h||f?!p||m||!b||h||f?p||m||!b||h||f?!p||!m||b||h||f?p||!m||b||h||f?!p||m||b||h||f?"":i.t("current conversation"):i.t("has notifications"):i.t("current conversation, has notifications"):i.t("muted"):i.t("current conversation, muted"):i.t("has notifications, muted"):i.t("starred"):i.t("current conversation, starred"):i.t("has notifications, starred"):i.t("muted, starred"):i.t("has a draft message"):i.t("current conversation, has a draft message"):i.t("has notifications, has a draft message"):i.t("muted, has a draft message"):i.t("starred, has a draft message");return t&&g&&v&&y?i.t("{name} ({userInfo}), status: {status} ({context})",{name:t,userInfo:g,status:v,context:y}):t&&!g&&v&&y?i.t("{name}, status: {status} ({context})",{name:t,status:v,context:y}):t&&g&&!v&&y?i.t("{name} ({userInfo}) ({context})",{name:t,userInfo:g,context:y}):t&&!g&&!v&&y?i.t("{name} ({context})",{name:t,context:y}):t&&g&&v&&!y?i.t("{name} ({userInfo}), status: {status}",{name:t,userInfo:g,status:v}):t&&!g&&v&&!y?i.t("{name}, status: {status}",{name:t,status:v}):t&&g&&!v&&!y?i.t("{name} ({userInfo})",{name:t,userInfo:g}):t||""}},IpQt:function(e,t,n){},IqgZ:function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("kxpR"),p=n.n(d),m=n("XHGt"),h=n("t85p"),b=n("aK/h"),f=n("yHhI"),g=(b.b.object.isRequired,b.b.node,b.b.bool,b.b.object.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={error:!1},n}return u()(t,e),o()(t,[{key:"componentDidCatch",value:function(e,t){this.setState(function(){return{error:!0}});var n=e?e.message:"",a=e?e.stack:"",r=this.props.msg,i=r.ts,o=r.channel,s=r.subtype;this.props.logger.error("Message Kit componentDidCatch: "+s+" "+i+" in "+o+", "+n),a&&this.props.logger.error(a),t&&t.componentStack&&this.props.logger.error(t.componentStack)}},{key:"render",value:function(){if(!this.state.error)return this.props.children;if(!this.props.featureTinyspeck)return null;var e=this.props.msg,t=e.ts,n=e.channel;return p.a.createElement("div",{className:"sk_raspberry_red_bg sk_inverted_foreground padding_100 padding_bottom_25"},p.a.createElement("p",null,p.a.createElement("strong",null,"Message ",t," in ",n," failed to render."," ")),p.a.createElement("p",null,"Please go to #escal-messages and,"," ",p.a.createElement("strong",null,"if it has not been reported yet"),", post a report including a screenshot and a link to the previous message if this is a public channel."),p.a.createElement("p",null,"This message is only displayed to workspaces in the Slack org."))}}]),t}(d.Component));g.displayName="MessageErrorBoundary",g.defaultProps={children:null,featureTinyspeck:!1};t.a=Object(m.b)(function(e){return{featureTinyspeck:Object(h.m)(e,"feature_tinyspeck"),logger:Object(f.a)({state:e})}})(g)},"J0/G":function(e,t,n){},J19L:function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("ifKl"),p=n("kxpR"),m=n.n(p),h=n("aK/h"),b=n("XHGt"),f=n("6kok"),g=n("nNoG"),_=n("4M+g"),v=n("/9ln"),y=n("U3Q0"),k=n("H3xq"),O=new g.b("msg_edit"),C=(h.b.string.isRequired,h.b.string.isRequired,h.b.string,h.b.func,{channelType:void 0,removeMessage:d.a}),E=function(e){function t(){r()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onGo=e.onGo.bind(e),e}return u()(t,e),o()(t,[{key:"onGo",value:function(){var e=this.props,t=e.ts,n=e.channelId;(0,e.removeMessage)({channelId:n,ts:t,broadcastDelete:!0}).catch(d.a)}},{key:"render",value:function(){var e=this.props,t=e.ts,n=e.channelId,a=void 0,r=void 0;return"channel"===e.channelType?(a=O.t("Remove from channel"),r=O.t("Are you sure you want to remove this message from the channel?")):(a=O.t("Remove from conversation"),r=O.t("Are you sure you want to remove this message from the conversation?")),m.a.createElement(y.b,{title:a,goButtonText:O.t("Remove message"),onGo:this.onGo},m.a.createElement("div",{className:"margin_bottom_100"},r,O.t("The original reply will still be visible in its thread.")),m.a.createElement(k.a,{ts:t,channelId:n,isStandalone:!0}))}}]),t}(p.PureComponent);E.displayName="BaseRemoveBroadcastDialog",E.defaultProps=C;var j={removeMessage:v.a},S=Object(b.b)(function(e,t){var n=t.channelId,a=Object(_.e)(e,n);return{channelType:Object(f.v)(a)}},j)(E);S.propTypes={channelId:h.b.string.isRequired},t.a=S},JHKc:function(e,t,n){},JlHJ:function(e,t,n){},Jm6a:function(e,t,n){},JvzI:function(e,t,n){"use strict";n.d(t,"a",function(){return f}),n.d(t,"b",function(){return _}),n.d(t,"d",function(){return v}),n.d(t,"c",function(){return k});n("YEIV"),n("QbLZ");var a=n("9oTK"),r=(n("xnu4"),n("nNoG")),i=n("QLyv"),o=n("4qCO"),s=n("TVjB"),l=(n("lhZz"),n("t85p"),n("XKj7")),c=n("x4bP"),u=n("XoJV"),d=n("GNdI"),p=n("yHhI"),m=n("DlLn"),h=n("IbTH"),b=n("Gogr");function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.recalc,n=void 0!==t&&t,a=e.teamId,i=void 0===a?Object(d.a)():a;return Object(r.r)({recalc:n,teamId:i})}var g={};function _(e){var t=e.teamId,n=e.fn;g[t]?Object(p.a)({teamId:t,label:"INFRA-I18N"}).error("Attempted to registerLocaleCallback for a registered team",t):g[t]=n}function v(e){var t=e.teamId;g[t]?delete g[t]:Object(p.a)({teamId:t,label:"INFRA-I18N"}).error("Attempted to unregisterLocaleCallback for an unregistered team",t)}var y,k=(y=Object(a.coroutine)(regeneratorRuntime.mark(function e(t,n){var p,f,_=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).shouldEnsureTranslationBundle,v=void 0===_||_;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(c.a)()){e.next=2;break}return e.abrupt("return",Object(l.e)({name:"locale",value:t}));case 2:if(Object(b.d)(n,"user_locale")!==t&&Object(b.i)(n,"user_locale",t),Object(d.a)()===n){e.next=5;break}return e.abrupt("return",t);case 5:if(p=Object(r.k)(),Object.keys(p).includes(t)){e.next=8;break}return e.abrupt("return",Object(m.e)());case 8:if(!0!==v){e.next=11;break}return e.next=11,Object(a.resolve)(Object(h.a)(t));case 11:return f="es-LA"===t?"es-419":t,document.documentElement.lang=f,Object(i.b)(t),Object(o.c)(t),Object(r.r)({recalc:!0,teamId:n}),Object(u.i)(t)||Object(s.a)(),g[n]&&g[n]({locale:t}),e.abrupt("return",t);case 19:case"end":return e.stop()}},e,this)})),function(e,t,n){return y.apply(this,arguments)})},K1NN:function(e,t,n){},KGMq:function(e,t,n){"use strict";var a=n("kxpR"),r=n.n(a),i=n("aK/h"),o=n("XfeM"),s=n("t85p"),l=n("dhvi"),c=n("jo6Y"),u=n.n(c),d=n("YEIV"),p=n.n(d),m=n("m1cH"),h=n.n(m),b=n("QbLZ"),f=n.n(b),g=n("iCc5"),_=n.n(g),v=n("FYw3"),y=n.n(v),k=n("V7oC"),O=n.n(k),C=n("mRg0"),E=n.n(C),j=n("HI9p"),S=n("CpTu"),I=n("7EGn"),w=n("NOj5"),N=n("1myf"),T=n("F3Uw"),A=n("Z0Cl"),R=n("fujP"),P=n("ifKl"),M=n("rEtx"),x=n("TSYQ"),F=n.n(x),L=n("XHGt"),D=n("tn36"),U=n("uQWY"),B=n("vRZS"),q=n("1hAG"),H=n("G4ux"),W=n("Fdc0"),G=n("ns4K"),K=n("yHhI"),V=n("XL7r"),z=n("y+1o"),Y=n("7dYf"),Q=n("nNoG"),X=n("kOzZ"),J=n("0nhw"),Z=n("CPJ1"),$=n("Smdl"),ee=n("KXvl"),te=n("UF3u"),ne=n("od5y"),ae=n("qafc"),re=n("c4EP"),ie=n("0f2Y"),oe=n("cD5Y"),se=n("vSXf"),le=n("3dqR"),ce=n("derf"),ue=n("6GV3"),de=n("xoiQ"),pe=(n("y5qN"),i.b.oneOf(["member","org","workspace","app"]),i.b.number.isRequired,i.b.object.isRequired,i.b.func,i.b.string,i.b.bool.isRequired,i.b.bool.isRequired,{entityType:"member",onClick:P.a,customClasses:null}),me=function(e){function t(){return _()(this,t),y()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E()(t,e),O()(t,[{key:"getImageKeyFromDimension",value:function(e,t){return"image_"+Object(ue.a)(e,{member:[512,192,72,48,32,24],app:[1024,512,192,128,96,72,64,48,36,32],workspace:[230,132,102,88,68,44,34],org:[230,132,102,88,68,44,34]}[t])}},{key:"mapRawMemberDataToProps",value:function(e){var t=e.rawMemberData,n=e.iconDimension,a=e.customClasses,r=e.clickHandler,i=Object(de.a)({size:n,teamId:Object(I.a)(t,"enterprise_id"),memberId:Object(I.a)(t,"id"),avatarHash:Object(I.a)(t,"profile.avatar_hash")});return{imageUrl:i.imageUrl,imageUrl2x:i.imageUrl2x,isExternal:t.is_external,isRestricted:t.is_restricted,isUltraRestricted:t.is_ultra_restricted,size:n,className:a,onClick:r}}},{key:"mapRawWorkspaceOrOrgDataToProps",value:function(e){var t=e.rawWorkspaceOrOrgData,n=e.iconDimension,a=e.customClasses;return{size:n,icon:t.icon,showToolTip:!1,teamName:t.name,className:a}}},{key:"render",value:function(){var e=this.props,t=e.entityType,n=e.entityData,a=e.customClasses,i=e.dimension,o=e.onClick,s=e.featureReactMessages,l=e.featureReactMemberProfileCard,c=F()(a,"p-ent_entity_icon");switch(t){case"member":var u={rawMemberData:n,iconDimension:i,customClasses:c,clickHandler:o},d=this.mapRawMemberDataToProps(u);return r.a.createElement(le.b,f()({},d,{featureReactMessages:s,featureReactMemberProfileCard:l}));case"org":case"workspace":var p={rawWorkspaceOrOrgData:n,iconDimension:i,customClasses:c},m=this.mapRawWorkspaceOrOrgDataToProps(p);return r.a.createElement(ce.a,m);default:return r.a.createElement(ce.a,{teamName:"?",size:i})}}}]),t}(a.PureComponent);me.displayName="EntityIcon",me.defaultProps=pe;var he=Object(se.a)("feature_react_messages","feature_react_member_profile_card")(me),be=n("aolG"),fe=n("sk9p"),ge=n.n(fe),_e=n("Vfgr"),ve=n("bo4X"),ye=n("NB3s"),ke=n("WD4z"),Oe=n("O0RF"),Ce=n("plEq"),Ee=n("P3Po"),je=new Q.b("enterprise_workspaces"),Se=(i.b.func,i.b.func,{closeModal:P.a,requestCreateWorkspaceApi:P.a}),Ie=255,we=512,Ne={required:"required",nameTaken:"nameTaken",maxLength:"maxLength"};function Te(e){var t=e.closeModal,n=e.requestCreateWorkspaceApi,i=Object(a.useState)(),o=ge()(i,2),s=o[0],l=o[1],c=Object(a.useState)(),u=ge()(c,2),d=u[0],p=u[1],m=Object(a.useState)(!1),h=ge()(m,2),b=h[0],f=h[1],g=Object(a.useState)(!1),_=ge()(g,2),v=_[0],y=_[1],k=Object(a.useState)(Ne.required),O=ge()(k,2),C=O[0],E=O[1],j=Object(a.useState)(Ne.required),S=ge()(j,2),I=S[0],w=S[1];function N(e,t){var n=t.maxLength,a=Object(_e.a)(e);return a?n&&a.length>n?Ne.maxLength:void 0:Ne.required}return r.a.createElement(ve.a,{labelledby:"request_workspace__title-bar",centered:!0,closeModal:t},r.a.createElement(ye.h,null,r.a.createElement(ye.j,{id:"request_workspace__title-bar",title:je.t("Request creation of a new workspace")})),r.a.createElement(ye.d,null,r.a.createElement(ye.e,null,v&&r.a.createElement(ke.a,{level:"error",className:"margin_bottom_100"},je.t("Sorry! Something went wrong. Please try again.",{fallbackHash:"48faa2ac6ac6d273cd7dacbe15a5b6f7e1822087",fallbackHashNs:"edit_profile"})),r.a.createElement("p",null,je.t("To create a new workspace, you\u2019ll need to send a request to an organization administrator. Before sending this request, be sure to check the Find Workspaces list to see whether a similar workspace already exists.")),r.a.createElement(Oe.a,{htmlFor:"p-request-workspace__name_input",id:"p-request-workspace__name_label",text:je.t("Workspace Name")},r.a.createElement(Ce.a,{ariaDescribedby:"p-request-workspace__name_label",id:"p-request-workspace__name_input",name:"workspace_name",size:"large",useInlineAlert:!0,onChange:function(e){y(!1),l(e);var t=N(e,{maxLength:Ie});E(t)},errorText:C===Ne.nameTaken?je.t("That workspace name is already taken.",{fallbackHash:"26cf402314e8bf926ba97077c467adcadb1c715e",fallbackHashNs:"enterprise_dashboard"}):void 0,value:s,isRequired:!0,minCharacterLimit:1,maxCharacterLimit:Ie})),r.a.createElement(Oe.a,{htmlFor:"p-request-workspace__message_input",id:"p-request-workspace__message_label",text:je.t("Message to administrators")},r.a.createElement(Ee.a,{ariaDescribedby:"p-request-workspace__message_label",id:"p-request-workspace__message_input",name:"workspace_message",size:"large",useInlineAlert:!0,onChange:function(e){y(!1),p(e);var t=N(e,{maxLength:we});w(t)},value:d,isRequired:!0,minCharacterLimit:1,maxCharacterLimit:we})))),r.a.createElement(ye.f,null,r.a.createElement(ye.g,null,r.a.createElement(ye.c,{"data-qa":"request_workspace_dialog_cancel_button",type:"outline"},je.t("Cancel")),r.a.createElement(ye.c,{"data-qa":"request_workspace_dialog_go_button",onClick:function(){y(!1),f(!0),n({workspaceName:s,workspaceMessage:d,reason:"workspace_directory_request_new_workspace"}).then(function(){return t()}).catch(function(e){var t=e.data;f(!1),"name_taken"===t.error?E(Ne.nameTaken):y(!0)})},loading:b,disabled:!!(I||C||v)},je.t("Send Request")))))}Te.displayName="RequestWorkspaceDialog",Te.defaultProps=Se;var Ae={closeModal:function(){return l.a.apply(void 0,arguments)},requestCreateWorkspaceApi:function(){return J.i.apply(void 0,arguments)}},Re=Object(L.b)(null,Ae)(Te),Pe=n("yIs4"),Me=n("9/ob"),xe=n("YB7p"),Fe=n("XLFM"),Le=n("hbEN"),De=n("mX9+"),Ue=n("TGBA"),Be=n("xWuZ"),qe=n("zmn3"),He=n("RMmo"),We=n("MjS2"),Ge=n("3Hq1"),Ke=n("HiDb"),Ve=n("YH8F"),ze=n("RbWr"),Ye=n("e4Fz"),Qe=n("sKU9"),Xe=(n("MbVY"),{default:"default",short:"short"}),Je=new Q.b("form"),Ze={autoSelectFirstOption:i.b.bool,className:i.b.string,displayValue:i.b.string,id:i.b.string,isLoading:i.b.bool,labelId:i.b.string,membersOnly:i.b.bool,name:i.b.string,onChange:i.b.func,onClearButtonClick:i.b.func.isRequired,onClose:i.b.func,onFilterInputChange:i.b.func,onOptionHighlighted:i.b.func,onOutsideClick:i.b.func,onOpen:i.b.func,onScroll:i.b.func,optionClassName:i.b.string,optionGroups:i.b.array,options:i.b.array,optionsListOffsetBottom:i.b.number,optionsListOffsetTop:i.b.number,optionsListWidth:i.b.number,optionsRowHeight:i.b.number,pillarClassName:i.b.string,placeholder:i.b.string,selectedOption:i.b.object,selectedValueClassName:i.b.string,type:i.b.oneOf(Object(Ue.a)(Xe)),useFullWidthOptions:i.b.bool,usePlaceholderOption:i.b.bool,wrapperClassName:i.b.string,value:i.b.string},$e={className:null,displayValue:void 0,id:"select-"+Object(Ye.d)(),isLoading:!1,labelId:null,membersOnly:!0,name:null,onChange:P.a,onClose:P.a,onFilterInputChange:P.a,onOptionHighlighted:P.a,onOutsideClick:P.a,onOpen:P.a,optionClassName:void 0,optionGroups:void 0,options:void 0,optionsListOffsetBottom:0,optionsListOffsetTop:0,optionsListWidth:void 0,pillarClassName:void 0,placeholder:void 0,selectedOption:void 0,selectedValueClassName:void 0,type:Xe.default,usePlaceholderOption:!0,wrapperClassName:null,value:""},et=function(e){function t(e){if(_()(this,t),!e.optionGroups&&!e.options)throw new Error('WorkspaceSearchSelect requires an "optionGroups" or "options" prop.');var n=y()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.preventFocusAndBlur=!1,n.state={filterQuery:"",isOpen:!1,selectedOptionValue:""},Object(D.a)(n,["getFilteredOptions","getFilteredOptionGroups","onBlurred","onClearInput","onClicked","onFilterInputChanged","onFocused","onKeyPressedEsc","onKeyPressedUpOrDown","onOptionSelected","onOutsideClicked","onWrapperMouseDownOrTouchStart","onWrapperMouseUpOrTouchEnd","setRef"]),n}return E()(t,e),O()(t,[{key:"componentDidMount",value:function(){this.initKeyCommands()}},{key:"UNSAFE_componentWillReceiveProps",value:function(){this.setState(function(e){return{isOpen:e.isOpen}})}},{key:"componentDidUpdate",value:function(e,t){var n=this.props,a=n.onClose,r=n.onOpen,i=n.selectedOption,o=this.state,s=o.isOpen,l=o.selectedOptionValue;if(i){var c=Object(We.h)(i)?Object(W.K)(i):Object(I.a)(i,"name");c!==l&&this.setSelectedOptionValue(c)}else l&&this.setSelectedOptionValue("");this.state.isOpen?(document.addEventListener("click",this.onOutsideClicked),t.isOpen||(this.filterInput&&this.filterInput.focus(),r(this.filterInput))):(document.removeEventListener("click",this.onOutsideClicked),t.isOpen&&a()),this.filterInput&&s&&this.filterInput.focus()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.onOutsideClicked),this.resetKeyCommads()}},{key:"onBlurred",value:function(){this.preventFocusAndBlur||this.toggleOpenState(!1)}},{key:"onClicked",value:function(e){e.target===this.filterInput?this.toggleOpenState(!0):this.toggleOpenState()}},{key:"onClearInput",value:function(){var e=this.props.onClearButtonClick;this.filterInput&&(this.filterInput.value=""),this.setFilterQuery(""),this.setSelectedOptionValue(""),this.toggleOpenState(!1),e()}},{key:"onFilterInputChanged",value:function(){if(this.filterInput){var e=this.filterInput.value;this.props.onFilterInputChange(e),this.setFilterQuery(e)}}},{key:"onFocused",value:function(){this.preventFocusAndBlur||this.toggleOpenState(!0);var e=this.props.displayValue;e&&this.filterInput&&(this.filterInput.value=e)}},{key:"onKeyPressedEsc",value:function(){this.state.isOpen&&(this.toggleOpenState(!1),this.focus())}},{key:"onKeyPressedUpOrDown",value:function(e){this.state.isOpen||(this.toggleOpenState(!0),e.stopPropagation())}},{key:"onOptionSelected",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).value;if(e){var t=this.getSelectedOptionDisplayValue({value:e});this.setSelectedOptionValue(t),this.props.onChange(e),this.toggleOpenState(!1),this.filterInput&&this.filterInput.blur()}}},{key:"onOutsideClicked",value:function(e){this.wrapper&&!this.wrapper.contains(e.target)&&(this.toggleOpenState(!1),this.props.onOutsideClick())}},{key:"onWrapperMouseDownOrTouchStart",value:function(){this.preventFocusAndBlur=!0}},{key:"onWrapperMouseUpOrTouchEnd",value:function(){this.preventFocusAndBlur=!1}},{key:"onSearchAgainTriggered",value:function(){var e=this.props.onClearButtonClick;this.preventFocusAndBlur=!0,this.filterInput&&(this.filterInput.value=""),this.setFilterQuery(""),this.setSelectedOptionValue(""),e(),this.filterInput.focus(),this.toggleOpenState(),this.preventFocusAndBlur=!1}},{key:"maybeShowOptions",value:function(){var e=this.props,t=e.selectedOption,n=e.membersOnly,a=this.getFilterQuery(),r=n?this.getFilteredOptions:this.getFilteredOptionGroups;return a.length>0||t?r():[]}},{key:"getPlaceholder",value:function(){return this.props.placeholder||Je.t("Choose an option\u2026")}},{key:"getFilteredOptionGroups",value:function(){var e=this.props,t=e.optionGroups,n=e.usePlaceholderOption,a=this.getFilterQuery();return t?!a&&n?[this.getPlaceholderOptionGroup()].concat(h()(t)):t:null}},{key:"getFilteredOptions",value:function(){var e=this.props,t=e.options,n=e.usePlaceholderOption,a=this.getFilterQuery();return t?!a&&n?[this.getPlaceholderOption()].concat(h()(t)):t:null}},{key:"getFilterQuery",value:function(){return Object(I.a)(this,"filterInput.value","")}},{key:"getOptionsListEmptyMessage",value:function(){return this.getFilterQuery().length>0?this.renderOptionsListEmptyMessage():this.renderOptionsListHintText()}},{key:"getOptionsListTargetMeasurements",value:function(){var e=this.props,t=e.optionsListOffsetBottom,n=e.optionsListOffsetTop,a=e.optionsListWidth,r=this.select.getBoundingClientRect(),i=this.select.offsetTop-Object(Ve.a)(this.select,this.select.offsetParent),o=this.select.offsetLeft,s=this.select.offsetParent.clientHeight-i,l=i+r.height;return{bottom:r.bottom,offsetBottom:t,offsetTop:n,relativeBottom:l,relativeLeft:o,relativeTop:s,top:r.top,width:a||r.width}}},{key:"getPlaceholderOption",value:function(){return{isPlaceholder:!0,label:this.getPlaceholder(),value:""}}},{key:"getPlaceholderOptionGroup",value:function(){return{isPlaceholder:!0,options:[this.getPlaceholderOption()]}}},{key:"getSelectedOptionDisplayValue",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).value,t=this.props,n=t.optionGroups,a=t.options,r=n?Object(Ke.a)(n,"options"):a,i=Object(S.a)(r,{value:e});return Object(I.a)(i,"displayValue")}},{key:"setFilterQuery",value:function(e){this.setState(function(){return{filterQuery:e}})}},{key:"setSelectedOptionValue",value:function(e){this.setState(function(){return{selectedOptionValue:e}})}},{key:"setRef",value:function(e){var t=this;return function(n){t[e]=n}}},{key:"focus",value:function(){this.preventFocusAndBlur=!0,this.select.focus(),this.preventFocusAndBlur=!1}},{key:"blur",value:function(){this.select.blur(),this.filterInput&&this.filterInput.blur()}},{key:"filterOption",value:function(e){var t=e.label.toLowerCase(),n=this.getFilterQuery().toLowerCase();return-1!==t.indexOf(n)}},{key:"initKeyCommands",value:function(){this.keyCommands=new He.a(this.select),this.keyCommands.bindAll([{keys:["esc"],handler:this.onKeyPressedEsc},{keys:["up","down"],handler:this.onKeyPressedUpOrDown}])}},{key:"resetKeyCommads",value:function(){this.keyCommands&&this.keyCommands.reset()}},{key:"toggleOpenState",value:function(e){this.setState(function(t){var n={isOpen:Object(Ge.a)(e)?!t.isOpen:e};return n.isOpen||(n.filterQuery=""),n})}},{key:"renderFilterInput",value:function(){var e=this.state,t=e.filterQuery,n=e.selectedOptionValue,a=this.props.displayValue,i={"aria-label":"Filter for option list",className:"c-input_select__filter_input p-workspace-search__select",onChange:this.onFilterInputChanged,placeholder:this.getPlaceholder(),ref:this.setRef("filterInput"),type:"text"};return i.value=n&&!t?n:n||!a||t?t:a,r.a.createElement("input",i)}},{key:"renderOptionsListMaybe",value:function(){if(!this.state.isOpen)return null;var e=this.props,t=e.autoSelectFirstOption,n=e.id,a=e.isLoading,i=e.membersOnly,o=e.optionClassName,s=e.optionsRowHeight,l=e.pillarClassName,c=e.useFullWidthOptions,u=e.value,d=e.onScroll,p=e.onOptionHighlighted,m=i?240:400,h=Object(Ye.a)(n,this.state.selectedOptionValue);return r.a.createElement(Qe.a,{"aria-activedescendant":h,autoSelectFirstOption:t,emptyStateMessage:this.getOptionsListEmptyMessage(),isLoading:a,maxListHeight:m,onOptionSelected:this.onOptionSelected,optionClassName:o,onScroll:d,optionGroups:i?null:this.maybeShowOptions(),options:i?this.maybeShowOptions():null,optionsRowHeight:s,pillarClassName:l,targetMeasurements:this.getOptionsListTargetMeasurements(),useFullWidthOptions:c,value:u,onActiveOptionUpdated:p})}},{key:"renderOptionsListEmptyMessage",value:function(){var e=this.getFilterQuery(),t=Je.rt('No workspaces found matching <span class="sk_primary_foreground bold">{query}</span>.',{query:e}),n=Je.t("Try searching for another workspace or searching for a teammate\u2019s workspaces.");return r.a.createElement("div",{className:"p-workspace_search__no-results-message"},r.a.createElement("p",{className:"margin_0"},t),r.a.createElement("p",{className:"margin_0"},n))}},{key:"renderOptionsListHintText",value:function(){var e=this.props.membersOnly?Je.rt('Enter a teammate\u2019s <span class="sk_primary_foreground bold">name</span> or <span class="sk_primary_foreground bold">email address</span>.'):Je.rt('Enter a teammate\u2019s <span class="sk_primary_foreground bold">name</span> or <span class="sk_primary_foreground bold">email address</span>, or search for a <span class="sk_primary_foreground bold">specific workspace</span>.');return r.a.createElement("div",{className:"p-workspace_search__no-results-message"},r.a.createElement("p",{className:"margin_0"},e))}},{key:"render",value:function(){var e=this.props,t=(e.autoSelectFirstOption,e.className),n=e.displayValue,a=(e.isLoading,e.labelId),i=(e.membersOnly,e.name),o=(e.onChange,e.onClearButtonClick,e.onClose,e.onFilterInputChange,e.onOutsideClick,e.onOpen,e.onOptionHighlighted,e.onScroll,e.optionClassName,e.options,e.optionsListOffsetBottom,e.optionsListOffsetTop,e.optionsListWidth,e.optionsRowHeight,e.optionGroups,e.pillarClassName,e.placeholder,e.selectedOption,e.selectedValueClassName,e.type),s=(e.useFullWidthOptions,e.usePlaceholderOption,e.wrapperClassName),l=u()(e,["autoSelectFirstOption","className","displayValue","isLoading","labelId","membersOnly","name","onChange","onClearButtonClick","onClose","onFilterInputChange","onOutsideClick","onOpen","onOptionHighlighted","onScroll","optionClassName","options","optionsListOffsetBottom","optionsListOffsetTop","optionsListWidth","optionsRowHeight","optionGroups","pillarClassName","placeholder","selectedOption","selectedValueClassName","type","useFullWidthOptions","usePlaceholderOption","wrapperClassName"]),c=this.state.filterQuery,d=F()("c-input_select__wrapper",s),p=F()("c-input_select",{"c-input_select--active":this.state.isOpen,"c-input_select--short":"short"===o},t),m=F()("p-workspace_search__clear-button",{hidden:!c&&!n});return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:d,onMouseDown:this.onWrapperMouseDownOrTouchStart,onMouseUp:this.onWrapperMouseUpOrTouchEnd,onTouchStart:this.onWrapperMouseDownOrTouchStart,onTouchEnd:this.onWrapperMouseUpOrTouchEnd,ref:this.setRef("wrapper"),role:"group"},r.a.createElement("div",f()({},l,{"aria-labelledby":a,className:p,"data-name":i,onBlur:this.onBlurred,onMouseDown:this.onClicked,onFocus:this.onFocused,ref:this.setRef("select")}),this.renderFilterInput()),this.renderOptionsListMaybe()),r.a.createElement(Fe.c,{className:m,onClick:this.onClearInput,ref:this.setRef("closeButton")}))}}]),t}(ze.a);et.displayName="WorkspaceSearchSelect",et.propTypes=Ze,et.defaultProps=$e;var tt=et,nt=(n("RQ+B"),i.b.object,i.b.oneOf(["member","workspace"]),i.b.bool.isRequired,i.b.bool.isRequired,function(e){function t(e){_()(this,t);var n=y()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(D.a)(n,["maybeRenderTitle","maybeRenderEmail"]),n}return E()(t,e),O()(t,[{key:"maybeRenderEmail",value:function(e){return e?r.a.createElement("div",{className:"p-workspace_search_options_list_item__secondary_content_item"},e):null}},{key:"maybeRenderTitle",value:function(e){return e?r.a.createElement("div",{className:"p-workspace_search_options_list_item__secondary_content_item"},e):null}},{key:"renderEntityIcon",value:function(e){var t=e.item,n=e.type,a=this.props,i=a.featureReactMemberProfileCard,o=a.featureReactMessages;return r.a.createElement(he,{entityType:n,dimension:36,entityData:t,customClasses:"p-workspace_search_options_list_item__avatar",featureReactMessages:o,featureReactMemberProfileCard:i})}},{key:"renderItemAsMember",value:function(e){var t=e.item,n=e.type,a=Object(I.a)(t,"profile"),i=a.real_name,o=a.email,s=a.title;return r.a.createElement("div",{className:"p-workspace_search_options_list_item"},this.renderEntityIcon({item:t,type:n}),r.a.createElement("div",{className:"p-workspace_search_options_list_item__content nudge_bottom_3"},r.a.createElement("div",{className:"p-workspace_search_options_list_item__primary_content"},i),r.a.createElement("div",{className:"p-workspace_search_options_list_item__secondary_content"},this.maybeRenderTitle(s),this.maybeRenderEmail(o))))}},{key:"renderItemAsWorkspace",value:function(e){var t=e.item,n=e.type,a=t.name,i=t.description;return r.a.createElement("div",{className:"p-workspace_search_options_list_item"},this.renderEntityIcon({item:t,type:n}),r.a.createElement("div",{className:"p-workspace_search_options_list_item__content nudge_bottom_3"},r.a.createElement("div",{className:"p-workspace_search_options_list_item__primary_content"},a),r.a.createElement("div",{className:"p-workspace_search_options_list_item__secondary_content"},i)))}},{key:"render",value:function(){var e=this.props,t=e.item,n=e.type;return"member"===n?this.renderItemAsMember({item:t,type:n}):this.renderItemAsWorkspace({item:t,type:n})}}]),t}(a.PureComponent));nt.displayName="WorkspaceSearchOptionsListItem";var at=nt;nt.defaultProps={item:{},type:"member"};n("pVvT");var rt=new Q.b("workspace_directory"),it=(i.b.string,i.b.string,i.b.func.isRequired,i.b.func.isRequired,i.b.bool,i.b.func,i.b.func,i.b.func,i.b.object,i.b.func,{className:"",containerIdSelector:"",membersOnly:!0,onClearInput:P.a,onOptionsListClosed:P.a,onOptionsListOpened:P.a,prepopulatedOption:void 0,triggerAction:P.a}),ot=function(e){function t(e){_()(this,t);var n=y()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={nextCursorMark:"*",totalResultsCount:null,memberResultsCount:null,workspaceResultsCount:null,currentOptionsData:[],currentSearchQuery:"",prepopulatedOptionData:void 0,selectedOptionData:void 0,value:void 0,loadingResults:!0,isAnOptionHighlighted:!1},Object(D.a)(n,["clearInput","formatMemberOptionData","formatOptionsDataArrayOrObject","getOptionsFetcher","fetchMemberData","fetchMemberAndWorkspaceData","onChange","onClearButtonClicked","onFilterInputChange","onOptionHighlighted","onScroll","renderMemberItemTemplate","setIsAnOptionHighlighted","setCurrentSearchQuery","setIsLoading","setValue","triggerActionWithValue","onClose","onKeyPressedEnter","onOpen","setSelectRef"]),n.select=null,n.debouncedOnFilterInputChange=Object(Le.a)(n.onFilterInputChange,100),n}return E()(t,e),O()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.prepopulatedOption,n=e.membersOnly;Object(R.a)(t)||this.setPrepopulatedOptionData(t),this.getOptionsFetcher(),n||(this.keyCommands=this.initKeyCommands())}},{key:"componentDidUpdate",value:function(e){var t=this.props.prepopulatedOption,n=e.prepopulatedOption;Object(R.a)(t)||t===n||this.setPrepopulatedOptionData(t)}},{key:"componentWillUnmount",value:function(){this.keyCommands&&this.keyCommands.reset()}},{key:"onChange",value:function(e){var t=this.props.membersOnly,n=this.state,a=n.currentOptionsData,r=n.currentSearchQuery,i=void 0,o=void 0,s=void 0;if(e===We.b)i={id:We.b,displayValue:r},s=a;else if(t)i=Object(S.a)(a,{id:e}),o=Object(W.K)(i),s=[i];else{i=Object(S.a)(Object(Be.a)(Object(Ue.a)(a)),{id:e});var l=Object(We.h)(i);o=l?Object(W.K)(i):Object(I.a)(i,"name"),s=l?{members:[i],workspaces:[]}:{members:[],workspaces:[i]}}this.setState(function(){return{value:e,selectedOptionData:i,currentSearchQuery:e===We.b?r:o,nextCursorMark:"*",currentOptionsData:s}},this.triggerActionWithValue)}},{key:"onClearButtonClicked",value:function(){var e=this.props.onClearInput;this.clearInput(),e()}},{key:"onClose",value:function(){var e=this.props.onOptionsListClosed;this.setIsAnOptionHighlighted(!1),e()}},{key:"onFilterInputChange",value:function(e){var t=this.props,n=t.triggerAction,a=t.membersOnly;this.setIsLoading(!0),this.setSelectedOptionData(null),this.setPrepopulatedOptionData(null),this.setValue(null),a&&n({selectedOptionData:null}),this.getOptionsFetcher(e)}},{key:"onKeyPressedEnter",value:function(){if(!this.props.membersOnly){var e=this.state,t=e.selectedOptionData,n=e.currentSearchQuery,a=e.isAnOptionHighlighted;if(n&&!a){var r=Object(I.a)(this.select,"filterInput.value",n);t||(this.select.blur(),this.setState(function(){return{selectedOptionData:{id:We.b,displayValue:r},currentSearchQuery:r,nextCursorMark:"*"}},this.triggerActionWithValue))}}}},{key:"onOpen",value:function(){(0,this.props.onOptionsListOpened)()}},{key:"onOptionHighlighted",value:function(e){var t=!Object(R.a)(e);this.setIsAnOptionHighlighted(t)}},{key:"onScroll",value:function(e){var t=this.state,n=t.currentSearchQuery,a=t.currentOptionsData,r=void 0===a?[]:a,i=t.totalResultsCount,o=e.clientHeight;e.scrollHeight-(e.scrollTop+o)<200&&r.length<i&&this.getOptionsFetcher(n,{doFetchNextPage:!0})}},{key:"onSearchAgainTriggered",value:function(){this.select.onSearchAgainTriggered()}},{key:"getBoundingRect",value:function(e){return this._workspaceSearchBoundingContainer||(this._workspaceSearchBoundingContainer=document.getElementById(e)),this._workspaceSearchBoundingContainer?this._workspaceSearchBoundingContainer.getBoundingClientRect():{}}},{key:"getOptionsFetcher",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.forceNewSearch,a=void 0!==n&&n,r=t.doFetchNextPage,i=void 0!==r&&r,o=this.state.currentSearchQuery,s=this.props.membersOnly?this.fetchMemberData:this.fetchMemberAndWorkspaceData,l={searchTerm:e};return i||e!==o||a?(l.nextCursorMark=o===e?this.state.nextCursorMark:"",this.setCurrentSearchQuery(e),s({args:l,forceNewSearch:a,newSearchQuery:e,stashedSearchQuery:o})):null}},{key:"getPlaceHolderText",value:function(e){var t=rt.t("Search for a teammate"),n=rt.t("Search");return e?t:n}},{key:"setCurrentOptionGroupsData",value:function(e){var t=e.memberOptionData,n=e.workspaceOptionData,a=e.isNewSearch,r=e.totalResultsCount,i=e.memberResultsCount,o=void 0===i?0:i,s=e.workspaceResultsCount,l=void 0===s?0:s,c=this.state.currentOptionsData,u=void 0,d=!o&&!l||r?r:o+l;u=a?{members:t,workspaces:n}:{members:Object(w.a)(Object(I.a)(c,"members"),t,"id"),workspaces:Object(w.a)(Object(I.a)(c,"workspaces"),n,"id")},this.setState(function(){return{currentOptionsData:u,totalResultsCount:d,memberResultsCount:o,workspaceResultsCount:l}}),this.setIsLoading(!1)}},{key:"setCurrentOptionsData",value:function(e){var t=e.optionData,n=e.isNewSearch,a=e.totalResultsCount,r=this.state.currentOptionsData,i=void 0;i=n?t:Object(w.a)(r,t,"id"),this.setState(function(){return{currentOptionsData:i,totalResultsCount:a}}),this.setIsLoading(!1)}},{key:"setCurrentSearchQuery",value:function(e){this.setState(function(){return{currentSearchQuery:e}})}},{key:"setIsAnOptionHighlighted",value:function(e){this.setState(function(){return{isAnOptionHighlighted:e}})}},{key:"setIsLoading",value:function(e){this.setState(function(){return{loadingResults:e}})}},{key:"setNextCursorMark",value:function(e){this.setState(function(){return{nextCursorMark:e}})}},{key:"setPrepopulatedOptionData",value:function(e){this.setState(function(){return{prepopulatedOptionData:e}})}},{key:"setSelectRef",value:function(e){this.select=e}},{key:"setSelectedOptionData",value:function(e){this.setState(function(){return{selectedOptionData:e}})}},{key:"setValue",value:function(e){this.setState(function(){return{value:e}})}},{key:"blur",value:function(){this.select.blur()}},{key:"clearInput",value:function(){var e=this.props.triggerAction;this.setSelectedOptionData(null),this.setCurrentSearchQuery(null),this.setPrepopulatedOptionData(null),this.setValue(null),this.getOptionsFetcher(),e({selectedOptionData:null,type:null}),this.select.toggleOpenState()}},{key:"fetchMemberAndWorkspaceData",value:function(e){var t=this,n=e.args,a=e.forceNewSearch,r=e.newSearchQuery,i=e.stashedSearchQuery,o=[(0,this.props.fetchMembers)(n),this.props.fetchDirectoryWorkspaces(n)];return Promise.all(o).then(function(e){var n=e[0],o=n.items,s=void 0===o?[]:o,l=n.next_cursor_mark,c=n.num_found,u=e[1],d=u.items,p=void 0===d?[]:d,m=u.next_cursor_mark,h=u.num_found,b=void 0;(s.length||"*"===l||p.length||"*"===m)&&(s.length&&!p.length?t.setNextCursorMark(l):p.length&&!s.length&&t.setNextCursorMark(m),s.length&&!p.length?b=c:p.length&&!s.length&&(b=h),t.setCurrentOptionGroupsData({memberOptionData:s,workspaceOptionData:p,isNewSearch:a||i!==r,totalResultsCount:b,memberResultsCount:c,workspaceResultsCount:h}))})}},{key:"fetchMemberData",value:function(e){var t=this,n=e.args,a=e.forceNewSearch,r=e.newSearchQuery,i=e.stashedSearchQuery;return(0,this.props.fetchMembers)(n).then(function(e){var n=e.items,o=void 0===n?[]:n,s=e.next_cursor_mark,l=e.num_found;(o.length||"*"===s)&&(t.setNextCursorMark(s),t.setCurrentOptionsData({optionData:o,isNewSearch:a||i!==r,totalResultsCount:l}))})}},{key:"focus",value:function(){this.select.focus()}},{key:"formatMemberOptionData",value:function(e){var t=Object(W.K)(e),n=Object(I.a)(e,"id");return{label:this.renderMemberItemTemplate({item:e,type:"member"}),value:n,displayValue:t}}},{key:"formatMemberOptionsGroupsHeader",value:function(){var e=this.state,t=e.memberResultsCount,n=e.selectedOptionData?1:t;return rt.t("Search by coworker ({num})",{num:n})}},{key:"formatOptionsDataArrayOrObject",value:function(e){var t=this,n=[];if(this.props.membersOnly)n=Object(qe.a)(e,function(e){return t.formatMemberOptionData(e)});else{var a=e.members,r=e.workspaces,i=Object(I.a)(a,"length",0),o=Object(I.a)(r,"length",0);if(i){var s={label:this.formatMemberOptionsGroupsHeader(),options:[]},l=o>0?Object(De.a)(a,0,4):a;s.options=Object(qe.a)(l,function(e){return t.formatMemberOptionData(e)}),n.push(s)}if(o){var c={label:this.formatWorkspaceOptionsGroupsHeader(),options:[]};c.options=Object(qe.a)(r,function(e){return t.formatWorkspaceOptionData(e)}),n.push(c)}}return n}},{key:"formatWorkspaceOptionData",value:function(e){var t=Object(I.a)(e,"name"),n=Object(I.a)(e,"id");return{label:this.renderMemberItemTemplate({item:e,type:"workspace"}),value:n,displayValue:t}}},{key:"formatWorkspaceOptionsGroupsHeader",value:function(){var e=this.props.prepopulatedOption,t=this.state,n=t.currentSearchQuery,a=t.workspaceResultsCount,r=t.selectedOptionData,i=Object(I.a)(e,"displayValue","")?Object(I.a)(e,"displayValue",""):n,o=r?1:a,s=Object(We.c)()?50:150,l=Object(I.a)(i,"length",0)>s?i.slice(0,s)+"...":i;return rt.t("Workspaces matching \u201c{query}\u201d ({num})",{query:Object(Q.p)(l),num:o})}},{key:"initKeyCommands",value:function(){var e=new He.a;return e.bindAll([{keys:["enter"],handler:this.onKeyPressedEnter}]),e}},{key:"triggerActionWithValue",value:function(){var e=this.props.triggerAction,t=this.state.selectedOptionData;e({selectedOptionData:t,type:Object(We.h)(t)?"member":"workspace"})}},{key:"renderMemberItemTemplate",value:function(e){var t=e.item,n=e.type;return r.a.createElement(at,{item:t,type:n,featureReactMessages:!0,featureReactMemberProfileCard:!0})}},{key:"renderShowAllWorkspacesListItem",value:function(){var e=this.state.currentSearchQuery;return r.a.createElement("div",{className:"p-workspace_search_options_list_item"},r.a.createElement("div",{className:"p-workspace_search__search_icon_wrapper"},r.a.createElement(ne.b,{type:"search"})),r.a.createElement("div",{className:"p-workspace_search_options_list_item__content nudge_bottom_1"},r.a.createElement("div",{className:"p-workspace_search_options_list_item__alternate_content"},rt.rt('All workspace results for <span class="p-workspace_search_options_list_item__alternate_content--highlight">{query}</span>',{query:Object(Q.p)(e)}))))}},{key:"render",value:function(){var e=this.props,t=e.containerIdSelector,n=e.membersOnly,a=this.state,i=a.value,o=a.currentOptionsData,s=a.loadingResults,l=a.currentSearchQuery,c=a.prepopulatedOptionData,u=a.selectedOptionData,d=this.getBoundingRect(t),p=d.bottom,m=void 0===p?0:p,h=d.top,b=void 0===h?0:h,g={autoSelectFirstOption:!0,className:"p-workspace_search",displayValue:l,isLoading:s,membersOnly:n,onChange:this.onChange,onClearButtonClick:this.onClearButtonClicked,onClose:this.onClose,onFilterInputChange:this.debouncedOnFilterInputChange,onOpen:this.onOpen,onOptionHighlighted:this.onOptionHighlighted,onScroll:this.onScroll,optionsListOffsetBottom:window.innerHeight-m,optionsListOffsetTop:b,optionsRowHeight:48,placeholder:this.getPlaceHolderText(n),pillarClassName:"p-workspace_search",selectedOption:u,usePlaceholderOption:!1,useFullWidthOptions:!0,value:i,wrapperClassName:"p-workspace_search__wrapper"};if(n?g.options=this.formatOptionsDataArrayOrObject(o):g.optionGroups=this.formatOptionsDataArrayOrObject(o),c&&!i)if(Object(I.a)(c,"id")===We.b)g.selectedOption=c,g.displayValue=Object(I.a)(c,"displayValue");else{var _=Object(We.h)(c)?this.formatMemberOptionData(c):this.formatWorkspaceOptionData(c);g.selectedOption=c,g.displayValue=Object(I.a)(_,"displayValue")}return r.a.createElement("div",{className:"position_relative"},r.a.createElement(tt,f()({},g,{ref:this.setSelectRef})))}}]),t}(a.Component);ot.displayName="WorkspaceSearch",ot.defaultProps=it;var st={fetchMembers:J.j,fetchDirectoryWorkspaces:J.f},lt=Object(L.b)(null,st,null,{withRef:!0})(ot),ct=n("wR6u"),ut=new Q.b("workspace_directory"),dt={launch:"launch",join:"join",request:"request",request_sent:"request_sent",default:"default"},pt=(i.b.shape({id:i.b.string,description:i.b.string,discoverable:i.b.string,name:i.b.string,domain:i.b.string,is_member:i.b.bool,date_requested_join:i.b.oneOfType([i.b.string,i.b.number]),icon:i.b.object,is_inactive:i.b.bool,user_counts:i.b.object}).isRequired,i.b.oneOf(Object(Ue.a)(We.a)),i.b.bool.isRequired,i.b.string,i.b.func,i.b.func,i.b.bool,i.b.bool,i.b.func,i.b.func,i.b.string,i.b.bool,i.b.func,i.b.func,i.b.oneOf(["medium","large"]),{buttonContext:"largeCard",customClasses:"",onWorkspaceLaunch:P.a,onDefaultButtonClick:P.a,doLaunchInNewTab:!1,displayDirectoryInModal:!1,callJoinWorkspace:P.a,callRequestToJoinWorkspace:P.a,size:"large",onActionReject:P.a,onActionResolve:P.a,anchorPage:void 0,doUpsertJoin:!1}),mt=function(e){function t(e){_()(this,t);var n=y()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={loading:!1},n.buttonType=null,n.onClick=n.onClick.bind(n),n.onKeyPress=n.onKeyPress.bind(n),n}return E()(t,e),O()(t,[{key:"onClick",value:function(e){e.stopPropagation(),e.preventDefault(),this.handleButtonAction()}},{key:"onKeyPress",value:function(e){e.stopPropagation(),e.preventDefault(),13===e.which&&this.handleButtonAction()}},{key:"onWorkspaceJoin",value:function(){var e=this,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).windowOpener,n=this.props,a=n.team,i=n.onActionReject,o=n.onActionResolve,s=n.anchorPage,l=n.doUpsertJoin;return Object($.a)()&&Object(ct.d)(!1),this.props.callJoinWorkspace({teamId:a.id,anchorPage:s,doUpsertJoin:l}).then(function(){var e={};l&&(e.workspace=f()({},a,{is_member:!0})),o(e),Object($.a)()&&!Object(ee.b)()&&Object(ct.d)(!0)}).then(function(){return e.props.onWorkspaceLaunch(t)}).catch(function(n){Object($.a)()&&Object(ct.d)(!0),t&&(e.setLoading(!1),t.close()),i({node:r.a.createElement("span",null,ut.rt("Workspace couldn\u2019t be joined. Please reload and try again.")),err:n})})}},{key:"onWorkspaceRequestToJoin",value:function(){var e=this,t=this.props,n=t.team,a=t.onActionReject,i=t.onActionResolve,o=t.anchorPage;return this.props.callRequestToJoinWorkspace({teamId:n.id,anchorPage:o}).then(function(){i({node:r.a.createElement("div",{className:"display_flex"},r.a.createElement(ne.b,{type:"check-circle-o",className:"margin_right_50 sk_lilypad_green"}),r.a.createElement("span",null,ut.rt("<strong>Request sent!</strong> You\u2019ll be notified by email when a Workspace Admin grants access."))),workspace:f()({},n,{date_requested_join:String(Math.floor(Date.now()))})})}).then(function(){e.setLoading(!1)}).catch(function(e){a({node:r.a.createElement("span",null,ut.rt("Your request couldn\u2019t be sent. Please reload and try again.")),err:e})})}},{key:"getButtonProps",value:function(e){var t,n=this.props.displayDirectoryInModal;switch(e){case dt.launch:return{text:{displayDirectoryInModal:n}.displayDirectoryInModal?ut.t("Open"):ut.t("Launch in Slack"),type:"primary","data-qa-ws-directory-button-type":"primary","data-qa-ws-directory-button-text":"launch","data-qa":"launch"};case dt.request:return t="request_to_join",{text:ut.t("Request to Join"),type:"primary","data-qa-ws-directory-button-type":"primary","data-qa-ws-directory-button-text":t,"data-qa":t};case dt.join:return{text:{displayDirectoryInModal:n}.displayDirectoryInModal?ut.t("Join and Open"):ut.t("Join and Launch Slack"),type:"primary","data-qa-ws-directory-button-type":"primary","data-qa-ws-directory-button-text":"join","data-qa":"join"};case dt.request_sent:return function(){var e="request_sent";return{text:ut.t("Request Sent"),type:"primary","data-qa-ws-directory-button-type":"primary","data-qa-ws-directory-button-text":e,"data-qa":e,disabled:!0}}();case dt.default:return function(){var e="default";return{type:"outline",text:ut.t("View Details",{fallbackHash:"6319b15f86fee6c8e5aa4846437f377ec352787c"}),"data-qa-ws-directory-button-type":"outline","data-qa-ws-directory-button-text":e,"data-qa":e}}();default:return null}}},{key:"setLoading",value:function(e){this.setState(function(){return{loading:e}})}},{key:"handleButtonAction",value:function(){var e=this.props.doLaunchInNewTab;if("default"===this.buttonType)return this.props.onDefaultButtonClick();if(this.setLoading(!0),"join"===this.buttonType){if(e){var t=window.open("","_blank");return this.onWorkspaceJoin({windowOpener:t})}return this.onWorkspaceJoin()}return"request"===this.buttonType?this.onWorkspaceRequestToJoin():("launch"===this.buttonType&&(this.props.onWorkspaceLaunch(),e&&this.setLoading(!1)),null)}},{key:"render",value:function(){var e=this.props,t=e.featureZeroWorkspaceOnboarding,n=e.team,a=e.buttonContext,i=e.customClasses,o=e.size,s=this.state.loading,l=function(e,t){var n=t.context,a=void 0===n?We.a.smallCard:n,r=t.featureZeroWorkspaceOnboarding;if(void 0!==r&&!r)return null;var i=e.is_member,o=e.date_requested_join,s=e.is_assigned,l=e.discoverable;if(i)return dt.launch;if(a!==We.a.smallCard){if(s)return dt.join;switch(l){case"open":return dt.join;case"closed":if(!o)return dt.request;if(a===We.a.largeCard)return dt.request_sent}return null}return dt.default}(n,{context:a,featureZeroWorkspaceOnboarding:t});this.buttonType=l;var c=this.getButtonProps(l);if(!l||Object(R.a)(c))return null;var d=n.id,p=c.text,m=u()(c,["text"]),h=m.disabled||s;return r.a.createElement(Fe.b,f()({},m,{className:i,onClick:this.onClick,onKeyPress:this.onKeyPress,"data-workspace-id":d,"data-qa-ws-directory-button":!0,loading:s,disabled:h,size:o}),p)}}]),t}(a.Component);mt.displayName="WorkspaceDirectoryButton",mt.defaultProps=pt;var ht={callJoinWorkspace:J.b,callRequestToJoinWorkspace:J.d};var bt=Object(L.b)(function(e,t){var n=t.team,a=t.onActionResolve,r=t.anchorPage,i=t.doLaunchInNewTab,o=t.channelRedirect,l=t.postLaunchAction,c=t.userIdFromURL,u=Object(H.b)(e);return{featureZeroWorkspaceOnboarding:Object(s.m)(e,"feature_zero_workspace_onboarding"),displayDirectoryInModal:Object(s.l)(e),onWorkspaceLaunch:function(t){return Object(We.i)(e,{team:n,user:u,onActionResolve:a,anchorPage:r,doLaunchInNewTab:i,windowOpener:t,channelRedirect:o,postLaunchAction:l,userIdFromURL:c})}}},ht)(mt),ft=(n("ah8n"),new Q.b("workspace_directory")),gt={large:"large",small:"small"},_t={large:64,small:48},vt=(i.b.shape({id:i.b.string,description:i.b.string,discoverable:i.b.string,name:i.b.string,domain:i.b.string,is_member:i.b.bool,date_requested_join:i.b.oneOfType([i.b.string,i.b.number]),icon:i.b.object,is_inactive:i.b.bool,user_counts:i.b.object}).isRequired,i.b.oneOf(Object(Ue.a)(gt)),i.b.bool.isRequired,i.b.string,i.b.func,i.b.func,i.b.string,i.b.func,i.b.bool,{size:gt.large,className:"",onActionResolve:P.a,onActionReject:P.a,anchorPage:"",openDialog:P.a,doLaunchInNewTab:!1}),yt=function(e){function t(e){_()(this,t);var n=y()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onCardClick=n.onCardClick.bind(n),n.onKeyPress=n.onKeyPress.bind(n),n.onResize=n.onResize.bind(n),n.openDialog=n.openDialog.bind(n),n.state={isMobileView:!1},n}return E()(t,e),O()(t,[{key:"componentDidMount",value:function(){this.setIsMobileView(Object(We.c)()),window.addEventListener("resize",this.onResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResize)}},{key:"onCardClick",value:function(e){e.stopPropagation(),e.preventDefault(),this.isSmallVariationCard()&&this.openDialog()}},{key:"onKeyPress",value:function(e,t){if(e.preventDefault(),"Enter"===e.key)switch(t){case"openDialog":if(this.isSmallVariationCard())return this.openDialog()}return null}},{key:"onResize",value:function(){this.setIsMobileView(Object(We.c)())}},{key:"setIsMobileView",value:function(e){this.setState(function(){return{isMobileView:e}})}},{key:"isLargeVariationCard",value:function(){return this.props.size===gt.large}},{key:"isSmallVariationCard",value:function(){return this.props.size===gt.small}},{key:"openDialog",value:function(){var e=this.props,t=e.team,n=e.openDialog;n({team:t})}},{key:"renderAvatar",value:function(){var e=this.props.team,t=this.isLargeVariationCard()&&!this.state.isMobileView?_t[gt.large]:_t[gt.small];return r.a.createElement("div",{className:"display_flex"},r.a.createElement(he,{entityType:"workspace",customClasses:this.isSmallVariationCard()?"cursor_pointer":"",dimension:t,entityData:e,featureReactMessages:!0,featureReactMemberProfileCard:!0}))}},{key:"renderButton",value:function(){var e=this.props,t=e.team,n=e.size,a=e.onActionReject,i=e.onActionResolve,o=e.anchorPage,s=e.doLaunchInNewTab,l=this.isLargeVariationCard()?"large":"medium";return r.a.createElement(bt,{team:t,buttonContext:n+"Card",featureZeroWorkspaceOnboarding:!0,customClasses:"p-workspace_directory_card__button",onDefaultButtonClick:this.openDialog,onActionReject:a,onActionResolve:i,anchorPage:o,doLaunchInNewTab:s,size:l})}},{key:"renderWorkspaceDescription",value:function(){var e=this.props.team.description;return r.a.createElement("div",{className:"p-workspace_directory_card__description","data-qa-ws-directory-card-description":!0},e)}},{key:"renderWorkspaceName",value:function(){var e=this.props.team.name;return r.a.createElement("span",{className:"p-workspace_directory_card__title","data-qa-ws-directory-card-title":!0,title:e},e)}},{key:"renderWorkspaceStatus",value:function(){var e=this.props,t=e.featureZeroWorkspaceOnboarding,n=e.team;if(!t||this.isSmallVariationCard())return null;var a=Object(We.f)(n,{context:"largeCard",featureZeroWorkspaceOnboarding:t});return a?r.a.createElement("div",{className:"p-workspace_directory_card__status"},a):null}},{key:"renderWorkspaceSubtitle",value:function(){var e=this.props,t=e.featureZeroWorkspaceOnboarding,n=e.team;if(!t)return null;var a=this.state.isMobileView,i=n.date_requested_join,o=n.discoverable,s=n.domain,l=n.user_counts,c=(l=void 0===l?{}:l).active_members,u=void 0===c?0:c,d=ft.t("{activeMembers} active members",{activeMembers:u?Object(Q.n)(u):0}),p=void 0;return p=this.isLargeVariationCard()&&!a?r.a.createElement("div",null,r.a.createElement("span",{className:"border_right padding_right_50 margin_right_50 float_left"},d),r.a.createElement("span",{className:"overflow_ellipsis"},s+".slack.com")):this.isSmallVariationCard()&&"closed"===o&&i?r.a.createElement("span",null,ft.t("Awaiting admin approval")):r.a.createElement("span",{className:"overflow_ellipsis"},d),r.a.createElement("div",{className:"p-workspace_directory_card__subtitle","data-qa-ws-directory-card-subtitle":!0},p)}},{key:"render",value:function(){var e=this.props,t=e.featureZeroWorkspaceOnboarding,n=e.size,a=e.className;if(!t)return null;var i=this.props.team.id,o=F()("p-workspace_directory_card",a,{"p-workspace_directory_card--large":this.isLargeVariationCard(),"p-workspace_directory_card--small":this.isSmallVariationCard()});return r.a.createElement("div",{className:o,onClick:this.onCardClick,"data-workspace-id":i,"data-qa-ws-directory-card":!0,"data-qa-ws-directory-card-size":n,role:"presentation"},r.a.createElement("div",{className:"display_flex flex_direction_column"},r.a.createElement("div",{className:"display_flex align_self_start full_width"},this.renderAvatar(),r.a.createElement("div",{className:"p-workspace_directory_card__heading nudge_top_1"},this.renderWorkspaceName(),this.renderWorkspaceSubtitle())),this.renderWorkspaceStatus(),this.renderWorkspaceDescription()),this.renderButton())}}]),t}(a.Component);yt.displayName="WorkspaceDirectoryCard",yt.defaultProps=vt;var kt=Object(L.b)(function(e){return{featureZeroWorkspaceOnboarding:Object(s.m)(e,"feature_zero_workspace_onboarding")}})(yt),Ot=n("mIgp"),Ct=(n("8XR2"),new Q.b("grid_onboarding")),Et=(i.b.string,i.b.object.isRequired,i.b.bool.isRequired,i.b.func.isRequired,i.b.any,i.b.func,i.b.func,i.b.object.isRequired,{orgName:"",scrollElement:window,enqueueToast:P.a,onFooterClick:P.a}),jt=Object(K.b)();function St(e){var t=e.totalWorkspaces,n=e.onWorkspaces;return!t&&n}function It(e){var t=e.totalWorkspaces,n=e.onWorkspaces;return!t&&!n}var wt=function(e){var t=e.workspaces,n=e.noAccessToWorkspaces,a=e.noWorkspaces,i=e.hasApiError,o=e.featureZeroWorkspaceOnboarding;if(!o)return"";var s=function(e){return e?{oneJoinableWorkspace:Ct.t("Join this workspace to start working with them on Slack."),moreThanOneJoinableWorkspaces:Ct.t("Join the workspace that seems right for your role to get started."),noAccess:Ct.t("Get in touch with them to be invited to a workspace they\u2019re in."),noWorkspaces:Ct.t("Try searching for someone else on your team."),onApiError:Ct.rt("You may want to try <a>reloading this page</a> and searching again, or try searching for someone else.",null,function(e){var t=e.text,n=e.key;return"a"===e.tag?r.a.createElement(ie.a,{onClick:function(){return Object(xe.b)({reason:"Search failure, user initiated reload via link in error message",reasonKey:"search_results_failure",noCache:!0})},target:"_self",key:n},t):{text:t}})}:""}(o);if(i)return s.onApiError;var l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(A.a)(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"open"===e.discoverable||"closed"===e.discoverable||"unlisted"===e.discoverable&&e.is_assigned})}(t).length;return 1===l?s.oneJoinableWorkspace:l>1?s.moreThanOneJoinableWorkspaces:n?s.noAccess:a?s.noWorkspaces:""},Nt=function(e){function t(e){_()(this,t);var n=y()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isMobileView:!1,loadingWorkspaces:!1,nextCursorMark:null,memberRealName:"",selectedMember:{},workspaces:[],totalWorkspaces:0,onWorkspaces:!1,hasApiError:!1},n.resultsList=null,n.searchBar=null,n.userHasNoAccessToWorkspaces=!1,n.memberHasNoWorkspaces=!1,n.noWorkspacesToDisplay=!1,n.doRenderSearchAgainButton=!1,Object(D.a)(n,["onFooterClick","onResize","onScroll","setListRef","setSearchBarRef","renderWorkspaceCard","getListKeys","onSearchAgainButtonClick","onSelectColleague","setWorkspaceFetchOptions","fetchWorkspaces","onButtonActionReject","onButtonActionResolve","setToastText","setLoadingWorkspaces"]),n}return E()(t,e),O()(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.onResize),this.clientHeight=window.innerHeight,this.setSelectedMember(this.props.selectedMember)}},{key:"componentDidUpdate",value:function(e,t){this.maybeFetchNextPage(t),this.maybeTriggerNewSearch(t),this.maybeUpdateMemberRealName(t)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResize)}},{key:"onButtonActionReject",value:function(e){var t=e.node;t&&this.setToastText(t)}},{key:"onButtonActionResolve",value:function(e){var t=e.node,n=e.i,a=e.workspace;Object(Pe.a)(n)&&a&&this.setWorkspaceByIndex({index:n,workspace:a}),t&&this.setToastText(t)}},{key:"onFooterClick",value:function(){this.props.onFooterClick()}},{key:"onResize",value:function(){this.clientHeight=window.innerHeight;var e=Object(We.c)(),t=this.state.isMobileView!==e;(e||t)&&this.resultsList.invalidateRowHeights()}},{key:"onScroll",value:function(e){var t=e.scrollTop,n=e.scrollHeight;this.doInfiniteScrollHandler({scrollTop:t,scrollHeight:n})}},{key:"onSearchAgainButtonClick",value:function(e){e.preventDefault(),e.stopPropagation(),this.searchBar&&this.searchBar.getWrappedInstance&&this.searchBar.getWrappedInstance().onSearchAgainTriggered()}},{key:"onSelectColleague",value:function(e){var t=e.selectedOptionData;t&&this.setSelectedMember(t)}},{key:"getListKeys",value:function(){return this.state.workspaces?this.state.workspaces.map(function(e){return String(e.id)}):[]}},{key:"setHasApiError",value:function(e){this.setState(function(){return{hasApiError:e}})}},{key:"setListRef",value:function(e){this.resultsList=e}},{key:"setLoadingWorkspaces",value:function(e){this.setState(function(){return{loadingWorkspaces:e}})}},{key:"setMemberRealName",value:function(e){this.setState(function(){return{memberRealName:e}})}},{key:"setSearchBarRef",value:function(e){this.searchBar=e}},{key:"setSelectedMember",value:function(e){this.setState(function(){return{selectedMember:e}})}},{key:"setToastText",value:function(e){this.props.enqueueToast({element:r.a.createElement(ae.b,{position:"bottom-right",offsetY:50},e)})}},{key:"setWorkspaceByIndex",value:function(e){var t=e.index,n=e.workspace;this.setState(function(e){var a=[].concat(e.workspaces);return t>=a.length?(jt.warn("SearchResultsScreen: Out of bounds index "+t+" passed into setWorkspaceByIndex"),e):(a[t]=n,{workspaces:a})})}},{key:"setWorkspaceFetchOptions",value:function(e){var t=e.workspaces,n=e.totalWorkspaces,a=e.onWorkspaces,r=e.nextCursorMark;this.setState(function(){return{workspaces:t,totalWorkspaces:n,onWorkspaces:a,nextCursorMark:r}})}},{key:"clearWorkspaceFetchOptions",value:function(){this.setWorkspaceFetchOptions({workspaces:[],totalWorkspaces:0,onWorkspaces:!1,nextCursorMark:null})}},{key:"doInfiniteScrollHandler",value:function(e){var t=e.scrollTop,n=e.scrollHeight,a=this.hasScrolledWithinScrollThreshold({scrollTop:t,scrollHeight:n});a&&!this.hasFetchedAllWorkspaces()?this.setLoadingWorkspaces(!0):!a&&this.hasFetchedAllWorkspaces()&&this.setLoadingWorkspaces(!1)}},{key:"fetchWorkspaces",value:function(){var e=this,t=this.state,n=t.nextCursorMark,a=t.selectedMember;return this.setHasApiError(!1),this.props.fetchDirectoryWorkspaces({nextCursorMark:n,id:Object(I.a)(a,"id"),type:"single_user"}).then(function(t){e.setLoadingWorkspaces(!1);var a=t.num_found,r=t.on_workspaces,i=t.items,o=i?[].concat(e.state.workspaces,i):[];e.setWorkspaceFetchOptions({workspaces:o,totalWorkspaces:a,onWorkspaces:r,nextCursorMark:t.next_cursor_mark}),n||Object(We.e)({anchorPage:"grid_onboarding",numSearchResults:Object(I.a)(t,"num_found",0),clogger:e.props.clogger})}).catch(function(t){e.setHasApiError(!0),e.setLoadingWorkspaces(!1),jt.error("SearchResultsScreen: Error in FetchWorkspaces -",t)})}},{key:"hasFetchedAllWorkspaces",value:function(){return this.state.workspaces.length===this.state.totalWorkspaces}},{key:"hasScrolledWithinScrollThreshold",value:function(e){return e.scrollHeight-(e.scrollTop+this.clientHeight)<1200}},{key:"maybeFetchNextPage",value:function(e){!e.loadingWorkspaces&&this.state.loadingWorkspaces&&this.fetchWorkspaces()}},{key:"maybeTriggerNewSearch",value:function(e){e.selectedMember!==this.state.selectedMember&&(this.clearWorkspaceFetchOptions(),this.setLoadingWorkspaces(!0))}},{key:"maybeUpdateMemberRealName",value:function(e){if(e.selectedMember!==this.state.selectedMember){var t=Object(W.K)(this.state.selectedMember);this.setMemberRealName(t)}}},{key:"renderFooter",value:function(){var e=this.props.orgName,t=F()("p-grid_onboarding__footer","p-grid_onboarding__footer_link",{margin_top_250:!this.noWorkspacesToDisplay||!this.doRenderSearchAgainButton,margin_top_150:this.noWorkspacesToDisplay});return r.a.createElement(Me.a,{enabled:["feature_zero_workspace_onboarding"]},r.a.createElement(ie.a,{onClick:this.onFooterClick,className:t},Ct.t("View all {orgName} workspaces",{orgName:e}),r.a.createElement(ne.a,{type:"chevron-right",key:"footer-chevron-icon",className:"p-grid_onboarding__footer_icon"})))}},{key:"renderHeading",value:function(){var e=this.props.featureZeroWorkspaceOnboarding;if(!e)return null;var t=this.state,n=t.totalWorkspaces,a=t.selectedMember,i=t.hasApiError,o=Object(W.K)(a),s=function(e){var t=e.noAccessToWorkspaces,n=e.noWorkspaces,a=e.memberRealName,r=e.totalWorkspaces,i=e.hasApiError;return e.featureZeroWorkspaceOnboarding?i?Ct.t("We ran into some trouble fetching {memberName}\u2019s workspaces",{memberName:Object(Q.p)(a)}):t?Ct.t("{memberName} isn\u2019t in a workspace you have access to",{memberName:Object(Q.p)(a)}):n?Ct.t("{memberName} hasn\u2019t joined a workspace",{memberName:Object(Q.p)(a)}):Ct.t("{memberName} is in {numWorkspaces, plural, =1 {# workspace} other {# workspaces}}",{memberName:Object(Q.p)(a),numWorkspaces:r}):""}({noAccessToWorkspaces:this.userHasNoAccessToWorkspaces,noWorkspaces:this.memberHasNoWorkspaces,totalWorkspaces:n,memberRealName:o,hasApiError:i,featureZeroWorkspaceOnboarding:e}),l=F()("p-grid_onboarding__results_heading_container",{align_center:this.noWorkspacesToDisplay});return r.a.createElement("div",{className:l},r.a.createElement("span",{className:"p-grid_onboarding__results_heading"},r.a.createElement(he,{entityType:"member",dimension:24,entityData:a,featureReactMessages:!0,customClasses:"p-grid_onboarding_results__icon"}),s))}},{key:"renderInfiniteSpinner",value:function(){return r.a.createElement("div",{className:"p-grid_onboarding__spinner"},r.a.createElement(oe.a,{size:"jumbo",className:"inline_block full_width margin_top_200"}))}},{key:"renderResults",value:function(){var e=this.state,t=e.loadingWorkspaces,n=e.selectedMember;return t&&this.memberHasNoWorkspaces||!n?this.renderInfiniteSpinner():r.a.createElement(r.a.Fragment,null,this.renderHeading(),this.renderSubheading(),!this.noWorkspacesToDisplay&&this.renderWorkspaceList(),t&&this.renderInfiniteSpinner(),this.doRenderSearchAgainButton&&this.renderSearchAgainButton(),!t&&this.renderFooter())}},{key:"renderSearchAgainButton",value:function(){return r.a.createElement(Me.a,{enabled:["feature_zero_workspace_onboarding"]},r.a.createElement("div",{className:"display_flex justify_content_center margin_top_150"},r.a.createElement(Fe.d,{type:"outline",onClick:this.onSearchAgainButtonClick},Ct.t("Search Again"))))}},{key:"renderSearchBar",value:function(){return r.a.createElement("div",{className:"p-grid_onboarding_results__search"},r.a.createElement(lt,{triggerAction:this.onSelectColleague,containerIdSelector:"colleagueSearchResults",membersOnly:!0,className:"margin_bottom_200",prepopulatedOption:this.props.selectedMember,ref:this.setSearchBarRef}))}},{key:"renderSubheading",value:function(){var e=this.props.featureZeroWorkspaceOnboarding;if(!e)return null;var t=this.state,n=t.workspaces,a=t.hasApiError,i=wt({workspaces:n,featureZeroWorkspaceOnboarding:e,noAccessToWorkspaces:this.userHasNoAccessToWorkspaces,noWorkspaces:this.memberHasNoWorkspaces,hasApiError:a}),o=F()("p-grid_onboarding__results_subheading",{align_center:this.noWorkspacesToDisplay});return r.a.createElement("div",{className:o},i)}},{key:"renderWorkspaceCard",value:function(e){var t=this,n=this.state,a=n.workspaces,i=n.totalWorkspaces,o=F()("p-grid_onboarding_results__list_item",{margin_bottom_0:e===i-1});return r.a.createElement(kt,{team:a[e],size:"large",featureZeroWorkspaceOnboarding:!0,className:o,onActionResolve:function(n){return t.onButtonActionResolve(f()({},n,{i:e}))},onActionReject:function(n){return t.onButtonActionReject(f()({},n,{i:e}))},anchorPage:"grid_onboarding"})}},{key:"renderWorkspaceList",value:function(){var e=this,t=this.props.scrollElement;return r.a.createElement(U.a,{scrollElement:t,onScroll:this.onScroll},function(n){var a=n.height,i=n.isScrolling,o=n.onChildScroll,s=n.scrollTop,l=n.registerChild;return r.a.createElement("div",{className:"p-grid_onboarding_results__list",ref:l},r.a.createElement(Ot.a,{keys:e.getListKeys(),rowRenderer:e.renderWorkspaceCard,ref:e.setListRef,scrollElement:t,onScroll:o,height:a,isScrolling:i,scrollTop:s}))})}},{key:"render",value:function(){var e=this.state,t=e.totalWorkspaces,n=e.onWorkspaces,a=e.loadingWorkspaces,i=e.hasApiError;return this.userHasNoAccessToWorkspaces=St({totalWorkspaces:t,onWorkspaces:n}),this.memberHasNoWorkspaces=It({totalWorkspaces:t,onWorkspaces:n}),this.noWorkspacesToDisplay=this.userHasNoAccessToWorkspaces||this.memberHasNoWorkspaces,this.doRenderSearchAgainButton=!a&&this.noWorkspacesToDisplay&&!i,r.a.createElement(Me.a,{enabled:["feature_zero_workspace_onboarding"]},r.a.createElement("div",{className:"p-grid_onboarding__results",id:"colleagueSearchResults"},this.renderSearchBar(),this.renderResults()))}}]),t}(a.Component);Nt.displayName="SearchResultsScreen",Nt.defaultProps=Et;var Tt={enqueueToast:G.c,fetchDirectoryWorkspaces:J.f},At=(Object(L.b)(function(e,t){return{selectedMember:t.selectedMember,workspaces:t.workspaces,orgName:Object(q.e)(e),clogger:Object(X.a)({state:e}),featureZeroWorkspaceOnboarding:Object(s.m)(e,"feature_zero_workspace_onboarding"),featureSingleUserWorkspacePagination:Object(s.m)(e,"feature_single_user_workspace_pagination")}},Tt)(Nt),n("U3Q0")),Rt=(n("zzVd"),new Q.b("workspace_directory")),Pt=(i.b.shape({admins:i.b.arrayOf(i.b.shape({real_name:i.b.string})),can_leave:i.b.bool,cannot_leave_reasons:i.b.array,created:i.b.number,deleted:i.b.bool,description:i.b.string,discoverable:i.b.string,domain:i.b.string,enterprise_id:i.b.string,date_requested_join:i.b.oneOfType([i.b.string,i.b.number]),icon:i.b.object,id:i.b.string,is_member:i.b.bool,joined_date:i.b.number,name:i.b.string,user_counts:i.b.object}).isRequired,i.b.func,i.b.func,i.b.func,i.b.func,i.b.func,i.b.func,i.b.func,i.b.func,i.b.func,i.b.bool,i.b.bool,i.b.string,i.b.string,i.b.string,{callLeaveWorkspace:P.a,onClose:P.a,onActionResolve:P.a,onActionReject:P.a,fetchEnterpriseTeamById:P.a,onLeaveReject:P.a,onLeaveResolve:P.a,onDone:P.a,fetchTeam:P.a,isGuest:!1,displayDirectoryInModal:!1,channelRedirect:null,postLaunchAction:null,userIdFromURL:null}),Mt=function(e){function t(e){_()(this,t);var n=y()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={team:{},loading:!1},n.onWorkspaceLeave=n.onWorkspaceLeave.bind(n),n.setLoading=n.setLoading.bind(n),n}return E()(t,e),O()(t,[{key:"componentDidMount",value:function(){var e=this.props.team;this.setWorkspace(e),this.fetchWorkspaceInfo()}},{key:"onWorkspaceLeave",value:function(e){var t=this.props,n=t.team,a=t.onLeaveReject,i=t.onLeaveResolve,o=t.onDone;return e.preventDefault(),this.props.callLeaveWorkspace({teamId:n.id}).then(function(){return i({workspace:f()({},n,{is_member:!1})})}).then(function(){return o()}).catch(function(e){return a({node:r.a.createElement("span",null,Rt.rt("Workspace couldn\u2019t be left. Please reload and try again.")),err:e})})}},{key:"getTitleAria",value:function(){var e=this.state.team.name,t=void 0===e?"":e;return t||"Workspace Name"}},{key:"setLoading",value:function(e){this.setState(function(){return{loading:e}})}},{key:"setWorkspace",value:function(e,t){this.setState(function(){return{team:e}},t)}},{key:"canLeaveWorkspace",value:function(){var e=this.state.team,t=e.is_member,n=e.can_leave,a=this.props.isGuest;return t&&n&&!a}},{key:"fetchWorkspaceInfo",value:function(){var e=this,t=this.props.team.id;return this.setLoading(!0),this.props.fetchEnterpriseTeamById({teamId:t,additionalOptions:{include_admins:!0}}).then(function(t){e.setWorkspace(t,function(){return e.setLoading(!1)})})}},{key:"listifyAdminRealNames",value:function(e){var t=Object(qe.a)(e,function(e){return Object(W.K)(e)});return Object(Q.j)(t,{noEscape:!0})}},{key:"renderButton",value:function(){var e=this.props,t=e.onActionReject,n=e.onActionResolve,a=this.state,i=a.team;if(a.loading)return null;var o=!(Object(B.a)()||Object($.a)()&&Object(ee.b)());return r.a.createElement(bt,{team:i,customClasses:"margin_top_100",buttonContext:"dialog",featureZeroWorkspaceOnboarding:!0,onActionReject:t,onActionResolve:n,anchorPage:"workspace_directory",size:"medium",doLaunchInNewTab:o,channelRedirect:this.props.channelRedirect,postLaunchAction:this.props.postLaunchAction,userIdFromURL:this.props.userIdFromURL,doUpsertJoin:!0})}},{key:"renderDialogBody",value:function(){if(this.state.loading)return this.renderInfiniteSpinner();var e=this.state.team,t=e.description,n=e.admins,a=e.user_counts,i=[];t&&i.push({heading:Rt.t("About"),text:t,key:"dialog-description"}),i.push({heading:Rt.t("Active members"),text:Rt.t("{activeMembers}",{activeMembers:Object(Q.n)(Object(I.a)(a,"active_members",0))}),key:"dialog-active-members"},{heading:Rt.t("Workspace admins"),text:this.listifyAdminRealNames(n),key:"dialog-admins"});return r.a.createElement("div",{className:"p-workspace_directory_dialog__body"},i.map(function(e){return t=e,r.a.createElement("div",{key:t.key},r.a.createElement("p",{className:"margin_bottom_25 bold"},t.heading),r.a.createElement("p",null,t.text));var t}))}},{key:"renderDialogFooter",value:function(){return r.a.createElement(Fe.c,{className:"p-workspace_directory_dialog__leave",onClick:this.onWorkspaceLeave},Rt.t("Leave this workspace"))}},{key:"renderDialogHeader",value:function(e){var t=this.state.team,n=t.name,a=void 0===n?"":n,i=t.domain,o=void 0===i?"":i,s=F()("p-workspace_directory_dialog__header",{"p-workspace_directory_dialog__header--mobile":Object(We.c)()});return r.a.createElement("div",{className:s},r.a.createElement(he,{entityType:"workspace",dimension:100,entityData:t,featureReactMessages:!0,featureReactMemberProfileCard:!0}),r.a.createElement("div",{className:"p-workspace_directory_dialog__name"},Rt.t("{name}",{name:Object(Q.p)(a)})),r.a.createElement("div",{className:"p-workspace_directory_dialog__domain"},Rt.t("{domain}.slack.com",{domain:o})),this.renderDialogHeaderCaption(e),this.renderButton())}},{key:"renderDialogHeaderCaption",value:function(e){return this.state.loading?null:e?r.a.createElement("span",{className:"p-workspace_directory_dialog__caption"},r.a.createElement(ne.b,{size:"inherit",type:"exclamation-circle",align:"baseline",className:"margin_right_25"}),e):null}},{key:"renderDialogOnMobile",value:function(e){var t=this.canLeaveWorkspace();return r.a.createElement(be.a,{showCancelButton:!1,showCloseButton:!1,showGoButton:!1,position:"fixed",modalBodyClasses:"p-workspace_directory_dialog--mobile"},this.renderDialogHeader(e),r.a.createElement("div",{className:"p-workspace_directory_dialog__contents--mobile"},this.renderDialogBody(),t&&this.renderDialogFooter()))}},{key:"renderInfiniteSpinner",value:function(){return r.a.createElement("div",{className:"overflow_hidden margin_100"},r.a.createElement(oe.a,{size:"jumbo",className:"inline_block full_width"}))}},{key:"render",value:function(){var e=this.state.team,t=Object(We.f)(e,{context:"dialog"});if(Object(We.c)())return this.renderDialogOnMobile(t);var n=this.props.displayDirectoryInModal,a={contentLabel:t,className:F()("p-workspace_directory_dialog",{"p-workspace_directory_dialog--focus_ring":!n}),showCloseButton:!0,showCancelButton:!1,showGoButton:!1,showHeader:!0,title:this.renderDialogHeader(t),titleAria:this.getTitleAria(),useSlackScrollbar:!1,showFooter:!1,shouldCloseOnOverlayClick:!0,invertCloseButton:!0};return this.canLeaveWorkspace()&&(a=f()({},a,{showFooter:!0,footerText:this.renderDialogFooter()})),r.a.createElement(At.b,a,this.renderDialogBody())}}]),t}(a.Component);Mt.displayName="WorkspaceDirectoryDialog",Mt.defaultProps=Pt;var xt={callLeaveWorkspace:J.c,fetchEnterpriseTeamById:J.g},Ft=Object(L.b)(null,xt)(Mt),Lt=n("XhtD"),Dt=(n("+BnW"),i.b.array.isRequired,i.b.any,i.b.func,i.b.func,i.b.number,{scrollElement:window,onScroll:P.a,renderWorkspaceCard:P.a,topOffset:0}),Ut=function(e){function t(e){_()(this,t);var n=y()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(D.a)(n,["onScroll","onResize","setListRef","getListKeys","renderRow","renderCell"]),n.state={columns:3},n.list=null,n.keys=[],n.rowsByIndex=[],n.currentRow=0,n}return E()(t,e),O()(t,null,[{key:"getUpdatedRowIndex",value:function(e){var t=e.currentRow,n=void 0===t?0:t,a=e.prevColumns,r=void 0===a?0:a,i=e.updatedColumns,o=void 0===i?0:i;if(!n)return 0;if(r===o)return n;var s=n*r;return Math.floor(s/o)}}]),O()(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.onResize),this.calculateColumns()}},{key:"componentDidUpdate",value:function(e,n){if(this.state.columns!==n.columns){var a=t.getUpdatedRowIndex({currentRow:this.currentRow,prevColumns:n.columns,updatedColumns:this.state.columns});this.currentRow=a;var r=this.getKeyForRow(a);this.keys.length&&this.list.scrollToKey(r)}}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResize)}},{key:"onResize",value:function(){var e=this.list.getVisibleRange().start;this.currentRow=e||0,this.calculateColumns()}},{key:"onScroll",value:function(e){return this.props.onScroll(e)}},{key:"getContentHeight",value:function(){return this.list.getContentHeight()}},{key:"getKeyForRow",value:function(e){return this.keys[e]}},{key:"getListKeys",value:function(){return this.keys}},{key:"getWorkspacesByRowIndex",value:function(e){var t=this.state.columns,n=this.props.workspaces,a=this.rowsByIndex[e],r=Math.min(a+t,n.length);return Object(Lt.a)(a,r)}},{key:"setColumns",value:function(e){this.setState(function(){return{columns:e}})}},{key:"setListRef",value:function(e){this.list=e}},{key:"calculateColumns",value:function(){var e=window.innerWidth,t=3;t=Object(We.c)(e)?1:Object(We.d)(e)?2:3,this.state.columns!==t&&this.setColumns(t)}},{key:"renderCell",value:function(e){var t=this.props,n=t.workspaces,a=t.renderWorkspaceCard,i=n[e];return i?r.a.createElement("div",{className:"p-workspace_grid_list__cell",key:"grid_list_cell_"+e},a(i)):null}},{key:"renderRow",value:function(e){var t=this,n=this.getWorkspacesByRowIndex(e),a=F()("p-workspace_grid_list__row",{"p-workspace_grid_list__row--one_column":1===this.state.columns});return r.a.createElement("div",{className:a},n.map(function(e){return t.renderCell(e)}))}},{key:"render",value:function(){var e=this.props,t=(e.topOffset,e.scrollElement,u()(e,["topOffset","scrollElement"]));return this.rowsByIndex=Object(Lt.a)(0,this.props.workspaces.length,this.state.columns),this.keys=this.rowsByIndex.map(function(e){return e.toString()}),r.a.createElement(Ot.a,f()({keys:this.getListKeys(),rowRenderer:this.renderRow,ref:this.setListRef,scrollElement:this.props.scrollElement,onScroll:this.onScroll,topOffset:this.props.topOffset},t))}}]),t}(a.PureComponent);Ut.displayName="WorkspaceGridList",Ut.defaultProps=Dt;var Bt=Ut,qt=n("um7Q"),Ht=n("MREy"),Wt=n("lwWk"),Gt=(n("wb76"),i.b.string,i.b.string,i.b.object,i.b.string,i.b.object,i.b.bool,i.b.func,i.b.string,i.b.string,i.b.func,{logoLink:null,logoAriaLabel:null,logoLinkProps:{},title:null,team:{},isEnterprise:null,renderRightContents:P.a,rightClassName:null,renderCenterContents:P.a,centerClassName:null}),Kt=function(e){function t(){return _()(this,t),y()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E()(t,e),O()(t,[{key:"renderRightContents",value:function(){var e=this.props,t=e.rightClassName,n=e.renderRightContents,a=F()("p-navigation_bar__right",t);return r.a.createElement("div",{className:a},n())}},{key:"renderCenterContents",value:function(){var e=this.props,t=e.centerClassName,n=e.renderCenterContents,a=F()("p-navigation_bar__center",t);return r.a.createElement("div",{className:a},n())}},{key:"renderTitle",value:function(){var e=this.props,t=e.title,n=e.team,a=e.isEnterprise;return r.a.createElement("div",{className:"p-navigation_bar__heading"},r.a.createElement(he,{entityType:a?"org":"workspace",dimension:28,entityData:n,customClasses:"flex_none",featureReactMessages:!0}),r.a.createElement("span",{className:"p-navigation_bar__title nudge_bottom_1"},t))}},{key:"renderLogo",value:function(){var e=this.props,t=e.logoLink,n=e.logoAriaLabel,a=e.logoLinkProps,i=r.a.createElement("div",{className:"p-navigation_bar__logo","data-qa":"nav_bar_logo",alt:"Slack"});return t?r.a.createElement(Wt.a,f()({href:t,"aria-label":n,className:"flex_none"},a),i):i}},{key:"render",value:function(){var e=this.props.title;return r.a.createElement("nav",{className:"p-navigation_bar"},r.a.createElement("div",{className:"p-navigation_bar__left"},this.renderLogo(),e&&this.renderTitle()),this.renderCenterContents(),this.renderRightContents())}}]),t}(a.Component);Kt.displayName="NavigationBar",Kt.defaultProps=Gt;var Vt=Kt,zt=(n("ABxf"),new Q.b("workspace_directory")),Yt=(i.b.shape({icon:i.b.object,id:i.b.string,name:i.b.string}).isRequired,i.b.shape({id:i.b.string,is_admin:i.b.bool,is_owner:i.b.bool,is_primary_owner:i.b.bool,profile:i.b.object}).isRequired,i.b.bool,i.b.bool,i.b.bool,i.b.string.isRequired,i.b.string,i.b.string,i.b.object,i.b.func,i.b.func,{isMobileView:!1,displayManageOrgButton:!1,displaySearchBar:!1,prefCompliantMemberName:"",organizationUrl:"",selectedSearchOption:{},onOptionSelected:P.a,onClearHeaderInput:P.a}),Qt=function(e){function t(e){_()(this,t);var n=y()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(D.a)(n,["maybeRenderSearchBar","onSelectOption","onMenuItemSelected","renderUserMenu","renderUserSettings"]),n}return E()(t,e),O()(t,[{key:"onMenuItemSelected",value:function(e){var t=this.props.signoutUrl,n=window.location.origin+"/account/settings";switch(e){case"settings":window.open(n,"_self");break;case"signout":window.open(t,"_self")}return null}},{key:"onSelectOption",value:function(e){this.props.onOptionSelected(e)}},{key:"maybeRenderManageOrganizationButton",value:function(){if(!this.props.displayManageOrgButton)return null;var e=zt.t("Manage Organization",{fallbackHash:"35677e6e3c1751d4a193cc6db0f31a75016c019f"});return r.a.createElement(Fe.d,{"data-qa":"ws_directory_manage_org_button",className:"p-workspace_directory_header__manage_org no_underline nudge_bottom_1",type:"outline",href:"/manage",target:"_blank"},e)}},{key:"maybeRenderSearchBar",value:function(){var e=this.props.selectedSearchOption;return!this.props.displaySearchBar||this.props.isMobileView?null:r.a.createElement("div",{className:"p-workspace_directory_header__search","data-qa":"ws_directory_search_bar"},r.a.createElement(lt,{prepopulatedOption:e,featureZeroWorkspaceOnboarding:!0,membersOnly:!1,containerIdSelector:"directory_mount_point",triggerAction:this.onSelectOption,onClearInput:this.props.onClearHeaderInput}))}},{key:"renderAvatar",value:function(){var e=this.props.user;return r.a.createElement(Ht.e,{"data-qa":"ws_directory_user_menu_trigger",renderMenu:this.renderUserMenu,position:"bottom-right",offsetX:0,offsetY:7.5},r.a.createElement(Fe.c,{"aria-haspopup":!0,className:"p-workspace_directory_header__user_icon"},r.a.createElement(he,{entityType:"member",dimension:36,entityData:e,customClasses:"flex_none cursor_pointer",featureReactMessages:!0})))}},{key:"renderUserMenu",value:function(e){var t=this,n=this.props,a=n.prefCompliantMemberName,i=n.enterprise,o=n.signoutUrl;return r.a.createElement(Ht.f,f()({},e,{menuClassNames:"p-workspace_directory_header__menu","data-qa":"ws_directory_user_menu"}),r.a.createElement(Ht.b,{key:"workspace_directory_user_menu_name",label:r.a.createElement("span",{className:"black"},a),description:zt.t("Account settings",{fallbackHash:"e32707613d1f53b92e6162cc5ddb4a9bb58a2ec6"}),href:"/account/settings",onSelected:function(){return t.onMenuItemSelected("settings")},className:"no_underline"}),r.a.createElement(Ht.d,null),r.a.createElement(Ht.b,{key:"workspace_directory_user_menu_sign_out",label:zt.t("Sign out of {orgName}",{orgName:Object(Q.p)(i.name)}),href:o,onSelected:function(){return t.onMenuItemSelected("signout")},className:"no_underline",danger:!0}))}},{key:"renderUserSettings",value:function(){return r.a.createElement("div",{className:"p-workspace_directory_header__settings"},this.maybeRenderManageOrganizationButton(),this.renderAvatar())}},{key:"render",value:function(){var e=this.props,t=e.enterprise,n=e.isMobileView,a=e.organizationUrl,i=n?zt.t("Directory"):zt.t("Workspace Directory");return r.a.createElement(Vt,{"data-qa":"ws_directory_header",title:i,team:t,isEnterprise:!0,logoAriaLabel:"Slack",logoLink:a,renderRightContents:this.renderUserSettings,renderCenterContents:this.maybeRenderSearchBar})}}]),t}(a.Component);Qt.displayName="WorkspaceDirectoryHeader",Qt.defaultProps=Yt;var Xt=Object(L.b)(function(e,t){var n=t.user,a=t.enterprise,r=void 0===a?{}:a;return{signoutUrl:Object(s.e)(e,"signout_url"),prefCompliantMemberName:Object(W.V)(e,n),organizationUrl:Object(qt.a)(e,r.domain)}})(Qt),Jt=(n("YL49"),i.b.node,i.b.node,i.b.bool,i.b.func,i.b.string,i.b.bool,{title:"",description:"",showCloseButton:!1,onClose:P.a,className:"",isHidden:!0}),Zt=function(e){function t(e){_()(this,t);var n=y()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClose=n.onClose.bind(n),n.onKeyPress=n.onKeyPress.bind(n),n}return E()(t,e),O()(t,[{key:"onClose",value:function(e){this.props.onClose(e)}},{key:"onKeyPress",value:function(e){return e.preventDefault(),13===e.which?this.props.onClose(e):null}},{key:"renderBannerText",value:function(){var e=this.props,t=e.title,n=e.description;return r.a.createElement("div",{className:"p-workspace_directory_banner__text"},r.a.createElement("div",{className:"p-workspace_directory_banner__title"},t),r.a.createElement("span",{className:"p-workspace_directory_banner__description"},n))}},{key:"renderCloseButton",value:function(){var e=this.props.isHidden;return r.a.createElement(Fe.c,{tabIndex:e?-1:0,className:"p-workspace_directory_banner__close_btn",onClick:this.onClose,onKeyPress:this.onKeyPress},r.a.createElement(ne.b,{type:"times"}))}},{key:"render",value:function(){var e=this.props,t=e.showCloseButton,n=e.className,a=F()("p-workspace_directory_banner",n);return r.a.createElement("div",{className:a},this.renderBannerText(),t&&this.renderCloseButton())}}]),t}(a.PureComponent);Zt.displayName="WorkspaceDirectoryBanner",Zt.defaultProps=Jt;var $t=Zt,en=(n("oE+f"),new Q.b("workspace_directory")),tn=(i.b.shape({id:i.b.string,name:i.b.string,domain:i.b.string,icon:i.b.object,locale:i.b.string}).isRequired,i.b.shape({id:i.b.string,name:i.b.string,is_admin:i.b.bool,is_owner:i.b.bool,profile:i.b.object}),i.b.func.isRequired,i.b.func.isRequired,i.b.func,i.b.func.isRequired,i.b.func,i.b.func,i.b.bool,i.b.func,i.b.string,i.b.bool,i.b.func,i.b.bool,i.b.object,i.b.func,i.b.object.isRequired,i.b.bool,{user:{},enqueueToast:P.a,openModal:P.a,closeModal:P.a,allowWorkspaceRequest:!1,showRequestDialog:P.a,launchTeamId:null,displayDirectoryInModal:!0,onClose:P.a,hasSeenOnboardingBanner:!1,queryString:null,setUserPrefByApi:P.a,featureModernRequestWorkspaceDialog:!1}),nn=Object(K.b)(),an=function(e){function t(e){_()(this,t);var n=y()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isMobileView:!1,hasScrolledPastHeaderPane:!1,allWorkspaces:{totalWorkspaces:0,workspaces:[],cursorMark:null,hasApiError:!1,topOffset:0},yourWorkspaces:{totalWorkspaces:0,workspaces:[],cursorMark:null,hasApiError:!1,topOffset:0},searchResults:{totalWorkspaces:0,workspaces:[],cursorMark:null,hasApiError:!1,topOffset:0},dialogWorkspaceDetail:null,selectedOption:null,hideOnboardingBanner:!0,viewingHiddenWorkspace:!1},n.dialog=null,n.headerPaneHeight=null,n.clientHeight=null,n.page=null,n.pageSearch=null,n.listRefs={allWorkspaces:null,yourWorkspaces:null},n.windowScroller=null,n.onboardingBannerHeight=0,n.trackingCode="",Object(D.a)(n,["setPageRef","setPageSearchRef","setHeaderPaneRef","setOnboardingBannerRef","onScroll","onWindowScrollerScroll","onFullscreenModalClose","onResize","openWorkspaceRequestForm","openDialog","closeDialog","onOnboardingBannerDismiss","onWorkspaceLeave","onActionResolve","onActionReject","onSelectOption","onClearHeaderInput","setToastText","setListRef","setWindowScrollerRef","renderWorkspaceCard","fetchSingleMemberToPrepopulate"]),n}return E()(t,e),O()(t,null,[{key:"sortListByWorkspaceName",value:function(e){return Object(N.a)(e,function(e){return e.name})}}]),O()(t,[{key:"componentDidMount",value:function(){this.setIsMobileView(Object(We.c)()),window.addEventListener("resize",this.onResize),this.clientHeight=window.innerHeight,this.setLoadingWorkspaces("allWorkspaces",!0),this.setLoadingWorkspaces("yourWorkspaces",!0),this.props.launchTeamId&&(this.trackingCode="workspace_url",this.fetchTeam(this.props.launchTeamId));var e=this.props.hasSeenOnboardingBanner;this.setHideOnboardingBanner(e),Object(We.k)({trackingCode:this.trackingCode,clogger:this.props.clogger});var t=this.props.queryString&&Object(I.a)(this.props.queryString,"user",null);t&&this.fetchSingleMemberToPrepopulate(t)}},{key:"componentDidUpdate",value:function(e,t){this.headerPane&&(this.headerPaneHeight=this.headerPane.clientHeight);var n=this.getListHeight("yourWorkspaces");n!==this.state.allWorkspaces.topOffset&&this.setListTopOffset({workspaceListKey:"allWorkspaces",topOffset:n}),this.props.hasSeenOnboardingBanner||!this.onboardingBanner||this.onboardingBannerHeight||(this.onboardingBannerHeight=Object(M.findDOMNode)(this.onboardingBanner).clientHeight),!t.hideOnboardingBanner&&this.state.hideOnboardingBanner&&this.windowScroller.updatePosition(),t.selectedOption!==this.state.selectedOption&&this.fetchSearchResults(),this.maybeFetchNextPage(t)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResize)}},{key:"onActionReject",value:function(e){var t=e.node,n=e.err;t&&this.setToastText(t),nn.error("Error with Workspace Action in WorkspaceDirectory - ",n)}},{key:"onActionResolve",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.node,n=e.workspace;if(n)if(n.member){if(this.onWorkspaceJoin({workspace:n}),this.props.displayDirectoryInModal)return this.onFullscreenModalClose()}else n.date_requested_join&&this.onWorkspaceRequested({workspace:n});return t&&this.setToastText(t),this.closeDialog()}},{key:"onClearHeaderInput",value:function(){this.pageSearch&&this.pageSearch.getWrappedInstance&&this.pageSearch.getWrappedInstance().clearInput()}},{key:"onFullscreenModalClose",value:function(){this.dialog&&this.dialog.close(),this.props.onClose&&this.props.onClose()}},{key:"onOnboardingBannerDismiss",value:function(){this.setHideOnboardingBanner(!0),this.props.setUserPrefByApi({pref:"seen_onboarding_banner",value:!0}).catch(function(e){return nn.error("Error setting seen_onboarding_banner user pref",e)})}},{key:"onResize",value:function(){this.clientHeight=window.innerHeight,this.setIsMobileView(Object(We.c)());var e=this.getListHeight("yourWorkspaces");this.setListTopOffset({workspaceListKey:"allWorkspaces",topOffset:e})}},{key:"onScroll",value:function(e){var t=e.currentTarget.scrollTop>=this.headerPaneHeight;t&&this.pageSearch.getWrappedInstance().blur(),t!==this.state.hasScrolledPastHeaderPane&&this.setHasScrolledPastHeaderPane(t)}},{key:"onSearchAgainButtonClick",value:function(){this.pageSearch&&this.pageSearch.getWrappedInstance&&this.pageSearch.getWrappedInstance().onSearchAgainTriggered()}},{key:"onSelectOption",value:function(e){this.setSearchResultsOptions(e)}},{key:"onWindowScrollerScroll",value:function(e){var t=e.scrollTop;this.doInfiniteScrollHandler({scrollTop:t})}},{key:"onWorkspaceJoin",value:function(e){var n=this,a=e.workspace;this.setState(function(e){var r=n.maybeUpsertWorkspaceToSearchResults(e,a),i=e.yourWorkspaces.workspaces,o=Object(w.a)([a],i,"id"),s=e.yourWorkspaces.totalWorkspaces+1;return{yourWorkspaces:f()({},e.yourWorkspaces,{workspaces:t.sortListByWorkspaceName(o),totalWorkspaces:s}),searchResults:f()({},e.searchResults,{workspaces:t.sortListByWorkspaceName(r)})}})}},{key:"onWorkspaceLeave",value:function(e){var n=this,a=e.workspace;this.setState(function(e){var r=n.maybeUpsertWorkspaceToSearchResults(e,a),i=e.yourWorkspaces.workspaces,o=Object(A.a)(i,function(e){return e.id!==a.id}),s=e.yourWorkspaces.totalWorkspaces-1,l=e.allWorkspaces.workspaces,c=Object(w.a)([a],l,"id");return{yourWorkspaces:f()({},e.yourWorkspaces,{workspaces:o,totalWorkspaces:s}),allWorkspaces:f()({},e.allWorkspaces,{workspaces:t.sortListByWorkspaceName(c)}),searchResults:f()({},e.searchResults,{workspaces:t.sortListByWorkspaceName(r)})}},function(){n.closeDialog()})}},{key:"onWorkspaceRequested",value:function(e){var t=e.workspace;t&&this.setState(function(e){var n=[].concat(h()(e.allWorkspaces.workspaces)),a=Object(j.a)(n,function(e){return e.id===t.id});return a<0?null:(n[a]=t,{allWorkspaces:f()({},e.allWorkspaces,{workspaces:n})})})}},{key:"getListHeading",value:function(e){var t=this.state.selectedOption;if("allWorkspaces"===e){var n=this.state.allWorkspaces.totalWorkspaces,a=this.state.yourWorkspaces.totalWorkspaces;return en.t("Browse {numWorkspaces, plural, =1 {# workspace} other {# workspaces}}",{numWorkspaces:Math.max(n-a,0)})}if("yourWorkspaces"===e)return en.t("Your Workspaces");if("searchResults"===e){var i=this.state.searchResults,o=i.loadingWorkspaces,s=i.totalWorkspaces,l=Object(I.a)(t,"selectedOptionData");if(o)return null;if("member"===Object(I.a)(t,"type")){var c=Object(W.K)(l),u=en.t("{memberName} is in {workspaceCount, plural, =1 {# workspace} other {# workspaces}}",{memberName:c,workspaceCount:s});return r.a.createElement(r.a.Fragment,null,r.a.createElement(he,{entityType:"member",dimension:28,entityData:l,customClasses:"margin_right_75",featureReactMessages:!0,featureReactMemberProfileCard:!1}),u)}if("workspace"===Object(I.a)(t,"type")&&0===s)return en.t("No workspaces found matching \u201c{searchQuery}\u201d",{searchQuery:"SEARCH QUERY"});if((!Object(I.a)(t,"type")||l.id===We.b)&&s>0)return en.t("{workspaceCount, plural, =1 {# workspace} other {# workspaces}} matching \u201c{searchQuery}\u201d",{workspaceCount:s,searchQuery:Object(I.a)(l,"displayValue")});if("workspace"===Object(I.a)(t,"type")&&s>0)return en.t("{workspaceCount, plural, =1 {# workspace} other {# workspaces}} matching \u201c{workspaceName}\u201d",{workspaceCount:s,workspaceName:Object(I.a)(t,"selectedOptionData.name")})}return""}},{key:"getListHeight",value:function(e){return this.listRefs[e]?this.listRefs[e].getContentHeight():0}},{key:"getWorkspaceListTopOffset",value:function(e){return this.state[e]?this.state[e].topOffset:0}},{key:"getWorkspacesForList",value:function(e){if("allWorkspaces"===e){var t=this.state.allWorkspaces.workspaces,n=this.state.yourWorkspaces.workspaces;return Object(T.a)(t,n,"id")}return"yourWorkspaces"===e?this.state.yourWorkspaces.workspaces:"searchResults"===e?this.state.searchResults.workspaces:[]}},{key:"setDialogWorkspaceDetail",value:function(e,t){this.setState(function(){return{dialogWorkspaceDetail:e}},t)}},{key:"setHasApiError",value:function(e,t){this.setState(function(n){return p()({},e,f()({},n[e],{hasApiError:t}))})}},{key:"setHasScrolledPastHeaderPane",value:function(e){this.setState(function(){return{hasScrolledPastHeaderPane:e}})}},{key:"setHeaderPaneRef",value:function(e){this.headerPane=e}},{key:"setHideOnboardingBanner",value:function(e){this.setState(function(){return{hideOnboardingBanner:e}})}},{key:"setIsMobileView",value:function(e){this.setState(function(){return{isMobileView:e}})}},{key:"setListRef",value:function(e){var t=e.workspaceListKey,n=e.ref;this.listRefs[t]=n}},{key:"setListTopOffset",value:function(e){var t=e.workspaceListKey,n=e.topOffset;this.setState(function(e){return p()({},t,f()({},e[t],{topOffset:n}))})}},{key:"setLoadingWorkspaces",value:function(e,t){this.setState(function(n){return p()({},e,f()({},n[e],{loadingWorkspaces:t}))})}},{key:"setOnboardingBannerRef",value:function(e){this.onboardingBanner=e}},{key:"setPageRef",value:function(e){this.page=e}},{key:"setPageSearchRef",value:function(e){this.pageSearch=e}},{key:"setSearchResultsOptions",value:function(e){this.setState(function(){return{searchResults:{totalWorkspaces:0,workspaces:[],cursorMark:null,hasApiError:!1,topOffset:0},selectedOption:e}})}},{key:"setToastText",value:function(e){this.props.enqueueToast({element:r.a.createElement(ae.b,{position:"bottom-right",offsetY:50},e)})}},{key:"setViewingHiddenWorkspace",value:function(e){this.setState(function(){return{viewingHiddenWorkspace:e}})}},{key:"setWindowScrollerRef",value:function(e){this.windowScroller=e}},{key:"setWorkspaceFetchOptions",value:function(e,t){var n=t.workspaces,a=void 0===n?[]:n,r=t.totalWorkspaces,i=void 0===r?0:r,o=t.onWorkspaces,s=void 0!==o&&o,l=t.nextCursorMark,c=void 0===l?null:l;this.setState(function(t){return p()({},e,f()({},t[e],{workspaces:a,totalWorkspaces:i,onWorkspaces:s,nextCursorMark:c}))})}},{key:"closeDialog",value:function(){this.props.displayDirectoryInModal||window.history.replaceState({},"","/")}},{key:"doInfiniteScrollHandler",value:function(e){var t=e.scrollTop,n=this.hasFetchedAllWorkspaces("yourWorkspaces")?"allWorkspaces":"yourWorkspaces",a=this.getListHeight("yourWorkspaces");"allWorkspaces"===n&&(a+=this.getListHeight("allWorkspaces"));var r=this.hasScrolledWithinScrollThreshold({scrollTop:t,scrollHeight:a});r&&!this.hasFetchedAllWorkspaces(n)?this.setLoadingWorkspaces(n,!0):!r&&this.hasFetchedAllWorkspaces(n)&&this.setLoadingWorkspaces(n,!1)}},{key:"fetchSearchResults",value:function(){var e=this.state.selectedOption,t=e.selectedOptionData,n=e.type,a={};t&&(this.setLoadingWorkspaces("searchResults",!0),Object(I.a)(t,"id")===We.b?a.searchTerm=t.displayValue:(a.id=t.id,a.type="member"===n?"single_user":"single_workspace"),Object(We.j)({searchType:n,clogger:this.props.clogger}),this.fetchWorkspacesWithArgs(a))}},{key:"fetchSingleMemberToPrepopulate",value:function(e){var t=this;this.props.fetchRawMembersFromAPI({ids:[e]}).then(function(e){var n={selectedOption:{selectedOptionData:e.members[0],type:"member"}};t.setState(n)})}},{key:"fetchTeam",value:function(e){var t=this;return this.props.fetchEnterpriseTeamById({teamId:e}).then(function(e){t.setSearchResultsOptions({selectedOptionData:e,type:"workspace"}),t.openDialog({team:e})}).catch(function(e){t.setViewingHiddenWorkspace(!0),nn.error("Error fetching workspace detail for launch_team_id -",e)})}},{key:"fetchWorkspaces",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.additionalOptions,a=t.workspaceListKey,r=void 0===a?"allWorkspaces":a,i=this.state[r].nextCursorMark;return this.setHasApiError(r,!1),this.props.fetchDirectoryWorkspaces(f()({nextCursorMark:i},n)).then(function(t){var n=t.num_found,a=t.on_workspaces,o=t.items;i&&(o=Object(w.a)(e.state[r].workspaces,o,"id")),e.setWorkspaceFetchOptions(r,{workspaces:o,totalWorkspaces:n,onWorkspaces:a,nextCursorMark:t.next_cursor_mark}),e.setLoadingWorkspaces(r,!1)}).catch(function(t){e.setHasApiError(r,!0),e.setLoadingWorkspaces(r,!1),nn.error("WorkspaceDirectory: Error in FetchWorkspaces -",t)})}},{key:"fetchWorkspacesWithArgs",value:function(e){var t=e.type,n=e.id,a=e.searchTerm,r=this.props.user.id,i=this.state.selectedOption,o=Object(R.a)(i),s=n===r&&o?"yourWorkspaces":"searchResults";return this.fetchWorkspaces({workspaceListKey:s,additionalOptions:{type:t,id:n,searchTerm:a}})}},{key:"hasFetchedAllWorkspaces",value:function(e){return this.state[e].workspaces.length>=this.state[e].totalWorkspaces}},{key:"hasScrolledWithinScrollThreshold",value:function(e){return e.scrollHeight-(e.scrollTop+this.clientHeight)<300}},{key:"maybeFetchNextPage",value:function(e){!e.allWorkspaces.loadingWorkspaces&&this.state.allWorkspaces.loadingWorkspaces&&this.fetchWorkspaces(),!e.yourWorkspaces.loadingWorkspaces&&this.state.yourWorkspaces.loadingWorkspaces&&this.fetchWorkspacesWithArgs({id:this.props.user.id,type:"single_user"})}},{key:"maybeUpsertWorkspaceToSearchResults",value:function(e,t){var n=Object(I.a)(e.searchResults,"workspaces",[]);return Object(S.a)(n,function(e){return t.id===e.id})?Object(w.a)([t],n,"id"):n}},{key:"openDialog",value:function(e){var t=this,n=e.team;this.props.displayDirectoryInModal||window.history.replaceState({},"","/workspace/"+n.id),Object(We.l)({teamId:n.id,trackingCode:this.trackingCode,clogger:this.props.clogger}),this.setDialogWorkspaceDetail(n,function(){t.dialog=t.props.openModal({element:t.renderDialog(),isStackable:!0,name:"find-more-workspaces-info"})})}},{key:"openWorkspaceRequestForm",value:function(){var e=this,t=this.props,n=t.showRequestDialog,a=t.featureModernRequestWorkspaceDialog,i=t.openModal;a?i({element:r.a.createElement(Re,null),isStackable:!0}):n({displayModernToast:function(t){var n=t.type,a=t.errorType,i=t.teamName,o=Object(We.g)({type:n,errorType:a,teamName:i});e.setToastText(r.a.createElement("div",{className:"display_flex"},"success"===n&&r.a.createElement(ne.b,{type:"check-circle-o",className:"margin_right_50 sk_lilypad_green"}),r.a.createElement("span",null,o)))}})}},{key:"renderAllWorkspaces",value:function(e){return this.renderList({listProps:e,workspaceListKey:"allWorkspaces"})}},{key:"renderDialog",value:function(){var e=this.state,t=e.dialogWorkspaceDetail,n=e.displayDirectoryInModal,a=this.props.user,i=Object(I.a)(this.props.queryString,"channel",null),o=Object(I.a)(this.props.queryString,"action",null),s=Object(I.a)(this.props.queryString,"user",null),l=Object(W.wb)(a);return r.a.createElement(Ft,{team:t,displayDirectoryInModal:n,onClose:this.closeDialog,featureZeroWorkspaceOnboarding:!0,onActionResolve:this.onActionResolve,onActionReject:this.onActionReject,onLeaveResolve:this.onWorkspaceLeave,onLeaveReject:this.onActionReject,isGuest:l,channelRedirect:i,postLaunchAction:o,userIdFromURL:s})}},{key:"renderDirectoryInModal",value:function(){var e=this.props.enterprise,t=F()("p-workspace_directory__page","p-workspace_directory__page--modal_view");return r.a.createElement(be.a,{onCancel:this.onFullscreenModalClose,showCancelButton:!1,showGoButton:!1,title:en.t("Workspaces at {orgName}",{orgName:e.name}),position:"fixed",modalBodyClasses:"p-workspace_directory__modal_body",modalClasses:"p-workspace_directory_modal",fullBleedModalBodyContent:!0,withHeader:!0},r.a.createElement("div",{className:t,onScroll:this.onScroll,ref:this.setPageRef},this.renderDirectoryPage()))}},{key:"renderDirectoryLists",value:function(e){var t=this.state.selectedOption,n=e.onChildScroll,a=e.registerChild,i=u()(e,["onChildScroll","registerChild"]),o=f()({onScroll:n,scrollElement:this.page},i);return!!Object(I.a)(t,"selectedOptionData")?r.a.createElement("div",{ref:a},this.renderSearchResults(o)):r.a.createElement("div",{ref:a},this.renderYourWorkspaces(o),this.renderAllWorkspaces(o))}},{key:"renderDirectoryPage",value:function(){var e=this.props.user,t=this.state.viewingHiddenWorkspace,n=this.state.allWorkspaces,a=n.workspaces,i=n.loadingWorkspaces,o=this.state.yourWorkspaces,s=o.workspaces,l=!o.loadingWorkspaces&&Object(R.a)(s),c=!i&&Object(R.a)(a);return l&&Object(W.wb)(e)?this.renderEmptyState({isZeroWorkspaceGuest:!0}):c&&l?this.renderEmptyState({isZeroWorkspaceOrg:!0}):t?this.renderEmptyState({isHiddenWorkspace:!0}):r.a.createElement("div",{className:"p-workspace_directory",id:"workspace_directory"},this.renderWorkspaceDirectoryHeaderPane(),this.renderWorkspaceDirectoryBody())}},{key:"renderEmptyState",value:function(e){var t=this.props.enterprise;return r.a.createElement("div",{className:"p-workspace_directory__empty_state_container"},r.a.createElement(un,f()({enterprise:t},e)))}},{key:"renderInfiniteSpinner",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).renderFullPage,t=F()("p-workspace_directory__spinner",{"p-workspace_directory__spinner--fs":!!e});return r.a.createElement("div",{className:t},r.a.createElement(oe.a,{size:"jumbo",className:"inline_block full_width margin_top_200"}))}},{key:"renderList",value:function(e){var t=this,n=e.listProps,a=e.workspaceListKey,i=this.getWorkspacesForList(a),o=this.state[a].loadingWorkspaces;if("searchResults"===a&&Object(R.a)(i)&&!o)return this.renderSearchEmptyState();if(Object(R.a)(i)&&!o)return null;var s=this.getWorkspaceListTopOffset(a),l=this.getListHeading(a);return r.a.createElement(r.a.Fragment,null,this.renderListHeading(l),r.a.createElement("div",{className:"p-workspace_directory__list"},r.a.createElement(Bt,f()({scrollElement:this.page,workspaces:i,renderWorkspaceCard:this.renderWorkspaceCard,topOffset:s,ref:function(e){return t.setListRef({workspaceListKey:a,ref:e})}},n))),o&&this.renderInfiniteSpinner())}},{key:"renderListHeading",value:function(e){return r.a.createElement("p",{className:"p-workspace_directory__list_title"},e)}},{key:"renderOnboardingBanner",value:function(){if(this.props.hasSeenOnboardingBanner)return null;var e=this.state.hideOnboardingBanner,t=F()("p-workspace_directory__banner","p-workspace_directory__banner--onboarding",{"p-workspace_directory__banner--hidden":e}),n=en.t("Workspaces are where you and your teammates communicate and get work done. To get started, find your team\u2019s workspace.");return r.a.createElement($t,{title:en.t("What is a workspace?"),description:n,className:t,onClose:this.onOnboardingBannerDismiss,isHidden:e,showCloseButton:!0,ref:this.setOnboardingBannerRef})}},{key:"renderSearchEmptyState",value:function(){var e=this,t=this.state,n=t.searchResults,a=t.selectedOption,i=Object(I.a)(a,"selectedOptionData"),o=void 0,s=void 0;if(Object(We.h)(i)){var l=Object(I.a)(n,"totalWorkspaces"),c=Object(I.a)(n,"onWorkspaces"),u=Object(W.K)(i);return It({totalWorkspaces:l,onWorkspaces:c})&&!St({totalWorkspaces:l,onWorkspaces:c})&&(o=en.t("{memberName} hasn\u2019t joined any workspaces",{memberName:u}),s=en.rt("Try <a>searching for someone else</a> on your team, or for a specific workspace",null,function(t){var n=t.text,a=t.key;return"a"===t.tag?r.a.createElement(ie.a,{onClick:function(){return e.onSearchAgainButtonClick()},key:a},n):{text:n}})),St({totalWorkspaces:l,onWorkspaces:c})&&(o=en.t("{memberName} isn\u2019t in a workspace you have access to",{memberName:u}),s=en.rt("Get in touch with {memberName} to be invited to a workspace they\u2019re in, or try <a>searching for someone else</a> on your team.",{memberName:u},function(t){var n=t.text,a=t.key;return"a"===t.tag?r.a.createElement(ie.a,{onClick:function(){return e.onSearchAgainButtonClick()},key:a},n):{text:n}})),r.a.createElement("div",{className:"align_center"},r.a.createElement("p",{className:"p-workspace_directory__list_title inline_flex margin_top_75"},r.a.createElement(he,{entityType:"member",dimension:28,entityData:i,customClasses:"margin_right_75",featureReactMessages:!0,featureReactMemberProfileCard:!1}),o),r.a.createElement("p",{className:"p-workspace_directory__list_empty_state_text"},s))}return o=en.t("No workspaces found matching \u201c{searchTerm}\u201d",{searchTerm:Object(I.a)(i,"displayValue")}),s=en.rt("Try <a>searching for another workspace</a> or searching for a teammate\u2019s workspaces.",null,function(t){var n=t.text,a=t.key;return"a"===t.tag?r.a.createElement(ie.a,{onClick:function(){return e.onSearchAgainButtonClick()},key:a},n):{text:n}}),r.a.createElement("div",{className:"align_center"},r.a.createElement("p",{className:"p-workspace_directory__list_title inline_flex margin_top_75"},o),r.a.createElement("p",{className:"p-workspace_directory__list_empty_state_text"},s))}},{key:"renderSearchResults",value:function(e){return this.renderList({listProps:e,workspaceListKey:"searchResults"})}},{key:"renderTitle",value:function(){var e=this.props.enterprise.name;return r.a.createElement("div",{className:"p-workspace_directory__title"},en.t("Workspaces at {name}",{name:Object(Q.p)(e)}))}},{key:"renderWorkspaceCard",value:function(e){if(Object(R.a)(e))return null;var t=!(Object(B.a)()||Object($.a)()&&Object(ee.b)());return r.a.createElement(kt,{team:e,key:e.id,size:"small",onActionResolve:this.onActionResolve,onActionReject:this.onActionReject,openDialog:this.openDialog,anchorPage:"workspace_directory",doLaunchInNewTab:t,doUpsertJoin:!0})}},{key:"renderWorkspaceDirectoryBody",value:function(){var e=this,t=this.state,n=t.searchResults,a=t.hideOnboardingBanner,i=F()("p-workspace_directory__body",{"p-workspace_directory__body--has_banner":!a}),o={};return this.onboardingBannerHeight&&!a&&(o.transform="translate3d(0, "+this.onboardingBannerHeight+"px, 0)"),this.page?r.a.createElement(r.a.Fragment,null,this.renderOnboardingBanner(),r.a.createElement("div",{"data-js":"workspace_directory_body",className:i,style:o},r.a.createElement(U.a,{scrollElement:this.page,onScroll:this.onWindowScrollerScroll,ref:this.setWindowScrollerRef},function(t){return e.renderDirectoryLists(t)}),!Object(I.a)(n,"loadingWorkspaces")&&this.renderWorkspaceRequestBanner())):null}},{key:"renderWorkspaceDirectoryHeader",value:function(){var e=this.props,t=e.user,n=e.enterprise,a=this.state,i=a.isMobileView,o=a.hasScrolledPastHeaderPane,s=a.selectedOption,l=t.is_admin||t.is_owner;return r.a.createElement(Xt,{enterprise:n,displayManageOrgButton:l,displaySearchBar:this.headerPane&&o,"data-js":"workspace_directory_sticky_header",user:t,isMobileView:i,selectedSearchOption:Object(I.a)(s,"selectedOptionData"),onOptionSelected:this.onSelectOption,onClearHeaderInput:this.onClearHeaderInput})}},{key:"renderWorkspaceDirectoryHeaderPane",value:function(){var e=this.props,t=e.displayDirectoryInModal,n=e.user,a=F()("p-workspace_directory__header_pane",{margin_top_75:t});return r.a.createElement("div",{className:a,"data-js":"workspace_directory_header_pane",ref:this.setHeaderPaneRef},!t&&this.renderTitle(),!Object(W.wb)(n)&&this.renderWorkspaceSearchInput())}},{key:"renderWorkspaceRequestBanner",value:function(){var e=this;if(!this.props.allowWorkspaceRequest)return null;var t=en.rt("Your team might not be using Slack yet. You may ask your admins to <Link>create a new workspace</Link>.",null,function(t){var n=t.text;return r.a.createElement(ie.a,{onClick:e.openWorkspaceRequestForm},n)});return r.a.createElement($t,{title:en.t("Can\u2019t find your workspace?"),description:t,className:"p-workspace_directory__banner p-workspace_directory__banner--workspace_request",onClose:P.a})}},{key:"renderWorkspaceSearchInput",value:function(){var e=this.state.selectedOption;return r.a.createElement("div",{className:"p-workspace_directory__search"},r.a.createElement(lt,{containerIdSelector:"workspace_directory",ref:this.setPageSearchRef,membersOnly:!1,triggerAction:this.onSelectOption,prepopulatedOption:Object(I.a)(e,"selectedOptionData")}))}},{key:"renderYourWorkspaces",value:function(e){return this.renderList({listProps:e,workspaceListKey:"yourWorkspaces"})}},{key:"render",value:function(){var e=this.props.displayDirectoryInModal,t=this.state.allWorkspaces,n=t.workspaces,a=t.loadingWorkspaces,i=this.state.yourWorkspaces,o=i.workspaces,s=i.loadingWorkspaces&&Object(R.a)(o),l=a&&Object(R.a)(n),c=s||l;return e?this.renderDirectoryInModal():r.a.createElement("div",{className:"p-workspace_directory__wrapper"},this.renderWorkspaceDirectoryHeader(),c&&this.renderInfiniteSpinner({renderFullPage:!0}),r.a.createElement("div",{className:"p-workspace_directory__page",onScroll:this.onScroll,ref:this.setPageRef},this.renderDirectoryPage()),r.a.createElement(re.a,null))}}]),t}(a.Component);an.displayName="WorkspaceDirectory",an.defaultProps=tn;var rn={enqueueToast:G.c,openModal:function(){return l.e.apply(void 0,arguments)},closeModal:l.a,fetchRawMembersFromAPI:Z.g,setUserPrefByApi:Y.f,fetchEnterpriseTeamById:J.g,fetchDirectoryWorkspaces:J.f},on=Object(L.b)(function(e,t){var n=t.userId,a=Object(q.g)(e)||{},r=Object(H.d)(e,n),i=Object(z.b)(e,"enterprise_team_creation_request"),o=i&&i.is_enabled&&!Object(W.wb)(r),l=Object(s.l)(e),c=Object(V.j)(e,"seen_onboarding_banner"),u=Object(X.a)({state:e});return{enterprise:a,user:f()({id:n},r),allowWorkspaceRequest:o,displayDirectoryInModal:l,hasSeenOnboardingBanner:c,clogger:u,featureModernRequestWorkspaceDialog:Object(s.m)(e,"feature_modern_request_workspace_dialog")}},rn,null,{areStatePropsEqual:function(e,t){return Object(te.a)(e,t,2)}})(an),sn=new Q.b("workspace_directory"),ln=(i.b.shape({id:i.b.string,name:i.b.string,domain:i.b.string,icon:i.b.object,locale:i.b.string}).isRequired,i.b.bool,i.b.bool,i.b.bool,i.b.string,{isZeroWorkspaceGuest:!1,isZeroWorkspaceOrg:!1,isHiddenWorkspace:!1,directoryUrl:void 0}),cn=function(e){function t(e){_()(this,t);var n=y()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.redirectToDirectory=n.redirectToDirectory.bind(n),n}return E()(t,e),O()(t,[{key:"redirectToDirectory",value:function(){var e=this.props.directoryUrl;window.open(e+"/signin/find-workspaces","_self")}},{key:"renderBody",value:function(){var e=this.props,t=e.isZeroWorkspaceGuest,n=e.isZeroWorkspaceOrg,a=e.isHiddenWorkspace;return t?this.renderZeroWorkspaceGuestBody():n?this.renderZeroWorkspaceOrgBody():a?this.renderHiddenWorkspaceBody():null}},{key:"renderFooter",value:function(){var e=this.props.enterprise;return r.a.createElement(ie.a,{onClick:this.redirectToDirectory,className:"p-workspace_directory_empty_state__footer"},sn.t("View all {orgName} workspaces",{orgName:Object(Q.p)(e.name)}),r.a.createElement(ne.b,{type:"chevron-right",key:"footer-chevron-icon",inline:!0}))}},{key:"renderHeading",value:function(){var e=this.props,t=e.enterprise,n=e.isHiddenWorkspace?sn.t("No workspace found"):sn.t("No available workspaces");return r.a.createElement("span",{className:"p-workspace_directory_empty_state__heading"},r.a.createElement("span",{className:"p-workspace_directory_empty_state__icon"},r.a.createElement(he,{entityType:"org",dimension:28,entityData:t,customClasses:"flex_none",featureReactMessages:!0})),n)}},{key:"renderHiddenWorkspaceBody",value:function(){var e=this.props.enterprise;return r.a.createElement("p",{className:"p-workspace_directory_empty_state__body"},sn.t("Either this workspace doesn\u2019t exist, or you do not have access to it. If you need to be added to a workspace, contact the {orgName} IT team.",{orgName:Object(Q.p)(e.name)}))}},{key:"renderZeroWorkspaceGuestBody",value:function(){var e=this.props.enterprise;return r.a.createElement("p",{className:"p-workspace_directory_empty_state__body"},sn.t("You have a guest account with {orgName}, which means someone needs to invite you to join a workspace. You may want to get in touch with the person who helped you create an account.",{orgName:Object(Q.p)(e.name)}))}},{key:"renderZeroWorkspaceOrgBody",value:function(){var e=this.props.enterprise;return r.a.createElement("p",{className:"p-workspace_directory_empty_state__body"},sn.t("{orgName} doesn\u2019t have any open workspaces that you can join. If you need to be added to a workspace, contact your manager or the {orgName} IT team.",{orgName:Object(Q.p)(e.name)}))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"p-workspace_directory_empty_state"},this.renderHeading(),this.renderBody()),this.props.isHiddenWorkspace&&this.renderFooter())}}]),t}(a.PureComponent);cn.displayName="WorkspaceDirectoryEmptyState",cn.defaultProps=ln;var un=Object(L.b)(function(e,t){var n=t.enterprise;return{directoryUrl:Object(qt.a)(e,n.domain)}})(cn),dn=on,pn=Object(o.b)("Opens the Find More Workspaces modal.",function(e,t,n){Object(s.m)(t(),"feature_sonic_find_more_wksps")&&e(Object(l.e)({element:r.a.createElement(dn,{userId:n}),name:"find-more-workspaces",isStackable:!0}))});pn.meta={name:"openFindMoreWorkspacesModal",key:"actionsOpenFindMoreWorkspacesModalOpenFindMoreWorkspacesModal",description:"Opens the Find More Workspaces modal."},pn.propTypes={userId:i.b.string.isRequired};t.a=pn},KU1P:function(e,t,n){"use strict";var a=n("kxpR"),r=n.n(a),i=n("XHGt"),o=n("aK/h"),s=n("kOzZ"),l=n("oHBb");o.b.node.isRequired,o.b.object.isRequired;function c(e){var t=e.children,n=e.clogger;return r.a.createElement(l.a.Provider,{value:n},t)}c.displayName="CloggerContextProvider",t.a=Object(i.b)(function(e){return{clogger:Object(s.a)({state:e})}})(c)},"Kdk+":function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n("U/ze"),r=Object(a.b)(function(e){return e&&e.flexpaneFocus&&e.flexpaneFocus.focusKey});r.meta={name:"getFocusKey",key:"flexpaneFocusStoreFlexpaneFocusSelectorsGetFocusKey"}},KrOh:function(e,t,n){},KwLZ:function(e,t,n){},L0DF:function(e,t,n){},L5SX:function(e,t,n){},"LAi+":function(e,t,n){"use strict";var a=n("aLpA"),r=void 0;t.a=function(){if(r)return r;var e=Object.keys(a.l).map(function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")});return r=new RegExp("(^|\\s)("+e.join("|")+")(?=$|[\\s|\\?\\.,!])","g")}},LCkN:function(e,t,n){},LFzE:function(e,t,n){},LR7P:function(e,t,n){},LWrH:function(e,t,n){"use strict";var a=n("QbLZ"),r=n.n(a),i=n("jo6Y"),o=n.n(i),s=n("iCc5"),l=n.n(s),c=n("V7oC"),u=n.n(c),d=n("FYw3"),p=n.n(d),m=n("mRg0"),h=n.n(m),b=n("kxpR"),f=n.n(b),g=n("XHGt"),_=n("aK/h"),v=n("g5qt"),y=n("Tc5z"),k=n("x3CK"),O=n("XL7r"),C=n("yHhI"),E=(_.b.object.isRequired,_.b.any.isRequired,_.b.string,_.b.string,{keyboardPref:void 0,keyboardLayout:void 0}),j=function(e){function t(e){l()(this,t);var n=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if(void 0===e.keyboardLayout){var a=function(){if(Object(v.Z)()){var e=Object(v.jb)().currentKeyboardLayout;return Object(k.d)(e)}return null};n.state={legacyKeyboardLayout:a()},Object(v.Z)()&&(n.desktopKeyboardLayoutDisposable=Object(v.rb)(function(){return n.setState(function(){return{legacyKeyboardLayout:a()}})}))}return n}return h()(t,e),u()(t,[{key:"componentWillUnmount",value:function(){this.desktopKeyboardLayoutDisposable&&(this.desktopKeyboardLayoutDisposable.dispose?this.desktopKeyboardLayoutDisposable.dispose():this.props.logger.warn("WITH-KB-LOCALE","Cannot unsubscribe from keyboard layout changes"))}},{key:"render",value:function(){var e=this.props,t=e.keyboardLayout,n=e.WrappedComponent,a=e.keyboardPref,i=(e.logger,o()(e,["keyboardLayout","WrappedComponent","keyboardPref","logger"])),s=(void 0!==t?t:this.state.legacyKeyboardLayout)||a;return"en-US"===s&&(s="us"),f.a.createElement(n,r()({keyboardLocale:s},i))}}]),t}(b.Component);j.displayName="WithKeyboardLocale",j.defaultProps=E,t.a=function(e){return Object(g.b)(function(t){var n=Object(y.f)(t,"keyboardLayout");return{logger:Object(C.a)({state:t}),keyboardPref:Object(O.j)(t,"keyboard"),WrappedComponent:e,keyboardLayout:n&&Object(k.d)(n)}})(j)}},Lpwv:function(e,t,n){},Lts7:function(e,t,n){"use strict";var a=n("XfeM"),r=n("aK/h"),i=n("brL+"),o=n("SZMM"),s=n("Zr7G"),l=n("IEWa"),c=n("yHhI"),u={},d=Object(a.b)("launch workflow builder",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.subPath,r=void 0===a?"":a,d=n.source,p=void 0===d?"":d,m=t();if(Object(l.b)(m)){var h=Object(i.b)(m),b=Object(s.c)({state:m}),f=Object(c.a)({label:"WORKFLOW-BUILDER",state:m}),g="/"===r.charAt(0)?r.slice(1):r,_=u[h];if(_&&_.isClosed&&!_.isClosed())u[h].focus(),b.count(p?"workflow_builder_focused_from_client__"+p:"workflow_builder_focused_from_client"),f.debug("Workflow Builder window focused");else{var v=e(Object(o.e)({pathname:"/workflow-builder/"+h+"/"+g,windowOptions:{height:700,width:1024}}));v.onClose=function(){delete u[h],f.debug("Workflow Builder window closed")},u[h]=v,b.count(p?"workflow_builder_launched_from_client__"+p:"workflow_builder_launched_from_client"),f.debug("Workflow Builder window opened")}}});d.meta={name:"launchWorkflowBuilder",key:"actionsLaunchWorkflowBuilderLaunchWorkflowBuilder",description:"launch workflow builder"},d.propTypes={subPath:r.b.string,source:r.b.string},t.a=d},MIIS:function(e,t,n){"use strict";var a=n("TOkS");t.a=a.a},MYD1:function(e,t,n){"use strict";var a=n("kxpR"),r=n.n(a),i=n("aK/h"),o=n("XHGt"),s=n("/m+M"),l=n("BUzq"),c=n("9cNQ"),u=n("2lnT"),d=n("nNoG"),p=n("hQtm"),m=new d.b("channel_details"),h=(i.b.object.isRequired,i.b.string.isRequired,i.b.func.isRequired,i.b.func.isRequired,function(e){var t=e.pin,n=e.channelId,i=e.unpinMessage,o=e.pinsRemove,c=Object(a.useCallback)(function(){var e={channelId:n,reason:"pins-list-remove"};switch(t.type){case l.a.MESSAGE:e.ts=t.ts;break;case l.a.FILE:e.fileId=t.id;break;case l.a.FILE_COMMENT:e.fileCommentId=t.id}t.type===l.a.MESSAGE?i(e):o(e)},[t,n,i,o]);return Object(s.a)().featureM11nChannelDetails?r.a.createElement(u.b,{title:m.t("Remove pinned item"),goButtonText:m.t("Remove pinned item"),onGo:c},r.a.createElement("p",null,m.t("Are you sure you want to remove this pinned item?")),r.a.createElement(p.a,{pin:t})):null});h.displayName="PinnedItemRemoveConfirm";var b={unpinMessage:function(){return l.q.apply(void 0,arguments)},pinsRemove:function(){return c.c.apply(void 0,arguments)}};t.a=Object(o.b)(null,b)(h)},MjS2:function(e,t,n){"use strict";n.d(t,"c",function(){return x}),n.d(t,"d",function(){return F}),n.d(t,"a",function(){return L}),n.d(t,"b",function(){return D}),n.d(t,"f",function(){return U}),n.d(t,"h",function(){return q}),n.d(t,"g",function(){return H}),n.d(t,"m",function(){return W}),n.d(t,"i",function(){return G}),n.d(t,"k",function(){return K}),n.d(t,"l",function(){return V}),n.d(t,"e",function(){return z}),n.d(t,"j",function(){return Y});var a=n("QbLZ"),r=n.n(a),i=n("NFsq"),o=n("vFlG"),s=n("ifKl"),l=n("kxpR"),c=n.n(l),u=n("nNoG"),d=n("j/30"),p=n("kOzZ"),m=n("t85p"),h=n("lhZz"),b=n("rWF5"),f=n("KXvl"),g=n("hjTk"),_=n("XKj7"),v=n("vRZS"),y=n("Smdl"),k=n("toaU"),O=n("kLJo"),C=n("sDWr"),E=n("g5qt"),j=n("brL+"),S=n("yHhI"),I=n("5mKg"),w=n("od5y"),N=n("IY6O"),T=n("s5Is"),A=new u.b("workspace_directory"),R="ENTERPRISE_DISCOVER_WORKSPACES",P="WORKSPACE_DIR",M=Object(S.b)(),x=function(){return window.innerWidth<=480},F=function(){return window.innerWidth<=1024},L={dialog:"dialog",largeCard:"largeCard",smallCard:"smallCard"},D="SHOW_ALL";function U(e,t){var n=t.context,a=void 0===n?L.smallCard:n,r=t.featureZeroWorkspaceOnboarding,i=void 0===r||r;if(!i)return null;var o=function(e){if(!e)return{};var t=A.t("Requires an invite to join");return{requestCardLarge:A.t("Awaiting admin approval to join"),requestDialog:function(e){return A.t("Requested access on {requestDate}",{requestDate:Object(d.a)(e)})},inviteOnlyWithLockIcon:c.a.createElement("span",null,c.a.createElement(w.a,{type:"lock",key:"private-icon",className:"nudge_bottom_2"}),t),inviteOnly:t}}(i),s=e.date_requested_join,l=e.discoverable;return e.is_member?null:"closed"===l&&s?a===L.largeCard?o.requestCardLarge:o.requestDialog(s):"invite_only"===l?a===L.largeCard?o.inviteOnlyWithLockIcon:o.inviteOnly:null}function B(e,t){var n=document.createElement("a");n.href=t;var a=n.protocol+"//"+e.domain+"."+n.host+"/";return n=null,a}function q(e){return Object(o.a)(e,"profile")||Object(o.a)(e,"enterprise_user")}function H(e){var t=e.type,n=e.teamName,a=e.errorType;if("success"===t)return A.rt("Request to create <strong>{teamName}</strong> sent! You\u2019ll be notified once it\u2019s reviewed.",{teamName:Object(u.p)(n)});var r={name_taken:A.rt("Request failed: The name <strong>{teamName}</strong> is already taken by another workspace.",{teamName:Object(u.p)(n)}),name_is_empty:A.t("Request failed: A name is required."),name_too_long:A.t("Request failed: The name you provided is too long."),reason_too_long:A.t("Request failed: The reason you provided is too long."),unknown:A.rt("Request failed: The response error was <strong>{error}</strong>.",{error:a||"unknown"})};return r[a]||r.unknown}function W(e){if(e)if(Object(b.v)("2.8"))M.info(P,"switchToTeamById - Calling legacyDisplayTeamById('"+e+"') in the SSB."),Object(E.eb)(e);else{M.info(P,"switchToTeamById - SSB < 2.8, fallback to using an iframe to open "+e);var t=document.createElement("iframe"),n="slack://open?team="+e;t.src=n,document.body.appendChild(t),setTimeout(function(){return t.remove()},1e3)}}var G=function(e,t){var n=t.user,a=void 0===n?{}:n,o=t.team,l=void 0===o?{}:o,c=t.anchorPage,u=t.doLaunchInNewTab,d=void 0!==u&&u,S=t.onActionResolve,w=void 0===S?s.a:S,A=t.channelRedirect,x=void 0===A?null:A,F=t.postLaunchAction,L=void 0===F?null:F,D=t.userIdFromURL,U=void 0===D?null:D,q=t.windowOpener;if(Object(y.a)())return function(e,t,n,a){var r=t&&"open_profile"===t&&n,i=r?C.o:k.a,o=r?{teamId:e.id,memberId:n}:{teamId:e.id};if(Object(f.b)()){var s=Object(h.getStateForClientStore)();Object(N.getWorkspacesMeta)(s)[e.id]?Object(O.g)(i,o,{reason:"find-more-workspaces"}):(M.info(P,"fetchAuthAndSetFocusedWorkspace - for team "+e.id),Object(h.dispatchForClientStore)(Object(T.fetchAuthAndSetFocusedWorkspace)({teamId:e.id,avoidRedirectLoops:!1})))}else{var l=Object(O.i)(i,o);a&&(a.location.href=l);var c=Object(f.a)(e.subdomain)||"_team_"+e.id;Object(g.a)(l,c)}}(l,L,U,q),w({workspace:l});var H=Object(m.e)(e,"signin_url"),G=Object(m.e)(e,"is_ssb_browser_signin"),K=Object(p.a)({state:e}),V=B(l,H)+"messages";if(function(e){var t=e.teamId,n=e.anchorPage,a=e.fromWhere,i=void 0===a?"":a,o=e.clogger,s={anchor_page:n,entity_key:"launch_workspace",target_team_id:t,tracking_code:i};o.track(R,r()({},s,{contexts:{ui_context:{action:"click",action_status:1}}}))}({teamId:l.id,anchorPage:c,clogger:K}),G&&(V=B(l,H)+"ssb/signin_redirect"),x&&(V=V+"/"+x),L&&"open_profile"===L&&U&&(V=V+"/team/"+U),Object(m.l)(e)&&Object(j.b)(e)===l.id)return M.info(P,"onWorkspaceLaunch - User has team "+l.id+" to launch currently open. Do nothing and resolve the action (which closes the modal)."),w({workspace:l});if(Object(v.a)()){M.info(P,"onWorkspaceLaunch - Detected that user is logged in via the SSB.");var z=Object(E.lb)();M.info(P,"onWorkspaceLaunch - Successfully called legacyGetSignedInTeamIds and returned "+z);var Y={name:a.name,id:a.id,team_id:l.id,team_name:Object(I.f)(l),team_url:V};if(Object(i.a)(z,l.id)){if(M.info(P,"onWorkspaceLaunch - User already signed into workspace '"+l.id+"'"),Object(i.a)(z,l.id)){var Q=void 0;Object(b.v)("3.0")?(M.info(P,"onWorkspaceLaunch - SSB >= 3.0, attempting to determine if team "+l.id+" has a valid session."),W(l.id),(Q=Object(E.gb)())?Q.hasValidSession?M.info(P,"onWorkspaceLaunch - currentTeam.hasValidSession for "+l.id+". Work done."):(M.info(P,"onWorkspaceLaunch - current session NOT valid. Signing into "+l.id+"."),Object(E.i)(Y)):(M.info(P,"onWorkspaceLaunch - currentTeam not found. Calling didSignIn() for "+l.id+"."),Object(E.i)(Y))):(M.info(P,"onWorkspaceLaunch - SSB < 3.0, cannot determine session state. Calling didSignIn() for "+l.id+"."),Object(E.i)(Y))}}else M.info(P,"onWorkspaceLaunch - calling didSignIn on "+JSON.stringify(Y)),Object(E.i)(Y),z=Object(E.lb)();w({workspace:l}),M.info(P,"onWorkspaceLaunch - Removing team from enterprise excluded team pref "+l.id),Object(_.g)(l.id)}else if(d){if(q)q.location.href=V;else window.open(V,"_blank");w({workspace:l})}else window.location=V;return null};function K(e){var t=e.trackingCode,n={anchor_page:"workspace_directory",tracking_code:void 0===t?"":t};e.clogger.track(R,r()({},n,{contexts:{ui_context:{action:"impression"}}}))}function V(e){var t={entity_key:"workspace_detail",anchor_page:"workspace_directory",target_team_id:e.teamId,tracking_code:e.trackingCode};e.clogger.track(R,r()({},t,{contexts:{ui_context:{action:"impression",action_status:1}}}))}var z=function(e){var t=e.anchorPage,n=e.numSearchResults,a=e.clogger,i={},o={};i.action="impression",i.action_status=n?1:2,i.ui_element="SEARCH_BAR",o.entity_key="search_workspaces",o.anchor_page=t,o.num_search_results=n,a.track(R,r()({},o,{contexts:{ui_context:i}}))},Y=function(e){var t=e.searchType,n={action:"impression",ui_element:"workspace"===(void 0===t?"workspace":t)?"DIRECTORY_SEARCH_FREE":"DIRECTORY_SEARCH_BY_COLLEAGUE"};e.clogger.track(R,r()({},{anchor_page:"workspace_directory",entity_key:"search_workspaces"},{contexts:{ui_context:n}}))}},"Ms/R":function(e,t,n){},Mv5p:function(e,t,n){"use strict";var a=n("oTSI"),r=Object(a.a)(function(){var e=document.createElement("div");e.id="__sb",e.style.overflow="scroll",e.style.width="40px",e.style.height="40px",e.style.position="absolute",e.style.left="-40px",e.innerHTML="&shy;<style>#__sb::-webkit-scrollbar {width:10px;}</style>",document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth==10;return document.body.removeChild(e),t});t.a=r},Mzw9:function(e,t,n){},"N/g+":function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i});var a=n("ROZo"),r=(Object(a.b)("TS.ui.needToBlockAtChannelKeyword"),Object(a.b)("TS.ui.needToShowAtChannelWarning"),Object(a.b)("TS.ui.showVersionInfo")),i=Object(a.b)("TS.ui.teamSelectionChanged")},N391:function(e,t,n){},N5rH:function(e,t,n){},NPpR:function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("cdPG"),p=n("hbEN"),m=n("ifKl"),h=n("nNoG"),b=n("aK/h"),f=n("kxpR"),g=n.n(f),_=n("eglI"),v=n("XHGt"),y=n("tn36"),k=n("od5y"),O=n("XLFM"),C=n("Go8C"),E=n("YYb+"),j=n("7ARk"),S=n("Smdl"),I=n("x91h");var w=n("V18M"),N=(n("Tjgr"),n("RX/a")),T=new h.b("search"),A=(b.b.bool.isRequired,b.b.bool.isRequired,b.b.bool,b.b.bool.isRequired,b.b.string.isRequired,b.b.bool,b.b.func,b.b.func,b.b.func,b.b.func,b.b.func.isRequired,b.b.func.isRequired,b.b.number,{autoFocus:!1,queryIsUserGenerated:!1,onBlur:m.a,onEnter:m.a,onEscape:m.a,onFocus:m.a,autocompleteSelectedIndex:void 0}),R=null,P=0,M=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.texty=null,Object(y.a)(n,["onClickClear","getTextyString","onEnter","onUserQueryChange","setTextyRef","updateDisplayQuery"]),n.queryHasChanged=!1,n.queryHasBeeenSubmitted=!1,n.onUserInput=Object(p.a)(n.onUserInput,100),n.placeholderCopy=n.lazyInitializeShuffledPlaceholderCopy(),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.autoFocus,n=e.usePrimarySearch,a=e.isSearchAutocompleteOpen;if(t||n&&a){var r=window._searchAutocompleteCatch;if(r){delete window._searchAutocompleteCatch;var i=r.value;this.texty.value(this.texty.value()+i),r.parentNode.removeChild(r)}this.texty.setCursorAtEnd()}}},{key:"shouldComponentUpdate",value:function(e){return this.props.usePrimarySearch&&e.isSearchAutocompleteOpen!==this.props.isSearchAutocompleteOpen||this.props.displayQuery!==e.displayQuery||this.props.autocompleteSelectedIndex!==e.autocompleteSelectedIndex}},{key:"componentDidUpdate",value:function(e){this.texty&&this.props.usePrimarySearch&&!e.isSearchAutocompleteOpen&&this.props.isSearchAutocompleteOpen&&this.texty.focus(),this.props.queryIsUserGenerated||e.displayQuery===this.props.displayQuery||this.updateDisplayQuery()}},{key:"onUserInput",value:function(){var e=this;this.queryHasChanged?(this.queryHasChanged=!1,this.props.searchInputChanged({textyString:this.getTextyString()}).then(function(){e.queryHasBeeenSubmitted&&(e.props.onEnter(),e.queryHasBeeenSubmitted=!1)})):this.queryHasBeeenSubmitted&&(this.props.onEnter(),this.queryHasBeeenSubmitted=!1)}},{key:"onUserQueryChange",value:function(){this.queryHasChanged=!0,this.onUserInput()}},{key:"onEnter",value:function(){null!==this.props.autocompleteSelectedIndex&&(this.queryHasBeeenSubmitted=!0,this.onUserInput())}},{key:"onClickClear",value:function(){this.props.clearSearchInput(),this.texty&&this.texty.focus()}},{key:"setTextyRef",value:function(e){var t=!(!e||!e.getWrappedInstance);this.texty=t?e.getWrappedInstance():e}},{key:"getTextyString",value:function(){return this.texty?this.texty.value().replace(/<@([A-Z0-9a-z]+)\|([^>]+)>/g,function(e,t,n){return"<@"+t+"|"+Object(I.a)(n)+">"}):this.props.displayQuery}},{key:"lazyInitializeShuffledPlaceholderCopy",value:function(){var e=[T.t("Search for comments, asides, eurekas, and more"),T.t("Search for messages, replies, or even insightful asides"),T.t("Search for files, facts, figures, and stats"),T.t("Search for files, for people, for half-remembered fragments of conversation"),T.t("Search for a missing link"),T.t("Search for whatever; let\u2019s find it together"),T.t("Search discussions, directories, data, and more"),T.t("Search messages, files, around corners, under rugs, etc."),T.t("Search all across Slack"),T.t("Search far and wide"),T.t("Search high and low"),T.t("Search the Log of All Conversation and Knowledge"),T.t("Search because it\u2019s faster than scrolling"),T.t("Type what you want to search for. Slack will do the rest."),T.t("What do you want to search for today?"),T.t("Surely that\u2019s around here somewhere\u2026"),T.t("You\u2019re digging in the right place"),T.t("We\u2019re all searching, in a way. You can search Slack, specifically, here."),T.t("Input search. Beep boop."),T.t("Search for something. Anything. You have the window open now anyway."),T.t("Delve into your archives, seize upon the answers. Rejoice.")];return null===R&&(R=Object(d.a)(e.map(function(e,t){return t}))),P=(P+1)%R.length,e[R[P]]}},{key:"focusTexty",value:function(){this.texty&&this.texty.focus()}},{key:"updateDisplayQuery",value:function(){this.texty&&this.props.displayQuery!==this.getTextyString()&&this.texty.value(this.props.displayQuery)}},{key:"render",value:function(){var e=T.t("Search"),t=this.props.displayQuery?"c-search__input_box__clear":"c-search__input_box__clear c-search__input_box__clear__hidden",n={autocomplete:"list",owns:"c-search_autocomplete__suggestion_list",expanded:!0,activedescendant:"number"==typeof this.props.autocompleteSelectedIndex?Object(N.b)(this.props.autocompleteSelectedIndex):void 0},a=void 0;return a=this.placeholderCopy?this.placeholderCopy:T.t("Search messages, files, and channels",{fallbackHash:"2c741ca32c78642194b2b88f355b5ebb8d3ea849"}),g.a.createElement("div",{className:"c-search__input_box","data-qa":"search_input_box"},g.a.createElement(k.b,{type:"search-medium",className:"c-search__input_box__icon"}),g.a.createElement(_.default,{className:"c-search__input_box__input",modules:{tabcomplete:{completers:[]},keyboard:{useFormattingCommands:!1}},ref:this.setTextyRef,ariaLabel:e,ariaDescribedBy:"footer-instructions",unsafeAriaProps:n,initialText:this.props.displayQuery,placeholder:a,onFocus:this.props.onFocus,onBlur:this.props.onBlur,onEnter:this.onEnter,onTextChange:this.onUserQueryChange,onEscape:this.props.onEscape,isSingleLine:!0,focusOnMount:this.props.autoFocus,useLegacyCreate:!this.props.isSonic,isJumbomojiEnabled:!1,showMentionTooltips:!1,enableBroadcastKeywords:!1,useFocusRing:!1,"data-qa":"focusable_search_input"}),g.a.createElement(O.c,{className:t,onClick:this.onClickClear,label:T.t("Clear"),"data-qa":"search_input_clear"},T.t("Clear")))}}]),t}(f.Component);M.displayName="SearchInputBox",M.defaultProps=A;var x={searchInputChanged:function(){return C.f.apply(void 0,arguments)},clearSearchInput:function(){return j.a.apply(void 0,arguments)}};t.a=Object(v.b)(function(e){return{usePrimarySearch:Object(w.a)(e),isSearchAutocompleteOpen:Object(E.e)(e),displayQuery:Object(C.b)(e),queryIsUserGenerated:Object(C.c)(e),autocompleteSelectedIndex:Object(E.c)(e),isSonic:Object(S.a)(e)}},x,null,{withRef:!0})(M)},NPry:function(e,t,n){},NYp8:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=n("kxpR"),r=n("UF3u");function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Object(a.useRef)(),i=Object(a.useRef)(),o=Object(a.useRef)();Object(r.a)(n.current,t)||(n.current=t,i.current=e,i.current()),Object(a.useEffect)(function(){return function e(){var t=60-(new Date).getSeconds();t<5&&(t=5),o.current=setTimeout(function(){i.current(),e()},1e3*t)}(),function(){clearTimeout(o.current)}},[])}},Nc5J:function(e,t,n){"use strict";var a=n("XfeM"),r=n("S3eg"),i=n("vmJv"),o=n("zRJ2"),s=Object(a.b)("Switches to the All Unreads view",function(e,t){e("Punreads"===Object(i.a)(t())?Object(o.b)():Object(r.a)({id:"Punreads"}))});s.meta={name:"openUnreadsView",key:"actionsOpenUnreadsViewOpenUnreadsView",description:"Switches to the All Unreads view"},t.a=s},O6kw:function(e,t,n){"use strict";var a=n("c8Bs"),r=n("Z0Cl"),i=n("wBxZ"),o=n("gSGL"),s=n("kxpR"),l=n.n(s),c=n("aK/h"),u=n("XfeM"),d=n("dhvi"),p=n("h9PG"),m=n("8Duq"),h=n("P9LH"),b=n("aLpA"),f=n("syB0"),g=n("ifKl"),_=n("fL8H"),v=n("nNoG"),y=new v.b("files");function k(e){var t=e.proceedToNextDialog,n=e.disableFileUploadsPref,a=y.t("Uploads disabled"),r="";"disable_all"===n&&(r=y.t("At the request of your administrator, file uploads have been disabled on this workspace.")),"disable_all_except_images"===n&&(r=y.t("At the request of your administrator, only images can be uploaded to this workspace."));return l.a.createElement(_.a,{title:a,onGo:function(){return Object(f.a)(function(){t()})}},l.a.createElement("p",null,r))}k.displayName="FileUploadsDisabledAlert",k.defaultProps={proceedToNextDialog:g.a,disableFileUploadsPref:""};var O=k,C=new v.b("file_upload");function E(e){var t=e.proceedToNextDialog,n=e.excludedFiles,a=e.goodFiles,r=void 0,i=void 0,o=void 0,s=void 0,c=void 0,u=void 0,d="",p=n.length+a.length;n.length&&(r=[],s="",u="",r=n.map(function(e){return l.a.createElement("li",{key:e.name},l.a.createElement("strong",null,e.name))}),n.length>1?(i=n.length===p?C.t("All files unsupported"):C.t("Some files unsupported"),c=C.t("Try uploading a .zip version of these files instead."),s=l.a.createElement("ul",null,r)):1===n.length&&(i=C.t("File unsupported"),c=C.t("Try uploading a .zip version of this file instead.")),a.length>1?u=C.t("(Don\u2019t worry, your other files are next.)"):1===a.length&&(u=C.t("(Don\u2019t worry, your other file is next.)")),o=1===n.length?C.rt("Sorry, {excluded_file} is a type of file not supported by Slack",{excluded_file:l.a.createElement("strong",null,n[0].name)}):n.length===p?C.t("Sorry, none of those file types are supported by Slack."):C.t("Sorry, some of those file types are not supported by Slack."),d=l.a.createElement("div",null,l.a.createElement("p",null,o),s,l.a.createElement("p",null,c),l.a.createElement("p",null,u)));return l.a.createElement(_.a,{title:i,onGo:function(){Object(f.a)(function(){t()})}},d)}E.displayName="FileUploadUnsupportedAlert",E.defaultProps={proceedToNextDialog:g.a,goodFiles:[],excludedFiles:[]};var j=E,S=n("Lnf+"),I=new v.b("file-upload"),w={SINGLE:"single",MULTIPLE:"multiple",ALL:"all"};function N(e){var t=e.type,n=e.proceedToNextDialog,a=I.t("File too large"),r="";r=t===w.ALL?I.t("All of those files are too large and cannot be uploaded. The limit is {limit}.",{limit:Object(S.a)(b.Y)}):t===w.SINGLE?I.t("That file is too large and cannot be uploaded. The limit is {limit}.",{limit:Object(S.a)(b.Y)}):I.t("We\u2019ll upload what we can, but one or more of those files is too large and cannot be uploaded. The limit is {limit}.",{limit:Object(S.a)(b.Y)});var i=t===w.MULTIPLE?function(){Object(f.a)(function(){n()})}:g.a;return l.a.createElement(_.a,{title:a,onGo:i},l.a.createElement("p",null,r))}N.displayName="FileUploadSizeAlert",N.defaultProps={type:w.SINGLE,proceedToNextDialog:g.a};var T=N,A=n("ns4K"),R=n("qafc"),P=new v.b("multi_file_upload"),M=Object(u.b)("renders a toast with error message for uploading too many files",function(e){var t=P.t("You can only upload {count, plural, =1 {# file} other {# files}} at a time.",{count:b.z}),n=l.a.createElement(R.b,{icon:"warning",iconClassName:"sk_reddish_orange"},l.a.createElement("span",null,t));setTimeout(function(){return e(Object(A.c)({element:n}))},500)});M.meta={name:"renderFileLimitToast",key:"componentsMultiFileUploadUtilityRenderFileLimitToastRenderFileLimitToast",description:"renders a toast with error message for uploading too many files"};var x=M,F=Object(u.b)("filters invalid files before they can be uploaded",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=n.selectedFiles,c=n.channelId,u=n.threadTs;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dispatch,n=e.getState,i=e.files;if(!i)return Promise.resolve();var o=Object(a.a)(i,function(e){return Object(h.F)(e)});return new Promise(function(e){var a=Object(p.a)(n(),"disable_file_uploads");if("disable_all"!==a||o){if("disable_all_except_images"===a&&!o){var s=Object(r.a)(i,function(e){return Object(h.N)(e)});if(s.length!==i.length)return void t(Object(d.e)({element:l.a.createElement(O,{disableFileUploadsPref:a,proceedToNextDialog:function(){return e(s)}}),isStackable:!0}))}e(i)}else t(Object(d.e)({element:l.a.createElement(O,{disableFileUploadsPref:a,proceedToNextDialog:function(){return e()}}),isStackable:!0}))})}({dispatch:e,getState:t,files:s}).then(function(t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dispatch,n=e.files;return n?new Promise(function(e){Object(h.S)(n,function(n){n.excludedFiles.length?t(Object(d.e)({element:l.a.createElement(j,{goodFiles:n.goodFiles,excludedFiles:n.excludedFiles,proceedToNextDialog:function(){return e(n.goodFiles)}}),isStackable:!0})):e(n.goodFiles)})}):Promise.resolve()}({dispatch:e,files:t})}).then(function(t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dispatch,n=e.files;return n?new Promise(function(e){var a=n.filter(function(e){return Object(o.a)(e)||void 0===e.size||e.size<=b.Y});if(a.length<n.length)return 1===n.length?(t(Object(d.e)({element:l.a.createElement(T,{type:w.SINGLE}),isStackable:!0})),void e()):a.length?void t(Object(d.e)({element:l.a.createElement(T,{type:w.MULTIPLE,proceedToNextDialog:function(){return e(a)}}),isStackable:!0})):(t(Object(d.e)({element:l.a.createElement(T,{type:w.ALL}),isStackable:!0})),void e());e(a)}):Promise.resolve()}({dispatch:e,files:t})}).then(function(n){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dispatch,n=e.getState,a=e.files,r=e.channelId,o=e.threadTs;if(!a)return Promise.resolve();var s=n(),l=Object(m.f)(s,{channelId:r,threadTs:o})||[];if(l.length+a.length>b.z){t(x());var c=b.z-l.length,u=Object(i.a)(a,c);return Promise.resolve(u)}return Promise.resolve(a)}({dispatch:e,getState:t,files:n,channelId:c,threadTs:u})})});F.meta={name:"filterFilesForUpload",key:"actionsFilterFilesForUploadFilterFilesForUpload",description:"filters invalid files before they can be uploaded"},F.propTypes={selectedFiles:c.b.array.isRequired,channelId:c.b.string,threadTs:c.b.string};t.a=F},OISv:function(e,t,n){"use strict";var a=n("QbLZ"),r=n.n(a),i=n("iCc5"),o=n.n(i),s=n("V7oC"),l=n.n(s),c=n("FYw3"),u=n.n(c),d=n("mRg0"),p=n.n(d),m=n("ifKl"),h=n("kxpR"),b=n.n(h),f=n("aK/h"),g=n("TSYQ"),_=n.n(g),v=n("b7Ww"),y=n("1Uzj"),k=n("RhZ7"),O=n("TOh8"),C=n("0dpy"),E=n("BRQ/"),j=n("0gqo"),S=n("rUi3"),I=n("8CL7"),w=n("VrmM"),N=n("Aeia"),T=n("gl+W"),A=(n("XThT"),n("bj+V"),Object(y.a)(v.a)),R=(f.b.object.isRequired,f.b.string,f.b.bool,f.b.func,f.b.bool,f.b.bool,f.b.bool,f.b.string,f.b.string,f.b.string,{className:void 0,showSender:!0,onFileClick:m.a,timestampClickable:!0,timestampFull:!0,timestampRelative:!1,flexOrigin:"activity",flexOriginId:void 0,blocksContainerContext:void 0}),P=function(e){function t(){return o()(this,t),u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p()(t,e),l()(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.msg,a=e.showSender,i=e.onFileClick,o=e.timestampClickable,s=e.timestampFull,l=e.timestampRelative,c=e.flexOrigin,u=e.flexOriginId,d=e.blocksContainerContext,p=a&&b.a.createElement("div",{className:"c-message_kit__condensed_message_header"},b.a.createElement(k.a,{msg:n,size:16}),"\xa0",b.a.createElement(O.a,{msg:n,className:"c-message_kit__condensed_message_sender"}),b.a.createElement(C.a,{msg:n,clickable:o,full:s,relative:l}));return b.a.createElement(T.a,{className:_()("c-message_kit__message","c-message_kit__condensed_message",t)},p,b.a.createElement(I.a,{className:"c-message_kit__condensed_message_text",msg:n,isSingleLine:!0}),b.a.createElement(w.a,{msg:n,blockLimit:1,blocksContainerContext:d}),b.a.createElement(N.b,{msg:n,renderFile:function(e){return b.a.createElement(A,r()({},e,{className:_()("c-message_kit__condensed_message_file",{"c-message_kit__condensed_message_file--isolated":!n.text}),onClick:i}))}}),b.a.createElement("div",{className:"c-message_kit__condensed_message_meta"},b.a.createElement(E.a,{msg:n,className:"c-message_kit__condensed_message_reactions"}),b.a.createElement(j.a,{msg:n,flexOrigin:c,flexOriginId:u})),b.a.createElement(S.a,{msg:n,flexOrigin:c,flexOriginId:u}))}}]),t}(h.PureComponent);P.displayName="CondensedMessage",P.defaultProps=R,t.a=P},OX5w:function(e,t,n){"use strict";n.d(t,"h",function(){return d}),n.d(t,"f",function(){return p}),n.d(t,"g",function(){return m}),n.d(t,"e",function(){return h}),n.d(t,"d",function(){return f}),n.d(t,"j",function(){return g}),n.d(t,"i",function(){return _}),n.d(t,"c",function(){return v}),n.d(t,"b",function(){return y});var a=n("QbLZ"),r=n.n(a),i=n("AFNo"),o=n("1YQg"),s=n("k55U"),l=n("vRZS"),c=n("gn/G"),u=n("+yrr"),d=Object(i.a)("Update part or all of the call");d.meta={name:"update",key:"appCallsReduxActiveCallStoreUpdate",description:"Update part or all of the call"};var p=Object(i.a)("Update the active call token");p.meta={name:"setServerToken",key:"appCallsReduxActiveCallStoreSetServerToken",description:"Update the active call token"};var m=Object(i.a)("Update the elapsed call time");m.meta={name:"tickCallTime",key:"appCallsReduxActiveCallStoreTickCallTime",description:"Update the elapsed call time"};var h=Object(i.a)("Store gleaned contextual information from the url");h.meta={name:"setInitialContext",key:"appCallsReduxActiveCallStoreSetInitialContext",description:"Store gleaned contextual information from the url"};var b=Object(i.d)({},{hasJoined:!1,hasSelfConnected:!1,hasRemotePeerConnected:!1,hasVideoBeenEnabled:!1,elapsedDisplayTime:Object(c.a)(0)},{storeKey:"activeCall",persistenceEnabled:!1}).on(h,function(e,t){var n=t.callOrConversationId,a=t.inviterUserId,i=Object(o.i)(n);return r()(r()({},e),{id:i?n:void 0,conversationId:i?void 0:n,incomingInviterUserId:a,incomingInviteResponse:Object(l.a)()?void 0:o.c.Accept})}).on(d,function(e,t){return r()(r()({},e),t)}).on(m,function(e){return e.callStartedTimestamp?r()(r()({},e),{elapsedDisplayTime:Object(c.a)(Date.now()-1e3*e.callStartedTimestamp)}):e}).on(p,function(e,t){var n=t.token,a=t.tokenExpiry;return e.server?r()(r()({},e),{server:r()(r()({},e.server),{token:n,tokenExpiry:a})}):(Object(s.f)("Cannot set server token without a server"),e)}).on(u.O,function(e,t){return r()(r()({},e),{hasVideoBeenEnabled:e.hasVideoBeenEnabled||!!(t.isCameraEnabled||Object(u.D)(t)&&t.isScreenshareEnabled),hasSelfConnected:e.hasSelfConnected||!(!Object(u.D)(t)||!t.isConnected)})}).on(u.I,function(e,t){return r()(r()({},e),{hasRemotePeerConnected:e.hasRemotePeerConnected||!!t.isConnected})}).on(u.J,function(e,t){return r()(r()({},e),{hasVideoBeenEnabled:e.hasVideoBeenEnabled||!!t.isScreenshareEnabled})});t.a=b;var f=function(e){return!!e.activeCall.incomingInviterUserId&&!e.activeCall.incomingInviteResponse},g=function(e){return!!e.activeCall.incomingInviterUserId},_=function(e){return!!e.activeCall.conversationId&&Object(o.l)(e.activeCall.conversationId)},v=function(e){return e.activeCall.id},y=function(e){return e.activeCall.hasSelfConnected&&e.activeCall.hasRemotePeerConnected}},OrkY:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"route",function(){return He.cc}),n.d(a,"error",function(){return We.a}),n.d(a,"accessibility",function(){return He.a}),n.d(a,"activity",function(){return He.b}),n.d(a,"allThreads",function(){return He.e}),n.d(a,"allUnreads",function(){return He.f}),n.d(a,"appsBrowser",function(){return He.p}),n.d(a,"appsInChannels",function(){return He.q}),n.d(a,"bootData",function(){return He.u}),n.d(a,"canInteract",function(){return He.w}),n.d(a,"cfm",function(){return He.x}),n.d(a,"channelLoading",function(){return He.B}),n.d(a,"channelSidebar",function(){return He.E}),n.d(a,"channelSidebarFolders",function(){return He.F}),n.d(a,"channelSections",function(){return He.D}),n.d(a,"channelPrefixes",function(){return He.C}),n.d(a,"checkoutFlow",function(){return He.I}),n.d(a,"connectivity",function(){return He.M}),n.d(a,"consistency",function(){return He.N}),n.d(a,"customEmoji",function(){return He.O}),n.d(a,"deletedMessages",function(){return He.Q}),n.d(a,"desktop",function(){return He.R}),n.d(a,"dnd",function(){return He.T}),n.d(a,"docs",function(){return He.U}),n.d(a,"drafts",function(){return He.W}),n.d(a,"draftPendingFileIds",function(){return He.V}),n.d(a,"ekmChanges",function(){return He.X}),n.d(a,"ephemeralMessages",function(){return He.cb}),n.d(a,"expandables",function(){return He.db}),n.d(a,"experiments",function(){return He.eb}),n.d(a,"fileRefresh",function(){return He.ib}),n.d(a,"fileUpload",function(){return He.jb}),n.d(a,"filesFlexpane",function(){return He.lb}),n.d(a,"flannelUrl",function(){return He.mb}),n.d(a,"globalNav",function(){return He.ob}),n.d(a,"help",function(){return He.pb}),n.d(a,"imports",function(){return He.rb}),n.d(a,"inbox",function(){return He.sb}),n.d(a,"incrementalBoot",function(){return He.tb}),n.d(a,"inlineFilePreviews",function(){return He.ub}),n.d(a,"emailRender",function(){return He.Y}),n.d(a,"invites",function(){return He.vb}),n.d(a,"lastUsedSlashCommand",function(){return He.xb}),n.d(a,"memberDirectoryFlexpane",function(){return He.zb}),n.d(a,"messageEdit",function(){return He.Db}),n.d(a,"messagePane",function(){return He.Eb}),n.d(a,"messagePaneBanner",function(){return He.Fb}),n.d(a,"teamMenuCTA",function(){return He.rc}),n.d(a,"atMentionInvite",function(){return He.r}),n.d(a,"modal",function(){return He.Ib}),n.d(a,"navigationHistory",function(){return He.Jb}),n.d(a,"noop",function(){return He.Kb}),n.d(a,"onboarding",function(){return He.Mb}),n.d(a,"openPopoversCount",function(){return He.Nb}),n.d(a,"pendingFiles",function(){return He.Rb}),n.d(a,"pendingFileUploads",function(){return He.Qb}),n.d(a,"pendingOpenChannel",function(){return He.Sb}),n.d(a,"persistedApiCalls",function(){return He.Tb}),n.d(a,"prefs",function(){return He.Vb}),n.d(a,"presence",function(){return He.Wb}),n.d(a,"pricingPlans",function(){return He.Xb}),n.d(a,"reactionsToast",function(){return He.ac}),n.d(a,"searchAutocomplete",function(){return He.dc}),n.d(a,"searchChannelsUsers",function(){return He.ec}),n.d(a,"searchInputBox",function(){return He.gc}),n.d(a,"searchInProductEducation",function(){return He.fc}),n.d(a,"searchResults",function(){return He.hc}),n.d(a,"searchSession",function(){return He.ic}),n.d(a,"searchUi",function(){return He.jc}),n.d(a,"socket",function(){return He.nc}),n.d(a,"stars",function(){return He.oc}),n.d(a,"pins",function(){return He.Ub}),n.d(a,"tabs",function(){return He.pc}),n.d(a,"teamCreation",function(){return He.qc}),n.d(a,"threadsFlexpane",function(){return He.uc}),n.d(a,"threadSub",function(){return He.tc}),n.d(a,"toast",function(){return He.vc}),n.d(a,"topics",function(){return He.wc}),n.d(a,"typing",function(){return He.xc}),n.d(a,"uiSerialization",function(){return He.yc}),n.d(a,"unfurls",function(){return He.zc}),n.d(a,"unreadCounts",function(){return He.Ac}),n.d(a,"unreadsView",function(){return He.Bc}),n.d(a,"userGroupsFlexpane",function(){return He.Ec}),n.d(a,"usersCounts",function(){return He.Fc}),n.d(a,"workspace",function(){return He.Jc}),n.d(a,"welcomePlace",function(){return He.Gc}),n.d(a,"enablePopupsBanner",function(){return He.ab}),n.d(a,"whatsNew",function(){return He.Hc}),n.d(a,"composerToolbarUI",function(){return He.L}),n.d(a,"recentlySharedFilesPicker",function(){return He.bc}),n.d(a,"channelBrowser",function(){return He.z}),n.d(a,"flexpaneFocus",function(){return He.nb}),n.d(a,"clientTheme",function(){return He.J}),n.d(a,"adminMembers",function(){return He.c}),n.d(a,"allCalls",function(){return He.d}),n.d(a,"appActions",function(){return He.g}),n.d(a,"appGlobalActions",function(){return He.j}),n.d(a,"channelActions",function(){return He.y}),n.d(a,"appHomes",function(){return He.k}),n.d(a,"appPermissions",function(){return He.l}),n.d(a,"appProfiles",function(){return He.m}),n.d(a,"appViews",function(){return He.n}),n.d(a,"appCollaborators",function(){return He.h}),n.d(a,"blockKitModals",function(){return He.s}),n.d(a,"apps",function(){return He.o}),n.d(a,"blocks",function(){return He.t}),n.d(a,"bots",function(){return He.v}),n.d(a,"channelHistory",function(){return He.A}),n.d(a,"channels",function(){return He.G}),n.d(a,"channelsMeta",function(){return He.H}),n.d(a,"customizeEmoji",function(){return He.P}),n.d(a,"developerActions",function(){return He.S}),n.d(a,"emoji",function(){return He.Z}),n.d(a,"environment",function(){return He.bb}),n.d(a,"externalTeamIds",function(){return He.gb}),n.d(a,"externalTeamsChannels",function(){return He.hb}),n.d(a,"files",function(){return He.kb}),n.d(a,"idpGroups",function(){return He.qb}),n.d(a,"lastNetworkSend",function(){return He.wb}),n.d(a,"memberCounts",function(){return He.yb}),n.d(a,"members",function(){return He.Ab}),n.d(a,"membership",function(){return He.Bb}),n.d(a,"membershipOrdered",function(){return He.Cb}),n.d(a,"messages",function(){return He.Gb}),n.d(a,"messagesMeta",function(){return He.Hb}),n.d(a,"notifications",function(){return He.Lb}),n.d(a,"paidFeatures",function(){return He.Pb}),n.d(a,"reactions",function(){return He.Zb}),n.d(a,"sharedChannelInvites",function(){return He.lc}),n.d(a,"slashCommand",function(){return He.mc}),n.d(a,"selfTeamIds",function(){return He.kc}),n.d(a,"teams",function(){return He.sc}),n.d(a,"userGroups",function(){return He.Dc}),n.d(a,"userGroupMembership",function(){return He.Cc}),n.d(a,"window",function(){return He.Ic}),n.d(a,"appConfig",function(){return He.i}),n.d(a,"orgApps",function(){return He.Ob}),n.d(a,"commsImpact",function(){return He.K}),n.d(a,"promo",function(){return He.Yb}),n.d(a,"externalDirectory",function(){return He.fb});var r=n("7Kh5"),i=n("fFfO"),o=n("oTSI"),s=n("YjHT"),l=n("yHhI"),c=n("quKg"),u=n("DlLn"),d=n("QbLZ"),p=n.n(d),m=n("cErB"),h=n("BNw7"),b=n("t85p"),f=n("Gogr");function g(){var e=Object(f.c)("teams"),t=Object(f.c)("prevTeams");return p()({},t,e)}var _=n("lhZz"),v=n("8Az7"),y=n("KXvl"),k=n("qe1s"),O=n("HuaI"),C=n("IY6O"),E=n("kLJo"),j=n("dhvi"),S=n("/Rx2"),I=n("BeG2"),w=n("rWF5"),N=n("Zr7G");function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.avoidReloadIfPossible,n=e.comparison,a=e.returnToUrl,r=Object(N.a)();function i(){return r.count("safh_reload"),Object(m.j)(a),Object(h.a)()}r.count("safh_start");var o=Object(l.b)({label:"AUTH"}),s=Object(m.k)(a).pathname,c=Object(E.e)(s,{throwOnNoRoute:!1});if(!t||!function(e,t){var n=Object(_.getStateForClientStore)();if(!Object(C.didBootAllWorkspaces)(n))return!1;if(e.removed.length>0)return!1;if(!t)return!1;var a=Object(C.getFocusedWorkspace)(n),r=t.params.teamId;return!(!Object(y.b)()&&r&&r!==a||Object(w.x)()&&e.isNoOp&&r&&Object(C.isWorkspaceExpired)(Object(_.getStateForClientStore)(),r))}(n,c))return t?r.count("safh_reload_requested"):r.count("safh_cannot_handle"),o.info("Fetched auth but need to reload to handle the change; navigating to "+a),i();o.info("Fetched auth and processing changes without reloading...");try{Object(f.f)()}catch(e){return o.error("Encountered an error while ingesting auth payload: "+e),i()}var u=Object(y.b)()?function(e){var t=Object(l.b)({label:"AUTH"}),n=g(),a=e.map(function(e){return Object(C.isWorkspaceExpired)(Object(_.getStateForClientStore)(),e)?(t.info("Re-adding expired workspace "+e+" / "+n[e].url),Object(_.dispatchForClientStore)(Object(O.updateWorkspaceMeta)({id:e,meta:p()({},n[e],{isExpired:!1})}))):(t.info("Adding workspace "+e+" / "+n[e].url),Object(_.dispatchForClientStore)(Object(O.addWorkspace)({id:e,meta:n[e]}))),Object(k.a)({teamId:e,shouldSetFocus:!1})});return Promise.all(a)}(n.added):Promise.resolve();return function(e){var t=Object(l.b)({label:"AUTH"}),n=g();e.forEach(function(e){if(Object(_.getStoreInstanceByTeamId)(e)){t.info("Updating credentials for workspace "+e+" / "+n[e].url);var a=Object(f.d)(e,"token"),r=Object(f.d)(e,"enterprise_api_token");Object(v.c)(a,e),Object(_.dispatchForClientStore)(Object(O.updateWorkspaceMeta)({id:e,meta:n[e]})),Object(_.dispatchForTeamId)(e,Object(I.l)(a)),Object(_.dispatchForTeamId)(e,Object(b.z)({apiToken:a,enterpriseApiToken:r}))}})}(n.changed),u.then(function(){return function(e){var t=Object(C.getFocusedWorkspace)(Object(_.getStateForClientStore)());if(e!==t&&!Object(S.b)(Object(_.getStateByTeamId)(t))){var n=Object(l.b)({label:"AUTH"});if(n.info("Not allowed to switch workspaces right now; seeing if closing a modal helps"),Object(_.dispatchForTeamId)(t,Object(j.a)()),!Object(S.b)(Object(_.getStateByTeamId)(t)))throw n.info("Still not allowed to switch workspaces right now despite having closed a modal"),new Error("Not allowed to switch workspaces; we should reload instead");n.info("Closing a modal helped")}}(c.params.teamId),Object(E.g)(c.routeName,c.params,{reason:"Sonic authFetchedHandler"})}).then(function(){r.count("safh_ok"),n.added.length>0&&r.count("safh_added"),n.changed.length>0&&r.count("safh_changed"),n.isNoOp&&r.count("safh_noop"),o.info("Successfully processed auth changes without needing to reload")}).catch(function(e){return o.error("Encountered an error while processing auth changes: "+e),r.count("safh_error"),i()})}var A=n("V5VI"),R=!1;function P(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).payload,t=(arguments[1],arguments[2]);if(!R){var n=t();e||"incremental"===Object(c.c)(n,"sonic_incr_auth")&&(R=!0,Object(l.b)().info("AUTH","Installing incremental auth handler"),Object(u.j)(T))}}var M=n("g5qt"),x=n("bYMc"),F=n("1PKr"),L=n("XfeM"),D=n("brL+"),U=n("eK5+"),B="lastBootSonicValue",q="sonicDowngradeTs",H=432e5,W=Object(L.b)("Signal to the desktop that all delegates are ready",function(e,t){Object(M.h)(),function(e){if(!Object(b.m)(e(),"feature_desktop_force_production_channel"))return;Object(M.Mb)({name:"releaseChannel",value:"prod"})}(t),function(){try{if(!Object(w.B)())return;if(!Object(w.v)("3.2"))return;if(Object(w.v)("3.3"))return;if(Object(M.E)("isOpenExternalShellForced"))return;Object(M.Mb)({name:"isOpenExternalShellForced",value:!0})}catch(e){Object(l.b)().error("Tried to set isOpenExternalShellForced, but failed",e)}}(),function(e){try{if(!Object(b.m)(e(),"feature_desktop_notifications_2018"))return;if(!Object(w.v)("3.3"))return;Object(M.Mb)({name:"notificationTimeout",value:6e3}),Object(M.Mb)({name:"notificationAfterHoverTimeout",value:2e3}),Object(M.Mb)({name:"notificationMaxItems",value:8}),Object(M.Mb)({name:"notificationStyle",value:"2018"})}catch(e){Object(l.b)().error("Tried to set notification style for 2018, but failed",e)}}(t),function(e){setTimeout(function(){var t=e();if(Object(b.m)(t,"feature_desktop_logs_upload")){var n=Object(b.e)(t,"api_token"),a=Object(D.b)(t);F.b.fetch({method:"api.features",args:{token:n,platform:"ssb"},teamId:a}).then(function(e){e&&e.features&&e.features.desktop_diagnostics_timestamp&&K(a)})}},6e4)}(t),function(e){if(!Object(M.Y)())return;if(!Object(w.v)("4.0.0"))return;var t=Object(M.A)("bootSonic"),n=localStorage.getItem(B);if(t===n)return;var a=e(),r=Object(N.c)({state:a}),i="beta"===Object(M.F)();Object(l.b)().info("Decision to boot Sonic changed since last session: '"+n+"' -> '"+t+"'");try{localStorage.setItem(B,t)}catch(e){Object(l.b)().error("Unable to set '"+B+"'",e)}switch(t){case"once":r.count(i?"sonic_rollout_upgrade_to_sonic_beta_3":"sonic_rollout_upgrade_to_sonic_3");break;case"never":r.count(i?"sonic_rollout_downgrade_to_legacy_beta_3":"sonic_rollout_downgrade_to_legacy_3");try{localStorage.setItem(q,Date.now())}catch(e){Object(l.b)().error("Unable to set '"+q+"'",e)}!i&&Object(U.a)(5)&&K(Object(D.b)(a)).then(function(){r.count("sonic_rollout_downgrade_to_legacy_logs_available_3")})}}(t),function(){if(!Object(M.Y)())return;if(!Object(w.v)("4.0.0"))return;var e=Object(M.A)("bootSonic");if("once"===e)Object(M.Lb)({name:"bootSonic",value:"always"});else if("never"===e){var t=localStorage.getItem(q);if(null===t)return;var n=Date.now()-t;n>H&&Object(M.Lb)({name:"bootSonic",value:"once"})}}()});W.meta={name:"onWebappBooted",key:"desktopOnWebappBootedOnWebappBooted",description:"Signal to the desktop that all delegates are ready"};var G=W;function K(e){return Object(M.o)().then(function(t){var n=t&&t.length>0?t[0]:null;if(!n)return Promise.resolve();var a=n instanceof File?n:new File(n.buffer,n.name,n.options),r=Object(_.getStateByTeamId)(e),i=Object(b.e)(r,"api_token");return i?F.b.fetch({method:"profiling.addLogging",httpMethod:"POST",args:{token:i,platform:"ssb",log_file:a},teamId:e}):Promise.resolve()}).catch(function(t){Object(l.a)({teamId:e}).error("Unable to upload app logs: "+t)})}var V="DESKTOP-SIDE-EFFECT";function z(e){if(Object(C.getAllWorkspaces)(e).filter(function(t){return!Object(C.isWorkspaceExpired)(e,t)}).length-Object(C.getBootedWorkspaces)(e).length-Object(C.getFailedToBootWorkspaces)(e).length==0){var t=Object(C.getFocusedWorkspace)(e);Object(l.a)({teamId:t}).info(V,"Attempted boot for all workspaces, signaling desktop"),Object(_.dispatchForTeamId)(t,G())}}var Y=n("5v1V"),Q=n("jo6Y"),X=n.n(Q),J=n("aK/h"),Z=n("om+M"),$=n("4zXV"),ee=Object(Z.a)("Fetch start data",function(e,t,n){var a=n.reason,r=X()(n,["reason"]),i=p()({flannel_api_ver:4,only_self_subteams:1},r);return e(Object($.b)({method:"client.boot",args:i,reason:a}))});ee.meta={name:"fetchStartData",key:"fetchersStartApiFetchStartData",description:"Fetch start data"},ee.propTypes={reason:J.b.string.isRequired,only_self_subteams:J.b.oneOf([0,1])};var te=n("0QyR"),ne=n("wsMj"),ae=n("9E9B"),re=n("+8mH"),ie=n("c6rO"),oe=n("gLeh"),se=n("2VxW"),le=n("okZA"),ce=n("8MYE"),ue=n("X5aw"),de=n("s0HP"),pe=n("aClT"),me=n("oZ18"),he=n("1CNK"),be=Object(L.b)("Set model data in Redux stores based on response from client.boot",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.appHomesData,i=n.channelsData,o=n.teamData,s=n.selfData,l=n.userPrefsData,c=n.teamPrefsData,u=n.userGroupMembershipData,d=n.enterpriseData,p=n.enterprisePrefsData,m=n.paidFeatures,h=n.emojiBootData,b=n.slashCommandsBootData;e(Object(oe.c)(Object(M.U)())),e(Object(ae.bulkAddChannels)({channels:i})),e(Object(ie.c)({team:o})),e(Object(se.a)({members:[s]})),e(Object(de.c)(l)),e(Object(re.f)(l&&l.muted_channels||"")),e(Object(pe.c)(c)),e(Object(me.b)()),e(Object(me.a)({userGroups:u,isMember:!0})),a&&e(Object(ne.b)(a)),d&&e(Object(le.l)({team:d})),p&&e(Object(he.c)(p)),e(Object(ce.c)(m||[])),e(Object(r.c)({serverCacheTs:h.cacheTs})),e(Object(ue.c)({serverCacheTs:b.cacheTs}))});be.meta={name:"setModelData",key:"appSonicReduxActionsSetModelDataSetModelData",description:"Set model data in Redux stores based on response from client.boot"},be.propTypes={channelsData:J.b.array,teamData:J.b.object.isRequired,selfData:J.b.object.isRequired,miscBootData:J.b.object,userPrefsData:J.b.object,teamPrefsData:J.b.object,userGroupMembershipData:J.b.array,enterpriseData:J.b.object,paidFeatures:J.b.arrayOf(J.b.string)};var fe=be,ge={};function _e(e,t,n){var a=Object(D.b)(n());ge[a]=(ge[a]||0)+1;var r=ge[a];return Object(Y.f)(n())?(t(Object(s.i)(!0)),t(ee({reason:"provisionally-connected"})).then(te.b).then(function(e){var i=ge[a];Object(Y.n)(n())&&i===r&&t(Object(I.f)()),t(fe(e))}).finally(function(){return t(Object(s.i)(!1))})):Promise.resolve(t(Object(I.f)()))}var ve=n("XL7r"),ye=n("7dYf");function ke(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).payload,t=arguments[1],n=arguments[2];if(Object(y.b)()){var a=n();if(!e&&Object(Y.l)(a)&&Object(D.a)(a)){var r=Object(D.b)(a);Object(f.e)().includes(r)&&Object(ve.c)(a).includes(r)&&(Object(l.a)({teamId:r}).info("Removing this team from the app exclusion list"),t(Object(ye.b)({teamId:r})))}}}var Oe=n("70KD"),Ce=n("ocl4"),Ee=3e4;function je(e,t,n){Object(b.m)(n(),"feature_desync_resync")&&t(ee({reason:"resynced-topics"})).timeout(Ee).then(te.b).then(function(e){t(Object(Oe.c)()),t(fe(e))}).catch(function(){return t(Object(Oe.c)())}).finally(function(){return t(Object(Ce.b)())})}var Se=Object(o.a)(function(){Object(A.d)({actions:[s.i],sideEffect:P}),Object(A.a)({actions:[O.setWorkspaceBooted],sideEffect:function(e,t,n){if(M.Q){var a=e.payload,r=n();Object(l.a)({teamId:a}).info(V,"Team "+a+" booted, creating delegate"),Object(_.dispatchForTeamId)(a,Object(x.a)()),z(r)}}}),Object(A.a)({actions:[O.setWorkspaceFailedToBoot],sideEffect:function(e,t,n){M.Q&&z(n())}}),Object(A.d)({actions:[Y.u],sideEffect:_e}),Object(A.d)({actions:[Ce.e],sideEffect:je}),Object(A.d)({actions:[Y.a],sideEffect:ke})});function Ie(){return Se(),i.a.apply(void 0,arguments)}var we=n("OFWM"),Ne=n("2/vs"),Te=n("CPJ1"),Ae=n("G4ux"),Re=n("5dgH"),Pe=n("m2ga"),Me=n("nNoG"),xe=n("JvzI"),Fe=n("TVjB"),Le=n("s/0T"),De=n("0dCl"),Ue=n("iTOt"),Be=n("rb67"),qe=n("rkcT"),He=n("5Fft"),We=n("Gmrf"),Ge=n("s5Is"),Ke=n("9oTK"),Ve=n("fujP"),ze=n("Z7Ay"),Ye=n("Z0v/"),Qe=n("pR3f"),Xe=n("bhDD"),Je=n("XgrU"),Ze=n("iwHE"),$e=n("UioL"),et=Object(U.a)(10),tt=Ye.h+"_process_stored_state_mark_"+Ye.i;function nt(e){var t=e.state,n=e.logger,a=e.reducerConfig,r=void 0===a?{}:a,i=e.storedPersistenceHashes,o=void 0===i?{}:i,s=e.currentPersistenceHashes,l=void 0===s?{}:s,c={};return Object.keys(t).forEach(function(e){var a=r[e];if(Object(Ye.z)(a))c[e]=nt({state:t[e],reducerConfig:Object(Ye.q)(a),logger:n});else{var i=Object(Ye.v)(a)||{},s=i.persistenceEnabled,u=void 0!==s&&s,d=i.persistImmediately,p=void 0!==d&&d,m=i.afterReadTransform;if(u&&!p){var h=o[e],b=l[e];b===h?c[e]=m?m(t[e]):t[e]:n.info(Ye.G,e+" store's shape has changed, throwing away persisted data for it. New hash "+b+" doesn't equal old hash "+h)}}}),c}var at=function(){var e=Object(Ke.coroutine)(regeneratorRuntime.mark(function e(){var t,n,a,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.teamId,o=r.reducerConfig,s=void 0===o?Object(Ye.u)(i):o,c=r.storedState,u=void 0===c?{}:c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(N.a)(),(n=Object(l.a)({teamId:i})).info(Ye.G,"Checking for persistence method changes"),e.next=5,Object(Ke.resolve)(Object(Je.a)());case 5:if(n.info(Ye.G,"Preparing state for hydration"),et&&t.mark(tt),(a=nt({state:u,logger:n,reducerConfig:s,storedPersistenceHashes:u.persistenceHashes,currentPersistenceHashes:Object(Qe.b)(p()({},s,{persistenceHashes:Xe.a}))}))&&!Object(Ve.a)(a)){e.next=12;break}return n.info(Ye.G,"No persisted state found"),et&&t.clearMarks(tt),e.abrupt("return",null);case 12:if(n.info(Ye.G,"State prepared for hydration"),et&&t.measureAndClear(tt),n.info(Ye.G,"Checking for required data"),!Object(Ze.a)({teamId:i,reducerConfig:s,state:a})){e.next=19;break}return n.info(Ye.G,"Missing some required data, throwing away persisted state"),t.count(Ye.h+"_missing_required_reducers_"+Ye.i),e.abrupt("return",null);case 19:return e.abrupt("return",a);case 20:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();Object(ze.a)("persist.processStoredState",function(e){var t=Object(Ye.u)(e);return processStoredState({teamId:e,reducerConfig:t,storedState:Object($e.a)({teamId:e})})});var rt=n("lhpG"),it=n("4ULK"),ot=n("UXvI"),st=!1,lt=function(e){if(e){var t="",n=e.srcElement||e.target,a=l.b&&Object(l.b)();if(n&&n.nodeName)if("SCRIPT"===n.nodeName){var r=n.src;t="["+(e.type||"error")+"] from script at "+r+" (failed to load?)"}else if("IMG"===n.nodeName){var i=n.src||n.currentSrc||"unknown";return void a.warn("<img> fired error with url = "+i)}if(e.error&&e.error.stack&&(t+=" "+e.error.stack),e.filename){var o=e.filename,s=e.lineno,c=e.colno;t+=" from "+o,s&&(t+=" @ line "+s+", col "+c)}var u=void 0;if((u=e.error&&e.error.stack?t:(e.message||"")+" "+t)&&u.replace&&(u=u.replace(/\s+/g," ").trim()),!u||!u.length)if(n)u="error event from node of "+(n.nodeName||"unknown")+", no message provided?";else u="error event fired, no relevant message or node found";u="\ud83d\udc1e "+u;!function(e){var t=e.error,n=e.msg,a={subtype:e.subtype};Object(l.b)().error(t,n,a)}({error:e.error||e,msg:u,subtype:"js_runtime_error"})}};var ct=function(){if(!st){var e=Object(ot.a)(lt,1e4);window.addEventListener("error",e,!0),st=!0}},ut=n("JtEI"),dt=!1,pt=function(){var e=Object(N.a)(),t=Object(l.b)();e.count(Object(ut.c)()+"_beforeunload"),t.info("RELOAD","Page is about to unload. This might not be a reload, it could be a window close or navigation")},mt=function(){dt||(window.addEventListener("beforeunload",pt),dt=!0)},ht=n("YB7p"),bt=n("rCFu"),ft=n("IbTH"),gt=n("xUyV");function _t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.teamToken,n=e.teamId,a=e.reason,r=document.documentElement,i=!(!r||!r.dataset)&&r.dataset.versionTs;return i?Object(ft.g)({token:t,teamId:n,versionTs:i,reason:a}).then(function(e){if(e&&e.should_reload){var t=e.client_min_version;Object(gt.a)(t)&&Object(ht.a)({reason:"Reloading due to a min version bump (rtm.shouldReload)",reasonKey:"min_version_bump"})}return Promise.resolve()}):Promise.resolve()}function vt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isWarmBooting,n=e.bootData,a=void 0===n?{}:n,r=document.documentElement,i=!(!r||!r.dataset)&&r.dataset.versionTs;if(!i)return Promise.resolve(!1);var o=a.should_reload,s=a.client_min_version;if(t){var c=function(e){var t=e.versionTs,n=e.clientMinVersion;if(e.shouldReload)return Object(l.b)().warn("MIN-VERSION","We somehow managed to cache the should_reload => true value. We can safely ignore this as it\u2019s likely a programming error?"),!1;var a=document.documentElement,r=a&&a.dataset?a.dataset.minVersionSplaySeconds:0;if(!r)return!1;var i=parseInt(r,10),o=n+i;if(Date.now()/1e3>=o&&t<n&&Object(gt.a)(n))return!0;return!1}({clientMinVersion:s,shouldReload:o,versionTs:i});return c&&Object(ht.b)({reason:"Reloading because our assets ("+i+") are at least 3 hours older than the last min-version ("+s+")",reasonKey:"min_version_bump",forceFetchAssetsOnPageLoad:!0}),Promise.resolve(c)}if(o&&Object(gt.a)(s)){Object(ht.b)({reason:"Reloading due to a min version bump (client.boot)",reasonKey:"min_version_bump",forceFetchAssetsOnPageLoad:!0});return Promise.resolve(!0)}return Promise.resolve(!1)}var yt=n("fvjX"),kt=n("TdMD"),Ot=n.n(kt),Ct=n("Bw5p"),Et=n("Xzpq"),jt=n("YS90"),St=n("1hAG"),It=["domain","enterprise_id","enterprise_name","id","icon","name","url"],wt=Object(jt.b)("Broadcast workspaces state to other stores",function(e,t,n){var a=e.getState(),r=t(n),i=e.getState(),o=Object(C.getBootedWorkspaces)(i),s=a&&Object(C.getBootedWorkspaces)(a),l=Object(C.getAllWorkspaces)(i),c=Object(C.getAllWorkspaces)(a),u=!c||l.some(function(e,t){return e!==c[t]}),d=Object(C.getRecentlyFocusedWorkspaces)(i),m=a&&Object(C.getRecentlyFocusedWorkspaces)(a);return s!==o||u?(!function(e,t){var n=e.reduce(function(e,n){var a=Object(_.getStateByTeamId)(n);return e[n]=p()({},Object(Ct.a)(Object(St.i)(a,n,!1),It),{order:t.indexOf(n)}),e},{});Object(M.ac)(n)}(o,l),Nt(o,d)):m!==d&&Nt(o,d),r});function Nt(e,t){var n=t[0];e.forEach(function(e){Object(_.dispatchForTeamId)(e,Object(Et.f)(t))}),Object(M.Hb)(n)}wt.meta={name:"broadcastWorkspacesMiddleware",key:"appSonicReduxMiddlewareBroadcastWorkspacesBroadcastWorkspacesMiddleware",description:"Broadcast workspaces state to other stores"};var Tt=wt,At=n("vWCh"),Rt=n("dxEi"),Pt=n("ifKl");var Mt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.state,n=e.prevState,a=e.workspaces,r=void 0===a?[]:a,i=e.broadcastSelector,o=void 0===i?Pt.a:i,s=e.broadcastAction,l=void 0===s?Pt.a:s,c=e.featureFlag,u=o(t),d=o(n);u!==d&&r.forEach(function(e){var t=Object(_.getStateByTeamId)(e);c&&!Object(b.m)(t,c)||Object(_.dispatchForTeamId)(e,l(u))})},xt=Object(jt.b)("Broadcast connectivity state to other stores",function(e,t,n){var a=e.getState(),r=t(n),i=e.getState(),o=Object(C.getBootedWorkspaces)(i);return Mt({state:i,prevState:a,workspaces:o,broadcastSelector:function(e){return Object(Rt.c)(e)},broadcastAction:function(e){return Object(At.a)(e)},featureFlag:"feature_connectivity_manager"}),Mt({state:i,prevState:a,workspaces:o,broadcastSelector:function(e){return Object(Rt.e)(e)},broadcastAction:function(e){return Object(At.b)(e)},featureFlag:"feature_connectivity_manager"}),r});xt.meta={name:"broadcastConnectivityMiddleware",key:"appSonicReduxMiddlewareBroadcastConnectivityBroadcastConnectivityMiddleware",description:"Broadcast connectivity state to other stores"};var Ft,Lt=xt,Dt=n("YEIV"),Ut=n.n(Dt),Bt=n("m1cH"),qt=n.n(Bt),Ht=n("OtLZ"),Wt=n("wBxZ"),Gt=n("0VPD"),Kt=n("MNvw"),Vt=16,zt=Object(Kt.b)((Ft={},Ut()(Ft,O.initialize,function(e,t){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.focusedWorkspace,a=t.allWorkspaces,r=t.workspacesMeta;if(e.allWorkspaces)throw new Error("workspaces-store:initialize cannot be called more than once");if(!n)throw new Error("workspaces-store:initialize must be given a focusedWorkspace");if(!a)throw new Error("workspaces-store:initialize must be given an array of workspaces");if(a.indexOf(n)<0)throw new Error("workspaces-store:initialize "+n+" is not one of the valid workspaces: "+a);return p()({},e,{focusedWorkspace:n,allWorkspaces:a,workspacesMeta:r,recentlyFocusedWorkspaces:[n]})}(e,t)}),Ut()(Ft,O.setDidBootAllWorkspaces,function(e){return p()({},e,{didBootAllWorkspaces:!0})}),Ut()(Ft,O.setWorkspaceOrder,function(e,t){return function(e,t){var n=e.allWorkspaces;if(Object(Gt.a)(n,t).length!==n.length)throw new Error("workspaces-store:setWorkspaceOrder can only re-order items in the array; additions or removals are not allowed");return Object(f.h)("orderedTeamIds",t),p()({},e,{allWorkspaces:t})}(e,t)}),Ut()(Ft,O.setWorkspaceBooted,function(e,t){return function(e,t){var n=e.bootedWorkspaces.includes(t)?e.bootedWorkspaces:[].concat(qt()(e.bootedWorkspaces),[t]);return p()({},e,{bootedWorkspaces:n})}(e,t)}),Ut()(Ft,O.setWorkspaceFailedToBoot,function(e,t){return function(e,t){if(!t)return e;var n=e.failedToBootWorkspaces.includes(t)?e.failedToBootWorkspaces:[].concat(qt()(e.failedToBootWorkspaces),[t]);return p()({},e,{failedToBootWorkspaces:n})}(e,t)}),Ut()(Ft,O.setWillNavigateToUnbootedWorkspaceId,function(e,t){return p()({},e,{willNavigateToUnbootedWorkspaceId:t})}),Ut()(Ft,O.setWorkspaceIsMigrating,function(e,t){return function(e,t){if(!t)return e;var n=e.migratingWorkspaces.includes(t)?e.migratingWorkspaces:[].concat(qt()(e.migratingWorkspaces),[t]);return p()({},e,{migratingWorkspaces:n})}(e,t)}),Ut()(Ft,O.setWorkspaceMigrationIsComplete,function(e,t){return function(e,t){if(!t)return e;var n=e.completedMigrationWorkspaces.includes(t)?e.completedMigrationWorkspaces:[].concat(qt()(e.completedMigrationWorkspaces),[t]);return p()({},e,{completedMigrationWorkspaces:n})}(e,t)}),Ut()(Ft,O.setWorkspaceIsAccessLimited,function(e,t){return function(e,t){if(!t)return e;var n=e.accessLimitedWorkspaces.includes(t)?e.accessLimitedWorkspaces:[].concat(qt()(e.accessLimitedWorkspaces),[t]);return p()({},e,{accessLimitedWorkspaces:n})}(e,t)}),Ut()(Ft,O.addWorkspace,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.id,a=t.meta;if(!n||!a)throw new Error("'id' and 'meta' are both required when adding a workspace");if(e.allWorkspaces.includes(n))return Object(l.b)({label:"WORKSPACES"}).warn("Cannot add workspace; it is already present: "+n),e;var r=e.allWorkspaces,i=e.workspacesMeta;return p()({},e,{allWorkspaces:[].concat(qt()(r),[n]),workspacesMeta:p()({},i,Ut()({},n,a))})}),Ut()(Ft,O.updateWorkspaceMeta,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.id,a=t.meta,r=e.workspacesMeta;if(!r[n])throw new Error("Cannot update workspace meta for "+n+"; no such team");return p()({},e,{workspacesMeta:p()({},r,Ut()({},n,a))})}),Ut()(Ft,O.internalSetFocusedWorkspaceType,function(e,t){return p()({},e,{focusedWorkspace:t,recentlyFocusedWorkspaces:Qt(e.recentlyFocusedWorkspaces,t)})}),Ut()(Ft,O.internalRemoveWorkspaceType,function(e,t){return p()({},e,{allWorkspaces:Object(Ht.a)(e.allWorkspaces,t)})}),Ft),{bootedWorkspaces:[],failedToBootWorkspaces:[],migratingWorkspaces:[],completedMigrationWorkspaces:[],accessLimitedWorkspaces:[],recentlyFocusedWorkspaces:[]},{storeKey:"workspaces",persistenceEnabled:!0});zt.meta={name:"workspaces",key:"appSonicReduxWorkspacesStoreWorkspacesReducerWorkspaces"},zt.propTypes={allWorkspaces:J.b.arrayOf(J.b.string),bootedWorkspaces:J.b.arrayOf(J.b.string),failedToBootWorkspaces:J.b.arrayOf(J.b.string),recentlyFocusedWorkspaces:J.b.arrayOf(J.b.string),focusedWorkspace:J.b.string,workspacesMeta:J.b.object};var Yt=zt;function Qt(e,t){var n=[t].concat(qt()(e.filter(function(e){return e!==t})));return n.length>Vt?Object(Wt.a)(n,Vt):n}var Xt=n("xIQt"),Jt=n("Jsq1"),Zt=n("Tc5z"),$t=n("NZir"),en=n("fpvb"),tn=n("4GGS"),nn=n("8Cw3"),an=n("Lev8"),rn=Object(jt.b)("Broadcast client theme state to other stores",function(e,t,n){var a=e.getState(),r=t(n),i=e.getState(),o=Object(C.getBootedWorkspaces)(i);return Mt({state:i,prevState:a,workspaces:o,broadcastSelector:function(e){return Object(an.c)(e)},broadcastAction:function(e){return Object(an.g)(e)}}),Mt({state:i,prevState:a,workspaces:o,broadcastSelector:function(e){return Object(an.d)(e)},broadcastAction:function(e){return Object(an.i)(e)}}),Mt({state:i,prevState:a,workspaces:o,broadcastSelector:function(e){return Object(an.e)(e)},broadcastAction:function(e){return Object(an.j)(e)}}),r});rn.meta={name:"broadcastClientThemeMiddleware",key:"appSonicReduxMiddlewareClientThemeBroadcastClientThemeMiddleware",description:"Broadcast client theme state to other stores"};var on=rn;function sn(){var e=Object(_.getClientStoreInstance)();if(e)return Object(l.b)().warn("[CLIENT-STORE]","we\u2019ve called configureClientStore before and already have an instance. This is likely a programming error."),e;var t,n,a=(t=Object($t.a)({teamId:"client",middlewares:[en.b,Ot.a,tn.a,Tt,Lt,on,Xt.a],customEnhancers:[]}),n=Object(nn.a)({workspaces:Yt,window:we.a,telemetry:Le.a,connectivity:Jt.a,accessibility:oe.a,desktop:Zt.c,clientTheme:an.b}),Object(yt.e)(n,t));Object(_.setClientStoreInstance)(a),Object(ze.a)("clientStore",p()({},a,{setFocusedWorkspace:Ge.setFocusedWorkspace})),Object(ze.a)("clientStore",a),Object(ze.b)("teamIds",function(){var e=a.getState();return C.getAllWorkspaces(e)}),Object(ze.b)("activeTeam",function(){var e=a.getState(),t=C.getFocusedWorkspace(e);return window.slackDebug[t]}),Object(ze.b)("activeTeamId",function(){var e=a.getState();return C.getFocusedWorkspace(e)});var r={};return Object.keys(O).forEach(function(e){r[e]=function(){return a.dispatch(O[e].apply(O,arguments))}}),Object.keys(C).forEach(function(e){r[e]=function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return C[e].apply(C,[a.getState()].concat(n))}}),Object(ze.a)("clientStore.workspaces",r),a}var ln=n("IxGy"),cn=n("sDWr"),un=n("2HDu"),dn=n("aLpA");var pn=function(e){var t=e.params,n=void 0===t?{}:t,a=e.prevTeamId,r=e.nextTeamId,i=e.routeName;if(a!==r)return Promise.resolve();var o=Object(_.getStoreInstanceByTeamId)(a),s=o.getState(),l=Object(Ue.b)(s),c=Object(Ue.c)(s),u=Object(ln.d)(s,{ignoreViewContext:!0});return function(e,t,n){return e&&(!e.viewContext||e.viewContext===dn.H.MESSAGE_PANE)&&t===e.channelId&&n!==e.channelId}(u,c.entityId,n.entityId)||function(e,t,n,a,r){return e&&e.viewContext===dn.H.THREADS_FLEXPANE&&t===cn.k&&n===Object(un.c)(e.channelId,e.threadTs)&&(a!==cn.k||r!==Object(un.c)(e.channelId,e.threadTs))}(u,l,c.threadId,i,n.threadId)?o.dispatch(Object(ln.a)({cancelUnsavedEdits:!1,scroll:!0})):Promise.resolve()},mn=n("4M+g"),hn=n("rgOt"),bn=n("S3eg"),fn=n("kxpR"),gn=n.n(fn),_n=n("ns4K"),vn=n("5mKg"),yn=n("iCc5"),kn=n.n(yn),On=n("V7oC"),Cn=n.n(On),En=n("FYw3"),jn=n.n(En),Sn=n("mRg0"),In=n.n(Sn),wn=n("qafc"),Nn=new Me.b("unavailable_channel"),Tn=(J.b.string.isRequired,function(e){function t(){return kn()(this,t),jn()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return In()(t,e),Cn()(t,[{key:"render",value:function(){var e=this.props,t=e.teamName,n=X()(e,["teamName"]),a=Nn.t("{teamName} is making some changes to their workspace, so content and conversations shared with them are temporarily unavailable.",{teamName:t});return gn.a.createElement(wn.b,p()({fadeDelay:1e4,type:"error"},n),gn.a.createElement("span",null,a))}}]),t}(fn.PureComponent));Tn.displayName="UnavailableMemberToast";var An=Tn,Rn=Object(L.b)("Show unavailable member toast",function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).teamId,a=t(),r=Object(St.i)(a,n),i=Object(vn.f)(r);return e(Object(_n.c)({element:gn.a.createElement(An,{type:"error",teamName:i})}))});Rn.meta={name:"showUnavailableMemberToast",key:"actionsShowUnavailableMemberToastShowUnavailableMemberToast",description:"Show unavailable member toast"};var Pn=Rn,Mn=n("Fdc0"),xn=n("wfE8"),Fn=n("6kok"),Ln=n("FHcd"),Dn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.nextTeamId,n=e.params,a=void 0===n?{}:n,r=Object(_.getStoreInstanceByTeamId)(t);if(!r)return Promise.resolve(!0);var i=r.getState();if(!Object(Ln.a)(a.entityId))return Promise.resolve();var o=a.entityId,s=Object(Ae.d)(i,o),l=Object(Mn.Nb)(i,s),c=Object(mn.k)(i,o);return Object(Fn.sb)(c)?(r.dispatch(Object(bn.a)({id:c.id})),Promise.resolve(!1)):l?(r.dispatch(Pn({teamId:s.team_id})),Promise.resolve(!1)):r.dispatch(Object(xn.v)({memberIds:[o],reason:"sonic/route-listeners/open-conversation-with-member"})).then(function(e){return r.dispatch(Object(hn.a)({channel:e.channel})),r.dispatch(Object(bn.a)({id:e.channel.id})),Promise.resolve(!1)})},Un=n("+1yX"),Bn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.nextTeamId,n=e.params,a=void 0===n?{}:n,r=Object(_.getStoreInstanceByTeamId)(t),i=r.getState(),o=a.entityId;if(!Object(Un.a)(o))return Promise.resolve();var s=Object(mn.e)(i,o);return Object(Fn.pb)(s)||Object(Fn.hb)(s)?Object(Fn.sb)(s)?Promise.resolve():r.dispatch(Object(xn.v)({channel:o,reason:"sonic/route-listeners/open-conversation-with-ids"})):Promise.resolve()},qn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.nextTeamId,n=e.params,a=void 0===n?{}:n,r=Object(_.getStoreInstanceByTeamId)(t),i=r.getState();if(!Object(Un.a)(a.entityId))return Promise.resolve();var o=a.entityId,s=Object(mn.e)(i,o,!1);return Object(Fn.Z)(s)?Object(Fn.cb)(s)?Promise.reject(new Error("tried to switch to a channel from another team")):Promise.resolve():r.dispatch(Object(xn.f)({ids:[o],reason:"sonic/route-listeners/ensure-channel"})).then(function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).resolved;return!(!e||!e.includes(o))})},Hn=n("NYva"),Wn=n("ajyX"),Gn=n("YSKj"),Kn=n("Fwh9"),Vn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.nextTeamId,n=e.params,a=void 0===n?{}:n,r=Object(_.getStoreInstanceByTeamId)(t),i=r.getState();return!Object(Kn.e)(i)&&!Object(Wn.a)(i)||(!(a.tabId&&!Object(Gn.a)(a.tabId,a.entityId,i))||(r.dispatch(Object(Hn.a)({channelId:a.entityId})),!1))},zn=n("m8R6"),Yn=n("X4vX"),Qn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.prevTeamId,n=e.nextTeamId,a=e.routeName,r=e.reason,i=e.params,o=void 0===i?{}:i,s=Object(_.getStoreInstanceByTeamId)(n),l=s.getState();if("clear_timestamp"!==r){var c=Object(Un.a)(o.entityId)&&o.entityId,u=o.timestamp,d=Object(Ue.c)(l),p=Object(Un.a)(d.entityId)&&d.entityId;(n!==t||p!==c||u)&&(s.dispatch(Object(Yn.a)({channelId:c,startTs:u})),u&&Object(E.g)(a,Object(zn.a)(o,"timestamp"),{reason:"clear_timestamp",shouldReplaceState:!0}))}},Xn=n("dz01"),Jn=n("LzXF"),Zn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.prevTeamId,n=e.nextTeamId,a=e.params,r=void 0===a?{}:a,i=Object(_.getStoreInstanceByTeamId)(n),o=i.getState(),s=Object(Un.a)(r.entityId)&&r.entityId,l=Object(Ue.c)(o),c=Object(Un.a)(l.entityId)&&l.entityId;!Object(Xn.p)(o)||n===t&&c===s||i.dispatch(Object(Jn.g)(!1))},$n=n("miRO"),ea=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.nextTeamId,n=e.routeName,a=e.reason,r=e.params,i=void 0===r?{}:r,o=Object(_.getStoreInstanceByTeamId)(t),s=o.getState();if("clear_thread_timestamp"!==a){var l=Object(Ue.c)(s).threadId;i.replyTs?o.dispatch(Object($n.i)(i.replyTs)):i.threadId!==l&&o.dispatch(Object($n.b)()),i.replyTs&&Object(E.g)(n,Object(zn.a)(i,"replyTs"),{reason:"clear_thread_timestamp",shouldReplaceState:!0})}},ta=n("zoXk"),na=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.prevTeamId,n=e.nextTeamId,a=e.params,r=void 0===a?{}:a;if(t===n){var i=Object(_.getStoreInstanceByTeamId)(n),o=i.getState(),s=Object(Ue.b)(o),l=Object(Ue.c)(o).entityId,c=r.entityId;if(l!==c){["channel_page","group_page","im_page"].includes(Object(ta.c)(o))&&i.dispatch(Object(Et.b)({flexOrigin:null}));var u=Object(ta.f)(o);if(Object(Un.a)(c)&&u&&s===cn.a){i.dispatch(Object(Et.c)({flexRestore:void 0}));var d=u.routeName,m=p()({},r,u.params);return void Object(E.g)(d,m,{reason:"flex-restore",shouldReplaceState:!0})}Object(Un.a)(c)||s!==cn.d||(i.dispatch(Object(Et.c)({flexRestore:{routeName:cn.d}})),Object(E.g)(cn.a,r,{reason:"close-details",shouldReplaceState:!0}))}}},aa=n("hjTk"),ra=function(e){var t=e.prevTeamId,n=e.nextTeamId,a=e.routeName,r=e.params;if(Object(y.b)()||t===n)return!0;var i=Object(E.i)(a,p()({},r,{teamId:n})),o=Object(_.getStateForClientStore)(),s=Object(C.getWorkspacesMeta)(o),l=s&&s[n]&&s[n].subdomain,c=Object(y.a)(l)||"_team_"+n;return Object(aa.a)(i,c),!1},ia=n("eoGz"),oa=function(e){var t=e.prevTeamId,n=e.nextTeamId;if(!Object(y.b)()||t===n)return!0;var a=Object(_.getStateForClientStore)();return!Object(C.isWorkspaceExpired)(a,n)||(Object(ia.a)(n),!1)},sa=n("3lVB"),la=function(e){return e.prevTeamId!==e.nextTeamId?Object(_.dispatchForClientStore)(Object(Le.e)(!0)):Object(_.dispatchForClientStore)(Object(Le.e)(!1))},ca=function(e){var t=e.nextTeamId,n={routeName:e.routeName,params:e.params};return Object(f.i)(t,"lastRoute",n),!0},ua=n("POHe");function da(e){var t=e.prevTeamId,n=Object(_.getStoreInstanceByTeamId)(t);return Object(s.h)(n.getState())&&(n.dispatch(Object(Ue.d)(!0)),ua.a.delete("setNavigatedDuringWarmBoot")),Promise.resolve()}var pa=n("6/xU"),ma=function(e){var t=Object(_.getStoreInstanceByTeamId)(e.nextTeamId);return"SlackHistoryEvent"!==e.reason||"learning-slack"!==e.params.entityId&&"Pwelcome"!==e.params.entityId||t.dispatch(Object(pa.f)("history")),!0},ha=n("YPPF"),ba=n("OZf9"),fa=n("+uGN"),ga=n("g+Y+"),_a=Object(L.b)("Delete composer drafts without text or destination",function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).ignoredDraftId,a=t(),r=Object(ga.e)(a);if(!Object(Ve.a)(r)){var i=[];Object(ba.a)(r,function(e,t){Object(fa.l)(e)||Object(fa.m)(e)||t!==n&&i.push(t)}),Object(Ve.a)(i)||e(Object(ha.a)({ids:i}))}});_a.meta={name:"deleteEmptyDrafts",key:"draftsStoreThunksDeleteEmptyDraftsDeleteEmptyDrafts",description:"Delete composer drafts without text or destination"},_a.propTypes={ignoredDraftId:J.b.string};var va=_a,ya=n("KCFn"),ka=n("wCpp");function Oa(e){var t=e.nextTeamId,n=e.prevTeamId,a=e.params,r=void 0===a?{}:a,i=Object(_.getStoreInstanceByTeamId)(t),o=i.dispatch,s=(0,i.getState)(),l=Object(ta.j)(s),c=Object(ga.f)(s),u=r.entityId,d=r.threadId,p=Object(ya.b)(d).threadTs;if(t===n){var m=Object(ka.a)(r.draftId);o(va({ignoredDraftId:m}))}var h=c.filter(function(e){var t=Object(ya.b)(e),n=t.channelId,a=t.threadTs;return a?"thread"!==l||!p||p!==a:u!==n});return Object(Ve.a)(h)||o(Object(ha.c)({draftIds:h})),!0}var Ca,Ea=n("toaU"),ja=(Ca=Object(Ke.coroutine)(regeneratorRuntime.mark(function e(t){var n,a,r,i,o,s,l=t.prevTeamId,c=t.nextTeamId,u=t.navigationTimestamp;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Object(_.getStateForClientStore)(),!Object(C.hasWorkspaceFailedToBoot)(n,c)&&!Object(C.isWorkspaceExpired)(n,c)){e.next=3;break}return e.abrupt("return",!0);case 3:return a=Object(_.getStoreInstanceByTeamId)(c),r=a.getState(),i=Object(Ue.c)(r),o=Object(Ue.b)(r)||cn.a,s=!l,e.next=10,Object(Ke.resolve)(Object(E.g)(o,p()({},i,{teamId:c}),{reason:"navigateToLastSavedRoute",shouldReplaceState:s,navigationTimestamp:u}));case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}},e,this)})),function(e){return Ca.apply(this,arguments)});function Sa(e){var t=e.nextTeamId,n=e.routeName,a=e.params;Object(_.dispatchForClientStore)(Object(Ge.setFocusedWorkspace)({teamId:t,routeName:n,params:a})),Object(_.getStoreInstanceByTeamId)(t)&&Object(_.dispatchForTeamId)(t,Object(Ue.e)({routeName:n,params:a}))}function Ia(e){var t=e.prevTeamId,n=e.nextTeamId;if(!t||!n||t===n)return null;var a=window.location.search.match(/[&?]locale=([a-zA-Z-]*)/),r=a?a[1]:Object(f.d)(n,"user_locale");return Object(xe.c)(r,n)}function wa(){ua.a.set("maybeOpenOtherTeamInBrowser",Object(E.c)(ra)),ua.a.set("maybeRedirectToSignin",Object(E.c)(oa)),ua.a.set("startTeamSwitchTiming",Object(E.c)(sa.a)),ua.a.set("navigateToLastSavedRoute",Object(E.c)(ja,[Ea.a])),ua.a.set("attemptToStopEditingInChannel",Object(E.c)(pn,[])),ua.a.set("openConversationWithMember",Object(E.c)(Dn,[])),ua.a.set("openConversationWithIds",Object(E.c)(Bn,[])),ua.a.set("ensureChannel",Object(E.c)(qn,[])),ua.a.set("validateChannelTab",Object(E.c)(Vn)),ua.a.set("syncMessagePane",Object(E.b)(Qn,[])),ua.a.set("closeAppSpace",Object(E.b)(Zn,[])),ua.a.set("syncThreadFlexpane",Object(E.b)(ea,[cn.k])),ua.a.set("syncFlexpane",Object(E.b)(na,[])),ua.a.set("setNavigatedDuringWarmBoot",Object(E.b)(da)),ua.a.set("draftsListener",Object(E.b)(Oa)),ua.a.set("syncRouteStoreWithUrl",Object(E.b)(Sa)),ua.a.set("ensureCorrectLocaleForTeam",Object(E.b)(Ia)),ua.a.set("setShouldLogTeamSwitchMetrics",Object(E.b)(la)),ua.a.set("setLocalConfigForTeamWithKey",Object(E.b)(ca)),ua.a.set("setWelcomePlacePageEntryPoint",Object(E.b)(ma))}Object(ze.a)("router.listeners",function(){return[].concat(qt()(ua.a.entries()))});var Na=n("lKeU"),Ta=n("8sNt"),Aa=n("aaWX"),Ra=n("qOjI"),Pa=n("Fsnq"),Ma=n("owWc"),xa=n("HDs8"),Fa=n("sk9p"),La=n.n(Fa),Da=n("kiPk"),Ua=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],Ba=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],qa=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(0===e)return 0;if(t===n)return parseFloat(e.toFixed(a));var i=r?1024:1e3,o=r?Ua:Ba,s=o.findIndex(function(e){return e.toLowerCase()===t.toLowerCase()}),l=o.findIndex(function(e){return e.toLowerCase()===n.toLowerCase()});if(-1===s)throw new Error("Unknown currentType '"+t+"' passed to convertToSize");if(-1===l)throw new Error("Unknown desiredType '"+n+"' passed to convertToSize");return s<l?parseFloat((e/Math.pow(i,l-s)).toFixed(a)):parseFloat((e*Math.pow(i,s-l)).toFixed(a))},Ha=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return qa(e,"B","MB",t,!1)},Wa=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return qa(e,"KB","MB",t,!1)},Ga=n("Smdl"),Ka=Object(l.b)(),Va=function(e){if(!Object(M.ab)())return Promise.resolve(null);var t=Object(M.B)(),n=Object(M.q)(),a=Object(M.p)()||Promise.resolve();return Promise.all([t,n,a]).then(function(t){var n=La()(t,3),r=n[0],i=n[1],o=n[2],s={};if(navigator&&navigator.hardwareConcurrency){var l=Object(Da.a)(i,function(e){return e.cpu.percentCPUUsage*navigator.hardwareConcurrency});s["cpu_v4_app_"+e+"_teams"]=l.toFixed(2)}if(Object(w.l)("4.0.0"))if(o){r&&(s.memory_v4_mb_full_client=Math.ceil(Wa(r.private)));var c=Object(Da.a)(o,function(e){return e.memory.private}),u=c+Object(Da.a)(o,function(e){return e.memory.shared}),d=Math.ceil(Wa(c)),p=Math.ceil(Wa(u));s["memory_v4_app_mb_"+e+"_teams"]=p,s["memory_v4_app_private_mb_"+e+"_teams"]=d}else Ka.error("STATS","No memory stats collected getAppMemoryUsage:"+M.p+" appMemoryMetricsUsage:"+a,{subtype:"stats_no_memory"});else{r&&(s.memory_v4_mb_full_client=Math.ceil(Wa(r.privateBytes)));var m=Object(Da.a)(i,function(e){return e.memory.privateBytes}),h=Object(Da.a)(i,function(e){return e.memory.workingSetSize}),b=Math.ceil(Wa(m)),f=Math.ceil(Wa(h));s["memory_v4_app_mb_"+e+"_teams"]=f,s["memory_v4_app_private_mb_"+e+"_teams"]=b}return window.performance&&window.performance.memory&&(s["heap_v4_used_mb_"+e+"_teams"]=Ha(performance.memory.usedJSHeapSize),s["heap_v4_total_mb_"+e+"_teams"]=Ha(performance.memory.totalJSHeapSize)),s}).catch(function(e){return Ka.warn("metrics: Invalid data returned by desktop.stats",e.message)})},za=function(){if(!Object(M.ab)())return Promise.resolve(null);var e=Object(M.B)(),t=Object(M.q)(),n=Object(M.p)()||Promise.resolve();return Promise.all([e,t,n]).then(function(e){var t=La()(e,3),n=t[0],a=t[1],r=t[2],i={},o=a.filter(function(e){return"Tab"===e.type}).length-1;if(navigator&&navigator.hardwareConcurrency){var s=Object(Da.a)(a,function(e){return e.cpu.percentCPUUsage*navigator.hardwareConcurrency});i["cpu_v3_app_"+o+"_teams"]=s.toFixed(2)}if(Object(w.l)("4.0.0")){if(r){n&&(i.memory_v3_team_mb_full_client=Math.ceil(Wa(n.private)));var l=Object(Da.a)(r,function(e){return e.memory.private}),c=l+Object(Da.a)(r,function(e){return e.memory.shared}),u=Math.ceil(Wa(l)),d=Math.ceil(Wa(c));i["memory_v3_app_mb_"+o+"_teams"]=d,i["memory_v3_app_private_mb_"+o+"_teams"]=u}}else{n&&(i.memory_v3_team_mb_full_client=Math.ceil(Wa(n.privateBytes)));var p=Object(Da.a)(a,function(e){return e.memory.privateBytes}),m=Object(Da.a)(a,function(e){return e.memory.workingSetSize}),h=Math.ceil(Wa(p)),b=Math.ceil(Wa(m));i["memory_v3_app_mb_"+o+"_teams"]=b,i["memory_v3_app_private_mb_"+o+"_teams"]=h}return i}).catch(function(e){return Ka.warn("metrics: Invalid data returned by desktop.stats",e.message)})};Object(ze.a)("ssbMetrics",{fetchMemoryStatsV3:za,fetchMemoryStatsV4:Va});var Ya=18e4,Qa=36e5,Xa=6e5;function Ja(){if(!Object(w.u)())return Promise.resolve();var e=Object(N.a)();function t(){var t=Object(_.getStateForClientStore)(),n=Object(C.getBootedWorkspaces)(t).length;return Va(n).then(function(t){return t?(Object.keys(t).forEach(function(n){return e.store(n,t[n])}),t):null})}var n=Qa+Math.floor(Math.random()*Xa);return setInterval(function(){return t()},n),setTimeout(function(){return t()},Ya),Promise.resolve()}function Za(){if(Object(U.a)(1)){var e="store_metrics_v3",t=Qa+Math.floor(Math.random()*Xa);setInterval(function(){return t=Object(_.getStateForClientStore)(),void Object(C.getBootedWorkspaces)(t).forEach(function(t){var n=Object(_.getStateByTeamId)(t);if(n){var a=Object(N.c)({state:n});a.mark(e+"_size_compute_time");var r=Object(Pa.a)(n.files);a.count(e+"_count_files",r);var i=Object(Pa.a)(n.members);a.count(e+"_count_members",i);var o=Object(Pa.a)(n.channels);a.count(e+"_count_channels",o);var s=Object(Ma.a)(n.messages,function(e,t){return e+Object(Pa.a)(t)},0);a.count(e+"_count_messages",s),a.count(e+"_count_total",r+i+o+s),a.measureAndClear(e+"_size_compute_time")}});var t},t)}}function $a(e){var t=new xa.a,n=function(){for(var e,t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];return(e=Object(l.b)()).info.apply(e,["SW-CACHE-API-QUEUE"].concat(n))},a=e.bootAssets,r=e.teamId,i=e.teamToken,o=e.userId,s=(0,a.getWorkspacesMetaFromLocalConfig)(),c=Object(N.a)();Object(ft.e)({bootQueue:t,infoLogger:n,shouldCache:!0,teamId:r,token:i,userId:o}).then(function(){c.count("cached_api_fetch_success_experiments")}).catch(function(){c.count("cached_api_fetch_failure_experiments")}),Object.keys(s).forEach(function(e){var a=s[e],r=a.isExpired,i=a.token;r||Object(ft.f)({bootQueue:t,infoLogger:n,teamId:e,token:i,shouldCache:!0}).then(function(){c.count("cached_api_fetch_success_features")}).catch(function(){c.count("cached_api_fetch_failure_features")})})}var er,tr=n("EKWK"),nr=n("/Bt+"),ar=n("AUAP"),rr=n("DO5Y"),ir=n("JHHQ"),or=n("7ob2"),sr=n("6tlz"),lr=n("lj19"),cr=n("kKpd"),ur=n("7tsZ"),dr=n("zBEu"),pr=n("KkNX"),mr=n("FP5A"),hr=n("7EGn"),br=n("K2Qr"),fr=n("vmJv"),gr=Object(L.b)("Starts the Joiner Landing Place onboarding experience",(er=Object(Ke.coroutine)(regeneratorRuntime.mark(function e(t,n){var a,r,i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n(),r=Object(fr.a)(a),!Object(Un.a)(r)){e.next=8;break}return i=t(Object(br.g)({channelId:r})),e.next=6,Object(Ke.resolve)(i.promise||Promise.resolve(i));case 6:o=e.sent,Object(hr.a)(o,"counts.member_count",26)<=25&&t(Object(or.c)(!0));case 8:return e.abrupt("return",t(Object(mr.a)()));case 9:case"end":return e.stop()}},e,void 0)})),function(e,t){return er.apply(this,arguments)}));gr.meta={name:"startJoinerLandingPlace",key:"onboardingStoreThunksStartJoinerLandingPlaceStartJoinerLandingPlace",description:"Starts the Joiner Landing Place onboarding experience"};var _r=Object(L.b)("Starts joiner onboarding",function(){var e=Object(Ke.method)(function(e,t){var n=t();return Object(Ga.a)()?(e(Object(or.b)(!0)),Object(sr.t)(n)?(e(Object(mr.a)()),Promise.resolve()):e(gr())):Object(sr.t)(n)?(e(Object(or.b)(!0)),e(Object(mr.a)()),Object(sr.u)(n)&&!Object(pr.a)(n)?(e(Object(lr.d)()),e(Object(bn.a)({id:"Pwelcome",fromHistory:!1,replaceHistoryState:!1}))):Promise.resolve()):Object(dr.f)()});return function(t,n){return e.apply(this,arguments)}}());_r.meta={name:"startJoinerOnboarding",key:"onboardingStoreThunksStartJoinerOnboardingStartJoinerOnboarding",description:"Starts joiner onboarding"};var vr=n("t3J7"),yr=n("7nxQ");function kr(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=t.teamData,o=t.viewData,s=t.featureFlagData,u=t.experimentsData,d=t.miscBootData,m=p()({},s,a);Object(l.b)().info("BOOT","("+i.id+") Dispatching boot data"),e.dispatch(Object(b.s)(p()({},m,d))),e.dispatch(Object(c.a)(u)),r&&r.all&&e.dispatch(Object(c.d)(r.all)),r&&r[i.id]&&e.dispatch(Object(c.d)(r[i.id])),e.dispatch(fe(t)),d.welcomePlaceOnboardingData&&e.dispatch(Object(pa.i)(p()({},d.welcomePlaceOnboardingData,{lastUsedLocale:Object(yr.f)()})));var h="";if(d.shouldStartJoinerOnboarding)m.feature_jira_newxp_2372&&d.welcomePlaceOnboardingData&&!Object(sr.q)(e.getState())?h="learning-slack":i.onboarding_channel_id&&(h=i.onboarding_channel_id);else if(m.feature_jira_newxp_2372&&Object(sr.x)(e.getState())){var f=Object(E.e)(window.location.pathname,{throwOnNoRoute:!1});f&&f.routeName!==Ea.a||(h="learning-slack")}if(h){var g=n&&n.params||{};e.dispatch(Object(Ue.e)({routeName:cn.a,params:p()({},g,{entityId:h})}))}else if(o&&o.messagesData){var _=o.messagesData,v=o.membersData,y=o.botsData,k=_.channelId,O=p()({},_,{msgs:e.dispatch(Object(rr.a)({imsgs:_.msgs,channelId:k}))});if(e.dispatch(Object(se.a)({members:v})),e.dispatch(Object(ar.a)({bots:y})),e.dispatch(Object(ir.a)(O)),v&&v.length&&e.dispatch(Object(Te.f)({ids:v.map(function(e){return e.id}),fetchConditionally:!1})).then(function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).members;e.dispatch(Object(se.a)({members:t}))}),m.feature_channel_actions_client&&o.channelActionsData&&e.dispatch(Object(ur.d)(o.channelActionsData)),!Object(Ue.f)(e.getState())){var C=n&&n.routeName,j=n&&n.params||{};e.dispatch(Object(Ue.e)({routeName:n&&C!==Ea.a?C:cn.a,params:p()({},j,{entityId:_.channelId})}))}}else e.dispatch(Object(Ue.e)({routeName:n.routeName,params:n.params}));return d.teamCreationWorkflow&&e.dispatch(Object(cr.F)(d.teamCreationWorkflow)),d.shouldStartCreatorOnboarding?e.dispatch(Object(or.a)(!0)):d.shouldStartJoinerOnboarding&&(d.welcomePlaceOnboardingData&&(e.dispatch(Object(pa.b)()),e.dispatch(Object(lr.g)())),e.dispatch(Object(or.e)(i.onboarding_channel_id)),e.dispatch(_r())),Object(Kn.e)(e.getState())&&t.channelsPrefsData&&e.dispatch(Object(vr.a)(t.channelsPrefsData)),e}var Or=n("SZMM");function Cr(e){Object(ze.c)(e,"openGantryApp",function(){return Object(_.dispatchForTeamId)(e,Or.e.apply(void 0,arguments))})}n.d(t,"getTracer",function(){return nr.b}),n.d(t,"startWorkspaceSignIn",function(){return Ge.startWorkspaceSignIn}),n.d(t,"configureStore",function(){return Ie}),n.d(t,"dispatchBootData",function(){return kr}),n.d(t,"getClientStoreInstance",function(){return _.getClientStoreInstance}),n.d(t,"processStoredState",function(){return at}),n.d(t,"getImmediatelyPersistedState",function(){return rt.c}),n.d(t,"checkForPersistenceMethodChanges",function(){return Je.a}),n.d(t,"getWindow",function(){return we.c}),n.d(t,"loadAppActions",function(){return Ne.a}),n.d(t,"maybeReloadEmoji",function(){return r.c}),n.d(t,"maybeReloadSlashCommands",function(){return ue.c}),n.d(t,"fetchAndUpsertWhatsNewUpdates",function(){return Re.b}),n.d(t,"localesEnabled",function(){return Me.k}),n.d(t,"getLocaleFeatureFlags",function(){return b.f}),n.d(t,"resetCredentials",function(){return f.g}),n.d(t,"queryStringParse",function(){return m.m}),n.d(t,"removeUrlQueryStringValue",function(){return m.n}),n.d(t,"populateTeamDebugger",function(){return Cr}),n.d(t,"purgeStoredModel",function(){return it.a}),n.d(t,"reducers",function(){return a}),n.d(t,"setLocalConfigForTeamWithKey",function(){return f.i}),n.d(t,"setWindow",function(){return we.k}),n.d(t,"setWorkspaceBooted",function(){return O.setWorkspaceBooted}),n.d(t,"setWillNavigateToUnbootedWorkspaceId",function(){return O.setWillNavigateToUnbootedWorkspaceId}),n.d(t,"getWillNavigateToUnbootedWorkspaceId",function(){return C.getWillNavigateToUnbootedWorkspaceId}),n.d(t,"hasWorkspaceFailedToBoot",function(){return C.hasWorkspaceFailedToBoot}),n.d(t,"isWorkspaceMigrating",function(){return C.isWorkspaceMigrating}),n.d(t,"setWorkspaceFailedToBoot",function(){return O.setWorkspaceFailedToBoot}),n.d(t,"setWorkspaceIsMigrating",function(){return O.setWorkspaceIsMigrating}),n.d(t,"setWorkspaceIsAccessLimited",function(){return O.setWorkspaceIsAccessLimited}),n.d(t,"start",function(){return I.j}),n.d(t,"upsertMembers",function(){return se.a}),n.d(t,"fetchRawMembersById",function(){return Te.f}),n.d(t,"getMembersById",function(){return Ae.g}),n.d(t,"setBootType",function(){return we.i}),n.d(t,"getTelemeter",function(){return N.c}),n.d(t,"isJsPath",function(){return w.n}),n.d(t,"mountClient",function(){return De.a}),n.d(t,"maybeCountServiceWorkerNetworkStackFailureRefresh",function(){return Pe.b}),n.d(t,"maybeReloadForMinVersionBumpFromApi",function(){return _t}),n.d(t,"maybeReloadForMinVersionBumpFromBootData",function(){return vt}),n.d(t,"getRouteName",function(){return Ue.b}),n.d(t,"getRouteParams",function(){return Ue.c}),n.d(t,"updateCurrentRoute",function(){return Ue.e}),n.d(t,"navigateToRoute",function(){return E.g}),n.d(t,"getCurrentRouteInfo",function(){return E.e}),n.d(t,"createDesktopDelegate",function(){return x.a}),n.d(t,"registerServiceWorker",function(){return Be.d}),n.d(t,"overrideExperimentAssignments",function(){return c.d}),n.d(t,"initializeWorkspacesStore",function(){return O.initialize}),n.d(t,"configureClientStore",function(){return sn}),n.d(t,"registerRouteListeners",function(){return wa}),n.d(t,"getAllWorkspacesFromLocalConfig",function(){return Na.a}),n.d(t,"getWorkspacesMetaFromLocalConfig",function(){return g}),n.d(t,"getLocale",function(){return xe.a}),n.d(t,"setLocale",function(){return xe.c}),n.d(t,"loadEmojiTranslations",function(){return Fe.a}),n.d(t,"saveColorsToLocalConfig",function(){return Ta.a}),n.d(t,"connectSocket",function(){return qe.b}),n.d(t,"isReload",function(){return w.t}),n.d(t,"createInstanceForTeam",function(){return Aa.a}),n.d(t,"isQa",function(){return w.s}),n.d(t,"isDev",function(){return w.k}),n.d(t,"isProduction",function(){return w.r}),n.d(t,"getDesktopPreloadTime",function(){return bt.d}),n.d(t,"storeSSBMemoryStatsOnAnInterval",function(){return Ja}),n.d(t,"storeReduxStoreStatsOnAnInterval",function(){return Za}),n.d(t,"registerGlobalErrorHandler",function(){return ct}),n.d(t,"registerGlobalBeforeunloadHandler",function(){return mt}),n.d(t,"registerNetworkConnectivityListener",function(){return Ra.a}),n.d(t,"forceColdBoot",function(){return ht.a}),n.d(t,"clearAllPersistedDataExceptForTeamIds",function(){return tr.a}),n.d(t,"setShouldLogTTUMetrics",function(){return Le.c}),n.d(t,"setShouldLogAppBootMetrics",function(){return Le.b}),n.d(t,"isServiceWorkerAvailable",function(){return w.w}),n.d(t,"fetchApiCallsForCaching",function(){return $a})},Oxmb:function(e,t,n){},PIS5:function(e,t,n){},PQ52:function(e,t,n){},PhaV:function(e,t,n){},Pl1I:function(e,t,n){"use strict";var a=n("ifKl"),r=n("aK/h"),i=n("kxpR"),o=n.n(i),s=n("MnCE"),l=n("nNoG"),c=n("s19S"),u=n("/m+M"),d=n("Mjmw"),p=n("Atrf"),m=new l.b("app_card"),h=(r.b.string,r.b.string,r.b.string,r.b.string,r.b.string,r.b.bool.isRequired,r.b.bool,r.b.bool,r.b.func,r.b.bool,r.b.bool,{appType:void 0,memberId:void 0,appHomeTeamDisplayName:void 0,appName:"this app",creatorsId:void 0,isWorkflowApp:!1,installerIsYou:!1,onMemberClick:a.a,featureAddAppHomeTeamName:!1,displayCustomCreator:!1});function b(e){var t=e.displayCustomCreator,n=e.creatorsId,a=e.appType,r=e.memberId,i=e.appName,s=e.isError,l=e.isWorkflowApp,h=e.installerIsYou,b=e.onMemberClick,f=e.appHomeTeamDisplayName,g=e.featureAddAppHomeTeamName,_=Object(u.a)().featureBuilderIsWorkflowApp,v=void 0;if(h)v=_&&l&&t?m.rt("Created with Workflow Builder by you."):_&&l?m.rt("Created by Workflow Builder."):m.rt("You added {appName} to this workspace.",{appName:i});else{var y=o.a.createElement(p.a,{noMemberCard:!0,id:r,onClick:function(e){e.preventDefault(),Object(c.i)(r),b()}});v=_&&l&&t?m.rt("Created with Workflow Builder by <b>{appCreator}</b>.",{appCreator:o.a.createElement(d.a,{id:n})}):_&&l?m.rt("Created by Workflow Builder."):f&&g?m.rt("{appName} is installed on {appHomeTeamDisplayName}.",{appHomeTeamDisplayName:f,appName:i}):"custom_integration"===a?m.rt("{installer} added this custom integration to this workspace.",{installer:y,appName:i}):"slack"===a?m.rt("{installer} configured {appName} to post in this channel.",{installer:y,appName:i}):m.rt("{installer} added {appName} to this workspace.",{installer:y,appName:i})}return s?null:o.a.createElement("div",{className:"p-app_profile_card__installation_summary","data-qa":"app_card_installation_summary"},o.a.createElement("span",{"data-qa-app-profile-card-installation-summary":!0},v))}b.defaultProps=h,t.a=Object(s.a)(b)},"Q/6m":function(e,t,n){"use strict";n.d(t,"b",function(){return R});var a=n("YEIV"),r=n.n(a),i=n("QbLZ"),o=n.n(i),s=n("iCc5"),l=n.n(s),c=n("V7oC"),u=n.n(c),d=n("FYw3"),p=n.n(d),m=n("mRg0"),h=n.n(m),b=n("ifKl"),f=n("kxpR"),g=n.n(f),_=n("aK/h"),v=n("XHGt"),y=n("TSYQ"),k=n.n(y),O=n("h0LD"),C=n("0wDQ"),E=n("pfyZ"),j=n("hOQf"),S=n("lfjV"),I=n("EHyS"),w=n("HOOb"),N=(n("TJrU"),Object(f.createContext)(b.a)),T=(_.b.object,_.b.string,_.b.bool,_.b.func,_.b.bool,_.b.func,_.b.node,_.b.bool,_.b.func,_.b.func,{msg:void 0,className:void 0,hover:!0,onClick:b.a,highlight:void 0,clearHighlight:b.a,children:void 0,isDeleting:void 0,removeMessageAndTimestamp:b.a,logMessage:_.b.func}),A=function(e){function t(e){l()(this,t);var n=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setBackground=n.setBackground.bind(n),n.onClick=n.onClick.bind(n),n.onDeleteAnimationEnd=n.onDeleteAnimationEnd.bind(n),n.onDeleteAnimationTick=n.onDeleteAnimationTick.bind(n),n.highlightTimer=null,n.state={},n.ref=g.a.createRef(),n}return h()(t,e),u()(t,[{key:"componentDidMount",value:function(){this.props.highlight&&this.startHighlightTimer(),this.props.isDeleting&&this.onDeleteAnimationEnd()}},{key:"componentDidUpdate",value:function(e){!e.highlight&&this.props.highlight&&this.startHighlightTimer(),!e.isDeleting&&this.props.isDeleting&&this.startDeleteAnimation()}},{key:"componentWillUnmount",value:function(){this.highlightTimer&&(clearTimeout(this.highlightTimer),this.props.clearHighlight()),this.deleteAnimation&&(this.deleteAnimation.cancel(),this.onDeleteAnimationEnd())}},{key:"onClick",value:function(e){var t=this.props.msg;e.shiftKey&&Object(I.a)(e)&&!Object(w.a)(e.target)&&(e.preventDefault(),this.props.logMessage({channelId:t.channel,ts:t.ts})),this.props.onClick(e)}},{key:"onDeleteAnimationEnd",value:function(){var e=this.props.msg;this.props.removeMessageAndTimestamp({channelId:e.channel,ts:e.ts}),this.deleteAnimation=null}},{key:"onDeleteAnimationTick",value:function(e){var t=e.value,n=e.nextTick;this.setState(function(){return{height:t}},n)}},{key:"setBackground",value:function(e){this.setState(function(t){return o()({},t,e)})}},{key:"startDeleteAnimation",value:function(){var e=this.ref.current&&this.ref.current.clientHeight||0;this.deleteAnimation=Object(S.a)({fromValue:e,toValue:0,duration:200,easing:"easeInOutQuad",onTick:this.onDeleteAnimationTick,onComplete:this.onDeleteAnimationEnd})}},{key:"startHighlightTimer",value:function(){var e=this;this.highlightTimer&&clearTimeout(this.highlightTimer),this.highlightTimer=setTimeout(function(){e.highlightTimer=null,e.props.clearHighlight()},3e3)}},{key:"render",value:function(){var e,t=this.state.height,n="number"==typeof t?{height:t}:null,a=k()("c-message_kit__background",(e={"c-message_kit__background--hovered":this.props.hover&&this.state.hover,"c-message_kit__background--labels":this.state.labels},r()(e,"c-message_kit__background--labels--"+this.state.labels,this.state.labels),r()(e,"c-message_kit__background--editing",this.state.editing),r()(e,"c-message_kit__background--highlight",this.props.highlight),r()(e,"c-message_kit__background--deleting",this.props.isDeleting),e),this.props.className);return g.a.createElement(N.Provider,{value:this.setBackground},g.a.createElement("div",{role:"document",className:a,ref:this.ref,style:n,onClick:this.onClick,"data-qa":"message_container","data-qa-unprocessed":Object(j.xb)(this.props.msg)},this.props.children))}}]),t}(f.PureComponent);A.displayName="MessageBackground",A.defaultProps=T;function R(e){return function(t){return g.a.createElement(N.Consumer,null,function(n){return g.a.createElement(e,o()({},t,{setBackground:n}))})}}t.a=Object(v.b)(function(e,t){var n=t.msg,a=!1;return n&&(a=Object(E.e)(e,{channelId:n.channel,ts:n.ts}).isDeleting),{isDeleting:a}},function(e){return{removeMessageAndTimestamp:function(t){return e(Object(C.a)(t))},logMessage:function(t){return e(Object(O.a)(t))}}})(A)},Q2Pv:function(e,t,n){},Q3oM:function(e,t,n){"use strict";n.d(t,"b",function(){return E});var a=n("QbLZ"),r=n.n(a),i=n("iCc5"),o=n.n(i),s=n("V7oC"),l=n.n(s),c=n("FYw3"),u=n.n(c),d=n("mRg0"),p=n.n(d),m=n("ifKl"),h=n("kxpR"),b=n.n(h),f=n("aK/h"),g=n("TSYQ"),_=n.n(g),v=n("ubOb"),y=n("Q/6m"),k=Object(h.createContext)({hover:!1,setHover:m.a}),O=(f.b.string,f.b.node,f.b.bool,f.b.func,f.b.string,f.b.bool,f.b.bool,f.b.func,f.b.func,{className:null,children:void 0,hovered:!1,setBackground:m.a,"data-qa":void 0,hasKeyboardFocus:!1,hasKeyboardFocusWithin:!1,onFocus:m.a,onBlur:m.a}),C=function(e){function t(e){o()(this,t);var n=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onMouseOver=n.onMouseOver.bind(n),n.onMouseOut=n.onMouseOut.bind(n),n.onMutation=n.onMutation.bind(n),n.setHover=n.setHover.bind(n),n.hoveredElement=null,n.mutationObserver=null,n.state={hoverCount:0,hover:!1},n}return p()(t,e),l()(t,[{key:"componentDidMount",value:function(){this.setBackground()}},{key:"componentDidUpdate",value:function(){this.setBackground()}},{key:"componentWillUnmount",value:function(){this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null)}},{key:"onMouseOver",value:function(e){var t=e.target,n=e.currentTarget,a=e.relatedTarget;n.contains(t)&&(n.contains(a)||(this.setHover(!0),this.mutationObserver||(this.mutationObserver=new MutationObserver(this.onMutation),this.mutationObserver.observe(n,{childList:!0,subtree:!0}))),this.hoveredElement=t)}},{key:"onMouseOut",value:function(e){var t=e.target,n=e.currentTarget,a=e.relatedTarget;n.contains(t)&&this.hoveredElement&&(n.contains(a)||(this.setHover(!1),this.hoveredElement=null,this.mutationObserver&&(this.mutationObserver.disconnect(),this.mutationObserver=null)))}},{key:"onMutation",value:function(e){var t=this;e.some(function(e){return Array.from(e.removedNodes).some(function(e){return e.contains(t.hoveredElement)})})&&(this.hoveredElement=null,this.setHover(!1))}},{key:"setHover",value:function(e){this.setState(function(t){var n=Math.max(0,t.hoverCount+(e?1:-1));return{hoverCount:n,hover:n>0}})}},{key:"setBackground",value:function(){this.props.setBackground({hover:this.isHovered()})}},{key:"isHovered",value:function(){var e=this.props.hovered||this.state.hover,t=this.props.hasKeyboardFocus||this.props.hasKeyboardFocusWithin;return e||t}},{key:"render",value:function(){var e=this.isHovered(),t=_()("c-message_kit__hover",{"c-message_kit__hover--hovered":e},this.props.className),n=this.props["data-qa"];return b.a.createElement(k.Provider,{value:{hover:e,setHover:this.setHover}},b.a.createElement("div",{role:"document",className:t,onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,onFocus:this.props.onFocus,onBlur:this.props.onBlur,"data-qa":n},this.props.children))}}]),t}(h.PureComponent);function E(e){return function(t){return b.a.createElement(k.Consumer,null,function(n){var a=n.hover,i=n.setHover;return b.a.createElement(e,r()({},t,{hover:a,setHover:i}))})}}C.displayName="MessageHover",C.defaultProps=O,t.a=Object(y.b)(Object(v.a)(C))},QkOX:function(e,t,n){"use strict";var a=n("QbLZ"),r=n.n(a),i=n("iCc5"),o=n.n(i),s=n("V7oC"),l=n.n(s),c=n("FYw3"),u=n.n(c),d=n("mRg0"),p=n.n(d),m=n("hbEN"),h=n("ifKl"),b=n("kxpR"),f=n.n(b),g=n("XHGt"),_=n("fvjX"),v=n("aK/h"),y=n("nNoG"),k=n("kOzZ"),O=n("za+y"),C=n("O5cs"),E=n("qPro"),j=new y.b("apps_browser"),S=(v.b.object.isRequired,v.b.bool,v.b.oneOfType([v.b.object,v.b.func]),v.b.func,v.b.bool,v.b.string,{isAppLauncher:!1,forwardedRef:void 0,searchAppsIfNeeded:h.a,isLoading:!1,searchInput:""}),I=function(e){function t(e){o()(this,t);var n=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleSearchInputChange=n.handleSearchInputChange.bind(n),n.searchApps=n.searchApps.bind(n),n.debouncedSearchApps=Object(m.a)(n.searchApps,300),n}return p()(t,e),l()(t,[{key:"handleSearchInputChange",value:function(e){var t="";e.target.value&&(t=e.target.value.trim()),t!==this.props.searchInput&&this.debouncedSearchApps(t)}},{key:"searchApps",value:function(e){var t=this.props,n=t.clogger,a=t.isAppLauncher;e.length>0&&n.track("APP_INDEX_SEARCH"),this.props.searchAppsIfNeeded({isAppLauncher:a,searchInput:e})}},{key:"render",value:function(){var e=this.props,t=e.isLoading,n=e.searchInput,a=e.forwardedRef;return f.a.createElement(E.a,{ref:a,placeholder:j.t("Search by name or category (e.g. productivity, sales)"),icon:"search",autoFocus:!0,isLoading:t,onChange:this.handleSearchInputChange,value:n,"data-qa":"apps_browser__filter_input"})}}]),t}(b.Component);I.displayName="AppsBrowserFilter",I.defaultProps=S;var w=Object(g.b)(function(e){return{clogger:Object(k.a)({state:e}),isLoading:Object(C.g)(e),searchInput:Object(C.m)(e)}},function(e){return Object(_.b)({searchAppsIfNeeded:O.f},e)})(I);t.a=f.a.forwardRef(function(e,t){return f.a.createElement(w,r()({},e,{forwardedRef:t}))})},Qv4Q:function(e,t,n){"use strict";var a=n("W3KZ"),r=n("X6iR"),i=n("OZf9"),o=n("IzLi"),s=n("gSGL"),l=n("fujP"),c=n("rWF5"),u=function(e){var t={},n={},a=Object(c.p)()?"apple":"google";Object(i.a)(e,function(e,i){if(i)if(Object(r.a)(e,"alias:"))t[i]=e.slice("alias:".length);else{var l=void 0;Object(s.a)(e)?l=e:Object(o.a)(e)&&(l=e[a]),l&&(n[i]=l)}});var u={};return Object(l.a)(n)||(u.emojis=n),Object(l.a)(t)||(u.aliases=t),u},d=n("eK75"),p=n("LAi+"),m=void 0,h=function(){if(m)return m;var e=Object(d.a)().source;return m=new RegExp("^(\\+|\uff0b|-|\uff0d) {0,1}("+e+")\\s*$")},b=n("WVKS"),f=n("aLpA"),g=/[-[\]{}()*+?.,\\^$|#\s]/g,_=/\n?(6\)|7\))/,v=function(e){var t=0,n=[],a=e.replace(Object(p.a)(),function(a,r,i,o){var s=t;t=o+a.length;var l=-1!==i.indexOf("("),c=-1!==i.indexOf(")");if((l||c)&&-1===n.indexOf(i)&&n.push(i),c&&!l){var u=e.substring(s,o);if(-1!==u.indexOf("(")&&-1===u.indexOf(")"))return a}if("\n8)"===a){var d=e.substring(0,o);if(_.test(d))return a}return f.l[i]?r+":"+f.l[i]+":":a});if(n.length){var r=n.map(function(e){return e.replace(g,"\\$&")}),i=new RegExp("(\\(.+)("+r.join("|")+")(.+\\))","g");a=a.replace(i,function(e,t,n,a){return f.l[n]?t+":"+f.l[n]+":"+a:e})}return a},y=n("m1cH"),k=n.n(y),O=n("yHhI"),C=function(e){if(!Object(s.a)(e))return null;try{var t=e.split("-").map(function(e){return"0x"+e});return String.fromCodePoint.apply(String,k()(t))}catch(e){Object(O.b)().info("Error converting unicode sequence to native emoji: ",e)}return null},E=n("nKoU"),j=n("bPB8"),S=function(e){if(!Object(s.a)(e))return null;var t=[].concat(k()(e)).map(function(e){var t=e.codePointAt(0);if(!t)return null;var n=t.toString("16");return Object(E.a)(n,4,"0")});return Object(j.a)(t).join("-")};n.d(t,"g",function(){return a.a}),n.d(t,"i",function(){return u}),n.d(t,"c",function(){return d.a}),n.d(t,"d",function(){return p.a}),n.d(t,"f",function(){return h}),n.d(t,"e",function(){return b.a}),n.d(t,"h",function(){return v}),n.d(t,"b",function(){return C}),n.d(t,"a",function(){return S})},Qwh8:function(e,t,n){},"R//h":function(e,t,n){"use strict";var a=n("kxpR"),r=n.n(a),i=(n("aK/h"),n("XHGt")),o=n("/Rx2"),s=n("RQI5"),l=function(e){return r.a.createElement(s.a.Provider,{value:e.userAttentionIsOnChat},e.children)};l.displayName="UserAttentionProvider",l.defaultProps={userAttentionIsOnChat:!0};t.a=Object(i.b)(function(e){return{userAttentionIsOnChat:Object(o.e)(e)}})(l)},R4Ut:function(e,t,n){},RHBl:function(e,t,n){},RJyz:function(e,t,n){},"RQ+B":function(e,t,n){},RQI5:function(e,t,n){"use strict";var a=n("kxpR"),r=n.n(a);t.a=r.a.createContext(!0)},"RX/a":function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("ifKl"),p=n("aK/h"),m=n("kxpR"),h=n.n(m),b=n("tn36"),f=n("TSYQ"),g=n.n(f),_=n("QbLZ"),v=n.n(_),y=n("XHGt"),k=n("M4HD"),O=n("MMa9"),C=n("1zbP"),E=n("AE1P"),j=n("7ajy"),S=n("V/As"),I=n("Rrdp"),w=n("ukeO"),N=n("/3PZ"),T=n("A+cF"),A=n("od5y"),R=n("kd6D"),P=n("yPgC"),M=(n("KrOh"),R.a.small),x=(p.b.string,p.b.bool,p.b.bool,P.a.maybeUnknown(P.a.App.isRequired).isRequired,P.a.maybeUnknown(P.a.AppGlobalAction.isRequired).isRequired,{className:void 0,isDeactivated:!1,invert:!1});function F(e){var t=e.className,n=e.app,a=e.action,r=e.isDeactivated,i=e.invert,o=i&&!r,s=void 0,l=void 0,c=Object(C.b)(a)?Object(O.a)(a):null;if(Object(C.b)(n)&&Object(C.b)(a)){s=Object(k.b)(n);var u=Object(S.b)(n,M);l=function(e){return h.a.createElement(w.a,v()({},e,{classes:e.className,image:u,ariaHidden:!0}))}}else s=h.a.createElement(I.a,{type:Object(C.d)(n)?"unknown":"non-existent",invert:o}),l=function(e){return h.a.createElement(N.a,v()({},e,{isNonExistent:Object(C.c)(n),size:M,subtler:r,invert:o}))};var d=r&&!i?R.c.dim:null;return h.a.createElement(T.d,{avatar:function(e){return h.a.createElement("span",{className:"c-app_action_entity__avatar_container"},l(e),h.a.createElement(A.b,{type:"bolt-filled",className:"c-app_action_entity__bolt_icon",size:"inherit"}))},className:t,size:"small",style:d,text:h.a.createElement("span",null,h.a.createElement("span",{className:"c-app_action_entity__app_label","data-qa":"action_entity_app_label"},s),c?h.a.createElement("span",{className:"c-app_action_entity__action_label","data-qa":"action_entity_action_label"},c):null)})}F.displayName="SmallAppActionEntity",F.defaultProps=x;var L=Object(y.b)(function(e,t){var n=t.app,a=t.appId,r=t.action,i=t.actionId;return{app:n||Object(E.e)(e,a),action:r||Object(j.b)(e,{appId:a,actionId:i})}})(F),D={id:p.b.string.isRequired,index:p.b.number.isRequired,suggestion:p.b.object.isRequired,isSelected:p.b.bool.isRequired,onDelete:p.b.func,onMouseUp:p.b.func.isRequired,onMouseMove:p.b.func.isRequired},U={onDelete:d.a},B=h.a.forwardRef(function(e,t){var n=e.id,a=e.index,r=e.isSelected,i=e.suggestion,o=e.onMouseUp,s=e.onMouseMove,l=i.suggestion_replacement,c=i.exact_string,u=i.featureVector,d=e.suggestion.app_action;return h.a.createElement("li",{ref:t,"data-index":a,"data-type":i.type,"data-replacement":l,"data-exact-string":c,"data-feature-vector":u,"data-is-action":!0,"data-id":d.id,id:n,role:"option",tabIndex:"-1","aria-selected":r,onMouseMove:s,onClick:o,className:g()("c-search_autocomplete__suggestion_item",{"c-search_autocomplete__suggestion_item--selected":r})},h.a.createElement(L,{actionId:d.id,appId:d.app_id,className:"c-search_autocomplete__app_action",isActive:r}))});B.defaultProps=U;var q=B,H=n("4Twu"),W=n("6kok"),G=n("Fdc0"),K=(p.b.number,{unreadCount:void 0}),V=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props.unreadCount;if(!e)return null;var t=e<10?e:"9+";return h.a.createElement("span",{className:"c-search_autocomplete__unread_count"},t)}}]),t}(m.PureComponent);V.displayName="UnreadCount",V.defaultProps=K;var z=Object(y.b)(function(e,t){var n=t.model;return{unreadCount:Object(G.yb)(n)?Object(G.s)(e,n):Object(W.p)(n)}})(V),Y=n("nNoG"),Q=n("oiAH"),X=new Y.b("jumper"),J=h.a.forwardRef(function(e,t){var n=e.id,a=e.index,r=e.isSelected,i=e.suggestion,o=e.onMouseUp,s=e.onMouseMove,l=e.hasChannelNameCollision,c=i.suggestion_replacement,u=i.exact_string,d=i.featureVector,p=i.channel||i.mpim,m=e.suggestion.channel&&e.suggestion.channel._jumper_previous_name_match,b=Object(W.nb)(i.channel),f=i.channel&&!b&&!Object(W.X)(p),_=Object(W.pb)(p),v=_&&Object(W.X)(p),y=e.suggestion.display_context&&e.suggestion.display_context.subqueryScoresByMember;return h.a.createElement("li",{ref:t,"data-index":a,"data-type":i.type,"data-replacement":c,"data-exact-string":u,"data-feature-vector":d,"data-is-navigational":!0,"data-id":p.id,id:n,role:"option",tabIndex:"-1","aria-selected":r,onMouseMove:s,onClick:o,className:g()("c-search_autocomplete__suggestion_item",{"c-search_autocomplete__suggestion_item--selected":r})},_?h.a.createElement(Q.a,{id:p.id,isActive:r,isDeactivated:v,matchData:y,useCarpeMPDM:!0}):h.a.createElement(H.a,{className:"c-search_autocomplete__channel",channel:p,channelId:p.id,showDraftIcon:b,inline:!0,showTeamIconForXwsChannels:!0,showTeamIconForLocalChannels:l,showArchived:!0,previousName:m}),f&&h.a.createElement("span",{className:"c-search_autocomplete__channel-membership"},X.t("Not a member",{fallbackHash:"28de8887932845dddf7c04d15831c5780b353820"})),h.a.createElement(z,{model:p}))});J.defaultProps=U;var Z=J,$=n("lek6"),ee=h.a.forwardRef(function(e,t){var n=e.id,a=e.index,r=e.isSelected,i=e.suggestion,o=e.onMouseUp,s=e.onMouseMove,l=i.suggestion_replacement,c=i.exact_string,u=i.featureVector,d=i.file;return h.a.createElement("li",{ref:t,"data-index":a,"data-type":i.type,"data-replacement":l,"data-exact-string":c,"data-feature-vector":u,"data-id":d.id,"data-is-navigational":!0,key:d.id,id:n,role:"option",tabIndex:"-1","aria-selected":r,onMouseMove:s,onClick:o,className:g()("c-search_autocomplete__suggestion_item",{"c-search_autocomplete__suggestion_item--selected":r})},h.a.createElement(A.b,{file:"tiny",type:e.suggestion.type,className:"c-search_autocomplete__icon  c-search_autocomplete__icon--file"}),h.a.createElement("div",{className:"c-search_autocomplete__filetype_title"},h.a.createElement($.a,{text:d.title,noLinking:!0,noSpecials:!0,doInlineImages:!1,noJumbomoji:!0,noHighlights:!0,noHexColors:!0,noCode:!0,noQuotes:!0})),h.a.createElement("div",{className:"c-search_autocomplete__filetype_description"},e.suggestion.fileTypeDescription))});ee.defaultProps=U;var te=ee,ne=n("YEIV"),ae=n.n(ne),re=n("xWuZ"),ie=n("OqoL"),oe=n("5mKg"),se=n("1hAG"),le=n("Lev8"),ce=n("XLFM"),ue=n("Rjjz"),de=n("hPzE"),pe=new Y.b("search"),me=(p.b.string.isRequired,p.b.func,p.b.string.isRequired,p.b.string.isRequired,p.b.func.isRequired,{onDelete:d.a}),he=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(b.a)(n,["onClick"]),n}return u()(t,e),o()(t,[{key:"onClick",value:function(e){var t=this;e.stopPropagation(),this.props.searchDelete({hash:this.props.queryHash,searchSessionId:this.props.searchSessionId,querySessionId:this.props.querySessionId}).then(function(){t.props.onDelete()})}},{key:"render",value:function(){return h.a.createElement("div",{className:"c-search_autocomplete__suggestion_action"},h.a.createElement(ce.c,{className:"c-search_autocomplete__suggestion_delete",onClick:this.onClick,label:pe.t("delete history result")},h.a.createElement(A.b,{type:"times_small",inline:!0})))}}]),t}(m.PureComponent);he.displayName="Delete",he.defaultProps=me;var be=Object(y.b)(null,function(e){return{searchDelete:function(){return e(ue.o.apply(void 0,arguments))},querySessionId:e(Object(de.f)()),searchSessionId:e(Object(de.g)())}})(he),fe=n("rWF5"),ge=new Y.b("search"),_e=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.user,n=e.fullNameOrDisplayName,a=e.filter,r=Object(G.Gb)(t),i=Object(G.tb)(t),o=Object(G.mb)(t),s=Object(G.kb)(t),l=Object(fe.m)(),c=void 0;c="from"===a?ge.t("from")+":":"to"===a?ge.t("to")+":":null;var u={backgroundImage:"url("+(l?t.profile.image_48:t.profile.image_24)+")"};return h.a.createElement("span",{className:g()("token","member_token",{ra:r,external_member:i,deleted:o}),"data-member-id":t.id},h.a.createElement("span",{className:g()({bot:s,member_preview_link:!s},"member_image","thumb_24"),"data-member-id":t.id,"data-thumb-size":"24",style:u,"aria-hidden":"true"})," ",h.a.createElement("span",{className:"token_label"},c,h.a.createElement("b",null,"@",n)))}}]),t}(m.PureComponent);_e.displayName="SuggestionQueryUserFilterBase",_e.defaultProps={filter:void 0};var ve=Object(y.b)(function(e,t){var n=t.user;return{fullNameOrDisplayName:Object(G.V)(e,n)}})(_e),ye=n("hCvz"),ke=n("G4ux"),Oe=n("4M+g"),Ce=new Y.b("search"),Ee=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.channel,n=e.displayName,a=e.fallbackName,r=e.isUnknown,i=e.isNonExistent,o=Ce.t("in:");return r?h.a.createElement(ye.b,{size:"random"}):h.a.createElement("span",{className:"token channel_token"},h.a.createElement("span",{className:"token_label"},i&&""+o+a,!i&&!n&&""+o+a,!i&&n&&h.a.createElement(m.Fragment,null,o,Object(W.Bb)(t)&&h.a.createElement(A.b,{type:"lock",size:"inherit"}),Object(W.Cb)(t)&&h.a.createElement(A.b,{type:"channel",size:"inherit"}),h.a.createElement("b",null,n))))}}]),t}(m.PureComponent);Ee.displayName="SuggestionQueryInFilterBase",Ee.defaultProps={fallbackName:"",displayName:void 0,channel:void 0,isUnknown:!1,isNonExistent:!1};var je=Object(y.b)(function(e,t){var n=t.member,a=t.channel,r=t.fallbackName,i="",o=!1,s=!1;if(n){var l=Object(ke.d)(e,n.id);o=Object(G.Ob)(l),s=Object(G.Bb)(l),i=o||s?"":"@"+Object(G.V)(e,l)}else if(a){var c=Object(Oe.e)(e,a.id);o=Object(W.Mb)(c),s=Object(W.rb)(c),i=o||s?"":Object(W.x)(e,c,{publicChannelIncludeHashSign:!1})}return{fallbackName:r,displayName:i,isUnknown:o,isNonExistent:s}})(Ee);je.propTypes={member:p.b.object,fallbackName:p.b.string},je.defaultProps={member:void 0,fallbackName:""};var Se=je,Ie=n("n3t6"),we=new Y.b("search"),Ne=function(e){var t=e.theAttribute;return h.a.createElement("span",{className:"token has_token"},h.a.createElement("span",{className:"token_label"},we.t("has"),":",h.a.createElement("b",null,h.a.createElement($.a,{text:Object(Ie.a)(t),noLinking:!0,noSpecials:!0,doInlineImages:!1,noJumbomoji:!0,noHighlights:!0,noHexColors:!0,noCode:!0,noQuotes:!0}))))};Ne.displayName="SuggestionQueryHasFilter";var Te=Ne,Ae=new Y.b("search"),Re=function(e){var t=e.fileType;return h.a.createElement("span",{className:"token type_token"},h.a.createElement("span",{className:"token_label"},Ae.t("type"),":",h.a.createElement("b",null,t)))};Re.displayName="SuggestionQueryTypeFilter";var Pe=Re,Me=n("uwE/"),xe=function(e){var t=e.modifierName,n=e.dateString;return h.a.createElement("span",{className:"token date_token"},h.a.createElement("span",{className:"token_label"},Object(Me.f)()[t],": ",n))};xe.displayName="SuggestionQueryDateFilter";var Fe=xe,Le=new Y.b("search");v()({},D,{getClnMessage:p.b.func.isRequired,orgName:p.b.string,teamName:p.b.string,clientTheme:p.b.oneOf(["light","dark"])});var De=v()({},U,{orgName:"",teamName:"",clientTheme:"light"}),Ue=h.a.forwardRef(function(e,t){var n,a,r=e.id,i=e.index,o=e.isSelected,s=e.suggestion,l=e.onDelete,c=e.onMouseUp,u=e.onMouseMove,d=e.teamName,p=e.orgName,m=e.clientTheme,b=s.suggestion_replacement,f=s.exact_string,_=s.hash,v=s.token_list,y=s.featureVector,k=s.isCustomDateFilter,O=s.deletable;return h.a.createElement("li",{ref:t,"data-index":i,"data-type":s.type,"data-replacement":b,"data-exact-string":f,"data-feature-vector":y,"data-is-custom-date-filter":k,"data-is-replacement-full":!0,id:r,role:"option",tabIndex:"-1","aria-selected":o,onMouseMove:u,onClick:c,className:g()("c-search_autocomplete__suggestion_item",{"c-search_autocomplete__suggestion_item--selected":o})},h.a.createElement(A.b,{type:"search-medium",className:"c-search_autocomplete__icon c-search_autocomplete__icon--query"}),h.a.createElement("div",{className:"c-search_autocomplete__query_wrapper"},h.a.createElement("span",{className:g()("c-search_autocomplete__query_parts",ae()({},"c-search_autocomplete__query_parts--"+m,"light"!==m))},(n=v.map(function(t,n){switch(!0){case t.is_type_string:return h.a.createElement($.a,{key:n,text:e.getClnMessage(t.string),noLinking:!0,noSpecials:!0,doInlineImages:!1,noJumbomoji:!0,noHighlights:!0,noHexColors:!0,noCode:!0,noQuotes:!0});case t.is_type_phrase:return"\u201c"+t.phrase+"\u201d";case t.is_type_member_filter&&t.is_type_from_filter:return h.a.createElement(ve,{key:n,filter:"from",user:t.user});case t.is_type_member_filter&&t.is_type_to_filter:return h.a.createElement(ve,{key:n,filter:"to",user:t.user});case t.is_type_member:return h.a.createElement(ve,{key:n,user:t.user});case t.is_type_in_filter:return h.a.createElement(Se,{key:n,member:t.user,channel:t.channel,fallbackName:t.fallbackName});case t.is_type_has_filter:return h.a.createElement(Te,{key:n,theAttribute:t.thing});case t.is_type_type_filter:return h.a.createElement(Pe,{key:n,fileType:t.file_type});case t.is_type_date_filter:return h.a.createElement(Fe,{key:n,modifierName:t.modifier,dateString:t.date_string_normalized});default:return null}}),a=" ",Object(re.a)(n.map(function(e){return[a,e]})).slice(1)))),h.a.createElement("span",{className:"c-search_autocomplete__omniswitcher_hint"},"\u2014"," ",Le.rt("Search {teamName}",{teamName:p||d||""})," "),O&&h.a.createElement(be,{queryHash:_,onDelete:l}))});Ue.defaultProps=De;var Be=Object(y.b)(function(e){return{getClnMessage:function(t){return Object(ie.b)(e,t,{isInternalMessage:!1})},orgName:Object(se.e)(e)||"",teamName:Object(oe.f)(Object(se.d)(e)),clientTheme:Object(le.c)(e)}},null,null,{withRef:!0})(Ue),qe=n("fyoz"),He=h.a.forwardRef(function(e,t){var n=e.id,a=e.index,r=e.isSelected,i=e.suggestion,o=e.onMouseUp,s=e.onMouseMove,l=i.suggestion_replacement,c=i.exact_string,u=i.featureVector,d=i.user,p=d&&d.profile&&d.profile.bot_id,m=Object(G.mb)(d);return h.a.createElement("li",{ref:t,"data-index":a,"data-type":i.type,"data-replacement":l,"data-exact-string":c,"data-feature-vector":u,"data-bot-id":p,"data-id":d.id,"data-is-navigational":!0,id:n,role:"option",tabIndex:"-1","aria-selected":r,onMouseMove:s,onClick:o,className:g()("c-search_autocomplete__suggestion_item",{"c-search_autocomplete__suggestion_item--selected":r})},h.a.createElement("span",{className:g()("c-search_autocomplete__member",{"c-search_autocomplete__member--deleted":m})},h.a.createElement(qe.b,{id:d.id,size:"small",showPresence:!m,newPresence:!0,showAvatar:!0,isDraftContext:!0,showDeactivatedAnnotation:m})),h.a.createElement(z,{model:d}))});He.defaultProps=U;var We=He,Ge=n("ndUn"),Ke=h.a.forwardRef(function(e,t){var n=e.id,a=e.index,r=e.isSelected,i=e.suggestion,o=e.onMouseUp,s=e.onMouseMove,l=i.suggestion_replacement,c=i.exact_string,u=i.featureVector,d=e.suggestion.team;return h.a.createElement("li",{ref:t,"data-index":a,"data-type":i.type,"data-replacement":l,"data-exact-string":c,"data-feature-vector":u,"data-is-navigational":!0,"data-id":d.id,id:n,role:"option",tabIndex:"-1","aria-selected":r,onMouseMove:s,onClick:o,className:g()("c-search_autocomplete__suggestion_item",{"c-search_autocomplete__suggestion_item--selected":r})},h.a.createElement(Ge.a,{className:"c-search_autocomplete__team",team:d,id:d.id}))});Ke.defaultProps=U;var Ve=Ke,ze=(n("y/bS"),p.b.string,p.b.string.isRequired,p.b.string.isRequired,p.b.bool,{className:void 0,inline:!1}),Ye=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.displayName,n=e.id,a=e.className,r=e.inline,i="list";return"Vall_threads"===n?i="small-reply":"Vall_unreads"===this.props.id&&(i="list"),h.a.createElement("span",{className:g()("c-view_name",a)},h.a.createElement(A.b,{className:"c-view_name__icon",type:i}),h.a.createElement("span",{className:g()("c-view_name__text",{"c-view_name__text--inline":!r})},t))}}]),t}(m.PureComponent);Ye.displayName="ViewName";var Qe=Ye;Ye.defaultProps=ze,Ye.displayName="ViewName";var Xe=Qe,Je=h.a.forwardRef(function(e,t){var n=e.id,a=e.index,r=e.isSelected,i=e.suggestion,o=e.onMouseUp,s=e.onMouseMove,l=i.suggestion_replacement,c=i.exact_string,u=i.featureVector,d=e.suggestion.view;return h.a.createElement("li",{ref:t,"data-index":a,"data-type":i.type,"data-replacement":l,"data-exact-string":c,"data-feature-vector":u,"data-is-navigational":!0,"data-id":d.id,id:n,role:"option",tabIndex:"-1","aria-selected":r,onMouseMove:s,onClick:o,className:g()("c-search_autocomplete__suggestion_item",{"c-search_autocomplete__suggestion_item--selected":r})},h.a.createElement(Xe,{displayName:d.name,id:d.id,className:"c-search_autocomplete__view",inline:!0}))});Je.defaultProps=U;var Ze=Je;n.d(t,"b",function(){return et});p.b.number.isRequired,p.b.object.isRequired,p.b.bool.isRequired,p.b.func,p.b.func,p.b.func,p.b.bool,p.b.any;var $e={onAccept:d.a,onSelected:d.a,onDelete:d.a,hasChannelNameCollision:!1,listItemRef:void 0},et=function(e){return"c-search_autcomplete__suggestion_"+e},tt=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(b.a)(n,["onMouseUp","onMouseMove","onDelete"]),n}return u()(t,e),o()(t,[{key:"onMouseUp",value:function(e){0!==e.button||e.ctrlKey||this.props.onAccept()}},{key:"onMouseMove",value:function(){this.props.isSelected||this.props.onSelected(this.props.index,!0)}},{key:"onDelete",value:function(){this.props.onDelete(this.props.suggestion)}},{key:"componentClassForSuggestion",value:function(e){return e.is_type_query_completion?Be:e.is_type_user?We:e.is_type_channel||e.is_type_mpim?Z:e.is_type_file?te:e.is_type_view?Ze:e.is_type_team?Ve:e.is_type_app_action?q:null}},{key:"render",value:function(){var e=et(this.props.index),t=this.componentClassForSuggestion(this.props.suggestion);return h.a.createElement(t,{ref:this.props.listItemRef,id:e,index:this.props.index,isSelected:this.props.isSelected,suggestion:this.props.suggestion,onDelete:this.onDelete,onMouseUp:this.onMouseUp,onMouseMove:this.onMouseMove,hasChannelNameCollision:this.props.hasChannelNameCollision})}}]),t}(m.PureComponent);tt.displayName="Suggestion",tt.defaultProps=$e;t.a=tt},RjVJ:function(e,t,n){"use strict";var a=n("F294"),r=n("XHGt"),i=n("Uk1S"),o=n("fYfO"),s=n("uvIC"),l=n("brL+"),c=n("1hAG"),u=n("hOQf"),d=n("5mKg"),p=n("HvGc"),m=n("a+Oh"),h=n("iCc5"),b=n.n(h),f=n("V7oC"),g=n.n(f),_=n("FYw3"),v=n.n(_),y=n("mRg0"),k=n.n(y),O=n("ifKl"),C=n("TSYQ"),E=n.n(C),j=n("aK/h"),S=n("kxpR"),I=n.n(S),w=n("nNoG"),N=n("lek6"),T=n("lwWk"),A=n("u97G"),R=n("dHYv"),P=new w.b("threads"),M=(j.b.string.isRequired,j.b.string.isRequired,j.b.string.isRequired,j.b.string,j.b.string,j.b.object.isRequired,j.b.object,j.b.string.isRequired,j.b.func,j.b.bool,{className:null,theme:"light",showThread:O.a,rootFile:void 0,featureRichTextRendering:!1}),x=function(e){function t(e){b()(this,t);var n=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.openThread=n.openThread.bind(n),n}return k()(t,e),g()(t,[{key:"openThread",value:function(e){var t=this.props,n=t.showThread,a=t.channelId,r=t.threadTs,i=t.ts;e.preventDefault(),n({channelId:a,threadTs:r,highlightTs:i})}},{key:"renderRootText",value:function(){var e=this.props,t=e.rootMsg,n=e.rootFile,a=e.featureRichTextRendering;if("tombstone"===Object(u.N)(t))return null;if(a&&Object(u.mb)(t)&&!Object(u.pb)(t,a))return I.a.createElement(R.a,{richTextBlock:t.blocks[0]});var r=Object(u.M)(t,n);return r?I.a.createElement(N.a,{text:r,noHighlights:!0,noHexColors:!0,noJumbomoji:!0,noLinking:!0,noCode:!0,noQuotes:!0,customLineEnding:"\u2026",maxNewlines:1}):null}},{key:"render",value:function(){var e=this,t=this.props,n=t.rootMsg,a=t.teamDomain,r=t.channelId,i=t.ts,o=t.threadTs,s=t.theme;if(!n)return null;var l=Object(u.u)({teamDomain:a,channelId:r,ts:i,threadTs:o}),c=E()("c-message__broadcast_preamble",this.props.className),d=!(!(n&&n.blocks&&n.blocks.length)||Object(u.mb)(n))?null:this.renderRootText(),p=void 0;if(d)p=I.a.createElement("div",{className:c},I.a.createElement("span",{"data-qa":"thread-broadcast-preamble-with-text",className:"c-message__broadcast_preamble_meta"},Object(A.a)()),I.a.createElement(T.a,{className:"c-message__broadcast_preamble_link",href:l,target:"_blank",rel:"noopener noreferrer",onClick:this.openThread,dir:"auto"},d));else{var m=P.rt("replied to <a>a thread</a>",null,function(t){var n=t.key,a=t.text;return I.a.createElement(T.a,{className:"c-message__broadcast_preamble_link",key:n,href:l,target:"_blank",rel:"noopener noreferrer",onClick:e.openThread},a)});p=I.a.createElement("div",{className:c},m)}return"light"===s?I.a.createElement("div",{className:"c-message__broadcast_preamble_outer"},p):p}}]),t}(S.PureComponent);x.displayName="ThreadBroadcastPreamble",x.defaultProps=M;var F=x;var L={showThread:p.l};t.a=Object(r.b)(function(e,t){var n=t.threadTs,r=t.channelId,p=Object(o.a)(e,r,n);if(!p)return{};var h=void 0;if(p.files&&p.files.length){var b=Object(a.a)(p.files);h=Object(s.c)(e,b)}var f=Object(u.V)(p)||Object(l.b)(e),g=Object(c.i)(e,f);return{rootMsg:p,rootFile:h,teamDomain:Object(d.g)(g),theme:Object(i.a)(e),featureRichTextRendering:Object(m.b)(e)}},L)(F)},Rmar:function(e,t,n){},RoDk:function(e,t,n){"use strict";var a=n("kxpR"),r=n.n(a),i=n("aK/h"),o=n("nNoG"),s=n("WTjW"),l=n("/m+M"),c=new o.b("team"),u=(i.b.object,{member:void 0});function d(e){var t=e.member;if(!Object(l.a)().featureModernProfileFlexpane)return null;var n=c.t("To interact with a person from another organization, you need to be in at least one channel together.");return r.a.createElement("div",{className:"p-member_profile_card__special_text"},r.a.createElement("strong",null,c.rt("You don\u2019t share any channels with {memberName}.",{memberName:r.a.createElement(s.a,{id:t.id})}))," ",n)}d.displayName="MemberProfileStranger",d.defaultProps=u,t.a=d},"Rx/r":function(e,t,n){},SAUz:function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("ifKl"),p=n("kxpR"),m=n.n(p),h=n("aK/h"),b=n("XHGt"),f=n("TSYQ"),g=n.n(f),_=n("zoXk"),v=n("HvGc"),y=n("UUlk"),k=n("uFGw"),O=n("18Pa"),C=(h.b.string,h.b.arrayOf(h.b.string),h.b.string,h.b.string,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.oneOf(["large","medium"]),h.b.string,{flexName:void 0,flexParams:void 0,flexOrigin:void 0,flexOriginId:void 0,previewFile:d.a,showUserGroupList:d.a,toggleActivityFlexpane:d.a,showMemberDirectory:d.a,showDetails:d.a,showStarredItemsList:d.a,showMemberProfile:d.a,showFileList:d.a,size:"large",className:void 0}),E=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n.getOrigin=n.getOrigin.bind(n),n.openOrigin=n.openOrigin.bind(n),n}return u()(t,e),o()(t,[{key:"onClick",value:function(){var e=this.props,t=e.flexOrigin,n=e.flexName;if(t)return this.openOrigin();switch(n){case"files":return this.props.showFileList();case"team":return this.props.showMemberDirectory();case"groups":case"user_groups":return this.props.showUserGroupList();default:return null}}},{key:"getOrigin",value:function(){var e=this.props,t=e.flexOrigin,n=e.flexName,a=e.flexParams,r=a&&a[0];if(t)return t;switch(n){case"files":return Object(y.a)(r)?"files":null;case"team":case"groups":return Object(k.a)(r)?"groups":null;case"user_groups":return Object(k.a)(r)?"user_groups":null;default:return null}}},{key:"openOrigin",value:function(){var e=this.props,t=e.flexOrigin,n=e.flexOriginId;switch(t){case"member_preview":return this.props.showMemberProfile({memberId:n});case"directory":return this.props.showMemberDirectory();case"starred_items":return this.props.showStarredItemsList("stars");case"details":case"channel_page":case"group_page":case"im_page":return this.props.showDetails({sectionId:n});case"activity":case"mentions":return this.props.toggleActivityFlexpane();case"file_details":return Object(y.a)(n)?this.props.previewFile({fileId:n}):this.props.showFileList();case"files":return this.props.showFileList();default:return null}}},{key:"render",value:function(){if(!this.getOrigin())return null;var e=this.props,t=e.size,n=e.className,a="chevron-"+t+"-left";return m.a.createElement(O.a,{className:g()("p-global_nav__flex_btn","p-global_nav__flex_btn--back",n),icon:a,onClick:this.onClick})}}]),t}(p.Component);E.displayName="FlexBack",E.defaultProps=C;var j={previewFile:v.c,showUserGroupList:v.o,toggleActivityFlexpane:v.q,showMemberDirectory:v.i,showDetails:v.e,showStarredItemsList:v.k,showMemberProfile:v.j,showFileList:v.g};t.a=Object(b.b)(function(e,t){var n=t.flexOrigin;return{flexName:Object(_.j)(e),flexParams:Object(_.e)(e),flexOrigin:n||Object(_.c)(e),flexOriginId:Object(_.d)(e)}},j)(E)},SNtu:function(e,t,n){"use strict";function a(e){var t=e.prevUserAttentionIsOnChat,n=e.prevComposerVisible,a=e.currentUserAttentionIsOnChat,r=e.currentComposerVisible;return!(a||!t)||!(n||!r)}n.d(t,"a",function(){return a})},SaAd:function(e,t,n){},Sqd7:function(e,t,n){},T00V:function(e,t,n){"use strict";var a=n("m1cH"),r=n.n(a),i=n("TSYQ"),o=n.n(i),s=n("kxpR"),l=n.n(s),c=n("XHGt"),u=n("aK/h"),d=n("1zbP"),p=n("1hAG"),m=n("5mKg"),h=n("/3PZ"),b=n("6GV3"),f=[230,132,102,88,68,44,34],g=(u.b.string,u.b.bool,u.b.string.isRequired,u.b.number.isRequired,u.b.object,{className:void 0,invert:!1,team:void 0});function _(e){var t=e.className,n=e.id,a=e.invert,i=e.size,s=e.team,c=Object(d.c)(s),u=Object(d.d)(s);if(c||u)return l.a.createElement(h.a,{className:o()(t,"c-team_entity__icon"),isNonExistent:c,size:i,invert:a,"data-team-id":n});var p=function(e){var t=e.size,n=e.team,a=Object(m.i)(n);if(!a||a.image_default)return null;var i=2*t;return a["image_"+Object(b.a)(i,f)]||[].concat(r()(Object.values(n.icon))).pop()}({size:i,team:s}),g=!p&&function(e){var t=Object(m.f)(e);return Object(m.k)(t,{limit:2})}(s);return l.a.createElement("span",{"aria-hidden":"true",className:o()(t,"c-team_entity__icon",{"c-team_entity__icon--default":!p}),style:{backgroundImage:p&&"url("+p+")",fontSize:Math.round(i/1.8)+"px",height:i,lineHeight:i+"px",width:i},"data-team-id":n},g)}_.displayName="TeamIcon",_.defaultProps=g;t.a=Object(c.b)(function(e,t){var n=t.team||Object(p.i)(e,t.id);return{team:n,id:n.id}})(_)},TBaU:function(e,t,n){},TJrU:function(e,t,n){},TOkS:function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("FYw3"),o=n.n(i),s=n("V7oC"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("kxpR"),p=n("aK/h"),m=n("yHhI"),h=(p.b.shape({getState:p.b.func.isRequired,subscribeImmediate:p.b.func,subscribe:p.b.func.isRequired}).isRequired,p.b.func.isRequired,function(e){function t(e){r()(this,t);var n=o()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),a=e.store;return n.state=a.getState(),n.logger=Object(m.a)({getState:a.getState,label:"CONNECT-IMMEDIATE"}),n.unsubscribe=null,n.update=n.update.bind(n),n}return u()(t,e),l()(t,null,[{key:"getDerivedStateFromProps",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).store.getState()}}]),l()(t,[{key:"componentDidMount",value:function(){this.subscribeToStore()}},{key:"componentDidUpdate",value:function(e){this.props.store!==e.store&&(this.unsubscribeFromStore(),this.subscribeToStore())}},{key:"componentWillUnmount",value:function(){this.unsubscribeFromStore()}},{key:"subscribeToStore",value:function(){var e=this.props.store,t=e.subscribeImmediate;t||(this.logger.warn("subscribeImmediate not found on store"),t=e.subscribe),this.unsubscribe=t(this.update)}},{key:"unsubscribeFromStore",value:function(){this.unsubscribe&&this.unsubscribe()}},{key:"update",value:function(){var e=this;this.setState(function(){return e.props.store.getState()})}},{key:"render",value:function(){return this.props.render(this.state)}}]),t}(d.PureComponent));h.displayName="ConnectImmediate",t.a=h},TVjB:function(e,t,n){"use strict";var a=n("aK/h"),r=n("piHQ"),i=n("NrkL"),o=n("XoJV"),s=n("nNoG"),l=n("3pFD"),c=n("yHhI"),u=n("Z7Ay"),d=function(){var e=Object(c.b)({label:"EMOJI_TRANSLATION"}),t=Object(s.r)(),n=Object(i.a)();if(Object(s.g)())return e.info("Emoji translations not needed for default locale, only adding keywords"),void Object(o.a)({locale:t,localizedKeywordMap:n});if(Object(l.c)(t))if(Object(o.i)(t))e.info("Emoji translations already loaded for "+t);else{var a=Object(r.a)();a?(Object(o.b)({locale:t,canonicalToLocalized:a}),Object(o.a)({locale:t,localizedKeywordMap:n}),e.info("Emoji translations and keywords loaded for "+t)):e.info("Emoji translation map is null")}else e.info("Emoji translations not yet loaded for locale")};d.propTypes=a.b.string,t.a=d,Object(u.a)("loadEmojiTranslations",d)},TY84:function(e,t,n){"use strict";var a=n("tjIJ"),r=n("kxpR"),i=n.n(r),o=n("XHGt"),s=n("aK/h"),l=n("QbLZ"),c=n.n(l),u=n("jo6Y"),d=n.n(u),p=n("iCc5"),m=n.n(p),h=n("V7oC"),b=n.n(h),f=n("FYw3"),g=n.n(f),_=n("mRg0"),v=n.n(_),y=n("ifKl"),k=n("vJtL"),O=n("TSYQ"),C=n.n(O),E=n("mM05"),j=n.n(E),S=n("ajyX"),I=n("nNoG"),w=n("kOzZ"),N=n("tbBR"),T=n("1zbP"),A=n("UF3u"),R=n("AE1P"),P=n("EOYu"),M=n("1hAG"),x=n("G4ux"),F=n("eR+M"),L=n("Fdc0"),D=n("KPXh"),U=n("Qrgz"),B=n("+1yX"),q=n("vmJv"),H=n("zoXk"),W=n("2HDu"),G=n("aLpA");function K(e,t){if([G.H.MESSAGE_PANE,G.H.CHANNEL_DETAILS_FLEXPANE].includes(t)||!t){var n=Object(q.a)(e);if(Object(B.a)(n))return{channelId:n}}else if(t===G.H.THREADS_FLEXPANE){var a=Object(H.e)(e);return Object(W.a)(a[0])}return{}}var V=n("MREy"),z=n("XLFM"),Y=n("RMmo"),Q=n("6FZx"),X=(n("boyP"),s.b.bool,s.b.bool,s.b.string,s.b.func,s.b.func,s.b.func,s.b.number,s.b.string,s.b.string,{highlighted:!1,disabled:!1,className:"",onMouseEnter:y.a,onSelected:y.a,menuCallback:y.a,menuCallbackId:null,"data-qa":"menu_item_action_button",activeMenuId:void 0}),J=function(e){function t(e){m()(this,t);var n=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.disableHighlightedState=!1,n.handleMouseEnter=n.handleMouseEnter.bind(n),n.handleSelected=n.handleSelected.bind(n),n}return v()(t,e),b()(t,[{key:"componentDidMount",value:function(){this.bindKeyCommands()}},{key:"componentDidUpdate",value:function(){this.props.highlighted||(this.disableHighlightedState=!1)}},{key:"componentWillUnmount",value:function(){this.keyCommands&&this.keyCommands.reset()}},{key:"handleMouseEnter",value:function(e){this.disableHighlightedState=!0,this.props.onMouseEnter(e)}},{key:"handleSelected",value:function(e){this.props.onSelected(e),this.props.menuCallback(this.props.menuCallbackId,e)}},{key:"handleReturnKey",value:function(e){this.props.highlighted&&(this.handleSelected(e),e&&e.preventDefault&&e.preventDefault())}},{key:"bindKeyCommands",value:function(){var e=[{keys:["return"],handler:this.handleReturnKey.bind(this)}];this.keyCommands||(this.keyCommands=new Y.a),this.keyCommands.bindAll(e)}},{key:"render",value:function(){var e=this.props,t=e.disabled,n=e.highlighted,a=e.className,r=(e.onMouseEnter,e.onSelected,e.menuCallback,e.menuCallbackId,e.activeMenuId,d()(e,["disabled","highlighted","className","onMouseEnter","onSelected","menuCallback","menuCallbackId","activeMenuId"])),o=C()("c-menu_item_action_button",a,{"c-menu_item_action_button--highlighted":n&&!t&&!this.disableHighlightedState}),s=this.props.activeMenuId;return i.a.createElement("div",{className:"c-menu_item_action_button__container",onMouseEnter:this.handleMouseEnter,"data-qa":this.props["data-qa"]+"-wrapper"},i.a.createElement(z.d,c()({id:s,className:o,disabled:t,onClick:this.handleSelected,role:"menuitem",tabIndex:"-1",type:"outline"},r)))}}]),t}(r.PureComponent);J.displayName="MenuItemActionButton",J.defaultProps=X;var Z=Object(Q.b)(J),$=n("cD5Y"),ee=(n("guKx"),n("t85p")),te=n("uksu"),ne=n("9E9B"),ae=n("V/As"),re=n("zwKj"),ie=n("RB1+"),oe=n("u2vH"),se=n("M4HD"),le=n("7EGn"),ce=n("/m+M"),ue=n("0f2Y"),de=n("O/xh"),pe=n("dhvi"),me=n("U3Q0"),he=n("02hs"),be=(n("5SxQ"),new I.b("workflow_builder")),fe=function(e){var t=e.closeModal,n=e.collaborators,a=e.appName,o=Object(ce.a)().featureWorkflowBotsInClient,s=Object(r.useCallback)(function(){return n.map(function(e){return i.a.createElement(de.a,{key:e,userId:e,position:"left-bottom",includeRemoveFromChannelAction:!0},i.a.createElement(he.a,{id:e,className:"p-members_dialog__member_list_btn","data-qa":"collaborator_row_btn"}))})},[n]);return i.a.createElement(me.b,{title:o?be.rt("{usernameCount} collaborators on {appName}",{usernameCount:n.length,appName:a}):"",overlayClassName:"p-collaborators_dialog__overlay",onClose:t,showGoButton:!1,cancelText:be.t("Close")},s())};fe.displayName="CollaboratorsDialog";var ge=Object(o.b)(null,function(e){return{closeModal:function(){return e(Object(pe.a)())}}})(fe),_e=n("Lts7"),ve=n("Mjmw"),ye=(n("Ms/R"),new I.b("app_card")),ke=function(e){var t=e.id;return i.a.createElement(de.a,{userId:t,position:"left-bottom"},i.a.createElement(ue.a,null,i.a.createElement(ve.a,{id:t})))};ke.displayName="Collaborator";var Oe=Object(o.b)(null,function(e){return{openModal:function(){return e(pe.e.apply(void 0,arguments))}}})(function(e){var t=e.collaborators,n=e.openModal,a=e.appName,r=Object(ce.a)().featureWorkflowBotsInClient,o=t[0],s=t[1];switch(t.length){case 0:return"";case 1:return r?ye.rt("{username} created this workflow. ",{username:i.a.createElement(ke,{id:o})}):"";case 2:return r?ye.rt("{firstUser} and {secondUser} are collaborators on this workflow.",{firstUser:i.a.createElement(ke,{id:o}),secondUser:i.a.createElement(ke,{id:s})}):"";default:return r?ye.rt("{firstUser}, {secondUser} and {userCount} other people are <a>collaborators on this workflow</a>.",{firstUser:i.a.createElement(ke,{id:o}),secondUser:i.a.createElement(ke,{id:s}),userCount:t.length-2},function(e){var r=e.text;return i.a.createElement("span",{"data-collaborators-count":!0},i.a.createElement(ue.a,{onClick:function(){return n({element:i.a.createElement(ge,{collaborators:t,appName:a})})}},r))}):""}}),Ce=function(e){var t=e.app,n=e.cardHeader,a=e.launchWorkflowBuilder,o=e.currentUserId,s=e.disabledMessage,l=Object(ce.a)().featureWorkflowBotsInClient,c=Object(le.a)(t,"legacy_app.owner_ids",[]),u=c.some(function(e){return e===o});return i.a.createElement("div",{className:"p-app_profile_card__container","data-qa":"app_profile_card_container"},i.a.createElement(V.f,{width:320,noMargin:!0},n,i.a.createElement(r.Fragment,null,i.a.createElement(V.d,{noPaddingAbove:!0}),s&&s,!s&&c.length>0&&i.a.createElement("div",{className:"p-workflow_profile_card--body"},i.a.createElement("div",null,i.a.createElement(Oe,{collaborators:c,appName:t.profile.name,featureWorkflowBotsInClient:l})))),!u&&i.a.createElement(r.Fragment,null,i.a.createElement(V.d,{noPaddingAbove:!0}),i.a.createElement("div",{"data-workflow-profile-card-non-installer":!0,className:"p-workflow_profile_card--body"},l?ye.rt("Created with <a>Workflow Builder</a>.",null,function(e){var t=e.text;return i.a.createElement("span",{className:"margin_left_25"},i.a.createElement(ue.a,{onClick:a},t))}):"")),u&&i.a.createElement("div",{"data-workflow-profile-card-installer":!0},i.a.createElement(V.d,{noPaddingAbove:!0}),i.a.createElement(Z,{onClick:function(){return a({subPath:"slack-apps/"+t.app_id,source:"workflow_profile_card"})},className:"margin_bottom_100"},l?ye.t("Open in Workflow Builder"):""))))};Ce.displayName="WorkflowProfileCard",Ce.defaultProps={cardHeader:null,currentUserId:null,disabledMessage:null};var Ee=Object(o.b)(null,function(e){return{launchWorkflowBuilder:function(){return e(_e.a.apply(void 0,arguments))}}})(Ce),je=n("MnCE"),Se=n("VMwU"),Ie=n("e9ZU"),we=n("yluG"),Ne=(s.b.string,s.b.string.isRequired,s.b.string.isRequired,s.b.bool,s.b.object,{colorHex:"#2C2D30",isError:!1,externalTeam:void 0});function Te(e){var t=e.colorHex,n=e.imageUrl,a=e.name,r=e.isError,o=e.externalTeam,s={background:"\n\t\t\tlinear-gradient(\n\t\t\t\t136.53deg,\n\t\t\t\trgba(255, 255, 255, 0.05) 0%,\n\t\t\t\trgba(255, 255, 255, 0.2) 100%\n\t\t\t),\n\t\t\tlinear-gradient(\n\t\t\t\t312.01deg,\n\t\t\t\t"+t+" 0%,\n\t\t\t\trgba("+(Object(Se.f)(t)||[]).join(",")+", 0.75) 100%\n\t\t\t)\n\t\t",backgroundColor:t},l=C()("full_width",{"p-app_profile_card__header--external":o,"p-app_profile_card__header":!o});return r?null:i.a.createElement("div",{className:l,style:s,"data-qa":"app_card_header"},i.a.createElement(we.a,{externalTeam:o}),i.a.createElement("img",{className:"p-app_profile_card__avatar",src:n,alt:a,"data-qa":"app_header_icon"}),i.a.createElement("div",{className:"padding_left_100"},i.a.createElement("div",{className:"padding_bottom_25"},i.a.createElement("strong",{"data-qa":"app_header_name"},a),i.a.createElement("span",{className:"margin_left_50"},i.a.createElement(Ie.a,{inverse:!0,"data-qa":"app_header_app_label",isWorkflow:!0})))))}Te.defaultProps=Ne;var Ae=Object(je.a)(Te),Re=new I.b("app_card"),Pe=(s.b.string,s.b.string.isRequired,s.b.string.isRequired,s.b.func.isRequired,s.b.string.isRequired,s.b.bool,s.b.bool,s.b.object,{colorHex:"#2C2D30",isError:!1,isWorkflowApp:!1,externalTeam:void 0});function Me(e){var t=e.colorHex,n=e.imageUrl,a=e.name,r=e.onClick,o=e.tagline,s=e.isError,l=e.externalTeam,c=e.isWorkflowApp,u=Object(ce.a)().featureBuilderIsWorkflowApp,d={background:"\n\t\t\tlinear-gradient(\n\t\t\t\t136.53deg,\n\t\t\t\trgba(255, 255, 255, 0.05) 0%,\n\t\t\t\trgba(255, 255, 255, 0.2) 100%\n\t\t\t),\n\t\t\tlinear-gradient(\n\t\t\t\t312.01deg,\n\t\t\t\t"+t+" 0%,\n\t\t\t\trgba("+(Object(Se.f)(t)||[]).join(",")+", 0.75) 100%\n\t\t\t)\n\t\t",backgroundColor:t},p=C()("full_width",{"p-app_profile_card__header--external":l,"p-app_profile_card__header":!l,cursor_pointer:r!==y.a});return s?null:i.a.createElement(z.c,{className:p,onClick:r,style:d,"data-qa":"app_card_header"},i.a.createElement(we.a,{externalTeam:l}),i.a.createElement("img",{className:"p-app_profile_card__avatar",src:n,alt:a,"data-qa":"app_header_icon"}),i.a.createElement("div",{className:"p-app_profile_card__title"},i.a.createElement("div",{className:"display_flex align_items_center padding_bottom_25"},i.a.createElement("strong",{className:"overflow_ellipsis","data-qa":"app_header_name"},a),i.a.createElement("span",{className:"margin_left_50"},i.a.createElement(Ie.a,{inverse:!0,"data-qa":"app_header_app_label",isWorkflow:c}))),u&&c?i.a.createElement("div",{className:"p-app_profile_card__description","data-qa":"app_header_description"},o||Re.rt("A workflow app.")):i.a.createElement("div",{className:"p-app_profile_card__description","data-qa":"app_header_description"},o)))}Me.defaultProps=Pe;var xe=Object(je.a)(Me),Fe=n("Pl1I"),Le=n("YEIV"),De=n.n(Le),Ue=n("pxG+"),Be=n("tBeP"),qe=n("vZqh"),He=n("SOCr"),We=n("4Twu"),Ge=n("lhZz"),Ke=n("5mKg"),Ve=n("negh"),ze=n("xrsA"),Ye=new I.b("app_card"),Qe="USER_CARD_CLICK";var Xe=function(e){var t=e.appId,n=e.appUser,a=e.channelIdToRemoveFrom,r=e.dispatch,o=e.homeWorkspaceId,s=e.isActive,l=e.isExternal,u=e.isMemberRestricted,d=e.isMemberUltraRestricted,p=e.isXoxaApp,m=e.memberId,h=e.serviceId,b=e.showAppSettings,f=e.showAppDirectoryLink,g=e.currentTeamId,_=e.currentUserId,v=e.locale,y=e.currentEnterpriseId,k=e.featureM11nChannelDetails,O=e.installerIsYou,C=e.isWorkflowApp,E=e.featureBuilderIsWorkflowApp,j=Object(w.a)({userId:_,teamId:g,locale:v,enterpriseId:y}),S=Object(M.d)(Object(Ge.getStateByTeamId)(g)),I={app_id:t,bot_id:h},N=function(){return j.track(Qe,I)};return[{key:"about_app",label:Ye.t("About this app"),click:function(){N(),j.track("APP_CLICK_LINK_APP_ABOUT_IN_USER_CARD",c()({},I,{contexts:{ui_context:{step:"user_card",action:"click",ui_element:"link_app_about"}}})),r(Object(te.a)({memberId:m,serviceId:h,homeWorkspaceId:o}))},show:!0,dataQa:"app_card_view_details"},{key:"is_installers_workflow_app",label:E?Ye.t("Open in Workflow Builder"):"",href:"#",click:function(){r(Object(_e.a)({subPath:"slack-apps/"+t})),N(),j.track("APP_CLICK_LINK_APP_OPEN_IN_WORKFLOW_BUILDER",c()({},I,{contexts:{ui_context:{step:"user_card",action:"click",ui_element:"link_app_about"}}}))},show:E&&O&&C,dataQa:"app_card_view_workflow_builder"},{key:"app_directory_link",label:Ye.t("View in app directory"),href:Object(Ke.o)(S,"/apps/"+t+"?utm_source=in-prod&utm_medium=inprod-link_app_directory-user_card-click"),click:function(){N(),j.track("APP_CLICK_LINK_APP_DIRECTORY_IN_USER_CARD",c()({},I,{contexts:{ui_context:{step:"user_card",action:"click",ui_element:"link_app_directory"}}}))},show:f,dataQa:"app_card_view_app_directory"},{key:"settings",label:Ye.t("Settings"),href:p?void 0:Object(Ue.a)(Object(Ke.o)(S),"/")+"/services/"+h+"?utm_source=in-prod&utm_medium=inprod-link_app_settings-user_card-click",click:function(){N(),j.track("APP_CLICK_LINK_APP_SETTINGS_IN_USER_CARD",{contexts:{ui_context:{step:"user_card",action:"click",ui_element:"link_app_settings"}}}),p&&r(Object(Be.a)({serviceId:h,referringEventId:Qe}))},show:b,dataQa:"app_card_edit_settings"},{key:"channel_invite",label:Ye.t("Add this app to a channel ..."),click:function(){N(),r(Object(ze.a)({memberId:n.id}))},show:n&&s&&(p?!u:!d),dataQa:"app_card_invite_to_channel"},{key:"channel_remove",dataQa:"app_card_remove",click:function(){var e,i,o;if(k){var s=(e={},De()(e,Ve.UiContextKeys.action,Ve.UiAction.CLICK),De()(e,Ve.UiContextKeys.ui_element,Ve.UiElement.BTN_REMOVE_APP),e);j.track(Qe,{contexts:(o={},De()(o,Ve.ClientEventKeys.ui_context,s),De()(o,Ve.ClientEventKeys.core,(i={},De()(i,Ve.CoreKeys.app_id,t),De()(i,Ve.CoreKeys.bot_id,h),De()(i,Ve.CoreKeys.channel_id,a),i)),o)}),r(p?Object(He.a)({appUserId:n.id,channelId:a,referringEventId:Qe,referringUiContext:s}):Object(qe.a)({memberId:n.id,channelId:a}))}},label:k?Ye.rt("Remove this app from {channelName} ...",{channelName:i.a.createElement("strong",null,i.a.createElement(We.a,{className:"cursor_pointer",inline:!0,channelId:a,iconProps:{inherit:!0,align:"baseline"}}))}):void 0,show:k&&!!a&&!l}].filter(function(e){return e.show})},Je=n("tn36"),Ze=n("DCka"),$e=n("oIqc"),et=n("NAkb"),tt=n("J47P"),nt=n("k0G2"),at=i.a.lazy(function(){return Promise.resolve().then(n.bind(null,"eglI"))}),rt=new I.b("team"),it=(s.b.string.isRequired,s.b.string.isRequired,s.b.func,s.b.bool,s.b.func,s.b.func,s.b.object.isRequired,{kbNavActive:!1,onSubmit:y.a,returnKBNav:y.a,stealKBNav:y.a}),ot=function(e){function t(e){m()(this,t);var n=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.texty=null,n.textyModules={tabcomplete:{positionMenu:function(e){e.style.width=n.texty.container.offsetWidth+"px",Object(et.a)(e,n.texty.container)},completers:["channels","emoji","members"]}},Object(Je.a)(n,["setTextyRef","onSubmit","onDocKeyDown","onFocus","onBlur"]),n}return v()(t,e),b()(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.onDocKeyDown)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.onDocKeyDown)}},{key:"onDocKeyDown",value:function(e){var t=e.which,n=e.metaKey,a=e.ctrlKey,r=e.altKey;this.props.kbNavActive||r||a||n||[nt.f,nt.e,nt.k,nt.l,nt.c,nt.h,nt.i].indexOf(t)>-1||this.texty&&this.texty.focus()}},{key:"onFocus",value:function(){var e=this.props,t=e.kbNavActive,n=e.stealKBNav;t||n()}},{key:"onBlur",value:function(){var e=this.props,t=e.kbNavActive,n=e.returnKBNav;t&&n()}},{key:"onSubmit",value:function(){var e=this.props.clogger;this.texty&&this.texty.value()&&(e.track("USER_CARD_DM",{}),Object($e.e)(this.props.userId,!1,this.texty.value()),this.props.onSubmit())}},{key:"setTextyRef",value:function(e){this.texty=e&&e.getWrappedInstance?e.getWrappedInstance():e}},{key:"render",value:function(){var e=rt.t("Message {username}",{username:this.props.username});return i.a.createElement("div",{className:"p-app_profile_card__footer"},i.a.createElement(Ze.a,null,i.a.createElement(r.Suspense,{fallback:null},i.a.createElement(at,{"data-qa":"app_card_message_input",ref:this.setTextyRef,className:"p-app_profile_card__message_input",modules:this.textyModules,ariaLabel:e,placeholder:e,onEnter:this.onSubmit,onFocus:this.onFocus,onBlur:this.onBlur,useLegacyCreate:!0,isSingleLine:!0,useFocusRing:!1}))))}}]),t}(r.PureComponent);ot.displayName="AppProfileCardMessageInput",ot.defaultProps=it;var st=Object(o.b)(function(e){return{clogger:Object(w.a)({state:e})}})(ot),lt=Object(tt.a)(st),ct=(n("1c4n"),new I.b("app_card")),ut=(s.b.bool,s.b.object,s.b.string.isRequired,s.b.string,s.b.string.isRequired,s.b.func.isRequired,s.b.object,s.b.object,s.b.object,s.b.bool,s.b.bool,s.b.object.isRequired,s.b.shape({id:s.b.string,name:s.b.string}),s.b.object.isRequired,s.b.string,s.b.string,s.b.string,s.b.bool.isRequired,s.b.bool.isRequired,s.b.bool.isRequired,s.b.bool.isRequired,s.b.bool.isRequired,s.b.bool.isRequired,s.b.bool,s.b.bool.isRequired,s.b.string.isRequired,s.b.string,s.b.string,s.b.string,s.b.bool,s.b.bool,s.b.bool,s.b.bool,s.b.bool,s.b.bool,s.b.bool,s.b.bool,s.b.bool,s.b.arrayOf(s.b.shape({name:s.b.string.isRequired,usage:s.b.string,description:s.b.string}).isRequired),{app:void 0,appUser:void 0,installedByMember:void 0,installerIsYou:!1,isWorkflowApp:!1,isError:!1,menuProps:{},memberId:void 0,externalTeam:{},isAppSpaceEnabled:!0,currentEnterpriseId:void 0,currentUserId:void 0,appHomeTeamDisplayName:void 0,viewContext:G.H.MESSAGE_PANE,channelId:void 0,threadTs:void 0,isMemberRestricted:!1,isMemberUltraRestricted:!1,isActive:!1,isExternal:!1,isOrgShared:!1,showAppSettings:!1,showAppDirectoryLink:!1,showSlashCommands:!1,canBeRemovedFromChannel:!1,commands:[]}),dt=function(e){function t(e){m()(this,t);var n=g()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onHeaderClick=n.onHeaderClick.bind(n),n.autoFillSlashCommand=n.autoFillSlashCommand.bind(n),n}return v()(t,e),b()(t,[{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=t.commands,a=d()(t,["commands"]),r=e.commands,i=d()(e,["commands"]);return!Object(A.a)(a,i)||!Object(A.a)(n,r)}},{key:"onHeaderClick",value:function(){var e=this.props,t=e.app,n=e.memberId,a=e.menuProps.onTriggerClose,r=e.serviceId,i=e.clogger,o=e.dispatch,s=t.app_id,l=t.home_workspace_id;i.track("USER_CARD_CLICK",{app_id:s,bot_id:r}),o(Object(te.a)({memberId:n,serviceId:r,homeWorkspaceId:l})),a&&a()}},{key:"autoFillSlashCommand",value:function(e){if(this.props.featureSonicInputs){var t=Object(ie.a)({viewContext:this.props.viewContext,channelId:this.props.channelId,threadTs:this.props.threadTs});if(!t)return;t.prependContents({contents:(new j.a).insert(e+" ").ops}),t.focus()}else Object(re.b)(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.app,a=t.appUser,o=t.commands,s=t.defaultAppIcon,l=t.menuProps,u=t.installedByMember,d=t.installerIsYou,p=t.isWorkflowApp,m=t.isError,h=t.dispatch,b=t.serviceId,f=t.currentTeam,g=t.externalTeam,_=t.featureReactMemberProfileCard,v=t.currentUserId,O=t.currentEnterpriseId,E=t.appHomeTeamDisplayName,j=t.featureAddAppHomeTeamName,S=t.isMemberRestricted,w=t.isMemberUltraRestricted,N=t.isActive,A=t.isExternal,R=t.isOrgShared,P=t.showAppSettings,M=t.showAppDirectoryLink,x=t.showSlashCommands,F=t.channelId,D=t.canBeRemovedFromChannel,U=t.featureAppHome,B=t.featureM11nChannelDetails,q=t.featureBuilderIsWorkflowApp,H=t.featureWorkflowBotsInClient;if(Object(T.d)(n))return i.a.createElement("div",{className:"p-app_profile_card__container"},i.a.createElement(V.f,{menuClassNames:"p-app_profile_card p-app_profile_card--loading",width:320},i.a.createElement($.a,null)));if(!Object(T.b)(n))return null;var W=Object(k.a)(l.onTriggerClose)?l.onTriggerClose:y.a,G=Object(ae.b)(n.profile,192,s),K=i.a.createElement(xe,{colorHex:n.profile.color,imageUrl:G,name:n.profile.name,onClick:!N||A?y.a:this.onHeaderClick,tagline:n.profile.tagline,isError:m,externalTeam:g,isWorkflowApp:Object(se.g)(n)}),z=N||A||S?null:i.a.createElement("div",{className:"c-menu_item__li p-app_profile_card__disabled_message","data-qa":"app_card_app_disabled"},p&&H?ct.t("This workflow has been disabled"):ct.t("This app has been disabled")),Y=Xe({appId:n.app_id,appUser:a,channelIdToRemoveFrom:D&&F,dispatch:h,featureM11nChannelDetails:B,featureReactMemberProfileCard:_,homeWorkspaceId:n.home_workspace_id,isActive:N,isMemberRestricted:S,isMemberUltraRestricted:w,isXoxaApp:"xoxa"===n.app_type,isExternal:A,showAppSettings:P,showAppDirectoryLink:M,legacyApp:n.legacy_app,serviceId:b,currentTeamId:f.id,currentUserId:v,locale:Object(I.r)(),currentEnterpriseId:O,installerIsYou:d,isWorkflowApp:p,featureBuilderIsWorkflowApp:q}).map(function(e){return"separator"===e.type?i.a.createElement(V.d,{key:e.key}):i.a.createElement(V.b,{key:e.key,label:e.label,onSelected:e.click,href:e.href,"data-qa":e.dataQa})});if(H&&Object(se.g)(n))return i.a.createElement(Ee,{app:n,cardHeader:i.a.createElement(Ae,{colorHex:n.profile.color,imageUrl:G,name:n.profile.name,isError:m,externalTeam:g}),currentUserId:v,disabledMessage:z});var Q=o.slice(0,3),X=x&&Q.length?Q.map(function(t){return i.a.createElement(V.b,{key:t.name,onSelected:function(){return e.autoFillSlashCommand(t.name)},"data-qa":"app_card_slash_command"},i.a.createElement(r.Fragment,null,i.a.createElement("div",{className:"block overflow_ellipsis"},i.a.createElement("strong",{className:"margin_right_25"},t.name),t.usage),i.a.createElement("div",{className:"p-app_profile_card__command_desc c-menu_item__description"},t.description)))}):null,J=void 0;(N&&n.installation&&n.installation.installer_user_id||E&&j)&&(J=i.a.createElement(Fe.a,{isWorkflowApp:Object(se.g)(n),appType:n.app_type,memberId:u&&u.id,installerIsYou:d,appName:n.profile.name,isError:m,onMemberClick:W,appHomeTeamDisplayName:E,featureAddAppHomeTeamName:j}));var ee=null,te=N&&n.app_user;A&&(te=n.app_user&&"xoxp"===n.app_type),R&&(te=!!n.app_user),te&&(ee=_?i.a.createElement(Z,{className:"p-app_profile_card__direct_message_button",onSelected:function(){return h(Object(ne.startImByMemberId)({memberId:a.id}))}},U?ct.t("Go to App"):ct.t("Message {username}",{username:Object(I.p)(Object(L.K)(a))})):i.a.createElement(lt,{onSubmit:W,userId:n.app_user.id,username:n.app_user.username}));var re=C()("p-app_profile_card",{"p-app_profile_card--has_footer":te&&!_});return i.a.createElement("div",{className:"p-app_profile_card__container","data-qa":"app_profile_card_container"},i.a.createElement(V.f,c()({},l,{width:320,noMargin:!0,menuClassNames:re}),K,i.a.createElement(V.d,{noPaddingAbove:!0}),z,Y,X&&i.a.createElement(V.d,null),X,J&&i.a.createElement(V.d,null),J,ee))}}]),t}(r.Component);dt.displayName="AppProfileCard",dt.defaultProps=ut;var pt=Object(N.b)(Object(o.b)(function(e,t){var n=t.serviceId,a=t.homeWorkspaceId,r=t.memberId,i=t.viewContext,o=Object(P.c)(e,{serviceId:n,homeWorkspaceId:a,memberId:r}),s=Object(M.d)(e),l=Object(oe.E)(e,o),c=Object(oe.u)(e,o),u=Object(ee.q)(e)?Object(M.g)(e).id:void 0,d=Object(x.b)(e),p=o&&Object(x.d)(e,Object(oe.v)(o)),m=Object(oe.i)(e,o),h=K(e,i),b=h.channelId,f=h.threadTs,g=Object(x.d)(e,r||o&&o.app_user&&o.app_user.id),_=b&&Object(F.f)(e,b,r),v=b&&_.isKnown&&_.isMember&&Object(U.r)(e,b,g),y=[];return b&&o.commands&&(y=o.commands.filter(function(t){return Object(D.k)(e,t,{channelId:b,isThread:!!f}).isEnabled})),{app:o,appUser:g,channelId:b,threadTs:f,commands:y,defaultAppIcon:Object(R.f)(e),installedByMember:p,installerIsYou:Object(oe.w)(e,o),isAppSpaceEnabled:Object(R.g)(e),isActive:Object(oe.B)(o),isExternal:l,isOrgShared:Object(oe.F)(e,o),showAppSettings:Object(oe.L)(e,o),showAppDirectoryLink:Object(oe.K)(e,o),showSlashCommands:Object(oe.M)(e,o),featureAppHome:Object(S.a)(e),featureReactMemberProfileCard:Object(ee.m)(e,"feature_react_member_profile_card"),featureAddAppHomeTeamName:Object(ee.m)(e,"feature_add_app_home_team_name"),featureSonicInputs:Object(ee.m)(e,"feature_sonic_inputs"),featureWorkflowBotsInClient:Object(ee.m)(e,"feature_workflow_bots_in_client"),homeWorkspaceId:Object(oe.j)(o)||a,currentTeam:s,externalTeam:c,clogger:Object(w.a)({state:e}),currentEnterpriseId:u,currentUserId:d.id,appHomeTeamDisplayName:m,isMemberRestricted:Object(L.Gb)(d),isMemberUltraRestricted:Object(L.Mb)(d),canBeRemovedFromChannel:v,featureM11nChannelDetails:Object(ee.m)(e,"feature_m11n_channel_details"),featureBuilderIsWorkflowApp:Object(ee.m)(e,"feature_builder_is_workflow_app"),isWorkflowApp:Object(se.g)(o)}})(dt)),mt=n("1cj1"),ht=n("HvGc"),bt=n("OYPW"),ft=n("llxT"),gt=n("3JmS"),_t=n("kyN7"),vt=n("Ect7"),yt=n("YcId"),kt=n("RoDk"),Ot=n("bkaq"),Ct=n("G7w5"),Et=(n("NqlN"),new I.b("member_profile")),jt=new I.b("team");function St(e){var t=e.fullName,n=e.memberType;return n?Et.t("Profile image for {fullName}. {memberType}. Hit enter to view profile",{fullName:t,memberType:n}):Et.t("Profile image for {fullName}. Hit enter to view profile",{fullName:t})}function It(e,t){return Object(L.tb)(e)?Object(Ke.f)(t):Object(L.mb)(e)?jt.t("Deactivated account",{fallbackHash:"d57fa5164165105a1507c830ae06f7af8307870a",fallbackHashNs:"team"}):Object(L.Mb)(e)?Object(L.xb)(e)?jt.t("Invited Guest"):jt.t("Single-Channel Guest"):Object(L.Gb)(e)?Object(L.xb)(e)?jt.t("Invited Guest"):jt.t("Multi-Channel Guest"):Object(L.Eb)(e)?jt.t("Owner of {teamName}",{teamName:Object(I.p)(Object(Ke.f)(t))}):Object(L.eb)(e)?jt.t("Workspace Admin"):Object(L.xb)(e)?jt.t("Invited Member"):null}n("kVk7");var wt=n("ynxK"),Nt=new I.b("member_profile"),Tt=(s.b.string.isRequired,s.b.func,s.b.bool,s.b.string,s.b.func.isRequired,s.b.bool,{onMenuItemSelected:y.a,canRemoveFromChannel:!1,channelId:void 0,featureModernProfileFlexpane:!1});function At(e){var t=e.memberId,n=e.onMenuItemSelected,a=e.canRemoveFromChannel,r=e.channelId,o=e.dispatchOpenRemoveMemberDialog,s=e.featureModernProfileFlexpane;if(a&&r){var l=i.a.createElement("strong",null,i.a.createElement(We.a,{className:"p-member_profile_card__context_action_channel_name",inline:!0,channelId:r,iconProps:{inherit:!0,align:"baseline"}})),c=s?Nt.rt("Remove from {channelName}",{channelName:l}):"";return i.a.createElement("div",{className:"p-member_profile_card__context_action_container"},i.a.createElement(wt.a,{className:"p-member_profile_card__context_action","data-qa":"member_profile_card_remove_from_channel",onClick:function(){o({memberId:t,channelId:r}),n()}},c))}return null}At.defaultProps=Tt;var Rt={dispatchOpenRemoveMemberDialog:function(){return qe.a.apply(void 0,arguments)}},Pt=Object(N.b)(Object(o.b)(function(e,t){var n=t.memberId,a=K(e,t.viewContext).channelId,r=a&&Object(F.f)(e,a,n);return{canRemoveFromChannel:!(Object(ee.c)(e)===n)&&r&&r.isKnown&&r.isMember&&Object(U.g)(e,a)&&Object(L.i)(e,n),channelId:a,featureModernProfileFlexpane:Object(ee.m)(e,"feature_modern_profile_flexpane")}},Rt)(At)),Mt=new I.b("member_profile"),xt=(s.b.object,s.b.object,s.b.object,s.b.func,s.b.func,s.b.object,s.b.bool,s.b.bool,s.b.object,{currentMember:void 0,member:void 0,memberTeam:void 0,onClose:y.a,showMemberProfile:y.a,team:void 0,includeRemoveFromChannelAction:!1,canInteract:!0,clogger:{track:y.a}});function Ft(e){var t=e.currentMember,n=e.member,a=e.memberTeam,o=e.onClose,s=e.showMemberProfile,l=e.team,c=e.includeRemoveFromChannelAction,u=e.canInteract,d=e.clogger,p=Object(bt.a)(function(){var e=[Ct.a.STATUS];return t!==n&&e.push(Ct.a.TIME),e},[t,n]),m=Object(ce.a)().featureModernProfileFlexpane,h=Object(r.useCallback)(function(){d.track(Ve.EventId.USER_CARD_CLICK),o()},[d,o]);if(Object(r.useEffect)(function(){var e=document.getElementById("member_profile_card_photo");e&&e.focus()},[]),!m)return null;var b=i.a.createElement(gt.a,{className:"p-member_profile_card__picture",member:n}),f=i.a.createElement(vt.a,{className:"p-member_profile_card__restriction",member:n,team:a}),g=i.a.createElement(Ot.a,{className:"p-member_profile_card__name",member:n});return Object(Ke.M)(a)?i.a.createElement("div",{className:"p-member_profile_card","data-qa":"member_profile_card"},i.a.createElement("div",{className:"p-member_profile_card__header"},b,f),g,i.a.createElement(yt.a,{memberTeam:a})):u?i.a.createElement("div",{className:"p-member_profile_card","data-qa":"member_profile_card"},i.a.createElement("div",{className:"p-member_profile_card__header"},i.a.createElement(ft.a,{id:"member_profile_card_photo",className:"p-member_profile_card__picture_trigger","data-qa":"member_profile_card_photo",onClick:function(){s({memberId:n.id}),h()},"aria-label":St({fullName:Object(L.K)(n),memberType:It(n,a)})},i.a.createElement("span",{className:"p-member_profile_card__picture_hint"},Mt.t("Click to view profile")),b),f),i.a.createElement(Ot.a,{className:"p-member_profile_card__name",member:n,onClick:h,onShowMemberProfile:function(){s({memberId:n.id})},clogger:d}),i.a.createElement(Ct.b,{member:n,onClick:h,team:l,types:p}),i.a.createElement(_t.a,{className:"p-member_profile_card__buttons",member:n,onClick:h,showCallButton:!0,clogger:d}),c?i.a.createElement(Pt,{memberId:n.id,onMenuItemSelected:h}):null):i.a.createElement("div",{className:"p-member_profile_card","data-qa":"member_profile_card"},i.a.createElement("div",{className:"p-member_profile_card__header"},b,f),g,i.a.createElement(kt.a,{member:n}))}Ft.displayName="MemberProfileCard",Ft.defaultProps=xt;var Lt={showMemberProfile:function(){return ht.j.apply(void 0,arguments)}},Dt=Object(o.b)(function(e,t){var n=t.memberId,a=Object(x.d)(e,n);if(!a)return{};var r=Object(ee.m)(e,"feature_stranger_danger")?Object(mt.a)(e,n):!Object(L.Jb)(a);return{currentMember:Object(x.b)(e),member:a,memberTeam:Object(M.i)(e,Object(L.P)(a)),team:Object(M.d)(e),canInteract:r,clogger:Object(w.a)({state:e})}},Lt)(Ft),Ut=n("AUAP"),Bt=n("brL+"),qt=n("0sSB"),Ht=(s.b.object,s.b.string,s.b.string,s.b.string,s.b.bool,s.b.bool,{serviceId:void 0,memberId:void 0,homeWorkspaceId:void 0,menuProps:void 0,memberIsHuman:!1,includeRemoveFromChannelAction:!1});function Wt(e){var t=e.serviceId,n=e.memberId,a=e.homeWorkspaceId,r=e.menuProps,o=e.memberIsHuman,s=e.includeRemoveFromChannelAction;if(t&&!o)return i.a.createElement(pt,{serviceId:t,memberId:n,homeWorkspaceId:a,menuProps:r});if(n&&o){var l=(r||{}).onClose;return i.a.createElement(Dt,{memberId:n,onClose:l,includeRemoveFromChannelAction:s})}return null}Wt.defaultProps=Ht;var Gt={userId:s.b.string,botId:s.b.string,botProfile:s.b.object},Kt=Object(o.b)(function(e,t){var n=t.userId,a=t.botId,r=t.botProfile,i=Object(Ut.g)(e,{userId:n,botId:a,botProfile:r}),o=i.member,s=i.bot,l=i.memberIsHuman,c=Object(Bt.b)(e),u=Object(qt.c)({member:o,bot:s,botProfile:r,currentTeamId:c});return{serviceId:s&&s.id,memberId:o&&o.id,homeWorkspaceId:u,memberIsHuman:l}})(Wt);Kt.propTypes=Gt;var Vt=function(e){return i.a.createElement(Kt,e)};Vt.displayName="renderProfileCard";var zt=n("NV6F");zt.a.register(a.a),zt.b.register(Vt)},TepT:function(e,t,n){},Tjgr:function(e,t,n){},U5UL:function(e,t,n){},UCMe:function(e,t,n){},UJZI:function(e,t,n){},UceB:function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("ifKl"),p=n("aK/h"),m=n("kxpR"),h=n.n(m),b=n("TSYQ"),f=n.n(b),g=n("MnCE"),_=n("XLFM"),v=n("od5y"),y=n("RAhH"),k=(n("h2AX"),p.b.string,p.b.string,p.b.oneOfType([p.b.node,p.b.func]).isRequired,p.b.string,p.b.func,p.b.bool,p.b.string,p.b.object,p.b.string,p.b.string,{className:"",onClick:d.a,iconType:null,tooltipPosition:"top",ariaHasPopup:!0,"data-qa":void 0,btnRef:null,shortcutKey:null,ariaLabel:null}),O=function(e){function t(){r()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onKeyDown=e.onKeyDown.bind(e),e}return u()(t,e),o()(t,[{key:"onKeyDown",value:function(e){e&&e.key===this.props.shortcutKey&&(e.stopPropagation(),e.preventDefault(),this.props.onClick(e))}},{key:"render",value:function(){var e=this.props,t=e.ariaLabel,n=e.label,a=f()("c-message_actions__button",this.props.className);return h.a.createElement(y.c,{tip:this.props.label,position:this.props.tooltipPosition,delay:y.b},h.a.createElement(_.c,{className:a,onClick:this.props.onClick,"aria-label":t||n,"aria-haspopup":this.props.ariaHasPopup,"data-qa":this.props["data-qa"],ref:this.props.btnRef,onKeyDown:this.props.shortcutKey?this.onKeyDown:null},h.a.createElement(v.b,{type:this.props.iconType})))}}]),t}(m.PureComponent);O.displayName="MessageActionButton",O.defaultProps=k,t.a=Object(g.a)(O)},Usoh:function(e,t,n){},V2L1:function(e,t,n){"use strict";var a=n("QbLZ"),r=n.n(a),i=n("kxpR"),o=n.n(i),s=n("XHGt"),l=n("TSYQ"),c=n.n(l),u=(n("aK/h"),n("Smdl")),d=n("t85p"),p=n("nNoG"),m=n("RAhH"),h=new p.b("sonic_pilot");function b(e){var t=e.children,n=e.featureSonicPlaceholderLabels,a=e.unstyled,i=e.tooltipPosition;if(!n)return t;if(Object(u.a)()){var s=o.a.cloneElement(t,r()({},t.props,{className:c()(t.props.className,{"c-button--sonic-placeholder":!a,"c-button-unstyled--sonic-placeholder":a})}),t.props.children);return o.a.createElement(m.c,{tip:o.a.createElement("div",{className:"c-tooltip__sonic_placeholder","data-qa":"sonic-placeholder-text"},h.t("Coming soon")),position:i||"top",zIndex:"above_fs"},s)}return t}b.defaultProps={unstyled:!1,tooltipPosition:void 0};t.a=Object(s.b)(function(e){return{featureSonicPlaceholderLabels:Object(d.m)(e,"feature_sonic_placeholder_labels")}})(b)},VGdo:function(e,t,n){},VTc2:function(e,t,n){},VmKF:function(e,t,n){},VwqH:function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("7EGn"),p=n("kxpR"),m=n.n(p),h=n("XHGt"),b=n("nNoG"),f=n("G4ux"),g=n("1hAG"),_=n("Fdc0"),v=n("5mKg"),y=n("xoiQ"),k=n("derf"),O=n("XLFM"),C=n("od5y"),E=n("k55U"),j=n("vFlG");var S=n("7Ztl"),I=n("jUSB"),w=n("pJ2S"),N=(n("m0k8"),new b.b("incoming_call_window")),T=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){Object(I.a)(w.g,{loop:!0})}},{key:"componentWillUnmount",value:function(){Object(I.b)(w.g)}},{key:"getSrcSetAttribute",value:function(e){return e?e+" 2x":""}},{key:"maybeRenderGuestBadge",value:function(){return this.props.isUltraRestricted?m.a.createElement(C.b,{type:"single-channel-guest",inline:!0}):this.props.isRestricted?m.a.createElement(C.b,{type:"restricted-user",inline:!0}):null}},{key:"renderUserImage",value:function(){var e=this.props.avatarUrls,t=e.imageUrl,n=e.imageUrl2x;return t||n?m.a.createElement("img",{className:"p-incoming_call__member_image",src:t||n,srcSet:this.getSrcSetAttribute(n),alt:""}):null}},{key:"renderExternalTeamLabel",value:function(){return m.a.createElement("div",{className:"p-incoming_call__external_team_banner"},m.a.createElement("span",{className:"p-incoming_call__external_team_name"},this.props.externalTeamName),m.a.createElement(k.b,{className:"p-incoming_call__external_team_icon",id:this.props.memberTeamId,size:18}))}},{key:"renderUserName",value:function(){return m.a.createElement("div",{className:"p-incoming_call__member_name_wrapper"},m.a.createElement("span",{className:"p-incoming_call__member_name"},this.props.prefCompliantMemberName),this.maybeRenderGuestBadge())}},{key:"renderCaptionText",value:function(){var e=N.t("is calling you");return m.a.createElement("div",{className:"p-incoming_call__user_caption"},e)}},{key:"renderCallButtons",value:function(){var e=this;return m.a.createElement("div",{className:"p-incoming_call__button_container"},m.a.createElement(O.d,{type:"danger",size:"medium",onClick:function(){return e.props.onRejectCall(e.props.callId)},className:"p-incoming_call__button","aria-label":"Decline"},m.a.createElement(C.b,{type:"times"})),m.a.createElement(O.d,{type:"primary",size:"medium",onClick:function(){return e.props.onAcceptCall(e.props.callId)},className:"p-incoming_call__button","aria-label":"Accept"},m.a.createElement(C.b,{type:"phone"})))}},{key:"render",value:function(){return m.a.createElement("div",{className:"p-incoming_call"},this.props.isExternal&&this.renderExternalTeamLabel(),this.renderUserImage(),m.a.createElement("div",{className:"p-incoming_call__info"},this.renderUserName(),this.renderCaptionText(),this.renderCallButtons()))}}]),t}(p.PureComponent);function A(e,t){if(function(e){return!!Object(j.a)(e,"activeCall")}(e))return e.activeCall.incomingInviterUserId;var n=Object(S.b)(e,t).incomingInvite;if(n)return n.userId;Object(E.f)("No incoming invite")}T.displayName="IncomingCall";t.a=Object(h.b)(function(e,t){var n=A(e,t.callId);if(!n)throw new Error("No inviter user id for callId: "+t.callId);var a=Object(f.d)(e,n),r=Object(_.P)(a),i=Object(g.i)(e,r),o=Object(_.tb)(a),s=Object(_.V)(e,a),l=Object(v.f)(i),c=Object(d.a)(a,"profile.avatar_hash");return{avatarUrls:Object(y.a)({size:200,teamId:r,memberId:n,avatarHash:c}),prefCompliantMemberName:s,memberTeamId:r,externalTeamName:l,isRestricted:Object(_.Gb)(a),isUltraRestricted:Object(_.Mb)(a),isExternal:o}})(T)},W3KZ:function(e,t,n){"use strict";var a=/::[^:]+-([2-6])$/;t.a=function(e){if(!e)return null;var t=e.toLowerCase().replace(/(^:|:$)/g,""),n=t.match(a),r=t.replace(a,"");if(!r)return null;if(-1!==r.indexOf(":"))return null;var i=void 0;return n&&((i=parseInt(n[1],10))<2||i>6)?null:{name:r,skinTone:i}}},W3Yc:function(e,t,n){},W90I:function(e,t,n){},WJwm:function(e,t,n){},WOap:function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("TGBA"),p=n("ifKl"),m=n("kxpR"),h=n.n(m),b=n("XHGt"),f=n("aK/h"),g=n("TSYQ"),_=n.n(g),v=n("IxGy"),y=n("BUzq"),k=n("Q+UV"),O=n("hOQf"),C=n("aLpA"),E=n("tbBR"),j=n("0gKA"),S=n("Q3oM"),I=(n("qMiJ"),f.b.object.isRequired,f.b.string,f.b.node,f.b.string,f.b.oneOf(["default","inside","above"]),f.b.bool,f.b.bool,f.b.bool,f.b.bool,f.b.bool,f.b.bool,f.b.bool,f.b.string,f.b.oneOf(Object(d.a)(C.H)),f.b.string,f.b.bool,f.b.func,f.b.bool,f.b.func,f.b.bool,f.b.bool,f.b.func,f.b.func,{className:void 0,children:void 0,position:"default",parentId:void 0,show:void 0,showComment:!0,showShare:!0,showReact:!0,showJump:!1,showStar:!0,showMoreActions:!0,jumpOrigin:void 0,messageContainerType:void 0,viewContext:void 0,hover:!1,setHover:p.a,isEditing:!1,maybeStartEditingMessage:p.a,isPinned:!1,renderOffscreen:!1,clogLinkClick:p.a,clogThreadEvent:p.a}),w=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onMenuOpen=n.onMenuOpen.bind(n),n.onMenuClose=n.onMenuClose.bind(n),n.startEditing=n.startEditing.bind(n),n.renderActions=n.renderActions.bind(n),n}return u()(t,e),o()(t,[{key:"onMenuOpen",value:function(){this.props.setHover(!0)}},{key:"onMenuClose",value:function(){this.props.setHover(!1)}},{key:"startEditing",value:function(){var e=this.props,t=e.msg,n=e.viewContext;this.props.maybeStartEditingMessage({channelId:Object(O.F)(t),ts:Object(O.Q)(t),viewContext:n,scroll:!0})}},{key:"renderActions",value:function(){var e=this.props,t=e.msg,n=e.hover,a=e.show,r=e.showComment,i=e.showShare,o=e.showReact,s=e.showJump,l=e.showStar,c=e.showMoreActions,u=e.jumpOrigin,d=e.messageContainerType,p=e.isEditing,m=e.renderOffscreen,b=e.clogLinkClick,f=e.clogThreadEvent,g=e.parentId,_=e.isPinned;if(!1===a)return null;if(void 0===a&&!n&&!m)return null;if(p)return null;if(Object(O.ab)(t)||Object(O.Y)(t))return null;if(Object(O.jb)(t))return null;if(t.isEKMError)return null;var v=t.ts,y=t.thread_ts,C=t.channel,E=t.file,S=t.comment,I=t.subtype;return h.a.createElement(j.a,{ts:v,threadTs:y,channelId:C,reactionKey:Object(k.b)(t),isStarred:Object(O.rb)(t,E,S),isReply:Object(O.lb)(t),isEphemeral:Object(O.bb)(t),isPinned:_,subtype:I,comment:t.comment&&t.comment.id,fileIds:t.files,onMenuOpen:this.onMenuOpen,onMenuClose:this.onMenuClose,onEmojiPickerOpen:this.onMenuOpen,onEmojiPickerClose:this.onMenuClose,showComment:r,showShare:i,showReact:o,showJump:s,showStar:l,showMoreActions:c,jumpOrigin:u,editHandler:this.startEditing,messageContainerType:d,renderOffscreen:m&&!n&&!a,clogLinkClick:b,clogThreadEvent:f,parentId:g})}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.position,a=_()("c-message_kit__actions","c-message_kit__actions--"+n,this.props.className);return h.a.createElement("div",{className:a,style:{position:"relative"}},t,this.renderActions())}}]),t}(m.PureComponent);w.displayName="MessageActions",w.defaultProps=I;var N={maybeStartEditingMessage:function(){return v.f.apply(void 0,arguments)}};t.a=Object(E.b)(Object(S.b)(Object(b.b)(function(e,t){var n=t.msg,a=t.viewContext,r=Object(O.F)(n),i=Object(O.Q)(n);return{isEditing:!!Object(v.d)(e,{channelId:r,ts:i,viewContext:a}),isPinned:Object(y.j)(e,{channelId:r,ts:i})}},N)(w)))},WVKS:function(e,t,n){"use strict";var a=n("m1cH"),r=n.n(a),i=n("pguY"),o=n("zmn3"),s=n("HiDb"),l=n("XI8A"),c=n("Qv4Q"),u=void 0;t.a=function(){if(u)return u;var e,t=(e=Object(s.a)(l,function(e){var t=Object(o.a)(e.skinVariations,"unicode");return[e.unicode].concat(r()(t))}),Object(o.a)(e,c.b)).sort(function(e,t){return t.length-e.length}),n=Object(o.a)(t,i.a);return u=new RegExp("("+n.join("|")+")(\ud83c[\udffb-\udfff])?","g")}},We3W:function(e,t,n){},X28p:function(e,t,n){"use strict";var a=n("aK/h"),r=n("kxpR"),i=n.n(r),o=n("MnCE"),s=n("TSYQ"),l=n.n(s),c=(n("h2AX"),a.b.node,a.b.string,a.b.string,function(e){var t=e.className,n=e.children,a=e.ariaLabel;return i.a.createElement("div",{className:l()("c-message_actions__container",t),role:"group","aria-label":a},n)});c.displayName="MessageActionContainer",c.defaultProps={children:null,className:null,ariaLabel:null},t.a=Object(o.a)(c)},XKj7:function(e,t,n){"use strict";n.d(t,"c",function(){return i}),n.d(t,"e",function(){return o}),n.d(t,"d",function(){return s}),n.d(t,"f",function(){return l}),n.d(t,"a",function(){return c}),n.d(t,"g",function(){return u}),n.d(t,"b",function(){return d});var a=n("ifKl"),r=n("ROZo"),i=(Object(r.b)("TS.prefs.setMultiPrefsByAPI",a.a),Object(r.b)("TS.prefs.setPrefByAPI",a.a),Object(r.b)("TS.prefs.legacyOnPrefChanged",a.a)),o=Object(r.b)("TS.prefs.onPrefChanged",a.a),s=Object(r.b)("TS.prefs.legacyOnTeamPrefChanged",a.a),l=Object(r.b)("TS.prefs.onTeamPrefChanged",a.a),c=Object(r.b)("TS.prefs.sidebar_theme_changed_sig.dispatch",a.a),u=Object(r.b)("TS.prefs.removeTeamFromEnterpriseExcludeTeamPref",a.a),d=Object(r.b)("TS.prefs.legacyOnMutedChannelsPrefChanged",a.a)},XThT:function(e,t,n){},XoBp:function(e,t,n){"use strict";var a=n("aK/h"),r=n("XHGt"),i=n("5v1V"),o={children:a.b.node,isDegradedMode:a.b.bool},s=function(e){var t=e.isDegradedMode,n=e.children;return t?n:null};s.propTypes=o,s.defaultProps={children:null,isDegradedMode:null};t.a=Object(r.b)(function(e){return{isDegradedMode:Object(i.m)(e)}})(s)},XoJV:function(e,t,n){"use strict";n.d(t,"b",function(){return f}),n.d(t,"a",function(){return g}),n.d(t,"g",function(){return k}),n.d(t,"f",function(){return O}),n.d(t,"e",function(){return C}),n.d(t,"d",function(){return E}),n.d(t,"c",function(){return j}),n.d(t,"h",function(){return S}),n.d(t,"i",function(){return I});var a=n("sk9p"),r=n.n(a),i=n("fujP"),o=n("gSGL"),s=n("OZf9"),l=n("aK/h"),c=n("Qv4Q"),u=n("nNoG"),d=n("P1FA"),p=n("Z7Ay"),m=new u.b("emoji"),h={},b={},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.locale,n=e.canonicalToLocalized;if(t&&!Object(i.a)(n)){var a={};Object(s.a)(n,function(e,t){a[e]=t;var n=Object(d.a)(e);n!==e&&(a[n]=t)}),h[t]={canonicalToLocalized:n,localizedToCanonical:a}}};f.propTypes={locale:l.b.string.isRequired,canonicalToLocalized:l.b.object.isRequired};var g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.locale,n=e.localizedKeywordMap;t&&!Object(i.a)(n)&&(b[t]=n)};g.propTypes={locale:l.b.string.isRequired,keywordMap:l.b.object.isRequired};var _=Object(c.c)(),v=/(^:)\S+(:$)/;function y(e,t){if(!Object(o.a)(e))return null;if(!t)return e;var n=v.test(e),a=e.replace(/^:|:$/g,"").toLowerCase().split("::"),i=r()(a,2),s=i[0],l=i[1],c=t[s];if(!c)return e;if(l){var u=t[l];if(!u)return e;c=c+"::"+u}return n?":"+c+":":c}var k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.locale,n=e.name;return t&&n?h[t]?y(n,h[t].canonicalToLocalized):n:null},O=function(e){if(!e||!e.name)return null;var t=void 0;switch(e.name){case"Smileys & People":t=m.t("Smileys & People",{fallbackHash:"b37554f695b15005fd23907b9488e0a8ad4bca5f",fallbackHashNs:"emoji"});break;case"Animals & Nature":t=m.t("Animals & Nature",{fallbackHash:"bddc7adb1204fed1e94206edb0213ced81f348d4",fallbackHashNs:"emoji"});break;case"Food & Drink":t=m.t("Food & Drink",{fallbackHash:"a9704a2ad9afea5f9d4d1504458f91e253557264",fallbackHashNs:"client"});break;case"Activities":t=m.t("Activities",{fallbackHash:"81c0d915fa6d82fd30661c5e66e204cea52bb2b5",fallbackHashNs:"emoji"});break;case"Travel & Places":t=m.t("Travel & Places",{fallbackHash:"4cea7e0a28a73fafbe052e8132f1c86cd07a68ed",fallbackHashNs:"emoji"});break;case"Objects":t=m.t("Objects",{fallbackHash:"72a83add2c5ede877c10d23f302d3e17accbadab",fallbackHashNs:"emoji"});break;case"Symbols":t=m.t("Symbols",{fallbackHash:"22ad664e9eb98b75a73333b2b2395fc4b52e6fc9",fallbackHashNs:"emoji"});break;case"Flags":t=m.t("Flags",{fallbackHash:"5d728758adcdd5154d3be55552c1c061ef1489b2",fallbackHashNs:"emoji"});break;default:t=""}return t},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.locale,n=e.name;return t&&n?h[t]?y(n,h[t].localizedToCanonical):n:null},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.locale,n=e.text;return t&&n?n.replace(_,function(e){return k({locale:t,name:e})}):null},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.locale,n=e.text;return t&&n?n.replace(_,function(e){return C({locale:t,name:e})}):null},S=function(e){return b[e]},I=function(e){return e&&!Object(i.a)(h)&&!Object(i.a)(h[e])&&!Object(i.a)(b)&&!Object(i.a)(b[e])};Object(p.a)("emojiTranslation",{getLocalizedEmojiName:k,getCanonicalEmojiName:C,convertEmojiInStringToLocalized:E,convertEmojiInStringToCanonical:j,translationMaps:h,keywordMaps:b})},XwvF:function(e,t,n){},Y6eO:function(e,t,n){"use strict";var a=n("QbLZ"),r=n.n(a),i=n("iCc5"),o=n.n(i),s=n("V7oC"),l=n.n(s),c=n("FYw3"),u=n.n(c),d=n("mRg0"),p=n.n(d),m=n("fujP"),h=n("yIs4"),b=n("+Xah"),f=n("ifKl"),g=n("aK/h"),_=n("kxpR"),v=n.n(_),y=n("XHGt"),k=n("mM05"),O=n.n(k),C=n("t85p"),E=n("brL+"),j=n("dhvi"),S=n("quKg"),I=n("fYfO"),w=n("4M+g"),N=n("h9PG"),T=n("rZal"),A=n("G4ux"),R=n("IxGy"),P=n("J19L"),M=n("1yga"),x=n("qk+D"),F=n("aLpA"),L=n("mLe0"),D=n("XfeM"),U=n("XRnC"),B=Object(D.b)("Count the number of characters over the message length limit",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.channelId,r=n.text,i=n.delta,o=n.featureWysiwygComposer,s=Object(U.b)(t(),{channelId:a,text:r,delta:i,featureWysiwygComposer:o}),l=s.rawText,c=s.processedDelta;return o?Math.max(0,Object(L.a)(c)-F.C):Math.max(0,l.length-F.B)});B.meta={name:"countCharsOverLimit",key:"actionsCountCharsOverMessageLimitCountCharsOverLimit",description:"Count the number of characters over the message length limit"},B.propTypes={channelId:g.b.string,text:g.b.string};var q=B,H=n("6kok"),W=n("hOQf"),G=n("XLFM"),K=n("lwWk"),V=n("od5y"),z=n("eglI"),Y=n("oxKW"),Q=n("nNoG"),X=n("NAkb"),J=n("82mD"),Z=n("OF9j"),$=n("X/Nq");function ee(e,t){return Object($.a)(new O.a(e),new O.a(t))}var te=n("u8wn"),ne=n("a+Oh"),ae=n("icQl"),re=n("PM8X"),ie=n("fL8H"),oe=n("tbBR"),se=n("Pe1S"),le=new Q.b("message"),ce=(g.b.string.isRequired,g.b.string.isRequired,g.b.object.isRequired,g.b.bool.isRequired,g.b.func,g.b.string,g.b.string,g.b.string,g.b.bool,g.b.func,g.b.func,g.b.func,g.b.func,g.b.bool,g.b.bool,g.b.arrayOf(g.b.object),g.b.object,g.b.bool,g.b.number,g.b.bool,g.b.bool,g.b.string,g.b.func,g.b.func,g.b.bool,g.b.bool,g.b.bool,{saveMessageEdit:f.a,channelId:null,teamId:void 0,viewContext:void 0,isSelfIm:!1,setDidRequestToStopEditing:f.a,updateEditState:f.a,stopEditingMessage:f.a,updateHasUnsavedChanges:f.a,canDelete:!0,canUnbroadcast:!1,initialEditOps:void 0,initialContents:void 0,didRequestToStopEditing:!1,editWindowMin:-1,isAdminUser:!1,useJumbomoji:!1,messageContainerType:void 0,openModal:f.a,countCharsOverMessageLimit:b.a,featureSonicInputs:!1,clientToolBar:!1,featureWysiwygComposer:!1}),ue="message_pane_edit_input";function de(e){Object(re.a)({e:e,input_to_fill:"#"+ue,offset_y:-8})}var pe=function(e){function t(e){o()(this,t);var n=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setTextyRef=n.setTextyRef.bind(n),n.maybeSave=n.maybeSave.bind(n),n.onTimerInterval=n.onTimerInterval.bind(n),n.renderTimeoutErrorDialog=n.renderTimeoutErrorDialog.bind(n),n.renderLengthErrorDialog=n.renderLengthErrorDialog.bind(n),n.renderUnknownErrorDialog=n.renderUnknownErrorDialog.bind(n),n.stopEditingMessage=n.stopEditingMessage.bind(n),n.handleSaveEditError=n.handleSaveEditError.bind(n),n.onEnter=n.onEnter.bind(n),n.onTextChange=n.onTextChange.bind(n),n.renderInput=n.renderInput.bind(n),n.texty=null,n.syncEditStateOnUnmount=!0,n.editWindowTimeout=null,n.componentDidUnmount=!1,n.enableBroadcastKeywords=!(n.props.messageContainerType===F.H.THREADS_FLEXPANE||n.props.messageContainerType===F.H.THREADS_VIEW),n.textyModules={tabcomplete:{searchOptions:{},positionMenu:function(e){e.style.width=n.texty.container.offsetWidth+"px",Object(X.a)(e,n.texty.container)},completers:["channels","emoji","members"]}},n.state={editSecondsRemaining:n.countRemainingSeconds(),numCharsOverLimit:n.props.countCharsOverMessageLimit({channelId:n.props.channelId,text:n.getEditContentsAsString(),delta:n.props.featureWysiwygComposer?new O.a(n.props.originalMessageContents.contents):null,featureWysiwygComposer:n.props.featureWysiwygComposer})},n.getComputedModules=Object(ae.a)(function(e,t,n,a,i){if(!n&&!a)return e;var o=Object(se.a)({featureWysiwygComposer:a});return r()({},e,{composer:r()({},o,{teamId:t,zIndexOverride:i?null:200}),slacklink:a&&{convertImages:!1,disableLinksWithLabels:!0},slackmarkdown:a&&{convertHeaders:!1,convertHorizontalRule:!1}})}),n}return p()(t,e),l()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.isSelfIm;e.editWindowMin>=0&&!t&&(this.editWindowTimeout=setInterval(this.onTimerInterval,1e3))}},{key:"componentWillUnmount",value:function(){if(this.syncEditStateOnUnmount){var e=this.texty.getContents(),t=this.hasUnsavedChanges();this.props.updateEditState({editOps:e.contents,hasUnsavedChanges:t})}this.editWindowTimeout&&clearInterval(this.editWindowTimeout),this.componentDidUnmount=!0}},{key:"onEnter",value:function(){return this.maybeSave(),!1}},{key:"onTextChange",value:function(){var e=this.props,t=e.didRequestToStopEditing,n=e.channelId,a=this.state.numCharsOverLimit,r=this.props.countCharsOverMessageLimit({channelId:n,text:this.getEditContentsAsString(),delta:this.props.featureWysiwygComposer?new O.a(this.getEditContents().contents):null,featureWysiwygComposer:this.props.featureWysiwygComposer});(r>0||a>0)&&this.setState(function(){return{numCharsOverLimit:r}}),this.props.updateHasUnsavedChanges(this.hasUnsavedChanges()),t&&!this.hasUnsavedChanges()&&this.props.setDidRequestToStopEditing(!1)}},{key:"onTimerInterval",value:function(){var e=this;this.setState(function(){return{editSecondsRemaining:e.countRemainingSeconds()}})}},{key:"getEditContents",value:function(){var e=this.props.initialEditOps;return this.texty?this.texty.getContents():e?{contents:e}:{contents:[]}}},{key:"getEditContentsAsString",value:function(){return this.props.featureWysiwygComposer?"":Object(Z.a)(this.getEditContents())}},{key:"setTextyRef",value:function(e){this.texty=e&&e.getWrappedInstance?e.getWrappedInstance():e}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.didRequestToStopEditing&&!this.hasUnsavedChanges()&&this.stopEditingMessage()}},{key:"UNSAFE_componentWillUpdate",value:function(e,t){t.editSecondsRemaining<=0&&clearInterval(this.editWindowTimeout)}},{key:"countRemainingSeconds",value:function(){var e=this.props,t=e.isSelfIm,n=e.editWindowMin,a=e.ts;if(n<0||t)return null;var r=60*n*1e3,i=Object(J.n)(a).getTime()+r;return Math.round((i-Date.now())/1e3)}},{key:"handleSaveEditError",value:function(e){switch(e.message){case"edit_window_closed":this.renderTimeoutErrorDialog();break;case"msg_too_long":this.renderLengthErrorDialog();break;default:this.renderUnknownErrorDialog()}}},{key:"hasUnsavedChanges",value:function(){var e=this.props,t=e.initialEditOps,n=e.originalMessageContents;return this.texty?!ee(this.texty.getContents.contents,n.contents):!t||!(t&&ee(t,n.contents))}},{key:"isSavingDisabled",value:function(){var e=this.state.editSecondsRemaining;return Object(h.a)(e)&&e<=0||this.shouldShowLengthWarning()}},{key:"maybeSave",value:function(){var e=this.props,t=e.channelId,n=e.ts,a=e.viewContext,r=e.featureWysiwygComposer,i=this.state,o=i.editSecondsRemaining;return!(i.numCharsOverLimit>0)&&(!(Object(h.a)(o)&&o<=0)&&(this.texty.isEmpty({doIgnoreWhitespace:!0})?(this.startDelete(),!1):(this.props.saveMessageEdit({channelId:t,text:this.getEditContentsAsString(),delta:r?new O.a(this.getEditContents().contents):null,viewContext:a,ts:n}).catch(this.handleSaveEditError),!0)))}},{key:"shouldShowLengthWarning",value:function(){return this.state.numCharsOverLimit>0}},{key:"shouldShowTimeoutWarning",value:function(){var e=this.state.editSecondsRemaining;return Object(h.a)(e)&&e<60}},{key:"shouldShowUnsavedWarning",value:function(){return this.props.didRequestToStopEditing&&this.hasUnsavedChanges()}},{key:"startDelete",value:function(){var e=this.props,t=e.channelId,n=e.originalMessageTextUsedForDeletionOnly,a=e.originalMessageContents,r=e.canDelete,i=e.canUnbroadcast,o=e.ts,s=e.viewContext,l=e.featureWysiwygComposer;if(r)this.props.openModal({element:v.a.createElement(M.a,{channelId:t,ts:o})});else if(i)this.props.openModal({element:v.a.createElement(P.a,{channelId:t,ts:o})});else if(l){var c=new O.a(a.contents),u=c.compose((new O.a).retain(c.length(),{strike:!0}));this.props.saveMessageEdit({channelId:t,delta:u,viewContext:s,ts:o}).catch(this.handleSaveEditError)}else{var d="~"+n.replace(/~/g,"")+"~";this.props.saveMessageEdit({channelId:t,text:d,viewContext:s,ts:o}).catch(this.handleSaveEditError)}}},{key:"stopEditingMessage",value:function(){var e=this.props,t=e.channelId,n=e.ts,a=e.viewContext;this.syncEditStateOnUnmount=!1,this.props.stopEditingMessage({viewContext:a,channelId:t,ts:n})}},{key:"renderInput",value:function(){var e=this,t=this.props,n=t.initialContents,a=t.messageHasText,r=t.useJumbomoji,i=t.channelId,o=t.featureSonicInputs,s=t.clientToolBar,l=t.featureWysiwygComposer,c=t.teamId,u=a?le.t("Edit message"):le.t("Add message"),d=s&&!o?"c-message__editor__input--legacy c-message__editor__input--client_toolbar":"c-message__editor__input--legacy";if(!o){var p=this.getComputedModules(this.textyModules,c,s,l,o);return v.a.createElement(v.a.Fragment,null,v.a.createElement(z.default,{id:ue,ref:this.setTextyRef,className:d,modules:p,ariaLabel:u,placeholder:u,initialText:n,onEnter:this.onEnter,onEscape:this.stopEditingMessage,onTextChange:this.onTextChange,enableJumbomoji:r,focusOnMount:!0,useLegacyCreate:!0,channelId:i,enableBroadcastKeywords:this.enableBroadcastKeywords,useFocusRing:!1}),v.a.createElement(G.c,{onClick:de,className:"c-message__editor__emoji_menu","aria-label":"Emoji menu"},v.a.createElement(V.a,{className:"c-message__editor__emoji_circle_icon",type:"circle-fill"}),v.a.createElement(V.a,{className:"c-message__editor__emoji_smile_icon",type:"smile-o"}),v.a.createElement(V.a,{className:"c-message__editor__emoji_happy_icon",type:"happy-smile"})))}return v.a.createElement(Y.a,{completeOnChannels:!0,completeOnEmoji:!0,completeOnMembers:!0,shouldCompleteOnTab:!0,channelId:this.props.channelId,renderInput:function(t){var a=t.isOpen,d=t.modules,p=e.getComputedModules(d,c,s,l,o);return v.a.createElement(z.default,{ref:e.setTextyRef,className:"c-message__editor__input",modules:p,ariaLabel:u,placeholder:u,initialText:n,onEnter:e.onEnter,onEscape:e.stopEditingMessage,onTextChange:e.onTextChange,enableJumbomoji:r,isAutocompleteOpen:a,focusOnMount:!0,channelId:i,enableBroadcastKeywords:e.enableBroadcastKeywords,enableEmojiButton:!0,enableComposerButton:l,enableSendButton:!1,useFocusRing:!1})}})}},{key:"renderLengthErrorDialog",value:function(){var e=le.t("Message editing failed"),t=le.t("Sorry, your message is too long. Please shorten it and try again.");this.props.openModal({element:v.a.createElement(ie.a,{title:e},t)})}},{key:"renderLengthWarning",value:function(){var e=le.t("text is too long!");return v.a.createElement("span",{className:"c-message__editor__warning","data-js":"length_warning"},e)}},{key:"renderTimeoutErrorDialog",value:function(){var e=this.props,t=e.editWindowMin,n=e.isAdminUser,a=Object(J.s)(t,{units:"minutes"}),r=le.t("Message editing failed"),i=le.rt("Sorry, but messages can only be edited for {duration} after posting.",{duration:v.a.createElement("b",null,a)}),o=void 0;n&&(o=le.rt("(To adjust the message editing window, visit <a>Workspace Settings</a>)",null,function(e){var t=e.text;return v.a.createElement(K.a,{href:"/admin/settings#message_editing",target:"_new"},t)})),this.props.openModal({element:v.a.createElement(ie.a,{title:r},v.a.createElement("p",null,i),o)})}},{key:"renderTimeoutWarning",value:function(){var e=this.state.editSecondsRemaining,t=void 0;return e<=0?t=le.t("(your time to edit ran out)"):e<=60&&(t=le.rt("(you have <b>{seconds, number}</b> {seconds, plural, =1{second}other{seconds}})",{seconds:e})),v.a.createElement("span",{className:"c-message__editor__warning","data-js":"timeout_warning"},t)}},{key:"renderUnknownErrorDialog",value:function(){var e=le.t("Message editing failed"),t=le.t("Sorry, something went wrong with editing your message. Try again in a moment.");this.props.openModal({element:v.a.createElement(ie.a,{title:e},t)})}},{key:"renderUnsavedWarning",value:function(){var e=le.rt("Finish editing this message first! Or press <b>escape</b> if you\u2019ve changed your mind.",{fallbackHash:"3480a7bdfba580c87d36cd0fc11d286cecbdbe27"});return v.a.createElement("span",{className:"c-message__editor__info","data-js":"unsaved_warning"},e)}},{key:"renderWarningMessages",value:function(){var e=this.shouldShowUnsavedWarning()&&this.renderUnsavedWarning(),t=this.shouldShowTimeoutWarning()&&this.renderTimeoutWarning(),n=this.shouldShowLengthWarning()&&this.renderLengthWarning();return e||t||n?v.a.createElement("div",{className:"c-message__editor__messages"},e,t,n):null}},{key:"render",value:function(){return v.a.createElement("div",{className:"c-message__editor","data-qa":"message_editor"},v.a.createElement("div",{className:"c-message__editor__input_container"},this.renderInput()),v.a.createElement("div",{className:"c-message__editor__footer"},v.a.createElement(G.d,{type:"outline",size:"small",onClick:this.stopEditingMessage},le.t("Cancel")),v.a.createElement(G.d,{size:"small",className:"c-message__editor__save",onClick:this.maybeSave,disabled:this.isSavingDisabled()},v.a.createElement(V.a,{type:"enter",className:"margin_right_50"}),le.t("Save Changes")),this.renderWarningMessages()))}}]),t}(_.PureComponent);pe.displayName="BaseEditMessage",pe.defaultProps=ce;var me={saveMessageEdit:x.a,setDidRequestToStopEditing:R.g,updateEditState:R.j,stopEditingMessage:R.h,updateHasUnsavedChanges:R.k,openModal:j.e,countCharsOverMessageLimit:q},he=Object(oe.b)(Object(y.b)(function(e,t){var n=t.ts,a=t.channelId,r=t.viewContext,i=t.messageContainerType,o=Object(I.a)(e,a,n);if(!o)return{};var s=Object(ne.a)(e),l=Object(w.e)(e,a),c=Object(N.a)(e,"msg_edit_window_mins"),u=Object(A.b)(e),d=Object(T.a)(e),p=Object(W.k)(e,{message:o,channel:l,messageContainerType:i}),h=Object(W.p)(e,{message:o,channel:l,messageContainerType:i}),b=Object(R.d)(e,{viewContext:r,channelId:a,ts:n})||{},f=b.editOps,g=b.didRequestToStopEditing,_={contents:Object(te.a)(e,o,{featureWysiwygComposer:s}).ops},v=void 0;return v=f?{contents:f}:_,{channelId:l.id,teamId:Object(E.b)(e),isSelfIm:Object(H.Tb)(u.id,l),canDelete:p,canUnbroadcast:h,originalMessageContents:_,initialEditOps:f,initialContents:v,ts:n,originalMessageTextUsedForDeletionOnly:o.text||"",messageHasText:s?!(!o.text&&Object(m.a)(o.blocks)):!!o.text,editWindowMin:c,isAdminUser:u.is_admin,didRequestToStopEditing:g,useJumbomoji:d,featureSonicInputs:Object(C.m)(e,"feature_sonic_inputs"),clientToolBar:"composer_toolbar"===Object(S.c)(e,"composer_toolbar"),featureWysiwygComposer:s}},me)(pe));he.propTypes={ts:g.b.string.isRequired,channelId:g.b.string.isRequired};t.a=he},YDA8:function(e,t,n){"use strict";var a=n("QbLZ"),r=n.n(a),i=n("iCc5"),o=n.n(i),s=n("V7oC"),l=n.n(s),c=n("FYw3"),u=n.n(c),d=n("mRg0"),p=n.n(d),m=n("UXvI"),h=n("lCmp"),b=n("ifKl"),f=n("qAkX"),g=n("Z0Cl"),_=n("aK/h"),v=n("kxpR"),y=n.n(v),k=n("tn36"),O=n("XHGt"),C=n("3zPy"),E=n("nNoG"),j=n("Go8C"),S=n("YYb+"),I=n("Rjjz"),w=n("yU6Y"),N=n.n(w),T=n("rWF5"),A=n("t85p"),R=n("HXD8"),P=n("uwE/"),M=n("uxhc"),x=n("brL+"),F=n("jeHR"),L=n("Zr7G"),D=n("Smdl"),U=n("dxEi"),B=n("RX/a"),q=n("bmfP"),H=n("od5y"),W=n("wljo"),G=new E.b("search"),K=(_.b.bool,_.b.bool,_.b.func.isRequired,function(e){var t=e.shouldShowOfflineNotice,n=e.shouldShowFeedbackLink,a=e.onFeedbackClick;return(t||n)&&y.a.createElement("footer",null,y.a.createElement(q.a,null,y.a.createElement("span",{className:"c-search_autocomplete__footer_offline_notice",id:"footer-instructions"},G.rt("{iconOffline} <strong>No connection.</strong> Search is not available while offline, and navigating to conversations may be limited.",{iconOffline:y.a.createElement(H.b,{type:"cloud-offline",size:"inherit",className:"c-icon--inline"})}))),y.a.createElement(W.a,{className:"c-search_autocomplete__footer_feedback",onClick:a}))});K.defaultProps={shouldShowOfflineNotice:!1,shouldShowFeedbackLink:!1};var V=K,z=(n("L0DF"),new E.b("search")),Y=new E.b("view"),Q=(_.b.string,_.b.string,_.b.array.isRequired,_.b.number,_.b.func,_.b.func,_.b.func,_.b.func.isRequired,_.b.func.isRequired,_.b.func.isRequired,_.b.func.isRequired,_.b.bool,_.b.string.isRequired,_.b.object,_.b.bool.isRequired,_.b.bool.isRequired,{selectedIndex:null,onAccept:b.a,onDelete:b.a,onSelectedIndexChange:b.a,displayQuery:null,userQuery:null,lastOpenMethodWasSwitchy:!1,telemeter:L.d}),X=function(e,t){return(e%t+t)%t},J=function(e){function t(e){o()(this,t);var n=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(k.a)(n,["onKeydown","onUserQueryChange","onSuggestionAccept","onSuggestionDelete","onSuggestionSelected","onMouseLeaveList","onFeedbackClick"]),n.searchAutocompleteSuggestionsPromise=void 0,n.markAutocompleteRenderStart=Object(m.a)(R.b.bind(null,e.telemeter),2e3,{leading:!0}),n.populateChannelNameCounts(),n.listRef=y.a.createRef(),n.listItemRefs={},n}return p()(t,e),l()(t,[{key:"componentDidMount",value:function(){document.body.addEventListener("keydown",this.onKeydown),this.onUserQueryChange(),Object(M.e)(this.props.teamId);var e=Object(D.a)()?"omniswitcher-open-sonic":"omniswitcher-open-legacy";this.props.telemeter.measureAndClear("omniswitcher-open-mark",e)}},{key:"shouldComponentUpdate",value:function(e){return e.selectedIndex!==this.props.selectedIndex||e.suggestions!==this.props.suggestions||e.shouldShowOfflineNotice!==this.props.shouldShowOfflineNotice}},{key:"componentDidUpdate",value:function(e){e.userQuery!==this.props.userQuery&&this.onUserQueryChange(),this.populateChannelNameCounts()}},{key:"componentWillUnmount",value:function(){document.body.removeEventListener("keydown",this.onKeydown)}},{key:"onFeedbackClick",value:function(){this.props.openSearchFeedbackDialog({query:this.props.userQuery})}},{key:"onKeydown",value:function(e){var t=function(){return e.preventDefault(),e.stopPropagation(),!1},n=e.shiftKey,a=e.which,r=C.codes.up,i=C.codes.tab,o=C.codes.down;return!n&&a===r||n&&a===i?(this.decrementSelectedIndex(),t()):!(!n&&a===o||a===i)||(this.incrementSelectedIndex(),t())}},{key:"onUserQueryChange",value:function(){Object(R.a)(this.props.telemeter)}},{key:"onSuggestionDelete",value:function(e){this.props.setSearchAutocompleteSuggestions({suggestions:Object(g.a)(this.props.suggestions,function(t){return e.key!==t.key})}),this.props.onDelete()}},{key:"onSuggestionSelected",value:function(e,t){this.props.setSearchAutocompleteSelection({selectedIndex:e,setText:!t})}},{key:"onMouseLeaveList",value:function(){this.props.setSearchAutocompleteSelection({selectedIndex:null,setText:!1})}},{key:"onSuggestionAccept",value:function(){this.props.onAccept()}},{key:"getListItemRef",value:function(e){return this.listItemRefs[e]||(this.listItemRefs[e]=y.a.createRef()),this.listItemRefs[e]}},{key:"scrollToListItemIndex",value:function(e){if(this.listRef&&this.listRef.current&&this.listItemRefs[e]&&this.listItemRefs[e].current){var t=this.listRef.current;if(0!==e){var n=this.listItemRefs[e].current.getWrappedInstance?this.listItemRefs[e].current.getWrappedInstance():this.listItemRefs[e].current,a=n.offsetTop-t.offsetTop,r=a+n.offsetHeight;a<t.scrollTop&&(t.scrollTop=a),r>t.scrollTop+t.clientHeight&&(t.scrollTop=r-t.clientHeight)}else t.scrollTop=0}}},{key:"populateChannelNameCounts",value:function(){var e=this;this.channelNameCounts={},this.props.suggestions.forEach(function(t){t.is_type_channel&&(e.channelNameCounts[t.channel.name]=(e.channelNameCounts[t.channel.name]||0)+1)})}},{key:"incrementSelectedIndex",value:function(){var e=this.props.suggestions&&this.props.suggestions[this.props.selectedIndex||0];if(e&&e.type===P.b.QUERY&&e.suggestion_replacement!==this.props.displayQuery)this.props.setSearchAutocompleteSelection({selectedIndex:this.props.selectedIndex,setText:!0});else{var t=X((null===this.props.selectedIndex?-1:this.props.selectedIndex)+1,this.props.suggestions.length);this.props.setSearchAutocompleteSelection({selectedIndex:t,setText:!0}),this.scrollToListItemIndex(t)}}},{key:"decrementSelectedIndex",value:function(){var e=X(this.props.selectedIndex-1,this.props.suggestions.length);this.props.setSearchAutocompleteSelection({selectedIndex:e,setText:!0}),this.scrollToListItemIndex(e)}},{key:"propsForSuggestion",value:function(e,t){var n=t.is_type_channel&&this.channelNameCounts[t.channel.name]>1;return{index:e,suggestion:t,key:t.key,isSelected:e===this.props.selectedIndex,onSelected:this.onSuggestionSelected,onAccept:this.onSuggestionAccept,onDelete:this.onSuggestionDelete,hasChannelNameCollision:n}}},{key:"renderScreenReaderWorkaround",value:function(){var e=this;if(!(N.a.chrome&&N.a.version<67&&Object(T.u)()))return null;var t=this.props.selectedIndex,n=Object(f.a)(this.props.suggestions.map(function(n,a){return(n.is_type_navigational||n.is_type_action)&&a===t?y.a.createElement(B.a,e.propsForSuggestion(a,n)):null}).filter(function(e){return e}));return y.a.createElement("div",{"aria-live":"polite",className:"offscreen"},n)}},{key:"renderBlankSlate",value:function(){var e=this,t=this.props,n=t.shouldShowOfflineNotice,a=t.featureTinyspeck,i=Object(h.a)(this.props.suggestions,function(e){return e.is_type_query_history}),o=y.a.createElement("header",null,y.a.createElement("span",{className:"c-search_autocomplete__header_label"},y.a.createElement("span",{className:"c-search_autocomplete__header_label_text"},z.t("Recent searches")))),s=this.props.suggestions.map(function(t,n){return t.is_type_query_history&&y.a.createElement(B.a,r()({listItemRef:e.getListItemRef(n)},e.propsForSuggestion(n,t)))}),l=Object(h.a)(this.props.suggestions,function(e){return e.is_type_navigational}),c=y.a.createElement("header",null,y.a.createElement("span",{className:"c-search_autocomplete__header_label"},y.a.createElement("span",{className:"c-search_autocomplete__header_label_text"},Y.t("Unreads & drafts",{fallbackHash:"95ed8c1c63175388741df85c038e3dc99d8ac375"})))),u=this.props.suggestions.map(function(t,n){return t.is_type_navigational&&y.a.createElement(B.a,r()({listItemRef:e.getListItemRef(n)},e.propsForSuggestion(n,t)))}),d=this.renderScreenReaderWorkaround(),p=y.a.createElement(v.Fragment,null,l&&y.a.createElement("li",{role:"presentation"},c),u),m=y.a.createElement(v.Fragment,null,i&&y.a.createElement("li",{role:"presentation"},o),s);return y.a.createElement("div",{className:"c-search_autocomplete"},d,y.a.createElement("ol",{ref:this.listRef,className:"c-search_autocomplete__suggestion_list",role:"listbox",id:"c-search_autocomplete__suggestion_list",onMouseLeave:this.onMouseLeaveList},this.props.lastOpenMethodWasSwitchy&&p,m,!this.props.lastOpenMethodWasSwitchy&&p),y.a.createElement(V,{shouldShowFeedbackLink:a,shouldShowOfflineNotice:n,onFeedbackClick:this.onFeedbackClick}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.shouldShowOfflineNotice,a=t.featureTinyspeck;if(!this.props.userQuery)return this.renderBlankSlate();this.markAutocompleteRenderStart();var i=this.renderScreenReaderWorkaround();return y.a.createElement("div",{className:"c-search_autocomplete"},i,y.a.createElement("ol",{ref:this.listRef,className:"c-search_autocomplete__suggestion_list",role:"listbox",id:"c-search_autocomplete__suggestion_list",onMouseLeave:this.onMouseLeaveList},this.props.suggestions.map(function(t,n){return y.a.createElement(B.a,r()({listItemRef:e.getListItemRef(n)},e.propsForSuggestion(n,t)))})),y.a.createElement(V,{shouldShowOfflineNotice:n,shouldShowFeedbackLink:a,onFeedbackClick:this.onFeedbackClick}))}}]),t}(v.Component);J.displayName="SearchAutocomplete",J.defaultProps=Q;var Z={setSearchAutocompleteSelection:function(){return S.i.apply(void 0,arguments)},setSearchAutocompleteSuggestions:function(){return S.j.apply(void 0,arguments)},fetchSearchAutocompleteSuggestions:function(){return I.b.apply(void 0,arguments)},openSearchFeedbackDialog:function(){return I.j.apply(void 0,arguments)}};t.a=Object(O.b)(function(e){return{suggestions:Object(S.d)(e),selectedIndex:Object(S.c)(e),userQuery:Object(j.d)(e),displayQuery:Object(j.b)(e),lastOpenMethodWasSwitchy:Object(F.c)(e),teamId:Object(x.b)(e),telemeter:Object(L.c)({state:e}),shouldShowOfflineNotice:Object(A.m)(e,"feature_offline_mode")&&!Object(U.c)(e),featureTinyspeck:Object(A.m)(e,"feature_tinyspeck")}},Z)(J)},YL49:function(e,t,n){},YcId:function(e,t,n){"use strict";var a=n("kxpR"),r=n.n(a),i=n("aK/h"),o=n("nNoG"),s=n("5mKg"),l=(n("UCMe"),new o.b("unavailable_channel")),c=(i.b.object,{memberTeam:void 0});function u(e){var t=e.memberTeam;return r.a.createElement("div",{className:"p-member_profile_card__special_text"},l.rt("{teamName} is making some changes to their workspace, so content and conversations shared with them are temporarily unavailable.",{teamName:r.a.createElement("strong",null,Object(s.f)(t))}))}u.displayName="MemberProfileUnavailable",u.defaultProps=c,t.a=u},YjF7:function(e,t,n){},YlHk:function(e,t,n){},YmYS:function(e,t,n){"use strict";function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isPinned,n=e.isStarred,a=e.isEphemeral,r=e.isBroadcast,i=e.isCustomResponse,o=e.isSliHighlight;return r?"broadcast":t?"pinned":n?"starred":a?"ephemeral":i?"custom_response":o?"sli_highlight":void 0}n.d(t,"a",function(){return a})},YyUD:function(e,t,n){},Z7NI:function(e,t,n){"use strict";n.d(t,"a",function(){return O});var a=n("QbLZ"),r=n.n(a),i=n("jo6Y"),o=n.n(i),s=n("iCc5"),l=n.n(s),c=n("V7oC"),u=n.n(c),d=n("FYw3"),p=n.n(d),m=n("mRg0"),h=n.n(m),b=n("kxpR"),f=n.n(b),g=n("TSYQ"),_=n.n(g),v=n("aK/h"),y=n("llxT"),k=(v.b.string.isRequired,v.b.bool,v.b.object,{disabled:!1,listEntityProps:{}});function O(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=function(n){function a(e){l()(this,a);var t=p()(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.state={isActive:!1},t.handleMouseEnter=t.handleMouseEnter.bind(t),t.handleMouseLeave=t.handleMouseLeave.bind(t),t}return h()(a,n),u()(a,[{key:"handleMouseEnter",value:function(){this.setState(function(){return{isActive:!0}})}},{key:"handleMouseLeave",value:function(){this.setState(function(){return{isActive:!1}})}},{key:"render",value:function(){var n=this.props,a=n.id,i=n.listEntityProps,s=o()(n,["id","listEntityProps"]),l=this.state.isActive,c=_()(i.className,t.className);return f.a.createElement(y.a,r()({onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},s),f.a.createElement(e,r()({id:a,isActive:l&&!this.props.disabled,isDisabled:this.props.disabled},t,i,{className:c})))}}]),a}(b.PureComponent);return n.displayName="ListEntityButton",n.defaultProps=k,n}},ZSbO:function(e,t,n){"use strict";var a=n("aK/h"),r=n("kxpR"),i=n.n(r),o=n("XHGt"),s=n("XL7r"),l=n("VMwU"),c=n("W+QA"),u=n("yHhI"),d=n("t85p"),p=n("Dpde"),m=n("Lev8"),h=(a.b.oneOf(["custom_theme","default","default_theme","aubergine_classic_theme","hoth_theme","monument_theme","chocolate_theme","ocean_theme","workhard_theme","nocturne_theme","solanum_theme","brinjal_theme","cotton_theme","eco_theme"]),a.b.object,a.b.bool,a.b.bool,a.b.string,a.b.object.isRequired,{theme:"default_theme",custom:void 0,featureClassicNav:!1,historyNavigationEnabled:!1,clientTheme:"light"}),b=function(e){var t=Object(c.e)(Object(c.c)(e.theme,e.custom,{clientTheme:e.clientTheme}));if(!t)return e.logger.error("SIDEBAR_THEME",'Theme: could not identify theme "'+e.theme+'" ('+e.custom+")"),null;var n=Object(l.d)(t,{featureClassicNav:e.featureClassicNav}),a=t.text_color,r=Object(l.c)(t.column_bg,25),o=Object(l.c)(t.column_bg,35),s=e.historyNavigationEnabled?Object(l.l)(a,.15):r,u=e.historyNavigationEnabled?Object(l.l)(a,.2):o,d=Object(l.b)(a,Object(l.l)(a,.3)),p="\n\t\t.p-channel_sidebar {\n\t\t\tbackground: "+t.column_bg+";\n\t\t\tcolor: "+n+';\n\t\t}\n\n\t\t/* Cover up "p-channel_sidebar__icon" when the close button is focused */\n\t\t.p-channel_sidebar__close:focus {\n\t\t\tbackground: '+t.column_bg+";\n\t\t}\n\t\t.p-channel_sidebar__channel--selected + .p-channel_sidebar__close:focus {\n\t\t\tbackground: "+t.active_item+";\n\t\t}\n\n\t\t.p-channel_sidebar__channel,\n\t\t.p-channel_sidebar__link,\n\t\t.p-channel_sidebar__channel:link,\n\t\t.p-channel_sidebar__link:link,\n\t\t.p-channel_sidebar__channel:visited,\n\t\t.p-channel_sidebar__link:visited,\n\t\t.p-channel_sidebar__channel:hover,\n\t\t.p-channel_sidebar__link:hover {\n\t\t\tcolor: "+n+";\n\t\t}\n\t\t.p-channel_sidebar__section_heading--selected,\n\t\t.p-channel_sidebar__section_heading--selected:hover,\n\t\t.p-channel_sidebar__channel--selected,\n\t\t.p-channel_sidebar__link--selected,\n\t\t.p-channel_sidebar__channel--selected:link,\n\t\t.p-channel_sidebar__link--selected:link,\n\t\t.p-channel_sidebar__channel--selected:visited,\n\t\t.p-channel_sidebar__link--selected:visited,\n\t\t.p-channel_sidebar__channel--selected:hover,\n\t\t.p-channel_sidebar__link--selected:hover,\n\t\t.p-channel_sidebar__channel--selected + .p-channel_sidebar__close,\n\t\t.p-channel_sidebar__link--selected + .p-channel_sidebar__close {\n\t\t\tcolor: "+t.active_item_text+";\n\t\t}\n\n\t\t.p-channel_sidebar__channel:hover,\n\t\t.p-channel_sidebar__link:hover,\n\t\t.p-channel_sidebar__close_container:hover {\n\t\t\tbackground: "+t.hover_item+";\n\t\t}\n\n\t\t.p-channel_sidebar__header {\n\t\t\tcolor: "+n+';\n\t\t}\n\n\t\t/* Folders */\n\n\t\tinput[type="text"].p-channel_sidebar__folder_heading_label_rename {\n\t\t\tbackground: '+r+";\n\t\t\tcolor: "+n+';\n\t\t}\n\t\tinput[type="text"].p-channel_sidebar__folder_heading_label_rename:hover {\n\t\t\tbackground: '+o+";\n\t\t\tcolor: "+n+";\n\t\t}\n\n\t\t/* Override presence icons */\n\t\t.p-channel_sidebar__presence_icon.c-presence--active,\n\t\t.p-channel_sidebar__channel_icon_prefix--im-slackbot {\n\t\t\tcolor: "+t.active_presence+";\n\t\t}\n\t\t.p-channel_sidebar__channel--selected .p-channel_sidebar__presence_icon.c-presence,\n\t\t.p-channel_sidebar__channel--selected .p-channel_sidebar__channel_icon_prefix--im-slackbot {\n\t\t\tcolor: "+t.active_item_text+";\n\t\t}\n\t\t.p-channel_sidebar__presence_icon.c-presence--away {\n\t\t\tcolor: "+n+";\n\t\t}\n\n\t\t.p-channel_sidebar__section_heading--selected,\n\t\t.p-channel_sidebar__channel--selected,\n\t\t.p-channel_sidebar__channel--selected:hover,\n\t\t.p-channel_sidebar__link--selected,\n\t\t.p-channel_sidebar__link--selected:hover {\n\t\t\tbackground: "+t.active_item+";\n\t\t}\n\n\t\t.p-channel_sidebar__section_heading--selected:hover .p-channel_sidebar__section_heading_label,\n\t\t.p-channel_sidebar__channel--selected .p-channel_sidebar__channel_icon_prefix,\n\t\t.p-channel_sidebar__channel--selected:hover .p-channel_sidebar__channel_icon_prefix,\n\t\t.p-channel_sidebar__link--selected:before,\n\t\t.p-channel_sidebar__link--selected:before,\n\t\t.p-channel_sidebar__channel--selected:after,\n\t\t.p-channel_sidebar__channel--selected:hover:after,\n\t\t.p-channel_sidebar__link--selected:after,\n\t\t.p-channel_sidebar__link--selected:after {\n\t\t\tcolor: "+t.active_item_text+";\n\t\t}\n\n\t\t.p-channel_sidebar__badge,\n\t\t.p-channel_sidebar__banner--mentions {\n\t\t\tbackground: "+t.badge+";\n\t\t}\n\n\t\t.p-channel_sidebar .c-custom_scrollbar__thumb_vertical,\n\t\t.p-channel_sidebar .c-scrollbar__bar {\n\t\t\tbackground: "+Object(l.l)(a,.45)+";\n\t\t}\n\n\t\t.client_channels_list_container.focusablesection:focus .sectionfocusindicator,\n\t\t.client_channels_list_container .focus-ring,\n\t\t.p-channel_sidebar.focusablesection:focus .sectionfocusindicator,\n\t\t#team_menu.focusablesection:focus .sectionfocusindicator {\n\t\t\tbox-shadow: "+d+";\n\t\t}\n\n\t\t.client_channels_list_container a:not(.c-link--focus-visible).focus-ring,\n\t\t.client_channels_list_container button:not(.c-button--focus-visible).focus-ring,\n\t\t.p-channel_sidebar__jumper.c-button--focus-visible:focus,\n\t\t.p-channel_sidebar__history_button.c-button--focus-visible:focus,\n\t\t.p-channel_sidebar__section_heading_label--clickable.c-button--focus-visible:focus,\n\t\t.p-channel_sidebar__section_heading_plus.c-button--focus-visible:focus,\n\t\t.p-channel_sidebar__channel.c-link--focus-visible:focus .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__link.c-button--focus-visible:focus .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__link.c-link--focus-visible:focus .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__close.c-button--focus-visible:focus {\n\t\t\tbox-shadow: "+d+";\n\t\t}\n\n\t\t/** `opacity: 1` color overrides */\n\t\t.p-channel_sidebar__channel--unread:not(.p-channel_sidebar__channel--muted):not(.p-channel_sidebar__channel--suggested):not(.p-channel_sidebar__channel--selected) .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__link--unread:not(.p-channel_sidebar__link--selected) .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__link--invites:not(.p-channel_sidebar__link--dim) .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__link--add-channel:not(.p-channel_sidebar__link--dim) .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__link--add-apps:not(.p-channel_sidebar__link--dim) .p-channel_sidebar__name,\n\t\t.p-channel_sidebar__section_heading_label--clickable:hover,\n\t\t.p-channel_sidebar__section_heading_label--unreads,\n\t\t.p-channel_sidebar__quickswitcher:hover {\n\t\t\tcolor: "+a+";\n\t\t}\n\n\t\t/** Navigation Bar **/\n\t\t.p-channel_sidebar__jumper {\n\t\t\tbackground: "+s+";\n\t\t}\n\t\t.p-channel_sidebar__jumper:hover {\n\t\t\tbackground: "+u+";\n\t\t}\n\t\t.p-channel_sidebar__history_button {\n\t\t\tbackground: "+s+";\n\t\t}\n\t\t.p-channel_sidebar__history_button:hover {\n\t\t\tbackground: "+u+";\n\t\t}\n\t\t.p-channel_sidebar__history_button--disabled:hover {\n\t\t\tbackground: "+s+";\n\t\t}\n\n\t\t/** Compose Button **/\n\t\t.p-channel_sidebar__compose_button,\n\t\t.p-ia__sidebar_header__button--primary {\n\t\t\tbackground: "+a+";\n\t\t\tcolor: "+t.column_bg+";\n\t\t}\n\n\t\t/** Classic Nav **/\n\t\t.p-classic_nav__team_header {\n\t\t\tbackground: "+t.column_bg+";\n\t\t\tcolor: "+a+";\n\t\t}\n\t\t.p-classic_nav__team_header:hover {\n\t\t\tbackground: "+t.menu_bg+";\n\t\t}\n\t\t.p-classic_nav__team_header__user__presence.c-presence--active {\n\t\t\tcolor: "+t.active_presence+";\n\t\t}\n\t\t.p-classic_nav__team_header__user__presence.c-presence--away {\n\t\t\tcolor: "+n+";\n\t\t}\n\t\t.p-classic_nav__team_header .c-link--focus-visible:focus,\n\t\t.p-classic_nav__team_header .c-button--focus-visible:focus,\n\t\t.p-channel_sidebar__static_list__item.c-virtual_list__item--focus:focus:after,\n\t\tdiv[aria-selected=true].p-channel_sidebar__static_list__item:focus:after {\n\t\t\tbox-shadow: "+d+";\n\t\t}\n\n\t\t/** IA experiment (feature_iap1) **/\n\t\t.p-ia__sidebar_header {\n\t\t\tbackground: "+t.column_bg+";\n\t\t\tcolor: "+a+";\n\t\t}\n\t\t.p-ia__omniswitcher_button,\n\t\t.p-ia__sidebar_header__button:not(.p-ia__sidebar_header__button--primary) {\n\t\t\tbackground: "+Object(l.l)(a,.15)+";\n\t\t}\n\t\t.p-ia__omniswitcher_button:hover,\n\t\t.p-ia__sidebar_header__button:hover:not(.p-ia__sidebar_header__button--primary),\n\t\t.p-ia__sidebar_header__button--active:not(.p-ia__sidebar_header__button--primary) {\n\t\t\tbackground: "+Object(l.l)(a,.2)+";\n\t\t}\n\t\t.p-ia__sidebar_header__button--compose,\n\t\t.p-ia__sidebar_header__button--compose:hover {\n\t\t\tbackground: "+a+";\n\t\t\tcolor: "+t.column_bg+";\n\t\t}\n\t\t.p-ia__global_control_bar {\n\t\t\tbackground: "+t.column_bg+";\n\t\t\tborder-top-color: "+Object(l.l)(a,.15)+";\n\t\t\tcolor: "+a+";\n\t\t}\n\t\t.p-ia__global_control_bar--main-menu-open {\n\t\t\tborder-top-color: transparent;\n\t\t}\n\t\t.p-ia__main_menu {\n\t\t\tbackground: "+t.column_bg+";\n\t\t\tborder-top-color: "+Object(l.l)(a,.15)+";\n\t\t}\n\t\t.p-ia__main_menu__item {\n\t\t\tcolor: "+n+";\n\t\t}\n\t\t.p-ia__main_menu__item:hover,\n\t\t.p-ia__main_menu__item--hover {\n\t\t\tbackground: "+t.hover_item+";\n\t\t}\n\t\t.p-ia__main_menu__item--selected,\n\t\t.p-ia__main_menu__item--selected:hover {\n\t\t\tcolor: "+t.active_item_text+";\n\t\t\tbackground: "+t.active_item+";\n\t\t}\n\t\t.p-ia__main_menu__separator {\n\t\t\tborder-top-color: "+Object(l.l)(a,.15)+";\n\t\t}\n\t";return i.a.createElement("style",{className:"p-channel_sidebar__theme--"+e.theme},p)};b.displayName="Theme",b.defaultProps=h;t.a=Object(o.b)(function(e){return{theme:Object(s.j)(e,"sidebar_theme"),custom:Object(s.d)(e),featureClassicNav:Object(d.m)(e,"feature_classic_nav"),historyNavigationEnabled:Object(p.a)(e),clientTheme:Object(m.c)(e),logger:Object(u.a)({state:e})}})(b)},ZYU7:function(e,t,n){},a001:function(e,t,n){},"a6/V":function(e,t,n){"use strict";t.a=function(e){return!!e&&(!e.metaKey&&!e.ctrlKey&&(e.key&&1===e.key.length))}},aQya:function(e,t,n){},ah8n:function(e,t,n){},anFW:function(e,t,n){"use strict";var a=n("QbLZ"),r=n.n(a),i=n("iCc5"),o=n.n(i),s=n("V7oC"),l=n.n(s),c=n("FYw3"),u=n.n(c),d=n("mRg0"),p=n.n(d),m=n("zmn3"),h=n("ifKl"),b=n("kxpR"),f=n.n(b),g=n("aK/h"),_=n("XHGt"),v=n("hqEo"),y=n("h9PG"),k=n("RB1+"),O=n("negh"),C=(n("BuFM"),g.b.string,g.b.string,g.b.string,g.b.string,g.b.object,g.b.func,g.b.func,g.b.bool,g.b.string,{channelId:void 0,threadTs:void 0,viewContext:void 0,disableFileUploadsPref:void 0,forwardedRef:void 0,openFileUploadDialog:h.a,onFilesSelectedHandler:null,multiple:!0,accept:void 0}),E=function(e){function t(e){o()(this,t);var n=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onFilesSelected=n.onFilesSelected.bind(n),n}return p()(t,e),l()(t,[{key:"onFilesSelected",value:function(){var e=this.props,t=e.channelId,n=e.threadTs,a=e.viewContext,r=e.forwardedRef,i=e.onFilesSelectedHandler,o={fileUploadAction:O.FileUploadAction.PLUS_MENU,fileUploadSrc:O.FileUploadSrc.LOCAL},s=r.current.files,l=Object(m.a)(s);if(i)i(l);else{var c=Object(k.a)({viewContext:a,channelId:t,threadTs:n});this.props.openFileUploadDialog({files:l,initialChannelId:t,threadTs:n,inputProxy:c,metadata:o})}r.current.value=""}},{key:"render",value:function(){var e=this.props,t=e.disableFileUploadsPref,n=e.forwardedRef,a=e.multiple,i={accept:e.accept};return"disable_all_except_images"===t&&(i.accept="image/*"),f.a.createElement("input",r()({type:"file",className:"p-hidden_file_input",multiple:a,"aria-hidden":"true","data-qa":"file_upload",tabIndex:"-1"},i,{ref:n,onClick:this.onClick,onChange:this.onFilesSelected}))}}]),t}(b.Component);E.displayName="HiddenFileInput",E.defaultProps=C;var j=Object(_.b)(function(e){return{disableFileUploadsPref:Object(y.a)(e,"disable_file_uploads")}},function(e){return{openFileUploadDialog:function(){return e(v.a.apply(void 0,arguments))}}})(E);t.a=f.a.forwardRef(function(e,t){return f.a.createElement(j,r()({},e,{forwardedRef:t}))})},anIG:function(e,t,n){"use strict";var a=n("QbLZ"),r=n.n(a),i=n("iCc5"),o=n.n(i),s=n("V7oC"),l=n.n(s),c=n("FYw3"),u=n.n(c),d=n("mRg0"),p=n.n(d),m=n("TGBA"),h=n("zmn3"),b=n("kxpR"),f=n.n(b),g=n("aK/h"),_=n("XHGt"),v=n("TSYQ"),y=n.n(v),k=n("XL7r"),O=n("HHn2"),C=n("Jnln"),E=n("VwYs"),j=n("m36V"),S=n("cAy8"),I=n("t85p"),w=n("tbBR"),N=n("6Iy0"),T=n("a+Oh"),A=n("nNoG"),R=n("lrhk"),P=new A.b("attachments"),M=(g.b.object.isRequired,g.b.string,g.b.oneOf(Object(m.a)(N.a)),g.b.bool,g.b.bool,g.b.bool,g.b.string,g.b.bool.isRequired,{className:void 0,expandInlineImgsPref:!1,expandNonMediaAttachmentsPref:!1,featureRichTextRendering:!1,viewContext:void 0,blocksContainerContext:N.a.message_attachment}),x=function(e){function t(){return o()(this,t),u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p()(t,e),l()(t,[{key:"renderAttachmentsOverLimitMaybe",value:function(e,t){if(!e.length)return null;var n=this.props,a=n.viewContext,i=n.featureAllyBugbash,o={useAttachmentRules:!1,shouldBeExpandedByDefault:!1,expandableKey:Object(O.a)("attachmentsOverLimit",this.props.msg.ts,{limit:t,viewContext:a})},s=e.length-t,l=i?{"aria-label":P.t("{remainingAttachments, plural, =1 {Toggle attachment} other {Toggle additional {remainingAttachments} attachments}}",{remainingAttachments:s,note:"the label for the button that expands/collapses additional attachments, describes the button for customers using screen readers"})}:{};return f.a.createElement("div",null,f.a.createElement(E.a,r()({},l,o),e),f.a.createElement(j.a,r()({},o,{render:function(t,n){return f.a.createElement(S.a,{isExpanded:t.isExpanded,onClick:n,attachmentsOverLimitCount:e.length})}})))}},{key:"render",value:function(){var e=this.props,t=e.msg,n=e.expandInlineImgsPref,a=e.expandNonMediaAttachmentsPref,r=e.blocksContainerContext,i=e.featureRichTextRendering,o=Object(C.c)(t,n,a,!1,i);if(!t||!o||!o.length)return null;var s=20,l=Object(h.a)(o,function(e,n){var a=e.id||n+1;return e.blocks&&(s=10),f.a.createElement(R.a,{msg:t,attachment:e,key:a,blocksContainerContext:r})}),c=l.splice(s),u=y()("c-message_kit__attachments",this.props.className);return f.a.createElement("div",{className:u},l,this.renderAttachmentsOverLimitMaybe(c,s))}}]),t}(b.PureComponent);x.displayName="MessageKitAttachments",x.defaultProps=M;t.a=Object(w.b)(Object(_.b)(function(e){return{expandInlineImgsPref:Object(k.j)(e,"expand_inline_imgs"),expandNonMediaAttachmentsPref:Object(k.j)(e,"expand_non_media_attachments"),featureRichTextRendering:Object(T.b)(e),featureAllyBugbash:Object(I.m)(e,"feature_ally_bugbash")}})(x))},avbl:function(e,t,n){},b4DV:function(e,t,n){},b7Ww:function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("ifKl"),p=n("kxpR"),m=n.n(p),h=n("aK/h"),b=n("TSYQ"),f=n.n(b),g=n("yPgC"),_=n("RfGh"),v=n("9gIX"),y=n("MAit"),k=(g.a.File().isRequired,h.b.func,h.b.string,h.b.bool,h.b.func,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.string,{clogLinkClick:d.a,className:null,fullWidth:!1,onClick:d.a,showActions:!0,useRowAction:!1,includeRootDownloadAction:!0,includeRootStarAction:!1,"data-qa":void 0}),O=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return u()(t,e),o()(t,[{key:"onClick",value:function(e){e.preventDefault(),this.props.onClick(e,this.props.file)}},{key:"render",value:function(){var e=this.props,t=e.file,n=e.clogLinkClick,a=e.fullWidth,r=e.showActions,i=e.includeRootDownloadAction,o=e.includeRootStarAction,s=e.useRowAction,l=e["data-qa"],c=f()("p-contextual_file",this.props.className);return m.a.createElement(_.a,{file:t,className:c,fullWidth:a,clogLinkClick:n,showActions:r,useRowAction:s,includeRootDownloadAction:i,includeRootStarAction:o,"data-qa":l},m.a.createElement(v.a,{file:t,onClick:this.onClick},m.a.createElement(y.a,{file:t})))}}]),t}(p.PureComponent);O.displayName="ContextualFile",O.defaultProps=k,t.a=O},"bA/L":function(e,t,n){"use strict";var a=n("QbLZ"),r=n.n(a),i=n("iCc5"),o=n.n(i),s=n("V7oC"),l=n.n(s),c=n("FYw3"),u=n.n(c),d=n("mRg0"),p=n.n(d),m=n("kiPk"),h=n("1myf"),b=n("wBxZ"),f=n("zmn3"),g=n("ifKl"),_=n("tn36"),v=n("kxpR"),y=n.n(v),k=n("aK/h"),O=n("TSYQ"),C=n.n(O),E=n("XHGt"),j=n("jLdI"),S=n("GTwG"),I=n("yPgC"),w=n("t3QL"),N=n("FXaq"),T=n("yywf"),A=n("nNoG"),R=n("ICFZ"),P=n("G+bj"),M=n("hOQf"),x=n("lek6"),F=n("3dqR"),L=n("yt6e"),D=n("NvKv"),U=n("lV3N"),B=n("OkQS"),q=n("+mjO"),H=n("XC2b"),W=n("qkTT"),G=n("vP1t"),K=n("y7mK"),V=n("X28p"),z=n("UceB"),Y=n("qzqx"),Q=n("6Iy0"),X=n("od5y"),J=n("RAhH"),Z=n("llxT"),$=(n("hr+X"),new A.b("search")),ee=(k.b.string.isRequired,k.b.string.isRequired,k.b.object.isRequired,k.b.bool.isRequired,k.b.string.isRequired,k.b.string.isRequired,k.b.string,k.b.string.isRequired,k.b.string,k.b.string,k.b.string.isRequired,k.b.bool.isRequired,k.b.shape({app_id:k.b.string.isRequired,deleted:k.b.bool,icons:k.b.obj,id:k.b.string,name:k.b.string,updated:k.b.number}),k.b.shape({id:k.b.string.isRequired,name:k.b.string.isRequired}).isRequired,k.b.string.isRequired,k.b.arrayOf(k.b.shape({text:k.b.string,truncated_head:k.b.bool,truncated_tail:k.b.bool})),k.b.arrayOf(I.a.File()),k.b.string,k.b.string,k.b.bool.isRequired,k.b.bool,k.b.func,k.b.func,k.b.func,k.b.func.isRequired,k.b.bool.isRequired,k.b.array,k.b.array,k.b.func,k.b.func,k.b.number,k.b.func,k.b.shape({image_36:k.b.string,image_48:k.b.string,image_64:k.b.string,image_72:k.b.string,emoji:k.b.string}),I.a.BlockKitBlocks,k.b.func,k.b.func,{teamDomain:"",username:null,theme:"light",botId:null,botProfile:null,subtype:"",expanded:!1,onClick:g.a,onFileClick:g.a,onRepliesClick:g.a,files:[],attachments:[],reactions:[],extracts:[],onExpandHoverStart:g.a,onExpandHoverEnd:g.a,reply_count:0,onLinkClick:g.a,icons:null,blocks:null,clogMessageClick:g.a,clogFileClick:g.a}),te=function(e){function t(e){o()(this,t);var n=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={hasKeyboardFocus:!1},Object(_.a)(n,["expand","onClick","onFocusEnter","onFocusLeave","onFileClick","onRepliesClick","onCopyLink","onExpandHoverStart","onExpandHoverEnd","onMouseMove","onLinkClick","onTimestampClick"]),n.dragging=!1,n.dragStartX=null,n.dragStartY=null,n}return p()(t,e),l()(t,[{key:"onClick",value:function(e){if(!e.target.dataset.memberId&&"BUTTON"!==e.target.tagName&&"BUTTON"!==e.target.parentNode.tagName)if(e.target.dataset.channelId||e.target.dataset.messageSender||("A"===e.target.tagName&&"_blank"===e.target.target||"A"===e.target.parentNode.tagName&&"_blank"===e.target.parentNode.target)&&!e.defaultPrevented)this.onLinkClick(e);else{var t=!1;if(this.dragging)t=Math.pow(e.clientX-this.dragStartX,2)+Math.pow(e.clientY-this.dragStartY,2)>16,this.dragging=!1;t||e.shiftKey||this.props.onClick({iid:this.props.iid,permalink:this.props.permalink,ts:this.props.ts,channelId:this.props.channel.id,userId:this.props.user,botId:this.props.botId})}}},{key:"onFileClick",value:function(e,t){var n=t.file;e.preventDefault(),this.props.onFileClick(e,{file:n,iid:this.props.iid,permalink:this.props.permalink,ts:this.props.ts,channelId:this.props.channel.id,userId:this.props.user,botId:this.props.botId})}},{key:"onRepliesClick",value:function(e){e.preventDefault(),this.props.onRepliesClick({iid:this.props.iid,permalink:this.props.permalinkToMessageThread,ts:this.props.ts,channelId:this.props.channel.id,userId:this.props.user,botId:this.props.botId})}},{key:"onCopyLink",value:function(e){e.preventDefault(),e.stopPropagation();var t=this.props,n=t.channel,a=t.ts,r=t.botId,i=t.user,o=t.teamDomain,s=t.isCrossWorkspace,l=this.props.permalink;l||(s?this.props.logger.error("IMPROVED_SEARCH","Missing permalink for cross workspace message result. channel: "+n+" ts: "+a):l=Object(M.u)({teamDomain:o,channelId:n.id,ts:a})),l&&Object(R.b)(l),this.props.clogMessageClick({msg:{channel:n.id,bot_id:r,user:i,ts:a},payload:{subtype:"copy_link"}})}},{key:"onExpandHoverStart",value:function(){this.props.onExpandHoverStart()}},{key:"onExpandHoverEnd",value:function(){this.props.onExpandHoverEnd()}},{key:"onMouseMove",value:function(e){1!==e.button&&1!==e.buttons||this.dragging||(this.dragging=!0,this.dragStartX=e.clientX,this.dragStartY=e.clientY)}},{key:"onFocusEnter",value:function(e){var t=e.relatedEvent;t&&"keydown"===t.type&&this.setState(function(){return{hasKeyboardFocus:!0}})}},{key:"onFocusLeave",value:function(){this.setState(function(){return{hasKeyboardFocus:!1}})}},{key:"onLinkClick",value:function(e){var t={iid:this.props.iid,ts:this.props.ts,channelId:this.props.channel.id,botId:this.props.botId,userId:this.props.user};e.target.dataset.channelId?t.type="channel":e.target.dataset.messageSender?t.type="sender":("A"===e.target.tagName&&"_blank"===e.target.target||"A"===e.target.parentNode.tagName&&"_blank"===e.target.parentNode.target)&&!e.defaultPrevented&&(t.type="link"),t.type&&this.props.onLinkClick(t)}},{key:"onTimestampClick",value:function(e){e.preventDefault()}},{key:"expand",value:function(e){e.preventDefault(),e.stopPropagation(),this.props.onExpand({iid:this.props.iid,permalink:this.props.permalink,ts:this.props.ts,channelId:this.props.channel.id,userId:this.props.user,botId:this.props.botId})}},{key:"renderEllipsisButton",value:function(e){var t={leading:"expand-head",trailing:"expand-tail"}[e],n=$.t("Show more");return y.a.createElement(J.c,{tip:n},y.a.createElement(Z.a,{"aria-label":n,"data-qa":t,onClick:this.expand,onMouseEnter:this.onExpandHoverStart,onMouseLeave:this.onExpandHoverEnd,className:"c-search__expand"},y.a.createElement("span",{className:"c-search__expand_ellipsis"},"...")))}},{key:"renderExpandButton",value:function(){return y.a.createElement(Z.a,{"data-qa":"expand-end",onClick:this.expand,onMouseEnter:this.onExpandHoverStart,onMouseLeave:this.onExpandHoverEnd,className:"c-search__expand"},y.a.createElement("span",{className:"c-search__expand_ellipsis"},"... ",$.t("Show more")))}},{key:"renderText",value:function(){var e=this,t=this.props,n=t.text,a=t.blocks,r=t.extracts,i=t.expanded,o=t.canBeTruncated;return n.length||r.length||a?i||!o?y.a.createElement("div",{className:"c-search_message__body","data-qa":"search_message_body"},y.a.createElement(x.a,{text:n})):r.length?y.a.createElement("div",{className:"c-search_message__body"},y.a.createElement(v.Fragment,null,r.map(function(t,n){var a=0===n&&t.truncated_head,i=t.truncated_tail,s=n===r.length-1;return y.a.createElement(v.Fragment,{key:n},a?e.renderEllipsisButton("leading"):null,y.a.createElement(x.a,{text:t.text}),!i||o&&s?null:e.renderEllipsisButton("trailing"),o&&s?e.renderExpandButton():null)}))):y.a.createElement("div",{className:"c-search_message__body"},y.a.createElement(x.a,{text:n})):null}},{key:"renderBlocks",value:function(){var e=this.props,t=e.ts,n=e.blocks,a=e.channel,r=e.botId,i=e.user;return y.a.createElement(Y.a,{msg:{channel:a.id,bot_id:r,user:i,ts:t,blocks:n},blocksContainerContext:Q.a.search})}},{key:"renderAvatar",value:function(){var e=this.props,t=e.user,n=e.hasAdHocSender,a=e.botId,i=e.botProfile,o=e.icons,s={};a&&(s=r()({},s,{botId:a}));var l=o||i&&i.icons;if(l){var c=l.image_36||l.image_48,u=l.image_64||l.image_72,d=l.emoji;c&&(s=r()({},s,{imageUrl:c})),u&&(s=r()({},s,{imageUrl2x:u})),d&&(s=r()({},s,{emoji:d}))}return t&&(s=r()({},s,{userId:t})),y.a.createElement(F.c,r()({className:"c-search_message__avatar",ariaHidden:"true",isAdHocMember:n,size:36,isInteractive:!0,showCard:!0,showTooltip:!0,tabIndex:"-1"},s))}},{key:"renderTimestamp",value:function(){var e=this.props,t=e.ts,n=e.permalink;return y.a.createElement(D.b,{onClick:this.onTimestampClick,timestamp:t,relative:!1,full:!1,link:n})}},{key:"renderGutter",value:function(){return"light"===this.props.theme?y.a.createElement("div",{className:"c-search_message__gutter"},this.renderAvatar()):y.a.createElement("div",{className:"c-search_message__gutter"},this.renderTimestamp())}},{key:"renderContentHeader",value:function(){var e=this.props,t=e.user,n=e.botId,a=e.botProfile,r=e.username,i=e.theme,o=e.channelName;return y.a.createElement("div",{className:"c-search_message__content_header","data-qa":"search_message_header"},y.a.createElement(K.a,{userId:t,botId:n,botProfile:a,username:r,channelName:o,isInteractive:!0})," ","light"===i&&this.renderTimestamp())}},{key:"renderAttachments",value:function(){var e=this,t=this.props,n=t.attachments,a=t.expanded,r=t.canBeTruncated;if(!n.length)return null;if(a||!r)return Object(f.a)(n,function(t,n){return e.renderFullAttachment(t,n)});var i=Object(f.a)(n,function(t,n){var a=Object(w.b)(t);return a.blocks?e.renderFullAttachment(a,n):e.renderTruncatedLegacyAttachment(a,n)});return y.a.createElement("div",{className:"c-search_message__attachments"},i)}},{key:"renderFullAttachment",value:function(e,t){var n=this.props,a=n.ts,i=n.channel,o=n.hasText,s=n.blocks;return y.a.createElement(U.a,r()({key:e.id||t+1},Object(w.b)(e),{isOnlyMessageContent:!(!o&&!s),messageTs:a,activeChannelId:i.id,showDelete:!1,blocksContainerContext:Q.a.search}))}},{key:"renderTruncatedLegacyAttachment",value:function(e,t){var n=this,a=this.props.ts,r=null;if(Object(N.e)(e)){var i=e.serviceIcon||e.authorIcon,o=e.serviceName||e.authorName,s=o===e.authorName?e.authorSubname:e.authorName;r=y.a.createElement("div",null,y.a.createElement(q.a,{icon:i,name:o,link:e.serviceUrl||e.authorLink,subname:s,subnameLink:e.authorLink}))}var l=e.extracts,c=null;l&&l.title&&(c=y.a.createElement("div",{"data-qa":"search-attachment-title",className:"c-search_message__attachment_title"},Object(f.a)(l.title,function(e,t){var n,a=0===t&&e.truncated_head,r=e.truncated_tail;return y.a.createElement(v.Fragment,{key:t}," ",a?"\u2026":null,(n=e.text,Object(T.a)(n,function(e,t){return y.a.createElement("span",{className:"c-search__match",key:t},e)})),r?"\u2026":null)})));var u=null;l&&l.pretext&&(u=Object(f.a)(l.pretext,function(e,t){var a=0===t&&e.truncated_head,r=e.truncated_tail;return y.a.createElement("span",{className:"c-message_attachment__pretext",key:t}," ",y.a.createElement(v.Fragment,null,a?n.renderEllipsisButton("leading"):null,y.a.createElement(x.a,{text:e.text}),r?n.renderEllipsisButton("trailing"):null))}));var d=null;l&&l.text&&(d=Object(f.a)(l.text,function(e,t){var a=0===t&&e.truncated_head,r=e.truncated_tail;return y.a.createElement(v.Fragment,{key:t}," ",a?n.renderEllipsisButton("leading"):null,y.a.createElement(x.a,{text:e.text}),r?n.renderEllipsisButton("trailing"):null)}));var p=null;return Object(N.h)(e)&&(p=y.a.createElement("div",null,y.a.createElement(H.a,{botId:e.botId,icon:e.footerIcon,isAppUnfurl:e.isAppUnfurl,text:e.footer,ts:a}))),r||c||u||d||p?y.a.createElement("div",{"data-qa":"search-message-attachment",className:"c-search_message__attachment",key:this.props.iid+"-attachment-"+t},y.a.createElement(B.a,{color:e.color}),y.a.createElement("div",{className:"c-search_message__attachment_body"},r,c,u,d,p)):null}},{key:"renderReactionsAndReplies",value:function(){var e=this.props.reactions,t=this.props.reply_count;if(!e.length&&!t)return null;var n=Object(b.a)(Object(h.a)(e,function(e){return-e.count}),2),a=Object(m.a)(e,"count"),r=null,i=null;if(a>0&&(r=y.a.createElement("span",{"data-qa":"search-reaction-count",className:"c-search_message__reactions_count"},$.t("{totalReactionCount, plural, =1 {# reaction} other {# reactions}}",{totalReactionCount:a}))),t>0){var o=$.t("{replyCount, plural, =1 {# reply} other {# replies}}",{replyCount:t});i=y.a.createElement(Z.a,{"data-qa":"search-replies",className:"c-search_message__replies_count",onClick:this.onRepliesClick},y.a.createElement(X.a,{type:"comment-alt"}),o)}return y.a.createElement("div",{"data-qa":"search-reactions",className:"c-search_message__reactions"},Object(f.a)(n,function(e){return y.a.createElement(W.b,{text:":"+e.name+":",key:e.name,emojiSize:W.a.SMALL})}),r,i)}},{key:"renderFiles",value:function(){var e=this,t=this.props.files;return t&&t.length?t.map(function(t){return t&&y.a.createElement(G.a,{key:t.id,file:t,onClick:e.onFileClick,clogLinkClick:function(n){e.props.clogFileClick({file:t,payload:n})}})}):null}},{key:"renderActions",value:function(){var e=C()("c-search_message__actions","c-message_actions__container--search",{"c-search_message__actions--dense":"dense"===this.props.theme});return y.a.createElement(V.a,{className:e,ariaLabel:$.t("Message actions")},y.a.createElement(z.a,{"data-qa":"copy-link",iconType:"link",ariaHasPopup:!1,label:$.t("Copy link"),onClick:this.onCopyLink}))}},{key:"render",value:function(){var e=this.props,t=e.theme,n=e.canBeTruncated,a=e.expanded,r=e.blocks,i=C()("c-search_message","c-search_message--"+t,{"c-search_message--collapsed":!a&&n,"c-search_message--focus":this.state.hasKeyboardFocus});return y.a.createElement(L.a,{onFocusEnter:this.onFocusEnter,onFocusLeave:this.onFocusLeave},y.a.createElement("div",{className:i,role:"presentation","data-qa":"search_result",onClick:this.onClick,onMouseMove:this.onMouseMove},this.renderGutter(),y.a.createElement("div",{className:"c-search_message__content"},this.renderContentHeader(),r&&!Object(P.a)(r)?this.renderBlocks():this.renderText(),this.renderAttachments(),this.renderReactionsAndReplies(),this.renderFiles(),this.renderActions())))}}]),t}(v.PureComponent);te.displayName="SearchResult",te.defaultProps=ee;var ne={clogMessageClick:function(){return j.a.apply(void 0,arguments)},clogFileClick:function(){return S.a.apply(void 0,arguments)}};t.a=Object(E.b)(null,ne)(te)},bKze:function(e,t,n){},bYMc:function(e,t,n){"use strict";n.d(t,"a",function(){return g});var a=n("QbLZ"),r=n.n(a),i=n("jo6Y"),o=n.n(i),s=n("g5qt"),l=n("zaOK"),c=n("zoXk"),u=n("XfeM"),d=n("brL+"),p=n("lhZz"),m=n("kOzZ"),h=n("PR8O"),b=n("Smdl"),f=n("VjCB"),g=Object(u.b)("Create a delegate object for interop with the desktop app",function(e,t){Object(h.a)()&&(s.Q?(window.desktop.delegate||Object.defineProperty(window.desktop,"delegate",{get:function(){var e=t(),n=Object(c.g)(e)||Object(d.b)(e);return window.desktop.delegates&&window.desktop.delegates[n]},configurable:!0}),function(e,t){var n=Object(d.b)(t()),a=function(e,t){var n=l.a.accessibilitySupportChanged,a=l.a.canOpenURLInWindow,i=l.a.focusNextWorkspace,s=l.a.focusPreviousWorkspace,c=l.a.getCurrentUserId,u=l.a.getCurrentUserName,d=l.a.getEnterpriseId,m=l.a.getThemeValues,h=l.a.getTokenFromBootData,g=l.a.getUserPref,_=l.a.getWebappVersionUid,v=l.a.handleDeepLinkWithArgs,y=l.a.handleDeepLinkFromDesktop,k=l.a.maybeTickleMS,O=l.a.notificationActivated,C=l.a.notificationClicked,E=l.a.openDialog,j=l.a.openFromCmdF,S=l.a.recentMessagesFromCurrentChannel,I=l.a.replyToNotification,w=l.a.setCurrentMemberPresence,N=l.a.setFocusedWorkspace,T=l.a.teamSelectionChanged,A=l.a.updateState,R=o()(l.a,["accessibilitySupportChanged","canOpenURLInWindow","focusNextWorkspace","focusPreviousWorkspace","getCurrentUserId","getCurrentUserName","getEnterpriseId","getThemeValues","getTokenFromBootData","getUserPref","getWebappVersionUid","handleDeepLinkWithArgs","handleDeepLinkFromDesktop","maybeTickleMS","notificationActivated","notificationClicked","openDialog","openFromCmdF","recentMessagesFromCurrentChannel","replyToNotification","setCurrentMemberPresence","setFocusedWorkspace","teamSelectionChanged","updateState"]),P=function(t){return function(){return e(t.apply(void 0,arguments))}},M=function(e){return function(){return Object(p.dispatchForClientStore)(e.apply(void 0,arguments))}},x=function(t){return function(){return Object(b.a)()?Object(p.dispatchForClientStore)(Object(f.a)(t.apply(void 0,arguments))):e(t.apply(void 0,arguments))}},F=function(t){return function(){for(var n=arguments.length,a=Array(n),r=0;r<n;r++)a[r]=arguments[r];return t.apply(void 0,[e].concat(a))}},L=function(e){return function(){for(var n=arguments.length,a=Array(n),r=0;r<n;r++)a[r]=arguments[r];return e.apply(void 0,[t()].concat(a))}};return r()({accessibilitySupportChanged:P(n),canOpenURLInWindow:L(a),focusNextWorkspace:M(i),focusPreviousWorkspace:M(s),getCurrentUserId:L(c),getCurrentUserName:L(u),getEnterpriseId:L(d),getThemeValues:L(m),getTokenFromBootData:L(h),getUserPref:L(g),getWebappVersionUid:L(_),handleDeepLinkWithArgs:Object(b.a)()?P(y):v,maybeTickleMS:x(k),notificationActivated:F(O),notificationActivationHandler:function(e){var t=e.channelId,n=e.messageTs,a=e.threadTs,r=e.teamId;return Object(b.a)()?M(N)({teamId:r}).then(function(){return P(C)({channelId:t,messageTs:n,threadTs:a})}):P(C)({channelId:t,messageTs:n,threadTs:a})},openDialog:(D=E,function(){for(var n=arguments.length,a=Array(n),r=0;r<n;r++)a[r]=arguments[r];return D.apply(void 0,[e,t()].concat(a))}),openFromCmdF:P(j),recentMessagesFromCurrentChannel:L(S),replyToNotification:P(I),setCurrentMemberPresence:P(w),setFocusedWorkspace:function(e){return M(N)({teamId:e})},startSearch:P(j),teamSelectionChanged:F(T),updateState:function(){return Object(b.a)()&&M(A).apply(void 0,arguments),x(A).apply(void 0,arguments)}},R);var D}(e,t);window.desktop.delegates||(window.desktop.delegates={});window.desktop.delegates[n]=a}(e,t)):Object(m.a)({state:t()}).track("DESKTOP_SCRIPTS_MISSING"))});g.meta={name:"createDesktopDelegate",key:"desktopCreateDelegateCreateDesktopDelegate",description:"Create a delegate object for interop with the desktop app"},g.propTypes=null},"bj+V":function(e,t,n){},bkaq:function(e,t,n){"use strict";var a=n("ifKl"),r=n("kxpR"),i=n.n(r),o=n("XHGt"),s=n("aK/h"),l=n("nNoG"),c=n("Fdc0"),u=n("ZYn4"),d=n("0f2Y"),p=n("zo7m"),m=n("yZEV"),h=n("negh"),b=n("guIn"),f=(n("8LWd"),new l.b("member_profile")),g=(s.b.string,s.b.object,s.b.bool,s.b.func,s.b.func,s.b.func,s.b.string,s.b.object,{className:void 0,member:void 0,canInteract:!0,onClick:a.a,onOpenEditProfileModal:a.a,onShowMemberProfile:a.a,presence:!1,clogger:{track:a.a}});function _(e){var t=e.className,n=e.member,a=e.canInteract,r=e.onClick,o=e.onOpenEditProfileModal,s=e.onShowMemberProfile,l=e.presence,p=e.clogger,m=a&&!Object(c.mb)(n),g=Object(c.K)(n),_=i.a.createElement(i.a.Fragment,null,g,m&&i.a.createElement(u.a,{className:"p-member_profile_name__presence",memberId:n.id})),v=function(){o(),r(),setTimeout(function(){var e=document.getElementById("title-input");e&&e.focus()},150),p.track(h.EventId.USER_PROFILE_ADD_TITLE_CLICK)},y=Object(c.Ib)(n)?f.t("Friendly bot, part-time programmer, and Help Center assistant-in-training."):Object(c.S)(n);return i.a.createElement("div",{className:t},i.a.createElement("div",{className:"p-member_profile_name__title"},s?i.a.createElement(d.a,{"aria-label":l?f.t("{name}, {presence}",{name:g,presence:l}):g,className:"p-member_profile_name__link",onClick:function(){s(),r()}},_):_),Object(b.a)(y)?i.a.createElement("span",{className:"p-member_profile_name__subtitle"},y):Object(c.Hb)(n)?i.a.createElement(d.a,{className:"p-member_profile_field__interactable",onClick:v,"data-qa":"member_title_edit_btn"},f.t("Add a title")):null)}_.displayName="MemberProfileName",_.defaultProps=g;var v={onOpenEditProfileModal:function(){return p.a.apply(void 0,arguments)}};t.a=Object(o.b)(function(e,t){return{presence:Object(m.f)(e,t.member.id)}},v)(_)},bmfP:function(e,t,n){"use strict";var a=n("aK/h"),r=n("XHGt"),i=n("dxEi"),o={children:a.b.node,isOnline:a.b.bool},s=function(e){var t=e.isOnline,n=e.children;return t?n:null};s.propTypes=o,s.defaultProps={children:null,isOnline:null};var l=Object(r.b)(function(e){return{isOnline:Object(i.c)(e)}})(s),c={children:a.b.node,isOnline:a.b.bool},u=function(e){var t=e.isOnline,n=e.children;return t?null:n};u.propTypes=c,u.defaultProps={children:null,isOnline:null};var d=Object(r.b)(function(e){return{isOnline:Object(i.c)(e)}})(u);n("XoBp");n.d(t,"b",function(){return l}),n.d(t,"a",function(){return d})},"c+rX":function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("ifKl"),p=n("kxpR"),m=n.n(p),h=n("aK/h"),b=n("XHGt"),f=n("peh1"),g=n("yHhI"),_=n("dhvi"),v=(h.b.arrayOf(h.b.element),h.b.func,{elements:null,logError:d.a}),y=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"componentDidCatch",value:function(e){var t=e?e.message:"";this.props.logError("MODAL-CONTAINER","componentDidCatch: "+t)}},{key:"render",value:function(){var e=this.props.elements;return m.a.createElement(p.Fragment,null,e)}}]),t}(p.Component);y.displayName="BaseModalContainer",y.defaultProps=v;var k=Object(f.createSelector)([function(e){return Object(_.c)(e)}],function(e){return e.map(function(e){return e.element})}),O=Object(b.b)(function(e){return{error:Object(g.a)({state:e}).error,elements:k(e)}},{})(y);t.a=O},"c+ts":function(e,t,n){"use strict";var a=n("kxpR"),r=n("XHGt"),i=n("aK/h"),o=n("Tc5z"),s=n("aLpA"),l=(n("/PGu"),{isFrameless:i.b.bool.isRequired,isCustomTitlebarShown:i.b.bool.isRequired}),c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isFrameless,n=e.isCustomTitlebarShown;return Object(a.useEffect)(function(){return t?document.body.classList.add(s.n):document.body.classList.remove(s.n),n?document.body.classList.add(s.j):document.body.classList.remove(s.j),function(){document.body.classList.remove(s.n),document.body.classList.remove(s.j)}},[t,n]),null};c.propTypes=l;t.a=Object(r.b)(function(e){return{isCustomTitlebarShown:Object(o.k)(e),isFrameless:Object(o.l)(e)}})(c)},c48M:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return r});var a=[],r={}},c7HH:function(e,t,n){},cAy8:function(e,t,n){"use strict";var a=n("ifKl"),r=n("kxpR"),i=n.n(r),o=n("aK/h"),s=n("MnCE"),l=n("nNoG"),c=n("9/ob"),u=n("XLFM"),d=n("OkQS"),p=new l.b("attachments"),m=(o.b.bool,o.b.func,o.b.number,{isExpanded:!1,onClick:a.a,attachmentsOverLimitCount:0}),h=function(e){var t=e.isExpanded,n=e.onClick,a=e.attachmentsOverLimitCount;return i.a.createElement(c.a,{enabled:["feature_react_messages"]},i.a.createElement("div",{className:"c-message_attachment"},i.a.createElement(d.a,null),i.a.createElement("div",{className:"c-message_attachment__body"},i.a.createElement(u.c,{className:"c-message_attachment__over_limit_button",onClick:n},i.a.createElement("p",{className:"c-message_attachment__over_limit"},i.a.createElement("b",null,t?p.t("Show fewer attachments",{fallbackHash:"82ec3619e636876bba549869a1e98fc21e6bee00"}):p.t("{count, plural, =1 {+ # more attachment} other {+ # more attachments}}",{count:a,fallbackHash:"61f00263e27b3ffe8a86b728c78ef71614ebe535"})))))))};h.displayName="MessageAttachmentOverLimitButton",h.defaultProps=m,t.a=Object(s.a)(h)},cLBS:function(e,t,n){},cYut:function(e,t,n){},cnLP:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("aK/h"),p=n("kxpR"),m=n.n(p),h=n("TSYQ"),b=n.n(h),f=["top","bottom","left","right","top-right","bottom-right","top-left","bottom-left"],g=(d.b.node.isRequired,d.b.string,d.b.node,d.b.oneOf(f).isRequired,d.b.object,{coachmarkElement:void 0,coachmarkAnchorClassNames:void 0,style:{}}),_=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.anchorRef=m.a.createRef(),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.forceUpdate()}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.coachmarkAnchorClassNames,a=e.coachmarkElement,r=e.orientation,i=e.style,o=b()("c-coachmark-anchor",n);return m.a.createElement("div",{id:"c-coachmark-anchor",ref:this.anchorRef,className:o,style:i},t,a&&m.a.cloneElement(a,{anchorElement:this.anchorRef.current,orientation:r}))}}]),t}(p.PureComponent);_.displayName="CoachmarkAnchor",_.defaultProps=g,t.b=_},dEjE:function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("kxpR"),p=n.n(d),m=n("aK/h"),h=n("TSYQ"),b=n.n(h),f=n("RhZ7"),g=n("TOh8"),_=n("0dpy"),v=n("8CL7"),y=n("VrmM"),k=n("fFZG"),O=n("rUi3"),C=n("Aeia"),E=n("Gq2+"),j=n("KmK8"),S=n("lU/5"),I=n("gl+W"),w=(n("dX4D"),m.b.number,m.b.string,m.b.string,m.b.object.isRequired,m.b.bool,m.b.bool,m.b.bool,m.b.string,{avatarSize:24,className:void 0,flexOrigin:void 0,timestampClickable:!1,timestampFull:!0,timestampRelative:!1,blocksContainerContext:void 0}),N=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.avatarSize,n=e.className,a=e.flexOrigin,r=e.msg,i=e.timestampClickable,o=e.timestampFull,s=e.timestampRelative,l=e.blocksContainerContext;return p.a.createElement(I.a,{className:b()("c-message_kit__message","c-message_kit__contextual_message",n)},p.a.createElement(S.a,{msg:r},p.a.createElement(j.a,{light:p.a.createElement(f.a,{msg:r,size:t})},p.a.createElement(g.a,{msg:r}),"\xa0\xa0",p.a.createElement(_.a,{msg:r,clickable:i,full:o,relative:s}),p.a.createElement("br",null),p.a.createElement(v.a,{msg:r}),p.a.createElement(y.a,{msg:r,blocksContainerContext:l}),p.a.createElement(E.a,{msg:r}),p.a.createElement(C.b,{msg:r}),p.a.createElement(k.a,{msg:r}),p.a.createElement(O.a,{flexOrigin:a,msg:r}))))}}]),t}(d.PureComponent);N.displayName="ContextualMessage",N.defaultProps=w,t.a=N},dHYv:function(e,t,n){"use strict";var a=n("F294"),r=n("bPB8"),i=n("kxpR"),o=n.n(i),s=n("XHGt"),l=n("aK/h"),c=n("XL7r"),u=n("gge9"),d=n("t3QL"),p=n("qkTT"),m=n("B/Zf"),h=n("F+zK"),b=n("0Cnk"),f=n("HWeM"),g=n("Atrf"),_=n("hUMe");l.b.object.isRequired,l.b.bool;function v(e){var t=e.richTextBlock,n=e.do24hrTime;if(!t||!t.elements||!t.elements.length)return null;var s=0,l=function(){return s+=1},c=Object(a.a)(t.elements),v=void 0;if(c.type===u.a.LIST&&(v="ordered"===c.style?o.a.createElement(i.Fragment,null,"1. "):o.a.createElement(i.Fragment,null,"\u2022 "),c=Object(a.a)(c.elements)),!c||!c.elements||!c.elements.length)return null;var y=!1,k=Object(d.a)(c).elements.map(function(e){if(y)return null;if(e.type===u.a.EMOJI){var t=e.name,r=e.skinTone,s=r?":"+t+"::skin-tone-"+r+":":":"+t+":";return o.a.createElement(p.b,{key:l(),text:s,emojiSize:p.a.MEDIUM,isEmojiInlineWithText:!0,showTooltip:!0})}if(e.type===u.a.CHANNEL)return o.a.createElement(m.a,{key:l(),id:e.channelId,noLinking:!0});if(e.type===u.a.USER)return o.a.createElement(g.a,{key:l(),id:e.userId,noLinking:!0,noHighlights:!0});if(e.type===u.a.USERGROUP)return o.a.createElement(h.a,{key:l(),id:e.usergroupId,noLinking:!0,noHighlights:!0});if(e.type===u.a.BROADCAST)return o.a.createElement(b.a,{key:l(),type:e.range,noLinking:!0,noHighlights:!0});if(e.type===u.a.TEAM)return o.a.createElement(_.a,{key:l(),id:e.teamId});if(e.type===u.a.DATE){var c=e.timestamp,d=e.format,v=e.fallback;return c&&d?o.a.createElement(f.a,{key:l(),ts:c.toString(),format:d,fallback:v,do24hrTime:n,noLinking:!0}):null}if(e.type===u.a.LINK)return o.a.createElement(i.Fragment,{key:l()},e.text||e.url||"");if(e.type===u.a.COLOR)return o.a.createElement(i.Fragment,{key:l()},e.value||"");if(e.text){var k=e.text.split(/\n/);return k.length>1&&(y=!0),o.a.createElement(i.Fragment,{key:l()},Object(a.a)(k)||"")}return null});return o.a.createElement(i.Fragment,null,v,Object(r.a)(k),y&&o.a.createElement(i.Fragment,null,"\u2026"))}v.displayName="RichTextPreamble",v.defaultProps={do24hrTime:!1};t.a=Object(s.b)(function(e){return{do24hrTime:Object(c.j)(e,"time24")}})(v)},dVmK:function(e,t,n){},dX4D:function(e,t,n){},dohy:function(e,t,n){"use strict";var a=n("kxpR"),r=n.n(a),i=n("XfeM"),o=n("dhvi"),s=n("iCc5"),l=n.n(s),c=n("V7oC"),u=n.n(c),d=n("FYw3"),p=n.n(d),m=n("mRg0"),h=n.n(m),b=n("ifKl"),f=n("XHGt"),g=n("aK/h"),_=n("wd/R"),v=n.n(_),y=n("nNoG"),k=n("U3Q0"),O=n("hFPh"),C=n("cTBa"),E=n("llxT"),j=n("O0RF"),S=n("kOzZ"),I=n("negh"),w=n("1aDv"),N=n("mqzt"),T=n("82mD"),A=n("XL7r"),R=n("/LVU"),P=n("4vzu"),M=(n("1iAE"),new y.b("do_not_disturb")),x=(g.b.func.isRequired,g.b.bool,g.b.bool,g.b.object,{do24hrTime:!1,inDnd:!1,clogger:{track:b.a}}),F=function(e){function t(e){l()(this,t);var n=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),a=v()().add(1,"hour").startOf("hour"),r=a.format("YYYY-MM-DD"),i=a.format("HH:mm"),o=v()(r+" "+i).unix();return n.state={snoozeEndDate:r,snoozeEndTime:i,snoozeEndTs:o},n.onDateChange=n.onDateChange.bind(n),n.onTimeChange=n.onTimeChange.bind(n),n.onGo=n.onGo.bind(n),n}return h()(t,e),u()(t,[{key:"onDateChange",value:function(e){var t=this.state.snoozeEndTime;this.setState(function(){return{snoozeEndDate:e,snoozeEndTs:v()(e+" "+t).unix()}})}},{key:"onTimeChange",value:function(e){var t=this.state.snoozeEndDate;this.setState(function(){return{snoozeEndTime:e,snoozeEndTs:v()(t+" "+e).unix()}})}},{key:"onGo",value:function(){var e=this.props,t=e.clogger,n=e.inDnd,a=this.state.snoozeEndTs,r=Object(N.a)(a);r<=0||(this.props.snoozeNotifications({duration:r,reason:"DndDialog:onGo"}),t.track(I.EventId.DND_SNOOZE_NOTIFICATIONS,{dnd_duration:r,dnd_preset:I.DndPreset.DURATION_CUSTOM,dnd_snooze_type:n?I.DndSnoozeType.SNOOZE_ADJUST:I.DndSnoozeType.SNOOZE_INITIAL}))}},{key:"getTimeSelectOptions",value:function(){var e=this.props.do24hrTime,t=this.state.snoozeEndDate===v()().format("YYYY-MM-DD"),n=v()().format("HH:mm");return Object.keys(w.a).filter(function(e){return!(t&&e<n)}).map(function(t){return{value:t,label:e?t:w.a[t]}})}},{key:"render",value:function(){var e=this.state,t=e.snoozeEndDate,n=e.snoozeEndTime,a=e.snoozeEndTs,i=Object(N.a)(a)<=0,o=Object(T.k)(a),s=M.t("Pause notifications until\u2026"),l=v()().format("YYYY-MM-DD"),c=v()().add(1,"year").format("YYYY-MM-DD");return r.a.createElement(k.b,{title:s,goButtonText:M.t("Pause Notifications"),goButtonType:"primary",goButtonIsDisabled:i,onGo:this.onGo,showCancelButton:!1},r.a.createElement(j.a,{htmlFor:"dnd_dialog_date_button",text:M.t("Date")},r.a.createElement(O.d,{position:"bottom",offsetX:67,dateFormat:"YYYY-MM-DD",selectedDate:t,onDateChange:this.onDateChange,disableDatesBefore:l,disableDatesAfter:c},r.a.createElement(E.a,{id:"dnd_dialog_date_button",className:"p-dnd_dialog__date_picker_trigger","aria-label":M.t("Date to snooze notifications until")},o))),r.a.createElement(j.a,{htmlFor:"dnd_dialog_time_select",text:M.t("Time")},r.a.createElement(C.b,{id:"dnd_dialog_time_select",options:this.getTimeSelectOptions(),onChange:this.onTimeChange,value:n,useFilteredInput:!1,usePlaceholderOption:!1})))}}]),t}(a.PureComponent);F.displayName="DndDialog",F.defaultProps=x;var L={snoozeNotifications:R.e},D=Object(f.b)(function(e){return{do24hrTime:Object(A.j)(e,"time24"),inDnd:!!Object(P.c)(e),clogger:Object(S.a)({state:e})}},L)(F),U=Object(i.b)("Opens the DND dialog",function(e,t,n){e(Object(o.e)({element:r.a.createElement(D,n)}))});U.meta={name:"openDndDialog",key:"actionsOpenDndDialogOpenDndDialog",description:"Opens the DND dialog"},U.propTypes=null;t.a=U},dutO:function(e,t,n){},"e+d/":function(e,t,n){"use strict";var a=new(n("nNoG").b)("files_types");t.a={applescript:{mimeType:"text/applescript",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("AppleScript"):""}},c:{mimeType:"text/x-csrc",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("C"):""},loader:function(){return Promise.all([n.e(0),n.e(45)]).then(n.t.bind(null,"S6bl",7))}},cfm:{mimeType:"text/plain",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("ColdFusion"):""}},clojure:{mimeType:"text/x-clojure",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Clojure"):""},loader:function(){return Promise.all([n.e(0),n.e(47)]).then(n.t.bind(null,"LA1u",7))}},coffeescript:{mimeType:"text/x-coffeescript",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("CoffeeScript"):""},loader:function(){return Promise.all([n.e(0),n.e(48)]).then(n.t.bind(null,"oL3q",7))}},cpp:{mimeType:"text/x-c++src",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("C++"):""},loader:function(){return Promise.all([n.e(0),n.e(45)]).then(n.t.bind(null,"S6bl",7))}},crystal:{mimeType:"text/x-crystal",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Crystal"):""},loader:function(){return Promise.all([n.e(0),n.e(50)]).then(n.t.bind(null,"JRJP",7))}},csharp:{mimeType:"text/x-csharp",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("C#"):""},loader:function(){return Promise.all([n.e(0),n.e(45)]).then(n.t.bind(null,"S6bl",7))}},css:{mimeType:"text/css",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("CSS"):""},loader:function(){return Promise.all([n.e(0),n.e(44)]).then(n.t.bind(null,"ewDg",7))}},cypher:{mimeType:"application/x-cypher-query",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Cypher"):""},loader:function(){return Promise.all([n.e(0),n.e(51)]).then(n.t.bind(null,"vW+e",7))}},csv:{mimeType:"text/csv",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("CSV"):""}},d:{mimeType:"text/x-d",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("D"):""},loader:function(){return Promise.all([n.e(0),n.e(52)]).then(n.t.bind(null,"zRyg",7))}},dart:{mimeType:"text/x-dart",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Dart"):""},loader:function(){return Promise.all([n.e(0),n.e(45),n.e(53)]).then(n.t.bind(null,"6q/U",7))}},diff:{mimeType:"text/x-diff",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Diff"):""},loader:function(){return Promise.all([n.e(0),n.e(54)]).then(n.t.bind(null,"3fnu",7))}},dockerfile:{mimeType:"text/x-dockerfile",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Docker"):""},loader:function(){return Promise.all([n.e(0),n.e(55)]).then(n.t.bind(null,"R6x9",7))}},erlang:{mimeType:"text/x-erlang",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Erlang"):""},loader:function(){return Promise.all([n.e(0),n.e(56)]).then(n.t.bind(null,"9RTS",7))}},fortran:{mimeType:"text/x-fortran",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Fortran"):""},loader:function(){return Promise.all([n.e(0),n.e(57)]).then(n.t.bind(null,"UYub",7))}},fsharp:{mimeType:"text/x-fsharp",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("F#"):""},loader:function(){return Promise.all([n.e(0),n.e(68)]).then(n.t.bind(null,"NU+Z",7))}},gherkin:{mimeType:"text/x-feature",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Gherkin"):""},loader:function(){return Promise.all([n.e(0),n.e(58)]).then(n.t.bind(null,"tkAH",7))}},go:{mimeType:"text/x-go",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Go"):""},loader:function(){return Promise.all([n.e(0),n.e(59)]).then(n.t.bind(null,"T/QY",7))}},groovy:{mimeType:"text/x-groovy",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Groovy"):""},loader:function(){return Promise.all([n.e(0),n.e(60)]).then(n.t.bind(null,"X7TR",7))}},handlebars:{mimeType:"text/x-handlebars-template",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Handlebars"):""},loader:function(){return Promise.all([n.e(0),n.e(61)]).then(n.t.bind(null,"4d6s",7))}},haskell:{mimeType:"text/x-haskell",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Haskell"):""},loader:function(){return Promise.all([n.e(0),n.e(62)]).then(n.t.bind(null,"0+DK",7))}},haxe:{mimeType:"text/x-haxe",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Haxe"):""},loader:function(){return Promise.all([n.e(0),n.e(63)]).then(n.t.bind(null,"We/1",7))}},html:{mimeType:"text/html",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("HTML"):""},loader:function(){return Promise.all([n.e(0),n.e(44),n.e(46),n.e(64)]).then(n.t.bind(null,"1p+/",7))}},java:{mimeType:"text/x-java",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Java"):""},loader:function(){return Promise.all([n.e(0),n.e(45)]).then(n.t.bind(null,"S6bl",7))}},javascript:{mimeType:"text/javascript",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("JavaScript/JSON"):""},loader:function(){return Promise.all([n.e(0),n.e(46),n.e(102)]).then(n.t.bind(null,"+dQi",7))}},jsx:{mimeType:"text/jsx",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("JSX"):""},loader:function(){return Promise.all([n.e(0),n.e(46),n.e(102)]).then(n.t.bind(null,"onn/",7))}},julia:{mimeType:"text/x-julia",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Julia"):""},loader:function(){return Promise.all([n.e(0),n.e(65)]).then(n.t.bind(null,"NGrM",7))}},kotlin:{mimeType:"text/x-kotlin",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Kotlin"):""},loader:function(){return Promise.all([n.e(0),n.e(45)]).then(n.t.bind(null,"S6bl",7))}},latex:{mimeType:"text/x-stex",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("LaTeX/sTeX"):""},loader:function(){return Promise.all([n.e(0),n.e(83)]).then(n.t.bind(null,"+NIl",7))}},lisp:{mimeType:"text/x-lisp",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Lisp"):""},loader:function(){return Promise.all([n.e(0),n.e(49)]).then(n.t.bind(null,"kmAK",7))}},lua:{mimeType:"text/x-lua",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Lua"):""},loader:function(){return Promise.all([n.e(0),n.e(66)]).then(n.t.bind(null,"jrMQ",7))}},markdown:{mimeType:"text/x-markdown",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Markdown (raw)"):""},loader:function(){return Promise.all([n.e(0),n.e(91)]).then(n.t.bind(null,"lZu9",7))}},mathematica:{mimeType:"text/x-mathematica",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Mathematica"):""},loader:function(){return Promise.all([n.e(0),n.e(67)]).then(n.t.bind(null,"ztbM",7))}},matlab:{mimeType:"text/x-octave",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("MATLAB"):""},loader:function(){return Promise.all([n.e(0),n.e(70)]).then(n.t.bind(null,"mybg",7))}},mumps:{mimeType:"text/x-mumps",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("MUMPS"):""},loader:function(){return Promise.all([n.e(0),n.e(69)]).then(n.t.bind(null,"Q7su",7))}},objc:{mimeType:"text/x-objectivec",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Objective-C"):""},loader:function(){return Promise.all([n.e(0),n.e(45)]).then(n.t.bind(null,"S6bl",7))}},ocaml:{mimeType:"text/x-ocaml",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("OCaml"):""},loader:function(){return Promise.all([n.e(0),n.e(68)]).then(n.t.bind(null,"NU+Z",7))}},pascal:{mimeType:"text/x-pascal",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Pascal"):""},loader:function(){return Promise.all([n.e(0),n.e(71)]).then(n.t.bind(null,"lB9V",7))}},perl:{mimeType:"text/x-perl",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Perl"):""},loader:function(){return Promise.all([n.e(0),n.e(92)]).then(n.t.bind(null,"kG+r",7))}},php:{mimeType:"application/x-httpd-php",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("PHP"):""},loader:function(){return Promise.all([n.e(0),n.e(44),n.e(46),n.e(45),n.e(95)]).then(n.t.bind(null,"RNWO",7))}},pig:{mimeType:"text/x-pig",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Pig"):""},loader:function(){return Promise.all([n.e(0),n.e(72)]).then(n.t.bind(null,"860+",7))}},powershell:{mimeType:"text/x-powershell",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("PowerShell"):""},loader:function(){return Promise.all([n.e(0),n.e(73)]).then(n.t.bind(null,"naPG",7))}},puppet:{mimeType:"text/x-puppet",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Puppet"):""},loader:function(){return Promise.all([n.e(0),n.e(74)]).then(n.t.bind(null,"cwoo",7))}},python:{mimeType:"text/x-python",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Python"):""},loader:function(){return Promise.all([n.e(0),n.e(75)]).then(n.t.bind(null,"25Eh",7))}},r:{mimeType:"text/x-rsrc",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("R"):""},loader:function(){return Promise.all([n.e(0),n.e(76)]).then(n.t.bind(null,"kD6b",7))}},ruby:{mimeType:"text/x-ruby",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Ruby"):""},loader:function(){return Promise.all([n.e(0),n.e(77)]).then(n.t.bind(null,"hTYL",7))}},rust:{mimeType:"text/x-rustsrc",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Rust"):""},loader:function(){return Promise.all([n.e(0),n.e(78)]).then(n.t.bind(null,"sY4N",7))}},sass:{mimeType:"text/x-sass",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Sass"):""},loader:function(){return Promise.all([n.e(0),n.e(44),n.e(79)]).then(n.t.bind(null,"G2Pi",7))}},scala:{mimeType:"text/x-scala",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Scala"):""},loader:function(){return Promise.all([n.e(0),n.e(45)]).then(n.t.bind(null,"S6bl",7))}},scheme:{mimeType:"text/x-scheme",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Scheme"):""},loader:function(){return Promise.all([n.e(0),n.e(80)]).then(n.t.bind(null,"8wdy",7))}},shell:{mimeType:"text/x-sh",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Shell"):""},loader:function(){return Promise.all([n.e(0),n.e(81)]).then(n.t.bind(null,"AvDn",7))}},smalltalk:{mimeType:"text/x-stsrc",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Smalltalk"):""},loader:function(){return Promise.all([n.e(0),n.e(82)]).then(n.t.bind(null,"n4Nj",7))}},sql:{mimeType:"text/x-sql",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("SQL"):""},loader:function(){return Promise.all([n.e(0),n.e(94)]).then(n.t.bind(null,"/9rB",7))}},swift:{mimeType:"text/x-swift",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Swift"):""},loader:function(){return Promise.all([n.e(0),n.e(84)]).then(n.t.bind(null,"wOIU",7))}},tsv:{mimeType:"text/tab-separated-values",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("TSV"):""}},typescript:{mimeType:"text/typescript",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("TypeScript"):""},loader:function(){return Promise.all([n.e(0),n.e(46),n.e(102)]).then(n.t.bind(null,"+dQi",7))}},tsx:{mimeType:"text/typescript-jsx",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("TSX"):""},loader:function(){return Promise.all([n.e(0),n.e(46),n.e(102)]).then(n.t.bind(null,"onn/",7))}},vb:{mimeType:"text/x-vb",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("VB.NET"):""},loader:function(){return Promise.all([n.e(0),n.e(85)]).then(n.t.bind(null,"Kr55",7))}},vbscript:{mimeType:"text/vbscript",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("VBScript"):""},loader:function(){return Promise.all([n.e(0),n.e(86)]).then(n.t.bind(null,"axah",7))}},velocity:{mimeType:"text/x-velocity",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Velocity"):""},loader:function(){return Promise.all([n.e(0),n.e(87)]).then(n.t.bind(null,"/kYp",7))}},verilog:{mimeType:"text/x-verilog",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("Verilog"):""},loader:function(){return Promise.all([n.e(0),n.e(88)]).then(n.t.bind(null,"m2bc",7))}},xml:{mimeType:"text/xml",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("XML"):""},loader:function(){return Promise.all([n.e(0),n.e(89)]).then(n.t.bind(null,"1eCo",7))}},yaml:{mimeType:"text/x-yaml",label:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).featureSonicSnippets?a.t("YAML"):""},loader:function(){return Promise.all([n.e(0),n.e(90)]).then(n.t.bind(null,"ztCB",7))}}}},e31y:function(e,t,n){},e3Uf:function(e,t,n){},eD8c:function(e,t,n){"use strict";var a=n("QbLZ"),r=n.n(a),i=n("iCc5"),o=n.n(i),s=n("V7oC"),l=n.n(s),c=n("FYw3"),u=n.n(c),d=n("mRg0"),p=n.n(d),m=n("kxpR"),h=n.n(m),b=n("aK/h"),f=n("g5qt"),g=n("yHhI"),_=n("Smdl"),v=n("oLrU"),y=n("MREy"),k=(b.b.node.isRequired,b.b.func.isRequired,b.b.bool,b.b.bool,function(e){function t(e){o()(this,t);var n=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onDesktopContextMenu=n.onDesktopContextMenu.bind(n),n.renderSlackKitMenu=n.renderSlackKitMenu.bind(n),n}return p()(t,e),l()(t,[{key:"onDesktopContextMenu",value:function(){var e=this.props,t=e.getTemplate,n=e.overrideDefaultMenu,a=t().map(function(e){return r()({},e,{id:Object(v.a)()})});Object(f.Rb)(a,n)}},{key:"renderSlackKitMenu",value:function(e){var t=(0,this.props.getTemplate)().map(function(e){return e.label?r()({},e,{label:(t=e.label,t.replace(/&([\w&])/g,function(e,t){return t}))}):e;var t});return h.a.createElement(y.a,r()({},e,{template:t}))}},{key:"render",value:function(){var e=this;return Object(_.a)()?f.Q?h.a.Children.map(this.props.children,function(t){return h.a.cloneElement(t,{onContextMenu:e.onDesktopContextMenu})})[0]:this.props.desktopAppOnly?this.props.children:h.a.createElement(y.e,{useMouseCoordinatesAsTargetBounds:!0,renderMenu:this.renderSlackKitMenu},this.props.children):(Object(g.b)().error("Context menus are only supported in Sonic"),this.props.children)}}]),t}(m.PureComponent));k.displayName="ContextMenuTrigger",t.a=k,k.defaultProps={overrideDefaultMenu:!1,desktopAppOnly:!0}},eK75:function(e,t,n){"use strict";var a=n("fCVm");t.a=function(){return Object(a.a)().r}},eZdM:function(e,t,n){},erm0:function(e,t,n){},fCVm:function(e,t,n){"use strict";n.d(t,"d",function(){return r}),n.d(t,"e",function(){return i}),n.d(t,"b",function(){return o}),n.d(t,"c",function(){return s}),n.d(t,"a",function(){return l});var a=n("Sb2x"),r=a.TSF.replaceFormatContents,i=a.TSF.swapOutPlaceholders,o=a.TSF.getTokensArray,s=a.TSF.getTokensString,l=a.TSF.getEmojiRx},fFZG:function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("kxpR"),p=n.n(d),m=n("aK/h"),h=n("XHGt"),b=n("TSYQ"),f=n.n(b),g=n("oqAd"),_=n("Q+UV"),v=(n("2Dlx"),m.b.string,m.b.string,{className:void 0,reactionKey:null}),y=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.reactionKey,a=f()("c-message_kit__reaction_bar",t);return p.a.createElement(g.a,{className:a,reactionKey:n})}}]),t}(d.PureComponent);y.displayName="MessageReactionBar",y.defaultProps=v;t.a=Object(h.b)(function(e,t){var n=t.msg;return n?{reactionKey:Object(_.b)(n)}:null})(y)},fHJC:function(e,t,n){},fX3E:function(e,t,n){"use strict";var a=n("m1cH"),r=n.n(a),i=n("iCc5"),o=n.n(i),s=n("V7oC"),l=n.n(s),c=n("FYw3"),u=n.n(c),d=n("mRg0"),p=n.n(d),m=n("ifKl"),h=n("kxpR"),b=n.n(h),f=n("aK/h"),g=n("XHGt"),_=n("1hAG"),v=n("t85p"),y=n("h9PG"),k=n("e4Fz"),O=n("nNoG"),C=n("zlNY"),E=n("od5y"),j=(n("1lYC"),new O.b("files")),S=new O.b("search"),I=(f.b.string,f.b.func,f.b.bool,f.b.bool,f.b.bool,{filetype:"",onChange:m.a,featureRemoteFilesApi:!1,featureDocs:!1,showEmail:!1}),w=function(e){function t(e){o()(this,t);var n=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onChange=n.onChange.bind(n),n.labelId="file_type_select_"+Object(k.d)(),n.state={label:null},n}return p()(t,e),l()(t,[{key:"onChange",value:function(e,t,n){this.setState(function(){return{label:t}}),this.props.onChange(e,t,n)}},{key:"render",value:function(){var e=b.a.createElement(h.Fragment,null,j.rt("Show <strong>all file types</strong>",{fallbackHash:"30266588dc5ca2b69979f4afa079509cd409568e"}));return b.a.createElement(b.a.Fragment,null,b.a.createElement("div",{className:"offscreen",id:this.labelId},S.t("File type")," ",b.a.createElement("span",null,"- ",this.state.label?this.state.label:e)),b.a.createElement(C.d,{className:"p-file_list__select p-file_list__file_type_select",optionClassName:"p-file_list__option",placeholder:e,onChange:this.onChange,value:this.props.filetype,maxOptionsListHeight:1/0,useFilteredInput:!1,useFullWidthOptions:!0,wrapperClassName:"p-file_list__select_wrapper",labelId:this.labelId,options:[{label:b.a.createElement(h.Fragment,null,b.a.createElement(E.b,{type:"create-post"}),j.t("Posts",{fallbackHash:"a0ca0c3198947ded7419101f3e83d48a9cb41f2a"})),labelText:j.t("Posts",{fallbackHash:"a0ca0c3198947ded7419101f3e83d48a9cb41f2a"}),value:this.props.featureDocs?"docs":"posts"},{label:b.a.createElement(h.Fragment,null,b.a.createElement(E.b,{type:"create-snippet"}),j.t("Snippets",{fallbackHash:"ae05fb5b1e39e29b396e03c2efe053196e3b9456"})),labelText:j.t("Snippets",{fallbackHash:"ae05fb5b1e39e29b396e03c2efe053196e3b9456"}),value:"snippets"}].concat(r()(this.props.showEmail?[{label:b.a.createElement(h.Fragment,null,b.a.createElement(E.b,{type:"envelope-o"}),j.t("Emails",{fallbackHash:"473558393914486d8e60b9968e5443e40be433e0"})),labelText:j.t("Emails",{fallbackHash:"473558393914486d8e60b9968e5443e40be433e0"}),value:"emails"}]:[]),[{label:b.a.createElement(h.Fragment,null,b.a.createElement(E.b,{type:"image"}),j.t("Images",{fallbackHash:"09e871c98fef3b901a775def173e4126aaf73b42"})),labelText:j.t("Images",{fallbackHash:"09e871c98fef3b901a775def173e4126aaf73b42"}),value:"images"},{label:b.a.createElement(h.Fragment,null,b.a.createElement(E.b,{type:"play"}),j.t("Videos",{fallbackHash:"56b71e89fb1079caaadefd0889e9a22e8b0560e3"})),labelText:j.t("Videos",{fallbackHash:"56b71e89fb1079caaadefd0889e9a22e8b0560e3"}),value:"videos"},{label:b.a.createElement(h.Fragment,null,b.a.createElement(E.b,{type:"book"}),j.t("PDF Files",{fallbackHash:"fc3989fcc658f040ec5e0ef8d939fbdee62504ee"})),labelText:j.t("PDF Files",{fallbackHash:"fc3989fcc658f040ec5e0ef8d939fbdee62504ee"}),value:"pdfs"},{label:b.a.createElement(h.Fragment,null,b.a.createElement(E.b,{type:"file"}),j.t("Spreadsheets",{fallbackHash:"e8a0fe95bcd9c07d210920e52baa1560871c11ad"})),labelText:j.t("Spreadsheets",{fallbackHash:"e8a0fe95bcd9c07d210920e52baa1560871c11ad"}),value:"spreadsheets"}],r()(this.props.featureRemoteFilesApi?[{label:b.a.createElement(h.Fragment,null,b.a.createElement(E.b,{type:"file"}),j.t("Presentations")),labelText:j.t("Presentations"),value:"presentations"},{label:b.a.createElement(h.Fragment,null,b.a.createElement(E.b,{type:"file"}),j.t("Documents")),labelText:j.t("Documents"),value:"documents"}]:[]),[{label:b.a.createElement(h.Fragment,null,b.a.createElement(E.b,{type:"google-drive"}),j.t("Google Docs",{fallbackHash:"f87b0e163c24d4d015e972ff48d4014602f5a503"})),labelText:j.t("Google Docs",{fallbackHash:"f87b0e163c24d4d015e972ff48d4014602f5a503"}),value:"gdocs"}])}))}}]),t}(h.PureComponent);w.displayName="FileTypeSelect",w.defaultProps=I,t.a=Object(g.b)(function(e){return{featureDocs:Object(v.m)(e,"feature_docs"),featureRemoteFilesApi:Object(v.m)(e,"feature_remote_files_api"),showEmail:!!Object(_.d)(e).plan&&!Object(y.a)(e,"disable_email_ingestion")}})(w)},fYpC:function(e,t,n){},fj0Z:function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("kxpR"),p=n.n(d),m=n("aK/h"),h=n("od5y"),b=n("XLFM"),f=n("3LxC"),g=n("nNoG"),_=n("YB7p"),v=(n("tEVE"),new g.b("sonic_workspace_boot_failure")),y=(m.b.bool,m.b.bool,function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"renderAccessLimitedView",value:function(){var e=this.props.shouldRetry&&p.a.createElement("div",{className:"p-fallback_view__reload"},p.a.createElement(b.d,{type:"outline",size:"medium",onClick:_.a},v.t("Try Again")));return p.a.createElement("div",{className:"p-workspace__boot_failure"},p.a.createElement(h.b,{type:"warning",className:"p-workspace__boot_failure_icon"}),p.a.createElement("h1",{className:"p-workspace__boot_failure_title"},v.t("Your current network has blocked this workspace.")),p.a.createElement("p",{className:"p-workspace__boot_failure_description"},v.t("Your current network will only allow you to access certain Slack workspaces (usually, just the ones you use for work)."),p.a.createElement("br",null),p.a.createElement("br",null),v.t("To get connected, change networks and try again.")),e)}},{key:"renderGenericView",value:function(){var e=this.props.shouldRetry,t=v.t("contact us"),n=e&&p.a.createElement("div",{className:"p-fallback_view__reload"},p.a.createElement(b.d,{type:"outline",size:"medium",onClick:_.a},v.t("Reload")));return p.a.createElement("div",{className:"p-workspace__boot_failure"},p.a.createElement(h.b,{type:"exclamation-circle",className:"p-workspace__boot_failure_icon"}),p.a.createElement("h1",{className:"p-workspace__boot_failure_title"},v.t("Something\u2019s gone awry, and we\u2019re having trouble loading your workspace.")),p.a.createElement("p",{className:"p-workspace__boot_failure_description"},v.rt("Sorry we can\u2019t be more specific \u2014 this is one of those cases where we don\u2019t know what\u2019s gone wrong either. A restart of Slack may help, and you can always {contactLink}.",{contactLink:p.a.createElement(f.a,{href:"https://slack.com/help/contact"},t)})),n)}},{key:"render",value:function(){return this.props.isAccessLimited?this.renderAccessLimitedView():this.renderGenericView()}}]),t}(d.PureComponent));y.displayName="WorkspaceBootFailure",t.a=y,y.defaultProps={shouldRetry:!1,isAccessLimited:!1}},ftfc:function(e,t,n){"use strict";var a=n("QbLZ"),r=n.n(a),i=n("iCc5"),o=n.n(i),s=n("V7oC"),l=n.n(s),c=n("FYw3"),u=n.n(c),d=n("mRg0"),p=n.n(d),m=n("ifKl"),h=n("kxpR"),b=n.n(h),f=n("XHGt"),g=n("aK/h"),_=n("nNoG"),v=n("Idin"),y=n("M1FR"),k=n("pguY"),O=n("1hAG"),C=n("81nI"),E=n("7nxQ"),j=n("kOzZ"),S=n("zmn3"),I=n("TSYQ"),w=n.n(I),N=n("uPpK"),T=n("tn36"),A=n("qPro"),R=n("tQ8E"),P=n("cD5Y"),M=n("od5y"),x=n("ynxK"),F=n("lek6"),L=function(e){return b.a.createElement("div",null,b.a.createElement(x.a,{"data-qa":"article-"+e.article.id,className:"p-help_search__list__item "+(e.isFocus?"p-help_search__list__item__focus":""),key:e.article.id+"-list-item",onClick:function(){e.onClickArticle(e.article.url)},onKeyDown:function(t){13===t.keyCode&&e.onClickArticle(e.article.url)}},b.a.createElement("div",{className:"p-help_search__list__item__title"},"string"==typeof e.article.title?b.a.createElement(F.a,{className:"c-channel_search_result__justification",text:e.article.title,showTooltips:!1}):e.article.title),b.a.createElement(M.b,{type:"enter",className:"p-help_search__list__icon"})))};L.displayName="Article",L.defaultProps={article:{},isFocus:!1,onClickArticle:m.a};var D=L,U=(n("nTMe"),new _.b("help")),B=(g.b.string,g.b.string,g.b.arrayOf(g.b.shape({id:g.b.oneOfType([g.b.number,g.b.string]),images:g.b.array,label_names:g.b.array,title:g.b.node,url:g.b.string})),g.b.shape({open:g.b.number,closed:g.b.number,unread:g.b.number}),g.b.func,g.b.bool,g.b.func,g.b.bool,g.b.bool,g.b.bool,{query:"",helpCenterToken:"",articles:[],tickets:{closed:0,read:0,unread:0},onQueryChange:m.a,isLoading:!1,onOpenLink:m.a,autoFocus:!1,noTopMargin:!1,noBottomMargin:!1}),q=function(e){function t(e){o()(this,t);var n=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={query:n.props.query,articles:n.props.articles,focusFirstResult:!0,isLoading:n.props.isLoading},n.zdLocale=Object(E.a)(),Object(T.a)(n,["onListMouseEnter","onSearchInputChange","onSearchInputSubmit","onClickArticle","onSearchInputBlur","renderArticles"]),n}return p()(t,e),l()(t,[{key:"onClickArticle",value:function(e){var t=e.url,n=e.index,a=e.articleId;this.openLinkInNewWindow({url:Object(C.a)(t,this.props.helpCenterToken),index:n,articleId:a})}},{key:"onListMouseEnter",value:function(){this.setState(function(){return{focusFirstResult:!1}})}},{key:"onSearchInputBlur",value:function(){this.setState(function(){return{focusFirstResult:!1}})}},{key:"onSearchInputChange",value:function(e){var t=e.target.value;this.setState(function(){return{query:t,focusFirstResult:!0}}),this.props.onQueryChange(t)}},{key:"onSearchInputSubmit",value:function(){this.state.articles.length&&this.openLinkInNewWindow({url:Object(C.a)(this.state.articles[0].url,this.props.helpCenterToken),isFromSubmit:!0,index:0,articleId:this.state.articles[0].id})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.articles!==this.state.articles&&this.setState(function(){return{articles:e.articles,isLoading:e.isLoading}})}},{key:"openLinkInNewWindow",value:function(e){var t=e.url,n=e.index,a=e.isFromSubmit,r=e.articleId;(0,this.props.onOpenLink)({url:t,query:this.state.query,index:n,isFromSubmit:a,articleId:r}),window.open(Object(C.a)(t,this.props.helpCenterToken))}},{key:"renderArticles",value:function(e){var t=this,n=this.state.articles[e];return b.a.createElement(D,{article:n,isFocus:this.state.focusFirstResult&&0===e,onClickArticle:function(a){return t.onClickArticle({url:a,index:e,articleId:n.id})}})}},{key:"render",value:function(){var e=this,t=this.props,n=t.autoFocus,a=t.noTopMargin,r=t.noBottomMargin,i=this.state,o=i.query,s=i.articles;this.keys=Object(S.a)(s,"id").map(function(e){return e.toString()});var l=w()({margin_top_200:!a,margin_bottom_100:!r});return b.a.createElement(h.Fragment,null,b.a.createElement(A.a,{placeholder:U.t("Search the Help Center"),value:o,icon:"search",autoFocus:n,hasResetButton:!0,onChange:this.onSearchInputChange,onSubmit:this.onSearchInputSubmit,blurOnSubmit:!0,className:l,size:"large",onBlur:this.onSearchInputBlur}),o?null:b.a.createElement("div",{className:"p-help_search__popular_topics padding_bottom_100 bold"},U.t("Popular help topics")),b.a.createElement("div",{role:"list",className:"p-help_search__list display_flex flex_direction_column justify_content_between",onMouseEnter:this.onListMouseEnter},this.state.isLoading?b.a.createElement(P.a,{size:"large",color:"blue",noMargin:!0}):b.a.createElement("div",{className:"p-help_search__list__inner full_height"},b.a.createElement(N.a,null,function(t){var n=t.width,a=t.height;return b.a.createElement(R.a,{width:n,height:a,keys:e.keys,rowRenderer:e.renderArticles})}))))}}]),t}(h.Component);q.displayName="HelpSearch",q.defaultProps=B;var H=q,W=new _.b("help"),G=(g.b.string,g.b.string,g.b.func,g.b.object.isRequired,g.b.bool,g.b.func,g.b.arrayOf(g.b.oneOfType([g.b.number,g.b.shape({type:g.b.string.isRequired,id:g.b.number.isRequired,text:g.b.string}),g.b.shape({type:g.b.string.isRequired,url:g.b.string.isRequired,text:g.b.string.isRequired})])),g.b.func,g.b.bool,g.b.bool,{query:"",helpCenterTrackingToken:"",fetchHelpArticles:m.a,autoFocus:!1,onQueryChange:m.a,defaultArticlesData:null,onOpenLink:m.a,noTopMargin:!1,noBottomMargin:!1});function K(e){return"number"==typeof e||"helplink"===e.type?e.id||e:null}var V=function(e){function t(e){o()(this,t);var n=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={query:n.props.query,articles:[],isLoading:!0},n.allArticles=[],n.onQueryChange=n.onQueryChange.bind(n),n.zdLocale=Object(E.a)(),n}return p()(t,e),l()(t,[{key:"componentDidMount",value:function(){this.fetchHelpArticles({reason:"help-search-container/componentDidMount"})}},{key:"componentDidUpdate",value:function(e){e.defaultArticlesData!==this.props.defaultArticlesData&&this.fetchHelpArticles({reason:"help-search-container/componentDidUpdate"})}},{key:"onQueryChange",value:function(e){var t=e?this.filterArticlesByQuery(e):this.defaultArticles;if(e&&t.length<7){var n=Object(C.b)({query:e,zdLocale:this.zdLocale,sidTrackingToken:this.props.helpCenterTrackingToken});t.push({id:-99999,images:[],label_names:[],title:W.rt('Search for "{query}" on the Help Center',{query:e}),url:n})}this.setState(function(){return{query:e,articles:t}}),this.props.onQueryChange(e)}},{key:"filterPopularArticles",value:function(e){var t=[];return e.forEach(function(e){e.popular&&t.push(e)}),t.sort(function(e,t){return void 0===e.order?1:void 0===t.order?-1:e.order-t.order}),t}},{key:"filterDefaultArticles",value:function(e){var t=this.props.defaultArticlesData;if(!t)return[];var n={};return t.forEach(function(t){var a=K(t);a&&(n[a]=e.find(function(e){return e.id===a}))}),t.map(function(e,t){var a=K(e);return a&&n[a]?"number"==typeof e?n[a]:r()({},n[a],{title:e.text||n[a].title}):{id:"customArticle-"+t,title:e.text,url:e.url}}).filter(function(e){return!!e.url})}},{key:"filterArticlesByQuery",value:function(e){var t,n,a,r=(t=e,a=Math.min(n||5e5,5e5),t.length>a?Object(k.a)(t.slice(0,a)):Object(k.a)(t)),i=new RegExp(r,"i"),o=-1,s=this.allArticles.filter(function(e,t){return e.title.toLowerCase()===r.toLowerCase()?(o=t,!1):e.title.match(i)});return-1!==o&&s.unshift(this.allArticles[o]),s}},{key:"processArticles",value:function(e){var t=this;try{this.allArticles=JSON.parse(e.articles).articles}catch(e){this.allArticles=[]}this.defaultArticles=this.props.defaultArticlesData?this.filterDefaultArticles(this.allArticles):this.filterPopularArticles(this.allArticles),this.state.query?this.setState(function(){return{articles:t.filterArticlesByQuery(t.props.query),isLoading:!1}}):this.setState(function(){return{articles:t.defaultArticles,isLoading:!1}})}},{key:"fetchHelpArticles",value:function(){var e=this;this.props.fetchHelpArticles({locale:this.zdLocale,reason:"help-search-container/fetchHelpArticles"}).then(function(t){e.processArticles(t)})}},{key:"render",value:function(){var e=this.state,t=e.articles,n=e.query,a=e.isLoading,r=this.props,i=r.clogger,o=r.autoFocus,s=r.onOpenLink,l=r.noTopMargin,c=r.noBottomMargin;return b.a.createElement(H,{articles:t,query:n,autoFocus:o,helpCenterToken:this.props.helpCenterTrackingToken,onQueryChange:this.onQueryChange,isLoading:a,clogger:i,onOpenLink:s,noTopMargin:l,noBottomMargin:c})}}]),t}(h.Component);V.displayName="HelpSearchContainer",V.defaultProps=G;var z={fetchHelpArticles:v.a},Y=Object(f.b)(function(e){return{clogger:Object(j.a)({state:e}),helpCenterTrackingToken:Object(y.b)(e),team:Object(O.d)(e)}},z)(V);t.a=Y},fxy3:function(e,t,n){},gBrz:function(e,t,n){},"gl+W":function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("kxpR"),p=n.n(d),m=n("aK/h"),h=n("TSYQ"),b=n.n(h),f=n("Q3oM"),g=(n("aQya"),m.b.string,m.b.node,{className:void 0,children:void 0}),_=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=b()("c-message_kit__pillow",this.props.className);return p.a.createElement(f.a,{className:e},this.props.children)}}]),t}(d.PureComponent);_.displayName="MessagePillow",t.a=_,_.defaultProps=g},gtcZ:function(e,t,n){"use strict";n.d(t,"a",function(){return g});var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("tfYw"),u=n.n(c),d=n("mRg0"),p=n.n(d),m=n("fp5s"),h=n("f8fv"),b=n("Zr7G"),f=n("eK5+");function g(e){return function(t){function n(t){r()(this,n);var a=l()(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return a.uniqueId=Object(m.a)(),a.name=Object(h.a)(e.name),a.telemeter=Object(b.a)(),a.logMetrics=a.telemeter&&Object(f.a)(1),a}return p()(n,t),o()(n,[{key:"UNSAFE_componentWillMount",value:function(){var e,t;this.logMetrics&&this.telemeter.mark("react_"+this.name+"_mount_mark_"+this.uniqueId);for(var a=arguments.length,r=Array(a),i=0;i<a;i++)r[i]=arguments[i];u()(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"componentWillMount",this)&&(e=u()(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"componentWillMount",this)).call.apply(e,[this].concat(r)),u()(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"UNSAFE_componentWillMount",this)&&(t=u()(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"UNSAFE_componentWillMount",this)).call.apply(t,[this].concat(r))}},{key:"componentDidMount",value:function(){for(var e,t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];u()(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"componentDidMount",this)&&(e=u()(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"componentDidMount",this)).call.apply(e,[this].concat(a)),this.logMetrics&&this.telemeter.measureAndClear("react_"+this.name+"_mount_mark_"+this.uniqueId,"react_"+this.name+"_mount")}},{key:"UNSAFE_componentWillUpdate",value:function(){var e,t;this.logMetrics&&this.telemeter.mark("react_"+this.name+"_update_mark_"+this.uniqueId);for(var a=arguments.length,r=Array(a),i=0;i<a;i++)r[i]=arguments[i];u()(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"componentWillUpdate",this)&&(e=u()(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"componentWillUpdate",this)).call.apply(e,[this].concat(r)),u()(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"UNSAFE_componentWillUpdate",this)&&(t=u()(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"UNSAFE_componentWillUpdate",this)).call.apply(t,[this].concat(r))}},{key:"componentDidUpdate",value:function(){for(var e,t=arguments.length,a=Array(t),r=0;r<t;r++)a[r]=arguments[r];u()(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"componentDidUpdate",this)&&(e=u()(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"componentDidUpdate",this)).call.apply(e,[this].concat(a)),this.logMetrics&&this.telemeter.measureAndClear("react_"+this.name+"_update_mark_"+this.uniqueId,"react_"+this.name+"_update")}}]),n}(e)}},guIn:function(e,t,n){"use strict";function a(e){return!(!e||"-"===e)}n.d(t,"a",function(){return a})},guKx:function(e,t,n){},guNz:function(e,t,n){},h0LD:function(e,t,n){"use strict";var a=n("XfeM"),r=n("fYfO"),i=n("4M+g"),o=n("aK/h"),s=n("yHhI"),l=n("r31G"),c=Object(a.b)("log message to console (for debugging)",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.channelId,o=n.ts,c=t(),u=Object(r.a)(c,a,o),d=Object(i.e)(c,a);u&&(Object(s.a)({getState:t}).warn(u),e(Object(l.e)({message:u,modelObject:d})))});c.meta={name:"logMessage",key:"actionsLogMessageLogMessage",description:"log message to console (for debugging)"},c.propTypes={channelId:o.b.string.isRequired,ts:o.b.string.isRequired},t.a=c},h2AX:function(e,t,n){},hCXE:function(e,t,n){},hOGb:function(e,t,n){"use strict";n.d(t,"b",function(){return p}),n.d(t,"a",function(){return m});var a=n("kxpR"),r=n.n(a),i=n("TSYQ"),o=n.n(i),s=(n("aK/h"),n("od5y")),l=n("nNoG"),c=(n("VmKF"),new l.b("keyboard_key")),u={"\u2191":!0,"\u2193":!0,"\u2190":!0,"\u2192":!0},d={"\u2191":"caret-up","\u2193":"caret-down","\u2190":"caret-left","\u2192":"caret-right",Cmd:"cmd-small"},p=function(e){return{"\u2191":c.t("up arrow"),"\u2193":c.t("down arrow"),"\u2190":c.t("left arrow"),"\u2192":c.t("right arrow"),Ctrl:c.t("Control"),Cmd:c.t("Command"),".":c.t("period"),"[":c.t("left bracket"),"]":c.t("right bracket"),"+":c.t("plus"),"-":c.t("minus"),Esc:c.t("Escape"),Strg:"Steuerung"}[e]||e},m=function(e){var t=e.label,n=e.className,a=e.slim;if(t){var i=u[t],l=o()(n,{"c-keyboard_key":!0,"c-keyboard_key__arrow_key":i,"c-keyboard_key--slim":a}),m=p(t),h=c.t("{keyName} key",{keyName:m});return r.a.createElement("div",{role:"img","aria-label":h,className:l},d[t]?r.a.createElement(s.b,{type:d[t],size:a?"inherit":20,inline:a}):t)}};m.displayName="KeyboardKey",m.defaultProps={className:void 0,slim:!1}},hQtm:function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("kxpR"),p=n.n(d),m=n("aK/h"),h=n("XHGt"),b=n("tn36"),f=n("HvGc"),g=n("BUzq"),_=n("b7Ww"),v=n("OISv"),y=n("6Iy0"),k=n("uvIC"),O=n("dEjE"),C=(m.b.string.isRequired,m.b.string.isRequired,m.b.string,m.b.object,{className:void 0,comment:void 0}),E=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.comment,n=e.fileId,a=e.className;if(!t)return null;var r={user:t.user,ts:t.timestamp.toString(),subtype:"file_comment",comment:t,files:[n]};return p.a.createElement(O.a,{msg:r,className:a})}}]),t}(d.PureComponent);E.displayName="PinnedItemFileComment",E.defaultProps=C;var j=Object(h.b)(function(e,t){var n=t.fileId,a=t.commentId;return{comment:Object(k.d)(e,n,a)}})(E),S=(m.b.object.isRequired,m.b.func.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(b.a)(n,["onFileClick","renderMessage","renderFile","renderFileComment"]),n}return u()(t,e),o()(t,[{key:"onFileClick",value:function(e,t){t&&this.props.previewFile({fileId:t.id,flexOrigin:"details",flexOriginId:"pins"})}},{key:"renderMessage",value:function(e){return e&&e.ts?p.a.createElement(v.a,{msg:e,timestampClickable:!0,onFileClick:this.onFileClick,className:"p-pinned_items__message",flexOrigin:"details",flexOriginId:"pins",blocksContainerContext:y.a.pinned_items}):null}},{key:"renderFile",value:function(e){return e&&e.id?p.a.createElement(_.a,{file:e,onClick:this.onFileClick,showActions:!1}):null}},{key:"renderFileComment",value:function(e){return e&&e.id?p.a.createElement(j,{commentId:e.id,fileId:e.fileId}):null}},{key:"render",value:function(){var e=this.props.pin;return e.type===g.a.FILE?this.renderFile(e):e.type===g.a.FILE_COMMENT?this.renderFileComment(e):this.renderMessage(e)}}]),t}(d.PureComponent));S.displayName="PinnedItem";t.a=Object(h.b)(null,function(e){return{previewFile:function(){return e(f.c.apply(void 0,arguments))}}})(S)},hZjP:function(e,t,n){},hqEo:function(e,t,n){"use strict";var a=n("QbLZ"),r=n.n(a),i=n("kxpR"),o=n.n(i),s=n("aK/h"),l=n("XfeM"),c=n("yHhI"),u=n("dhvi"),d=n("8Duq"),p=n("O6kw"),m=n("vmJv"),h=n("iCc5"),b=n.n(h),f=n("V7oC"),g=n.n(f),_=n("FYw3"),v=n.n(_),y=n("mRg0"),k=n.n(y),O=n("lCmp"),C=n("NFsq"),E=n("ifKl"),j=n("X6iR"),S=n("tn36"),I=n("XHGt"),w=n("TSYQ"),N=n.n(w),T=n("yPgC"),A=n("t85p"),R=n("dxEi"),P=n("quKg"),M=n("nNoG"),x=n("36Nc"),F=n("kOzZ"),L=n("negh"),D=n("qgNY"),U=n("h9dl"),B=n("AzV5"),q=n("aLpA"),H=n("+yap"),W=n("5lF5"),G=n("h9PG"),K=n("+dLL"),V=n("b0Xh");var z=n("1hAG"),Y=n("5mKg"),Q=n("oLrU"),X=n("RB1+"),J=n("H2PH"),Z=n("sJy+"),$=n("U3Q0"),ee=n("XLFM"),te=n("plEq"),ne=n("O0RF"),ae=n("lwWk"),re=n("Rszm"),ie=n("0f2Y"),oe=n("mZe+").b,se=n("IyaR"),le=n("Y6FH"),ce=n("Hvpu"),ue=n("Zwlx"),de=n("iJ4v"),pe=n("r6UO"),me=(n("yWse"),new M.b("file-upload")),he=(s.b.array.isRequired,s.b.string,s.b.func,s.b.bool,s.b.bool,s.b.func,s.b.func,s.b.func,s.b.string,s.b.func,s.b.array,s.b.func,s.b.object,s.b.func,s.b.string,s.b.string,s.b.bool,s.b.number,s.b.string,s.b.bool.isRequired,s.b.bool,s.b.bool,s.b.bool,s.b.string,s.b.string,s.b.bool,s.b.string,s.b.object,s.b.bool,s.b.bool,s.b.bool,s.b.bool,s.b.bool,s.b.string,s.b.object,s.b.object.isRequired,s.b.func,s.b.func,s.b.arrayOf(T.a.File()),s.b.func,s.b.bool,{selectedChannelId:null,setSelectedChannel:E.a,canPostInSelectedChannel:!1,canThread:!1,closeModal:E.a,switchToChannel:E.a,getShareableChannelId:E.a,msgText:"",setMsgText:E.a,msgOps:void 0,setMsgOps:E.a,initialContents:void 0,converMsgOpsToRichTextMessage:E.a,disallowedKeywordInMsgText:null,initialText:"",initialBroadcast:!1,retentionDuration:null,threadTs:null,isStdPlan:!1,isPlusPlan:!1,isEnterprisePlan:!1,channelType:"channel",selectedChannelName:"",fromPaste:!1,teamId:void 0,inputProxy:void 0,isOffline:!1,featureOfflineMode:!1,featureSonicInputs:!1,featureWysiwygComposer:!1,clientToolBar:!1,currentChannelId:void 0,pendingFiles:null,clearPendingFilesForDialog:E.a,metadata:void 0,isLegacyDropboxPicker:!1,processAndAddPendingFiles:E.a,filterFilesForUpload:E.a}),be=function(e){function t(e){b()(this,t);var n=v()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(S.a)(n,["onGo","onCancel","onCancelAll","onCancelDiscard","closeDialog","onTextChange","onFileNameChange","onFilesSelected","onShareWithChange","onBroadcastChange","onEditCollapsedFileNameClick","setFileNameInputRef","clogPricingLinkClick"]),n.fileNameInput=null,n.initialText=n.props.initialText,n.initialContents=n.props.initialContents,n.logger=Object(c.b)(),n.msgInputRef=o.a.createRef(),n.state=r()({confirmClose:!1,confirmCancelAll:!1,submitting:!1},n.getStateForFileAtIndex(0),{broadcast:e.initialBroadcast}),n}return k()(t,e),g()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.files,n=e.clogger,a=(this.state||0).fileIndex;this.shouldShowStorageWarning()&&n.track(L.EventId.GROWTH_PRICING,{contexts:{ui_context:{action:L.UiAction.IMPRESSION,step:L.UiStep.FILE_UPLOAD,ui_component:L.UiComponent.FILE_STORAGE_LIMIT_BANNER}}}),this.isMultiFileUpload()||t&&this.maybeLoadImagePreview(t[a])}},{key:"onCancel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.props,n=t.initialText,a=t.msgText,r=this.state,i=r.confirmClose,o=r.confirmCancelAll;return!i&&a&&a.length>q.i&&a!==n?(this.setState(function(){return{confirmClose:!0,confirmCancelAll:e}}),!1):(e||!this.hasMoreFiles()||o?this.closeDialog():this.goToNextFile(),!1)}},{key:"onCancelAll",value:function(){return this.onCancel(!0)}},{key:"onCancelDiscard",value:function(){return this.setState(function(){return{confirmClose:!1,confirmCancelAll:!1}}),!1}},{key:"onGo",value:function(){var e=this,t=this.state,n=t.shareWith,a=t.fileName,r=t.fileIndex,i=t.confirmClose,o=t.broadcast,s=this.props,l=s.selectedChannelId,c=s.msgText,u=s.threadTs,d=s.teamId,p=s.pendingFiles,m=s.featureWysiwygComposer;if(this.isGoDisabled())return!1;if(i)return this.onCancel();this.initialText=null,this.initialContents=null;var h=this.props,b=h.switchToChannel,f=h.files,g=h.getShareableChannelId,_=h.metadata,v=n?Object(Q.a)():void 0,y=n?g({channelOrMemberId:l}):Promise.resolve(null),k=void 0;if(m){var O=this.msgInputRef&&this.msgInputRef.current&&this.msgInputRef.current.getWrappedInstance();k=O?O.getTextContents():this.props.msgOps}return y.then(function(t){var i=void 0;if(m&&(i=e.props.converMsgOpsToRichTextMessage({msgOps:k,channelId:t,inThread:!!u})),e.isMultiFileUpload()){e.closeDialog(),Object(J.a)(d).uploadFiles({files:p,shareData:{channelId:t,clientMsgId:v,introMessage:n?c:null,blocks:m&&n?i:null,threadTs:t?u:null,broadcast:t&&u?o:null,metadata:_}}).then(function(){e.logger.info("UPLOAD-DIALOG","Multi-file upload complete for: "+v)}).catch(function(t){e.logger.warn("Multi-file upload failed for: "+v+"; with error "+t)}),e.logger.info("UPLOAD-DIALOG","Beginning multi-file upload for: "+v)}else{e.hasMoreFiles()||e.closeDialog();var s=f[r];Object(J.a)(d).uploadFiles({files:[s],shareData:{channelId:t,clientMsgId:v,title:a||e.initialFileName(s),link:s.link,introMessage:n?c:null,blocks:m&&n?i:null,threadTs:t?u:null,broadcast:t&&u?o:null,isBox:s.is_box,isDropbox:s.is_dropbox,metadata:_}})}e.hasMoreFiles()?e.goToNextFile():t&&!u&&b({id:t}),e.setState(function(){return{submitting:!1}})}),this.setState(function(){return{submitting:!0}}),!1}},{key:"onTextChange",value:function(e){var t=e.text,n=e.msgOps,a=e.overLimit;this.props.featureWysiwygComposer?this.props.setMsgOps(n):this.props.setMsgText(t),this.setState(function(){return{overMsgLengthLimit:a}})}},{key:"onFileNameChange",value:function(e){this.setState(function(){return{fileName:e,overFileNameLimit:e.length>q.y}})}},{key:"onFilesSelected",value:function(e){var t=this,n=d.a;this.props.filterFilesForUpload({selectedFiles:e,channelId:n}).then(function(e){e&&e.length&&t.props.processAndAddPendingFiles({channelId:n,files:e})})}},{key:"onShareWithChange",value:function(e){var t=e.target.checked;this.setState(function(){return{shareWith:!!t}})}},{key:"onBroadcastChange",value:function(e){this.setState(function(){return{broadcast:e}})}},{key:"onEditCollapsedFileNameClick",value:function(){this.setState(function(){return{collapseFileNameInput:!1}}),this.fileNameInput.focus()}},{key:"setFileNameInputRef",value:function(e){this.fileNameInput=e}},{key:"getStateForFileAtIndex",value:function(e){var t=this.props.files[e],n=t&&Object(C.a)(t.type,"image");return{fileIndex:e,defaultFileName:this.initialFileName(t),fileName:"",shareWith:!0,previewDataUrl:null,overMsgLengthLimit:!1,overFileNameLimit:!1,exifOrientation:null,previewImageDimensionsRatio:null,collapseFileNameInput:n,broadcast:!1}}},{key:"getStorageWarning",value:function(){var e=this,t=this.props,n=t.isStdPlan,a=t.isPlusPlan,r=t.isEnterprisePlan;if(!this.shouldShowStorageWarning())return null;var i=function(t){var n=t.text;return o.a.createElement(ie.a,{href:"/pricing?ui_step="+L.UiStep.FILE_UPLOAD+"&ui_element="+L.UiElement.PRICING_LINK,target:"_blank",rel:"noopener noreferrer",onClick:e.clogPricingLinkClick,"data-qa":"file-upload-dialog_pricing-link"},n)};return n?me.rt("Your workspace has reached the Standard plan\u2019s storage limit. To add more files to Slack, you\u2019ll need to <a>upgrade your plan</a>.",null,i):a?me.rt("Your workspace has reached the Plus plan\u2019s storage limit. To add more files to Slack, you\u2019ll need to <a>upgrade your plan</a>.",null,i):r?me.rt("It looks like your organization\u2019s reached the file storage limit. If that sounds wrong, you may want to <a>contact Slack</a>.",null,function(e){var t=e.text;return o.a.createElement(ae.a,{href:"/help/requests/new",target:"_blank"},t)}):me.rt("Your free workspace is limited to 5 GB of files. If you upload more files, you\u2019ll lose access to some older ones. To view them again and get more space, <a>upgrade to a paid plan</a>.",null,i)}},{key:"shouldShowStorageWarning",value:function(){var e=this.props,t=e.overStorageLimit,n=e.files[this.state.fileIndex];return t&&!n.is_dropbox&&!n.is_box&&!n.is_external}},{key:"clogPricingLinkClick",value:function(){this.props.clogger.track(L.EventId.GROWTH_PRICING,{contexts:{ui_context:{action:L.UiAction.CLICK,step:L.UiStep.FILE_UPLOAD,ui_element:L.UiElement.PRICING_LINK,ui_component:L.UiComponent.FILE_STORAGE_LIMIT_BANNER}}})}},{key:"isMultiFileUpload",value:function(){var e=this.props.files;return!Object(O.a)(e,function(e){return e.is_box||e.is_dropbox})}},{key:"isMultipleFiles",value:function(){return!this.isMultiFileUpload()&&this.props.files.length>1}},{key:"hasMoreFiles",value:function(){if(!this.isMultipleFiles())return!1;var e=this.props.files,t=this.state.fileIndex;return e.length>t+1}},{key:"goToNextFile",value:function(){var e=this,t=this.props,n=t.files,a=t.setMsgText,i=this.state.fileIndex;this.setState(function(){return r()({confirmClose:!1},e.getStateForFileAtIndex(i+1))},function(){e.maybeLoadImagePreview(n[i+1])}),a("")}},{key:"closeDialog",value:function(){var e=this.props,t=e.initialBroadcast,n=e.threadTs,a=e.featureSonicInputs,r=e.currentChannelId,i=e.featureWysiwygComposer,o=this.props.inputProxy;if(this.props.closeModal(),this.isMultiFileUpload()&&this.props.clearPendingFilesForDialog(),i&&this.initialContents){if(o||(o=Object(X.a)({viewContext:q.H.MESSAGE_PANE,channelId:r})),!o)return;return o.setContents(this.initialContents),void o.focus()}if(this.initialText){var s=this.initialText;setTimeout(function(){if(o)o.setText(s),o.setBroadcast(t),o.focus();else if(n)Object(W.f)(s,t);else if(a){var e=Object(X.a)({viewContext:q.H.MESSAGE_PANE,channelId:r});e&&e.setText(s)}else Object(H.e)(s)},10)}}},{key:"initialFileName",value:function(e){return!e.name||this.props.fromPaste?me.t("Pasted image at {date}",{date:Object(x.a)(Date.now()/1e3)}):e.name}},{key:"isUsingNewDropboxApp",value:function(){var e=this.props,t=e.isLegacyDropboxPicker,n=e.files;return Object(O.a)(n,function(e){return e.is_dropbox})&&t}},{key:"isGoDisabled",value:function(){var e=this.state,t=e.submitting,n=e.shareWith,a=e.overMsgLengthLimit,r=e.overFileNameLimit,i=this.props,o=i.canPostInSelectedChannel,s=i.threadTs,l=i.canThread,c=i.disallowedKeywordInMsgText,u=i.isOffline,d=i.featureOfflineMode;return t||n&&!o&&!s||n&&s&&!l||n&&!!c||a||r||d&&u}},{key:"maybeLoadImagePreview",value:function(e){var t=this;if(window.FileReader&&!e.is_box&&!e.is_dropbox)if("string"!=typeof e)try{var n=new FileReader;n.onload=function(n){var a=n.target.result;Object(j.a)(a,"data:image/")&&t.loadImagePreviewWithOrientation(e,a)},n.onloadstart=function(e){e.total>33554432&&(t.logger.info("UPLOAD-DIALOG","Skipping image preview for large file: "+e.total),n.abort())},n.readAsDataURL(e)}catch(e){this.logger.warn("Error loading upload preview"),this.logger.warn(e)}else this.setState(function(){return{previewDataUrl:"data:image/png;base64,"+e,collapseFileNameInput:!0}})}},{key:"loadImagePreviewWithOrientation",value:function(e,t){var n=this;(function(e){return new Promise(function(t,n){var a=Object(c.b)();try{var r=new FileReader;r.onload=function(e){var n=Object(V.readFromBinaryFile)(e.target.result);n&&"number"==typeof n.Orientation?t(n.Orientation):t(null)},r.readAsArrayBuffer(e)}catch(e){a.warn("Error reading exif data"),a.warn(e),n(e)}})})(e).then(function(e){if(e&&1!==e){var a=new Image;a.onload=function(){var r=a.width,i=a.height/r;n.setState(function(){return{previewDataUrl:t,previewImageDimensionsRatio:i,exifOrientation:e,collapseFileNameInput:!0}})},a.src=t}else n.setState(function(){return{previewDataUrl:t,collapseFileNameInput:!0}})})}},{key:"renderBroadcastCheckbox",value:function(){var e=this.props,t=e.threadTs,n=e.canPostInSelectedChannel,a=e.channelType,r=e.selectedChannelName,i=this.state.broadcast;return t&&n?o.a.createElement("div",{className:"p-file_upload_dialog__section p-file_upload_dialog__section--broadcast"},o.a.createElement(pe.a,{channelType:a,selectedChannelName:r,value:i,onChange:this.onBroadcastChange})):null}},{key:"renderImagePreview",value:function(){var e=this.state,t=e.previewDataUrl,n=e.previewImageDimensionsRatio,a=e.exifOrientation,r=e.fileName;if(!this.state.previewDataUrl)return null;var i=me.t("Preview of {fileName}",{fileName:r}),s=void 0;2===a?s="scaleX(-1)":3===a?s="rotate(180deg)":4===a?s="rotate(180deg) scaleX(-1)":5===a?s="rotate(90deg) scale("+n+", -"+n+")":6===a?s="rotate(90deg) scale("+n+")":7===a?s="rotate(90deg) scale(-"+n+", "+n+")":8===a&&(s="rotate(-90deg) scale("+n+", "+n+")");var l={};return s&&(l.transform=s),o.a.createElement("div",{className:"p-file_upload_dialog__section"},o.a.createElement("div",{className:"p-file_upload_dialog__preview"},o.a.createElement("div",{style:l},o.a.createElement("img",{className:"p-file_upload_dialog__preview_image",src:t,alt:i}))))}},{key:"renderShareWith",value:function(){var e=this.props,t=e.threadTs,n=e.selectedChannelId,a=this.state.shareWith;return t?o.a.createElement(de.a,{channelId:n,threadTs:t}):o.a.createElement(ne.a,{text:me.t("Share with:"),htmlFor:"file-upload-share-with",type:"inline"},o.a.createElement(re.a,{id:"file-upload-share-with",defaultChecked:a,onChange:this.onShareWithChange}))}},{key:"renderChannelPicker",value:function(){var e=this.props,t=e.selectedChannelId,n=e.setSelectedChannel,a=e.threadTs,r=this.state.shareWith;return a?null:o.a.createElement(le.a,{initialChannelId:t,onChange:n,isDisabled:!r,dialogType:"file_upload_dialog"})}},{key:"renderCancelAllButton",value:function(){return o.a.createElement(ee.d,{type:"outline",className:"p-file_upload_dialog__footer_cancel_all",onClick:this.onCancelAll,tabIndex:"-1","data-qa":"dialog-cancel-all"},me.t("Cancel All"))}},{key:"renderMultiFileShareInputs",value:function(){return this.isMultipleFiles()?o.a.createElement("div",{className:"p-file_upload_dialog__section"},this.renderShareWith(),this.renderChannelPicker()):null}},{key:"renderFooterExtra",value:function(){return this.isMultipleFiles()?this.renderCancelAllButton():o.a.createElement("div",{className:"p-file_upload_dialog__footer_share_inputs"},this.renderShareWith(),this.renderChannelPicker())}},{key:"renderWarning",value:function(){var e=this.getStorageWarning(),t=Object(ue.a)(this.props);if(!t&&!e)return null;var n=this.props.overStorageLimit?"info":"warning";return o.a.createElement("div",{className:"p-file_upload_dialog__section","data-qa":"share-dialog_warning"},o.a.createElement(Z.d,{type:"inline",level:n},e?o.a.createElement("span",{className:"p-share_dialog__warning_message"},e):null,t))}},{key:"renderCollapsedFileName",value:function(){var e=this.state,t=e.defaultFileName,n=e.collapseFileNameInput,a=N()("p-file-upload_dialog__preview_file_name",{"p-file-upload_dialog__preview_file_name--hide":!n}),r=me.rt("edit"),i=me.rt("Edit file name: {fileName}",{fileName:t});return o.a.createElement("div",{className:a},o.a.createElement("span",{className:"p-file-upload_dialog__preview_file_name_text"},t),o.a.createElement(ie.a,{className:"p-file-upload_dialog__preview_file_name_edit",onClick:this.onEditCollapsedFileNameClick,tabIndex:n?null:"-1","aria-label":i},r))}},{key:"renderExpandedFileNameInput",value:function(){if(this.isUsingNewDropboxApp())return null;var e=this.state,t=e.fileName,n=e.defaultFileName,a=e.collapseFileNameInput,r=N()("p-file_upload_dialog__file_name_input",{"p-file_upload_dialog__file_name_input--hide":a});return o.a.createElement(ne.a,{text:me.t("File name"),htmlFor:"file-upload-name",className:r},o.a.createElement(te.a,{id:"file-upload-name",name:"file-upload-name",value:t,maxCharacterLimit:q.y,counterMinimumCharacters:q.J,onChange:this.onFileNameChange,placeholder:n,tabIndex:a?"-1":null,ref:this.setFileNameInputRef}))}},{key:"renderFileNameInput",value:function(){return o.a.createElement("div",{className:"p-file_upload_dialog__section p-file_upload_dialog__section_file_name"},this.renderCollapsedFileName(),this.renderExpandedFileNameInput())}},{key:"renderMultiFileUpload",value:function(){return o.a.createElement("div",{className:"p-file_upload_dialog__section"},o.a.createElement(oe,{channelId:d.a,onFilesSelected:this.onFilesSelected}))}},{key:"renderRetentionWarning",value:function(){var e=this.props.retentionDuration;return e?o.a.createElement("div",{className:"p-file_upload_dialog__section p-file_upload_dialog__section--retention_duration"},o.a.createElement("span",null,me.t("Due to your custom file retention policy, this file will be deleted after {duration}",{duration:Object(K.a)(e)}))):null}},{key:"render",value:function(){var e=this.props,t=e.files,n=e.msgText,a=e.selectedChannelId,r=e.threadTs,i=e.featureOfflineMode,s=e.isOffline,l=e.clientToolBar,c=e.featureWysiwygComposer,u=this.state,d=u.fileIndex,p=u.shareWith,m=u.confirmClose,h=me.t("Add a message about the file",{fallbackHash:"76426947fe26fc3fa06b6bf272f55b1b45248641"}),b=me.t("Upload a file",{fallbackHash:"1ed2e7b50fa1dbbf1693d1c38adf270c04db10c6"});this.isMultipleFiles()&&(b=me.t("Upload a file ({number} of {total})",{number:d+1,total:t.length,fallbackHash:"98feccd29dda6dfff23692d85c563aada4877d37"}));var f=N()("p-file_upload_dialog",{"p-file_upload_dialog--multiple":this.isMultipleFiles()&&!m,"p-file_upload_dialog--client_toolbar":l||c}),g=i&&s?o.a.createElement("div",{className:"p-file_upload_dialog__section"},o.a.createElement(Z.d,{icon:"cloud-offline",level:"info"},me.rt("<strong>No connection.</strong> You'll be able to upload files as soon as you're back online."))):null;return o.a.createElement($.b,{className:f,title:b,onClose:this.onCancel,onCancel:m?this.onCancelDiscard:this.onCancel,onGo:m?this.onCancel:this.onGo,useSlackScrollbarWithPadding:!0,shouldCloseOnOverlayClick:!m,cancelText:m?me.t("No, keep it"):null,goButtonIsDisabled:this.isGoDisabled(),goButtonText:m?me.t("Yes, discard the message"):me.t("Upload"),footerText:m?me.t("Closing the window will discard your message"):this.renderFooterExtra(),goButtonType:m?"danger":"primary",showCancelButton:m},this.renderWarning(),g,o.a.createElement("div",{className:"p-file_upload_dialog__section"},o.a.createElement(se.a,{channelId:a,threadTs:r,text:n,initialContents:this.initialContents,onTextChange:this.onTextChange,ariaLabel:h,placeholder:h,enabled:p,focusOnMount:!0,onEnter:this.onGo,enableBroadcastKeywords:!r,maxLines:6,ref:this.msgInputRef})),this.renderBroadcastCheckbox(),this.isMultiFileUpload()?this.renderMultiFileUpload():o.a.createElement(o.a.Fragment,null,this.renderImagePreview(),this.renderFileNameInput(),this.renderMultiFileShareInputs()),this.renderRetentionWarning())}}]),t}(i.PureComponent);be.displayName="FileUploadDialog",be.defaultProps=he;var fe=Object(I.b)(function(e,t){var n=Object(z.d)(e),a={overStorageLimit:Object(Y.C)(n),isStdPlan:Object(Y.z)(n),isPlusPlan:Object(Y.x)(n),isEnterprisePlan:Object(Y.s)(n)};return r()({},Object(ce.b)(e,t),a,{retentionDuration:parseInt(Object(G.a)(e,"file_retention_type"),10)?Object(G.a)(e,"file_retention_duration"):null,teamId:n.id,isOffline:!Object(R.c)(e),featureOfflineMode:Object(A.m)(e,"feature_offline_mode"),featureSonicInputs:Object(A.m)(e,"feature_sonic_inputs"),currentChannelId:Object(m.a)(e),pendingFiles:Object(d.e)(e),clogger:Object(F.a)({state:e}),clientToolBar:"composer_toolbar"===Object(P.c)(e,"composer_toolbar"),isLegacyDropboxPicker:Object(G.a)(e,"dropbox_legacy_picker")})},function(e){return{closeModal:function(){return e(u.a.apply(void 0,arguments))},switchToChannel:function(){return e(D.a.apply(void 0,arguments))},getShareableChannelId:function(){return e(U.a.apply(void 0,arguments))},clearPendingFilesForDialog:function(){return e(d.b.apply(void 0,arguments))},converMsgOpsToRichTextMessage:function(){return e(B.a.apply(void 0,arguments))},processAndAddPendingFiles:function(){return e(d.g.apply(void 0,arguments))},filterFilesForUpload:function(){return e(p.a.apply(void 0,arguments))}}})(be),ge=Object(ce.a)(fe),_e=n("a+Oh"),ve=Object(l.b)("Takes N files and opens the file upload dialog",function(e,t,n){var a=n.files,i=n.threadTs,s=n.inputProxy;if(!a||!a.length)return Object(c.a)({getState:t}).warn("No files passed to openFileUploadDialog"),null;var l=t(),h=function(t){if(!t||!t.length)return null;var c=Object(A.m)(l,"feature_sonic_inputs"),p=Object(_e.a)(l),h=Object(m.a)(l),b=function(e,t){if(t){var n=t.getBroadcast();return n&&t.setBroadcast(!1),n}return!(!e||Object(W.a)()!==e)&&Object(W.d)()}(i,s),f=p?null:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.inputProxy,a=t.featureSonicInputs,r=t.currentChannelId;if(n){var i=n.getText();return i&&n.clear(),i}if(e&&Object(W.a)()===e){var o=Object(W.g)();return o&&Object(W.b)(),o}if(a){var s=Object(X.a)({viewContext:q.H.MESSAGE_PANE,channelId:r}),l=s.getText();return l&&s.clear(),l}var c=Object(H.d)();c&&Object(H.e)("");return c}(i,{inputProxy:s,featureSonicInputs:c,currentChannelId:h}),g=p?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.featureWysiwygComposer,n=e.currentChannelId,a=e.inputProxyProp;if(!t)return null;var r=a||Object(X.a)({viewContext:q.H.MESSAGE_PANE,channelId:n});if(!r)return null;var i=r.getContents();i&&r.clear();return i}({featureWysiwygComposer:p,currentChannelId:h,inputProxyProp:s}):null;return e(Object(d.h)({files:t})),e(Object(u.e)({element:o.a.createElement(ge,r()({},n,{files:t,initialText:f,initialContents:g,initialBroadcast:b,fileSizeExceeded:t.length<a.length}))}))};return e(Object(p.a)({selectedFiles:a})).then(function(e){return h(e)})});ve.meta={name:"openFileUploadDialog",key:"actionsOpenFileUploadDialogOpenFileUploadDialog",description:"Takes N files and opens the file upload dialog"};t.a=ve},"hr+X":function(e,t,n){},iJ13:function(e,t,n){},iJ4v:function(e,t,n){"use strict";var a=n("BeL+"),r=n("zmn3"),i=n("kxpR"),o=n.n(i),s=(n("aK/h"),n("XHGt")),l=n("nNoG"),c=n("4M+g"),u=n("fYfO"),d=n("hOQf"),p=n("4RH7"),m=n("5lF5"),h=n("hpgS"),b=new l.b("file-upload");function f(e){var t=e.label,n=e.replyCount,a=e.replyUsers,r=e.replyUsersCount;return a?o.a.createElement("div",{className:"p-file_upload_dialog__thread_label"},t||b.t("Sharing file in a thread"),o.a.createElement("br",null),o.a.createElement(p.a,{replyCount:n,replyUsers:a,replyUsersCount:r})):null}f.displayName="FileUploadThreadLabel",f.defaultProps={label:void 0,replyCount:void 0,replyUsers:void 0,replyUsersCount:void 0},t.a=Object(s.b)(function(e,t){var n=t.channelId,i=t.threadTs,o=Object(u.a)(e,n,i);if(!o){var s=Object(c.e)(e,n);(o=Object(m.c)(s,i))||(o=Object(h.a)(s,i))}if(!o)return{};var l=Object(d.T)(o),p=Object(d.U)(o);return o.replies?(l=Object(r.a)(o.replies,"user"),o.user&&l.push(o.user),p=Object(a.a)(l).length):o.user&&l.push(o.user),{replyCount:Object(d.S)(o),replyUsers:l,replyUsersCount:p}})(f)},ixEi:function(e,t,n){},j4JU:function(e,t,n){},jfx7:function(e,t,n){"use strict";var a=n("kxpR"),r=n.n(a),i=n("ZSbO");function o(){return r.a.createElement("div",null,r.a.createElement(i.a,null),r.a.createElement("div",{className:"p-channel_sidebar"}),r.a.createElement("div",null))}o.displayName="WorkspaceEmptyState",t.a=o},kFoU:function(e,t,n){"use strict";var a=n("QbLZ"),r=n.n(a),i=n("kxpR"),o=n.n(i),s=n("XHGt"),l=n("aK/h"),c=n("1hAG"),u=n("A+cF"),d=n("kd6D"),p=n("T00V"),m=n("hUMe"),h=(n("HAG/"),l.b.string,l.b.string.isRequired,l.b.bool,l.b.object.isRequired,{className:void 0,invert:!1});function b(e){var t=e.className,n=e.id,a=e.invert,i=e.team,s=a?d.c.highlightDark:null;return o.a.createElement(u.d,{avatar:function(e){return o.a.createElement(p.a,r()({},e,{team:i,size:d.a.small,invert:a}))},className:t,size:"small",style:s,text:o.a.createElement(m.a,{team:i,invert:a}),"data-team-id":n})}b.displayName="SmallTeamEntity",b.defaultProps=h;t.a=Object(s.b)(function(e,t){var n=t.team||Object(c.i)(e,t.id);return{team:n,id:n.id}})(b)},kVk7:function(e,t,n){},kyN7:function(e,t,n){"use strict";var a,r=n("ifKl"),i=n("kxpR"),o=n.n(i),s=n("XHGt"),l=n("TSYQ"),c=n.n(l),u=n("aK/h"),d=n("nNoG"),p=n("Fdc0"),m=n("9E9B"),h=n("zo7m"),b=n("zwKj"),f=n("HvGc"),g=n("XLFM"),_=n("RAhH"),v=n("auxT"),y=n("/m+M"),k=n("dxEi"),O=n("HMjZ"),C=n("negh"),E=n("9oTK"),j=n("XfeM"),S=n("x4bP"),I=n("2Inn"),w=n("4M+g"),N=n("wfE8"),T=n("i1Fx"),A=Object(j.b)("Open a conversation with a member and then start a call",(a=Object(E.coroutine)(regeneratorRuntime.mark(function e(t,n){var a,r,i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).memberId;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=2;break}return e.abrupt("return",Promise.reject(new Error("invalid params")));case 2:if(Object(S.a)()){e.next=5;break}return Object(T.c)({id:i}),e.abrupt("return",Promise.resolve());case 5:if(a=n(),r=Object(w.l)(a,i)){e.next=12;break}return e.next=10,Object(E.resolve)(t(Object(N.v)({memberIds:[i],reason:"startCallByMemberId"})).then(function(e){var n=e&&e.channel;n&&(t(Object(m.addChannel)({channel:n})),r=n.id)}));case 10:if(r){e.next=12;break}return e.abrupt("return",Promise.reject(new Error("could not open conversation")));case 12:return e.abrupt("return",t(Object(I.d)({channelId:r})));case 13:case"end":return e.stop()}},e,void 0)})),function(e,t,n){return a.apply(this,arguments)}));A.meta={name:"startCallByMemberId",key:"componentsFlexpaneProfileUtilityStartCallByMemberIdStartCallByMemberId",description:"Open a conversation with a member and then start a call"},A.propTypes={memberId:u.b.string.isRequired};var R=A,P=(n("kVk7"),new d.b("member_profile")),M=(u.b.func,u.b.node,u.b.string,u.b.object,u.b.func,u.b.func,u.b.bool,u.b.func,u.b.func,u.b.func,u.b.func,u.b.bool.isRequired,u.b.bool.isRequired,u.b.object,{autoFillSlashCommand:r.a,children:void 0,className:void 0,member:void 0,onClick:r.a,openEditProfileModal:r.a,showCallButton:!1,showFileList:r.a,showMemberProfile:r.a,startCallByMemberId:r.a,startImByMemberId:r.a,clogger:{track:r.a}});function x(e){var t=e.autoFillSlashCommand,n=e.children,a=e.className,r=e.member,i=e.onClick,s=e.openEditProfileModal,l=e.showCallButton,u=e.showFileList,d=e.showMemberProfile,m=e.startCallByMemberId,h=e.startImByMemberId,b=e.isOffline,f=e.isCallsAllowedByAdmin,k=e.clogger,O=Object(y.a)(),E=O.featureModernProfileFlexpane,j=O.featureOfflineMode,S=Object(p.K)(r),I=Object(p.Ab)(r);if(!E)return null;var w=void 0;if(Object(p.Hb)(r))w=o.a.createElement(g.d,{className:"p-member_profile_buttons__button",onClick:function(){k.track(C.EventId.USER_PROFILE_EDIT_PROFILE_CLICK,{edit_profile_button_type:I?"complete":"incomplete"}),s(),i()},type:I?"outline":"primary","data-qa":"member_profile_edit_btn"},P.t("Edit Profile"));else if(Object(p.Ib)(r))w=o.a.createElement(g.d,{className:"p-member_profile_buttons__button",onClick:function(){var e=P.t("remind",{ns:"chat_commands"});t({commandName:"/"+e}),i()},type:"outline","data-qa":"member_profile_remind_btn"},P.t("Remind Me"));else if(!Object(p.xb)(r))if(l)if(Object(p.db)(r)&&f){var N=o.a.createElement(g.d,{className:"p-member_profile_buttons__button",onClick:function(){m({memberId:r.id}),i()},type:"outline","data-qa":"member_profile_call_btn",disabled:j&&b,"aria-label":j&&b?P.t("Go online to start a call"):P.t("Call {name}",{name:S})},P.t("Call")),T=j?o.a.createElement(v.a,{tooltipLabel:P.t("Go online to start a call")}):null;w=j&&b?o.a.createElement(_.c,{tip:T},o.a.createElement("span",{className:"p-member_profile_buttons__button_disabled_container"},N)):N}else w=o.a.createElement(g.d,{className:"p-member_profile_buttons__button",onClick:function(){u({user:r.id}),i()},type:"outline","data-qa":"member_profile_files_btn"},P.t("View Files"));else w=o.a.createElement(g.d,{className:"p-member_profile_buttons__button",onClick:function(){d({memberId:r.id}),i()},type:"outline","data-qa":"member_profile_profile_btn"},P.t("View Profile"));return o.a.createElement("div",{className:c()(a,"p-member_profile_buttons")},o.a.createElement(g.d,{"aria-label":P.t("Message {name}",{name:Object(p.K)(r)}),className:"p-member_profile_buttons__button",onClick:function(){h({memberId:r.id}),i()},type:"outline","data-qa":"member_profile_message_btn"},P.t("Message")),w,n)}x.displayName="MemberProfileButtons",x.defaultProps=M;var F={autoFillSlashCommand:function(){return b.a.apply(void 0,arguments)},openEditProfileModal:function(){return h.a.apply(void 0,arguments)},showFileList:function(){return f.g.apply(void 0,arguments)},showMemberProfile:function(){return f.j.apply(void 0,arguments)},startCallByMemberId:function(){return R.apply(void 0,arguments)},startImByMemberId:function(){return m.startImByMemberId.apply(void 0,arguments)}};t.a=Object(s.b)(function(e){return{isOffline:!Object(k.c)(e),isCallsAllowedByAdmin:Object(O.g)(e)}},F)(x)},l31K:function(e,t,n){},lKeU:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var a=n("cZF4"),r=n("Muja"),i=n("0VPD"),o=n("Gogr");function s(){var e=Object.keys(Object(o.c)("teams")||{}),t=Object.keys(Object(o.c)("prevTeams")||{}),n=Object(a.a)(e,t),s=Object(o.c)("orderedTeamIds"),l=Object(a.a)(Object(i.a)(s,n),e);return Object(r.a)(l,s)||Object(o.h)("orderedTeamIds",l),l}},lV17:function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("ifKl"),p=n("kxpR"),m=n.n(p),h=n("aK/h"),b=n("TSYQ"),f=n.n(b),g=n("XHGt"),_=n("lhZz"),v=n("brL+"),y=n("t85p"),k=n("s/0T"),O=n("/gpl"),C=n("fOe4"),E=n("vmJv"),j=n("Fwh9"),S=n("ajyX"),I=n("YSKj"),w=n("iTOt"),N=function(e){if(Object(j.e)(e)||Object(S.a)(e)){var t=Object(w.c)(e),n=t.entityId,a=t.tabId;if(t&&n&&a&&Object(I.a)(a,n,e))return t&&t.tabId}},T=n("g+Y+"),A=n("zoXk"),R=n("hgYl"),P=n("Tc5z"),M=n("6Jf9"),x=n("UYUI"),F=n("dz01"),L=n("V18M"),D=n("Lev8"),U=n("bPB8"),B=n("nNoG"),q=n("RYr5"),H=n("kme9"),W=n("NYva"),G=n("4M+g"),K=n("6kok"),V=n("2jER"),z=n("WeBd"),Y=n("BA81"),Q=new B.b("app_space"),X=(h.b.string.isRequired,h.b.string,h.b.number,h.b.func.isRequired,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.func,h.b.func,{tab:void 0,badgeCount:0,isEnabled:!1,isAppHomeStateLoading:!1,isHomeEnabled:!1,isMessagesEnabled:!0,callAppHomeOpenEventByChannelId:d.a,clogDMOpen:d.a}),J=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleTabChange=n.handleTabChange.bind(n),n.focus=n.focus.bind(n),n.tabsRef=m.a.createRef(),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.maybeRedirectToNewTab()}},{key:"componentDidUpdate",value:function(e){(!this.props.isAppHomeStateLoading&&e.isAppHomeStateLoading||this.props.channelId!==e.channelId)&&this.maybeRedirectToNewTab()}},{key:"setTabId",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).shouldReplaceState,n=this.props,a=n.tab,r=n.channelId;a!==e&&("messages"!==e?this.props.setTab({tabId:e,channelId:r,shouldReplaceState:t}):this.props.setTab({channelId:r,shouldReplaceState:t}))}},{key:"getValidTabs",value:function(){var e=this.props,t=e.isEnabled,n=e.badgeCount;return Object(U.a)([this.props.isHomeEnabled?{id:R.b.APP,title:t?Q.t("Home"):"Home",content:m.a.createElement(p.Fragment,null),"data-qa":"home"}:null,this.props.isMessagesEnabled?{id:R.b.MESSAGES,title:m.a.createElement("span",null,Q.t("Messages"),n?m.a.createElement(z.b,{className:"p-classic_nav__model__title__name__tabs__badge",count:n,style:z.a.red}):null),content:m.a.createElement(p.Fragment,null),"data-qa":"messages"}:null,{id:R.b.ABOUT,title:Q.t("About"),content:m.a.createElement(p.Fragment,null),"data-qa":"about"}])}},{key:"dispatchAppHomeOpenEvent",value:function(e){var t=this.props.channelId,n=e||"messages";return"app"===n&&(n="home"),this.props.callAppHomeOpenEventByChannelId({channelId:t,appHomeSection:n})}},{key:"handleTabChange",value:function(e){this.setTabId(e),this.dispatchAppHomeOpenEvent(e)}},{key:"currentTabIsValid",value:function(){var e=this.props.tab;return!!this.getValidTabs().find(function(t){return t.id===e})}},{key:"maybeRedirectToNewTab",value:function(){var e=this.props,t=e.channelId,n=e.isEnabled,a=e.isAppHomeStateLoading;if(n&&!a){var r=this.props.tab;this.currentTabIsValid()||(r=this.getValidTabs()[0].id,this.setTabId(r,{shouldReplaceState:!0})),this.props.clogDMOpen({channelId:t,tabId:r}),this.dispatchAppHomeOpenEvent(r)}}},{key:"focus",value:function(){this.tabsRef&&this.tabsRef.current.focus()}},{key:"render",value:function(){var e=this.props,t=e.tab,n=e.isEnabled,a=e.isAppHomeStateLoading;if(!n||a)return null;var r=this.getValidTabs(),i=this.currentTabIsValid()?t:void 0,o=r.map(function(e){return e.id}).join(","),s=f()("p-classic_nav__model__title__name__tabs__workspace",{"p-classic_nav__model__title__name__tabs__workspace--messages":"messages"===i});return m.a.createElement("div",{className:s},m.a.createElement(Y.a,{key:o,currentTabId:i,defaultTabId:r[0].id,tabs:r,onTabChange:this.handleTabChange,ref:this.tabsRef}))}}]),t}(p.PureComponent);J.displayName="ModelInfoAppImTabs",J.defaultProps=X;var Z=Object(V.a)(J,"ModelInfoAppImTabs",{index:1}),$=Object(g.b)(function(e){var t=Object(E.a)(e),n=N(e)||"messages",a=Object(S.a)(e)&&Object(K.kb)(e,t),r=Object(C.a)(e),i=r.isLoading,o=r.isHomeEnabled,s=r.isMessagesEnabled,l=Object(G.e)(e,t),c=s||Object(F.j)(e)&&"messages"===n||l&&Object(K.U)(l)||Object(K.y)(e,t);return{channelId:t,tab:n,badgeCount:l?Object(G.d)(e,l):0,isEnabled:a,isAppHomeStateLoading:i,isHomeEnabled:o,isMessagesEnabled:c}},function(e){return{setTab:function(){return e(W.a.apply(void 0,arguments))},callAppHomeOpenEventByChannelId:function(){return e(q.b.apply(void 0,arguments))},clogDMOpen:function(){return e(H.a.apply(void 0,arguments))}}})(Z),ee=n("m4nM"),te=n("G3Sk"),ne=n("7EGn"),ae=n("Smdl"),re=n("kOzZ"),ie=n("6tlz"),oe=n("lj19"),se=n("6/xU"),le=n("negh"),ce=n("rWF5"),ue=n("c8iJ"),de=n("Yd+W");function pe(e,t){return"completed"===e.state?"completed"===t.state?0:1:"completed"===t.state?-1:0}n("+9CW");var me=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.subtitle,a=f()("welcome-row__title",{margin_bottom_50:!!n,margin_bottom_75:!n});return m.a.createElement("div",{className:"welcome-row margin_left_125 margin_right_125 margin_top_150 margin_bottom_200"},t?m.a.createElement("div",{className:a},m.a.createElement("h3",{className:"normal"},t)):null,n?m.a.createElement("div",{className:"margin_bottom_75"},m.a.createElement("p",null,n)):null,m.a.createElement("div",null,this.props.children))}}]),t}(p.Component);me.displayName="WelcomeRow";var he=me,be=n("YEIV"),fe=n.n(be),ge=n("QOdn"),_e=n("XLFM"),ve=(n("vv9w"),n("QbLZ")),ye=n.n(ve),ke=m.a.createContext({});function Oe(){return function(e){var t=function(t){function n(){r()(this,n);var t=l()(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments));return t.renderWithConsumer=function(n){var a=n.addElementToVisibilityLogging,r=n.removeElementFromVisibilityLogging;return m.a.createElement(e,ye()({addElementToVisibilityLogging:a,removeElementFromVisibilityLogging:r},t.props))},t}return u()(n,t),o()(n,[{key:"render",value:function(){return m.a.createElement(ke.Consumer,null,this.renderWithConsumer)}}]),n}(p.Component);return t.displayName="WithVisibilityLogger",t.displayName="WithVisibilityLogger("+(e.displayName||"Component")+")",t}}var Ce=Object(g.b)(function(e){return{items:Object(ie.g)(e),isFlexpaneOpen:Object(A.j)(e),clogger:Object(re.a)({state:e}),pageViewingSessionId:Object(ie.i)(e)}})(Oe()(function(e){var t=e.isFlexpaneOpen,n=e.clogger,a=e.pageViewingSessionId,r=e.addElementToVisibilityLogging,i=e.removeElementFromVisibilityLogging,o=e.workflowTask,s=o.subtype,l=o.state,c=e.onButtonClicked,u=e.bodyCopy,d=e.buttonCopy,h=e.clogElementName,b=e.buttonQa,g=e.items,_=e.children,v=function(e,t){return e.content.workflow.tasks.sort(pe).findIndex(function(e){return e.subtype===t})+1}(g.find(function(e){return"workflow"===e.type}),s),y=Object(p.useRef)(null);Object(p.useEffect)(function(){return r({element:y.current,uiContext:{ui_element:le.UiElement["WELCOME_PLACE_ACTION_"+s.toUpperCase()],ui_properties:{element_value:l,element_type:le.ElementType.BUTTON,element_name:h}}}),function(){i(y.current)}});var k="completed"===l,O=f()("c-workflow-item-card__number bold",{complete:k}),C=k?null:m.a.createElement(_e.d,{disabled:k,type:"outline",size:"medium",onClick:function(){l!==de.c.Completed&&(c(),n.track("WELCOME_PLACE",{contexts:{ui_context:{action:le.UiAction.CLICK,ui_element:le.UiElement["WELCOME_PLACE_ACTION_"+s.toUpperCase()],ui_properties:{element_value:l,element_type:le.ElementType.BUTTON,element_name:h}},welcome_place:{welcome_session_id:a}}}))},"data-qa":b},d),E=!!_,j=E?m.a.createElement("div",{className:"c-workflow-item-card__children"},_):m.a.createElement("div",{className:"c-workflow-item-card__section"},m.a.createElement("div",{className:"full_width"},C)),S=f()("c-workflow-item-card",{complete:k,flexpaneOpen:t,hasChildren:E});return m.a.createElement("div",{className:S,ref:y},m.a.createElement("div",{className:"c-workflow-item-card__section"},m.a.createElement("div",{className:O},k?m.a.createElement("i",{"aria-hidden":"true",className:"c-icon c-icon--check-small c-icon--inline"}):v),m.a.createElement("div",null,m.a.createElement("p",null,u))),j)})),Ee=function(e,t,n){return e[t][n]},je=new B.b("welcome_place"),Se={updateActionStateAndReload:oe.i,openChannelBrowser:ge.a};var Ie=Object(g.b)(function(e){return{userHasAvailableChannels:Object(G.q)(e).length>Object(G.r)(e).length}},Se)(function(e){var t,n=e.userHasAvailableChannels,a=e.workflowTask,r=e.workflowTask,i=r.state,o=r.user_task_id,s={body:je.rt("<b>See what people are talking about</b> in your team\u2019s channels.",{note:"Incomplete state copy for fourth action step. Most important info should be bolded."}),button:je.rt("Join Channels",{note:"Button label for incomplete state of fourth step."}),tip:null},l={body:m.a.createElement("b",null,je.rt("Joined a channel",{note:"Completed state copy, bolded, no punctuation"})),button:je.rt("Completed",{note:"Button label for completed state of all tasks."}),tip:je.rt("Tip: To find more channels later \u2014 or create new ones \u2014 click on <b>Channels</b> in the sidebar. ",{note:"Completed state body copy conveying a tip about how to return to the channel browser in the future; use bolding on the word \u201cChannels\u201d."})},c=(t={},fe()(t,de.c.Pending,s),fe()(t,de.c.InProgress,s),fe()(t,de.c.Completed,l),t),u=i===de.c.Completed||n?Ee(c,i,"button"):je.t("Browse Channels",{ns:"channel_browser",fallbackHash:"f3783ed57f3ec287bdc59897500c8d674a2f1ec8"}),d=Ee(c,i,"body");return m.a.createElement(Ce,{workflowTask:a,onButtonClicked:function(){n?e.updateActionStateAndReload({userTaskId:o,state:de.c.InProgress}):e.updateActionStateAndReload({userTaskId:o,state:de.c.Completed}),e.openChannelBrowser()},buttonCopy:u,bodyCopy:d,buttonQa:"wp_join_channel_button"})}),we=n("1hAG"),Ne=new B.b("welcome_place"),Te={updateActionStateAndReload:oe.i};var Ae=Object(g.b)(function(e){return{currentTeam:Object(we.d)(e)||{name:""}}},Te)(function(e){var t,n=e.currentTeam.name,a=e.workflowTask,r=e.workflowTask,i=r.state,o=r.user_task_id;Object(p.useEffect)(function(){i!==de.c.Completed&&e.updateActionStateAndReload({userTaskId:o,state:de.c.Completed})});var s={body:Ne.rt("<b>Joined {workspaceName},</b> your team\u2019s Slack workspace",{workspaceName:n,note:"Completed state copy for first action step. Should be personalized with their workspace name but also expose them to the term \u201cworkspace.\u201d Use bolding for the most important information. Note: No punctuation at the end."}),button:Ne.rt("Completed",{note:"Button label for completed state of all tasks."}),tip:null},l={body:Ne.rt("<b>Joined {workspaceName},</b> your team\u2019s Slack workspace",{workspaceName:n,note:"Completed state copy for first action step. Should be personalized with their workspace name but also expose them to the term \u201cworkspace.\u201d Use bolding for the most important information. Note: No punctuation at the end."}),button:Ne.rt("Completed",{note:"Button label for completed state of all tasks."}),tip:null},c=(t={},fe()(t,de.c.Pending,s),fe()(t,de.c.InProgress,s),fe()(t,de.c.Completed,l),t),u=Ee(c,i,"button"),h=Ee(c,i,"body");return m.a.createElement(Ce,{workflowTask:a,onButtonClicked:d.a,buttonCopy:u,bodyCopy:h,buttonQa:"wp_see_welcome_place_button"})}),Re=n("r31G"),Pe=n("GaFD"),Me=n("Evpj"),xe=new B.b("welcome_place"),Fe={updateActionStateAndReload:oe.i,promptForPermissionAndSetPref:Re.c};var Le=Object(g.b)(function(e){return{currentTeam:Object(we.d)(e)||{name:""}}},Fe)(function(e){var t,n=e.workflowTask,a=e.workflowTask,r=a.state,i=a.user_task_id,o=Object(Me.a)();Object(p.useEffect)(function(){r!==de.c.Completed&&Object(Pe.e)()&&e.updateActionStateAndReload({userTaskId:i,state:de.c.Completed})});var s={body:xe.rt("<b>Get notified</b> when a teammate sends you a message or mentions your name.",{note:"Incomplete state copy for third action step. Most important info should be bolded."}),button:xe.rt("Turn On Notifications",{note:"Button label for incomplete state of third step. This should not convey customization, just enablement."}),tip:null},l={body:"denied"===o?xe.rt("You've disallowed notifications in your browser. You'll need to open your browser preferences to change that.",{note:"Completed state copy, bolded, no punctuation",fallbackHash:"1a4db9df0870ea9d3249727659a462c79ca89790",fallbackHashNs:"prefs"}):m.a.createElement("b",null,xe.rt("Turned on notifications",{note:"Completed state copy, bolded, no punctuation"})),button:xe.rt("Completed",{note:"Button label for completed state of all tasks."}),tip:null},c=(t={},fe()(t,de.c.Pending,s),fe()(t,de.c.InProgress,s),fe()(t,de.c.Completed,l),t),u="default"===o,d=u?de.c.InProgress:r,h=Ee(c,d,"button"),b=Ee(c,d,"body");return"na"!==o?m.a.createElement(Ce,{workflowTask:ye()(ye()({},n),{state:u?de.c.InProgress:n.state}),onButtonClicked:function(){e.updateActionStateAndReload({userTaskId:i,state:de.c.InProgress}),e.promptForPermissionAndSetPref().then(function(){e.updateActionStateAndReload({userTaskId:i,state:de.c.Completed})})},buttonCopy:h,bodyCopy:b,buttonQa:"wp_enable_notif_button"}):null}),De=n("5mKg"),Ue=new B.b("welcome_place"),Be=fe()({},de.a.Gdrive,{name:"Google Drive",appId:ce.k?"A061CBSHF":"A6NL8MJ6Q"}),qe=ce.k?"/apps/category/At06175UHW-file-management":"/apps/category/At0EFRCDPW-file-management",He="utm_medium=in-prod&utm_source=in-prod&utm_campaign=d_in-prod_in-prod_all__welcome",We={updateActionStateAndReload:oe.i,openAuthenticatedUrlInBrowser:De.R};var Ge=Object(g.b)(function(e){var t=Object(ie.b)(e),n=t.auth_url,a=t.type,r=t.is_installed_on_team;return{team:Object(we.d)(e),fileManagementAuthUrl:n,fileManagementType:a,isFileManagementAppInstalledOnTeam:r}},We)(function(e){var t,n=e.workflowTask,a=e.workflowTask,r=a.state,i=a.user_task_id,o=e.team,s=e.fileManagementType,l=e.fileManagementAuthUrl,c=e.isFileManagementAppInstalledOnTeam,u=void 0,d=void 0,p=Be[s];if(p){var h=p.name;u={body:Ue.rt("<b>Connect to {fileManagementAppName}</b> to easily share and collaborate on files with your team.",{fileManagementAppName:h,note:"Incomplete state copy for file management step. Most important info should be bolded. fileManagementAppName refers to a file management integration, such as Google Drive or OneDrive"}),button:Ue.rt("Connect to {fileManagementAppName}",{fileManagementAppName:h,note:"Button label for incomplete state of file management step. fileManagementAppName refers to a file management integration, such as Google Drive or OneDrive."}),tip:null},d={body:m.a.createElement("b",null,Ue.rt("Connected to {fileManagementAppName}",{fileManagementAppName:h,note:"Completed state copy, bolded, no punctuation"})),button:Ue.rt("Completed",{note:"Button label for completed state of all tasks."}),tip:Ue.rt("Tip: To share or collaborate on {fileManagementAppName} files without leaving Slack, click on the <b>paperclip icon</b> next to the message field.",{fileManagementAppName:h,note:'Completed state body copy conveying a tip about how to use the file management integration in Slack; use bolding on the words "paperclip icon". fileManagementAppName refers to a file management integration, such as Google Drive or OneDrive.'})}}else u={body:Ue.rt("<b>Connect your file management tools</b> to easily share and collaborate on files with your team.",{note:"Incomplete state copy for file management step when user is not associated with a GSuite/Office 365 enterprise suite. Most important info should be bolded."}),button:Ue.rt("Browse Apps",{note:"Button label for incomplete state of file management step. Links to file management section of the App Directory."}),tip:null},d={body:m.a.createElement("b",null,Ue.rt("Browsed the App Directory",{note:"Completed state copy, bolded, no punctuation"})),button:Ue.rt("Completed",{note:"Button label for completed state of all tasks."}),tip:null};var b=(t={},fe()(t,de.c.Pending,u),fe()(t,de.c.InProgress,u),fe()(t,de.c.Completed,d),t),f=Ee(b,r,"button"),g=Ee(b,r,"body");return m.a.createElement(Ce,{workflowTask:n,onButtonClicked:function(){p?(l&&c?window.open(l):e.openAuthenticatedUrlInBrowser(o,"apps/"+p.appId+"?"+He),e.updateActionStateAndReload({userTaskId:i,state:de.c.InProgress})):(e.openAuthenticatedUrlInBrowser(o,qe+"?"+He),e.updateActionStateAndReload({userTaskId:i,state:de.c.Completed}))},buttonCopy:f,bodyCopy:g,clogElementName:s,buttonQa:"wp_file_management_button"})}),Ke=n("EJiy"),Ve=n.n(Ke);function ze(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("string"!=typeof e)throw new Error("String required for capitalization; type "+(void 0===e?"undefined":Ve()(e))+" given");var n=e.slice(1);return t&&(n=n.toLowerCase()),""+e.charAt(0).toUpperCase()+n}var Ye=new B.b("welcome_place"),Qe={updateActionStateAndReload:oe.i};var Xe=Object(g.b)(function(){return{}},Qe)(function(e){var t,n=e.workflowTask,a=e.workflowTask,r=a.state,i=a.user_task_id;Object(p.useEffect)(function(){Object(ce.u)()&&r!==de.c.Completed&&e.updateActionStateAndReload({userTaskId:i,state:de.c.Completed})});var o=Object(ce.i)(),s={body:Ye.rt("<b>Download the desktop app</b> to get back to Slack swiftly",{note:"Completed state copy for first action step. Use bolding for the most important information. Note: No punctuation at the end."}),button:Ye.rt("Get Slack for {operatingSystem}",{note:"Button label for pending state of the desktop app download card. operatingSystem refers to the current operating system that the user is on (Mac, Windows, or Linux).",operatingSystem:ze(o)}),tip:null},l={body:Ye.rt("<b>Downloaded the desktop app</b>",{note:"Completed state copy for first action step. Use bolding for the most important information. Note: No punctuation at the end."}),button:Ye.rt("Completed",{note:"Button label for completed state of all tasks."}),tip:null},c=(t={},fe()(t,de.c.Pending,s),fe()(t,de.c.InProgress,s),fe()(t,de.c.Completed,l),t),u=Ee(c,r,"button"),d=Ee(c,r,"body");return m.a.createElement(Ce,{workflowTask:n,onButtonClicked:function(){r===de.c.Pending&&e.updateActionStateAndReload({userTaskId:i,state:de.c.InProgress}),window.open("https://slack.com/get?utm_medium=in-prod&utm_source=in-prod&utm_campaign=d_in-prod_in-prod_all__welcome")},buttonCopy:u,bodyCopy:d,buttonQa:"wp_desktop_app_button"})}),Je=n("U/ze"),Ze=n("fYfO"),$e=n("DTfP"),et=n("hOQf"),tt=n("8dKT"),nt=Object(Je.b)(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,a=Object($e.f)(e,t);return{slice:a,messages:(a?a.timestamps:[]).map(function(n){return Object(Ze.a)(e,t,n)}).filter(function(t){return!(Object(tt.a)(t.subtype)||Object(et.bb)(t)||Object(et.fb)(t)||Object(et.X)(e,t)||Object(et.wb)(t)||Object(et.sb)(t)||Object(et.qb)(t))}).slice(-1*Math.abs(n))}});nt.meta={name:"getLastHumanMessages",key:"channelHistoryStoreGetLastChannelMessagesGetLastHumanMessages"};var at=Object(Je.b)(function(e,t){return nt(e,t,1).messages.length>0});at.meta={name:"doesChannelHaveMessages",key:"channelHistoryStoreGetLastChannelMessagesDoesChannelHaveMessages"};var rt=n("sk9p"),it=n.n(rt),ot=n("bcDH"),st=n("aXcD"),lt=n("a+Oh"),ct=n("OF9j"),ut=n("GxtX"),dt=n("BeL+"),pt=n("lE2N"),mt=n("yIs4"),ht=n("uKXT"),bt=n("ZP0B"),ft=n("zmn3"),gt=n("XfeM"),_t=n("JHHQ"),vt=n("7tsZ"),yt=n("fAc/"),kt=n("BUzq"),Ot=n("PbVc"),Ct=n("yHhI"),Et=n("ZAxE"),jt=n("n74X"),St=n("ZS+m"),It=n("oTSI"),wt=n("btvA"),Nt=n("vhAc"),Tt=function(e,t){return function(e,t){return Object(Ct.a)({teamId:e}).info("PLATFORM-CHANNEL-ACTIONS","fetching channel actions for channel "+t),Object(_.dispatchForTeamId)(e,Object(Nt.b)({resourceType:"channel",resourceId:t})).then(function(e){return e.map(function(e){return{appId:Object(ne.a)(e,"app.app_id"),id:Object(ne.a)(e,"action_id"),name:Object(ne.a)(e,"name"),description:Object(ne.a)(e,"description"),type:Object(ne.a)(e,"type"),app:Object(ne.a)(e,"app"),channelId:t}})})}(e,t).then(function(n){At().markObjectsAsFresh(e,[t]),Object(_.dispatchForTeamId)(e,Object(vt.a)({channelId:t,actions:n}))})},At=Object(It.a)(function(){return new wt.b({fetch:function(e,t){return Promise.map(t,function(t){return Tt(e,t)})},isEnabled:function(){return!0}})}),Rt=Object(gt.b)("Mark actions for channelIds as stale",function(e,t,n){var a=At(),r=t(),i=Object(v.b)(r);a.markObjectsAsStale(i,n)});Rt.meta={name:"markChannelActionsAsStaleForChannels",key:"channelActionsStoreConditionalFetchingMarkChannelActionsAsStaleForChannels",description:"Mark actions for channelIds as stale"},Rt.propTypes=h.b.arrayOf(h.b.string).isRequired;var Pt=function(e,t){At().maybeRefetch(e,t)},Mt=Object(Je.b)(function(e){return e&&e.channelActions||{}});Mt.meta={name:"selectChannelActionsState",key:"channelActionsStoreSelectorsSelectChannelActionsState"};var xt=Object(St.a)(Mt,function(e,t){return t},function(e,t){return e.actions[t]||null}),Ft=Object(St.a)(Mt,function(e,t){return t},function(e,t){var n=e.actionIdsByChannelId[t];return Array.isArray(n)?n:[]}),Lt=Object(St.a)(Ft,Mt,function(e,t){var n=t.actions;return e?e.map(function(e){return n[e]}).filter(function(e){return void 0!==e}):[]}),Dt=Object(St.a)(Mt,function(e,t){return t},function(e,t){var n=e.actionCountByChannelId;return n&&n[t]||0}),Ut=Object(St.a)(v.b,Dt,Lt,function(e,t){return t},function(e,t,n,a){return t>0&&Pt(e,a),n}),Bt=Object(gt.b)("Helper for handling history",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.oldest,r=n.latest,i=n.channelId,o=n.msgs,s=n.hasMore,l=n.pinCount,c=n.channelActionsCount,u=n.isLimited,d=n.deleted,p=Object(ft.a)(o,"ts");(e(a||r?Object(_t.a)({msgs:o,channelId:i,oldest:a,latest:r,hasMore:s,isLimited:u,loading:!1,deleted:d}):Object(_t.a)({msgs:o,channelId:i,isLimited:u,latest:Object(bt.a)(p),oldest:Object(ht.a)(p),hasMore:{hasMoreStart:s,hasMoreEnd:!1},loading:!1,deleted:d})),Object(mt.a)(l)&&e(Object(kt.r)({channelId:i,count:l})),Object(mt.a)(c))&&(Dt(t(),i)!==c&&(e(Rt([i])),e(Object(vt.d)({channelId:i,count:c}))))});Bt.meta={name:"historyHandler",key:"messagePaneStoreFetchHistoryHistoryHandler",description:"Helper for handling history"},Bt.propTypes={oldest:h.b.string,latest:h.b.string,channelId:h.b.string,msgs:h.b.array,hasMore:h.b.oneOfType([h.b.object,h.b.bool]),pinCount:h.b.number,channelActionsCount:h.b.number,isLimited:h.b.bool,deleted:h.b.array};var qt=Object(gt.b)("Fetch conversation history",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.channelId,r=n.oldest,i=void 0===r?null:r,o=n.latest,s=void 0===o?null:o,l=n.reason,c=void 0===l?"message-pane-store/fetchHistory":l;if(!a)return!1;var u=t();if(Object(yt.d)(u,a))return!1;if(Object(Ct.a)({getState:t}).info("HISTORY-FETCH","Fetching history for message pane: "+a+" oldest: "+i+" latest: "+s),s&&i){var d=e(Object(Et.b)({channelId:a,oldest:null,latest:s,reason:c})),p=e(Object(Et.b)({channelId:a,oldest:i,latest:null,reason:c})),m=Promise.all([d,p]).then(function(t){var n=t[0],r=n.msgs,o=n.hasMore,l=n.isLimited,c=n.pinCount,u=n.channelActionsCount,d=n.deleted,p=t[1],m=p.msgs,h=p.hasMore,b=p.deleted,f=Object(pt.a)(r.concat(m),"ts"),g=Object(dt.a)(Object(ut.a)(d,b)),_=Object(ft.a)(f,"ts");e(Bt({channelId:a,msgs:f,isLimited:l,pinCount:c,channelActionsCount:u,hasMore:{hasMoreStart:o,hasMoreEnd:h},oldest:Object(ht.a)([i,Object(ht.a)(_)]),latest:Object(bt.a)([s,Object(bt.a)(_)]),deleted:g}))}).catch(function(t){Object(jt.d)(t,"Failed to fetch history for "+a,"message_pane_history_fetch_fail"),e(Object(yt.c)({channelId:a}))});return e(Object(yt.f)({channelId:a,loadingOlder:!0,request:m})),m}s&&e(Object(Ot.d)());var h=e(Object(Et.b)({channelId:a,oldest:i,latest:s,reason:c})).then(function(t){e(Bt(ye()({},t,{oldest:i,latest:s,channelId:a})))}).catch(function(t){Object(jt.d)(t,"Failed to fetch history for "+a,"message_pane_history_fetch_fail"),e(Object(yt.c)({channelId:a}))});return e(Object(yt.f)({channelId:a,loadingOlder:!!s,request:h})),h});qt.meta={name:"fetchHistory",key:"messagePaneStoreFetchHistoryFetchHistory",description:"Fetch conversation history"},qt.propTypes={channelId:h.b.string.isRequired,oldest:h.b.string,latest:h.b.string,reason:h.b.string};var Ht=qt,Wt=n("Vfgr"),Gt=n("hbEN"),Kt=n("tn36"),Vt=n("mM05"),zt=n.n(Vt),Yt=n("oKz6"),Qt=n("dxEi"),Xt=n("quKg"),Jt=n("rZal"),Zt=n("XL7r"),$t=n("7ob2"),en=n("ns4K"),tn=n("dhvi"),nn=n("U3Q0"),an=n("YPPF"),rn=n("/Q0P"),on=n("Ggy7"),sn=m.a.lazy(function(){return Promise.resolve().then(n.bind(null,"6EwF"))}),ln=Object(gt.b)("Opens the snippet dialog",function(e,t,n){var a=n.initialText.replace(/\u2018|\u2019/g,"'").replace(/\u201c|\u201d/g,'"');Object(ae.a)()?e(Object(rn.a)({element:m.a.createElement(sn,ye()({},n,{initialSnippetText:a,initialText:"",resetSnippetText:a,resetChannelId:n.initialChannelId}))})):Object(on.a)(a,n.fromPrompt)});ln.meta={name:"openSnippetDialog",key:"actionsOpenSnippetDialogOpenSnippetDialog",description:"Opens the snippet dialog"},ln.propTypes={initialText:h.b.string,initialChannelId:h.b.string.isRequired,threadTs:h.b.string,viewContext:h.b.string};var cn=ln,un=n("Dpde"),dn=n("Z7Ay"),pn=0,mn=0,hn=!0,bn=Object(Ct.b)({label:"HISTORY-NAVIGATION"}),fn=function(){hn?(bn.info("Adding route to the history stack"),mn===pn?(mn+=1,pn+=1):pn=mn+=1):hn=!0},gn=function(){return 1===mn},_n=function(){return mn===pn};Object(dn.a)("history",{getHistoryLength:function(){return pn},getHistoryIndex:function(){return mn}});var vn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.fromKeyboardShortcut,a=t.elementName;Object(re.a)({state:e}).track(le.EventId.HISTORY_NAVIGATION,{contexts:{ui_context:{action:n?le.UiAction.KEYDOWN:le.UiAction.CLICK,ui_properties:{element_type:le.ElementType.BUTTON,element_name:a}}}})},yn=Object(gt.b)("Go back in history",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.event,r=n.fromKeyboardShortcut,i=void 0!==r&&r;a&&a.preventDefault();var o=t(),s=Object(Ct.a)({state:o,label:"HISTORY-NAVIGATION"});if(Object(un.b)(o)){if(gn())return void s.debug("This is the beginning of the history stack \u2b05\ufe0f");s.debug("Moving back in history"),window.history.back(),1!==mn&&(bn.info("Decrementing the users current position in the history stack"),mn-=1,hn=!1),vn(o,{fromKeyboardShortcut:i,elementName:"back"})}else s.debug("Moving back in history"),window.history.back(),vn(o,{fromKeyboardShortcut:i,elementName:"back"})});yn.meta={name:"triggerNavigateBack",key:"actionsKeyCommandsTriggerHistoryNavigationTriggerNavigateBack",description:"Go back in history"},yn.propTypes={event:h.b.object,fromKeyboardShortcut:h.b.bool};var kn=Object(gt.b)("Go forward in history",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.event,r=n.fromKeyboardShortcut,i=void 0!==r&&r;a&&a.preventDefault();var o=t(),s=Object(Ct.a)({state:o,label:"HISTORY-NAVIGATION"});if(Object(un.b)(o)){if(_n())return void s.debug("This is the end of the history stack \u27a1\ufe0f");s.debug("Moving forward in history"),window.history.forward(),mn!==pn&&(bn.info("Incrementing the users current position in the history stack"),mn+=1,hn=!1),vn(o,{fromKeyboardShortcut:i,elementName:"forward"})}else s.debug("Moving forward in history"),window.history.forward(),vn(o,{fromKeyboardShortcut:i,elementName:"forward"})});kn.meta={name:"triggerNavigateForward",key:"actionsKeyCommandsTriggerHistoryNavigationTriggerNavigateForward",description:"Go forward in history"},kn.propTypes={event:h.b.object,fromKeyboardShortcut:h.b.bool};var On=n("hOGb"),Cn=n("qafc"),En=n("ynxK"),jn=n("HvGc"),Sn=new B.b("message_navigation_shortcuts"),In=(h.b.func,h.b.bool,{showKeyboardShortcuts:d.a,featureMessageNavigationShortcuts:!1}),wn=function(e){function t(){r()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.openShortcutsFlexpane=e.openShortcutsFlexpane.bind(e),e}return u()(t,e),o()(t,[{key:"openShortcutsFlexpane",value:function(e){this.props.showKeyboardShortcuts({focusKey:e&&"keydown"===e.type?"keyboard_shortcuts":null})}},{key:"render",value:function(){var e=this;if(!this.props.featureMessageNavigationShortcuts)return null;var t=Sn.rt("Press {cmd_key} {up_key} to edit your last message, and use {up_key} to browse all messages and quickly act on them using <shortcuts>one of the many shortcuts</shortcuts>",{cmd_key:m.a.createElement(On.a,{label:Object(ce.p)()?"Cmd":"Ctrl",slim:!0}),up_key:m.a.createElement(On.a,{label:"\u2191",slim:!0})},function(t){var n=t.text,a=t.key;return m.a.createElement(En.a,{key:a,onClick:e.openShortcutsFlexpane},n)});return m.a.createElement(Cn.b,{fadeDelay:5e3},m.a.createElement("span",null,t))}}]),t}(p.PureComponent);wn.displayName="MessageNavigationEducationalToast",wn.defaultProps=In;var Nn=Object(g.b)(function(e){return{featureMessageNavigationShortcuts:Object(y.m)(e,"feature_message_navigation_shortcuts")}},function(e){return{showKeyboardShortcuts:function(){return e(jn.h.apply(void 0,arguments))}}})(wn),Tn=n("7dYf"),An=Object(gt.b)("Show contextual shortcuts navigation toast",function(e,t){var n=t(),a=Object(y.m)(n,"feature_message_navigation_shortcuts"),r=Object(Zt.j)(n,"seen_message_navigation_educational_toast");a&&!r&&(e(Object(en.c)({element:m.a.createElement(Nn)})),e(Object(Tn.f)({pref:"seen_message_navigation_educational_toast",value:!0})))});An.meta={name:"maybeShowMessageNavigationEducationalToast",key:"actionsMaybeShowMessageNavigationEducationalToastMaybeShowMessageNavigationEducationalToast",description:"Show contextual shortcuts navigation toast"};var Rn=An,Pn=n("2HDu"),Mn=n("FghR"),xn=new B.b("coachmarks"),Fn={anchorElement:h.b.instanceOf(Element),setTractorFilesCoachmarkVisibility:h.b.func},Ln={anchorElement:null,setTractorFilesCoachmarkVisibility:d.a},Dn=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.setTractorFilesCoachmarkVisibility,n=e.anchorElement;return m.a.createElement("div",{className:"position_relative"},m.a.createElement(Mn.a,{anchorElement:n,"data-qa":"coachmark",isOpen:!0,arrowPosition:80,orientation:"right",offsetY:-40,closeCoachmark:function(){return t(!1)},coachmarkClassNames:"c-message-pane__c-coachmark"},m.a.createElement("h3",null,xn.t("Share a file in the channel")),m.a.createElement("p",null,xn.rt('Click the <i class="c-icon c-icon--paperclip"></i> paperclip icon next to the message input box to <strong>add a file from your computer</strong>.'))))}}]),t}(Mn.a);Dn.displayName="TractorShareFilesCoachmark";var Un=Dn;Dn.propTypes=Fn,Dn.defaultProps=Ln;var Bn=n("eglI"),qn=n("9PC1"),Hn=n("oxKW"),Wn=n("pWPO"),Gn=n("icQl"),Kn=n("NAkb"),Vn=n("cnLP"),zn=n("Pe1S"),Yn=new B.b("offline_mode"),Qn=new B.b("msg_input"),Xn=(h.b.string,h.b.string,h.b.object,h.b.string,h.b.string,h.b.string,h.b.func,h.b.string,h.b.object,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.object.isRequired,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.number,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.object,h.b.number,h.b.func,h.b.func,h.b.func,h.b.func,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.func,h.b.func,h.b.object.isRequired,h.b.object.isRequired,h.b.number,h.b.bool,h.b.object,h.b.func,h.b.func,h.b.func,h.b.bool,h.b.func,h.b.oneOf(["light","dark"]),h.b.func,h.b.func,h.b.bool,h.b.func,h.b.bool,h.b.object,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.string,{channelId:void 0,teamId:void 0,legacyChannel:void 0,threadTs:void 0,viewContext:void 0,placeholder:void 0,sendMessage:function(){return Promise.resolve()},className:void 0,autocompleteProps:void 0,enableEmojiButton:!1,enableFileButton:!0,enableSnippetCreation:!0,enableMentionButton:!1,enableComposerButton:!1,enableSendButton:!1,enableBroadcastKeywords:!0,enableJumbomoji:!1,enableExpandButton:!1,arrowHistory:!1,useSendButton:!1,isDisabled:!1,isSendButtonDisabled:!0,isExpanded:!1,maxLines:void 0,useLegacyCreate:!1,useLegacyDrafts:!1,focusOnMount:!1,focusOnPaste:!1,draft:void 0,draftDelay:1e3,setChannelDraft:d.a,clearChannelDraft:d.a,editLastMessage:d.a,openSnippetDialog:d.a,featureOfflineMode:!1,featureSonicInputs:!1,clientToolBar:!1,featureWysiwygComposer:!1,wasRecentlyOnline:!1,isClientOnline:!1,onTextChange:d.a,onSelectionChange:d.a,onExpand:d.a,onDraftUpdate:d.a,onFocus:d.a,onBlur:d.a,enqueueToast:d.a,openModal:d.a,maxLength:void 0,showFocusOutline:!1,additionalDraftContent:void 0,onDraftRestore:d.a,triggerNavigateBack:d.a,triggerNavigateForward:d.a,shouldShowTractorFilesCoachmark:!1,setTractorFilesCoachmarkVisibility:d.a,ariaDescribedBy:void 0,clientTheme:"light",isComposerPage:!1,composerDraft:void 0,onUpArrow:d.a,onDownArrow:d.a,featureMessageNavigationShortcuts:!1,maybeShowMessageNavigationEducationalToast:d.a}),Jn=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["onEnter","onFileMenuClose","onFileMenuOpen","onLeftWhenEmpty","onPlusMenuShortcut","onCmdLeftWhenEmpty","onCmdRightWhenEmpty","onPasteLimit","onTextChange","onSelectionChange","onUpArrow","openSnippetDialog","renderInput","renderModernAutocomplete"]),n.state={isPlusMenuOpen:!1,forcePlusMenuOpen:!1},n.getComputedModules=Object(Gn.a)(function(e,t,n,a){if(!n&&!a)return e;var r=Object(zn.a)({featureWysiwygComposer:a});return ye()({},e,{composer:ye()({},r,{teamId:t}),slacklink:a&&{convertImages:!1,disableLinksWithLabels:!0},slackmarkdown:a&&{convertHeaders:!1,convertHorizontalRule:!1}})}),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.handlePropChanges({isMount:!0}),this.maybeFocusInput()}},{key:"componentDidUpdate",value:function(e){this.handlePropChanges({prevProps:e}),this.maybeFocusInput(e)}},{key:"componentWillUnmount",value:function(){this.updateDraftThrottled&&this.updateDraftThrottled.flush()}},{key:"onEnter",value:function(e){var t=e.metaKey,n=e.ctrlKey,a=e.shiftKey,r=this.props,i=r.sendMessage,o=r.useLegacyDrafts,s=r.featureOfflineMode,l=r.featureSonicInputs,c=r.wasRecentlyOnline,u=r.enableSnippetCreation,d=this.getInputRef();if(!d)return!1;if(d.isEmpty()&&!a)return!1;if(o||this.updateDraftThrottled.cancel(),s&&!c){var p=Yn;return this.props.enqueueToast({element:m.a.createElement(Cn.b,{ariaAssertive:!0,position:"top-right",icon:"cloud-offline-small"},m.a.createElement("span",null,m.a.createElement("strong",null,p.rt("No connection."))," ",p.rt("You\u2019ll be able to send messages as soon as you\u2019re back online.")))}),!1}return l&&u&&(Object(ce.p)()&&t&&a||!Object(ce.p)()&&n&&a)?(this.openSnippetDialog(),!1):(i(),!1)}},{key:"onUpArrow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.props,n=t.arrowHistory,a=t.featureOfflineMode,r=t.isClientOnline,i=t.featureMessageNavigationShortcuts;if(Object(ae.a)()||!n||e){var o=this.getInputRef();if(o&&o.isEmpty())if(!i||i&&e){if(a&&!r)return;this.props.editLastMessage()}else i&&this.props.maybeShowMessageNavigationEducationalToast(),this.props.onUpArrow(e)}}},{key:"onLeftWhenEmpty",value:function(){this.setState(function(){return{isPlusMenuOpen:!0,forcePlusMenuOpen:!0}})}},{key:"onPlusMenuShortcut",value:function(){this.setState(function(){return{isPlusMenuOpen:!0,forcePlusMenuOpen:!0}})}},{key:"onCmdLeftWhenEmpty",value:function(){this.props.logger.info("MESSAGE-INPUT","onCmdLeftWhenEmpty"),this.props.triggerNavigateBack({fromKeyboardShortcut:!0})}},{key:"onCmdRightWhenEmpty",value:function(){this.props.logger.info("MESSAGE-INPUT","onCmdRightWhenEmpty"),this.props.triggerNavigateForward({fromKeyboardShortcut:!0})}},{key:"onTextChange",value:function(){var e=this.props,t=e.onTextChange,n=e.useLegacyDrafts,a=e.featureWysiwygComposer,r=this.getInputRef();n||this.updateOrClearDraft({inputRef:r}),t(r.value(),a?r.getContents().contents:[])}},{key:"onSelectionChange",value:function(e){var t=this.props.onSelectionChange;t(e)}},{key:"onDraftUpdate",value:function(){var e=this.props.onDraftUpdate,t=this.getInputRef();e({ops:t.getContents().contents,range:t.getSelection()})}},{key:"onFileMenuOpen",value:function(){this.setState(function(){return{isPlusMenuOpen:!0}});this.props.clogger.track("PFP_ACTION",{contexts:{growth:{action:"click",trigger:"plus_menu_button"}}})}},{key:"onFileMenuClose",value:function(){this.setState(function(){return{isPlusMenuOpen:!1,forcePlusMenuOpen:!1}})}},{key:"onPasteLimit",value:function(e,t){this.props.openModal({element:this.renderPasteLimitDialog(t),isStackable:!0})}},{key:"getInputRef",value:function(){var e=this.props.forwardedRef;return e.current.getWrappedInstance?e.current.getWrappedInstance():e.current}},{key:"setCursor",value:function(){var e;(e=this.getInputRef()).setCursor.apply(e,arguments)}},{key:"setCursorAtEnd",value:function(){var e;(e=this.getInputRef()).setCursorAtEnd.apply(e,arguments)}},{key:"handlePropChanges",value:function(e){var t=e.prevProps,n=void 0===t?{}:t,a=e.isMount,r=this.props,i=r.channelId,o=r.threadTs,s=r.composerDraft,l=r.draft,c=r.draftDelay,u=r.logger,d=r.useLegacyDrafts,p=r.onDraftRestore,m=r.additionalDraftContent;if(!d){if(n.draftDelay!==c&&(this.updateDraftThrottled=Object(Gt.a)(this.updateDraft,c)),!a&&!d&&n.additionalDraftContent!==m){var h=this.getInputRef();this.updateOrClearDraft({inputRef:h})}if(s&&s.id&&(!n.composerDraft||n.composerDraft.id!==s.id)){this.updateDraftThrottled.flush();var b=this.getInputRef();b.value({contents:s.ops},{isSilent:!0}),b.clearHistory()}if(!s&&(n.channelId!==i||n.threadTs!==o)){this.updateDraftThrottled.flush();var f=this.getInputRef();i&&(l?(u.debug("DRAFT","Restoring draft to "+i),l.ops&&f.value({contents:l.ops},{isSilent:!0}),l.range&&f.setCursor(l.range.index,l.range.length),p(l)):(u.debug("DRAFT","No draft, clearing input for "+i),f.clear())),f.clearHistory()}}}},{key:"focus",value:function(){var e=this.props.logger,t=this.getInputRef();try{t.focus()}catch(t){e.error("MESSAGE-INPUT","maybeFocusInput caught error: "+(t&&t.message)),t.stack&&e.error("MESSAGE-INPUT",t.stack)}}},{key:"maybeFocusInput",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.props,n=t.channelId,a=t.threadTs,r=t.focusOnMount;r&&((r!==e.focusOnMount||n&&!a&&e.channelId!==n||a&&e.threadTs!==a)&&this.focus())}},{key:"openSnippetDialog",value:function(e){var t=this.props,n=t.channelId,a=t.threadTs,r=t.viewContext,i=t.featureWysiwygComposer,o=this.getInputRef(),s=void 0,l=void 0;return e&&e.ops?(l={contents:e.ops},s=Object(Wn.a)(l)):(s=o?o.displayValue():"",l=i&&o?o.getContents():void 0),this.props.openSnippetDialog({initialText:s,initialContents:l,initialChannelId:n,threadTs:a,viewContext:r}),e||o.value(""),!1}},{key:"updateOrClearDraft",value:function(e){var t=e.inputRef,n=this.props,a=n.channelId,r=n.threadTs,i=n.logger,o=n.useLegacyDrafts;if(n.isComposerPage)this.updateDraftThrottled();else if(a&&t&&!o){var s=t.getContents();if(t.getLength()&&Object(Wt.a)(Object(qn.o)(s.contents,{embedReplacement:"a"})).length){var l=new zt.a(s.contents);i.debug("DRAFT","Updating draft in "+a),this.updateDraftThrottled({channelId:a,threadTs:r,delta:l})}else i.debug("DRAFT","Clearing draft for "+a),this.updateDraftThrottled({channelId:a,threadTs:r})}}},{key:"updateDraft",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channelId,n=e.threadTs,a=e.delta,r=this.props,i=r.additionalDraftContent;if(r.isComposerPage)this.onDraftUpdate();else if(a){var o=this.getInputRef();this.props.setChannelDraft(ye()({channelId:t,threadTs:n,delta:a,range:o.getSelection()},i))}else this.props.clearChannelDraft({channelId:t,threadTs:n})}},{key:"renderPasteLimitDialog",value:function(e){var t=this,n=Qn;return m.a.createElement(nn.b,{title:n.t("That\u2019s a bit too long to paste"),cancelText:n.t("Create a snippet"),goButtonText:n.t("OK"),onCancel:function(){return t.openSnippetDialog(e)},showCancelButton:!0},n.rt("To keep things running smoothly, there\u2019s a limit on the number of characters you can paste into Slack. If you\u2019d like you could <b>create a snippet</b> instead."))}},{key:"renderInput",value:function(e){var t=e.modules,n=e.isOpen,a=e.legacyTextyClassName,r=this.props,i=r.placeholder,o=r.channelId,s=r.enableEmojiButton,l=r.enableMentionButton,c=r.enableComposerButton,u=r.enableSendButton,d=r.enableBroadcastKeywords,p=r.enableExpandButton,h=r.useLegacyCreate,b=r.onFocus,f=r.onBlur,g=r.onExpand,_=r.forwardedRef,v=r.enableJumbomoji,y=r.isDisabled,k=r.isSendButtonDisabled,O=r.isExpanded,C=r.maxLines,E=r.threadTs,j=r.viewContext,S=r.maxLength,I=r.clientToolBar,w=r.featureWysiwygComposer,N=r.teamId,T=r.focusOnPaste,A=r.ariaDescribedBy,R=r.useSendButton,P=r.sendMessage,M=function(e){if(!e)return"";var t=document.createElement("span");return t.innerHTML=e,t.textContent.trim()}(i),x=this.getComputedModules(t,N,I,w);return m.a.createElement(Bn.default,{legacyTextyClassName:a,channelId:o,className:"p-message_input_field",ariaLabel:M,ariaDescribedBy:A,focusOnPaste:T,placeholder:i,onEnter:this.onEnter,onUpArrow:this.onUpArrow,onDownArrow:this.props.onDownArrow,onLeftWhenEmpty:this.onLeftWhenEmpty,onPlusMenuShortcut:this.onPlusMenuShortcut,onCmdLeftWhenEmpty:Object(ae.a)()?this.onCmdLeftWhenEmpty:null,onCmdRightWhenEmpty:Object(ae.a)()?this.onCmdRightWhenEmpty:null,onExpand:g,"data-qa":"message_input","data-message-input":!0,"data-channel-id":o,"data-thread-ts":E,"data-thread-key":E?Object(Pn.c)(o,E):null,"data-view-context":j,ref:_,useLegacyCreate:h,maxLines:C,modules:x,isAutocompleteOpen:n,isDisabled:y,isSendButtonDisabled:k,isExpanded:O,enableEmojiButton:s,enableMentionButton:l,enableComposerButton:c,enableSendButton:u,enableBroadcastKeywords:d,enableJumbomoji:v,enableExpandButton:p,onTextChange:this.onTextChange,onSelectionChange:this.onSelectionChange,onFocus:b,onBlur:f,onPasteLimit:this.onPasteLimit,sendMessage:P,maxLength:S,useFocusRing:!1,useSendButton:R})}},{key:"renderLegacyAutocomplete",value:function(){var e=this.props,t=e.legacyChannel,n=e.threadTs,a=e.forwardedRef,r={tabcomplete:{searchOptions:{model_ob:t,in_thread:!!n},positionMenu:function(e){var t=a.current.getWrappedInstance?a.current.getWrappedInstance():a.current;e.style.width=t.container.offsetWidth+"px",Object(Kn.a)(e,t.container)}}};return this.renderInput({modules:r,legacyTextyClassName:"c-texty_input"})}},{key:"renderModernAutocomplete",value:function(){var e=this,t=this.props.autocompleteProps;return m.a.createElement(Hn.a,ye()({completeOnMembers:!0,completeOnChannels:!0,completeOnCommands:!0,completeOnEmoji:!0,channelId:this.props.channelId,threadTs:this.props.threadTs,renderInput:function(){return e.renderInput.apply(e,arguments)},shouldCompleteOnTab:!this.props.useSendButton},t))}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.useLegacyCreate,a=e.channelId,r=e.threadTs,i=e.viewContext,o=e.showFocusOutline,s=e.shouldShowTractorFilesCoachmark,l=e.setTractorFilesCoachmarkVisibility,c=e.clientTheme,u=e.enableFileButton,d=e.isComposerPage,p=f()(t,"p-message_input",fe()({"p-message_input--focus-visible":o},"p-message_input--"+c,"light"!==c)),h=u&&m.a.createElement(Vi,{channelId:a,threadTs:r,viewContext:i,isComposerPage:d,isOpen:this.state.isPlusMenuOpen,forceOpen:this.state.forcePlusMenuOpen,onFileMenuOpen:this.onFileMenuOpen,onFileMenuClose:this.onFileMenuClose,useLegacyCreate:n});return m.a.createElement("div",{className:p},n?this.renderLegacyAutocomplete():this.renderModernAutocomplete(),s?m.a.createElement(Vn.b,{orientation:"right",coachmarkElement:m.a.createElement(Un,{setTractorFilesCoachmarkVisibility:l}),style:{position:"absolute",bottom:4,height:34,width:34}},h):h)}}]),t}(p.Component);Jn.displayName="MessageInput",Jn.defaultProps=Xn;var Zn={setChannelDraft:function(){return an.e.apply(void 0,arguments)},clearChannelDraft:function(){return an.b.apply(void 0,arguments)},enqueueToast:function(){return en.c.apply(void 0,arguments)},openModal:function(){return tn.e.apply(void 0,arguments)},openSnippetDialog:function(){return cn.apply(void 0,arguments)},triggerNavigateBack:function(e){return yn(e)},triggerNavigateForward:function(e){return kn(e)},setTractorFilesCoachmarkVisibility:function(){return $t.f.apply(void 0,arguments)},maybeShowMessageNavigationEducationalToast:function(){return Rn.apply(void 0,arguments)}},$n=Object(g.b)(function(e,t){var n=t.channelId,a=t.threadTs;return{legacyChannel:Object(ae.a)()?null:Object(G.e)(e,n),enableJumbomoji:Object(Jt.a)(e),arrowHistory:Object(Zt.j)(e,"arrow_history"),draft:Object(T.b)(e,{channelId:n,threadTs:a}),featureOfflineMode:Object(y.m)(e,"feature_offline_mode"),featureSonicInputs:Object(y.m)(e,"feature_sonic_inputs"),clientToolBar:"composer_toolbar"===Object(Xt.c)(e,"composer_toolbar"),featureWysiwygComposer:Object(lt.a)(e),wasRecentlyOnline:Object(Qt.h)(e),isClientOnline:Object(Qt.c)(e),logger:Object(Ct.a)({state:e}),clogger:Object(re.a)({state:e}),teamId:Object(v.b)(e),shouldShowTractorFilesCoachmark:Object(Yt.b)(e),clientTheme:Object(D.c)(e),featureMessageNavigationShortcuts:Object(y.m)(e,"feature_message_navigation_shortcuts")}},Zn)(Jn),ea=m.a.forwardRef(function(e,t){return m.a.createElement($n,ye()({},e,{forwardedRef:t||m.a.createRef()}))}),ta=n("od5y"),na=n("MREy"),aa=n("Z0Cl"),ra=n("h9PG"),ia=n("AE1P"),oa=n("M4HD"),sa=n("SZMM"),la=n("0f2Y"),ca=n("iZHp"),ua=n("YB81"),da=n("PJXc"),pa=new B.b("sonic_pilot");function ma(){return Object(ae.a)()?"c-menu_item--sonic-placeholder":void 0}var ha=Object(g.b)(function(e){return{featureSonicPlaceholderLabels:Object(y.m)(e,"feature_sonic_placeholder_labels")}})(function(e){var t=e.featureSonicPlaceholderLabels;return Object(ae.a)()&&t?m.a.createElement("div",{className:"c-menu_item__placeholder"},pa.t("Coming soon")):null}),ba=n("ROZo"),fa=(Object(ba.b)("TS.client.ui.files.backButtonOnClick"),Object(ba.b)("TS.client.ui.files.chooseFile")),ga=n("AFNo"),_a=n("+1yX"),va=Object(ga.f)("Opens the docs Gantry app in a new window",function(e,t){var n=t(),a=Object(E.a)(n),r=Object(we.d)(n),i=Object(De.j)(r),o=Object(v.a)(n);if(Object(_a.a)(a)){var s={origin_team:o||i,origin_channel:a};e(Object(sa.e)({pathname:"/docs/"+i,queryStringParams:s}))}});va.meta={name:"createPost",key:"actionsDocsCreatePostCreatePost",description:"Opens the docs Gantry app in a new window"},va.propTypes=h.b.object;var ya=n("n3t6"),ka=n("h9dl"),Oa=n("AzV5"),Ca=n("aLpA"),Ea=n("sJy+"),ja=n("O0RF"),Sa=n("Rszm"),Ia=n("plEq"),wa=n("S3eg"),Na=n("E6HO"),Ta=n("N0/W"),Aa=n("KP4j"),Ra=new B.b("menu_file"),Pa={success:h.b.bool,response:h.b.object,wasShared:h.b.bool,channel:h.b.string,threadTs:h.b.string},Ma=Object(gt.b)("On Gdrive Creation Complete",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.success,r=n.response,i=n.wasShared,o=n.channel,s=n.threadTs,l=t(),c=Object(Aa.b)(l);a&&r&&r.data&&r.data.url&&!i&&c&&e(Object(Na.c)({ephemeralType:"created_google_drive_document",message:{channel:o,thread_ts:s,slackbot_feels:"sad_surprise",text:Ra.t("It looks like your browser is blocking popups so here\u2019s a link to your <{url}|document>",{url:r.data.url})}}))});Ma.meta={name:"onGDriveCreateComplete",key:"actionsOnGdriveCompleteOnGDriveCreateComplete",description:"On Gdrive Creation Complete"},Ma.propTypes=Pa;var xa=Ma,Fa=n("OqoL"),La=new B.b("files"),Da={type:h.b.string.isRequired,title:h.b.string,comment:h.b.string,blocks:h.b.array,broadcast:h.b.bool,shareFile:h.b.bool,channel:h.b.string,threadTs:h.b.string,reason:h.b.string},Ua=Object(gt.b)("Create a Gdrive File",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.type,r=n.title,i=n.comment,o=n.blocks,s=n.broadcast,l=n.shareFile,c=n.channel,u=n.threadTs,d=n.reason,p=t(),m=Object(Ct.a)({state:p});l&&c&&e(Object(wa.a)({id:c}));var h=Object(E.a)(t());return e(Object(Ta.b)({serviceStub:"gdrive",mimeType:"application/vnd.google-apps."+a,filename:r||"",reason:d||"create-gdrive-file"})).then(function(t){var n=Object(sa.f)(t.url);n&&!n.closed||e(Object(Aa.c)(!0)),l?e(Object(Ta.t)({channels:c,threadTs:u,title:r||"",initialComment:Object(Fa.b)(p,i),blocks:o,broadcast:s,link:t.url,reason:d||"create-gdrive-file"})).then(function(){return e(xa({success:!0,response:t,wasShared:l,channel:h,threadTs:u}))}).catch(function(t){m.error("CREATE_GOOGLE_DRIVE_FILE",t),e(Object(Na.c)({ephemeralType:Na.a.gdriveShareFileError,message:{channel:h,thread_ts:u,slackbot_feels:"sad_surprise",text:La.t("Oh no! I couldn\u2019t import your newly created file")}}))}):e(xa({success:!0,response:t,wasShared:l,channel:h,threadTs:u}))}).catch(function(t){e(xa({success:!1}));var n=La.t("Darn, that didn\u2019t work. Try again or <https://my.slack.com/help/requests/new|contact us> if it\u2019s still not working.");t&&t.data&&"filename_too_long"===t.data.error&&(n=La.t("Sorry! The name of that file is too long for us to handle. Please try importing a file with a shorter filename.")),m.error("CREATE_GOOGLE_DRIVE_FILE",t),e(Object(Na.c)({ephemeralType:Na.a.unhandledGdriveCreate,message:{channel:h,thread_ts:u,slackbot_feels:"sad_surprise",text:n}}))})});Ua.meta={name:"createGdriveFile",key:"actionsCreateGdriveFileCreateGdriveFile",description:"Create a Gdrive File"},Ua.propTypes=Da;var Ba=Ua,qa=n("IyaR"),Ha=n("Y6FH"),Wa=n("Hvpu"),Ga=n("Zwlx"),Ka=n("iJ4v"),Va=n("r6UO"),za=(n("T/b3"),new B.b("create-gdoc-dialog")),Ya=(h.b.string,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.string,h.b.string,h.b.func,h.b.array,h.b.func,h.b.bool,h.b.string,h.b.func,h.b.string,h.b.bool,h.b.bool,h.b.oneOf(["mpim","im","channel","private"]),h.b.node.isRequired,{type:void 0,closeModal:d.a,getShareableChannelId:d.a,createGdriveFile:d.a,onGDriveCreateComplete:d.a,threadTs:void 0,msgText:"",setMsgText:d.a,msgOps:void 0,setMsgOps:d.a,converMsgOpsToRichTextMessage:d.a,featureWysiwygComposer:!1,selectedChannelId:void 0,setSelectedChannel:d.a,disallowedKeywordInMsgText:void 0,canPostInSelectedChannel:!1,canThread:!1,channelType:null}),Qa=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["onTextChange","onShareChannelChange","onGo","onCancel","onBroadcastChange","onTitleInputChange","onShareWithChange","setTitleInputRef"]),n.titleInput=null,n._isMounted=!1,n.state={overMsgLengthLimit:!1,titleInputValue:"",submitting:!1,shareWith:!0,broadcast:!1},n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"onTextChange",value:function(e){var t=e.text,n=e.msgOps,a=e.overLimit;this.props.featureWysiwygComposer?this.props.setMsgOps(n):this.props.setMsgText(t),this.setState(function(){return{overMsgLengthLimit:a}})}},{key:"onShareChannelChange",value:function(e){this.props.setSelectedChannel(e)}},{key:"onGo",value:function(){this.isGoButtonDisabled()||this.createGDocOnGo()}},{key:"onCancel",value:function(){this.props.onGDriveCreateComplete(!1)}},{key:"onTitleInputChange",value:function(e){this.setState(function(){return{titleInputValue:e}})}},{key:"onShareWithChange",value:function(e){var t=e.target.checked;this.setState(function(){return{shareWith:!!t}})}},{key:"onBroadcastChange",value:function(e){this.setState(function(){return{broadcast:e}})}},{key:"getCleanMsgText",value:function(){if(this.props.featureWysiwygComposer)return null;var e=Object(ya.a)(this.props.msgText);return Object(Wt.a)(e)}},{key:"getDialogTitle",value:function(){switch(this.props.type){case"document":return za.t("Create a Google Document");case"presentation":return za.t("Create a Google Presentation");case"spreadsheet":return za.t("Create a Google Spreadsheet");default:return za.t("Create a Google file")}}},{key:"setTitleInputRef",value:function(e){e&&(this.titleInput=e,this.focusTitleInput())}},{key:"focusTitleInput",value:function(){this.titleInput&&this.titleInput.focus()}},{key:"isGoButtonDisabled",value:function(){var e=this.props,t=e.disallowedKeywordInMsgText,n=e.canPostInSelectedChannel,a=e.threadTs,r=e.canThread,i=this.state,o=i.overMsgLengthLimit,s=i.shareWith,l=i.titleInputValue,c=i.submitting,u=l&&l.length>Ca.y;return s&&!n&&!a||s&&a&&!r||!!t||o||u||c}},{key:"createGDocOnGo",value:function(){var e=this,t=this.props,n=t.selectedChannelId,a=t.getShareableChannelId,r=t.type,i=t.threadTs,o=t.msgOps,s=t.featureWysiwygComposer,l=this.state,c=l.titleInputValue,u=l.shareWith,d=l.broadcast;n&&(a({channelOrMemberId:n}).then(function(t){var n=e.getCleanMsgText(),a=c||za.t("Untitled",{fallbackHash:"621521f9a8788695ec292cbec54d2792cfdf0a7d",fallbackHashNs:"space"}),l=void 0;s&&(l=e.props.converMsgOpsToRichTextMessage({msgOps:o,channelId:t,inThread:!!i})),e.props.createGdriveFile({type:r,title:a,comment:n,blocks:l,broadcast:d,shareFile:u,channel:t,threadTs:i,reason:"create-gdrive-file"}).then(function(){e._isMounted&&e.setState(function(){return{submitting:!1}}),e.props.closeModal()})}),this.setState(function(){return{submitting:!0}}))}},{key:"maybeRenderBroadcast",value:function(){var e=this.props,t=e.threadTs,n=e.canPostInSelectedChannel,a=e.channelType,r=e.selectedChannelName,i=this.state.broadcast;return t&&n?m.a.createElement("div",{className:"p-create_gdoc_dialog__broadcast_section"},m.a.createElement(Va.a,{channelType:a,selectedChannelName:r,value:i,onChange:this.onBroadcastChange})):null}},{key:"renderChannelPicker",value:function(){var e=this.props.selectedChannelId,t=this.state.shareWith;return m.a.createElement(Ha.a,{onChange:this.onShareChannelChange,initialChannelId:e,isDisabled:!t,dialogType:"create_gdoc_dialog"})}},{key:"renderShareAlert",value:function(){if(!this.state.shareWith)return null;var e=Object(Ga.a)(ye()({},this.props));return e?m.a.createElement("div",{className:"p-share_dialog__section"},m.a.createElement(Ea.d,{type:"inline",level:"warning",className:"margin_bottom_100"},e)):null}},{key:"renderShareWith",value:function(){var e=this.state.shareWith;return m.a.createElement(ja.a,{text:za.t("Share with:"),htmlFor:"create-gdoc-share-with",type:"inline"},m.a.createElement(Sa.a,{id:"create-gdoc-share-with",defaultChecked:e,onChange:this.onShareWithChange,"data-qa":"share_with"}))}},{key:"renderTitleInput",value:function(){var e=this.state.titleInputValue,t="p-create_gdoc_dialog__title";return m.a.createElement("div",{className:"p-share_dialog__section p-share_dialog__section_bottom_padding"},m.a.createElement(ja.a,{htmlFor:t,text:za.t("Title"),optional:!0},m.a.createElement(Ia.a,{id:t,name:t,maxCharacterLimit:Ca.y,counterMinimumCharacters:Ca.J,onChange:this.onTitleInputChange,value:e,ref:this.setTitleInputRef,"data-qa":"create_gdoc_title"})))}},{key:"renderShareWithPicker",value:function(){var e=this.props,t=e.selectedChannelId,n=e.threadTs;return n?m.a.createElement(Ka.a,{channelId:t,threadTs:n}):m.a.createElement("div",{className:"p-create_gdoc_dialog__footer_share_inputs"},this.renderShareWith(),this.renderChannelPicker())}},{key:"renderMessageInput",value:function(){var e=this.props.msgText;if(!this.state.shareWith)return null;var t=za.t("Add a message, if you\u2019d like."),n=f()("p-share_dialog__section","p-share_dialog__create_gdoc_message_input");return m.a.createElement("div",{className:n},m.a.createElement(qa.a,{text:e,onTextChange:this.onTextChange,placeholder:t,ariaLabel:t,onEnter:this.onGo}),this.maybeRenderBroadcast())}},{key:"render",value:function(){return m.a.createElement(nn.b,{className:"p-create_gdoc_dialog",title:this.getDialogTitle(),useSlackScrollbarWithPadding:!0,goButtonText:za.t("Create"),onGo:this.onGo,onClose:this.onCancel,showCancelButton:!1,footerText:this.renderShareWithPicker(),goButtonIsDisabled:this.isGoButtonDisabled()},this.renderTitleInput(),this.renderShareAlert(),this.renderMessageInput())}}]),t}(p.Component);Qa.displayName="CreateGDocDialog",Qa.defaultProps=Ya;var Xa=Object(g.b)(function(e,t){var n=t.selectedChannelId,a=Object(Wa.b)(e,t),r=Object(G.e)(e,n)||Object(G.k)(e,n);return ye()({},a,{selectedChannel:r})},function(e){return{closeModal:function(){return e(tn.a.apply(void 0,arguments))},getShareableChannelId:function(){return e(ka.a.apply(void 0,arguments))},createGdriveFile:function(){return e(Ba.apply(void 0,arguments))},onGDriveCreateComplete:function(){return e(xa.apply(void 0,arguments))},converMsgOpsToRichTextMessage:function(){return e(Oa.a.apply(void 0,arguments))}}})(Qa),Ja=Object(Wa.a)(Xa),Za=Object(gt.b)("Opens the create gdoc file dialog",function(e,t,n){e(Object(tn.e)({element:m.a.createElement(Ja,n)}))});Za.meta={name:"openCreateGDocDialog",key:"actionsOpenCreateGdocDialogOpenCreateGDocDialog",description:"Opens the create gdoc file dialog"},Za.propTypes={type:h.b.string,displayType:h.b.string,initialChannelId:h.b.string};var $a=Za,er=n("gSGL"),tr=n("6LIB"),nr=n("syB0"),ar=n("fL8H"),rr=n("vSXf"),ir=new B.b("file-upload"),or={SINGLE_LINK_MISSING:"single",MULTIPLE_LINK_MISSING:"multiple",WEBLINK:"weblink"};function sr(e){var t=e.type,n=e.featureBoxContentPicker,a=e.proceedToNextDialog,r=n?ir.t("Your file can\u2019t be added"):"",i="";switch(t){case or.SINGLE_LINK_MISSING:i=n?ir.t("Your Box file is missing a shared link, which we\u2019ll need to add it to Slack."):"";break;case or.MULTIPLE_LINK_MISSING:i=n?ir.t("One or more of your Box files is missing a shared link, which we\u2019ll need to add it to Slack."):"";break;case or.WEBLINK:i=n?ir.t("Apologies! Links from Box can\u2019t be added this way yet."):"";break;default:return null}var o=a!==d.a?function(){Object(nr.a)(function(){a()})}:d.a;return m.a.createElement(ar.a,{title:r,onGo:o},m.a.createElement("p",null,i))}sr.displayName="BoxLinkAlert",sr.defaultProps={type:or.SINGLE,proceedToNextDialog:d.a,featureBoxContentPicker:!1};var lr=Object(rr.a)("feature_box_content_picker")(sr),cr=Object(ga.f)("Display Box Link Alert error",function(e,t,n){return e(Object(tn.e)({element:m.a.createElement(lr,n)}))});cr.meta={name:"openBoxLinkAlert",key:"componentsShareDialogsBoxLinkAlertOpenBoxLinkAlert",description:"Display Box Link Alert error"},cr.propTypes={};var ur=cr,dr=n("yJbr"),pr=n("hqEo"),mr=n("TwEf"),hr=n("fp5s"),br=n("g5qt"),fr=n("zaOK"),gr={url:h.b.string.isRequired,windowFeatures:h.b.object,hidden:h.b.bool,processEvent:h.b.func},_r={width:590,height:520},vr=Object(gt.b)("Open third-party file picker window and handle callback",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.hidden,r=n.url,i=n.windowFeatures,o=n.processEvent,s=Object(Ct.a)({getState:t,label:"REMOTE-FILE-PICKER"}),l=t(),c=Object(v.b)(l),u=ye()({},_r,i,{parentTeamId:c});Object(ce.u)()&&(fr.a.canOpenURLInWindow(l,r)||s.error("REMOTE-FILE-PICKER","Trying to open remote file picker URL in SSB but URL is not whitelisted: "+r));var p=Object(hr.a)("fp_"),m=r+(r.includes("?")?"&":"?")+"source_id="+p,h=void 0,b=function(){return h.cancel()},f=void 0,g=void 0;try{if(Object(ce.u)()&&!Object(br.P)()?(f=a?Object(sa.f)(m,{show:!1,skipTaskbar:!0,frame:!1,opacity:0,transparent:!0,focusable:!1,parentTeamId:c}):Object(sa.f)(m,u)).addListener("close",b):a?((g=document.createElement("iframe")).setAttribute("data-qa","picker-frame"),g.src=m,g.style.cssText="display:none",document.body.appendChild(g),f=g.contentWindow):(f=Object(sa.f)(m,u))&&!Object(br.P)()&&f.addEventListener("beforeunload",b),!f)return Promise.reject(new Error("Unable to open window"))}catch(e){return Promise.reject(e)}return(h=function(e){return new Promise(function(t,n,a){var r=void 0,i=function(a){var i=function(e){n(e),r()};try{e(a,{resolve:function(e){t(e),r()},reject:i})}catch(e){i(e)}};a(r=function(){return window.removeEventListener("message",i)}),window.addEventListener("message",i)})}(o||function(e,t){return function(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a.resolve,i=a.reject;if(!Object(ce.u)()||Object(br.P)()){if(n.source!==e)return;if(n.origin!==window.location.origin)return}if(n.data&&n.data._sourceId===t){n.data.ok&&r(n.data);var o=new Error("Data not OK");o.data=n.data,i(o)}}}(f,p))).finally(function(){g?g.remove():f&&f.close()}).catch(d.a),h});vr.meta={name:"openRemoteFilePicker",key:"actionsCloudFilePickersOpenRemoteFilePickerOpenRemoteFilePicker",description:"Open third-party file picker window and handle callback"},vr.propTypes=gr;var yr=vr,kr=new B.b("files"),Or={channelId:h.b.string.isRequired,threadTs:h.b.string,metadata:h.b.shape({fileUploadAction:h.b.oneOfType([h.b.number,h.b.string]),fileUploadSrc:h.b.oneOfType([h.b.number,h.b.string])})},Cr=function(e){var t=ce.k?"A06147X5W":"A0F82E57C",n=Object(we.d)(e);return Object(De.o)(n,"/apps/"+t)},Er=Object(gt.b)("Open a window to pick a Box file",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.channelId,r=n.threadTs,i=n.metadata,o=t(),s=Object(v.b)(o),l=Object(y.m)(o,"feature_sonic_cloud_files_picker"),c=Object(y.m)(o,"feature_box_content_picker");if(!l||!c)return Object(dr.k)(a,r,i);var u=Object(ra.a)(o,"box_app_installed"),p=location.origin+"/files/import/box?team="+s+(ce.n?"&js_path=1":"");return e(yr({url:p,windowFeatures:{height:675,width:925}})).then(function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).chosen_files,n=void 0===t?[]:t,o=[],s=[],l=[];n.forEach(function(t){t&&(!function(e){return!!(Object(tr.a)(e)&&"file"===e.type&&Object(er.a)(e.name)&&Object(tr.a)(e.shared_link)&&Object(er.a)(e.shared_link.url))}(t)?"web_link"===t.type?u?e(Object(mr.a)({channel:a,thread_ts:r,text:t.url})):l.push({name:t.name,url:t.url}):s.push(t):u?e(Object(mr.a)({channel:a,thread_ts:r,text:t.shared_link.url})):o.push({name:t.name,link:t.shared_link.url,is_box:!0}))});var c=o.length&&!u?function(){return e(Object(pr.a)({files:o,initialChannelId:a,threadTs:r,metadata:i}))}:d.a,p=l.length?function(){return e(ur({type:or.WEBLINK,proceedToNextDialog:c}))}:c;return s.length>0?e(ur({type:n.length>1?or.MULTIPLE_LINK_MISSING:or.SINGLE_LINK_MISSING,proceedToNextDialog:p})):l.length?p():c()}).catch(function(t){if(t&&t.data&&t.data.error)switch(t.data.error){case"no_access_token":case"unauthorized":e(Object(Na.c)({ephemeralType:Na.a.boxFilePickerError,message:{channel:a,thread_ts:r,slackbot_feels:"sad_surprise",text:c?kr.t("Apologies, but you\u2019ll need to <{url}|reconnect Box to Slack> to continue. It only takes a click or two!",{url:Cr(o)}):""}}))}throw t})});Er.meta={name:"openBoxFilePicker",key:"actionsCloudFilePickersOpenBoxFilePickerOpenBoxFilePicker",description:"Open a window to pick a Box file"},Er.propTypes=Or;var jr=Er,Sr=n("/1FC"),Ir=n("c8Bs"),wr={channelId:h.b.string.isRequired,threadTs:h.b.string,metadata:h.b.shape({fileUploadAction:h.b.oneOfType([h.b.number,h.b.string]),fileUploadSrc:h.b.oneOfType([h.b.number,h.b.string])})},Nr=function(e){return!(!e||"object"!==(void 0===e?"undefined":Ve()(e)))&&("string"==typeof e.name&&("number"==typeof e.bytes&&("string"==typeof e.link&&(!e.icon||"string"==typeof e.icon))))},Tr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.resolve,a=t.reject;if("https://www.dropbox.com"===e.origin){var r=void 0;try{r="string"==typeof e.data?JSON.parse(e.data):e.data}catch(e){return}if(r&&"object"===(void 0===r?"undefined":Ve()(r)))switch(r.method){case"files_selected":Object(Sr.a)(r.params)&&Object(Ir.a)(r.params,Nr)&&n({chosen_files:r.params}),a(new Error("Invalid file(s) from Dropbox"));break;case"close_dialog":n({chosen_files:[]})}}},Ar=void 0,Rr=Object(gt.b)("Open a window to pick a Box file",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.channelId,r=n.threadTs,i=n.metadata;if(!Object(y.m)(t(),"feature_sonic_cloud_files_picker"))return Object(dr.l)(a,r,i);var o=t(),s=Object(v.b)(o);Ar&&Ar.isPending()&&Ar.cancel();var l=location.origin+"/files/import/dropbox?team="+s;return(Ar=e(yr({url:l,processEvent:Tr,windowFeatures:{height:552,width:640}}))).then(function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).chosen_files,n=(void 0===t?[]:t).map(function(e){return{name:e.name,size:e.bytes,link:e.link,icon:e.icon,is_dropbox:!0}});return n.length?e(Object(pr.a)({files:n,initialChannelId:a,threadTs:r,metadata:i})):null})});Rr.meta={name:"openDropbox",key:"actionsCloudFilePickersOpenDropboxFilePickerOpenDropbox",description:"Open a window to pick a Box file"},Rr.propTypes=wr;var Pr=Rr,Mr=new B.b("files"),xr={channelId:h.b.string.isRequired,threadTs:h.b.string,metadata:h.b.shape({fileUploadAction:h.b.oneOfType([h.b.number,h.b.string]),fileUploadSrc:h.b.oneOfType([h.b.number,h.b.string])}),reason:h.b.string},Fr="auth_required",Lr="filename_too_long",Dr="unidentified_external_url",Ur="file_type_has_no_handler",Br=function(e){var t=Object(we.d)(e);return Object(De.o)(t,"apps/"+(ce.k?"A0BDLPR2L":"A6NL8MJ6Q"))},qr=Object(gt.b)("Open a window to pick a GDrive file",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.channelId,r=n.threadTs,i=n.metadata,o=n.reason;if(!Object(y.m)(t(),"feature_sonic_cloud_files_picker"))return Object(dr.i)(a,r,i);var s=t(),l=Object(v.b)(s),c=location.origin+"/files/import/gdrive?team="+l;return fetch(c,{cache:"no-store",mode:"same-origin",credentials:"same-origin"}).then(function(){if(403===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).status)throw new Error(Fr)}).then(function(){return e(yr({url:c,windowFeatures:{height:675}}))}).then(function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).chosen_files,n=Date.now();return Promise.map(t,function(t){return e(Object(Ta.t)({channels:a,threadTs:r,link:t.url,reason:o||"open-gdrive-file-picker"})).then(function(){var e;Object(re.a)({state:s}).track(le.EventId.FILE_COMPLETE_UPLOAD_SUCCESS,(e={},fe()(e,le.CoreKeys.type,le.FileUploadType.EXTERNAL),fe()(e,le.CoreKeys.duration,Date.now()-n),fe()(e,le.CoreKeys.has_upload_message,!1),fe()(e,le.CoreKeys.file_count,1),fe()(e,le.CoreKeys.retry_count,0),fe()(e,le.CoreKeys.upload_size,t.sizeBytes?t.sizeBytes:0),fe()(e,le.CoreKeys.retry_reason,""),fe()(e,le.CoreKeys.did_disconnect_during_upload,!1),fe()(e,le.CoreKeys.file_upload_action,i&&i.fileUploadAction),fe()(e,le.CoreKeys.file_upload_src,i&&i.fileUploadSrc),e))})})}).catch(function(n){var i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.text,i=t.ephemeralType;return e(Object(Na.c)({ephemeralType:i||Na.a.gdriveShareFileError,message:{channel:a,thread_ts:r,slackbot_feels:"sad_surprise",text:n||Mr.t("Hmm, something went wrong. Try again?",{fallbackHash:"83743049d08a764e93ca79d5621ee1e19f02bc75",fallbackHashNs:"app_management_modal"})}}))},o=n&&(n.data&&n.data.error||n.message);return o===Lr?i({text:"Sorry! The name of that file is too long for us to handle. Please try importing a file with a shorter filename."}):[Ur,Dr].includes(o)&&n.args&&n.args.link?e(Object(mr.a)({channel:a,thread_ts:r,text:n.args.link,unfurl_links:!1,unfurl_media:!1})).then(function(){return i({ephemeralType:Na.a.fileTypeHasNoHandler,text:Mr.t("We don\u2019t currently support importing that type of Google Drive file, but we included the link so that others can access it.")})}).catch(i):o===Fr?i({text:Mr.t("Looks like you\u2019re trying to add a Google Drive file \u2014 first you\u2019ll need to connect <{url}|Google Drive to Slack>.\n\n Once your account is connected, you\u2019ll be able to easily share files, see file previews, and even find your files later as you search in Slack. <{url}|Learn more about using Google Drive in Slack>.",{url:Br(s)})}):(Object(Ct.a)({getState:t}).error("GDRIVE_FILE_PICKER",n),i())})});qr.meta={name:"openGdriveFilePicker",key:"actionsCloudFilePickersOpenGdriveFilePickerOpenGdriveFilePicker",description:"Open a window to pick a GDrive file"},qr.propTypes=xr;var Hr=qr,Wr=n("XRnC"),Gr=n("lSe/"),Kr=new B.b("files"),Vr={channelId:h.b.string.isRequired,threadTs:h.b.string,metadata:h.b.shape({fileUploadAction:h.b.oneOfType([h.b.number,h.b.string]),fileUploadSrc:h.b.oneOfType([h.b.number,h.b.string])}),reason:h.b.string},zr="auth_required",Yr="onenote_not_supported",Qr="popupOpen",Xr="badResponse",Jr=function(e){var t=Object(we.d)(e);return Object(De.o)(t,ce.k?"apps/A061CBSP3":"apps/A53TM6XA9")},Zr=Object(gt.b)("Open a window to pick a OneDrive file",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.channelId,r=n.threadTs,i=n.metadata,o=n.reason;if(!Object(y.m)(t(),"feature_sonic_cloud_files_picker"))return Object(dr.j)(a,r,i);var s=t(),l=Object(v.b)(s),c=location.origin+"/files/import/onedrive?team="+l+(ce.n?"&js_path=1":"");if(ce.k&&Object(ra.a)(s,"onedrive_app_installed")){var u=Object(ce.h)().envSubdomain;"dev"!==u&&"dev6"!==u&&Object(Gr.c)("The OneDrive picker for the OneDrive v2 app won't work in dev environments other than dev-main or dev6. If you are doing active development, please attach to dev6.")}return fetch(c,{cache:"no-store",mode:"same-origin",credentials:"same-origin"}).then(function(){if(403===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).status)throw new Error(zr)}).then(function(){return e(yr({url:c,hidden:!0}))}).then(function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).chosen_files,n=Date.now();return Promise.map(t,function(t){return e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.state,n=e.channelId,a=e.threadTs,r=e.reason,i=e.link;return Object(ra.a)(t,"onedrive_app_installed")?Object(Wr.a)({channelId:n,text:i,shouldBroadcast:!1}):Object(Ta.t)({channels:n,threadTs:a,link:i,reason:r||"open-onedrive-file-picker"})}({state:s,channelId:a,threadTs:r,reason:o,link:t})).then(function(){var e;Object(re.a)({state:s}).track(le.EventId.FILE_COMPLETE_UPLOAD_SUCCESS,(e={},fe()(e,le.CoreKeys.type,le.FileUploadType.EXTERNAL),fe()(e,le.CoreKeys.duration,Date.now()-n),fe()(e,le.CoreKeys.has_upload_message,!1),fe()(e,le.CoreKeys.file_count,1),fe()(e,le.CoreKeys.retry_count,0),fe()(e,le.CoreKeys.upload_size,0),fe()(e,le.CoreKeys.retry_reason,""),fe()(e,le.CoreKeys.did_disconnect_during_upload,!1),fe()(e,le.CoreKeys.file_upload_action,i&&i.fileUploadAction),fe()(e,le.CoreKeys.file_upload_src,i&&i.fileUploadSrc),e))}).catch(function(e){throw e.subtype="files.uploadExternal",e})})}).catch(function(n){var i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.text,i=t.ephemeralType;return e(Object(Na.c)({ephemeralType:i||Na.a.onedriveSdkError,message:{channel:a,thread_ts:r,slackbot_feels:"sad_surprise",text:n||Kr.t("Darn, that didn\u2019t work. Try again or <https://my.slack.com/help/requests/new|contact us> if it\u2019s still not working.")}}))},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.data?e.method&&"files.uploadExternal"===e.method&&e.data.error?e.data.error:e.data.method&&"onedrive_picker"===e.data.method&&e.data.error_code?e.data.error_code:e.message||"Data not OK":e.message||"Data not OK"}(n);if(o===zr)return i({text:Kr.t("Looks like you\u2019re trying to add a OneDrive file \u2014 first you\u2019ll need to connect <{url}|OneDrive to Slack>.\n\n Once your account is connected, you\u2019ll be able to easily share files, see file previews, and even find your files later as you search in Slack. <{url}|Learn more about using OneDrive in Slack>.",{url:Jr(s)})});if(o===Yr)return i({text:Kr.t("It seems like we\u2019re not able to import OneNote notebooks.")});if(o===Qr)return e(Object(Aa.c)(!0));if(o===Xr){var l=n&&n.data&&n.data.error||o;return n.message=l,Object(Ct.a)({getState:t}).error("OneDrive_plus_button_import_failure",n),i({text:Kr.t("Sorry, something went wrong. Please confirm that your OneDrive account has been fully set up and try again.\nIf the problem persists, please let us know by contacting <mailto:feedback@slack.com|feedback@slack.com>")})}return n.message=o,Object(Ct.a)({getState:t}).error("OneDrive_plus_button_import_failure",n),i()})});Zr.meta={name:"openOneDriveFilePicker",key:"actionsCloudFilePickersOpenOnedriveFilePickerOpenOneDriveFilePicker",description:"Open a window to pick a OneDrive file"},Zr.propTypes=Vr;var $r=Zr,ei=n("m1cH"),ti=n.n(ei),ni=n("uPpK"),ai=n("bo4X"),ri=n("pmOY"),ii=n("FdTv"),oi=n("8W09"),si=n("CGJF"),li=n("mIgp"),ci=n("cD5Y"),ui=n("eK0w"),di=n("YLnb"),pi=n("b7Ww"),mi=n("1Uzj"),hi=(n("GoIT"),n("fX3E")),bi=new B.b("menu_file"),fi=Object(mi.a)(pi.a),gi=(h.b.array,h.b.string,h.b.bool,h.b.bool,h.b.shape({key:h.b.string,offset:h.b.number}),h.b.func,h.b.func,h.b.func,h.b.func,h.b.string.isRequired,h.b.string,h.b.string,h.b.func,h.b.func,h.b.func,h.b.object,h.b.string,h.b.object.isRequired,h.b.object.isRequired,h.b.bool,h.b.func,h.b.func,h.b.bool,{threadTs:void 0,viewContext:void 0,files:[],filetype:"",currentUser:"",user:!1,scrollmark:void 0,fetchFilesPre:d.a,fetchFilesPost:d.a,saveScrollmark:d.a,setFiletype:d.a,setUser:d.a,getRecentFilesForUser:d.a,closeModal:d.a,openShareDialog:d.a,isInEnforceFileLimitTreatment:!1,hiddenFileInputRef:void 0,showUpload:!1,isLoading:h.b.bool,setisLoading:h.b.func}),_i=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["onFileClick","onScroll","fetchPre","fetchPost","fetchAround","renderRow","renderFile","clogPricingLinkClick","renderBody","isEmpty","onModalCancel","renderList","renderDynamicList","handleFileTypeChange","handleYourFilesClick","handleYourWorkspaceClick","fetchAllFiles","selectFileFromComputer"]),n.requestPre=null,n.requestPost=null,n.reachedStart=!1,n.reachedEnd=!1,n.keys=null,n.requestAll=null,n.layout=new di.a,n.list=m.a.createRef(),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.scrollmark,n=e.clogger,a=e.user;if(t){var r=t.key,i=t.offset;this.layout.setAnchor(r,i),this.props.saveScrollmark(null)}if(a){var o={types:this.props.filetype};this.fetchAllFiles(o)}this.shouldShowStorageWarningBanner()&&n.track(le.EventId.GROWTH_PRICING,{contexts:{ui_context:{action:le.UiAction.IMPRESSION,step:le.UiStep.FILE_PANE,ui_component:le.UiComponent.FILE_STORAGE_LIMIT_BANNER}}})}},{key:"componentWillUnmount",value:function(){this.props.setFiletype(""),this.requestAll&&this.requestAll.cancel()}},{key:"onFileClick",value:function(e){var t=e.id,n=this.list.current;if(n&&t){var a=this.props,r=a.user,i=a.clogger,o=r?le.EventId.OMNIPICKER_DIALOG_SHARE_YOUR_RECENT_FILE:le.EventId.OMNIPICKER_DIALOG_SHARE_WORKSPACE_FILE;this.props.saveScrollmark({key:t,offset:this.layout.getOffsetForKey(t)-n.getScrollTop()}),this.props.openShareDialog({fileId:t,showFileType:!0}),i.track(o,{contexts:{ui_context:{action:le.UiAction.CLICK,step:le.UiStep.OMNIPICKER_DIALOG}}})}}},{key:"onModalCancel",value:function(){var e=this.props.clogger;this.props.closeModal(),e.track(le.EventId.OMNIPICKER_DIALOG_CLOSE_DIALOG,{contexts:{ui_context:{action:le.UiAction.CLICK,step:le.UiStep.OMNIPICKER_DIALOG}}})}},{key:"onScroll",value:function(){this.layout.anchor&&this.layout.setAnchor(!1)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props,n=t.filetype,a=t.user;e.filetype===n&&e.user===a||(this.requestPre&&this.requestPre.cancel(),this.requestPost&&this.requestPost.cancel(),this.requestPre=null,this.requestPost=null,this.reachedStart=!1,this.reachedEnd=!1,this.layout&&this.layout.setAnchor(!1))}},{key:"clogPricingLinkClick",value:function(){this.props.clogger.track(le.EventId.GROWTH_PRICING,{contexts:{ui_context:{action:le.UiAction.CLICK,step:le.UiStep.OMNIPICKER_DIALOG,ui_element:le.UiElement.PRICING_LINK,ui_component:le.UiComponent.FILE_STORAGE_LIMIT_BANNER}}})}},{key:"fetchAllFiles",value:function(e){this.props.setisLoading(!0),this.requestAll=this.props.getRecentFilesForUser(ye()({user:this.props.currentUser,reason:"get-recent-files",count:1e3},e))}},{key:"fetchAround",value:function(){return(!this.requestPre||!this.requestPost)&&(this.reachedEnd?this.fetchPre():this.reachedStart?this.fetchPost():this.fetchPre())}},{key:"fetchPost",value:function(){var e=this;if(this.requestPost)return!1;if(this.reachedEnd)return!1;var t={types:this.props.filetype};return this.requestPost=this.props.fetchFilesPost(t),this.requestPost.then(function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).paging;t.page>=t.pages&&(e.reachedEnd=!0)}).finally(function(){e.requestPost=null})}},{key:"fetchPre",value:function(){var e=this;if(this.requestPre)return!1;if(this.reachedStart)return!1;var t={types:this.props.filetype};return this.requestPre=this.props.fetchFilesPre(t),this.reachedStart||this.props.setisLoading(!0),this.requestPre.then(function(){1===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).paging.page&&(e.reachedStart=!0,e.props.setisLoading(!1))}).finally(function(){e.requestPre=null})}},{key:"handleFileTypeChange",value:function(e){if(this.props.setFiletype(e),this.props.user){var t={types:e};this.fetchAllFiles(t)}}},{key:"handleYourFilesClick",value:function(){var e=this.props,t=e.filetype,n=e.clogger;this.props.setUser(!0);var a={types:t};this.fetchAllFiles(a),n.track(le.EventId.OMNIPICKER_DIALOG_VIEW_YOUR_FILES,{contexts:{ui_context:{action:le.UiAction.CLICK,step:le.UiStep.OMNIPICKER_DIALOG}}})}},{key:"handleYourWorkspaceClick",value:function(){var e=this.props.clogger;this.props.setUser(!1),e.track(le.EventId.OMNIPICKER_DIALOG_VIEW_WORKSPACE_FILES,{contexts:{ui_context:{action:le.UiAction.CLICK,step:le.UiStep.OMNIPICKER_DIALOG}}})}},{key:"isEmpty",value:function(){return this.props.user?!this.props.files.length:!this.props.files.length&&this.reachedStart&&this.reachedEnd}},{key:"selectFileFromComputer",value:function(){var e=this.props,t=e.channelId,n=e.threadTs,a=e.viewContext,r=e.hiddenFileInputRef,i=e.clogger,o=e.logger;r&&r.current?(r.current.click(),this.props.closeModal()):Object(ae.a)()?o.error("MSG_INPUT_FILE_BTN","Missing hidden input"):fa(t,n,a),i.track(le.EventId.OMNIPICKER_DIALOG_UPLOAD_FILE,{contexts:{ui_context:{action:le.UiAction.CLICK,step:le.UiStep.OMNIPICKER_DIALOG}}})}},{key:"shouldShowStorageWarningBanner",value:function(){return this.props.isInEnforceFileLimitTreatment}},{key:"renderBody",value:function(){var e=this.props,t=e.user,n=e.files,a=e.isLoading,r=n.map(function(e){return e.id});return this.keys=[].concat(ti()(r)),t||this.reachedEnd||this.keys.push("Loading"+this.keys.length),this.isEmpty()&&this.keys.push("Placeholder"),a?m.a.createElement("div",{className:"p-omnipicker_dialog__loading_spinner"},m.a.createElement(ci.a,{size:"jumbo"})):m.a.createElement("div",{className:"p-omnipicker_dialog__list_content","data-qa":"omnipicker_dialog_list"},m.a.createElement(m.a.Fragment,null,this.shouldShowStorageWarningBanner()&&this.renderStorageWarningBanner(),t?this.renderList():this.renderDynamicList()))}},{key:"renderDynamicList",value:function(){var e=this;return m.a.createElement(ni.a,null,function(t){var n=t.width,a=t.height;return m.a.createElement(ui.a,{height:a,width:n,keys:e.keys,layout:e.layout,rowRenderer:e.renderRow,onScroll:e.onScroll,ref:e.list,loadAround:e.fetchAround,loadPre:e.fetchPre,loadPost:e.fetchPost,onItemTabWithin:e.onItemTabWithin,onItemClick:e.onFileClick})})}},{key:"renderFile",value:function(e){var t=this.props.files[e]&&this.props.files[e].id;if(!t)return null;var n=e===this.props.files.length-1,a=f()("p-omnipicker_dialog__file",{"p-omnipicker_dialog__file--last":n});return m.a.createElement(fi,{fileId:t,className:a,showActions:!1,"data-qa":"test-file",fullWidth:!0})}},{key:"renderList",value:function(){var e=this;return m.a.createElement(ni.a,null,function(t){var n=t.width,a=t.height;return m.a.createElement(li.b,{height:a,width:n,keys:e.keys,ref:e.list,layout:e.layout,onScroll:e.onScroll,rowRenderer:e.renderRow,onItemClick:e.onFileClick})})}},{key:"renderRow",value:function(e){var t=this.keys[e];if(!t)return null;switch(t[0]){case"L":return m.a.createElement("div",{className:"p-omnipicker_dialog__list--loading"},bi.t("Loading\u2026"));case"P":return m.a.createElement("div",{className:"p-omnipicker_dialog__list--empty"},bi.t("No matching files were found."));default:return this.renderFile(e)}}},{key:"renderStorageWarningBanner",value:function(){var e=this,t=new B.b("files");return m.a.createElement("div",{className:"p-omnipicker_dialog__storage-warning-container"},m.a.createElement("div",{className:"display_flex"},m.a.createElement(ta.b,{className:"p-message_limit_banner__graphic",type:"eye-closed"}),m.a.createElement("div",null,m.a.createElement("span",null,t.rt("Some additional results aren\u2019t visible because your workspace has passed the free plan\u2019s 5 GB storage limit. <a>See paid plans</a>",null,function(t){var n=t.text;return m.a.createElement(la.a,{href:"/pricing?ui_step="+le.UiStep.FILE_PANE+"&ui_element="+le.UiElement.PRICING_LINK,onClick:e.clogPricingLinkClick,target:"new","data-qa":"file-flexpane__pricing-link"},n)})))))}},{key:"render",value:function(){var e=this.props,t=e.filetype,n=e.user,a=e.showUpload,r=bi.t("Your recent files"),i=bi.t("Workspace files"),o=n?r:i;return m.a.createElement(ai.a,{className:"p-omnipicker_dialog",fullscreen:!0,maxWidth:"950px",showCloseButton:!1,closeModal:this.props.closeModal},m.a.createElement(ri.a,{className:"p-omnipicker_dialog__header"},m.a.createElement(ii.a,{id:"unshareConfirmPost__title-bar",title:"Browse","data-qa":"dialog_header"}),m.a.createElement("div",{className:"p-omnipicker_dialog__header--selector"},m.a.createElement("h3",null,o),m.a.createElement(hi.a,{filetype:t,onChange:this.handleFileTypeChange}))),m.a.createElement("div",{className:"p-omnipicker_dialog__content"},m.a.createElement("div",{className:"p-omnipicker_dialog__menu"},m.a.createElement(na.f,null,m.a.createElement(na.b,{"data-qa":"view_your_files_menu_item",label:bi.t("Your files"),disabled:n,className:n?"c-menu_item__button__selected":"",icon:m.a.createElement(ta.b,{type:"user"}),onSelected:this.handleYourFilesClick}),m.a.createElement(na.b,{"data-qa":"view_your_workspace_files_menu_item",label:bi.t("Your workspace"),disabled:!n,className:n?"":"c-menu_item__button__selected",icon:m.a.createElement(ta.b,{type:"slack"}),onSelected:this.handleYourWorkspaceClick}),a&&m.a.createElement(na.b,{"data-qa":"add_file_from_computer_menu_item",label:bi.t("Your computer"),icon:m.a.createElement(ta.b,{type:"laptop"}),onSelected:this.selectFileFromComputer}))),m.a.createElement("div",{className:"p-omnipicker_dialog__list"},this.renderBody())),m.a.createElement(oi.a,{"data-qa":"dialog_footer"},m.a.createElement(si.a,null,m.a.createElement(_e.d,{type:"outline",onClick:this.onModalCancel,"data-qa":"dialog_cancel"},"Cancel"))))}}]),t}(p.PureComponent);_i.displayName="OmniPickerDialog",_i.defaultProps=gi;var vi={fetchFilesPre:function(){return ua.c.apply(void 0,arguments)},fetchFilesPost:function(){return ua.b.apply(void 0,arguments)},saveScrollmark:function(){return ua.l.apply(void 0,arguments)},setFiletype:function(){return ua.m.apply(void 0,arguments)},closeModal:function(){return tn.a.apply(void 0,arguments)},getRecentFilesForUser:function(){return ua.k.apply(void 0,arguments)},openShareDialog:function(){return ca.a.apply(void 0,arguments)},setUser:function(){return ua.n.apply(void 0,arguments)},setisLoading:function(){return ua.p.apply(void 0,arguments)}},yi=Object(g.b)(function(e){return{files:Object(ua.d)(e),scrollmark:Object(ua.h)(e),filetype:Object(ua.e)(e),clogger:Object(re.a)({state:e}),logger:Object(Ct.a)({state:e}),currentUser:Object(y.c)(e),user:Object(ua.i)(e),isLoading:Object(ua.j)(e)}},vi)(_i),ki=Object(gt.b)("Opens the omni-picker file dialog",function(e,t,n){e(Object(tn.e)({element:m.a.createElement(yi,n)}))});ki.meta={name:"openOmniPickerDialog",key:"actionsOpenOmnipickerDialogOpenOmniPickerDialog",description:"Opens the omni-picker file dialog"},ki.propTypes={type:h.b.string,displayType:h.b.string,initialChannelId:h.b.string};var Oi=ki,Ci=n("RB1+"),Ei=n("EHyS"),ji=n("hjTk"),Si=n("x4bP"),Ii=n("cErB"),wi=Object(gt.b)("Creates and opens a legacy Post",function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).openInBrowser;if(Object(Si.a)()){var a=t(),r=Object(we.d)(a),i=Object(De.o)(r,"/files/create/post"+location.search),o=Object(v.a)(a);i=Object(Ii.p)(i,"origin_team",o||r.id);var s=Object(E.a)(a);i=Object(Ii.p)(i,"origin_channel",Object(_a.a)(s)?s:""),Object(ji.a)(i)}else Object(dr.b)(null,n)});wi.meta={name:"createAndOpenLegacyPost",key:"actionsCreateAndOpenLegacyPostCreateAndOpenLegacyPost",description:"Creates and opens a legacy Post"},wi.defaultProps={openInBrowser:!0},wi.propTypes={openInBrowser:h.b.bool};n("GdkL");var Ni=new B.b("menu_file"),Ti=(h.b.string.isRequired,h.b.string,h.b.string,h.b.string,h.b.object,h.b.bool,h.b.bool,h.b.bool,h.b.object,h.b.object.isRequired,h.b.object.isRequired,h.b.func,h.b.func.isRequired,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.bool.isRequired,h.b.bool.isRequired,h.b.string,h.b.bool,h.b.array,h.b.func,h.b.func,h.b.bool,h.b.func,h.b.bool,h.b.func,h.b.object,{threadTs:void 0,viewContext:void 0,disableFileUploadsPref:void 0,menuProps:{},featureDocs:!1,featureSonicInputs:!1,featureSonicSnippets:!1,featureRecentFilesOmnipicker:!1,featurePlusMenuAddAppsLink:!1,hiddenFileInputRef:void 0,createDocPost:d.a,showBoxMenuItem:!1,showDropboxMenuItem:!1,boxAppInstalled:!1,showGdriveMenuItem:!1,showOneDriveMenuItem:!1,openSnippetDialog:d.a,openCreateGDocDialog:d.a,openBoxFilePicker:d.a,openOnedriveFilePicker:d.a,openDropboxFilePicker:d.a,openGdriveFilePicker:d.a,getRecentFilesForUser:d.a,openShareDialog:d.a,featureBoxContentPicker:!1,featureSonicCloudFilesPicker:!1,currentUser:void 0,featureModernGdriveCreate:!1,recentFiles:[],openOmniPickerDialog:d.a,setUser:d.a,setfirstLoad:d.a,setisLoading:d.a,firstLoad:!1,isLoading:!1,isBoxAuthed:!1,currentTeam:void 0}),Ai="A0F82E57C",Ri="A06147X5W",Pi=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.activeCloudServices=[],n.requestAll=null,Object(Kt.a)(n,["selectFileFromComputer","createDoc","createSnippet","createLegacyPost","createGDRiveDocument","createGDRiveSpreadsheet","createGDRivePresentation","renderCreateNewSubmenu","clogAddAppsClick","handleBoxFileProvider","handleDropboxFileProvider","handleGdriveFileProvider","handleOnedriveFileProvider","renderMultipleCloudServices","setRecentFiles","handleRecentFile","handleYourRecentFilesPicker","renderRecents","renderRecentsSection"]),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.featureRecentFilesOmnipicker&&this.setRecentFiles()}},{key:"componentWillUnmount",value:function(){this.requestAll&&this.requestAll.cancel()}},{key:"setRecentFiles",value:function(){var e=this,t=this.props,n=t.currentUser,a=t.firstLoad;this.props.setUser(!0),a||this.props.setisLoading(!0),this.requestAll=this.props.getRecentFilesForUser({user:n,reason:"get-recent-files",forMenu:!0,count:1e3}).then(function(){a||e.props.setfirstLoad(!0)})}},{key:"selectFileFromComputer",value:function(){var e=this.props,t=e.channelId,n=e.threadTs,a=e.viewContext,r=e.hiddenFileInputRef,i=e.clogger,o=e.logger;r&&r.current?(r.current.click(),i.track("PFP_ACTION",{contexts:{growth:{action:"click",trigger:"plus_menu_item_upload"}}})):Object(ae.a)()?o.error("MSG_INPUT_FILE_BTN","Missing hidden input"):fa(t,n,a)}},{key:"createDoc",value:function(){this.props.createDocPost()}},{key:"createSnippet",value:function(){var e=this.props,t=e.clogger,n=e.channelId,a=e.viewContext,r=e.threadTs;t.track("PFP_ACTION",{contexts:{growth:{action:"click",trigger:"plus_menu_item_snippet"}}});var i=Object(Ci.a)({viewContext:a,channelId:n,threadTs:r});this.props.openSnippetDialog({initialText:i&&i.getDisplayValue?i.getDisplayValue():"",initialContents:i&&i.getContents?i.getContents():void 0,initialChannelId:n,threadTs:r,viewContext:a}),i&&i.clear()}},{key:"createLegacyPost",value:function(e){var t=Object(Ei.a)(e);this.props.createAndOpenLegacyPost({openInBrowser:t}),this.props.clogger.track("PFP_ACTION",{contexts:{growth:{action:"click",trigger:"plus_menu_item_space"}}})}},{key:"createGDRiveDocument",value:function(){this.props.openCreateGDocDialog({type:"document",displayType:this.props.featureSonicInputs?Ni.t("Document"):"",initialChannelId:this.props.channelId,threadTs:this.props.threadTs}),this.props.clogger.track("PFP_ACTION",{contexts:{growth:{action:"click",trigger:"plus_menu_subitem_gdrive_document"}}})}},{key:"createGDRiveSpreadsheet",value:function(){this.props.openCreateGDocDialog({type:"spreadsheet",displayType:this.props.featureSonicInputs?Ni.t("Spreadsheet"):"",initialChannelId:this.props.channelId,threadTs:this.props.threadTs}),this.props.clogger.track("PFP_ACTION",{contexts:{growth:{action:"click",trigger:"plus_menu_subitem_gdrive_spreadsheet"}}})}},{key:"createGDRivePresentation",value:function(){this.props.openCreateGDocDialog({type:"presentation",displayType:this.props.featureSonicInputs?Ni.t("Presentation"):"",initialChannelId:this.props.channelId,threadTs:this.props.threadTs}),this.props.clogger.track("PFP_ACTION",{contexts:{growth:{action:"click",trigger:"plus_menu_subitem_gdrive_presentation"}}})}},{key:"handleBoxFileProvider",value:function(){var e=this.props,t=e.channelId,n=e.threadTs,a=e.isBoxAuthed,r=e.boxAppInstalled,i=e.currentTeam,o={fileUploadAction:le.FileUploadAction.PLUS_MENU,fileUploadSrc:le.FileUploadSrc.BOX},s=ce.k?Ri:Ai;return!a&&r?Object(sa.f)(Object(De.o)(i,"/apps/"+s)):this.props.openBoxFilePicker({channelId:t,threadTs:n,metadata:o})}},{key:"handleDropboxFileProvider",value:function(){var e=this.props,t=e.channelId,n=e.threadTs,a={fileUploadAction:le.FileUploadAction.PLUS_MENU,fileUploadSrc:le.FileUploadSrc.DROPBOX};return this.props.openDropboxFilePicker({channelId:t,threadTs:n,metadata:a})}},{key:"handleGdriveFileProvider",value:function(){var e=this.props,t=e.channelId,n=e.threadTs,a={fileUploadAction:le.FileUploadAction.PLUS_MENU,fileUploadSrc:le.FileUploadSrc.GOOGLE_DRIVE};return this.props.openGdriveFilePicker({channelId:t,threadTs:n,metadata:a,reason:"cloud-files-menu/gdrive"})}},{key:"handleOnedriveFileProvider",value:function(){var e=this.props,t=e.channelId,n=e.threadTs,a={fileUploadAction:le.FileUploadAction.PLUS_MENU,fileUploadSrc:le.FileUploadSrc.ONEDRIVE};return this.props.openOnedriveFilePicker({channelId:t,threadTs:n,metadata:a,reason:"cloud-files-menu/onedrive"})}},{key:"handleRecentFile",value:function(e){var t=this.props,n=t.clogger,a=t.viewContext,r=t.channelId,i=t.threadTs,o=Object(Ci.a)({viewContext:a,channelId:r,threadTs:i});n.track(le.EventId.FILE_MENU_SHARE_YOUR_RECENT_FILE,{contexts:{ui_context:{action:le.UiAction.CLICK,step:le.UiStep.FILE_MENU}}}),this.props.openShareDialog({fileId:e.id,showFileType:!0,initialText:o&&o.getDisplayValue?o.getDisplayValue():"",initialContents:o&&o.getContents?o.getContents():void 0})}},{key:"handleYourRecentFilesPicker",value:function(e,t){var n=this.props,a=n.channelId,r=n.threadTs,i=n.viewContext,o=n.hiddenFileInputRef,s=n.disableFileUploadsPref,l=n.clogger,c=t?le.EventId.FILE_MENU_BROWSE_YOUR_FILES:le.EventId.FILE_MENU_OPEN_WORKSPACE_FILES,u="disable_all"!==s;this.props.setUser(t),this.props.openOmniPickerDialog({channelId:a,threadTs:r,viewContext:i,hiddenFileInputRef:o,showUpload:u}),l.track(c,{contexts:{ui_context:{action:le.UiAction.CLICK,step:le.UiStep.FILE_MENU}}})}},{key:"clogAddAppsClick",value:function(){this.props.clogger.track(le.EventId.FILE_MENU_ADD_APPS,{contexts:{ui_context:{action:le.UiAction.CLICK,step:le.UiStep.FILE_MENU}}})}},{key:"renderMultipleCloudServices",value:function(){var e=this,t=this.props,n=t.featureSonicCloudFilesPicker,a=t.featureOfflineMode,r=t.isOffline,i=t.disableFileUploadsPref,o=t.showBoxMenuItem,s=t.showDropboxMenuItem,l=t.showGdriveMenuItem,c=t.showOneDriveMenuItem,u=t.featurePlusMenuAddAppsLink,d="disable_all_except_images"===i,h=o||s||l||c?Ni.t("Add from\u2026"):Ni.t("Add an image from\u2026"),b="/apps/category/"+(ce.k?"At06175UHW":"At0EFRCDPW"),f=u&&!this.activeCloudServices.length?Ni.rt("Add a file from\u2026 <a>+ Add apps</a>",{},function(t){var n=t.text,a=t.key;return m.a.createElement(la.a,{key:a,className:"c-menu_item__addrow",href:b,onClick:e.clogAddAppsClick},n)}):Ni.t("Add a file from\u2026"),g={},_=this.props;g.box=_.showBoxMenuItem,g.dropbox=_.showDropboxMenuItem,g.gdrive=_.showGdriveMenuItem,g.onedrive=_.showOneDriveMenuItem;var v=[{name:"box",props:{label:Ni.t("Box"),icon:m.a.createElement(ta.b,{type:"box"}),onSelected:this.handleBoxFileProvider,enableForSonic:this.props.featureBoxContentPicker,dataQa:"box_picker_menu_item"}},{name:"dropbox",props:{label:Ni.t("Dropbox"),icon:m.a.createElement(ta.b,{type:"dropbox"}),onSelected:this.handleDropboxFileProvider,enableForSonic:!0,dataQa:"dropbox_picker_menu_item"}},{name:"gdrive",props:{label:Ni.t("Google Drive"),icon:m.a.createElement(ta.b,{type:"google-drive"}),onSelected:this.handleGdriveFileProvider,enableForSonic:!0,dataQa:"gdrive_picker_menu_item"}},{name:"onedrive",props:{label:Ni.t("OneDrive"),icon:m.a.createElement(ta.b,{type:"onedrive"}),onSelected:this.handleOnedriveFileProvider,enableForSonic:!0,dataQa:"onedrive_picker_menu_item"}}];this.activeCloudServices=Object(aa.a)(v,function(e){return g[e.name]?g[e.name]:null});var y=Object(ft.a)(this.activeCloudServices,function(e,t){return m.a.createElement(na.b,{key:t,label:e.props.label,icon:e.props.icon,onSelected:e.props.onSelected,className:n&&e.props.enableForSonic?"":ma(),disabled:a&&r,showOfflineIcon:a&&r,"data-qa":e.props.dataQa},n&&e.props.enableForSonic?null:m.a.createElement(ha,null))});return m.a.createElement(p.Fragment,null,m.a.createElement(na.c,{label:d?h:f}),y)}},{key:"renderCreateNewMenuItems",value:function(){var e=this.props,t=e.featureDocs,n=e.featureSonicSnippets,a=e.showGdriveMenuItem,r=e.threadTs,i=e.featureOfflineMode,o=e.isOffline,s=e.featureModernGdriveCreate,l=Ni.t("Post"),c=!r&&m.a.createElement(na.b,{key:"create-new-post",label:l,icon:m.a.createElement(ta.b,{type:"create-post"}),onSelected:t?this.createDoc:this.createLegacyPost,disabled:i&&o,showOfflineIcon:i&&o,"data-qa":"create_new_doc"}),u=(n&&Object(ae.a)()||!r)&&m.a.createElement(na.b,{key:"create-new-snippet",label:Ni.t("Code or text snippet"),icon:m.a.createElement(ta.b,{type:"create-snippet"}),onSelected:this.createSnippet,className:n?void 0:ma(),disabled:i&&o,showOfflineIcon:i&&o,"data-qa":"create_new_snippet"},n?null:m.a.createElement(ha,null)),d=!a||r&&!Object(ae.a)()?[]:[(u||c)&&m.a.createElement(na.d,{key:"gdrive-separator"}),m.a.createElement(na.c,{key:"gdrive-header",label:Ni.t("Google Drive")}),m.a.createElement(na.b,{key:"gdrive_doc",label:Ni.t("Document"),icon:m.a.createElement(ta.b,{type:"google-drive",className:"p-new_file_menu__gdoc_icon"}),onSelected:this.createGDRiveDocument,className:s?"undefined":ma(),disabled:i&&!ma()&&o,showOfflineIcon:i&&o,"data-qa":"google_doc_menu_item"},s?null:m.a.createElement(ha,null)),m.a.createElement(na.b,{key:"gdrive_sheet",label:Ni.t("Spreadsheet"),icon:m.a.createElement(ta.b,{type:"google-drive",className:"p-new_file_menu__gsheet_icon"}),onSelected:this.createGDRiveSpreadsheet,className:s?void 0:ma(),disabled:i&&!ma()&&o,showOfflineIcon:i&&o,"data-qa":"google_sheet_menu_item"},s?null:m.a.createElement(ha,null)),m.a.createElement(na.b,{key:"gdrive_presentation",label:Ni.t("Presentation"),icon:m.a.createElement(ta.b,{type:"google-drive",className:"p-new_file_menu__gpres_icon"}),onSelected:this.createGDRivePresentation,className:s?void 0:ma(),disabled:i&&!ma()&&o,showOfflineIcon:i&&o,"data-qa":"google_presentation_menu_item"},s?null:m.a.createElement(ha,null))];return Object(aa.a)([c,u].concat(d))}},{key:"renderCreateNewSubmenu",value:function(e){var t=this.props.menuProps,n=this.renderCreateNewMenuItems();return m.a.createElement(na.f,ye()({},t,e,{"data-qa":"create_new_submenu"}),n)}},{key:"renderCreateNew",value:function(){var e=this.props,t=e.threadTs,n=e.showGdriveMenuItem,a=this.renderCreateNewMenuItems();if(0===a.length)return null;var r=!t&&Object(ae.a)()&&n?{top:-80}:void 0;return[1===a.length?a[0]:m.a.createElement(da.a,{key:"create-new-submenu",label:Ni.t("Create new..."),icon:m.a.createElement(ta.b,{type:"plus-circle"}),renderSubmenu:this.renderCreateNewSubmenu,"data-qa":"create_new_submenu",forceLeft:!!t,submenuStyle:r}),m.a.createElement(na.d,{key:"create-new-separator"})]}},{key:"renderRecents",value:function(){var e=this,t=this.props,n=t.recentFiles;return[t.isLoading?m.a.createElement(p.Fragment,{key:"recent-placeholders"},m.a.createElement(na.b,{key:"0",disabled:!0},m.a.createElement("span",{className:"c-missing_menu_item__button--loading"})),m.a.createElement(na.b,{key:"1",disabled:!0},m.a.createElement("span",{className:"c-missing_menu_item__button--loading"})),m.a.createElement(na.b,{key:"2",disabled:!0},m.a.createElement("span",{className:"c-missing_menu_item__button--loading"})),m.a.createElement(na.b,{key:"3",disabled:!0},m.a.createElement("span",{className:"c-missing_menu_item__button--loading"}))):Object(ft.a)(n.slice(0,4),function(t){return m.a.createElement(na.b,{key:t.id,label:t.title,icon:m.a.createElement(ta.b,{type:t.filetype,file:"tiny"}),onSelected:function(){return e.handleRecentFile(t)},"data-qa":"recent_file_menu_item"})})]}},{key:"renderRecentsSection",value:function(){var e=this,t=this.props,n=t.recentFiles,a=t.isLoading;return m.a.createElement(p.Fragment,null,this.renderRecents(),!a&&n.length?m.a.createElement(p.Fragment,null,m.a.createElement(na.b,{className:"c-menu_item__browsefiles",key:"browse-files",onSelected:function(t){e.handleYourRecentFilesPicker(t,!0)}},m.a.createElement(la.a,{key:"browse-files-link",href:"/",onClick:function(e){e.preventDefault()}},Ni.t("Browse files"))),m.a.createElement(na.d,{key:"create-new-separator"})):null)}},{key:"render",value:function(){var e=this,t=this.props,n=t.disableFileUploadsPref,a=t.menuProps,r=t.recentFiles,i=t.featureRecentFilesOmnipicker,o=t.isLoading,s="disable_all"!==n,l=Ni.t("Add file",{fallbackHash:"4881d0113be00c1d361cb809405df63a3d923445",fallbackHashNs:"multi_file_upload"});return m.a.createElement(na.f,ye()({},a,{"aria-label":l}),this.renderCreateNew(),i&&(o||r.length)?m.a.createElement(na.c,{label:Ni.t("Your recent files")}):null,i&&this.renderRecentsSection(),this.renderMultipleCloudServices(this.props),i&&m.a.createElement(na.b,{"data-qa":"open_omnipicker_for_workspace_from_menu_item",label:Ni.t("Your workspace"),icon:m.a.createElement(ta.b,{type:"slack"}),onSelected:function(t){e.handleYourRecentFilesPicker(t,!1)}}),s&&m.a.createElement(na.b,{"data-qa":"add_file_from_computer_menu_item",label:Ni.t("Your computer"),icon:m.a.createElement(ta.b,{type:"laptop"}),onSelected:this.selectFileFromComputer}))}}]),t}(p.Component);Pi.displayName="NewFileMenu",Pi.defaultProps=Ti;var Mi=Object(g.b)(function(e){var t=Object(ra.a)(e,"dropbox_legacy_picker"),n=Object(Zt.j)(e,"dropbox_enabled"),a=Object(Zt.j)(e,"box_enabled"),r=Object(ra.a)(e,"box_app_installed"),i=ce.k?Object(ia.e)(e,Ri):Object(ia.e)(e,Ai),o=Object(oa.e)(i),s=n||t,l=Object(ra.a)(e,"onedrive_enabled_team"),c=Object(ra.a)(e,"onedrive_app_installed"),u=l||c;return{disableFileUploadsPref:Object(ra.a)(e,"disable_file_uploads"),featureSonicInputs:Object(y.m)(e,"feature_sonic_inputs"),featureSonicSnippets:Object(y.m)(e,"feature_sonic_snippets"),featurePlusMenuAddAppsLink:Object(y.m)(e,"feature_plus_menu_add_apps_link"),featureRecentFilesOmnipicker:Object(y.m)(e,"feature_recent_files_omnipicker"),featureDocs:Object(y.m)(e,"feature_docs"),featureBoxContentPicker:Object(y.m)(e,"feature_box_content_picker"),featureSonicCloudFilesPicker:Object(y.m)(e,"feature_sonic_cloud_files_picker"),featureModernGdriveCreate:Object(y.m)(e,"feature_modern_gdrive_create"),clogger:Object(re.a)({state:e}),logger:Object(Ct.a)({state:e}),showBoxMenuItem:r||a&&o,showDropboxMenuItem:s,showGdriveMenuItem:Object(ra.a)(e,"gdrive_enabled_team"),isBoxAuthed:a,boxAppInstalled:r,showOneDriveMenuItem:u,featureOfflineMode:Object(y.m)(e,"feature_offline_mode"),currentUser:Object(y.c)(e),isOffline:!Object(Qt.c)(e),recentFiles:Object(ua.g)(e),firstLoad:Object(ua.f)(e),isLoading:Object(ua.j)(e),currentTeam:Object(we.d)(e)}},function(e){return{createDocPost:function(){return e(va.apply(void 0,arguments))},createAndOpenLegacyPost:function(){return e(wi.apply(void 0,arguments))},openSnippetDialog:function(){return e(cn.apply(void 0,arguments))},openCreateGDocDialog:function(){return e($a.apply(void 0,arguments))},openBoxFilePicker:function(){return e(jr.apply(void 0,arguments))},openDropboxFilePicker:function(){return e(Pr.apply(void 0,arguments))},openGdriveFilePicker:function(){return e(Hr.apply(void 0,arguments))},openOnedriveFilePicker:function(){return e($r.apply(void 0,arguments))},getRecentFilesForUser:function(){return e(ua.k.apply(void 0,arguments))},openShareDialog:function(){return e(ca.a.apply(void 0,arguments))},openOmniPickerDialog:function(){return e(Oi.apply(void 0,arguments))},setUser:function(){return e(ua.n.apply(void 0,arguments))},setFiletype:function(){return e(ua.m.apply(void 0,arguments))},setfirstLoad:function(){return e(ua.o.apply(void 0,arguments))},setisLoading:function(){return e(ua.p.apply(void 0,arguments))}}})(Pi),xi=n("anFW"),Fi=n("bmfP"),Li=n("auxT"),Di=n("DCka"),Ui=n("0Qg5"),Bi=n("LWrH"),qi=n("RAhH"),Hi=new B.b("message_input_plus_button"),Wi=(h.b.string,h.b.string,h.b.string,h.b.bool,h.b.bool,h.b.bool,h.b.func,h.b.func,h.b.bool,h.b.bool,h.b.object.isRequired,h.b.bool,h.b.string,{channelId:void 0,threadTs:void 0,viewContext:void 0,featureOfflineMode:!1,isComposerPage:!1,isOpen:!1,onFileMenuOpen:d.a,onFileMenuClose:d.a,forceOpen:!1,useLegacyCreate:!1,featureWysiwygTooltips:!1,keyboardLocale:void 0}),Gi=function(e){function t(){r()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Object(Kt.a)(e,["renderMenu","renderTip"]),e.hiddenFileInputRef=m.a.createRef(),e}return u()(t,e),o()(t,[{key:"renderMenu",value:function(e){var t=this.props,n=t.channelId,a=t.threadTs,r=t.logger,i=t.viewContext;return n?m.a.createElement(Di.a,{subtype:"MSG_INPUT_FILE_BTN"},m.a.createElement(Mi,{menuProps:e,channelId:n,threadTs:a,viewContext:i,hiddenFileInputRef:this.hiddenFileInputRef})):(r.error("MSG_INPUT_FILE_BTN","Missing channelId in "+i),null)}},{key:"renderTip",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).isOffline,t=Object(Ui.a)("Cmd",this.props.keyboardLocale),n=m.a.createElement("div",{className:"c-tooltip__tip_shortcut"},t+"+U"),a=Hi.rt("Attach file {keyboardShortcut}",{keyboardShortcut:n,fallbackHash:"0c431f4969959dd3463afd487244f98660be5ae0"});return e?m.a.createElement(Li.a,{tooltipLabel:a}):a}},{key:"render",value:function(){var e=this.props,t=e.channelId,n=e.threadTs,a=e.viewContext,r=e.featureOfflineMode,i=e.isComposerPage,o=e.isOpen,s=e.onFileMenuOpen,l=e.onFileMenuClose,c=e.forceOpen,u=e.useLegacyCreate,d=e.featureWysiwygTooltips,h=f()("p-message_input_file_button",{"p-message_input_file_button--active":o}),b=m.a.createElement(_e.c,{className:h,"aria-label":Hi.t("File menu"),tabIndex:"-1","data-qa":"msg_input_file_btn"},m.a.createElement(ta.b,{className:"p-message_input_file_icon",type:u?"plus-thick":"paperclip"})),g=b;d&&(g=m.a.createElement(qi.c,{tip:this.renderTip(),position:"top",offsetY:-7,delay:500,zIndex:"above_fs"},b));var _=m.a.createElement(na.e,{renderMenu:this.renderMenu,position:"top-left",offsetY:-6,onOpen:s,onClose:l,forceOpen:c},g);r&&(_=m.a.createElement(p.Fragment,null,m.a.createElement(Fi.b,null,_),m.a.createElement(Fi.a,null,m.a.createElement(na.e,{renderMenu:this.renderMenu,position:"top-left",offsetY:-6,onOpen:s,onClose:l},m.a.createElement(qi.c,{tip:this.renderTip({isOffline:!0})},b)))));var v=m.a.createElement(qi.c,{offsetY:-6,position:"top",tip:"Files support coming soon \u2728!"},b);return m.a.createElement(p.Fragment,null,i?v:_,m.a.createElement(xi.a,{ref:this.hiddenFileInputRef,channelId:t,threadTs:n,viewContext:a}))}}]),t}(p.Component);Gi.displayName="MessageInputFileButton",Gi.defaultProps=Wi;var Ki=Object(g.b)(function(e){return{featureOfflineMode:Object(y.m)(e,"feature_offline_mode"),featureWysiwygTooltips:Object(y.m)(e,"feature_wysiwyg_tooltips"),logger:Object(Ct.a)({state:e})}})(Gi),Vi=Object(Bi.a)(Ki),zi=new B.b("msg_input"),Yi=(h.b.func.isRequired,h.b.bool,h.b.bool,h.b.string,h.b.bool,h.b.string,h.b.bool,{isDisabled:!1,isOffline:!1,className:void 0,featureOfflineMode:!1,buttonSize:void 0,showTooltip:!1}),Qi=function(e){var t=e.isDisabled,n=e.isOffline,a=e.className,r=e.sendMessage,i=e.featureOfflineMode,o=e.buttonSize,s=e.showTooltip,l=zi.t("Send"),c=void 0;s&&(c=Object(ce.p)()?zi.t("\u2318Enter"):zi.t("Ctrl+Enter"));var u="top",d=m.a.createElement(_e.d,{className:a,pillarClassName:"p-message_input__send",disabled:t||n,onClick:r,size:o},l);return i&&n&&(d=m.a.createElement("div",{style:{marginLeft:"auto"}},d),u="top-right",c=m.a.createElement(Li.a,{tooltipLabel:l})),t&&!i?d:c?m.a.createElement(qi.c,{tip:c,position:u},d):d};Qi.displayName="MessageInputSendButton",Qi.defaultProps=Yi;var Xi=Object(g.b)(function(e){return{isOffline:!Object(Qt.c)(e),featureOfflineMode:Object(y.m)(e,"feature_offline_mode"),showTooltip:Object(Zt.j)(e,"msg_input_send_btn")}})(Qi),Ji=ea,Zi=new B.b("msg_input");function $i(e){var t=e.channelName;return e.isSelfDm?Zi.t("Jot something down"):t?Zi.t("Message {msg}",{msg:Object(B.p)(t)}):Zi.t("Message channel")}var eo=n("Fdc0"),to=(n("F5ou"),new B.b("welcome_place")),no=function(e){function t(){r()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.onMessageSuggestionClicked=function(t){var n=e.props,a=n.clogger,r=n.pageViewingSessionId;(0,n.prefillMessageInput)(t.prefillText||t.buttonText),a.track("WELCOME_PLACE",{contexts:{ui_context:{action:le.UiAction.CLICK,ui_element:le.UiElement.WELCOME_PLACE_ACTION_SEND_MESSAGE,ui_properties:{element_type:le.ElementType.BUTTON,element_name:t.id}},welcome_place:{welcome_session_id:r}}})},e}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this,t=this.props;return function(e){var t=e.inviterUsername,n=e.hasMessagesInChannel,a=e.featureNewxp2372v2;return[{id:"JUST_ARRIVED",buttonText:a?to.t("\ud83d\udc83 Just arrived!"):"",isVisible:!!n},{id:"ROLL_CALL",buttonText:a?to.t("\ud83d\ude4b Roll call! Who else is here?"):"",isVisible:!n},{id:"IM_HERE",buttonText:a?to.t("\ud83d\udc4b I\u2019m here! What\u2019d I miss?"):"",isVisible:!t},{id:"THANKS_FOR_THE_INVITE",buttonText:a?to.rt("\ud83d\udc4b Thanks for the invite, <a>{username}</a>!",{username:t}):"",prefillText:a?to.t("\ud83d\udc4b Thanks for the invite, {username}!",{username:t}):"",isVisible:!!t}].filter(function(e){return e.isVisible})}({hasMessagesInChannel:t.hasMessagesToRender,inviterUsername:t.inviterUsername,featureNewxp2372v2:t.featureNewxp2372v2}).map(function(t){return m.a.createElement(_e.d,{className:"message-suggestion-button margin_right_50 margin_top_50",size:"small",key:t.id,onClick:function(){return e.onMessageSuggestionClicked(t)}},t.buttonText)})}}]),t}(p.Component);no.displayName="MessageSuggestions";var ao=Object(g.b)(function(e){var t=Object(ie.c)(e);return{inviterUsername:Object(eo.W)(e,t,!1,!0),featureNewxp2372v2:Object(y.m)(e,"feature_newxp2372_v2"),clogger:Object(re.a)({state:e}),pageViewingSessionId:Object(ie.i)(e)}})(no),ro=(n("XwvF"),n("gl+W")),io=n("lU/5"),oo=n("KmK8"),so=n("RhZ7"),lo=n("TOh8"),co=n("8CL7"),uo=n("VrmM"),po=n("Gq2+"),mo=n("Aeia"),ho=n("0dpy"),bo=function(e){var t=e.msg;return m.a.createElement(ro.a,{className:"welcome-message"},m.a.createElement(io.a,{msg:t},m.a.createElement(oo.a,{light:m.a.createElement(so.a,{msg:t})},m.a.createElement(lo.a,{msg:t}),"\xa0\xa0",m.a.createElement(ho.a,{msg:t,clickable:!0}),m.a.createElement("br",null),m.a.createElement(co.a,{msg:t}),m.a.createElement(uo.a,{msg:t}),m.a.createElement(po.a,{msg:t}),m.a.createElement(mo.b,{msg:t}))))},fo=new B.b("welcome_place"),go=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.channelCreator,n=e.channelName,a=e.featureNewxp2372v2,r=e.isLoading,i=e.isV2TreatmentB,o=e.lastMessages,s=e.onChannelLinkClicked,l=0!==o.length,c=f()("padding_left_150 padding_right_150 padding_top_100 padding_bottom_100",{border_bottom:!r&&!l}),u=a?fo.t("Say hi, post a GIF, go wild. The world (or at least this channel) is your oyster."):null,d=a?fo.t("Created by {username}",{username:t}):null,p=i?u:d,h=m.a.createElement("div",{className:"welcome-place-channel-preview padding_100 border_top border_bottom"},o.map(function(e){return m.a.createElement(bo,{msg:e,key:e.ts})}));return m.a.createElement("div",{className:"sk_primary_background"},m.a.createElement("div",{className:c},m.a.createElement("div",{className:"display_flex justify_content_between"},m.a.createElement("span",null,m.a.createElement("strong",null,n)),m.a.createElement(la.a,{onClick:function(){return s("view_channel")}},a?fo.t("View channel"):null)),m.a.createElement("p",{className:"welcome-place-channel-description"},p)),r?m.a.createElement("div",{className:"display_flex align_items_center justify_content_center full_height padding_100 border_top border_bottom"},m.a.createElement(ci.a,null)):l&&h)}}]),t}(p.Component);go.displayName="MessageSuggestionsHeader";var _o={joinAndSwitchToChannel:ot.a},vo=Object(g.b)(function(e){var t=Object(ie.f)(e)||Object(E.a)(e),n=Object(G.e)(e,t),a=Object(K.x)(e,n),r=Object(K.r)(n);return{channelId:t,channelName:a,channelCreator:Object(eo.W)(e,r,!1,!1),featureNewxp2372v2:Object(y.m)(e,"feature_newxp2372_v2"),isV2TreatmentB:Object(ie.p)(e),clogger:Object(re.a)({state:e}),pageViewingSessionId:Object(ie.i)(e)}},_o)(go),yo=(n("08gB"),new B.b("welcome_place")),ko={sendWelcomePlaceInputMessage:oe.h,fetchHistory:Ht,joinAndSwitchToChannel:ot.a},Oo=Object(g.b)(function(e){var t=Object(ie.f)(e),n=Object(G.e)(e,t),a=Object(K.x)(e,n),r=Object(we.d)(e),i=Object(De.g)(r),o=Object(K.o)({teamDomain:i,channelId:t}),s=nt(e,t,3),l=s.messages,c=s.slice,u=l.length>0;return{channelId:t,channelName:a,channelUrl:o,featureWysiwygComposer:Object(lt.a)(e),isChannelNonEmpty:u,clogger:Object(re.a)({state:e}),pageViewingSessionId:Object(ie.i)(e),lastMessages:l,needToRefetchMessages:!c||!c.reachedEnd}},ko)(function(e){var t=e.channelId,n=e.channelName,a=e.fetchHistory,r=e.sendWelcomePlaceInputMessage,i=e.featureWysiwygComposer,o=e.featureNewxp2372v2,s=e.isChannelNonEmpty,l=e.joinAndSwitchToChannel,c=e.clogger,u=e.pageViewingSessionId,d=e.needToRefetchMessages,h=e.lastMessages,b=Object(p.useState)(!0),f=it()(b,2),g=f[0],_=f[1],v=Object(p.useState)(!1),y=it()(v,2),k=y[0],O=y[1],C=Object(p.useState)(d),E=it()(C,2),j=E[0],S=E[1];Object(p.useEffect)(function(){d&&!k&&(O(!0),a({channelId:t,type:"channel"}).then(function(){O(!1),S(!1)}))},[d,k,a,t]);var I=Object(p.useRef)(null),w=function(){return I.current.getWrappedInstance()},N=function(){if(!g){var e=w().getContents(),n=i?new Bn.Delta(e.contents):null;r({text:Object(ct.a)(e),channelId:t,delta:n}),c.track("WELCOME_PLACE",{contexts:{ui_context:{action:le.UiAction.CLICK,ui_element:le.UiElement.WELCOME_PLACE_ACTION_SEND_MESSAGE,ui_properties:{element_type:le.ElementType.BUTTON,element_name:"send"}},welcome_place:{welcome_session_id:u}}})}},T=function(e){l({channelId:t}),c.track("WELCOME_PLACE",{contexts:{ui_context:{action:le.UiAction.CLICK,ui_element:le.UiElement.WELCOME_PLACE_ACTION_SEND_MESSAGE,ui_properties:{element_type:le.ElementType.LINK,element_name:e}},welcome_place:{welcome_session_id:u}}})};return m.a.createElement("div",{className:"welcome-place-send-message-card"},m.a.createElement(vo,{isLoading:j,onChannelLinkClicked:T,lastMessages:h}),m.a.createElement("div",{className:"welcome-place-send-message-pane padding_left_150 padding_right_150 padding_top_100 padding_bottom_100"},m.a.createElement("p",null,o?yo.rt("Your message will be posted in {channelName}.",{channelName:m.a.createElement(la.a,{onClick:function(){return T("channel_header")}},n)}):null),m.a.createElement("div",{className:"display_flex align_items_center margin_bottom_50"},m.a.createElement(Ji,{className:"welcome-place-message-input margin_right_100",enableEmojiButton:!0,enableFileButton:!1,enableMentionButton:!0,enableSendButton:!1,enableSnippetCreation:!1,enableJumbomoji:!1,placeholder:$i({channelName:n,isSelfDm:!1}),ref:I,sendMessage:N,onTextChange:function(e){return _(0===e.length)},enableComposerButton:i}),m.a.createElement(_e.d,{type:"primary",onClick:N},o?yo.t("Send"):null)),m.a.createElement(ao,{hasMessagesToRender:s,prefillMessageInput:function(e){var t=w();t.value(Object(st.b)(e)),t.setCursorAtEnd()}})))}),Co=new B.b("welcome_place");var Eo=Object(g.b)(function(e){var t=Object(ie.f)(e);return{isChannelNonEmpty:at(e,t),channelId:t,featureNewxp2372v2:Object(y.m)(e,"feature_newxp2372_v2")}})(function(e){var t,n=e.workflowTask,a=e.featureNewxp2372v2,r=e.isChannelNonEmpty,i=a?Co.rt("<b>Send a message</b> to get the conversation started."):null,o=a?Co.rt("<b>Send a message</b> to let your team know you\u2019re here."):null,s={body:r?o:i,button:null,tip:null},l={body:a?Co.rt("<b>Sent a message</b>"):null,button:null,tip:null},c=(t={},fe()(t,de.c.Pending,s),fe()(t,de.c.InProgress,s),fe()(t,de.c.Completed,l),t),u=Ee(c,n.state,"button"),p=Ee(c,n.state,"body");return n.state!==de.c.Completed?m.a.createElement(Ce,{workflowTask:n,onButtonClicked:d.a,buttonCopy:u,bodyCopy:p},m.a.createElement(Oo,{featureNewxp2372v2:a})):m.a.createElement(Ce,{workflowTask:n,onButtonClicked:d.a,buttonCopy:u,bodyCopy:p})}),jo=new B.b("welcome_place"),So=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.workflowItems,n=e.featureNewxp2372v2,a=e.isInTreatmentA,r=e.isInTreatmentB,i=e.isInTreatmentC,o=e.progress,s="",l="";n&&(a&&(s=jo.rt("<b>Ready for more?</b> Let\u2019s get you set up.")),(r||i)&&(l=jo.rt("<b>Let\u2019s get you set up.</b> Follow the steps below to find your people, say hello, and get up and running.")));var c=t.slice();return c.sort(pe),m.a.createElement(he,{title:s,subtitle:l},m.a.createElement("div",{className:"border_bottom padding_bottom_100 caption"},n?jo.rt("<span>{completedStepsCount} of {totalStepsCount}</span> complete",{completedStepsCount:o.completed,totalStepsCount:o.total},function(e){var t=e.text;return m.a.createElement("span",{className:"bold"},t)}):""),m.a.createElement("div",{className:"c-workflow-item-container"},c.map(function(e){var t=e.subtype,n=null;return t===de.d.SeeWelcomePlace?n=m.a.createElement(Ae,{key:"workflow_item_card_"+t,workflowTask:e}):t===de.d.JoinChannel?n=m.a.createElement(Ie,{key:"workflow_item_card_"+t,workflowTask:e}):t===de.d.SendMessage?n=m.a.createElement(Eo,{key:"workflow_item_card_"+t,workflowTask:e}):t===de.d.EnableNotifications?n=m.a.createElement(Le,{key:"workflow_item_card_"+t,workflowTask:e}):t===de.d.AddAppFileManagement?n=m.a.createElement(Ge,{key:"workflow_item_card_"+t,workflowTask:e}):t===de.d.DownloadDesktopApp&&(n=m.a.createElement(Xe,{key:"workflow_item_card_"+t,workflowTask:e})),n})))}}]),t}(p.Component);So.displayName="WorkflowItemContainer";var Io=Object(g.b)(function(e){return{featureNewxp2372v2:Object(y.m)(e,"feature_newxp2372_v2"),isInTreatmentA:Object(ie.o)(e),isInTreatmentB:Object(ie.p)(e),isInTreatmentC:Object(ie.q)(e),progress:Object(ie.m)(e)}})(So),wo=(n("plp+"),function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.hasNoPadding,a=e.hasNoBorder,r=e.hasNoBackground,i=f()("welcome-card extra-rounded overflow_hidden",t,{padding_125:!n,bordered:!a,sk_white_bg:!r});return m.a.createElement("div",{className:i},this.props.children)}}]),t}(p.Component));wo.displayName="WelcomeCard";var No=wo,To=(n("gBrz"),new B.b("welcome_place")),Ao=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.showPlayer=function(){var e=n.state.showPlayer,t=n.props,a=t.clogger,r=t.pageViewingSessionId;n.setState(function(){return{showPlayer:!e}}),a.track("WELCOME_PLACE",{contexts:{ui_context:{action:le.UiAction.CLICK,ui_element:le.UiElement.WELCOME_PLACE_VIDEO,ui_properties:{element_value:"start",element_type:le.ElementType.VIDEO,element_name:"Team Chat & Channels | Slack Features"}},welcome_place:{welcome_session_id:r}}})},n.containerRef=m.a.createRef(),n.state={showPlayer:!1},n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.addElementToVisibilityLogging({element:this.containerRef.current,uiContext:{ui_element:le.UiElement.WELCOME_PLACE_VIDEO}})}},{key:"componentWillUnmount",value:function(){this.props.removeElementFromVisibilityLogging(this.containerRef.current)}},{key:"render",value:function(){var e=this.state.showPlayer,t=this.props,n=t.youtubeEmbedUrl,a=t.className,r=t.isFlexpaneOpen,i=f()("video-player__title-card video-player__content",{"player-is-active":e}),o=f()("video-player__iframe__container video-player__content",{"player-is-active":e}),s=f()("video-player",{flexpaneOpen:r}),l=n+"&modestbranding=1&rel=0",c=m.a.createElement(p.Fragment,null,m.a.createElement("h1",{className:"sk_white_always margin_bottom_50"},To.rt("Welcome to Slack!")),m.a.createElement("p",{className:"sk_white_always margin_bottom_75"},To.t("Slack helps your team communicate, connect, and do your best work together.")),m.a.createElement(_e.d,{onClick:this.showPlayer},To.t("Watch Video",{note:"Button copy for call-to-action on video module.",fallbackHash:"5ccd18c8a398d9f789a385b18ecb4678bd622f21"})));return m.a.createElement(No,{className:a,hasNoPadding:!0,hasNoBorder:!0,hasNoBackground:!0},m.a.createElement("link",{rel:"preload",href:l+"&autoplay=1",as:"document"}),m.a.createElement("div",{className:s,ref:this.containerRef},m.a.createElement("div",{className:"video-player__container"},m.a.createElement("div",{className:i,role:"region"},c),m.a.createElement("div",{className:o},m.a.createElement("iframe",{className:"full_height",style:{height:"100%",width:"100%"},src:l+(e?"&autoplay=1":""),frameBorder:"0",allowFullScreen:!0,title:To.t("Team Chat & Channels | Slack Features",{note:"A video by Slack, on Youtube, that explains Slack features."})})))))}}]),t}(p.Component);Ao.displayName="VideoCard";var Ro=Object(g.b)(function(e){return{clogger:Object(re.a)({state:e}),pageViewingSessionId:Object(ie.i)(e),isFlexpaneOpen:Object(A.j)(e)}},{})(Oe()(Ao)),Po=n("xWuZ"),Mo=n("ZBlo"),xo=n("G4ux"),Fo=n("9E9B"),Lo=n("kDop"),Do=n("3dqR"),Uo=n("bkaq"),Bo=new B.b("welcome_place"),qo=function(e){function t(){r()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.startIm=function(){var t=e.props,n=t.member,a=t.clogger,r=t.idx,i=t.pageViewingSessionId;e.props.startImByMemberId({memberId:n.id}),a.track("WELCOME_PLACE",{contexts:{ui_context:{action:le.UiAction.CLICK,ui_element:le.UiElement.WELCOME_PLACE_PROFILE_CARD,ui_properties:{element_value:n.id,element_index:r,element_type:le.ElementType.BUTTON}},welcome_place:{welcome_session_id:i}}})},e}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.member,n=e.type,a=e.channels,r=e.teamDomain,i=t.profile,o=n?m.a.createElement("p",{className:"member-card__content"},Bo.t("Invited you to Slack",{fallbackHash:"9064cf8eb6c496f261172fb4d28eb5e38c796b7e"})):null,s=1===a.length?Bo.t("A channel they're in: ",{fallbackHash:"0b353ec7cd241b45e73b94a056984793bedee7a4"}):Bo.t("A few channels they're in: ",{fallbackHash:"0b353ec7cd241b45e73b94a056984793bedee7a4"}),l=a.map(function(e,t){var n=Object(K.o)({channelId:e,teamDomain:r});return m.a.createElement(p.Fragment,{key:"fragment-"+e},m.a.createElement(la.a,{key:"link-"+e,href:n,className:"no_wrap"},m.a.createElement(Lo.a,{key:"entity-"+e,channelId:e})),t+1===a.length?".":", ")});return m.a.createElement(No,{className:"member-card-container flex_one",hasNoPadding:!0},m.a.createElement("div",{className:"member-card"},m.a.createElement(qi.c,{tip:Bo.rt("Message {name}",{name:i.real_name}),position:"top"},m.a.createElement(la.a,{onClick:this.startIm,className:"member-card__top-link"},m.a.createElement("div",{className:"member-card__top"},m.a.createElement(Do.b,{size:56,isInteractive:!1,imageUrl:i.image_72,imageUrl2x:i.image_192,className:"member-card__avatar"}),m.a.createElement("div",{className:"flex_one"},m.a.createElement(Uo.a,{member:t,className:"member-card__name"}),o)))),m.a.createElement("div",{className:"member-card__bottom"},m.a.createElement("p",{className:"member-card__content"},s,l))))}}]),t}(p.Component);qo.displayName="MemberCard";var Ho={startImByMemberId:Fo.startImByMemberId},Wo=Object(g.b)(function(e,t){var n=t.id,a=Object(xo.d)(e,n);return{teamDomain:Object(De.g)(Object(we.i)(e,a.team_id)),member:a,clogger:Object(re.a)({state:e}),pageViewingSessionId:Object(ie.i)(e)}},Ho)(qo),Go=(n("iJ13"),new B.b("welcome_place")),Ko=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.showMoreUsers=function(){var e=n.props,t=e.clogger,a=e.pageViewingSessionId;n.setState(function(){return{showMore:!0}}),t.track("WELCOME_PLACE",{contexts:{ui_context:{action:le.UiAction.CLICK,ui_element:le.UiElement.WELCOME_PLACE_MEMBERS_SHOW_ALL,ui_properties:{element_type:le.ElementType.LINK}},welcome_place:{welcome_session_id:a}}})},n.showMemberDirectory=function(){var e=n.props,t=e.clogger,a=e.pageViewingSessionId;t.track("WELCOME_PLACE",{contexts:{ui_context:{action:le.UiAction.CLICK,ui_element:le.UiElement.WELCOME_PLACE_MEMBERS_SHOW_MEMBER_DIRECTORY,ui_properties:{element_type:le.ElementType.LINK}},welcome_place:{welcome_session_id:a}}}),n.props.showMemberDirectory()},n.containerRef=m.a.createRef(),n.state={showMore:!1,initialUsersCards:[],additionalUserCards:[],suggestOrgChart:!1},n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.addElementToVisibilityLogging({element:this.containerRef.current,uiContext:{ui_element:le.UiElement.WELCOME_PLACE_MEMBERS_BLOCK},visibilityRatio:.33})}},{key:"componentWillUnmount",value:function(){this.props.removeElementFromVisibilityLogging(this.containerRef.current)}},{key:"render",value:function(){var e=this,t=this.props.className,n=this.state,a=n.initialUsersCards,r=n.additionalUserCards,i=n.suggestOrgChart,o=n.showMore;return m.a.createElement(p.Fragment,null,m.a.createElement("div",{className:f()("member-card-grid",t,{"member-card-grid-1":1===a.length,"member-card-grid-2":2===a.length}),ref:this.containerRef},a.map(function(e,t){return m.a.createElement(Wo,{id:e.id,idx:t,key:e.id,type:e.type,channels:e.channels})}),o&&r.map(function(e,t){return m.a.createElement(Wo,{id:e.id,idx:t+a.length,key:e.id,channels:e.channels})})),function(){var t=o&&i?Go.t("View directory"):Go.t("Show more");if(r.length){var n=e.showMoreUsers;return o&&!i?null:(o&&i&&(n=e.showMemberDirectory),m.a.createElement("div",{className:"align_center margin_top_100 member-card__show-more-link"},m.a.createElement(la.a,{onClick:n},t),m.a.createElement(ta.b,{type:"chevron-down"})))}return null}())}}],[{key:"getDerivedStateFromProps",value:function(e){var t=Object(Mo.a)(e.userCards,6),n=t.shift()||[],a=[];return t.length&&(a=Object(Mo.a)(Object(Po.a)(t),12)),{initialUsersCards:n,additionalUserCards:a.shift()||[],suggestOrgChart:!!a.length}}}]),t}(p.Component);Ko.displayName="MemberRow";var Vo=Object(g.b)(function(e){return{clogger:Object(re.a)({state:e}),pageViewingSessionId:Object(ie.i)(e)}},function(e){return{showMemberDirectory:function(){e(Object(jn.i)())}}})(Oe()(Ko)),zo=n("ftfc"),Yo=n("7nxQ"),Qo=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.clogLinkClick=function(e){var t=e.url,a=e.index,r=e.query,i=e.articleId;n.props.clogger.track("WELCOME_PLACE",{contexts:{ui_context:{action:le.UiAction.CLICK,ui_element:le.UiElement.WELCOME_PLACE_HELP_LINK,ui_properties:{element_type:le.ElementType.LINK,element_value:i.toString(),element_index:a},article_url:t,search_terms:r,locale:Object(Yo.a)()},welcome_place:{welcome_session_id:n.props.pageViewingSessionId}}})},n.containerRef=m.a.createRef(),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.addElementToVisibilityLogging({element:this.containerRef.current,uiContext:{ui_element:le.UiElement.WELCOME_PLACE_HELP_BLOCK},visibilityRatio:.5})}},{key:"componentWillUnmount",value:function(){this.props.removeElementFromVisibilityLogging(this.containerRef.current)}},{key:"render",value:function(){var e=this.props.defaultArticlesData;return m.a.createElement("div",{ref:this.containerRef,className:"welcome-place__search_container"},m.a.createElement(zo.a,{defaultArticlesData:e,onOpenLink:this.clogLinkClick,noTopMargin:!0}))}}]),t}(p.Component);Qo.displayName="HelpSearchCard";var Xo=Object(g.b)(function(e){return{clogger:Object(re.a)({state:e}),pageViewingSessionId:Object(ie.i)(e)}})(Oe()(Qo)),Jo=(n("b4DV"),new B.b("welcome_place")),Zo=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.featureNewxp2372v2,n=e.clientTheme,a=e.isAnimating,r="dark"===n?cdn_url+"/37f0b/img/welcome-sidebar-dark.png":cdn_url+"/37f0b/img/welcome-sidebar.png",i="dark"===n?cdn_url+"/37f0b/img/welcome-sidebar-dark@2x.png":cdn_url+"/37f0b/img/welcome-sidebar@2x.png";return m.a.createElement("div",{className:"welcome-place-header display_flex align_items_center"},m.a.createElement("div",{className:"welcome-place-header__text"},m.a.createElement("h1",{className:"margin_bottom_75"},t?Jo.rt("Welcome to Slack"):""),m.a.createElement("p",{className:"welcome-place-header__text__subtitle margin_bottom_100"},t?Jo.rt("To the left are your channels \u2014 that\u2019s where your teammates send messages, share files, and get work done."):""),m.a.createElement("p",{className:"welcome-place-header__text__subtitle black"},Jo.rt("Go forth and explore.")),m.a.createElement(ue.a,{type:"arrow-left-medium",className:f()("welcome-place-header__text__arrow",{"welcome-place-header__text__arrow--animating":a}),inline:!0,size:"inherit"})),m.a.createElement("img",{alt:"",className:"welcome-place-header__img",src:r,srcSet:r+", "+i+" 2x"}))}}]),t}(p.Component);Zo.displayName="WelcomeHeader";var $o=Object(g.b)(function(e){return{featureNewxp2372v2:Object(y.m)(e,"feature_newxp2372_v2"),clientTheme:Object(D.c)(e),isAnimating:Object(ie.a)(e)}})(Zo),es=(n("3rHJ"),n("HI9p")),ts=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.elementsForLogging=[],n.addElementForLogging=function(e){n.elementsForLogging.push(e),requestAnimationFrame(function(){n.props.scrollContainerEl&&n.checkElementsForClogging(n.props.scrollContainerEl)})},n.removeElementFromLogging=function(e){if(e){var t=Object(es.a)(n.elementsForLogging,function(t){return t.element===e});-1!==t&&n.elementsForLogging.splice(t,1)}},n.onScrollListenerDebounced=Object(Gt.a)(function(e){n.checkElementsForClogging(e.target)},1e3),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.setupEventListeners()}},{key:"componentDidUpdate",value:function(e){var t=this;e.scrollContainerEl!==this.props.scrollContainerEl&&(e.scrollContainerEl&&e.scrollContainerEl.removeEventListener("scroll",this.onScrollListenerDebounced),this.setupEventListeners(),requestAnimationFrame(function(){t.props.scrollContainerEl&&t.checkElementsForClogging(t.props.scrollContainerEl)}))}},{key:"componentWillUnmount",value:function(){this.props.scrollContainerEl&&this.props.scrollContainerEl.removeEventListener("scroll",this.onScrollListenerDebounced)}},{key:"checkElementsForClogging",value:function(e){var t=this,n=e.getClientRects()[0];n&&this.elementsForLogging.slice().forEach(function(e){var a=e.element,r=e.uiContext,i=e.visibilityRatio;if(a){var o=a.getClientRects()[0];if(o){var s=i||.8,l=o.top<n.top&&o.bottom>n.bottom,c=o.top>n.top&&o.bottom<n.bottom,u=0;l||c?u=1:o.top<n.top&&o.bottom>n.top&&o.bottom<n.bottom?u=(o.bottom-n.top)/(o.bottom-o.top):o.bottom>n.bottom&&o.top>n.top&&o.top<n.bottom&&(u=(n.bottom-o.top)/(o.bottom-o.top)),u>=s&&(t.removeElementFromLogging(a),t.props.clogger.track("WELCOME_PLACE",{contexts:{ui_context:ye()(ye()({},r),{action:le.UiAction.IMPRESSION}),welcome_place:{welcome_session_id:t.props.pageViewingSessionId}}}))}}})}},{key:"setupEventListeners",value:function(){this.props.scrollContainerEl&&this.props.scrollContainerEl.addEventListener("scroll",this.onScrollListenerDebounced)}},{key:"render",value:function(){return m.a.createElement(ke.Provider,{value:{scrollContainerEl:this.props.scrollContainerEl,addElementToVisibilityLogging:this.addElementForLogging,removeElementFromVisibilityLogging:this.removeElementFromLogging}},this.props.children)}}]),t}(p.Component);ts.displayName="VisibilityLoggerProviderBase";var ns=Object(g.b)(function(e){return{clogger:Object(re.a)({state:e}),pageViewingSessionId:Object(ie.i)(e)}})(ts);var as=new B.b("welcome_place"),rs=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClickAnimationReloadIcon=function(){ce.k&&(n.props.setAnimationState(!1),setTimeout(function(){n.props.setAnimationState(!0)},100))},n.containerRef=m.a.createRef(),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.pageEntryPoint,n=e.pageViewingSessionId,a=e.firstClientLaunch,r=e.isInTreatmentA,i=e.setAnimationState,o=e.setScrollContainerElement;this.props.maybeRefreshWelcomePlaceData(),this.props.clogger.track("WELCOME_PLACE",{contexts:{ui_context:{action:le.UiAction.IMPRESSION,ui_element:le.UiElement.WELCOME_PLACE_PAGE},welcome_place:{welcome_session_id:n,entry_point:de.b[t||"direct"]}}}),this.props.setPageEntryPoint("direct"),r&&a&&i(!0),o(this.containerRef.current)}},{key:"componentWillUnmount",value:function(){var e=this.props.pageViewingSessionId;this.props.clogger.track("WELCOME_PLACE",{contexts:{ui_context:{action:le.UiAction.EXIT_VIEW,ui_element:le.UiElement.WELCOME_PLACE_PAGE},welcome_place:{welcome_session_id:e}}}),this.props.regeneratePageViewingSessionId()}},{key:"render",value:function(){var e=this.props,t=e.items,n=e.isInTreatmentA,a=e.featureNewxp2372v2;return m.a.createElement("div",{ref:this.containerRef,className:f()("p-welcome-place overflow_x_scroll flex_one sk_off_white_bg",{"welcome-place-page-container--typography":!Object(ae.a)(),"welcome-place-page-container--border-inset":!Object(ae.a)(),"welcome-place-page-container--height-fix":Object(ae.a)(),full_height:!Object(ae.a)()}),"data-qa":"welcome-place-page-container"},m.a.createElement("div",{className:"welcome-place-header-gradient"},ce.k||ce.s?m.a.createElement(ue.a,{type:"reload-small",className:"position_absolute",onClick:this.onClickAnimationReloadIcon}):null,n?m.a.createElement($o,null):m.a.createElement("h1",{className:"padding_top_200 padding_left_125"},a?as.rt("Welcome to Slack"):"")),t.map(function(e,t){switch(e.type){case"video":return m.a.createElement(he,{key:""+e.type+t,title:as.t("Learn more about Slack",{note:"Title for the new section in the Get Started page that includes the intro to channels video and the Help Center search bar."})},m.a.createElement(Ro,{youtubeEmbedUrl:e.content.video.url}));case"workflow":return m.a.createElement(Io,{key:""+e.type+t,workflowItems:e.content.workflow.tasks});case"user_cards":return m.a.createElement(he,{key:""+e.type+t,title:as.t("See who else is here"),subtitle:as.t("You can message people directly, or check out the channels they\u2019re in.",{note:"Subtitle for the teammates module that shares the two main ways to connect."})},m.a.createElement(Vo,{userCards:e.content.user_cards}));case"help_center_search":return m.a.createElement(he,{key:""+e.type+t,title:as.t("Have a question? We\u2019re here to help.",{note:"Title for the Help Center search bar in the Get Started page."})},m.a.createElement(Xo,{defaultArticlesData:Object(ne.a)(e,"content.help_center_search.articles",null)}));default:return null}}))}}]),t}(p.Component);rs.displayName="WelcomePlace";var is,os,ss=Object(g.b)(function(e){return{items:Object(ie.g)(e),clogger:Object(re.a)({state:e}),pageEntryPoint:Object(ie.h)(e),pageViewingSessionId:Object(ie.i)(e),firstClientLaunch:Object(ie.r)(e),isInTreatmentA:Object(ie.o)(e),featureNewxp2372v2:Object(y.m)(e,"feature_newxp2372_v2")}},function(e){return{maybeRefreshWelcomePlaceData:function(){e(Object(oe.f)())},setPageEntryPoint:function(){e(se.f.apply(void 0,arguments))},regeneratePageViewingSessionId:function(){e(Object(se.d)())},setAnimationState:function(t){e(Object(se.h)(t))}}})((is=rs,(os=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={scrollContainer:null},n}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this;return m.a.createElement(ns,{scrollContainerEl:this.state.scrollContainer},m.a.createElement(is,ye()({},this.props,{setScrollContainerElement:function(t){e.setState(function(){return{scrollContainer:t}})}})))}}]),t}(p.Component)).displayName="WithVisibilityLoggerProvider",os.displayName="WithVisibilityLoggerProvider("+(is.displayName||"Component")+")",os)),ls=n("fujP"),cs=n("DKof"),us=n("mkut"),ds=Object(Je.b)(function(e){return e&&e.unreadsView&&e.unreadsView.newUnreadMsgCount});ds.meta={name:"getNewUnreadMsgCount",key:"unreadsViewStoreSelectorsGetNewUnreadMsgCount"};var ps=Object(Je.b)(function(e){return e&&e.unreadsView&&e.unreadsView.refreshId});ps.meta={name:"getRefreshId",key:"unreadsViewStoreSelectorsGetRefreshId"};var ms=Object(Je.b)(function(e){return e&&e.unreadsView&&e.unreadsView.focusRequestedThreadKey});ms.meta={name:"getFocusRequestedThreadKey",key:"unreadsViewStoreSelectorsGetFocusRequestedThreadKey"};var hs=n("zRJ2"),bs=n("q4bl"),fs=n("NFsq");function gs(e){var t=Object(Zt.j)(e,"all_unreads_sort_order");return t&&Object(fs.a)(["alphabetical","priority","oldest","newest"],t)?t:Object(De.D)(Object(we.d)(e))?"priority":"alphabetical"}var _s=n("4ry+"),vs=n("H2PH"),ys=(n("9m5W"),new B.b("files")),ks=(h.b.oneOf([_s.c,_s.e,_s.d,_s.b,_s.a]),h.b.string,h.b.number,h.b.number,h.b.bool,h.b.func,h.b.bool,h.b.string,{fileName:"",fileCount:0,percentComplete:0,status:_s.e,cancelable:!1,cancelUpload:d.a,isRetry:!1,teamId:void 0}),Os=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.cancel=n.cancel.bind(n),n.clearOverrides=n.clearOverrides.bind(n),n.doneProlongingStatus=n.doneProlongingStatus.bind(n),n.state={statusOverride:null,fileNameOverride:null,timer:null,fading:!1},n}return u()(t,e),o()(t,null,[{key:"renderComplete",value:function(){var e=ys.t("Processing uploaded file\u2026 complete!");return m.a.createElement("div",{className:"p-file_upload_banner__progress p-file_upload_banner__progress--complete"},m.a.createElement("div",{className:"p-file_upload_banner__text"},e))}}]),o()(t,[{key:"componentWillUnmount",value:function(){this.state.timer&&clearTimeout(this.state.timer)}},{key:"getFileName",value:function(){var e=this.props.fileName;return this.state.fileNameOverride||e}},{key:"getStatus",value:function(){var e=this.props.status;return this.state.statusOverride||e}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this,n=[_s.b,_s.a];this.props.status!==e.status&&Object(fs.a)(n,e.status)&&this.setState(function(){return{statusOverride:e.status,fileNameOverride:e.fileName,timer:setTimeout(t.doneProlongingStatus,1e3)}})}},{key:"cancel",value:function(){var e=this.props.teamId,t=this.props.cancelUpload,n=Object(vs.a)(e);t=n.cancelCurrentUpload.bind(n),setTimeout(function(){t()},1)}},{key:"clearOverrides",value:function(){this.setState(function(){return{statusOverride:null,fileNameOverride:null,timer:null,fading:!1}})}},{key:"doneProlongingStatus",value:function(){var e=this;this.props.status===_s.c?this.setState(function(){return{fading:!0,timer:setTimeout(e.clearOverrides,250)}}):this.clearOverrides()}},{key:"renderCanceled",value:function(){var e=this.props.fileCount,t=this.getFileName(),n=ys.t("Canceling {fileName}\u2026",{fileName:Object(B.p)(t)});return e>1&&(n=ys.t("Canceling upload\u2026")),m.a.createElement("div",{className:"p-file_upload_banner__progress p-file_upload_banner__progress--canceled"},m.a.createElement("div",{className:"p-file_upload_banner__text"},n))}},{key:"renderMultiFileUploadComplete",value:function(){var e=this.props.fileCount,t=ys.t("Processing uploaded {fileCount, plural, =1 {file} other {files}}\u2026 complete!",{fileCount:e});return m.a.createElement("div",{className:"p-file_upload_banner__progress p-file_upload_banner__progress--complete"},m.a.createElement("div",{className:"p-file_upload_banner__text"},t))}},{key:"renderUploading",value:function(){var e=this.props,t=e.fileName,n=e.fileCount,a=e.percentComplete,r=e.cancelable,i=e.isRetry,o=this.getStatus()===_s.d||a>=99,s=void 0;o?s=ys.t("Processing uploaded {fileCount, plural, =1 {file} other {files}}\u2026",{fileCount:n}):(i?(s=ys.t("Re-uploading {fileName}",{fileName:Object(B.p)(t)}),n>1&&(s=ys.t("Re-uploading {fileCount} files",{fileCount:n}))):(s=ys.t("Uploading {fileName}",{fileName:Object(B.p)(t)}),n>1&&(s=ys.t("Uploading {fileCount} files",{fileCount:n}))),s+="\u2026 "+a+"%");var l=f()("p-file_upload_banner__progress_inner",{"p-file_upload_banner__progress_inner--animated":o}),c={width:a+"%"},u=null;return r&&!o&&(u=m.a.createElement(_e.c,{key:"cancel",className:"p-file_upload_banner__cancel",onClick:this.cancel},ys.t("cancel"))),[m.a.createElement("div",{key:"bar",className:"p-file_upload_banner__progress"},m.a.createElement("span",{className:l,style:c})),m.a.createElement("div",{key:"text",className:"p-file_upload_banner__text"},s),u]}},{key:"render",value:function(){var e=this.getStatus(),t=this.state.fading;if(e===_s.c)return null;var n=void 0;n=e===_s.e||e===_s.d?this.renderUploading():e===_s.b?this.renderMultiFileUploadComplete():this.renderCanceled();var a=f()("p-file_upload_banner p-message_pane__banner",{"p-file_upload_banner--fading":t});return m.a.createElement("div",{className:a},n)}}]),t}(p.PureComponent);Os.displayName="FileUploadBanner",Os.defaultProps=ks;var Cs=Object(g.b)(function(e){var t=Object(_s.g)(e),n=Object(we.d)(e);return ye()({},t,{teamId:n.id,cancelUpload:dr.a})})(Os),Es=n("XoBp"),js=n("UXvI"),Ss=n("BwAi"),Is=n("mmRP"),ws=Object(js.a)(function(e){var t=Object(_.getStateByTeamId)(e);return Object(ae.a)()&&!Object(A.k)(t)?Promise.resolve():Object(_.dispatchForTeamId)(e,Object(Ss.a)({reason:"requestOfflineCounts"})).tap(function(){return Object(_.dispatchForTeamId)(e,Object($e.k)())}).tap(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(_.dispatchForTeamId)(e,Object(Is.a)(t))}).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object(U.a)(Object(ut.a)(t.channels,t.groups));Object(_.dispatchForTeamId)(e,Object(Fo.reconcileChannelAccess)({channels:n}))}).catch(function(n){Object(Ct.a)({state:t}).error("Failed to fetch offline users counts for "+e+": "+n)})},6e4,{trailing:!1}),Ns=Object(gt.b)("Request offline users counts",function(e,t){return ws(Object(v.b)(t()))});Ns.meta={name:"requestOfflineCounts",key:"actionsRequestOfflineCountsRequestOfflineCounts",description:"Request offline users counts"},Ns.propTypes={};var Ts=Ns,As=n("Cbpi"),Rs=n("BeG2"),Ps=n("82mD"),Ms=n("4v0o"),xs=(n("yqYT"),new B.b("ms")),Fs=6e4,Ls=1e4,Ds=(h.b.string,h.b.bool.isRequired,h.b.string.isRequired,h.b.func.isRequired,h.b.func.isRequired,h.b.func.isRequired,{currentThreadKey:void 0});function Us(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.currentThreadKey,n=e.featureSonicDegradedBanner,a=e.primaryView,r=e.reconnectImmediately,i=e.requestOfflineCounts,o=e.requestOfflineHistory,s=Object(p.useRef)(),l=Object(p.useRef)(),c=Object(p.useState)(),u=it()(c,2),d=u[0],h=u[1],b=Object(p.useState)(!1),f=it()(b,2),g=f[0],_=f[1];function v(){s.current=Date.now()}function y(){h(Object(Ps.q)(s.current/1e3))}function k(e){e&&e.preventDefault&&e.preventDefault(),_(!0),l.current=setTimeout(function(){_(!1)},Ls),function(){var e=[];if((Object(_a.a)(a)||a===Ms.a.allThreads)&&e.push(o({channelId:a})),t){var n=Object(Pn.a)(t),s=n.channelId,l=n.threadTs;e.push(o({channelId:s,threadTs:l}))}return e.push(i()),r(),Promise.all(e)}().then(function(){v(),h()})}function O(e){var t=e.tag,n=e.text;return"a"===t?m.a.createElement(la.a,{className:"p-message_pane__degraded_banner__reload_cta",onClick:k,"data-qa":"connecting_banner_cta"},n):m.a.createElement("div",{className:"p-message_pane__degraded_banner__banner_text"},n)}if(Object(p.useEffect)(function(){v();var e=setInterval(y,Fs);return function(){clearInterval(e),clearTimeout(l.current)}},[]),!n||!Object(ae.a)()||g)return null;var C=void 0;return C=d?xs.rt("<div>Last updated {timeAgo}\u2026</div><a>Load new messages</a>",{timeAgo:d},O):xs.rt("<div>Last updated less than a minute ago\u2026</div><a>Load new messages</a>",null,O),m.a.createElement("div",{className:"p-message_pane__degraded_banner p-message_pane__banner"},C,m.a.createElement("div",{"aria-live":"assertive",className:"offscreen"},n?br.Q?d?xs.t("Last updated {timeAgo}\u2026 Press F6 to navigate to the status banner and click load new messages",{timeAgo:d}):xs.t("Last updated less than a minute ago\u2026 Press F6 to navigate to the status banner and click load new messages"):Object(ce.p)()?d?xs.t("Last updated {timeAgo}\u2026 Press Cmd + F6 to navigate to the status banner and click load new messages",{timeAgo:d}):xs.t("Last updated less than a minute ago\u2026 Press Cmd + F6 to navigate to the status banner and click load new messages"):d?xs.t("Last updated {timeAgo}\u2026 Press Ctrl + F6 to navigate to the status banner and click load new messages",{timeAgo:d}):xs.t("Last updated less than a minute ago\u2026 Press Ctrl + F6 to navigate to the status banner and click load new messages"):null))}Us.displayName="DegradedBanner",Us.defaultProps=Ds;var Bs=Object(g.b)(function(e){return{currentThreadKey:Object(Pn.b)(e),featureSonicDegradedBanner:Object(y.m)(e,"feature_sonic_degraded_banner"),primaryView:Object(E.a)(e)}},function(e){return{reconnectImmediately:function(){return e(Rs.h.apply(void 0,arguments))},requestOfflineCounts:function(){return e(Ts.apply(void 0,arguments))},requestOfflineHistory:function(){return e(As.a.apply(void 0,arguments))}}})(Us),qs=(n("Usoh"),new B.b("unread")),Hs=(h.b.oneOf(["light","dark"]),function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={slow:!1},n.timer=null,n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){var e=this;this.timer=setTimeout(function(){e.setState(function(){return{slow:!0}})},5e3)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timer)}},{key:"render",value:function(){var e=this.props.clientTheme,t=qs.t("Loading messages..."),n=qs.t("Still loading... sorry for the long wait!"),a=f()("p-message_container_loading",fe()({},"p-message_container_loading--"+e,"light"!==e));return m.a.createElement("div",{className:a,"data-qa":"message_container_loading"},m.a.createElement("div",{className:"p-message_container_loading__msg"},this.state.slow?n:t))}}]),t}(m.a.Component));Hs.displayName="MessageContainerLoading",Hs.defaultProps={clientTheme:"light"};var Ws=Hs,Gs=n("qkTT"),Ks=(n("Qwh8"),new B.b("threads")),Vs=(h.b.func,h.b.string,h.b.node,{tryAgain:d.a,"data-qa":"message_container_error",children:null});function zs(e){var t=e.tryAgain,n=e["data-qa"],a=e.children;return m.a.createElement("div",{className:"p-message_container_error","data-qa":n},m.a.createElement("div",{className:"p-message_container_error__contents"},m.a.createElement("div",{className:"p-message_container_error__emoji"},m.a.createElement(Gs.b,{text:":tropical_fish:",emojiSize:Gs.a.LARGE})),m.a.createElement("p",{className:"p-message_container_error__msg"},a),m.a.createElement(_e.d,{type:"primary",onClick:t,"data-qa":n+"_try_again"},Ks.t("Try Again"))))}zs.displayName="MessageContainerError",zs.defaultProps=Vs;var Ys=zs,Qs=n("tbBR"),Xs=n("oRCd"),Js=Object(ba.b)("TS.generic_notification_banner.banner_to_show_sig.dispatch"),Zs=Object(ba.b)("TS.ui.banner.isDunningBanner",function(){return!1}),$s=Object(ba.b)("TS.ui.banner.show"),el=(n("+ZNJ"),new B.b("notification_banner")),tl=(h.b.string,h.b.string,h.b.string,h.b.node,h.b.bool,h.b.node,h.b.string,h.b.string,h.b.string,h.b.string,h.b.string,h.b.func,h.b.bool,h.b.bool,h.b.bool,h.b.string,h.b.string,h.b.func,h.b.bool,h.b.bool,h.b.bool,h.b.func,h.b.func.isRequired,h.b.func,h.b.shape({countPref:h.b.string.isRequired,tsPref:h.b.string.isRequired,hidePref:h.b.string}),{imgSrc:"",imgAlt:"",bannerAriaLabel:"",headerText:"",bodyText:"",focusOnHeader:!1,bodyClass:"",bodyIcon:"",bannerContainerClass:"",goButtonText:"",goButtonClass:"",onGo:d.a,showGoButton:!0,isLearnMoreButton:!1,shouldCloseOnGo:!0,cancelButtonText:void 0,cancelButtonClass:"",onCancel:d.a,showCancelButton:!0,alwaysHideBannerAfterCancel:!1,showCloseIcon:!1,onCloseIcon:d.a,onCloseBanner:d.a,bannerPrefs:{}}),nl=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.headerRef=m.a.createRef(),Object(Kt.a)(n,["handleGoButton","handleCancelButton","handleCloseIcon"]),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.focusOnHeader&&this.headerRef.current&&this.headerRef.current.focus()}},{key:"closeBanner",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.props,n=t.onCloseBanner,a=t.bannerPrefs;this.props.closeBanner({bannerPrefs:a,alwaysHideBanner:e}),n()}},{key:"handleGoButton",value:function(){var e=this.props,t=e.onGo;e.shouldCloseOnGo&&this.closeBanner(),t()}},{key:"handleCancelButton",value:function(){var e=this.props,t=e.onCancel,n=e.alwaysHideBannerAfterCancel;this.closeBanner(n),t()}},{key:"handleCloseIcon",value:function(){var e=this.props.onCloseIcon;this.closeBanner(),e()}},{key:"renderHeader",value:function(){var e=this.props,t=e.headerText,n=e.imgSrc,a=e.imgAlt;return t?m.a.createElement("div",{className:"p-message_pane_banner__header"},n&&m.a.createElement("div",{className:"p-message_pane_banner__header_img_container"},m.a.createElement("img",{src:n,alt:a,className:"p-message_pane_banner__header_img","data-qa":"message_pane_banner_header_img"})),m.a.createElement("div",{className:"display_flex justify_content_center"},m.a.createElement("h1",{className:"p-message_pane_banner__header_text",ref:this.headerRef,tabIndex:-1},t))):null}},{key:"renderBody",value:function(){var e=this.props,t=e.bodyText,n=e.bodyClass,a=e.bodyIcon;if(!t)return null;var r=f()("p-message_pane_banner__body",n);return m.a.createElement("div",{className:r},a&&m.a.createElement(ue.a,{type:a,size:"inherit",className:"p-message_pane_banner__body_icon"}),t)}},{key:"renderGoButton",value:function(){var e=this.props,t=e.goButtonText,n=e.goButtonClass,a=e.isLearnMoreButton?el.t("Learn More"):el.t("Show Me"),r=f()("p-message_pane_banner__button ","p-message_pane_banner__button--go",n);return m.a.createElement(_e.b,{className:r,onClick:this.handleGoButton,size:"small","data-qa":"message_pane_banner_go_button"},t||a)}},{key:"renderCancelButton",value:function(){var e=this.props.cancelButtonClass,t=f()("p-message_pane_banner__button","p-message_pane_banner__button--cancel",e),n=this.props.cancelButtonText||el.t("Skip for Now");return m.a.createElement(_e.b,{className:t,onClick:this.handleCancelButton,size:"small",type:"outline","data-qa":"message_pane_banner_cancel_button"},n)}},{key:"renderCloseIcon",value:function(){return m.a.createElement(_e.c,{"aria-label":el.t("Close"),className:"p-message_pane_banner__close_icon",onClick:this.handleCloseIcon,"data-qa":"message_pane_banner_close_icon"},m.a.createElement(ue.a,{type:"times"}))}},{key:"render",value:function(){var e=this.props,t=e.showGoButton,n=e.showCancelButton,a=e.showCloseIcon,r=e.bannerAriaLabel,i=e.bannerContainerClass,o=f()("p-message_pane_banner",i);return m.a.createElement("div",{className:o,role:"banner","aria-label":r},this.renderHeader(),this.renderBody(),m.a.createElement("div",{className:"p-message_pane_banner__button_container"},n&&this.renderCancelButton(),t&&this.renderGoButton()),a&&this.renderCloseIcon())}}]),t}(p.PureComponent);nl.displayName="MessagePaneBanner",nl.defaultProps=tl;var al={closeBanner:Xs.a},rl=Object(g.b)(null,al)(nl),il=new B.b("client"),ol={countPref:"activation_msg_limit_banner_cta_count",tsPref:"activation_msg_limit_banner_cta_last_ts"},sl=["keydown","mousedown","touchstart"],ll=(h.b.object.isRequired,h.b.object.isRequired,h.b.number.isRequired,h.b.number.isRequired,h.b.number.isRequired,h.b.string.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.teamMenuEl=null,n.menuItemEls=null,n.limitMeterMenuItemEl=null,n.limitMeterInitialStyles=null,n.teamMenuInitialStyles=null,Object(Kt.a)(n,["onGo","onClose","removeLimitMeterHighlight"]),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.clog({action:le.UiAction.IMPRESSION})}},{key:"onGo",value:function(){var e=this;this.clog({action:le.UiAction.CLICK,ui_properties:{element_type:le.ElementType.BUTTON,element_name:"btn_show_me"}});var t=document.querySelector("#team-menu-trigger");t?(t.click(),setTimeout(function(){e.addLimitMeterHighlight()},100)):Object(De.R)(this.props.team,"/admin/stats")}},{key:"onClose",value:function(){this.clog({action:le.UiAction.CLICK,ui_properties:{element_type:le.ElementType.BUTTON,element_name:"btn_close"}})}},{key:"addLimitMeterHighlight",value:function(){var e=this;this.teamMenuEl=document.querySelector(".p-classic_nav__team_menu"),this.menuItemEls=document.getElementsByClassName("c-menu_item__li");var t=document.querySelector(".p-classic_nav__team_messages_limit_meter");if(this.limitMeterMenuItemEl=t&&t.closest(".c-menu_item__li"),this.teamMenuEl&&this.menuItemEls.length&&this.limitMeterMenuItemEl){this.limitMeterInitialStyles=this.limitMeterMenuItemEl.getAttribute("style"),this.teamMenuInitialStyles=this.teamMenuEl.getAttribute("style"),this.limitMeterMenuItemEl.style.boxShadow="0 0 0 99999px rgba(0, 0, 0, .4)",this.limitMeterMenuItemEl.style.position="relative",this.limitMeterMenuItemEl.style.zIndex=99999,this.teamMenuEl.style.overflow="visible";for(var n=0;n<this.menuItemEls.length;n++)this.menuItemEls.item(n).style.pointerEvents="none";this.limitMeterMenuItemEl.style.pointerEvents="auto",sl.forEach(function(t){document.addEventListener(t,e.removeLimitMeterHighlight)})}}},{key:"removeLimitMeterHighlight",value:function(){var e=this;this.teamMenuEl.setAttribute("style",this.teamMenuInitialStyles),this.limitMeterMenuItemEl.setAttribute("style",this.limitMeterInitialStyles);for(var t=0;t<this.menuItemEls.length;t++)this.menuItemEls.item(t).style.pointerEvents="auto";sl.forEach(function(t){document.removeEventListener(t,e.removeLimitMeterHighlight)})}},{key:"clog",value:function(e){var t=this.props,n=t.clogger,a=t.messagesCount,r=t.totalUsers,i=t.totalChannels,o=ye()({step:le.UiStep.BANNER_ACTIVATION_MSG_LIMIT},e);n.track(le.EventId.UPGRDEXP_MSG_LIM_ACTIVATION_BANNER,{limit_meter_messages_count:a,num_members_minus_bots:r,num_of_channels:i,contexts:{ui_context:o}})}},{key:"render",value:function(){var e=this.props,t=e.totalUsers,n=e.totalChannels,a=e.messagesCount,r=e.teamName,i=il.t("{name_of_workspace} is on a roll",{name_of_workspace:Object(B.p)(r)}),o=il.rt("Your team\u2019s now <b>{num_of_members} members</b> strong, with <b>{num_of_messages} messages</b> sent across <b>{num_of_channels} channels</b>. You can track your team\u2019s progress via the main menu.",{num_of_members:t,num_of_messages:a,num_of_channels:n}),s=il.t("Show Me");return m.a.createElement(rl,{headerText:i,bodyText:o,goButtonText:s,onGo:this.onGo,showCancelButton:!1,showCloseIcon:!0,onCloseIcon:this.onClose,bannerPrefs:ol})}}]),t}(p.PureComponent));ll.displayName="ActivationMsgLimitBanner";var cl=Object(g.b)(function(e){return{team:Object(we.d)(e),clogger:Object(re.a)({state:e})}})(ll),ul=n("qN/r"),dl=new B.b("send_btn"),pl=(h.b.func.isRequired,h.b.bool.isRequired,h.b.bool.isRequired,h.b.object.isRequired,h.b.func.isRequired,{countPref:"i18n_japan_beta_send_btn_banner_cta_count",tsPref:"i18n_japan_beta_send_btn_banner_cta_last_ts"}),ml=le.UiStep.BANNER_JAPAN_BETA_SEND_BTN,hl=le.EventId.UPGRDEXP_I18N_BANNER,bl=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onPrefLinkClick=n.onPrefLinkClick.bind(n),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.clogger.track(hl,{contexts:{ui_context:{step:ml,action:le.UiAction.IMPRESSION}}})}},{key:"onPrefLinkClick",value:function(){this.props.clogger.track(hl,{contexts:{ui_context:{step:ml,action:le.UiAction.CLICK,ui_element:le.UiElement.PREFS_BUTTON}}}),this.props.openPrefsModal({activeSection:"advanced",activeSubsection:"msg_input_send_btn_label"}),this.props.closeBanner()}},{key:"UNSAFE_componentWillUpdate",value:function(e){var t=this.props,n=t.hasSendButton;t.sendButtonAutoSet===e.sendButtonAutoSet&&n===e.hasSendButton||this.props.closeBanner()}},{key:"renderBodyText",value:function(){var e=this;return m.a.createElement("div",null,dl.rt("Send a message with a quick click, or by pressing <Keys>keys</Keys>",{},function(){return m.a.createElement("div",{className:"inline_block"},m.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},Object(ce.p)()?"\u2318":"Ctrl"),m.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},"Enter"))}),m.a.createElement("br",null),dl.rt("Don\u2018t like the change? You can always switch back in <Link>your preferences</Link>.",{},function(t){var n=t.text;return m.a.createElement(la.a,{onClick:e.onPrefLinkClick},n)}))}},{key:"render",value:function(){var e=dl.t("Just for Japan: a button for sending"),t=dl.t("Got It");return m.a.createElement(rl,{headerText:e,bodyText:this.renderBodyText(),bodyClass:"p-message_pane_banner__body--taller-line-height",goButtonText:t,showCancelButton:!1,showCloseIcon:!0,bannerPrefs:pl})}}]),t}(p.PureComponent);bl.displayName="I18nJapanBetaSendBtnBanner";var fl=Object(g.b)(function(e){return{hasSendButton:Object(Zt.j)(e,"msg_input_send_btn"),sendButtonAutoSet:Object(Zt.j)(e,"msg_input_send_btn_auto_set"),clogger:Object(re.a)({state:e})}},function(e){return{closeBanner:Xs.a,openPrefsModal:function(){return e(ul.a.apply(void 0,arguments))}}})(bl),gl=n("4kdM"),_l=n("vMmh"),vl=new B.b("notification_banner"),yl={countPref:"local_discount_awareness_banner_cta_count",tsPref:"local_discount_awareness_banner_cta_last_ts",hidePref:"local_discount_awareness_banner_cta_hide"},kl=le.UiStep.BANNER_LOCAL_DISCOUNT_AWARENESS_BANNER,Ol="pricing?ui_element="+le.UiElement.PRICING_BUTTON+"&ui_step="+kl,Cl=(h.b.number.isRequired,h.b.func.isRequired,h.b.string.isRequired,h.b.object.isRequired,h.b.string.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["onGo","onCloseIcon","onCancel"]),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.clog({action:le.UiAction.IMPRESSION,ui_properties:{element_type:le.ElementType.BANNER,element_name:"local_discount_awareness_banner"}})}},{key:"onGo",value:function(){this.clog({action:le.UiAction.CLICK,ui_element:le.UiElement.PRICING_BUTTON,is_primary_cta:!0,ui_properties:{element_type:le.ElementType.BUTTON,element_name:"pricing_button"}},!0),this.props.showPricingPlans({pricingPlansPageUrl:Ol,source:"local_discount_awareness_banner"})}},{key:"onCancel",value:function(){this.clog({action:le.UiAction.CLOSE,ui_element:le.UiElement.SKIP_FOR_NOW_BUTTON,ui_properties:{element_type:le.ElementType.BUTTON,element_name:"skip_for_now_button"}})}},{key:"onCloseIcon",value:function(){this.clog({action:le.UiAction.CLOSE,ui_element:le.UiElement.BTN_CLOSE,ui_properties:{element_type:le.ElementType.X,element_name:"btn_close"}})}},{key:"getContent",value:function(){var e=this.props,t=e.discountPercent,n=e.country,a=e.localDiscountAwarenessExperiment,r=f()("p-message_pane_banner__header_icon","p-message_pane_banner__header_icon--"+n.toLowerCase());return{headerText:m.a.createElement("div",null,m.a.createElement("div",{className:r}),"treatment1"===a?vl.rt("Get a {discountPercent}% discount on a paid plan",{discountPercent:t}):vl.rt("Upgrade to access paid features \u2014 at {discountPercent}% off",{discountPercent:t})),bodyText:vl.rt("For a limited time, teams in {country} can get {discountPercent}% off when upgrading to a paid plan. Once you upgrade, your team will be able to see and search all past messages and files, add guests to your workspace, and more.",{country:_l.a[n].name,discountPercent:t}),cancelButtonText:vl.t("Not Now"),goButtonText:vl.t("See Upgrade Options")}}},{key:"clog",value:function(e,t){var n=this.props.clogger,a=Object(gl.a)(e,{step:kl});n.track(le.EventId.GROWTH_LOCAL_DISCOUNT,{contexts:{ui_context:a}}),t&&n.track(le.EventId.GROWTH_PRICING,{contexts:{ui_context:a}})}},{key:"render",value:function(){var e=this.getContent();return e?m.a.createElement(rl,{headerText:e.headerText,bodyClass:"p-message_pane_banner__body--widest-text",bodyText:e.bodyText,cancelButtonText:e.cancelButtonText,goButtonText:e.goButtonText,showCloseIcon:!0,onGo:this.onGo,onCancel:this.onCancel,onCloseIcon:this.onCloseIcon,bannerPrefs:yl}):null}}]),t}(p.PureComponent));Cl.displayName="LocalDiscountAwarenessBanner";var El={showPricingPlans:Xs.g},jl=Object(g.b)(function(e){return{clogger:Object(re.a)({state:e}),localDiscountAwarenessExperiment:Object(Xt.c)(e,"local_discount_awareness")}},El)(Cl),Sl=n("AjwY"),Il=n("46+D"),wl=(h.b.bool,h.b.arrayOf(h.b.node),h.b.shape({countPref:h.b.string,tsPref:h.b.string}).isRequired,h.b.number.isRequired,h.b.number.isRequired,h.b.string,h.b.string,h.b.bool,h.b.bool,h.b.node,h.b.func,h.b.func,h.b.object.isRequired,h.b.object.isRequired,h.b.string,h.b.string,h.b.string,{isSharedChannel:!1,sharedTeamNames:[],bodyClass:"",bodyIcon:"",bannerContainerClass:"",onGoUrl:"",goButtonText:"",headerText:"",showCloseIcon:!0,showGoButton:!0,renderBodyText:d.a,onCloseBanner:d.a}),Nl=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["onGo","onCloseIcon","renderBodyText"]),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.clog({action:le.UiAction.IMPRESSION})}},{key:"onGo",value:function(){var e=this.props,t=e.onGoUrl,n=e.team;this.clog({action:le.UiAction.CLICK,ui_properties:{element_type:le.ElementType.BUTTON,element_name:"upgrade"}}),Object(De.R)(n,t)}},{key:"onCloseIcon",value:function(){this.clog({action:le.UiAction.CLICK,ui_properties:{element_type:le.ElementType.BUTTON,element_name:"close"}})}},{key:"clog",value:function(e){var t=this.props,n=t.clogStep,a=t.clogEvent,r=t.clogger,i=[le.EventId.GROWTH_PRICING,a],o=ye()({step:n},e);i.forEach(function(e){r.track(e,{contexts:{ui_context:o}})})}},{key:"renderBodyText",value:function(){var e=this.props,t=e.renderBodyText;return t(e.sharedTeamNames)}},{key:"render",value:function(){var e=this.props,t=e.isSharedChannel,n=e.headerText,a=e.goButtonText,r=e.bannerPrefs,i=e.bodyClass,o=e.bodyIcon,s=e.bannerContainerClass,l=e.showCloseIcon,c=e.showGoButton,u=e.onCloseBanner;return t?m.a.createElement(rl,{headerText:n,bodyText:this.renderBodyText(),goButtonText:a,showCancelButton:!1,showCloseIcon:l,onGo:this.onGo,onCloseIcon:this.onCloseIcon,onCloseBanner:u,bannerPrefs:r,bodyClass:i,bannerContainerClass:s,bodyIcon:o,showGoButton:c}):null}}]),t}(p.PureComponent);Nl.displayName="EscTrialBanner",Nl.defaultProps=wl;var Tl=Object(g.b)(function(e){var t=Object(E.a)(e),n=Object(G.e)(e,t),a=Object(K.ab)(n),r=[];if(a){var i=Object(K.N)(e,n);Object(ls.a)(i)||(r=Object(ft.a)(i,function(t){var n=Object(we.i)(e,t);return Object(De.O)(n)?m.a.createElement(Il.a,{type:"unknown"}):Object(De.f)(n)}))}return{isSharedChannel:a,sharedTeamNames:r,clogger:Object(re.a)({state:e}),team:Object(we.d)(e)}})(Nl),Al=new B.b("trial_expiration_banners"),Rl=(h.b.string.isRequired,h.b.number.isRequired,h.b.string.isRequired,{countPref:"two_weeks_left_esc_trial_cta_count",tsPref:"two_weeks_left_esc_trial_cta_last_ts"}),Pl=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["renderBodyText","renderHeaderText"]),n}return u()(t,e),o()(t,[{key:"renderBodyText",value:function(e){var t=this.props.expirationDate,n=Object(B.j)(e,{noEscape:!0,react:!0});return Al.rt("When the trial ends, this channel will <b>no longer be shared</b> with {shared_team_name}. Upgrade by {expiration_date} to keep all the features of the Standard plan.",{expiration_date:t,shared_team_name:n})}},{key:"renderHeaderText",value:function(){var e=this.props.numDaysLeft;return Al.t("Heads up: you have {num_of_days} more days on your free trial",{num_of_days:e})}},{key:"render",value:function(){var e=this.props.productId,t=Al.t("Upgrade Now");return m.a.createElement(Tl,{bannerPrefs:Rl,clogStep:le.UiStep.BANNER_SHARED_CHANNELS_TRIAL_TWO_WEEK_REMINDER,clogEvent:le.EventId.UPGRDEXP_FREE_TRIAL_FOR_SC,onGoUrl:Sl.a+"?s=1&p="+e+"&entry_point=two_weeks_left_esc_banner",goButtonText:t,headerText:this.renderHeaderText(),renderBodyText:this.renderBodyText})}}]),t}(p.PureComponent);Pl.displayName="TwoWeeksLeftEscTrialBanner";var Ml=Pl,xl=new B.b("trial_expiration_banners"),Fl=(h.b.number.isRequired,h.b.string.isRequired,h.b.string.isRequired,{countPref:"one_week_left_esc_trial_cta_count",tsPref:"one_week_left_esc_trial_cta_last_ts"}),Ll=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["renderBodyText","renderHeaderText"]),n}return u()(t,e),o()(t,[{key:"renderBodyText",value:function(e){var t=this.props.expirationDate,n=Object(B.j)(e,{noEscape:!0,react:!0});return xl.rt("<b>You won\u2019t be able to use this channel with {shared_team_name}</b> afterward, even if you upgrade later. To keep sharing this channel, upgrade before <span>{expiration_date}.</span>",{expiration_date:t,shared_team_name:n,fallbackHash:"decd823ab360b2e8c20d6fbcd615ae1c1c450d9e"},function(e){var t=e.text;return"b"===e.tag?m.a.createElement("strong",{className:"sk_raspberry_red"},t):m.a.createElement("span",{className:"nowrap"},t)})}},{key:"renderHeaderText",value:function(){var e=this.props.numDaysLeft;return xl.t("Only {num_of_days} days left on your free trial",{num_of_days:e})}},{key:"render",value:function(){var e=this.props.productId,t=xl.t("Upgrade Now");return m.a.createElement(Tl,{bannerPrefs:Fl,clogStep:le.UiStep.BANNER_SHARED_CHANNELS_TRIAL_ONE_WEEK_REMINDER,clogEvent:le.EventId.UPGRDEXP_FREE_TRIAL_FOR_SC,onGoUrl:Sl.a+"?s=1&p="+e+"&entry_point=one_week_left_esc_trial_banner",goButtonText:t,headerText:this.renderHeaderText(),renderBodyText:this.renderBodyText})}}]),t}(p.PureComponent);Ll.displayName="OneWeekLeftEscTrialBanner";var Dl=Ll,Ul=new B.b("trial_expiration_banners"),Bl={countPref:"seven_days_left_trial_cta_count",tsPref:"seven_days_left_trial_cta_last_ts"},ql=(h.b.object.isRequired,h.b.object.isRequired,h.b.string.isRequired,h.b.number.isRequired,h.b.bool.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["onGo","onClose"]),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.clog({action:le.UiAction.IMPRESSION})}},{key:"onGo",value:function(){var e=this.props,t=e.team,n=e.productId;this.clog({action:le.UiAction.CLICK,ui_properties:{element_type:le.ElementType.BUTTON,element_name:"upgrade"}}),Object(De.R)(t,Sl.a+"?s=1&p="+n+"&entry_point=seven_days_left_trial_banner")}},{key:"onClose",value:function(){this.clog({action:le.UiAction.CLICK,ui_properties:{element_type:le.ElementType.BUTTON,element_name:"close"}})}},{key:"getHeaderText",value:function(){var e=this.props,t=e.featureGGFromTheStart,n=e.numDaysLeft,a=e.team;if(!t)return null;var r=Object(De.z)(a)?Ul.t("Slack Standard"):Ul.t("Slack Plus");return n<7?Ul.rt("Your trial of {plan_level} ends in less than a week",{plan_level:r}):Ul.rt("Your trial of {plan_level} ends in 1 week",{plan_level:r})}},{key:"clog",value:function(e){var t=this.props,n=t.featureGGFromTheStart,a=t.clogger;if(n){var r=ye()({step:le.UiStep.BANNER_TRIAL_SEVEN_DAYS_REMINDER},e);a.track(le.EventId.GROWTH_PLANS_PAGE_TRIALS,{contexts:{ui_context:r}})}}},{key:"render",value:function(){var e=this.props,t=e.featureGGFromTheStart,n=e.team;if(!t)return null;var a=this.getHeaderText(),r=Object(De.z)(n)?"p-message_pane_banner--bg_standard":"p-message_pane_banner--bg_plus",i=Ul.rt("Get a quote to see how much Slack will cost for your team.{break}Ready to buy? Just add your payment details.",{break:m.a.createElement("br",null)}),o=Ul.t("Add Payment Details"),s=Ul.t("Get Quote");return m.a.createElement(rl,{headerText:a,bodyText:i,goButtonText:o,onGo:this.onGo,bannerContainerClass:r,showCancelButton:!0,cancelButtonText:s,showCloseIcon:!0,onCloseIcon:this.onClose,bannerPrefs:Bl})}}]),t}(p.PureComponent));ql.displayName="SevenDaysLeftTrialBanner";var Hl=Object(g.b)(function(e){return{team:Object(we.d)(e),clogger:Object(re.a)({state:e}),featureGGFromTheStart:Object(y.m)(e,"feature_gg_from_the_start")}})(ql),Wl=new B.b("trial_expiration_banners"),Gl={countPref:"three_days_left_esc_trial_cta_count",tsPref:"three_days_left_esc_trial_cta_last_ts"},Kl=(h.b.string.isRequired,h.b.string.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["renderBodyText"]),n}return u()(t,e),o()(t,[{key:"renderBodyText",value:function(e){return Wl.rt("Upgrade before your free trial ends on {expiration_date} to keep sharing this channel with {shared_team_name}. Otherwise, this channel will be permanently disconnected. (You can start a new shared channel if you decide to upgrade later.)",{expiration_date:this.props.expirationDate,shared_team_name:Object(B.j)(e,{noEscape:!0,react:!0})})}},{key:"render",value:function(){var e=this.props.productId;return m.a.createElement(Tl,{bannerPrefs:Gl,clogStep:le.UiStep.BANNER_SHARED_CHANNELS_TRIAL_THREE_DAY_REMINDER,onGoUrl:Sl.a+"?s=1&p="+e+"&entry_point=three_days_left_esc_trial_banner",clogEvent:le.EventId.GROWTH_PLANS_PAGE_TRIALS,goButtonText:Wl.t("Upgrade Now"),headerText:Wl.t("Upgrade your workspace to keep sharing this channel"),renderBodyText:this.renderBodyText,bodyClass:"p-message_pane_banner__body--widest-text"})}}]),t}(p.PureComponent));Kl.displayName="ThreeDaysLeftEscTrialBanner";var Vl=Kl,zl=new B.b("trial_expiration_banners"),Yl={countPref:"three_days_left_trial_cta_count",tsPref:"three_days_left_trial_cta_last_ts"},Ql=(h.b.object.isRequired,h.b.object.isRequired,h.b.string.isRequired,h.b.string.isRequired,h.b.bool.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["onGo","onClose"]),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.clog({action:le.UiAction.IMPRESSION})}},{key:"onGo",value:function(){var e=this.props,t=e.team,n=e.productId;this.clog({action:le.UiAction.CLICK,ui_properties:{element_type:le.ElementType.BUTTON,element_name:"upgrade"}}),Object(De.R)(t,Sl.a+"?s=1&p="+n+"&entry_point=three_days_left_trial_banner")}},{key:"onClose",value:function(){this.clog({action:le.UiAction.CLICK,ui_properties:{element_type:le.ElementType.BUTTON,element_name:"close"}})}},{key:"getPropsForPlan",value:function(){var e=this.props,t=e.team,n=e.expirationDate;if(e.featureGGFromTheStart)return Object(De.z)(t)?{headerText:zl.t("Your trial of Slack Standard ends in 3 days"),bodyText:zl.t("Add your payment details to keep features like group video calls, shared channels, and an unlimited, searchable message history"),bannerContainerClass:"p-message_pane_banner--bg_standard"}:{headerText:zl.t("Your trial of Slack Plus ends in 3 days"),bodyText:zl.t("Add your payment details to keep features like group video calls, shared channels, and SAML-based SSO."),bannerContainerClass:"p-message_pane_banner--bg_plus"};var a=Object(De.z)(t)?zl.t("Standard"):zl.t("Plus"),r=zl.rt("Your workspace\u2019s trial of our <b>{plan_level} plan</b> only lasts through <b>{expiration_date}</b>. Upgrade to a paid plan to keep your access to features like unlimited messages and files, guest accounts, and more when your trial ends.",{plan_level:a,expiration_date:n});return{headerText:zl.t("Your free trial ends soon"),bodyText:r,bannerContainerClass:""}}},{key:"clog",value:function(e){var t=this.props.clogger,n=ye()({step:le.UiStep.BANNER_TRIAL_THREE_DAY_REMINDER},e);t.track(le.EventId.GROWTH_PLANS_PAGE_TRIALS,{contexts:{ui_context:n}})}},{key:"render",value:function(){var e=this.props.featureGGFromTheStart,t=this.getPropsForPlan(),n=t.headerText,a=t.bodyText,r=t.bannerContainerClass,i=zl.t("Upgrade Now"),o=void 0,s=!1;return e&&(i=zl.t("Add Payment Details"),o=zl.t("Get a Quote"),s=!0),m.a.createElement(rl,{headerText:n,bodyText:a,goButtonText:i,onGo:this.onGo,bannerContainerClass:r,showCancelButton:s,cancelButtonText:o,showCloseIcon:!0,onCloseIcon:this.onClose,bannerPrefs:Yl})}}]),t}(p.PureComponent));Ql.displayName="ThreeDaysLeftTrialBanner";var Xl=Object(g.b)(function(e){return{team:Object(we.d)(e),clogger:Object(re.a)({state:e}),featureGGFromTheStart:Object(y.m)(e,"feature_gg_from_the_start")}})(Ql),Jl=new B.b("free_trial_banners"),Zl=(h.b.object.isRequired,h.b.object.isRequired,{countPref:"in_prod_trial_banner_cta_count",tsPref:"in_prod_trial_banner_cta_last_ts"}),$l=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["onGo","onCloseIcon"]),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.clogger.track("UPGRDEXP_FREE_TRIAL_IN_PROD",{contexts:{ui_context:{step:205,action:"impression"}}})}},{key:"onGo",value:function(){var e=this.props,t=e.clogger,n=e.team;t.track("UPGRDEXP_FREE_TRIAL_IN_PROD",{contexts:{ui_context:{step:205,action:"click",ui_element:"learn_more_btn"}}}),Object(De.R)(n,"trial")}},{key:"onCloseIcon",value:function(){this.props.clogger.track("UPGRDEXP_FREE_TRIAL_IN_PROD",{contexts:{ui_context:{step:205,action:"close",ui_element:"btn_close"}}})}},{key:"getContent",value:function(){return{headerText:Jl.t("Start your free trial of the Standard plan"),bodyText:Jl.t("With unlimited searchable messages, you\u2019ll never lose access to your conversations \u2014 or to things like project details, important docs, and key decisions made along the way.")}}},{key:"render",value:function(){var e=this.getContent();return Object(ls.a)(e)?null:m.a.createElement(rl,{headerText:e.headerText,bodyText:e.bodyText,showCancelButton:!1,showCloseIcon:!0,isLearnMoreButton:!0,onGo:this.onGo,onCloseIcon:this.onCloseIcon,bannerPrefs:Zl})}}]),t}(p.PureComponent);$l.displayName="InProdTrialMessagePaneBanner";var ec=Object(g.b)(function(e){return{clogger:Object(re.a)({state:e}),team:Object(we.d)(e)}})($l),tc=new B.b("free_trial_banners"),nc=(h.b.string.isRequired,h.b.object.isRequired,h.b.object.isRequired,{countPref:"in_prod_trial_reminder_banner_cta_count",tsPref:"in_prod_trial_reminder_banner_cta_last_ts"}),ac=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["onGo","onCloseIcon"]),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.clogger.track("UPGRDEXP_FREE_TRIAL_IN_PROD",{contexts:{ui_context:{step:207,action:"impression"}}})}},{key:"onGo",value:function(){var e=this.props,t=e.clogger,n=e.team;t.track("UPGRDEXP_FREE_TRIAL_IN_PROD",{contexts:{ui_context:{step:207,action:"click",ui_element:"learn_more_btn"}}}),Object(De.R)(n,"trial")}},{key:"onCloseIcon",value:function(){this.props.clogger.track("UPGRDEXP_FREE_TRIAL_IN_PROD",{contexts:{ui_context:{step:207,action:"close",ui_element:"btn_close"}}})}},{key:"getContent",value:function(){var e=this.props.expirationDate;return{headerText:tc.t("Your free trial offer is about to expire"),bodyText:tc.rt("You still have time to try out the <b>Standard plan</b>. Start your trial by <b>{expiration_date}</b> to explore features like unlimited searchable messages, guest accounts, screen sharing, and more \u2014 free for 30 days. ",{expiration_date:e})}}},{key:"render",value:function(){var e=this.getContent();return m.a.createElement(rl,{headerText:e.headerText,bodyText:e.bodyText,showCancelButton:!1,showCloseIcon:!0,isLearnMoreButton:!0,onGo:this.onGo,onCloseIcon:this.onCloseIcon,bannerPrefs:nc})}}]),t}(p.PureComponent);ac.displayName="InProdTrialReminderBanner";var rc=Object(g.b)(function(e){return{clogger:Object(re.a)({state:e}),team:Object(we.d)(e)}})(ac),ic=new B.b("notification_banner"),oc={countPref:"approaching_file_limit_banner_cta_count",tsPref:"approaching_file_limit_banner_cta_last_ts"},sc=(h.b.object.isRequired,h.b.string.isRequired,h.b.func.isRequired,h.b.func.isRequired,h.b.func.isRequired,h.b.object.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["onGo","onCloseIcon","onDeleteFilesLinkClicked"]),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.clogger.track("UPGRDEXP_ENFORCE_FILE_LIMITS",{contexts:{ui_context:{step:200,action:"impression"}}})}},{key:"onGo",value:function(){var e=this.props.clogger;e.track("UPGRDEXP_ENFORCE_FILE_LIMITS",{contexts:{ui_context:{step:200,action:"click",ui_element:"pricing_button"}}}),e.track("GROWTH_PRICING",{contexts:{ui_context:{step:200,action:"click",ui_element:"pricing_button"}}}),this.props.showPricingPlans({pricingPlansPageUrl:"pricing?ui_element=11&ui_step=200",source:"approaching_file_limit_banner"})}},{key:"onCloseIcon",value:function(){this.props.clogger.track("UPGRDEXP_ENFORCE_FILE_LIMITS",{contexts:{ui_context:{step:200,action:"close",ui_element:"btn_close"}}})}},{key:"onDeleteFilesLinkClicked",value:function(){var e=this.props,t=e.userId,n=e.clogger;this.props.closeBanner({bannerPrefs:oc}),this.props.showFileList({user:t}),n.track("UPGRDEXP_ENFORCE_FILE_LIMITS",{contexts:{ui_context:{step:200,action:"click",ui_element:"file_storage_link"}}})}},{key:"getHeaderText",value:function(){var e=this.props.team;return ic.rt("{name_of_workspace} is almost out of space",{name_of_workspace:e.name})}},{key:"getBodyText",value:function(){return ic.rt('If your workspace goes over the free plan\u2019s <span class="bold">5 GB storage limit,</span> older files will no longer be viewable. To access all your files, you can upgrade to a paid plan.')}},{key:"render",value:function(){var e=ic.t("See Plans");return m.a.createElement(rl,{headerText:this.getHeaderText(),bodyText:this.getBodyText(),goButtonText:e,showCancelButton:!1,showCloseIcon:!0,onGo:this.onGo,onCloseIcon:this.onCloseIcon,bannerPrefs:oc})}}]),t}(p.PureComponent));sc.displayName="ApproachingFileLimitBanner";var lc={closeBanner:Xs.a,showFileList:jn.g,showPricingPlans:Xs.g},cc=Object(g.b)(function(e){return{team:Object(we.d)(e),userId:Object(y.c)(e),clogger:Object(re.a)({state:e})}},lc)(sc),uc=new B.b("client"),dc={countPref:"approaching_msg_limit_banner_cta_count",tsPref:"approaching_msg_limit_banner_cta_last_ts"},pc=(h.b.number.isRequired,h.b.object.isRequired,h.b.func.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["onGo","onCloseBanner"]),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.messagesCount;e.clogger.track("GROWTH_PRICING",{limit_meter_messages_count:t,contexts:{ui_context:{step:63,action:"impression"}}})}},{key:"onGo",value:function(){var e=this.props,t=e.messagesCount;e.clogger.track("GROWTH_PRICING",{limit_meter_messages_count:t,contexts:{ui_context:{step:63,action:"click",ui_element:"pricing_button"}}}),this.props.showPricingPlans({pricingPlansPageUrl:"pricing?ui_element=11&ui_step=63",source:"approaching_msg_limit_banner"})}},{key:"onCloseBanner",value:function(){var e=this.props,t=e.messagesCount;e.clogger.track("GROWTH_PRICING",{limit_meter_messages_count:t,contexts:{ui_context:{step:63,action:"close",ui_element:"skip_for_now_button"}}})}},{key:"getContent",value:function(){return{headerText:uc.t("Unlock unlimited messages for your team"),bodyText:uc.t("Your workspace is getting close to the 10,000 message limit for free teams. On Slack\u2019s paid plans, you can see and search unlimited messages.")}}},{key:"render",value:function(){var e=this.getContent();return m.a.createElement(rl,{headerText:e.headerText,bodyText:e.bodyText,isLearnMoreButton:!0,onGo:this.onGo,onCloseBanner:this.onCloseBanner,bannerPrefs:dc})}}]),t}(p.PureComponent));pc.displayName="ApproachingMsgLimitBanner";var mc={showPricingPlans:Xs.g},hc=Object(g.b)(function(e){return{clogger:Object(re.a)({state:e})}},mc)(pc),bc=new B.b("client"),fc={countPref:"just_reached_msg_limit_banner_cta_count",tsPref:"just_reached_msg_limit_banner_cta_last_ts"},gc=(h.b.number.isRequired,h.b.object.isRequired,h.b.func.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["onGo","onCloseBanner"]),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.messagesCount;e.clogger.track("GROWTH_PRICING",{limit_meter_messages_count:t,contexts:{ui_context:{step:64,action:"impression"}}})}},{key:"onGo",value:function(){var e=this.props,t=e.messagesCount;e.clogger.track("GROWTH_PRICING",{limit_meter_messages_count:t,contexts:{ui_context:{step:64,action:"click",ui_element:"pricing_button"}}}),this.props.showPricingPlans({pricingPlansPageUrl:"pricing?ui_element=11&ui_step=64",source:"just_reached_msg_limit_banner"})}},{key:"onCloseBanner",value:function(){var e=this.props,t=e.messagesCount;e.clogger.track("GROWTH_PRICING",{limit_meter_messages_count:t,contexts:{ui_context:{step:64,action:"close",ui_element:"skip_for_now_button"}}})}},{key:"getCancelButtonText",value:function(){return bc.t("Not Now")}},{key:"getContent",value:function(){return{headerText:bc.t("You\u2019ve just reached the 10k message limit"),bodyText:bc.t("Your workspace has over 10,000 messages in it! That\u2019s a lot of conversation and history. Upgrade to a paid plan to make sure you can access all of it whenever you need it.")}}},{key:"render",value:function(){var e=this.getContent();return m.a.createElement(rl,{headerText:e.headerText,bodyText:e.bodyText,isLearnMoreButton:!0,onGo:this.onGo,onCloseBanner:this.onCloseBanner,bannerPrefs:fc,cancelButtonText:this.getCancelButtonText()})}}]),t}(p.PureComponent));gc.displayName="JustReachedMsgLimitBanner";var _c={showPricingPlans:Xs.g},vc=Object(g.b)(function(e){return{clogger:Object(re.a)({state:e})}},_c)(gc),yc=n("U28S"),kc=new B.b("client"),Oc={countPref:"thirty_days_after_msg_limit_banner_cta_count",tsPref:"thirty_days_after_msg_limit_banner_cta_last_ts"},Cc=(h.b.number.isRequired,h.b.object.isRequired,h.b.func.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["onGo","onCloseBanner"]),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.messagesCount;e.clogger.track("GROWTH_PRICING",{limit_meter_messages_count:t,contexts:{ui_context:{step:65,action:"impression"}}})}},{key:"onGo",value:function(){var e=this.props,t=e.messagesCount;e.clogger.track("GROWTH_PRICING",{limit_meter_messages_count:t,contexts:{ui_context:{step:65,action:"click",ui_element:"pricing_button"}}}),this.props.showPricingPlans({pricingPlansPageUrl:"pricing?ui_element=11&ui_step=65",source:"thirty_days_after_msg_limit_banner"})}},{key:"onCloseBanner",value:function(){var e=this.props,t=e.messagesCount;e.clogger.track("GROWTH_PRICING",{limit_meter_messages_count:t,contexts:{ui_context:{step:65,action:"close",ui_element:"skip_for_now_button"}}})}},{key:"getContent",value:function(){var e=this.props.messagesCount-1e4,t=this.roundNumOfMsgsBeyondLimit(e);return!t||t<0?null:{headerText:kc.t("Your workspace has {num_msgs_beyond_limit} messages more than the 10k limit",{num_msgs_beyond_limit:t}),bodyText:kc.t("That\u2019s more than {num_msgs_beyond_limit} messages you can\u2019t see or search. On a paid plan, you can easily find and view all past messages \u2014 plus features like guest accounts for contractors, group video calls, and unlimited apps.",{num_msgs_beyond_limit:t,fallbackHash:"db9e0ff0ad65ce2f75e98390bcfaec1c1fa6fd45"})}}},{key:"roundNumOfMsgsBeyondLimit",value:function(e){if(e>9&&e<100)return 10*Math.floor(e/10);if(e>=100&&e<=999999){var t=100*Math.floor(e/100);return Object(B.n)(t)}return e>999999?Object(yc.a)(e):e}},{key:"render",value:function(){var e=this.getContent();return e?m.a.createElement(rl,{headerText:e.headerText,bodyText:e.bodyText,isLearnMoreButton:!0,onGo:this.onGo,onCloseBanner:this.onCloseBanner,bannerPrefs:Oc}):null}}]),t}(p.PureComponent));Cc.displayName="ThirtyDaysAfterMsgLimitBanner";var Ec,jc,Sc,Ic,wc={showPricingPlans:Xs.g},Nc=Object(g.b)(function(e){return{clogger:Object(re.a)({state:e})}},wc)(Cc),Tc=n("Fsnq"),Ac=n("kKpd"),Rc=n("rEtx"),Pc=n.n(Rc),Mc=n("wvq5"),xc="NEWXP_TEAM_CREATE";!function(e){e.CustomerSupport="customer_support",e.Engineering="engineering",e.HumanResources="human_resources",e.IT="it",e.Marketing="marketing",e.ProjectManagement="project_management",e.Sales="sales",e.Other="other"}(Sc||(Sc={})),function(e){e.Asana="AA16LBCH2",e.DealbotByPipedriveCRM="A2VG0CJAE",e.Drift="A0K07JA1H",e.Dropbox="AES7B2V7D",e.Giphy="A0F827J2C",e.GitHub="A8GBNUWU8",e.GoogleCalendar="ADZ494LHY",e.GoogleDrive="A6NL8MJ6Q",e.Greenhouse="A0J6STP1A",e.HelloSign="A08Q84QDV",e.Hubspot="A9RRCCG73",e.Intercom="A40CLA0DP",e.JenkinsCI="A0F7VRFKN",e.JiraCloud="A2RPP3NFR",e.Lattice="A0HUMK35J",e.MicrosoftOneDrive="AJBCW09GU",e.Salesforce="A2DAS7NNR",e.Sentry="A99FD3DJ5",e.ServiceNow="AB9E0V3KL",e.SimplePoll="A0HFW7MR6",e.Smartsheet="A9AESRU12",e.TettraWiki="A0H4VM9FG",e.Translate="A0ZJS6Z7E",e.Trello="A074YH40Z",e.Twitter="A0F7XDW93",e.Typeform="AD6SC3RT6",e.Zendesk="A9WFQ3M0B"}(Ic||(Ic={}));var Fc,Lc,Dc;Ic.GoogleDrive,Ic.MicrosoftOneDrive,Ec={},fe()(Ec,Sc.CustomerSupport,[Ic.Twitter,Ic.Salesforce,Ic.Zendesk,Ic.Hubspot]),fe()(Ec,Sc.Engineering,[Ic.Sentry,Ic.JiraCloud,Ic.GitHub,Ic.JenkinsCI]),fe()(Ec,Sc.HumanResources,[Ic.Typeform,Ic.Greenhouse,Ic.HelloSign,Ic.Lattice]),fe()(Ec,Sc.IT,[Ic.ServiceNow,Ic.Zendesk,Ic.JiraCloud,Ic.TettraWiki]),fe()(Ec,Sc.Marketing,[Ic.Hubspot,Ic.Translate,Ic.Typeform,Ic.Drift]),fe()(Ec,Sc.Other,[Ic.SimplePoll,Ic.Twitter,Ic.GoogleCalendar,Ic.Giphy]),fe()(Ec,Sc.ProjectManagement,[Ic.Smartsheet,Ic.Trello,Ic.Asana,Ic.JiraCloud]),fe()(Ec,Sc.Sales,[Ic.Salesforce,Ic.Hubspot,Ic.DealbotByPipedriveCRM,Ic.Intercom]),jc={},fe()(jc,Ic.Asana,{name:"Asana",imgUrl:"https://slack-files2.s3-us-west-2.amazonaws.com/avatars/2018-04-04/341591994389_f9b34fbf501c8b52203d_48.png"}),fe()(jc,Ic.DealbotByPipedriveCRM,{name:"Pipedrive CRM",imgUrl:"https://avatars.slack-edge.com/2016-12-21/119877342644_a90a561dd25750cc77dd_48.png"}),fe()(jc,Ic.Drift,{name:"Drift",imgUrl:"https://avatars.slack-edge.com/2017-03-23/158727981474_aab393663006947cd860_48.jpg"}),fe()(jc,Ic.Dropbox,{name:"Dropbox",imgUrl:"https://avatars.slack-edge.com/2019-04-15/608395662292_64108f1a3c1056b0d3c7_48.png"}),fe()(jc,Ic.Giphy,{name:"Giphy",imgUrl:"https://a.slack-edge.com/80588/img/plugins/giphy/service_48.png"}),fe()(jc,Ic.GitHub,{name:"GitHub",imgUrl:"https://slack-files2.s3-us-west-2.amazonaws.com/avatars/2017-12-19/288981919427_f45f04edd92902a96859_48.png"}),fe()(jc,Ic.GoogleCalendar,{name:"Google Calendar",imgUrl:"https://avatars.slack-edge.com/2019-01-02/516787378166_a17b826eedc1dec2f3f8_48.png"}),fe()(jc,Ic.GoogleDrive,{name:"Google Drive",imgUrl:"https://slack-files2.s3-us-west-2.amazonaws.com/avatars/2017-08-28/232381175025_31793c43d684e5a7c75a_48.png"}),fe()(jc,Ic.Greenhouse,{name:"Greenhouse",imgUrl:"https://avatars.slack-edge.com/2016-01-14/18544905735_1cea92ec0da952987380_48.png"}),fe()(jc,Ic.HelloSign,{name:"HelloSign",imgUrl:"https://avatars.slack-edge.com/2015-12-15/16749371637_7e527d2bbeee916187be_48.png"}),fe()(jc,Ic.Hubspot,{name:"Hubspot",imgUrl:"https://slack-files2.s3-us-west-2.amazonaws.com/avatars/2018-03-19/332329477235_3cc1c8d999139c62360d_48.png"}),fe()(jc,Ic.Intercom,{name:"Intercom",imgUrl:"https://slack-files2.s3-us-west-2.amazonaws.com/avatars/2018-01-30/306126627808_ac1ffc3644fe2c8737b9_48.png"}),fe()(jc,Ic.JenkinsCI,{name:"Jenkins CI",imgUrl:"https://a.slack-edge.com/80588/img/services/jenkins-ci_48.png"}),fe()(jc,Ic.JiraCloud,{name:"Jira Cloud",imgUrl:"https://avatars.slack-edge.com/2018-11-30/493753869479_4b703f4119efe3d7d0ff_48.png"}),fe()(jc,Ic.Lattice,{name:"Lattice",imgUrl:"https://slack-files2.s3-us-west-2.amazonaws.com/avatars/2016-01-23/19278931798_32b90bb67beca9f4ffcf_48.png"}),fe()(jc,Ic.MicrosoftOneDrive,{name:"Microsoft OneDrive",imgUrl:"https://avatars.slack-edge.com/2019-05-01/626148669510_848578d4c3743d545733_48.png"}),fe()(jc,Ic.Salesforce,{name:"Salesforce",imgUrl:"https://a.slack-edge.com/80588/img/plugins/salesforce/service_48.png"}),fe()(jc,Ic.Sentry,{name:"Sentry",imgUrl:"https://slack-files2.s3-us-west-2.amazonaws.com/avatars/2018-03-21/334025699284_0f62fd4c5904a32f5b44_48.png"}),fe()(jc,Ic.ServiceNow,{name:"ServiceNow",imgUrl:"https://slack-files2.s3-us-west-2.amazonaws.com/avatars/2018-06-18/384402236326_edb7da7d291684c6420d_48.png"}),fe()(jc,Ic.SimplePoll,{name:"Simple Poll",imgUrl:"https://slack-files2.s3-us-west-2.amazonaws.com/avatars/2016-01-03/17670668547_3b5cda05986fc6c0d978_48.png"}),fe()(jc,Ic.Smartsheet,{name:"Smartsheet",imgUrl:"https://slack-files2.s3-us-west-2.amazonaws.com/avatars/2018-03-16/332169316838_1a4dafcb4c2bee7f3af8_48.png"}),fe()(jc,Ic.TettraWiki,{name:"Tettra Wiki",imgUrl:"https://avatars.slack-edge.com/2018-11-13/478793570930_2146da883de16d940975_48.png"}),fe()(jc,Ic.Translate,{name:"Translate",imgUrl:"https://slack-files2.s3-us-west-2.amazonaws.com/avatars/2016-04-11/33898858753_1b5735c1ed94dbfcaf5f_48.png"}),fe()(jc,Ic.Trello,{name:"Trello",imgUrl:"https://avatars.slack-edge.com/2016-05-18/44042585718_0e6a837d5b63fd1cfc07_48.png"}),fe()(jc,Ic.Twitter,{name:"Twitter",imgUrl:"https://a.slack-edge.com/80588/img/services/twitter_48.png"}),fe()(jc,Ic.Typeform,{name:"Typeform",imgUrl:"https://avatars.slack-edge.com/2018-11-08/474974333636_e8909f5ca3dd60c24591_48.png"}),fe()(jc,Ic.Zendesk,{name:"Zendesk",imgUrl:"https://slack-files2.s3-us-west-2.amazonaws.com/avatars/2018-07-23/403895177205_5bba247da24a9129c161_48.png"});!function(e){e.Government="government",e.Business="business",e.Education="education",e.Other="other"}(Fc||(Fc={})),function(e){e.Collaboration="collaboration",e.Timezones="timezones",e.TrackInfo="trackinfo",e.CommsWithCompanies="commswithcompanies",e.VideoCalls="videocalls"}(Lc||(Lc={})),function(e){e.Free="free",e.Standard="standard",e.Plus="plus"}(Dc||(Dc={}));h.b.string,h.b.node.isRequired,h.b.number.isRequired,h.b.number.isRequired,h.b.func.isRequired;var Uc=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(){var e=this.props,t=e.title;e.currentStep===e.step&&this.props.setModalTitle(t)}},{key:"render",value:function(){var e=this.props,t=e.currentStep===e.step,n=f()({"p-onboarding__step":!0,"p-onboarding__step--active":t,"p-onboarding__step--inactive":!t}),a=m.a.createElement("div",{className:n},t&&this.props.children);return t?a:null}}]),t}(p.Component);Uc.displayName="Step",Uc.defaultProps={title:""};var Bc={setModalTitle:Ac.C},qc=Object(g.b)(null,Bc)(Uc),Hc=n("F7O2"),Wc=new B.b("password"),Gc=function(e){return{no_values:Wc.t("Please enter a password!"),matches_username:Wc.t("That password is too similar to your username. Try something different?"),matches_email:Wc.t("That password is too similar to your email address. Try something different?"),too_short:Wc.t("Your password must be at least 6 characters long."),too_long:Wc.t("Your password can be at most 500 characters long."),numeric_sequence:Wc.t("Your password cannot solely contain sequences of letters or numbers."),alpha_sequence:Wc.t("Your password cannot solely contain sequences of letters or numbers."),adjacent:Wc.t("Your password cannot solely contain adjacent keys on a keyboard."),repeated:Wc.t("Your password cannot solely contain a repeated character."),common:Wc.t("That password is pretty common. Try something different?")}[e]||""},Kc={light:{profile:cdn_url+"/80588/img/tractor/steps/step_01.png",workspace:cdn_url+"/80588/img/tractor/steps/step_02.png",invites:cdn_url+"/80588/img/tractor/steps/step_03.png",completion:cdn_url+"/80588/img/tractor/steps/step_04.png"},dark:{profile:cdn_url+"/484c25/img/tractor/steps/step_01_dark.png",workspace:cdn_url+"/484c25/img/tractor/steps/step_02_dark.png",invites:cdn_url+"/484c25/img/tractor/steps/step_03_dark.png",completion:cdn_url+"/484c25/img/tractor/steps/step_04_dark.png"}},Vc=0,zc=1,Yc=2,Qc=3,Xc={0:"TRACTOR_DIALOG_PROFILE_STEP",1:"TRACTOR_DIALOG_WORKSPACE_STEP",2:"TRACTOR_DIALOG_INVITE_STEP",3:"TRACTOR_DIALOG_COMPLETED_STEP"},Jc={start_team_creator_account_setup:"BANNER_TRACTOR_WELCOME",complete_team_creator_account_setup:"BANNER_TRACTOR_REMINDER",invite_team_creator_account_setup:"BANNER_TRACTOR_INVITES"},Zc=n("nWao"),$c=n("KEK+"),eu=n("t4nz"),tu=(h.b.string.isRequired,function(e){var t=e.src;return m.a.createElement(p.Fragment,null,m.a.createElement("div",{className:"p-onboarding__step__header"},m.a.createElement("img",{src:t,srcSet:t+" 1x, "+t.replace(".png","@2x.png")+" 2x",alt:""})))});tu.displayName="StepHeader";var nu=tu,au=(h.b.string.isRequired,h.b.string,h.b.bool,h.b.func,h.b.bool.isRequired,h.b.bool.isRequired,h.b.bool,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,{realName:"",gdprPref:!1,onPasswordSet:d.a,needsPasswordSet:!0,updateRealName:d.a,updateGdprPref:d.a,updateStep:d.a,setStepCallback:d.a,submitCheckPasswordComplexity:d.a}),ru=new B.b("team_creation"),iu=Object(Ct.b)(),ou=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),a=n.props.realName;return Object(Kt.a)(n,["onRealNameChange","onPasswordChange","onGdprPrefChange","onGo","setRealNameInputRef","updateRealName","validateAndSaveStep"]),n.nameInput=null,n.updateRealNameDebounced=Object(Gt.a)(n.updateRealNameApi,500),n.checkPasswordComplexityDebounced=Object(Gt.a)(n.checkPasswordComplexityApi,500),n.state={realName:a,realNameError:null,password:"",passwordError:null,gdpr:null},n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.nameInput.focus(),this.props.setStepCallback(this.onGo),this.validateAndSaveStep()}},{key:"onRealNameChange",value:function(){this.updateRealNameDebounced(this.state.realName)}},{key:"onPasswordChange",value:function(e){var t=this;this.setState(function(){return{password:e}},function(){t.checkPasswordComplexityDebounced(e)})}},{key:"onGdprPrefChange",value:function(e){var t=this,n=!!e.target.classList.contains("gdpr_pref_radio")||e.target.checked,a=e.target.value;this.setState(function(){return{gdpr:n,gdprRadioValue:a}},function(){t.props.updateGdprPref({gdprPref:n})})}},{key:"onGo",value:function(){var e=this,t=this.props.needsPasswordSet;this.validateAndSaveStep().then(function(n){n.isValid&&(t&&e.props.onPasswordSet(e.state.password),e.props.updateStep({number:zc}))}).catch(function(e){iu.info("TEAM_CREATOR_ONBOARDING",e)})}},{key:"setRealNameInputRef",value:function(e){this.nameInput=e}},{key:"updateRealName",value:function(e){this.setState(function(){return{realName:e}})}},{key:"updateRealNameApi",value:function(e){var t=this;this.props.updateRealName({realName:e}).then(function(){t.setState(function(){return{realNameError:null}})}).catch(function(e){t.setState(function(){return{realNameError:e}})}).finally(function(){t.validateAndSaveStep()})}},{key:"checkPasswordComplexityApi",value:function(e){var t=this;this.props.submitCheckPasswordComplexity({password:e}).then(function(){t.setState(function(){return{passwordError:null}})}).catch(function(e){var n=e.data;t.setState(function(){return{passwordError:n.error}})}).finally(function(){t.validateAndSaveStep()})}},{key:"validateAndSaveStep",value:function(){var e=this.state,t=e.realName,n=e.realNameError,a=e.password,r=e.passwordError,i=!this.props.needsPasswordSet||a;return this.props.updateStep({validated:!(!t||!i||n||r),forceValidation:!0})}},{key:"renderRealNameField",value:function(){var e=this.state,t=e.realName,n=e.realNameError,a=n?n.message:null,r=n?n.name:null,i=f()("realName_input",fe()({"c-input_text--with_error":a,"p-onboarding__step__real_name_input--success":!a},r,a)),o=a?{errorText:a,errorLevel:"error",errorType:"nested_box"}:null,s={name:"real_name",hintText:ru.t("Your name will be displayed with messages you send."),id:"real_name",className:i,"data-qa":"tractor-real-name-input",value:t,onChange:this.updateRealName,onBlur:this.onRealNameChange,ref:this.setRealNameInputRef,isRequired:!0},l={text:ru.t("Your full name"),className:"margin_bottom_150",htmlFor:"real_name",id:"real_name_label"};return m.a.createElement(ja.a,l,m.a.createElement(Ia.a,ye()({},s,o)))}},{key:"renderPasswordField",value:function(){var e=this.state,t=e.password,n=e.passwordError,a=f()("password_input",fe()({"c-input_text--with_error":!!n,"p-onboarding__step__password_input--success":!n},n,!!n)),r={text:ru.t("Your password"),className:"margin_bottom_150",htmlFor:"password_field",id:"passwordLabel"},i={name:"password_field",hintText:ru.t("Passwords must be at least 6 characters long, and can\u2019t be things like password, 123456, or abcdef."),id:"password_field","data-qa":"tractor-password-input",className:a,onChange:this.onPasswordChange,value:t,type:"password",isRequired:!0},o="";n&&(o=Gc(n));var s=n?{errorText:o,errorLevel:"error",errorType:"nested_box"}:null;return m.a.createElement(ja.a,r,m.a.createElement(Ia.a,ye()({},i,s)))}},{key:"renderGdprPref",value:function(){var e=this.props.inEU,t=this.props.gdpr,n=this.state.gdpr,a=m.a.createElement(ja.a,{type:"inline",cursor:"pointer",htmlFor:"gdpr_field",text:ru.t("It\u2019s okay to send me email with Slack tips, news, and offers."),className:"margin_bottom_150 normal tractor_checkbox_label",id:"gdpr_checkbox_label"},m.a.createElement(Sa.a,{id:"gdpr_field",checked:null===n?t:n,"data-qa":"tractor-gdpr-checkbox",onChange:this.onGdprPrefChange})),r=m.a.createElement(Zc.a,{className:"margin_bottom_150 normal tractor_checkbox_label","data-qa":"tractor-gdpr-radiogroup"},m.a.createElement(eu.a,null,ru.rt("<strong>Can we send you email with Slack tips, news, and offers?</strong>")),m.a.createElement(ja.a,{htmlFor:"gdpr_field_yes",text:ru.t("Sure!"),cursor:"pointer",type:"inline"},m.a.createElement($c.a,{id:"gdpr_field_yes",className:"gdpr_pref_radio",value:"opt_in","data-qa":"tractor-gdpr-radio-yes",checked:"opt_in"===this.state.gdprRadioValue,onChange:this.onGdprPrefChange})),m.a.createElement(ja.a,{htmlFor:"gdpr_field_no",text:ru.t("No thanks"),cursor:"pointer",type:"inline"},m.a.createElement($c.a,{id:"gdpr_field_no",className:"gdpr_pref_radio",value:"opt_out","data-qa":"tractor-gdpr-radio-no",checked:"opt_out"===this.state.gdprRadioValue,onChange:this.onGdprPrefChange})));return e?r:a}},{key:"render",value:function(){return m.a.createElement(p.Fragment,null,m.a.createElement(nu,{src:this.props.imgUrl}),m.a.createElement("div",{className:"p-onboarding__step__fields","data-qa":"tractor-profile-step"},this.renderRealNameField(),this.props.needsPasswordSet&&this.renderPasswordField(),this.renderGdprPref()))}}]),t}(p.Component);ou.displayName="ProfileStep",ou.defaultProps=au;var su={updateRealName:Ac.K,updateGdprPref:Ac.I,updateStep:Ac.L,setStepCallback:Ac.D,submitCheckPasswordComplexity:Hc.d},lu=Object(g.b)(function(e){return{realName:Object(Ac.r)(e),gdpr:Object(Ac.m)(e),inEU:Object(Ac.n)(e),needsPasswordSet:Object(Zt.j)(e,"needs_initial_password_set")}},su)(ou),cu=n("P3Po"),uu=(h.b.string.isRequired,h.b.array,h.b.bool,h.b.string,h.b.string.isRequired,h.b.string,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.bool,h.b.bool,h.b.bool,h.b.string,h.b.func,{invites:[],workspaceName:"",domainWhitelistingPref:!1,signupDomain:"",onDialogFinish:d.a,validateInvites:d.a,sendInvites:d.a,setDomainWhitelistingPref:d.a,updateStep:d.a,setStepCallback:d.a,canWhitelistDomain:!1,featureTractorSharedInviteLink:!0,featureTractorBackupChannelnameCopy:!1,sharedInviteLink:"",fetchAndSetSharedInviteLink:d.a}),du=new B.b("team_creation"),pu=Object(Ct.b)(),mu=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),a=n.props.invites,i=a instanceof Array?a.join(", "):a;return Object(Kt.a)(n,["onInvitesChange","onDomainWhitelistingCheckboxChange","onGo","setInvitesInputRef","renderSharedInviteLink","toggleSharedInviteLinkView"]),n.invitesInput=null,n.validateInvitesDebounced=Object(Gt.a)(n.validateInvites,250),n.state={invites:i,invitesError:null,domainWhitelistingPref:!1,toggleSharedInviteLink:!1},n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.invitesInput.focus();var e=this.props,t=e.sharedInviteLink,n=e.featureTractorSharedInviteLink;this.props.setStepCallback(this.onGo),n&&!t&&this.props.fetchAndSetSharedInviteLink(),this.props.updateStep({validated:!0})}},{key:"onInvitesChange",value:function(e){var t=this;this.setState(function(){return{invites:e}},function(){t.validateInvitesDebounced(e)})}},{key:"onDomainWhitelistingCheckboxChange",value:function(e){var t=this,n=e.target.checked;this.setState(function(){return{domainWhitelistingPref:n}},function(){t.props.setDomainWhitelistingPref(n)})}},{key:"onGo",value:function(){var e=this;this.props.sendInvites().then(function(){e.props.onDialogFinish().then(function(){e.props.updateStep({number:Qc})})}).catch(function(t){pu.info("TEAM_CREATOR_ONBOARDING",t),e.setState(function(){return{invitesError:t}})})}},{key:"setInvitesInputRef",value:function(e){this.invitesInput=e}},{key:"validateInvites",value:function(e){var t=this;this.props.validateInvites({invites:e}).then(function(){t.setState(function(){return{invitesError:null}})}).catch(function(e){t.setState(function(){return{invitesError:e}})})}},{key:"toggleSharedInviteLinkView",value:function(){var e=this.state.toggleSharedInviteLink;this.setState(function(){return{toggleSharedInviteLink:!e}})}},{key:"renderInvitesInput",value:function(){var e=this.state,t=e.invites,n=e.invitesError,a=this.props,r=a.workspaceName,i=a.channelName,o=a.featureTractorBackupChannelnameCopy,s=n?n.message:null,l=n?n.name:null,c=f()("invites_input",fe()({"c-input_textarea--with_error":s,"p-onboarding__step__invites_input--success":!s},l,s)),u=void 0;u=o?i&&void 0!==i&&""!==i?du.rt("We\u2019ll send invitations to join <strong>{workspaceName}</strong> on Slack. New members will be added to <strong>#{channelName}</strong>, plus your starter channels, <strong>#general</strong> and <strong>#random</strong>.",{channelName:i,workspaceName:r}):du.rt("We\u2019ll send invitations to join {workspaceName} on Slack. New members will be added to your starter channels, <strong>#general</strong> and <strong>#random</strong>.",{workspaceName:r}):du.rt("We\u2019ll send invitations to join {workspaceName} on Slack. New members will be added to <strong>#{channelName}</strong>, plus your starter channels, <strong>#general</strong> and <strong>#random</strong>.",{channelName:i,workspaceName:r});var d={name:"invites_field",id:"invites_field",className:c,onChange:this.onInvitesChange,value:t,"data-qa":"tractor-invites-input",hintText:n?null:u,ref:this.setInvitesInputRef},p={className:"margin_bottom_150",text:du.t("Email addresses"),htmlFor:"invites_field",id:"invites_label"},h=s?{errorText:s,errorLevel:"error",errorType:"nested_box"}:null;return m.a.createElement(ja.a,p,m.a.createElement(cu.a,ye()({},d,h)))}},{key:"renderDomainWhitelistingCheckbox",value:function(){var e=this.props.signupDomain,t=this.state.domainWhitelistingPref,n=this.props.domainWhitelistingPref;return m.a.createElement(ja.a,{className:"margin_bottom_150 normal tractor_checkbox_label",text:du.rt("Let other people sign up with their verified <strong>@{signupDomain}</strong> email address.",{signupDomain:e}),id:"domain_whitelisting_checkbox_label",htmlFor:"domain_whitelisting_field",type:"inline",cursor:"pointer"},m.a.createElement(Sa.a,{id:"domain_whitelisting_field","data-qa":"tractor-domain-whitelisting-checkbox",checked:null===t?n:t,onChange:this.onDomainWhitelistingCheckboxChange}))}},{key:"renderSharedInviteLink",value:function(){if(!this.props.featureTractorSharedInviteLink)return null;var e=this.props.sharedInviteLink,t=this.state.toggleSharedInviteLink,n=du.t("invite link"),a=du.rt("<b>Or, you could get an <u>{link}</u> to share with other people.</b>",{link:m.a.createElement(En.a,{"data-qa":"tractor_shared_invite_link_toggle",onClick:this.toggleSharedInviteLinkView},n)}),r={text:a,htmlFor:"shared_invite_link",id:"shared_invite_link_label","data-qa":"tractor_shared_invite_link_label"},i={name:"shared_invite_link",id:"shared_invite_link","data-qa":"tractor-invites-shared-invite-input",hintText:du.t("Anyone can use this link to join your workspace. It will expire in 4 weeks and can be used for up to 2000 members."),value:e,onFocus:this.select};return m.a.createElement("div",{className:"margin_bottom_100"},!t&&m.a.createElement("span",null,a),t&&m.a.createElement(ja.a,r,m.a.createElement(Ia.a,i)))}},{key:"render",value:function(){return m.a.createElement(p.Fragment,null,m.a.createElement(nu,{src:this.props.imgUrl}),m.a.createElement("div",{className:"p-onboarding__step__fields","data-qa":"tractor-invites-step"},this.renderInvitesInput(),this.renderSharedInviteLink(),this.props.canWhitelistDomain&&this.renderDomainWhitelistingCheckbox()))}}]),t}(p.Component);mu.displayName="InvitesStep",mu.defaultProps=uu;var hu={validateInvites:Ac.O,sendInvites:Ac.z,setDomainWhitelistingPref:Ac.A,fetchAndSetSharedInviteLink:Ac.d,updateStep:Ac.L,setStepCallback:Ac.D},bu=Object(g.b)(function(e){return{invites:Object(Ac.o)(e),workspaceName:Object(Ac.y)(e),domainWhitelistingPref:Object(Ac.l)(e),channelName:Object(Ac.j)(e),signupDomain:Object(Ac.t)(e),canWhitelistDomain:Object(Ac.i)(e),featureTractorSharedInviteLink:Object(y.m)(e,"feature_tractor_shared_invite_link"),featureTractorBackupChannelnameCopy:Object(y.m)(e,"feature_tractor_backup_channelname_copy"),sharedInviteLink:Object(Ac.s)(e)}},hu)(mu),fu=(h.b.string.isRequired,h.b.string,h.b.string,h.b.bool,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.bool,{workspaceName:"",workspaceDomain:"",hasInvited:!1,onDialogFinish:d.a,updateWorkspaceName:d.a,updateWorkspaceDomain:d.a,updateStep:d.a,setStepCallback:d.a,fetchAndSetSharedInviteLink:d.a,featureTractorSharedInviteLink:!1}),gu=new B.b("team_creation"),_u=Object(Ct.b)(),vu=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),a=n.props,i=a.workspaceName,o=a.workspaceDomain;return Object(Kt.a)(n,["onWorkspaceNameChange","onWorkspaceNameBlur","onWorkspaceDomainChange","onGo","setWorkspaceNameInputRef","validateAndSaveStep"]),n.nameInput=null,n.updateWorkspaceNameDebounced=Object(Gt.a)(n.updateWorkspaceNameApi,500),n.updateWorkspaceDomainDebounced=Object(Gt.a)(n.updateWorkspaceDomainApi,500),n.state={workspaceName:i,workspaceNameError:null,workspaceDomain:o,workspaceDomainError:null},n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.nameInput.focus(),this.props.setStepCallback(this.onGo),this.props.updateStep({validated:!0})}},{key:"onWorkspaceNameChange",value:function(e){var t=this;this.setState(function(){return{workspaceName:e}},function(){t.updateWorkspaceNameDebounced(e)})}},{key:"onWorkspaceNameBlur",value:function(){var e=this.props.workspaceName;this.state.workspaceName||this.onWorkspaceNameChange(e)}},{key:"onWorkspaceDomainChange",value:function(e){var t=this;this.setState(function(){return{workspaceDomain:e}},function(){t.updateWorkspaceDomainDebounced(e)})}},{key:"onGo",value:function(){var e=this;this.validateAndSaveStep().then(function(t){t.isValid&&(e.props.hasInvited?e.props.onDialogFinish().then(function(){e.props.updateStep({number:Qc})}):e.props.updateStep({number:Yc}))}).catch(function(e){_u.info("TEAM_CREATOR_ONBOARDING",e)})}},{key:"setWorkspaceNameInputRef",value:function(e){this.nameInput=e}},{key:"updateWorkspaceNameApi",value:function(e){var t=this;this.props.updateWorkspaceName({workspaceName:e}).then(function(){t.setState(function(){return{workspaceNameError:null}})}).catch(function(e){t.setState(function(){return{workspaceNameError:e}})}).finally(function(){t.validateAndSaveStep()})}},{key:"updateWorkspaceDomainApi",value:function(e){var t=this,n=this.props.featureTractorSharedInviteLink;this.props.updateWorkspaceDomain({workspaceDomain:e}).then(function(){t.setState(function(){return{workspaceDomainError:null}}),n&&t.props.fetchAndSetSharedInviteLink()}).catch(function(e){t.setState(function(){return{workspaceDomainError:e}})}).finally(function(){t.validateAndSaveStep()})}},{key:"validateAndSaveStep",value:function(){var e=this.state,t=e.workspaceDomain,n=e.workspaceNameError,a=e.workspaceDomainError;return this.props.updateStep({validated:!(!t||n||a),forceValidation:!0})}},{key:"renderWorkspaceName",value:function(){var e=this.state,t=e.workspaceName,n=e.workspaceNameError,a=n?n.message:null,r=n?n.name:null,i=f()("workspaceName_input",fe()({"c-input_text--with_error":a,"p-onboarding__step__workspace_name_input--success":!a},r,a)),o={className:"margin_bottom_150",text:gu.t("Slack workspace name"),htmlFor:"workspace_name_field",id:"workspace_name_label"},s={name:"workspace_name_field",id:"workspace_name_field",className:i,onChange:this.onWorkspaceNameChange,onBlur:this.onWorkspaceNameBlur,value:t,"data-qa":"tractor-workspace-name-input",hintText:gu.t("Most teams use the name of their company or organization."),ref:this.setWorkspaceNameInputRef,isRequired:!0},l=a?{errorText:a,errorLevel:"error",errorType:"nested_box"}:null;return m.a.createElement(ja.a,o,m.a.createElement(Ia.a,ye()({},s,l)))}},{key:"renderWorkspaceDomain",value:function(){var e=this.state,t=e.workspaceDomain,n=e.workspaceDomainError,a=n?n.message:null,r=n?n.name:null,i=f()("workspaceDomain_input",fe()({"c-input_text--with_error":a,"p-onboarding__step__workspace_domain_input--success":!a},r,a)),o={text:gu.t("Slack URL"),className:"margin_bottom_150",htmlFor:"workspace_domain_field",id:"workspace_domain_label"},s={name:"workspace_domain_field",id:"workspace_domain_field",className:i,hintText:gu.t("You\u2019ll use this URL to sign in to Slack. Letters, numbers, and hyphens only."),"data-qa":"tractor-workspace-domain-input",onChange:this.onWorkspaceDomainChange,value:t,suffix:".slack.com",isRequired:!0},l=a?{errorText:a,errorLevel:"error",errorType:"nested_box"}:null;return m.a.createElement(ja.a,o,m.a.createElement(Ia.a,ye()({},s,l)))}},{key:"render",value:function(){return m.a.createElement(p.Fragment,null,m.a.createElement(nu,{src:this.props.imgUrl}),m.a.createElement("div",{className:"p-onboarding__step__fields","data-qa":"tractor-workspace-step"},this.renderWorkspaceName(),this.renderWorkspaceDomain()))}}]),t}(p.Component);vu.displayName="WorkspaceStep",vu.defaultProps=fu;var yu={updateWorkspaceName:Ac.N,updateWorkspaceDomain:Ac.M,fetchAndSetSharedInviteLink:Ac.d,updateStep:Ac.L,setStepCallback:Ac.D},ku=Object(g.b)(function(e){return{workspaceName:Object(Ac.y)(e),workspaceDomain:Object(Ac.x)(e),hasInvited:Object(Zt.j)(e,"has_invited"),featureTractorSharedInviteLink:Object(y.m)(e,"feature_tractor_shared_invite_link")}},yu)(vu),Ou=(h.b.string.isRequired,h.b.array,h.b.string.isRequired,h.b.func,{invites:[],updateStep:d.a}),Cu=new B.b("team_creation"),Eu=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.updateStep({validated:!0})}},{key:"render",value:function(){var e=this.props,t=e.imgUrl,n=e.invites,a=e.channelName,r=a&&void 0!==a&&""!==a?n.length:0,i=void 0,o=void 0;switch(r){case 0:i=Cu.t("Your Slack workspace is all set"),o=Cu.rt("We\u2019ve added a few basic channels for your team \u2014 go ahead and poke around! Or <strong>try sending yourself a direct message</strong> to test things out.");break;case 1:i=Cu.t("Your invitation has been sent!"),o=Cu.rt("Your teammate will be here as soon as they accept the invitation. Until then, try posting a welcome message for them in <strong>#{channelName}</strong>.",{channelName:a});break;default:i=Cu.t("Your {numInvites} invitations have been sent!",{numInvites:r}),o=Cu.rt("Your teammates will be here as soon as they accept their invitations. Until then, try posting a welcome message for them in <strong>#{channelName}</strong>.",{channelName:a})}return m.a.createElement(p.Fragment,null,m.a.createElement(nu,{src:t}),m.a.createElement("div",{className:"p-onboarding__step__fields","data-qa":"tractor-completion-step"},m.a.createElement("h2",null,i),o))}}]),t}(p.Component);Eu.displayName="CompletionStep",Eu.defaultProps=Ou;var ju={updateStep:Ac.L},Su=Object(g.b)(function(e){return{invites:Object(Ac.o)(e),channelName:Object(Ac.j)(e)}},ju)(Eu),Iu=(n("Drpm"),h.b.array,h.b.string,h.b.func,h.b.func,h.b.number,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.object.isRequired,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.oneOf(["light","dark"]),{invites:[],modalTitle:"",onClose:d.a,stepCallback:d.a,stepNumber:0,isCurrentStepValid:!1,isPromiseRunning:!1,hasInvited:!1,needsPasswordSet:!0,fetchAndSetChannelInfo:d.a,fetchAndSetWorkspace:d.a,fetchAndSetSignupDetails:d.a,setInitialMarketingPref:d.a,setStepNumber:d.a,updatePassword:d.a,submitDomainWhitelistingPref:d.a,completeWorkflowTask:d.a,closeModal:d.a,clientTheme:"light"}),wu=new B.b("team_creation"),Nu=Object(Ct.b)(),Tu=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["getGoButtonText","getFooterText","onBack","onGo","onPasswordSet","onDialogFinish","onClose"]),n.state={password:null},n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.fetchAndSetChannelInfo(),this.props.fetchAndSetWorkspace(),this.props.fetchAndSetSignupDetails(),this.props.setInitialMarketingPref(),this.preloadRemainingImages(),Nu.info("TEAM_CREATOR_ONBOARDING","Onboarding dialog mounted."),this.props.needsPasswordSet&&this.props.setStepNumber(0)}},{key:"onBack",value:function(){var e=this.props,t=e.stepNumber,n=e.clogger,a=void 0;a=t>0?t-1:2,n.track(le.EventId.GROWTH_CREATE_TRACTOR_TEAM,{contexts:{ui_context:{step:Xc[t],action:"BACK"}}}),n.track(xc,{contexts:{ui_context:{step:Xc[t],action:"BACK"}}}),this.props.setStepNumber(a)}},{key:"onGo",value:function(){var e=this.props,t=e.stepCallback,n=e.isCurrentStepValid,a=e.clogger,r=e.stepNumber;n&&t(),a.track(le.EventId.GROWTH_CREATE_TRACTOR_TEAM,{contexts:{ui_context:{step:Xc[r],action:"CLICK"}}}),a.track(xc,{contexts:{ui_context:{step:Xc[r],action:"CLICK"}}})}},{key:"onClose",value:function(){var e=this.props,t=e.clogger,n=e.stepNumber;t.track(le.EventId.GROWTH_CREATE_TRACTOR_TEAM,{contexts:{ui_context:{step:Xc[n],action:"CLOSE"}}}),t.track(xc,{contexts:{ui_context:{step:Xc[n],action:"CLOSE"}}}),Object(ae.a)()?this.props.closeModal():this.props.onClose()}},{key:"onPasswordSet",value:function(e){this.setState(function(){return{password:e}})}},{key:"onDialogFinish",value:function(){var e=this,t=this.state.password,n=void 0;n=this.props.needsPasswordSet?this.props.updatePassword({password:t}):Promise.resolve();var a=this.props.submitDomainWhitelistingPref();return Promise.all([n,a]).then(function(){return e.props.completeWorkflowTask({taskSubtype:"complete_team_creator_account_setup"})}).catch(function(e){Nu.info("TEAM_CREATOR_ONBOARDING",e)})}},{key:"getGoButtonText",value:function(){var e=this.props,t=e.stepNumber,n=e.invites,a=e.hasInvited,r=n?n.length:0;switch(t){case 1:return a?wu.t("Finish"):wu.t("Next");case 2:return r>=1?wu.t("Add {numEmails, plural, =1 {# Person} other {# People}}",{numEmails:r,fallbackHash:"afa51f5e80065586875a7cd693abcad1a66bdb3b"}):wu.t("Finish");case 3:return 0===r?wu.t("Explore Slack"):wu.t("Start the Conversation");default:return wu.t("Next")}}},{key:"getFooterText",value:function(){var e=this.props,t=e.stepNumber,n=e.hasInvited;if(t>=3)return null;var a=t+1,r=n?2:3;return wu.t("Step {stepNumber} of {totalSteps}",{stepNumber:a,totalSteps:r})}},{key:"preloadRemainingImages",value:function(){Object(ft.a)(Kc[this.props.clientTheme],function(e,t){if("profile"===t)return null;var n=new Image,a=new Image;return n.src=e,a.src=e.replace(".png","@2x.png"),null})}},{key:"shouldShowBackButton",value:function(e){return e!==Vc&&e!==Qc}},{key:"render",value:function(){var e=this.props,t=e.modalTitle,n=e.stepNumber,a=e.isCurrentStepValid,r=e.isPromiseRunning,i=e.clientTheme,o=f()("p-team_creator_onboarding_dialog",{"p-team_creator_onboarding_dialog--complete":3===n});return m.a.createElement(p.Fragment,null,m.a.createElement(nn.b,{showGoButton:!0,showCloseButton:!0,showHeader:!0,shouldCloseOnCancel:!1,shouldCloseOnGo:n===Qc,truncateTitle:!1,onClose:this.onClose,showCancelButton:this.shouldShowBackButton(n),goButtonIsDisabled:!a,goButtonIsPending:r,goButtonText:this.getGoButtonText(),title:t,footerText:this.getFooterText(),onGo:this.onGo,onCancel:this.onBack,cancelText:wu.t("Back"),id:"team-creator-onboarding-dialog","data-qa":"team-creator-onboarding-dialog",className:o,bodyClassName:"p-team_creator_onboarding_dialog__body"},m.a.createElement(qc,{step:0,currentStep:n,title:wu.t("Set your name and password")},m.a.createElement(lu,{imgUrl:Kc[i].profile,onPasswordSet:this.onPasswordSet})),m.a.createElement(qc,{step:1,currentStep:n,title:wu.t("Review your team\u2019s details")},m.a.createElement(ku,{imgUrl:Kc[i].workspace,onDialogFinish:this.onDialogFinish})),m.a.createElement(qc,{step:2,currentStep:n,title:wu.t("Add people to your Slack workspace")},m.a.createElement("div",null),m.a.createElement(bu,{imgUrl:Kc[i].invites,onDialogFinish:this.onDialogFinish})),m.a.createElement(qc,{step:3,currentStep:n},m.a.createElement("div",null),m.a.createElement(Su,{imgUrl:Kc[i].completion}))))}}]),t}(m.a.Component);Tu.displayName="TeamCreatorOnboardingDialog",Tu.defaultProps=Iu;var Au={fetchAndSetChannelInfo:Ac.c,fetchAndSetWorkspace:Ac.f,fetchAndSetSignupDetails:Ac.e,setInitialMarketingPref:Ac.B,setStepNumber:Ac.E,updatePassword:Ac.J,submitDomainWhitelistingPref:Ac.H,completeWorkflowTask:Ac.a,closeModal:tn.a},Ru=Object(g.b)(function(e){return{hasInvited:Object(Zt.j)(e,"has_invited"),needsPasswordSet:Object(Zt.j)(e,"needs_initial_password_set"),stepNumber:Object(Ac.v)(e),modalTitle:Object(Ac.q)(e),stepCallback:Object(Ac.u)(e),isCurrentStepValid:Object(Ac.k)(e),isPromiseRunning:Object(Ac.p)(e),invites:Object(Ac.o)(e),clogger:Object(re.a)({state:e}),clientTheme:Object(D.c)(e)}},Au)(Tu),Pu=n("yg0S"),Mu=new B.b("team_creation"),xu={countPref:"team_creation_account_setup_banner_cta_count",tsPref:"team_creation_account_setup_banner_cta_last_ts"},Fu=(h.b.object.isRequired,h.b.object.isRequired,h.b.string.isRequired,h.b.bool,h.b.object,h.b.string,h.b.func,h.b.number.isRequired,h.b.func,h.b.string,h.b.func,h.b.func,h.b.bool,h.b.oneOf(["light","dark"]),h.b.func,{hasInvited:!1,workflow:null,activeWorkflowTask:"",completeWorkflowTask:d.a,openTeamCreatorOnboardingDialog:d.a,currentChannelId:"",showSecondBanner:d.a,openInviteDialog:d.a,featureJiraNewxp1754:!1,clientTheme:"light",fetchWorkflow:d.a}),Lu=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["openInviteDialog","openTeamCreatorDialog"]),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.activeWorkflowTask,n=e.workflow,a=e.fetchWorkflow;this.loadFirstImageForDialog(),"start_team_creator_account_setup"===t&&this.props.completeWorkflowTask({taskSubtype:"start_team_creator_account_setup"}),this.clogBannerChanges({action:"impression"}),n||a()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.activeWorkflowTask,a=t.currentChannelId,r=t.showSecondBanner;n!==e.activeWorkflowTask&&this.clogBannerChanges({action:"impression"}),a!==e.currentChannelId&&r()}},{key:"openInviteDialog",value:function(){var e=this.props.openInviteDialog;return this.clogBannerChanges({action:"click",ui_element:le.UiElement.BANNER_TRACTOR_PRIMARY_CTA}),e({source:"team_creation_account_setup_banner"})}},{key:"openTeamCreatorDialog",value:function(){var e=this.props,t=e.teamId,n=e.openTeamCreatorOnboardingDialog;return this.clogBannerChanges({action:"click",ui_element:le.UiElement.BANNER_TRACTOR_PRIMARY_CTA}),Object(ae.a)()?n():function(e,t,n){var a=Object(_.getStoreInstanceByTeamId)(e);Object(Mc.a)(m.a.createElement(g.a,{store:a},m.a.createElement(Pu.a,null,m.a.createElement(Ru,ye()({onClose:function(){Object(nr.a)(function(){Pc.a.unmountComponentAtNode(t)})}},n)))),t)}(t,document.getElementById("team_creation_dialog_mount_point"))}},{key:"clogBannerChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.props,n=t.activeWorkflowTask,a=n;"start_team_creator_account_setup"!==n&&"complete_team_creator_account_setup"!==n&&(a="invite_team_creator_account_setup"),t.clogger.track(le.EventId.GROWTH_BANNER_TRACTOR,{contexts:{ui_context:ye()({},e,{step:Jc[a]})}})}},{key:"loadFirstImageForDialog",value:function(){var e=new Image,t=new Image,n=Kc[this.props.clientTheme].profile;e.src=n,t.src=n.replace(".png","@2x.png")}},{key:"render",value:function(){var e=this.props,t=e.hasInvited,n=e.workflow,a=e.activeWorkflowTask,r=e.featureJiraNewxp1754;if(null===n||"completed"===n.state&&(t||this.props.nonBotMembersCount>1))return null;var i={bodyClass:"p-message_pane_banner__body--wider-text",showCancelButton:!1,bannerPrefs:xu,shouldCloseOnGo:!1};if("start_team_creator_account_setup"===a){var o=t?Mu.t("You can send messages here right away \u2014 but to get the most out of Slack, the next steps are to save your account and then get the conversation started."):Mu.t("You can send messages here right away \u2013 but to get the most out of Slack, the next step is to save your account and invite a few people to join the conversation.");return m.a.createElement(rl,ye()({},i,{bannerAriaLabel:r?Mu.t("Account setup banner"):"",headerText:Mu.t("Here it is! The first channel in your team\u2019s Slack workspace"),focusOnHeader:!0,bodyText:o,onGo:this.openTeamCreatorDialog,imgSrc:cdn_url+"/80588/img/tractor/banners/first_setup@2x.png",goButtonText:Mu.t("Finish Signing Up")}))}if("complete_team_creator_account_setup"===a){var s=t?Mu.t("To see what teamwork is like in Slack, take a moment to save your account."):Mu.t("To see what teamwork is like in Slack, take a moment to save your account and invite some teammates to join your workspace.");return m.a.createElement(rl,ye()({},i,{bannerAriaLabel:r?Mu.t("Account setup banner"):"",headerText:Mu.t("Save your account and start collaborating"),focusOnHeader:!0,bodyText:s,onGo:this.openTeamCreatorDialog,imgSrc:cdn_url+"/80588/img/tractor/banners/second_setup@2x.png",goButtonText:Mu.t("Finish Signing Up")}))}return t?null:m.a.createElement(rl,ye()({},i,{bannerAriaLabel:r?Mu.t("Invite teammates banner"):"",headerText:Mu.t("Bring your team into Slack"),bodyText:Mu.t("Slack is better with teammates \u2013 invite them to start collaborating."),onGo:this.openInviteDialog,imgSrc:cdn_url+"/80588/img/tractor/banners/invite_others@2x.png",goButtonText:Mu.t("Add People")}))}}]),t}(p.PureComponent);Lu.displayName="TeamCreationAccountSetupBanner",Lu.defaultProps=Fu;var Du=Object(g.b)(function(e){var t=Object(E.a)(e),n=t&&Object(G.e)(e,t,!1),a=Object(K.Y)(n)?t:"";return{clogger:Object(re.a)({state:e}),logger:Object(Ct.a)({state:e}),teamId:Object(v.b)(e),hasInvited:Object(Zt.j)(e,"has_invited"),workflow:Object(Ac.w)(e),activeWorkflowTask:Object(Ac.h)(e),nonBotMembersCount:Object(Tc.a)(Object(aa.a)(Object(xo.a)(e),function(e){return!e.is_bot&&!e.is_slackbot})),currentChannelId:a,featureJiraNewxp1754:Object(y.m)(e,"feature_jira_newxp_1754"),clientTheme:Object(D.c)(e)}},function(e){return{completeWorkflowTask:function(){return e(Ac.a.apply(void 0,arguments))},fetchWorkflow:function(){return e(Object(Ac.g)({onlyActive:!1}))},showSecondBanner:function(){return e(Ac.G.apply(void 0,arguments))},openTeamCreatorOnboardingDialog:function(){e(Object(tn.e)({element:m.a.createElement(Ru),name:"team-creator-onboarding-dialog"}))},openInviteDialog:function(){return e(M.a.apply(void 0,arguments))}}})(Lu),Uu=new B.b("paid_benefits_banners"),Bu=(h.b.object.isRequired,h.b.object.isRequired,{countPref:"paid_benefits_banner_cta_count",tsPref:"paid_benefits_banner_cta_last_ts"}),qu=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["onGo","onCancel","onCloseIcon"]),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.clogger.track(le.EventId.GROWTH_PRICING,{contexts:{ui_context:{step:le.UiStep.BANNER_PAID_BENEFITS_AWARENESS,action:le.UiAction.IMPRESSION}}})}},{key:"onGo",value:function(){this.clogClick("learn_more"),Object(De.R)(this.props.team,"benefits/standard?entry_point=paid_benefits_awareness_banner")}},{key:"onCancel",value:function(){this.clogClick("not_now")}},{key:"onCloseIcon",value:function(){this.clogClick("close")}},{key:"getContent",value:function(){return{headerText:Uu.t("See all that Slack has to offer"),bodyText:Uu.t("Discover what more your Slack team can do with a paid plan \u2014 including searching unlimited messages, installing unlimited apps, making group calls, and more."),cancelButtonText:Uu.t("Not Now")}}},{key:"clogClick",value:function(e){this.props.clogger.track(le.EventId.GROWTH_PRICING,{contexts:{ui_context:{step:le.UiStep.BANNER_PAID_BENEFITS_AWARENESS,action:le.UiAction.CLICK,ui_properties:{element_type:le.ElementType.BUTTON,element_name:e}}}})}},{key:"render",value:function(){var e=this.getContent();return e?m.a.createElement(rl,{bodyClass:"p-message_pane_banner__body--wider-text",headerText:e.headerText,bodyText:e.bodyText,cancelButtonText:e.cancelButtonText,showCloseIcon:!0,isLearnMoreButton:!0,shouldCloseOnGo:!1,onGo:this.onGo,onCancel:this.onCancel,onCloseIcon:this.onCloseIcon,bannerPrefs:Bu}):null}}]),t}(p.PureComponent);qu.displayName="PaidBenefitsAwarenessBanner",qu.defaultProps={};var Hu=Object(g.b)(function(e){return{clogger:Object(re.a)({state:e}),team:Object(we.d)(e)}})(qu),Wu=n("MXQz"),Gu=n("wd/R"),Ku=n.n(Gu),Vu=new B.b("trial_expiration_banners"),zu={countPref:"shared_channel_trial_banner_cta_count",tsPref:"shared_channel_trial_banner_cta_last_ts"};h.b.bool.isRequired,h.b.number.isRequired,h.b.string.isRequired,h.b.func.isRequired,h.b.number.isRequired,h.b.object.isRequired,h.b.object.isRequired,h.b.object.isRequired;var Yu=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["renderBodyText","renderPersistentBodyText","onCloseBanner","onUpgradeLinkClick"]),n.logImpression=Object(Wu.a)(function(e,t){e.track(le.EventId.CHANNEL_CREATE_FLOW,{contexts:{ui_context:{step:t,action:le.UiAction.IMPRESSION}}})}),n}return u()(t,e),o()(t,[{key:"componentDidUpdate",value:function(){var e=this.props.clogger,t=void 0;t=this.showDismissibleBanner()?this.getDismissibleBannerUiStep():le.UiStep.SHARED_CHANNEL_TRIAL_PERSISTENT_BANNER,this.logImpression(e,t)}},{key:"onCloseBanner",value:function(){var e=this.props.bannerData;this.props.updateBanner({name:"shared_channel_trial_banner",data:e})}},{key:"onUpgradeLinkClick",value:function(){var e=this.props,t=e.productId,n=e.team,a=Sl.a+"?s=1&p="+t+"&entry_point=shared_channel_trial_banner";Object(De.R)(n,a),this.clogLink()}},{key:"getNumDaysLeft",value:function(){var e=this.props.expirationTs,t=Ku.a.unix(e),n=Ku()();return t.diff(n,"days")}},{key:"getDismissibleBannerUiStep",value:function(){return this.getNumDaysLeft()<=3?le.UiStep.SHARED_CHANNEL_TRIAL_THREE_DAYS_LEFT_BANNER:le.UiStep.SHARED_CHANNEL_TRIAL_WELCOME_BANNER}},{key:"showDismissibleBanner",value:function(){var e=this.props,t=e.lastDismissTs,n=e.expirationTs;if(0===t)return!0;var a=Ku.a.unix(n).subtract(3,"d"),r=Ku.a.unix(t),i=Ku()();return!(!r.isBefore(a)||!i.isAfter(a))}},{key:"clogLink",value:function(){var e=this.props.clogger,t={step:le.UiStep.SHARED_CHANNEL_TRIAL_PERSISTENT_BANNER,action:le.UiAction.CLICK,is_primary_cta:!0,ui_properties:{element_type:le.ElementType.LINK,element_name:"upgrade"}};e.track(le.EventId.CHANNEL_CREATE_FLOW,{contexts:{ui_context:t}})}},{key:"renderHeaderText",value:function(){return this.props.featureSharedChannelsFreeTrial?this.getNumDaysLeft()<=3?Vu.t("Your shared channel is ending soon"):Vu.t("Welcome to your shared channel"):null}},{key:"renderBodyText",value:function(e){var t=this.props,n=t.expirationTs;if(!t.featureSharedChannelsFreeTrial)return null;var a=Object(B.j)(e,{noEscape:!0,react:!0});if(this.getNumDaysLeft()<=3){var r=Ku.a.unix(n).format("MMM DD, YYYY");return Vu.rt("Once your trial ends, you won\u2019t be able to use this channel with <strong>{sharedTeamNameString}</strong>. Upgrade before {expirationDate} to stay connected.",{sharedTeamNameString:a,expirationDate:r})}return Vu.rt("After your 14-day trial ends, this channel will <strong>no longer be shared</strong> with <strong>{sharedTeamNameString}</strong>. Upgrade to keep this channel and all the features in the Standard plan.",{sharedTeamNameString:a})}},{key:"renderPersistentBodyText",value:function(){var e=this;return this.props.featureSharedChannelsFreeTrial?Vu.rt("<strong>Trial ends in {numDaysLeft, plural, =1 {1 day} other {# days}} - </strong> Upgrade to keep this shared channel. <a><strong>Upgrade</strong></a>",{numDaysLeft:this.getNumDaysLeft()},function(t){var n=t.text,a=t.key;return"a"===t.tag?m.a.createElement(la.a,{key:a,onClick:e.onUpgradeLinkClick,"data-qa":"shared_channel_persistent_banner_upgrade_link"},n):""}):null}},{key:"render",value:function(){var e=this.props,t=e.productId;if(!e.featureSharedChannelsFreeTrial)return null;var n={bannerPrefs:zu,clogEvent:le.EventId.CHANNEL_CREATE_FLOW};if(this.showDismissibleBanner()){var a=Vu.t("Upgrade Now");n=ye()({},n,{clogStep:this.getDismissibleBannerUiStep(),onGoUrl:Sl.a+"?s=1&p="+t+"&entry_point=shared_channel_trial_banner",goButtonText:a,headerText:this.renderHeaderText(),renderBodyText:this.renderBodyText,onCloseBanner:this.onCloseBanner,showCloseIcon:!0})}else n=ye()({},n,{clogStep:le.UiStep.SHARED_CHANNEL_TRIAL_PERSISTENT_BANNER,renderBodyText:this.renderPersistentBodyText,bannerContainerClass:"p-message_pane_banner--persistent",bodyClass:"p-message_pane_banner__body--persistent",bodyIcon:"clock-o",showCloseIcon:!1,showGoButton:!1});return m.a.createElement(Tl,n)}}]),t}(p.PureComponent);Yu.displayName="SharedChannelTrialBanner";var Qu=Object(g.b)(function(e){return{featureSharedChannelsFreeTrial:Object(y.m)(e,"feature_shared_channels_free_trial"),lastDismissTs:Object(Xs.e)(e),bannerData:Object(Xs.c)(e),team:Object(we.d)(e),clogger:Object(re.a)({state:e})}},function(e){return{updateBanner:function(){e(Xs.f.apply(void 0,arguments))}}})(Yu),Xu=(h.b.string,h.b.object,h.b.func.isRequired,function(e){var t=e.bannerData;return m.a.createElement(cl,{totalUsers:t.total_users,totalChannels:t.total_channels,messagesCount:t.messages_count,teamName:t.team_name})});Xu.displayName="renderActivationMsgLimitBanner";var Ju=function(){return m.a.createElement(fl,null)};Ju.displayName="renderI18nJapanBetaSendBtnBanner";var Zu=function(e){var t=e.bannerData;return m.a.createElement(jl,{discountPercent:t.discount_pct,country:t.country})};Zu.displayName="renderLocalDiscountAwarenessBanner";var $u=function(e){var t=e.bannerData;return m.a.createElement(Ml,{numDaysLeft:t.no_of_days_left,expirationDate:t.pay_date_next,productId:t.product_id})};$u.displayName="renderTwoWeeksLeftEscTrialBanner";var ed=function(e){var t=e.bannerData;return m.a.createElement(Dl,{numDaysLeft:t.no_of_days_left,expirationDate:t.pay_date_next,productId:t.product_id})};ed.displayName="renderOneWeekLeftEscTrialBanner";var td=function(e){var t=e.bannerData;return m.a.createElement(Hl,{numDaysLeft:t.no_of_days_left,productId:t.product_id})};td.displayName="renderSevenDaysLeftTrialBanner";var nd=function(e){var t=e.bannerData;return m.a.createElement(Vl,{expirationDate:t.pay_date_next,productId:t.product_id})};nd.displayName="renderThreeDaysLeftEscTrialBanner";var ad=function(e){var t=e.bannerData;return m.a.createElement(Xl,{expirationDate:t.pay_date_next,productId:t.product_id})};ad.displayName="renderThreeDaysLeftTrialBanner";var rd=function(e){var t=e.bannerData;return m.a.createElement(Qu,{expirationTs:t.plan_expiration_ts,productId:t.product_id})};rd.displayName="renderSharedChannelTrialBanner";var id=function(){return m.a.createElement(cc,null)};id.displayName="renderApproachingFileLimitBanner";var od=function(e){var t=e.bannerData;return m.a.createElement(ec,{numMsgs:t.messages_count_abbrev})};od.displayName="renderInProdTrialBanner";var sd=function(e){var t=e.bannerData;return m.a.createElement(rc,{expirationDate:t.expiration_date})};sd.displayName="renderInProdTrialReminderBanner";var ld=function(e){var t=e.bannerData;return m.a.createElement(hc,{messagesCount:t.messages_count})};ld.displayName="renderApproachingMsgLimitBanner";var cd=function(e){var t=e.bannerData;return m.a.createElement(vc,{messagesCount:t.messages_count})};cd.displayName="renderJustReachedMsgLimitBanner";var ud=function(e){var t=e.bannerData;return m.a.createElement(Nc,{messagesCount:t.messages_count})};ud.displayName="renderThirtyDaysAfterMsgLimitBanner";var dd=function(){return m.a.createElement(Du,null)};dd.displayName="renderTeamCreationAccountSetupBanner";var pd=function(){return m.a.createElement(Hu,null)};pd.displayName="renderPaidBenefitsAwarenessBanner";var md={activation_msg_limit_banner:Xu,i18n_japan_beta_send_btn_banner:Ju,local_discount_awareness_banner:Zu,two_weeks_left_esc_trial_banner:$u,one_week_left_esc_trial_banner:ed,seven_days_left_trial_banner:td,three_days_left_esc_trial_banner:nd,three_days_left_trial_banner:ad,shared_channel_trial_banner:rd,in_prod_trial_banner:od,in_prod_trial_reminder_banner:sd,approaching_file_limit_banner:id,approaching_msg_limit_banner:ld,just_reached_msg_limit_banner:cd,thirty_days_after_msg_limit_banner:ud,team_creation_account_setup_banner:dd,paid_benefits_awareness_banner:pd},hd=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){var e=this.parseUrlDebugArgs();this.props.throttledLoadBanner(e)}},{key:"parseUrlDebugArgs",value:function(){var e=Object(Ii.r)(window.location),t={};return e.banner_type&&(t.qa_banner_type=e.banner_type,t.qa_banner_data={},Object.keys(e).forEach(function(n){var a=n.split("banner_data_")[1];if(a){var r=parseInt(e[n],10);isNaN(r)&&(r=e[n]),t.qa_banner_data[a]=r}}),t.qa_banner_data=JSON.stringify(t.qa_banner_data)),t}},{key:"render",value:function(){var e=this.props,t=e.bannerName,n=e.bannerData;if(!t)return null;if(Zs(t))return $s(t,n),null;var a=md[t];return a?a({bannerData:n}):(Js({name:t,data:n}),null)}}]),t}(p.PureComponent);hd.displayName="MessagePaneBannerContainer",hd.defaultProps={bannerName:"",bannerData:{}};var bd={throttledLoadBanner:Xs.h},fd=Object(g.b)(function(e){return{bannerName:Object(Xs.d)(e),bannerData:Object(Xs.c)(e)}},bd)(hd),gd=(n("ixEi"),new B.b("offline_mode"));function _d(e){var t=e.featureOfflineMode,n=e.caption;return t?m.a.createElement("div",{className:"p-large_offline_indicator"},m.a.createElement("p",{className:"p-large_offline_indicator__headline"},m.a.createElement(ta.b,{type:"cloud-offline-small",size:"inherit"})," ",gd.t("No connection")),m.a.createElement("p",{className:"p-large_offline_indicator__caption"},n||gd.t("Go online to get the latest messages."))):null}_d.displayName="LargeOfflineIndicator",_d.defaultProps={caption:void 0};var vd,yd=Object(rr.a)("feature_offline_mode")(_d),kd=n("b89k"),Od=n("JvzI"),Cd=n("K7CU"),Ed=n("/Rx2"),jd=n("s19S"),Sd=n("tRvn"),Id=n("RMmo"),wd={default:{tada:cdn_url+"/80588/img/unread/empty/default/1f389.png",victory:{1:cdn_url+"/80588/img/unread/empty/default/270c-fe0f.png",2:cdn_url+"/80588/img/unread/empty/default/270c-1f3fb.png",3:cdn_url+"/80588/img/unread/empty/default/270c-1f3fc.png",4:cdn_url+"/80588/img/unread/empty/default/270c-1f3fd.png",5:cdn_url+"/80588/img/unread/empty/default/270c-1f3fe.png",6:cdn_url+"/80588/img/unread/empty/default/270c-1f3ff.png"},racecar:cdn_url+"/80588/img/unread/empty/default/1f3ce-fe0f.png",rocket:cdn_url+"/80588/img/unread/empty/default/1f680.png",octopus:cdn_url+"/80588/img/unread/empty/default/1f419.png",high5:{1:cdn_url+"/80588/img/unread/empty/default/1f64c.png",2:cdn_url+"/80588/img/unread/empty/default/1f64c-1f3fb.png",3:cdn_url+"/80588/img/unread/empty/default/1f64c-1f3fc.png",4:cdn_url+"/80588/img/unread/empty/default/1f64c-1f3fd.png",5:cdn_url+"/80588/img/unread/empty/default/1f64c-1f3fe.png",6:cdn_url+"/80588/img/unread/empty/default/1f64c-1f3ff.png"},apple:cdn_url+"/80588/img/unread/empty/default/1f34f.png",sunglasses:cdn_url+"/80588/img/unread/empty/default/1f60e.png",thumbup:{1:cdn_url+"/80588/img/unread/empty/default/1f44d.png",2:cdn_url+"/80588/img/unread/empty/default/1f44d-1f3fb.png",3:cdn_url+"/80588/img/unread/empty/default/1f44d-1f3fc.png",4:cdn_url+"/80588/img/unread/empty/default/1f44d-1f3fd.png",5:cdn_url+"/80588/img/unread/empty/default/1f44d-1f3fe.png",6:cdn_url+"/80588/img/unread/empty/default/1f44d-1f3ff.png"},boom:cdn_url+"/80588/img/unread/empty/default/1f4a5.png",bee:cdn_url+"/80588/img/unread/empty/default/1f41d.png",clap:{1:cdn_url+"/80588/img/unread/empty/default/1f44f.png",2:cdn_url+"/80588/img/unread/empty/default/1f44f-1f3fb.png",3:cdn_url+"/80588/img/unread/empty/default/1f44f-1f3fc.png",4:cdn_url+"/80588/img/unread/empty/default/1f44f-1f3fd.png",5:cdn_url+"/80588/img/unread/empty/default/1f44f-1f3fe.png",6:cdn_url+"/80588/img/unread/empty/default/1f44f-1f3ff.png"},crystalball:cdn_url+"/80588/img/unread/empty/default/1f52e.png",tractor:cdn_url+"/80588/img/unread/empty/default/1f69c.png",pony:cdn_url+"/80588/img/unread/empty/default/1f434.png",chick:cdn_url+"/80588/img/unread/empty/default/1f423.png",growth:cdn_url+"/80588/img/unread/empty/default/1f331.png",sun:cdn_url+"/80588/img/unread/empty/default/2600-fe0f.png",balloon:cdn_url+"/80588/img/unread/empty/default/1f388.png",sweetpotato:cdn_url+"/80588/img/unread/empty/default/1f360.png",leafs:cdn_url+"/80588/img/unread/empty/default/1f343.png",owl:cdn_url+"/80588/img/unread/empty/default/1f989.png",books:cdn_url+"/80588/img/unread/empty/default/1f4da.png",island:cdn_url+"/80588/img/unread/empty/default/1f3dd-fe0f.png",coffee:cdn_url+"/80588/img/unread/empty/default/2615.png",footprints:cdn_url+"/80588/img/unread/empty/default/1f463.png",tea:cdn_url+"/80588/img/unread/empty/default/1f375.png",croissant:cdn_url+"/80588/img/unread/empty/default/1f950.png",art:cdn_url+"/80588/img/unread/empty/default/1f3a8.png",person_ball:{1:cdn_url+"/80588/img/unread/empty/default/26f9-fe0f-200d-2640-fe0f.png",2:cdn_url+"/80588/img/unread/empty/default/26f9-1f3fb-200d-2640-fe0f.png",3:cdn_url+"/80588/img/unread/empty/default/26f9-1f3fc-200d-2640-fe0f.png",4:cdn_url+"/80588/img/unread/empty/default/26f9-1f3fd-200d-2640-fe0f.png",5:cdn_url+"/80588/img/unread/empty/default/26f9-1f3fe-200d-2640-fe0f.png",6:cdn_url+"/80588/img/unread/empty/default/26f9-1f3ff-200d-2640-fe0f.png"},airplane:cdn_url+"/80588/img/unread/empty/default/2708-fe0f.png",sailboat:cdn_url+"/80588/img/unread/empty/default/26f5.png",ship:cdn_url+"/80588/img/unread/empty/default/1f6a2.png",bulb:cdn_url+"/80588/img/unread/empty/default/1f4a1.png",hammer:cdn_url+"/80588/img/unread/empty/default/1f528.png",checkered_flag:cdn_url+"/80588/img/unread/empty/default/1f3c1.png",wrench:cdn_url+"/80588/img/unread/empty/default/1f527.png",metro:cdn_url+"/80588/img/unread/empty/default/1f687.png",soccer:cdn_url+"/80588/img/unread/empty/default/26bd.png",trophy:cdn_url+"/80588/img/unread/empty/default/1f3c6.png",cityscape:cdn_url+"/80588/img/unread/empty/default/1f3d9-fe0f.png",dog:cdn_url+"/80588/img/unread/empty/default/1f436.png",crossed_swords:cdn_url+"/80588/img/unread/empty/default/2694-fe0f.png",blush:cdn_url+"/80588/img/unread/empty/default/1f60a.png",candy:cdn_url+"/80588/img/unread/empty/default/1f36c.png",herb:cdn_url+"/80588/img/unread/empty/default/1f33f.png",sparkles:cdn_url+"/80588/img/unread/empty/default/2728.png",check_mark:cdn_url+"/80588/img/unread/empty/default/2705.png",confetti_ball:cdn_url+"/80588/img/unread/empty/default/1f38a.png",doughnut:cdn_url+"/80588/img/unread/empty/default/1f369.png",bookmark_tabs:cdn_url+"/80588/img/unread/empty/default/1f4d1.png",sleuth:{1:cdn_url+"/80588/img/unread/empty/default/1f575-fe0f.png",2:cdn_url+"/80588/img/unread/empty/default/1f575-1f3fb-200d-2642-fe0f.png",3:cdn_url+"/80588/img/unread/empty/default/1f575-1f3fc-200d-2642-fe0f.png",4:cdn_url+"/80588/img/unread/empty/default/1f575-1f3fd-200d-2642-fe0f.png",5:cdn_url+"/80588/img/unread/empty/default/1f575-1f3fe-200d-2642-fe0f.png",6:cdn_url+"/80588/img/unread/empty/default/1f575-1f3ff-200d-2642-fe0f.png"},hourglass:cdn_url+"/80588/img/unread/empty/default/23f3.png",newspaper:cdn_url+"/80588/img/unread/empty/default/1f5de-fe0f.png",flex:{1:cdn_url+"/80588/img/unread/empty/default/1f4aa.png",2:cdn_url+"/80588/img/unread/empty/default/1f4aa-1f3fb.png",3:cdn_url+"/80588/img/unread/empty/default/1f4aa-1f3fc.png",4:cdn_url+"/80588/img/unread/empty/default/1f4aa-1f3fd.png",5:cdn_url+"/80588/img/unread/empty/default/1f4aa-1f3fe.png",6:cdn_url+"/80588/img/unread/empty/default/1f4aa-1f3ff.png"},earth_americas:cdn_url+"/80588/img/unread/empty/default/1f30e.png",chocolate_bar:cdn_url+"/80588/img/unread/empty/default/1f36b.png",wave:{1:cdn_url+"/80588/img/unread/empty/default/1f44b.png",2:cdn_url+"/80588/img/unread/empty/default/1f44b-1f3fb.png",3:cdn_url+"/80588/img/unread/empty/default/1f44b-1f3fc.png",4:cdn_url+"/80588/img/unread/empty/default/1f44b-1f3fd.png",5:cdn_url+"/80588/img/unread/empty/default/1f44b-1f3fe.png",6:cdn_url+"/80588/img/unread/empty/default/1f44b-1f3ff.png"},relieved:cdn_url+"/80588/img/unread/empty/default/1f60c.png",walking:{1:cdn_url+"/80588/img/unread/empty/default/1f6b6-200d-2640-fe0f.png",2:cdn_url+"/80588/img/unread/empty/default/1f6b6-1f3fb-200d-2640-fe0f.png",3:cdn_url+"/80588/img/unread/empty/default/1f6b6-1f3fc-200d-2640-fe0f.png",4:cdn_url+"/80588/img/unread/empty/default/1f6b6-1f3fd-200d-2640-fe0f.png",5:cdn_url+"/80588/img/unread/empty/default/1f6b6-1f3fe-200d-2640-fe0f.png",6:cdn_url+"/80588/img/unread/empty/default/1f6b6-1f3ff-200d-2640-fe0f.png"},couch_and_lamp:cdn_url+"/80588/img/unread/empty/default/1f6cb.png",unicorn_face:cdn_url+"/80588/img/unread/empty/default/1f984.png",zap:cdn_url+"/80588/img/unread/empty/default/26a1.png",star:cdn_url+"/80588/img/unread/empty/default/2b50.png"},google:{tada:cdn_url+"/80588/img/unread/empty/google/1f389.png",victory:{1:cdn_url+"/80588/img/unread/empty/google/270c-fe0f.png",2:cdn_url+"/80588/img/unread/empty/google/270c-1f3fb.png",3:cdn_url+"/80588/img/unread/empty/google/270c-1f3fc.png",4:cdn_url+"/80588/img/unread/empty/google/270c-1f3fd.png",5:cdn_url+"/80588/img/unread/empty/google/270c-1f3fe.png",6:cdn_url+"/80588/img/unread/empty/google/270c-1f3ff.png"},racecar:cdn_url+"/80588/img/unread/empty/google/1f3ce-fe0f.png",rocket:cdn_url+"/80588/img/unread/empty/google/1f680.png",octopus:cdn_url+"/80588/img/unread/empty/google/1f419.png",high5:{1:cdn_url+"/80588/img/unread/empty/google/1f64c.png",2:cdn_url+"/80588/img/unread/empty/google/1f64c-1f3fb.png",3:cdn_url+"/80588/img/unread/empty/google/1f64c-1f3fc.png",4:cdn_url+"/80588/img/unread/empty/google/1f64c-1f3fd.png",5:cdn_url+"/80588/img/unread/empty/google/1f64c-1f3fe.png",6:cdn_url+"/80588/img/unread/empty/google/1f64c-1f3ff.png"},apple:cdn_url+"/80588/img/unread/empty/google/1f34f.png",sunglasses:cdn_url+"/80588/img/unread/empty/google/1f60e.png",thumbup:{1:cdn_url+"/80588/img/unread/empty/google/1f44d.png",2:cdn_url+"/80588/img/unread/empty/google/1f44d-1f3fb.png",3:cdn_url+"/80588/img/unread/empty/google/1f44d-1f3fc.png",4:cdn_url+"/80588/img/unread/empty/google/1f44d-1f3fd.png",5:cdn_url+"/80588/img/unread/empty/google/1f44d-1f3fe.png",6:cdn_url+"/80588/img/unread/empty/google/1f44d-1f3ff.png"},boom:cdn_url+"/80588/img/unread/empty/google/1f4a5.png",bee:cdn_url+"/80588/img/unread/empty/google/1f41d.png",clap:{1:cdn_url+"/80588/img/unread/empty/google/1f44f.png",2:cdn_url+"/80588/img/unread/empty/google/1f44f-1f3fb.png",3:cdn_url+"/80588/img/unread/empty/google/1f44f-1f3fc.png",4:cdn_url+"/80588/img/unread/empty/google/1f44f-1f3fd.png",5:cdn_url+"/80588/img/unread/empty/google/1f44f-1f3fe.png",6:cdn_url+"/80588/img/unread/empty/google/1f44f-1f3ff.png"},crystalball:cdn_url+"/80588/img/unread/empty/google/1f52e.png",tractor:cdn_url+"/80588/img/unread/empty/google/1f69c.png",pony:cdn_url+"/80588/img/unread/empty/google/1f434.png",chick:cdn_url+"/80588/img/unread/empty/google/1f423.png",growth:cdn_url+"/80588/img/unread/empty/google/1f331.png",sun:cdn_url+"/80588/img/unread/empty/google/2600-fe0f.png",balloon:cdn_url+"/80588/img/unread/empty/google/1f388.png",sweetpotato:cdn_url+"/80588/img/unread/empty/google/1f360.png",leafs:cdn_url+"/80588/img/unread/empty/google/1f343.png",owl:cdn_url+"/80588/img/unread/empty/google/1f989.png",books:cdn_url+"/80588/img/unread/empty/google/1f4da.png",island:cdn_url+"/80588/img/unread/empty/google/1f3dd-fe0f.png",coffee:cdn_url+"/80588/img/unread/empty/google/2615.png",footprints:cdn_url+"/80588/img/unread/empty/google/1f463.png",tea:cdn_url+"/80588/img/unread/empty/google/1f375.png",croissant:cdn_url+"/80588/img/unread/empty/google/1f950.png",art:cdn_url+"/80588/img/unread/empty/google/1f3a8.png",person_ball:{1:cdn_url+"/80588/img/unread/empty/google/26f9-fe0f-200d-2640-fe0f.png",2:cdn_url+"/80588/img/unread/empty/google/26f9-1f3fb-200d-2640-fe0f.png",3:cdn_url+"/80588/img/unread/empty/google/26f9-1f3fc-200d-2640-fe0f.png",4:cdn_url+"/80588/img/unread/empty/google/26f9-1f3fd-200d-2640-fe0f.png",5:cdn_url+"/80588/img/unread/empty/google/26f9-1f3fe-200d-2640-fe0f.png",6:cdn_url+"/80588/img/unread/empty/google/26f9-1f3ff-200d-2640-fe0f.png"},airplane:cdn_url+"/80588/img/unread/empty/google/2708-fe0f.png",sailboat:cdn_url+"/80588/img/unread/empty/google/26f5.png",ship:cdn_url+"/80588/img/unread/empty/google/1f6a2.png",bulb:cdn_url+"/80588/img/unread/empty/google/1f4a1.png",hammer:cdn_url+"/80588/img/unread/empty/google/1f528.png",checkered_flag:cdn_url+"/80588/img/unread/empty/google/1f3c1.png",wrench:cdn_url+"/80588/img/unread/empty/google/1f527.png",metro:cdn_url+"/80588/img/unread/empty/google/1f687.png",soccer:cdn_url+"/80588/img/unread/empty/google/26bd.png",trophy:cdn_url+"/80588/img/unread/empty/google/1f3c6.png",cityscape:cdn_url+"/80588/img/unread/empty/google/1f3d9-fe0f.png",dog:cdn_url+"/80588/img/unread/empty/google/1f436.png",crossed_swords:cdn_url+"/80588/img/unread/empty/google/2694-fe0f.png",blush:cdn_url+"/80588/img/unread/empty/google/1f60a.png",candy:cdn_url+"/80588/img/unread/empty/google/1f36c.png",herb:cdn_url+"/80588/img/unread/empty/google/1f33f.png",sparkles:cdn_url+"/80588/img/unread/empty/google/2728.png",check_mark:cdn_url+"/80588/img/unread/empty/google/2705.png",confetti_ball:cdn_url+"/80588/img/unread/empty/google/1f38a.png",doughnut:cdn_url+"/80588/img/unread/empty/google/1f369.png",bookmark_tabs:cdn_url+"/80588/img/unread/empty/google/1f4d1.png",sleuth:{1:cdn_url+"/80588/img/unread/empty/google/1f575-fe0f.png",2:cdn_url+"/80588/img/unread/empty/google/1f575-1f3fb-200d-2642-fe0f.png",3:cdn_url+"/80588/img/unread/empty/google/1f575-1f3fc-200d-2642-fe0f.png",4:cdn_url+"/80588/img/unread/empty/google/1f575-1f3fd-200d-2642-fe0f.png",5:cdn_url+"/80588/img/unread/empty/google/1f575-1f3fe-200d-2642-fe0f.png",6:cdn_url+"/80588/img/unread/empty/google/1f575-1f3ff-200d-2642-fe0f.png"},hourglass:cdn_url+"/80588/img/unread/empty/google/23f3.png",newspaper:cdn_url+"/80588/img/unread/empty/google/1f5de-fe0f.png",flex:{1:cdn_url+"/80588/img/unread/empty/google/1f4aa.png",2:cdn_url+"/80588/img/unread/empty/google/1f4aa-1f3fb.png",3:cdn_url+"/80588/img/unread/empty/google/1f4aa-1f3fc.png",4:cdn_url+"/80588/img/unread/empty/google/1f4aa-1f3fd.png",5:cdn_url+"/80588/img/unread/empty/google/1f4aa-1f3fe.png",6:cdn_url+"/80588/img/unread/empty/google/1f4aa-1f3ff.png"},earth_americas:cdn_url+"/80588/img/unread/empty/google/1f30e.png",chocolate_bar:cdn_url+"/80588/img/unread/empty/google/1f36b.png",wave:{1:cdn_url+"/80588/img/unread/empty/google/1f44b.png",2:cdn_url+"/80588/img/unread/empty/google/1f44b-1f3fb.png",3:cdn_url+"/80588/img/unread/empty/google/1f44b-1f3fc.png",4:cdn_url+"/80588/img/unread/empty/google/1f44b-1f3fd.png",5:cdn_url+"/80588/img/unread/empty/google/1f44b-1f3fe.png",6:cdn_url+"/80588/img/unread/empty/google/1f44b-1f3ff.png"},relieved:cdn_url+"/80588/img/unread/empty/google/1f60c.png",walking:{1:cdn_url+"/80588/img/unread/empty/google/1f6b6-200d-2640-fe0f.png",2:cdn_url+"/80588/img/unread/empty/google/1f6b6-1f3fb-200d-2640-fe0f.png",3:cdn_url+"/80588/img/unread/empty/google/1f6b6-1f3fc-200d-2640-fe0f.png",4:cdn_url+"/80588/img/unread/empty/google/1f6b6-1f3fd-200d-2640-fe0f.png",5:cdn_url+"/80588/img/unread/empty/google/1f6b6-1f3fe-200d-2640-fe0f.png",6:cdn_url+"/80588/img/unread/empty/google/1f6b6-1f3ff-200d-2640-fe0f.png"},couch_and_lamp:cdn_url+"/80588/img/unread/empty/google/1f6cb.png",unicorn_face:cdn_url+"/80588/img/unread/empty/google/1f984.png",zap:cdn_url+"/80588/img/unread/empty/google/26a1.png",star:cdn_url+"/80588/img/unread/empty/google/2b50.png"}},Nd=(vd={"de-DE":[{emoji:"airplane",skintone:!1,lineOne:"Jetzt bist du startklar.",lineTwo:""},{emoji:"art",skintone:!1,lineOne:"Alles paletti!",lineTwo:""},{emoji:"bee",skintone:!1,lineOne:"Geschafft!",lineTwo:"Ganz sch\xf6n flei\xdfig."},{emoji:"books",skintone:!1,lineOne:"Alles gelesen.",lineTwo:"Wie es im Buche steht."},{emoji:"boom",skintone:!1,lineOne:"Du bist der Knaller!",lineTwo:""},{emoji:"bulb",skintone:!1,lineOne:"Heureka!",lineTwo:"Du hast ALLES gelesen!"},{emoji:"checkered_flag",skintone:!1,lineOne:"Du bist am Ziel angelangt!",lineTwo:"Du hast alles gelesen!"},{emoji:"clap",skintone:!0,lineOne:"Das war das T\xfcpfelchen auf dem i.",lineTwo:""},{emoji:"croissant",skintone:!1,lineOne:"Voil\xe0!",lineTwo:"Das war es auch schon."},{emoji:"crystalball",skintone:!1,lineOne:"Alles klar.",lineTwo:"Die Zukunft geh\xf6rt dir!"},{emoji:"footprints",skintone:!1,lineOne:"Gut gemacht.",lineTwo:"Jetzt liegt dir die Welt zu F\xfc\xdfen!"},{emoji:"hammer",skintone:!1,lineOne:"Du bist der Hammer!",lineTwo:"Alles gelesen!"},{emoji:"high5",skintone:!0,lineOne:"Geschafft!",lineTwo:"Das war alles."},{emoji:"metro",skintone:!1,lineOne:"Hier ist das Licht am Ende des Tunnels!",lineTwo:""},{emoji:"island",skintone:!1,lineOne:"Land in Sicht!",lineTwo:"Du hast alles gelesen!"},{emoji:"person_ball",skintone:!0,lineOne:"Immer am Ball bleiben!",lineTwo:""},{emoji:"rocket",skintone:!1,lineOne:"Du hast ein ganz sch\xf6nes Lesetempo drauf!",lineTwo:""},{emoji:"sailboat",skintone:!1,lineOne:"Alles im Lot auf dem Boot.",lineTwo:""},{emoji:"sailboat",skintone:!1,lineOne:"Alles in Butter auf dem Kutter!",lineTwo:""},{emoji:"ship",skintone:!1,lineOne:"Klar Schiff!",lineTwo:""},{emoji:"soccer",skintone:!1,lineOne:"Volltreffer! ",lineTwo:"Du hast alles gelesen!"},{emoji:"sun",skintone:!1,lineOne:"Alles heiter und klar!",lineTwo:""},{emoji:"sunglasses",skintone:!1,lineOne:"Alles klar!",lineTwo:""},{emoji:"tada",skintone:!1,lineOne:"Ta-da !",lineTwo:"Du bist jetzt ganz sch\xf6n belesen."},{emoji:"tea",skintone:!1,lineOne:"Du hast alles aufgeholt.",lineTwo:"Zeit f\xfcr eine kleine Pause."},{emoji:"thumbup",skintone:!0,lineOne:"Du bist ganz sch\xf6n auf Zack!",lineTwo:""},{emoji:"victory",skintone:!0,lineOne:"Alles erledigt!",lineTwo:"Das ist das A und O."},{emoji:"wrench",skintone:!1,lineOne:"Ganz sch\xf6n fix!",lineTwo:""}],"en-GB":[{emoji:"chocolate_bar",skintone:!1,lineOne:"You\u2019ve read everything you need to.",lineTwo:"Take a little break."},{emoji:"balloon",skintone:!1,lineOne:"There, all caught up.",lineTwo:"Turn your mind to something new."},{emoji:"bee",skintone:!1,lineOne:"You\u2019re up to date.",lineTwo:"Go on and do great things."},{emoji:"zap",skintone:!1,lineOne:"Boom!",lineTwo:"You\u2019re up to date."},{emoji:"clap",skintone:!0,lineOne:"Everything unread has now been read.",lineTwo:"You\u2019ve done it."},{emoji:"growth",skintone:!1,lineOne:"Everything\u2019s sorted.",lineTwo:"Let\u2019s do something else."},{emoji:"crystalball",skintone:!1,lineOne:"All that was unread has now been read.",lineTwo:"But what\u2019s next?"},{emoji:"high5",skintone:!0,lineOne:"That\u2019s everything!",lineTwo:""},{emoji:"check_mark",skintone:!1,lineOne:"Done and dusted.",lineTwo:""},{emoji:"octopus",skintone:!1,lineOne:"All sorted.",lineTwo:"The world is your oyster."},{emoji:"unicorn_face",skintone:!1,lineOne:"You\u2019ve read it all.",lineTwo:"Here\u2019s a unicorn."},{emoji:"racecar",skintone:!1,lineOne:"Right!",lineTwo:"All caught up."},{emoji:"rocket",skintone:!1,lineOne:"That\u2019s it.",lineTwo:"The future is yours."},{emoji:"sailboat",skintone:!1,lineOne:"You\u2019ve caught up on everything.",lineTwo:"Plain sailing from now on."},{emoji:"sunglasses",skintone:!1,lineOne:"All clear.",lineTwo:""},{emoji:"coffee",skintone:!1,lineOne:"You\u2019ve got through the lot!",lineTwo:"Pop the kettle on?"},{emoji:"tada",skintone:!1,lineOne:"Ta-da!",lineTwo:"You\u2019ve read everything there is to read."},{emoji:"tada",skintone:!1,lineOne:"Ta-da!",lineTwo:"You\u2019re all up to date."},{emoji:"couch_and_lamp",skintone:!1,lineOne:"That\u2019s you sorted.",lineTwo:"Put your feet up."},{emoji:"tractor",skintone:!1,lineOne:"You\u2019ve read everything.",lineTwo:"Here\u2019s a tractor."},{emoji:"victory",skintone:!0,lineOne:"Caught up on everything.",lineTwo:"What\u2019s next?"}]},fe()(vd,B.b.DEFAULT_LOCALE,[{emoji:"apple",skintone:!1,lineOne:"You\u2019ve read all you needed.",lineTwo:"Take a moment."},{emoji:"balloon",skintone:!1,lineOne:"There! Caught up.",lineTwo:"Set your mind to something new."},{emoji:"bee",skintone:!1,lineOne:"You\u2019re up to date.",lineTwo:"Go forth and do great things."},{emoji:"boom",skintone:!1,lineOne:"Boom.",lineTwo:"You\u2019re up to date."},{emoji:"clap",skintone:!0,lineOne:"Everything unread is now read.",lineTwo:"You\u2019ve done it."},{emoji:"growth",skintone:!1,lineOne:"Everything\u2019s sorted!",lineTwo:"Let\u2019s start something new."},{emoji:"crystalball",skintone:!1,lineOne:"All that was unread is now read.",lineTwo:"What\u2019s next?"},{emoji:"high5",skintone:!0,lineOne:"That\u2019s everything!",lineTwo:""},{emoji:"leafs",skintone:!1,lineOne:"Done and done.",lineTwo:""},{emoji:"octopus",skintone:!1,lineOne:"All done.",lineTwo:"The world is your oyster."},{emoji:"pony",skintone:!1,lineOne:"You\u2019re all read.",lineTwo:"Here\u2019s a pony."},{emoji:"racecar",skintone:!1,lineOne:"There.",lineTwo:"All caught up."},{emoji:"rocket",skintone:!1,lineOne:"All done.",lineTwo:"The future is yours."},{emoji:"sun",skintone:!1,lineOne:"You\u2019re all caught up!",lineTwo:"Clear screens ahead."},{emoji:"sunglasses",skintone:!1,lineOne:"All clear.",lineTwo:""},{emoji:"sweetpotato",skintone:!1,lineOne:"Sweet potato!",lineTwo:"You\u2019re all done."},{emoji:"tada",skintone:!1,lineOne:"Ta-da!",lineTwo:"You\u2019ve read everything there is to read."},{emoji:"tada",skintone:!1,lineOne:"Ta-da!",lineTwo:"You\u2019re up to date."},{emoji:"thumbup",skintone:!0,lineOne:"That\u2019s that.",lineTwo:"You\u2019re good to go."},{emoji:"tractor",skintone:!1,lineOne:"You\u2019re all read.",lineTwo:"Here\u2019s a tractor."},{emoji:"victory",skintone:!0,lineOne:"All caught up.",lineTwo:"What\u2019s next?"}]),fe()(vd,"es-ES",[{emoji:"boom",skintone:!1,lineOne:"Bum.",lineTwo:"Est\xe1s al d\xeda."},{emoji:"chick",skintone:!1,lineOne:"Est\xe1s al d\xeda.",lineTwo:"Es hora de salir a hacer algo estupendo."},{emoji:"candy",skintone:!1,lineOne:"Has le\xeddo todo.",lineTwo:"Aqu\xed tienes un caramelo de regalo."},{emoji:"cityscape",skintone:!1,lineOne:"Has terminado de leer.",lineTwo:"Tienes el mundo a tus pies."},{emoji:"checkered_flag",skintone:!1,lineOne:"Has terminado de leer.",lineTwo:"\xbfY ahora qu\xe9 sigue?"},{emoji:"flex",skintone:!0,lineOne:"Has terminado de leer.",lineTwo:"\xa1Lo lograste!"},{emoji:"high5",skintone:!0,lineOne:"\xa1Eso es todo!",lineTwo:""},{emoji:"hourglass",skintone:!1,lineOne:"Has terminado de leer.",lineTwo:"El futuro es tuyo."},{emoji:"leafs",skintone:!1,lineOne:"Punto y aparte.",lineTwo:""},{emoji:"newspaper",skintone:!1,lineOne:"Ya est\xe1s al d\xeda con tu lectura.",lineTwo:"Ahora puedes tomarte un descanso."},{emoji:"rocket",skintone:!1,lineOne:"\xa1Listo! Est\xe1s al tanto de todo.",lineTwo:"Ahora puedes proponerte algo nuevo."},{emoji:"sunglasses",skintone:!1,lineOne:"El pron\xf3stico se ve despejado.",lineTwo:""},{emoji:"sleuth",skintone:!0,lineOne:"Est\xe1s al tanto de todo.",lineTwo:"\xbfY ahora qu\xe9?"},{emoji:"sleuth",skintone:!0,lineOne:"Listo.",lineTwo:"Ya est\xe1s al tanto de todo."},{emoji:"tada",skintone:!1,lineOne:"\xa1Enhorabuena!",lineTwo:"Has le\xeddo todo lo que hab\xeda que leer."},{emoji:"trophy",skintone:!1,lineOne:"\xa1Al fin!",lineTwo:"Ya has terminado."}]),fe()(vd,"es-LA",[{emoji:"apple",skintone:!1,lineOne:"Est\xe1s al d\xeda con la lectura.",lineTwo:"T\xf3mate un descanso."},{emoji:"balloon",skintone:!1,lineOne:"\xa1Listo! Est\xe1s al d\xeda.",lineTwo:"Centra tu mente en algo nuevo."},{emoji:"bee",skintone:!1,lineOne:"Est\xe1s al d\xeda.",lineTwo:"\xa1Ve a conquistar el mundo!"},{emoji:"boom",skintone:!1,lineOne:"Bum.",lineTwo:"Est\xe1s al d\xeda."},{emoji:"clap",skintone:!0,lineOne:"Terminaste de leer todo.",lineTwo:"\xa1Lo lograste!"},{emoji:"growth",skintone:!1,lineOne:"\xa1Todo resuelto!",lineTwo:"Empecemos algo nuevo."},{emoji:"crystalball",skintone:!1,lineOne:"Le\xedste todo lo que hab\xeda que leer.",lineTwo:"\xbfY ahora qu\xe9?"},{emoji:"high5",skintone:!0,lineOne:"\xa1Eso es todo!",lineTwo:""},{emoji:"leafs",skintone:!1,lineOne:"Punto y aparte.",lineTwo:""},{emoji:"octopus",skintone:!1,lineOne:"Todo listo.",lineTwo:"El mundo est\xe1 a tus pies."},{emoji:"pony",skintone:!1,lineOne:"Ya le\xedste todo.",lineTwo:"Aqu\xed tienes un poni."},{emoji:"racecar",skintone:!1,lineOne:"!Bien hecho!",lineTwo:"Est\xe1s al tanto de todo."},{emoji:"rocket",skintone:!1,lineOne:"Todo listo.",lineTwo:"El futuro es tuyo."},{emoji:"sun",skintone:!1,lineOne:"Ya est\xe1s al tanto de todo.",lineTwo:"\xa1Pantalla despejada!"},{emoji:"sunglasses",skintone:!1,lineOne:"\xa1Todo despejado!",lineTwo:""},{emoji:"sweetpotato",skintone:!1,lineOne:"\xa1Qu\xe9 belleza!",lineTwo:"Ya terminaste."},{emoji:"tada",skintone:!1,lineOne:"\xa1Felicidades!",lineTwo:"Le\xedste todo lo que hab\xeda que leer."},{emoji:"tada",skintone:!1,lineOne:"\xa1Felicidades!",lineTwo:"Est\xe1s al d\xeda."},{emoji:"thumbup",skintone:!0,lineOne:"Eso es todo.",lineTwo:"Puedes seguir con tus otras tareas."},{emoji:"tractor",skintone:!1,lineOne:"Ya le\xedste todo.",lineTwo:"Aqu\xed tienes un tractor."},{emoji:"victory",skintone:!0,lineOne:"Est\xe1s al tanto de todo.",lineTwo:"\xbfY ahora qu\xe9?"}]),fe()(vd,"fr-FR",[{emoji:"balloon",skintone:!1,lineOne:"Vous \xeates \xe0 jour.",lineTwo:"On se sent d\xe9j\xe0 plus l\xe9ger."},{emoji:"bee",skintone:!1,lineOne:"Vous \xeates \xe0 jour.",lineTwo:"On d\xe9colle mieux face au vent, courage !"},{emoji:"books",skintone:!1,lineOne:"Lu et relu !",lineTwo:""},{emoji:"boom",skintone:!1,lineOne:"Boum !",lineTwo:"Vous \xeates \xe0 jour."},{emoji:"clap",skintone:!0,lineOne:"Bravo !",lineTwo:"Vous avez tout lu."},{emoji:"coffee",skintone:!1,lineOne:"Vous avez tout lu !",lineTwo:"Une pause s\u2019impose !"},{emoji:"crystalball",skintone:!1,lineOne:"Vous avez tout lu !",lineTwo:"Que vous r\xe9serve l\u2019avenir ?"},{emoji:"high5",skintone:!0,lineOne:"C\u2019est tout !",lineTwo:""},{emoji:"island",skintone:!1,lineOne:"Termin\xe9 !",lineTwo:"Vous pouvez vous la couler douce !"},{emoji:"owl",skintone:!1,lineOne:"Chouette !",lineTwo:"Vous avez termin\xe9."},{emoji:"racecar",skintone:!1,lineOne:"Voil\xe0 !",lineTwo:"Vous \xeates sur la bonne voie."},{emoji:"rocket",skintone:!1,lineOne:"Termin\xe9 !",lineTwo:"L\u2019avenir vous appartient."},{emoji:"sun",skintone:!1,lineOne:"Vous \xeates \xe0 jour.",lineTwo:"L\u2019horizon est d\xe9gag\xe9."},{emoji:"sunglasses",skintone:!1,lineOne:"Tout est \xe0 jour.",lineTwo:""},{emoji:"tada",skintone:!1,lineOne:"Tadam !",lineTwo:"Vous avez tout lu."},{emoji:"thumbup",skintone:!0,lineOne:"\xc7a y est !",lineTwo:"Vous avez fini."},{emoji:"victory",skintone:!0,lineOne:"Vous \xeates \xe0 jour.",lineTwo:"Quelle est la suite du programme ?"}]),fe()(vd,"ja-JP",[{emoji:"blush",skintone:!1,lineOne:"\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u306f\u4ee5\u4e0a\u3067\u3059\u3002",lineTwo:"\u304a\u75b2\u308c\u3055\u307e\u3067\u3057\u305f\u3002"},{emoji:"bookmark_tabs",skintone:!1,lineOne:"\u672a\u8aad\u30c1\u30a7\u30c3\u30af\u5b8c\u4e86\uff01\u6e96\u5099\u4e07\u7aef\uff01",lineTwo:"\u3055\u3042\u3001\u4f55\u304b\u3089\u3084\u308a\u307e\u3059\u304b\uff1f"},{emoji:"candy",skintone:!1,lineOne:"\u5168\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u78ba\u8a8d\u3001\u304a\u75b2\u308c\u3055\u307e\u3067\u3057\u305f\u3002",lineTwo:"\u306f\u3044\u3001\u30a2\u30e1\u3061\u3083\u3093\uff01"},{emoji:"check_mark",skintone:!1,lineOne:"\u5168\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u78ba\u8a8d\u7d42\u4e86\uff01",lineTwo:"\u3084\u308b\u3053\u3068\u30ea\u30b9\u30c8\u304b\u30891\u3064\u6d88\u3048\u307e\u3057\u305f\uff01"},{emoji:"cityscape",skintone:!1,lineOne:"\u5168\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u78ba\u8a8d\u3001\u304a\u75b2\u308c\u3055\u307e\u3067\u3057\u305f\u3002",lineTwo:"\u9060\u304f\u3092\u898b\u308b\u3068\u75b2\u308c\u76ee\u306b\u3044\u3044\u3089\u3057\u3044\u3067\u3059\u3088\uff1f"},{emoji:"coffee",skintone:!1,lineOne:"\u3059\u3079\u3066\u306e\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u78ba\u8a8d\u3057\u307e\u3057\u305f\u3002",lineTwo:"\u3061\u3087\u3063\u3068\u4e00\u606f\u5165\u308c\u307e\u305b\u3093\u304b\uff1f"},{emoji:"confetti_ball",skintone:!1,lineOne:"\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u8aad\u4e86\u3092\u9054\u6210\u3057\u307e\u3057\u305f\uff01",lineTwo:""},{emoji:"crossed_swords",skintone:!1,lineOne:"\u307f\u3069\u304f\u3000\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u3000\u3084\u3063\u3064\u3051\u305f\u3002",lineTwo:"\u304b\u3057\u3053\u3055\u304c\u3000\uff11\u30dd\u30a4\u30f3\u30c8\u3000\u3042\u304c\u3063\u305f\uff01"},{emoji:"dog",skintone:!1,lineOne:"\u672a\u8aad\u30c1\u30a7\u30c3\u30af\u5b8c\u4e86\uff01",lineTwo:"\u30ef\u30f3\u3060\u3075\u308b\uff01"},{emoji:"doughnut",skintone:!1,lineOne:"\u5168\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u78ba\u8a8d\u7d42\u4e86\uff01",lineTwo:"\u3061\u3087\u3063\u3068\u4f11\u61a9\u3057\u3066\u3001\u75b2\u308c\u305f\u8133\u306b\u7cd6\u5206\u88dc\u7d66"},{emoji:"herb",skintone:!1,lineOne:"\u672a\u8aad\u30b9\u30c3\u30ad\u30ea\uff01\u6c17\u5206\u3082\u30b9\u30c3\u30ad\u30ea\uff01",lineTwo:""},{emoji:"leafs",skintone:!1,lineOne:"\u5168\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u65e2\u8aad\u306b\u306a\u308a\u307e\u3057\u305f\u3002",lineTwo:"\u305d\u308c\u306f\u305d\u308c\u3067\u3001\u3061\u3087\u3063\u3068\u5bc2\u3057\u3044\u2026\uff1f"},{emoji:"rocket",skintone:!1,lineOne:"\u672a\u8aad\u30b3\u30f3\u30d7\u30ea\u30fc\u30c8\uff01",lineTwo:"\u3053\u306e\u8abf\u5b50\u3067\u3069\u3093\u3069\u3093\u884c\u3063\u3061\u3083\u3044\u307e\u3057\u3087\u3046\uff01"},{emoji:"sparkles",skintone:!1,lineOne:"\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u3001\u305c\u3093\u3076\u30ad\u30ec\u30a4\u306b\u7247\u4ed8\u304d\u307e\u3057\u305f\u3002",lineTwo:""},{emoji:"tada",skintone:!1,lineOne:"\u3059\u3054\u3044\uff01",lineTwo:"\u672a\u8aad\u30b3\u30f3\u30d7\u30ea\u30fc\u30c8\uff01"},{emoji:"tea",skintone:!1,lineOne:"\u672a\u8aad\u30c1\u30a7\u30c3\u30af\u5b8c\u4e86\uff01",lineTwo:"\u304a\u75b2\u308c\u3055\u307e\u3067\u3057\u305f\u3002"},{emoji:"trophy",skintone:!1,lineOne:"\u304a\u3081\u3067\u3068\u3046\u3054\u3056\u3044\u307e\u3059\uff01",lineTwo:"\u5168\u672a\u8aad\u30c1\u30a7\u30c3\u30af\u5b8c\u4e86\u3067\u3059\uff01"},{emoji:"victory",skintone:!0,lineOne:"\u672a\u8aad\u30c1\u30a7\u30c3\u30af\u5b8c\u4e86\uff01",lineTwo:""},{emoji:"sleuth",skintone:!0,lineOne:"\u5168\u672a\u8aad\u30e1\u30c3\u30bb\u30fc\u30b8\u3092",lineTwo:"\u6f0f\u308c\u306a\u304f\u3059\u3079\u3066\u78ba\u8a8d\u3057\u307e\u3057\u305f\u3002"}]),fe()(vd,"pt-BR",[{emoji:"apple",skintone:!1,lineOne:"Voc\xea j\xe1 leu tudo.",lineTwo:"Agora fa\xe7a uma pausa."},{emoji:"balloon",skintone:!1,lineOne:"Pronto!",lineTwo:"Agora voc\xea j\xe1 pode partir para outra."},{emoji:"bee",skintone:!1,lineOne:"Tudo em dia.",lineTwo:"Voc\xea est\xe1 pronto para outra."},{emoji:"flex",skintone:!0,lineOne:"Feito!",lineTwo:"Voc\xea leu todas as suas mensagens."},{emoji:"clap",skintone:!0,lineOne:"Todas as n\xe3o lidas foram lidas.",lineTwo:"Parab\xe9ns!"},{emoji:"relieved",skintone:!1,lineOne:"Miss\xe3o cumprida!",lineTwo:"Pronto para algo novo."},{emoji:"crystalball",skintone:!1,lineOne:"Agora voc\xea est\xe1 por dentro de tudo.",lineTwo:"Pronto para o futuro?"},{emoji:"high5",skintone:!0,lineOne:"Isso \xe9 tudo!",lineTwo:""},{emoji:"high5",skintone:!0,lineOne:"Deu.",lineTwo:""},{emoji:"earth_americas",skintone:!1,lineOne:"Tudo pronto.",lineTwo:"Agora o mundo est\xe1 nas suas m\xe3os."},{emoji:"walking",skintone:!0,lineOne:"\xc9 isso.",lineTwo:"J\xe1 pode sair por a\xed."},{emoji:"check_mark",skintone:!1,lineOne:"Tudo em dia.",lineTwo:"O que vai fazer agora?"},{emoji:"rocket",skintone:!1,lineOne:"Dever cumprido.",lineTwo:"O futuro \xe9 seu."},{emoji:"sunglasses",skintone:!1,lineOne:"Tudo lido.",lineTwo:"Agora j\xe1 pode relaxar."},{emoji:"sunglasses",skintone:!1,lineOne:"Tudo pronto!",lineTwo:""},{emoji:"star",skintone:!1,lineOne:"Bom trabalho!",lineTwo:"Leitura conclu\xedda."},{emoji:"tada",skintone:!1,lineOne:"Surpresa!",lineTwo:"Voc\xea terminou."},{emoji:"tada",skintone:!1,lineOne:"Surpresa!",lineTwo:"Agora voc\xea est\xe1 atualizado."},{emoji:"thumbup",skintone:!0,lineOne:"Acabou!",lineTwo:"Miss\xe3o dada \xe9 miss\xe3o cumprida."},{emoji:"wave",skintone:!0,lineOne:"Era isso.",lineTwo:"Por hoje \xe9 s\xf3!"},{emoji:"victory",skintone:!0,lineOne:"Atualizado!",lineTwo:"E agora?"}]),vd);var Td=n("2Zgd"),Ad=n("+8mH");var Rd=function(e){var t=void 0,n=void 0,a=void 0;return Object(y.m)(e,"feature_incremental_unread_counts")?(t=Object(te.c)(e),n=Object(us.a)(t),a=Object(te.h)(e)):(n=(n=Object(Td.g)()).filter(function(t){return!Object(Ad.c)(e,t)}),a=Object(Td.h)(),t={},n.forEach(function(n){var a=Object(G.e)(e,n);t[a.id]={unreadCnt:Object(K.U)(a),unreadHighlightCnt:Object(K.V)(a)}})),{countsPerChannel:t,unreadChannelIds:n,unreadChannelsAreKnown:a}},Pd=new B.b("all_unreads"),Md=(h.b.bool.isRequired,h.b.bool.isRequired,h.b.string.isRequired,h.b.string.isRequired,h.b.string.isRequired,h.b.func.isRequired,h.b.number.isRequired,h.b.func.isRequired,h.b.bool.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onUndo=n.onUndo.bind(n),n.onRefresh=n.onRefresh.bind(n),n.onEnter=n.onEnter.bind(n),n.generateMessage(),n.state={allowRefreshButton:e.visible},n.containerRef=m.a.createRef(),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.keyCommands=new Id.a,this.keyCommands.bindAll([{keys:"enter",handler:this.onEnter}])}},{key:"componentDidUpdate",value:function(e){var t=this;e.visible&&!this.props.visible?this.generateMessage():!e.visible&&this.props.visible&&(this.buttonDelayTimer=setTimeout(function(){t.setState(function(){return{allowRefreshButton:!0}})},1e3))}},{key:"componentWillUnmount",value:function(){clearTimeout(this.buttonDelayTimer),this.keyCommands&&this.keyCommands.reset()}},{key:"onEnter",value:function(e){var t=this.props.visible,n=Object(ae.a)()?this.props.userAttentionIsOnChat:Object(jd.f)();if(t&&n&&this.shouldShowNewButton()){var a=e.target;if(!Object(Sd.a)(a)){var r="BODY"===a.nodeName,i=this.containerRef.current&&this.containerRef.current.contains(a);(r||i)&&this.onRefresh()}}}},{key:"onRefresh",value:function(){this.props.refreshAllUnreads(),this.setState(function(){return{allowRefreshButton:!1}})}},{key:"onUndo",value:function(){this.props.undoMarkAllRead(),this.setState(function(){return{allowRefreshButton:!1}})}},{key:"generateMessage",value:function(){var e=this.props,t=e.teamId,n=e.preferredSkinTone,a=e.emojiMode;this.message=function(e){var t=e.locale,n=void 0===t?B.b.DEFAULT_LOCALE:t,a=e.preferredSkintone,r=void 0===a?1:a,i=e.emojiMode,o=void 0===i?"default":i,s="apple"===o?"default":o,l=Nd[n]||Nd[B.b.DEFAULT_LOCALE],c=l[Math.floor(Math.random()*l.length)],u=c.skintone?wd[s][c.emoji][r]:wd[s][c.emoji];return c.emojiUrl=u,c}({locale:Object(Od.a)({teamId:t}),preferredSkinTone:n,emojiMode:a}),(new Image).src=this.message.emojiUrl}},{key:"shouldShowNewButton",value:function(){var e=this.state.allowRefreshButton,t=this.props.totalUnreads;return e&&t>0}},{key:"render",value:function(){var e=this.props,t=e.visible,n=e.showUndo,a=e.totalUnreads;if(!t)return null;var r=this.shouldShowNewButton(),i=f()("p-unreads_view__empty",{"p-unreads_view__empty--show_new":r}),o=function(e){var t=e.tag,n=e.text;return"enter-icon"===t?m.a.createElement(ta.b,{type:"enter",size:"inherit"}):m.a.createElement("b",null,n)};return m.a.createElement("div",{className:i,ref:this.containerRef},m.a.createElement("div",{className:"p-unreads_view__empty__message",role:"alert"},m.a.createElement("img",{className:"p-unreads_view__empty__image",src:this.message.emojiUrl,alt:""}),m.a.createElement("div",null,this.message.lineOne,m.a.createElement("br",null),this.message.lineTwo)),r&&m.a.createElement(m.a.Fragment,null,m.a.createElement(_e.d,{onClick:this.onRefresh},Pd.t("{totalUnreads, plural, =1 {# New Message} other {# New Messages} }",{totalUnreads:a})),m.a.createElement("div",{className:"p-unreads_view__empty__button_caption"},Object(ce.p)()?Pd.rt("<b>Return</b> <enter-icon></enter-icon> to show",null,o):Pd.rt("<b>Enter</b> <enter-icon></enter-icon> to show",null,o))),n&&m.a.createElement("div",{className:"p-unreads_view__empty__undo"},m.a.createElement("div",{className:"p-unreads_view__empty__undo_inner"},Pd.t("You marked all your channels read."),m.a.createElement(En.a,{onClick:this.onUndo,className:"p-unreads_view__empty__undo_button"},Pd.t("Undo")))))}}]),t}(p.Component));Md.displayName="EmptyState";var xd=Object(g.b)(function(e){var t=Rd(e).countsPerChannel,n=Object(cs.a)(Object(ft.a)(t,"unreadCnt"));return{teamId:Object(v.b)(e),preferredSkinTone:Object(Zt.j)(e,"preferred_skin_tone")||"1",emojiMode:Object(Cd.h)(e,{forceDisplay:!0}),totalUnreads:n,userAttentionIsOnChat:Object(Ed.e)(e)}})(Md),Fd=n("lCmp"),Ld=n("X6iR"),Dd=n("CpTu"),Ud=n("qAkX"),Bd=n("Uk1S"),qd=n("miRO"),Hd=n("yPgC"),Wd=n("qrk6"),Gd=n("2TYC"),Kd=n("IxGy"),Vd=n("gLeh"),zd=n("VyaM");function Yd(e){if(e){var t=Object(zd.a)(e);return new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime().toString()}}var Qd=Object(gt.b)("build message summary for aria labels",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.channelId,r=n.ts,i=n.isFirstUnreadMsg,o=n.isFirstMsgForDay,s=n.isLastMsgForDay,l=n.previousMessageTs,c=n.day,u=n.rollup,d=n.hasFocus,p=n.viewContext,m=t(),h=Object(Vd.b)(m);if(!!!Object(Kd.d)(m,{channelId:a,ts:r})&&(h||d)){var b=Object(Gd.a)(m,{channelId:a,ts:r,previousMessageTs:l,rollup:u,hasFocus:d}),f=c||{ts:parseInt(Yd(r),10),isFirstDay:!1,isLastDay:!1};return Object(Wd.a)(ye()({},b,{featureA11yMessageSummary:Object(y.m)(m,"feature_a11y_message_summary"),viewContext:p,isFirstUnreadMsg:i,isFirstMsgForDay:o,isLastMsgForDay:s,day:f}))}});Qd.meta={name:"makeMessageSummary",key:"actionsMakeMessageSummaryMakeMessageSummary",description:"build message summary for aria labels"},Qd.propTypes={channelId:h.b.string.isRequired,ts:h.b.string.isRequired,isFirstUnreadMsg:h.b.bool,isFirstMsgForDay:h.b.bool,isLastMsgForDay:h.b.bool,previousMessageTs:h.b.string,day:h.b.object,rollup:Hd.a.Rollup(),hasFocus:h.b.bool,viewContext:h.b.string};var Xd=Qd,Jd=n("OtLZ"),Zd=n("om+M"),$d=n("s0HP"),ep=n("4zXV"),tp=Object(Zd.a)("Expand a channel in All Unreads",function(e,t,n){var a=Object(Zt.i)(t());if(a.includes(n)){var r=Object(Jd.a)(a,n);e(Object($d.b)({pref:"unread_collapsed_channels",value:r.join(",")})),e(Object(ep.b)({method:"unread.expand",args:{channel:n},reason:"all_unreads_expand"}))}});tp.meta={name:"expandChannel",key:"fetchersUnreadsApiExpandChannel",description:"Expand a channel in All Unreads"},tp.propTypes=h.b.string.isRequired;var np=Object(Zd.a)("Collapse a channel in All Unreads",function(e,t,n){var a=Object(Zt.i)(t());if(!a.includes(n)){var r=[].concat(ti()(a),[n]);e(Object($d.b)({pref:"unread_collapsed_channels",value:r.join(",")})),e(Object(ep.b)({method:"unread.collapse",args:{channel:n},reason:"all_unreads_collapse"}))}});np.meta={name:"collapseChannel",key:"fetchersUnreadsApiCollapseChannel",description:"Collapse a channel in All Unreads"},np.propTypes=h.b.string.isRequired;var ap=n("LxWA"),rp=function(){function e(t){var n=t.teamId,a=t.experimentGroup,i=t.clogger,o=t.messageViewLocation;r()(this,e),this.teamId=n,this.visibleMessageIds={},this.messagesById={},this.experimentGroup=a,this.clogger=i,this.messageViewLocation=o}return o()(e,[{key:"setCurrentlyVisibleMessages",value:function(e){var t=this,n=(new Date).getTime(),a=ye()({},this.visibleMessageIds);e.forEach(function(e){var r,i,o,s=(i=(r=e).channel,o=r.ts,i&&o?i+"-"+o:o);t.messagesById[s]=e,t.visibleMessageIds[s]=t.visibleMessageIds[s]||n,delete a[s]}),Object.keys(a).forEach(function(e){var a=t.messagesById[e],r=a.ts,i=a.channel,o=Object(Ze.a)(Object(_.getStateByTeamId)(t.teamId),i,r,!1),s=n-t.visibleMessageIds[e];delete t.visibleMessageIds[e],delete t.messagesById[e],t.shouldLog()&&(s<500||o&&t.clogger.track(le.EventId.MSG_IMPRESSION,{contexts:{ui_context:{action:le.UiAction.IMPRESSION},message_impression:{channel_id:o.channel,msg_timestamp:o.ts,msg_thread_ts:o.thread_ts,msg_author_user_id:o.user,duration_milliseconds:s,message_view_location:t.messageViewLocation}}}))})}},{key:"flushAllVisibleMessages",value:function(){this.setCurrentlyVisibleMessages([])}},{key:"isDisabled",value:function(){return!this.experimentGroup||"control"===this.experimentGroup}},{key:"shouldLog",value:function(){if(this.isDisabled())return!1;switch(this.experimentGroup){case"enabled":return!0;case"sample_001":return Math.random()<.01;default:return!1}}}]),e}(),ip=0,op=3,sp=4,lp=5,cp=n("tfYw"),up=n.n(cp),dp=n("3/My"),pp=n("nUcG");function mp(e){for(var t={},n=0;n<e.length;n++)t[e[n].key]={index:e[n].index,next:Object(ne.a)(e[n+1],"key")};return t}var hp=ye()({},ui.a.propTypes,{stickyItems:h.b.arrayOf(h.b.shape({key:h.b.string,index:h.b.number})),stickyOffsetTop:h.b.number,stickyZIndex:h.b.number}),bp=ye()({},ui.a.defaultProps,{stickyItems:[],stickyOffsetTop:0,stickyZIndex:null}),fp=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.stickyItems=mp(e.stickyItems),n}return u()(t,e),o()(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){up()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"UNSAFE_componentWillReceiveProps",this).call(this,e),this.stickyItems=mp(e.stickyItems)}},{key:"renderItem",value:function(e,n){if(!(e in this.stickyItems))return up()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"renderItem",this).call(this,e,n);var a=0===n?-100:this.getTop(e),r=this.layout.getHeight(e),i=this.layout.getHeightValidity(e),o=this.getContentHeight(),s=this.stickyItems[e].next,l=s?this.getTop(s):o,c=Math.max(0,o-l),u=this.state.activeItem===e,d=null===this.state.activeItem&&this.state.hasKeyboardFocus&&this.state.initialActiveItem===e,p=this.state.mouseDownTargetItem===e,h=this.state.hoveredItem===e,b=this.props,g=b.getPropsForItem,_=b.onItemClick,v=b.onItemKeyDown,y=g({key:e,index:n})||{},k=f()(y.className,"c-virtual_list__item--sticky");return m.a.createElement("div",{key:""+e+a+c+this.props.width+this.props.height,className:"c-virtual_list__sticky_container",role:"presentation",style:{top:a,bottom:c}},m.a.createElement(pp.a,ye()({tabIndex:this.getListItemTabIndex(e)},y,{id:e,itemKey:e,height:r,validity:i,className:k,style:{top:this.props.stickyOffsetTop,zIndex:this.props.stickyZIndex},hasFocus:u,hasFocusWithin:d,isMouseDownOnItem:p,onHeightChange:this.setHeight,onFocusEnter:this.onItemFocusEnter,onFocusWithin:this.onItemFocusWithin,onTabWithin:this.onItemTabWithin,onMouseOver:this.onItemMouseOver,onMouseLeave:this.onItemMouseLeave,onMouseDown:this.onItemMouseDown,onMouseUp:this.onItemMouseup,onClick:_,onKeyDown:v}),this.props.rowRenderer(n,{hasFocus:u,isHovered:h,isExpanded:y["aria-expanded"]})))}},{key:"renderItems",value:function(){var e=up()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"renderItems",this).call(this),n=this.state.start,a=Object(dp.a)(this.props.stickyItems,{index:n},function(e){return e.index})-1,r=this.props.stickyItems[a];return r&&e.unshift(this.renderItem(r.key,r.index)),e}}]),t}(ui.a),gp=fp;fp.propTypes=hp,fp.defaultProps=bp;var _p=n("ULIY"),vp=function(e,t){var n=t.ts,a=t.channelId,r=Object(Ze.a)(e,a,n);return n&&Object(_p.d)(Object(v.b)(e),a,n),{msg:r}};function yp(e){return Object(g.b)(vp)(function(t){return t.msg?m.a.createElement(e,t):null})}var kp=function(e,t){var n=t.ts,a=t.prevTs,r=t.channelId,i=Object(Ze.a)(e,r,n),o=Object(Ze.a)(e,r,a),s=Object(v.b)(e);return n&&Object(_p.d)(s,r,n),a&&Object(_p.d)(s,r,a),{msg:i,adjacent:Object(et.W)(e,i,o)}};function Op(e){return Object(g.b)(kp)(function(t){return t.msg?m.a.createElement(e,t):null})}var Cp=n("jo6Y"),Ep=n.n(Cp),jp=n("MnCE"),Sp=n("CSaH"),Ip=new B.b("messages");h.b.bool;function wp(e){var t=e.ghost;return m.a.createElement("div",{className:f()({"c-message_list__unread_divider":!0,"c-message_list__unread_divider--ghost":t})},m.a.createElement("hr",{className:"c-message_list__unread_divider__separator","aria-hidden":"true"}),m.a.createElement("span",{className:"c-message_list__unread_divider__label"},Ip.t("new messages")))}wp.displayName="UnreadDivider",wp.defaultProps={ghost:!1};var Np=Object(jp.a)(wp);h.b.number.isRequired,h.b.bool,h.b.bool;function Tp(e){var t=e.isUnread,n=Ep()(e,["isUnread"]),a=t?m.a.createElement(Np,{ghost:n.ghost}):m.a.createElement("hr",{className:"c-message_list__day_divider__line"});return m.a.createElement("div",{className:"c-message_list__day_divider"},a)}function Ap(e){var t=e.date,n=e.sticky,a=t/1e3,r=Object(Sp.a)(a,"{day_divider_pretty}"),i=f()("c-message_list__day_divider__label",{"c-message_list__day_divider__label--non_sticky":!n});return m.a.createElement("div",{className:i},m.a.createElement("div",{className:"c-message_list__day_divider__label__pill"},r))}Tp.displayName="DayDivider",Tp.defaultProps={isUnread:!1,ghost:!1},Ap.displayName="DayDividerLabel",Ap.defaultProps={sticky:!0};var Rp=Object(jp.a)(Tp),Pp=Object(jp.a)(Ap),Mp=n("4EIq"),xp=new B.b("offline_mode");function Fp(e){var t=e.featureOfflineMode,n=e.caption;return t?m.a.createElement("div",{className:"p-inline_offline_indicator"},m.a.createElement("span",null,m.a.createElement(ta.b,{type:"cloud-offline-small",size:"inherit"})," ",m.a.createElement("strong",null,xp.t("No connection."))," ",n||xp.t("Go online to load more messages."))):null}Fp.displayName="InlineOfflineIndicator",Fp.defaultProps={caption:void 0};var Lp=Object(rr.a)("feature_offline_mode")(Fp),Dp=n("Srcy"),Up=n("peKf"),Bp=n("SNtu"),qp=n("OZf9"),Hp=n("0ivQ"),Wp=n("y8dB");var Gp=new B.b("all_unreads"),Kp=Object(gt.b)("Build an aria-label for an All Unreads header row",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.channelId,r=n.messageCount,i=n.messageCountAfterLatest,o=n.markedMsgCount,s=n.messageCountIsExact,l=n.collapsed,c=t(),u=r>0,d=i>0;return Object(K.x)(c,Object(G.e)(c,a))+" ("+(u||!(o>0)||d?!u&&d||l?s?Gp.t("{messageCount} new {messageCount, plural, =1 {message} other {messages}}",{messageCount:i+r}):Gp.t("New messages"):s?Gp.t("{messageCount, plural, =1 {# message} other {# messages}}",{messageCount:r}):Gp.t("{messageCount, plural, =1 {#+ message} other {#+ messages}}",{messageCount:r}):Gp.t("{messageCount, plural, =1 {# message} other {# messages}} marked read",{messageCount:o}))+")"});Kp.meta={name:"makeHeaderLabel",key:"componentsUnreadsViewUtilityMakeHeaderLabelMakeHeaderLabel",description:"Build an aria-label for an All Unreads header row"},Kp.propTypes={channelId:h.b.string.isRequired,messageCount:h.b.number,messageCountAfterLatest:h.b.number,markedMsgCount:h.b.number,messageCountIsExact:h.b.bool,collapsed:h.b.bool};var Vp=Kp,zp=n("Bw5p"),Yp=n("4Twu"),Qp=n("18Pa"),Xp=new B.b("all_unreads"),Jp=(h.b.number,h.b.bool,h.b.bool.isRequired,h.b.func.isRequired,function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"getMessageCountText",value:function(){var e=this.props,t=e.messageCountIsExact,n=e.messageCount;return n?t?Xp.t("{messageCount, plural, =1 {# message} other {# messages}}",{messageCount:n}):Xp.t("{messageCount, plural, =1 {#+ message} other {#+ messages}}",{messageCount:n}):""}},{key:"renderButton",value:function(e){return m.a.createElement(_e.d,{onClick:this.props.markRead,type:"outline",size:"small",className:"p-unreads_view__header__mark_read_button","data-qa":"all_unreads_header_mark_read",key:"MARK-READ"},e)}},{key:"renderContent",value:function(){var e=this;if(this.props.selected)return Xp.rt('<span className="p-unreads_view__header__kb_instructions">Press <key>Esc</key> to </span><button>Mark as Read</button>',null,function(t){var n=t.text,a=t.tag;return"button"===a?e.renderButton(n):"key"===a?m.a.createElement("span",{className:"c-keyboard_key c-keyboard_key--slim"},n):null});var t=Xp.t("Mark as Read");return this.renderButton(t)}},{key:"render",value:function(){var e=f()("p-unreads_view__header__kb_instructions_container");return m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:"p-unreads_view__header__message_count"},this.getMessageCountText()),m.a.createElement("span",{className:e},this.renderContent()))}}]),t}(p.PureComponent));Jp.displayName="HeaderDefault",Jp.defaultProps={messageCount:0,messageCountIsExact:!0};var Zp=Jp,$p=new B.b("all_unreads"),em=(h.b.string.isRequired,h.b.string.isRequired,h.b.string.isRequired,h.b.string.isRequired,h.b.bool.isRequired,h.b.number,h.b.bool,h.b.number,h.b.number,h.b.number,h.b.func.isRequired,h.b.func.isRequired,h.b.func.isRequired,h.b.func.isRequired,h.b.bool.isRequired,h.b.func.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["markRead","undoMarkRead","showNew","openChannel","toggleCollapse"]),n}return u()(t,e),o()(t,[{key:"markRead",value:function(){var e={channel_id:this.props.channelId,channel_type:this.props.channelType,unread_count:this.props.totalUnreadCount};this.props.clogLinkClick({event:"UNREADS_MARK_GROUP_AS_READ",metadata:e}),this.props.markChannelLastRead(this.props.channelId,this.props.latest,this.props.messageCount)}},{key:"undoMarkRead",value:function(){var e={channel_id:this.props.channelId,channel_type:this.props.channelType,unread_count:this.props.totalUnreadCount};this.props.clogLinkClick({event:"UNREADS_MARK_GROUP_AS_UNREAD",metadata:e}),this.props.markChannelLastRead(this.props.channelId,this.props.initialLastRead)}},{key:"showNew",value:function(){this.props.showNewerMessages(this.props.channelId,!0)}},{key:"openChannel",value:function(){this.props.setPrimaryView({id:this.props.channelId})}},{key:"toggleCollapse",value:function(){this.props.toggleCollapse(this.props.channelId)}},{key:"renderUndo",value:function(){var e=this.props.markedMsgCount,t=void 0;return e&&(t=$p.t("{messageCount, plural, =1 {# message} other {# messages}} marked read",{messageCount:e})),m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:"p-unreads_view__header__message_count"},t),m.a.createElement(En.a,{className:"p-unreads_view__header__undo_button",onClick:this.undoMarkRead,"data-qa":"all_unreads_header_undo"},$p.t("Undo")))}},{key:"renderNewMsgs",value:function(e){var t=this.props,n=t.messageCountAfterLatest,a=t.messageCountIsExact,r=t.messageCount,i=void 0;return i=a?$p.t("{messageCount} new {messageCount, plural, =1 {message} other {messages}}",{messageCount:n+r}):$p.t("New messages"),m.a.createElement(En.a,{onClick:e,className:"p-unreads_view__header__new_msgs_button","data-qa":"all_unreads_header_new_msgs"},i," ",m.a.createElement(ta.b,{inline:!0,size:"inherit",type:"circle-fill"}))}},{key:"renderDefault",value:function(){var e=Object(zp.a)(this.props,["messageCount","messageCountIsExact","selected"]);return m.a.createElement(Zp,ye()({},e,{markRead:this.markRead}))}},{key:"render",value:function(){var e=this.props,t=e.channelId,n=e.markedMsgCount,a=e.messageCount,r=e.messageCountAfterLatest,i=e.collapsed,o=a>0,s=r>0,l=0,c=1,u=2,d=3,p=l;o||!(n>0)||s?!o&&s?p=d:i&&(p=c):p=u;var h=f()("p-unreads_view__header",{"p-unreads_view__header--was_marked":p===u||p===d,"p-unreads_view__header--collapsed":p===c}),b=i?"caret-right":"caret-down",g=p===l||p===c,_=p===l;return m.a.createElement("div",{className:h},m.a.createElement(En.a,{onClick:this.openChannel,className:"p-unreads_view__header__channel_name_link","data-qa":"all_unreads_header_channel_name"},m.a.createElement(Yp.a,{channelId:t,className:"p-unreads_view__header__channel_name"})),g&&m.a.createElement(Qp.a,{icon:b,className:"p-unreads_view__header__collapse","data-qa":"all_unreads_header_toggle",onClick:this.toggleCollapse,"aria-expanded":_}),p===u&&this.renderUndo(),p===d&&this.renderNewMsgs(this.showNew),p===c&&this.renderNewMsgs(this.toggleCollapse),p===l&&this.renderDefault())}}]),t}(p.Component));em.displayName="Header",em.defaultProps={messageCount:0,messageCountIsExact:!0,messageCountAfterLatest:0,markedMsgCount:0,totalUnreadCount:0};var tm={setPrimaryView:function(){return wa.a.apply(void 0,arguments)}},nm=Object(g.b)(null,tm)(em),am=n("6Iy0"),rm=n("anIG");h.b.object.isRequired;function im(e){var t=e.msg,n=Ep()(e,["msg"]);return m.a.createElement(uo.a,ye()({msg:t},n,{inline:Object(et.mb)(t)}))}im.displayName="CompactBlocks";var om=im,sm=n("fFZG"),lm=n("ALaB");n("Ho8D");function cm(e){var t=e.msg;return Object(et.ub)(t)?m.a.createElement(lm.a,{className:"c-message_kit__broadcast_footer",ts:t.ts,threadTs:t.thread_ts,channelId:t.channel}):null}cm.displayName="BroadcastFooter";var um=n("qYtJ"),dm=(h.b.object.isRequired,h.b.string,h.b.func,{dispatchShowThreadIfThreadable:d.a,className:void 0}),pm=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.msg,n=e.dispatchShowThreadIfThreadable,a=f()("c-message_kit__thread_replies",this.props.className),r=t.channel,i=t.thread_ts,o=t.replies,s=t.reply_count,l=t.reply_users,c=t.reply_users_count,u=t.latest_reply;return r&&s?m.a.createElement(um.a,{channelId:r,threadTs:i,replies:o,replyCount:s,replyUsers:l,replyUsersCount:c,latestReply:u,showThreadIfThreadable:n,className:a}):null}}]),t}(p.PureComponent);pm.displayName="ThreadReplies",pm.defaultProps=dm;var mm=Object(g.b)(null,function(e){return{dispatchShowThreadIfThreadable:function(){return e(qd.m.apply(void 0,arguments))}}})(pm),hm=n("IqgZ"),bm=n("Q/6m"),fm=n("Q3oM"),gm=n("WOap"),_m=n("RjVJ"),vm=(n("vKzi"),h.b.object,h.b.node,h.b.oneOf(["light","dense"]),{msg:h.b.object,children:null,theme:"light"}),ym=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.msg,n=e.children,a=e.theme;if(!Object(et.ub)(t))return n;var r=f()("c-message_kit__broadcast_preamble",{"c-message_kit__broadcast_preamble--dense":"dense"===a});return m.a.createElement("div",{className:r},n,m.a.createElement(_m.a,{ts:t.ts,threadTs:t.thread_ts,channelId:t.channel,className:"c-message_kit__broadcast_preamble__inner"}))}}]),t}(p.PureComponent);ym.displayName="BroadcastPreamble",ym.defaultProps=vm;var km=Object(g.b)(function(e){return{theme:Object(Bd.a)(e)}})(ym),Om=n("CsEc"),Cm=n("Y6eO"),Em=(n("rqkC"),h.b.object.isRequired,h.b.string,h.b.node,h.b.bool,h.b.func,h.b.string,{className:void 0,children:void 0,isEditing:!1,setBackground:d.a,viewContext:void 0}),jm=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.setBackground()}},{key:"componentDidUpdate",value:function(){this.setBackground()}},{key:"setBackground",value:function(){var e=this.props,t=e.isEditing,n=e.setBackground;n({editing:t})}},{key:"render",value:function(){var e=this.props,t=e.msg,n=e.isEditing,a=e.children,r=e.viewContext;if(!n)return a;var i=t.channel,o=t.ts,s=f()(this.props.className,"c-message_kit__edit");return m.a.createElement("div",{className:s},m.a.createElement(Cm.a,{channelId:i,ts:o,messageContainerType:r}))}}]),t}(p.PureComponent);jm.displayName="MessageEdit",jm.defaultProps=Em;var Sm=Object(bm.b)(Object(Qs.b)(Object(g.b)(function(e,t){var n=t.msg,a=t.viewContext,r=Object(et.F)(n),i=Object(et.Q)(n);return{isEditing:!!Object(Kd.d)(e,{channelId:r,ts:i,viewContext:a})}})(jm))),Im=n("/FWe"),wm=new B.b("message_kit"),Nm=(h.b.object.isRequired,h.b.oneOf(["light","dense"]),h.b.bool,h.b.bool,h.b.bool,h.b.oneOf(["above","inside","default"]),h.b.func,Hd.a.Rollup(),{theme:"light",adjacent:!1,focused:!1,renderActionsOffscreen:!1,actionsPosition:void 0,onBackgroundClick:d.a,rollup:null}),Tm=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleBackgroundClick=n.handleBackgroundClick.bind(n),n}return u()(t,e),o()(t,[{key:"getMessageBody",value:function(e){var t=this.props,n=t.adjacent,a=t.rollup;return m.a.createElement(m.a.Fragment,null,!n&&m.a.createElement(km,{msg:e},m.a.createElement(lo.a,{msg:e}),"\xa0\xa0",m.a.createElement(ho.a,{msg:e,clickable:!0},wm.t("Open in channel")),m.a.createElement("br",null)),m.a.createElement(co.a,{msg:e,rollup:a}),m.a.createElement(uo.a,{msg:e,blocksContainerContext:am.a.all_unreads}),m.a.createElement(mo.b,{msg:e}),m.a.createElement(rm.a,{msg:e}),m.a.createElement(sm.a,{msg:e}),m.a.createElement(mm,{msg:e,className:"p-unreads_view__thread_replies"}),m.a.createElement(cm,{msg:e}))}},{key:"getCompactMessageBody",value:function(e){var t=this.props,n=t.adjacent,a=t.rollup;return m.a.createElement(Im.a,null,!n&&m.a.createElement(km,{msg:e},m.a.createElement(lo.a,{msg:e,className:"p-unreads_view_sender--compact"}),"\xa0"),m.a.createElement(co.a,{msg:e,rollup:a}),m.a.createElement(om,{msg:e,blocksContainerContext:am.a.all_unreads}),m.a.createElement(mo.b,{msg:e}),m.a.createElement(rm.a,{msg:e}),m.a.createElement(sm.a,{msg:e}),m.a.createElement(mm,{msg:e,className:"p-unreads_view__thread_replies"}))}},{key:"getCompactGutter",value:function(){var e=this.props,t=e.msg,n=e.theme,a=e.adjacent,r="light"===n,i=f()("p-unreads_view_compact_timestamp",{"p-unreads_view_compact_timestamp--light":r,"p-unreads_view_compact_timestamp--adjacent":a});return m.a.createElement("div",{className:i},m.a.createElement(ho.a,{msg:t,meridiem:!(a&&r),clickable:!0},wm.t("Open in channel")))}},{key:"handleBackgroundClick",value:function(e){e.altKey&&(e.preventDefault(),this.props.onBackgroundClick(this.props.msg))}},{key:"render",value:function(){var e=this.props,t=e.msg,n=e.theme,a=e.adjacent,r=e.focused,i=e.renderActionsOffscreen,o=e.actionsPosition,s=f()("p-unreads-view__message","c-message_kit__message"),l="dense"===n,c=l?this.getCompactGutter():null,u=a?this.getCompactGutter():m.a.createElement(so.a,{msg:t}),d=l?this.getCompactMessageBody(t):this.getMessageBody(t);return m.a.createElement(hm.a,{msg:t},m.a.createElement(bm.a,{msg:t,className:s,onClick:this.handleBackgroundClick},m.a.createElement(fm.a,{"data-qa":"unreads_view_message_hover",hovered:r},m.a.createElement(gm.a,{msg:t,showComment:!0,showShare:!0,messageContainerType:Ca.H.UNREAD_VIEW,position:o||(l||a?"above":"default"),renderOffscreen:i},m.a.createElement(io.a,{msg:t,replyBar:m.a.createElement(mm,{msg:t,className:"p-unreads_view__thread_replies"})},m.a.createElement(Om.a,{msg:t,className:"p-unreads-view__message_label"},m.a.createElement(oo.a,{light:u,compact:c},m.a.createElement(Sm,{msg:t},d))))))))}}]),t}(p.PureComponent);Tm.displayName="Message";var Am=Tm;Tm.defaultProps=Nm;var Rm=new B.b("all_unreads"),Pm=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return u()(t,e),o()(t,[{key:"onClick",value:function(){var e=this.props,t=e.channelId;(0,e.showNewerMessages)(t)}},{key:"render",value:function(){var e=this.props.count,t=Rm.t("{count, plural, =1 {# new message} other {# new messages}}",{count:e});return m.a.createElement(En.a,{className:"p-unreads_view__show_newer",onClick:this.onClick},t)}}]),t}(p.PureComponent);Pm.displayName="ShowNewerButton";var Mm=Pm,xm=(h.b.func.isRequired,new B.b("all_unreads"));function Fm(e){var t=e.markAllRead;return m.a.createElement("div",{className:"p-unreads_view__footer"},m.a.createElement(_e.d,{onClick:t,type:"outline"},xm.t("Mark All Messages Read")))}Fm.displayName="Footer";var Lm=Fm,Dm=new B.b("all_unreads");function Um(){return m.a.createElement("div",{className:"p-unreads_view__loading_more"},Dm.t("Loading more messages..."))}Um.displayName="LoadingMore";var Bm=Um,qm=new B.b("all_unreads"),Hm="UNREADS-VIEW",Wm=Op(Am),Gm={showNewerMessages:h.b.func.isRequired,markChannelLastRead:h.b.func.isRequired,markAllRead:h.b.func.isRequired,removeFrames:h.b.func.isRequired,totalUnreadCount:h.b.number.isRequired,frames:h.b.arrayOf(h.b.shape({channelId:h.b.string.isRequired,start:h.b.string.isRequired,end:h.b.string.isRequired,initialLastRead:h.b.string.isRequired,markedMsgCount:h.b.number.isRequired,channelType:h.b.string.isRequired,collapsed:h.b.bool.isRequired,lastRead:h.b.string.isRequired,latest:h.b.string.isRequired,timestamps:h.b.arrayOf(h.b.string).isRequired,reachedEnd:h.b.bool.isRequired,messages:h.b.object,isMember:h.b.bool})).isRequired,logger:h.b.object.isRequired,clogLinkClick:h.b.func.isRequired,theme:h.b.oneOf(["dense","light"]).isRequired,featureAriaApplicationMode:h.b.bool.isRequired,allUnreadsSortOrder:h.b.string.isRequired,focusRequestedThreadKey:h.b.string,userAttentionIsOnChat:h.b.bool.isRequired,featureOfflineMode:h.b.bool.isRequired,isOffline:h.b.bool.isRequired,teamId:h.b.string.isRequired,impressionLoggingWebGroup:h.b.string,fetchHistory:h.b.func.isRequired,addMessagesFromHistory:h.b.func.isRequired,setUnreadPoint:h.b.func.isRequired,expandChannel:h.b.func.isRequired,collapseChannel:h.b.func.isRequired,makeMessageSummary:h.b.func.isRequired,makeHeaderLabel:h.b.func.isRequired,showThreadIfThreadable:h.b.func.isRequired,setFocusRequestedThreadKey:h.b.func.isRequired,removeFromSectionNavigation:h.b.func,addToSectionNavigation:h.b.func,setInitialActiveSection:h.b.func},Km={focusRequestedThreadKey:void 0,removeFromSectionNavigation:d.a,addToSectionNavigation:d.a,setInitialActiveSection:d.a,teamId:void 0,impressionLoggingWebGroup:"control"},Vm=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["renderRow","fetchPost","showNewerMessages","markAllRead","markChannelLastRead","toggleCollapse","handleMessageBackgroundClick","isFocusableItem","onListScroll","onMarkReadKeyCommand","onMarkReadKeyCommandWithR","onLeftKeyCommand","onRightKeyCommand","onPreviousChannelKeyCommand","onNextChannelKeyCommand","onItemTabWithin","shouldIgnoreKeyEvent","shouldIgnoreFocusedKeyEvent","clogClick","isItemAriaExpanded","onFocusEnter","onFocusLeave","getAriaLabelForRow","getPropsForItem","focus"]),n.layout=new di.a({ANCHOR_OFFSET:72}),n.list=m.a.createRef(),n.rows=[],n.loading=!1,n.state={keyToFocus:null,hasKeyboardFocus:!1},n.onListScrolledDebounce=Object(ap.a)(n.onListScroll,150),n.attachMessageImpressionLogger(e.teamId,e.impressionLoggingWebGroup,e.clogger),n}return u()(t,e),o()(t,[{key:"componentWillUnmount",value:function(){this.messageImpressionLogger.flushAllVisibleMessages()}},{key:"componentDidUpdate",value:function(e){var t={prevUserAttentionIsOnChat:e.userAttentionIsOnChat,prevComposerVisible:e.composerVisible,currentUserAttentionIsOnChat:this.props.userAttentionIsOnChat,currentComposerVisible:this.props.composerVisible};Object(Up.a)(t)&&this.props.addToSectionNavigation(),Object(Bp.a)(t)&&this.props.removeFromSectionNavigation(),this.layout.anchor&&0===this.layout.anchorOffset&&this.layout.setAnchor(!1);var n=Object(ft.a)(this.props.frames.filter(function(e){return!e.isMember}),"channelId"),a=Object(ft.a)(this.props.frames.filter(function(e){return e.reachedEnd&&(Object(ls.a)(e.timestamps)||Object(Ud.a)(e.timestamps)<=e.initialLastRead)}),"channelId"),r=[].concat(ti()(n),ti()(a));r.length&&(this.props.logger.info("removing frames (non-member, empty):",n,a),this.props.removeFrames(r)),e.teamId!==this.props.teamId&&this.attachMessageImpressionLogger(this.props.teamId,this.props.impressionLoggingWebGroup,this.props.clogger),this.maybeClearKeyToFocus()}},{key:"attachMessageImpressionLogger",value:function(e,t,n){if(this.messageImpressionLogger)try{this.messageImpressionLogger.flushAllVisibleMessages()}catch(e){this.props.logger.error("unreads_list_unable_log_message_impressions","Unreads List View unable to log message impressions",e)}this.messageImpressionLogger=new rp({teamId:e,experimentGroup:t,clogger:n,messageViewLocation:sp})}},{key:"maybeClearKeyToFocus",value:function(){var e=this.list.current;if(e){var t=e.getActiveItem();t&&this.state.keyToFocus===t&&this.setState(function(){return{keyToFocus:null}})}}},{key:"determineKeyToFocus",value:function(e,t){var n=this.state.keyToFocus,a=this.props.focusRequestedThreadKey;if(a){var r=Object(Pn.a)(a);return"message-"+r.channelId+"-"+r.threadTs}if(n)return n;var i=this.list.current&&this.list.current.getInitialActiveItem();if(Object(Ld.a)(i,"show-newer-")&&!Object(fs.a)(t,i)){var o=e.indexOf(i);if(-1===o)return null;var s=e[o-1],l=t.indexOf(s),c=t[l+1];if(c)return c}return null}},{key:"showNewerMessages",value:function(e,t){var n=Object(Dd.a)(this.props.frames,{channelId:e}),a=t&&n.lastRead;t&&this.maybeAnchorToHeader(e),this.props.showNewerMessages(e,n.latest,a)}},{key:"markAllRead",value:function(){var e={};this.rows.filter(function(e){return"header"===e.type}).forEach(function(t){t.messageCountIsExact&&!t.messageCount||(e[t.channelId]=t.end)}),this.props.markAllRead(e)}},{key:"getRowAndFrame",value:function(e){var t=this.props,n=t.logger,a=t.frames,r=this.keys.indexOf(e),i=this.rows[r];if(!i||!i.channelId)return n.warn("No valid row"),null;var o=i.channelId,s=Object(Dd.a)(a,{channelId:o});return s?{row:i,frame:s}:(n.warn("No frame for "+o),null)}},{key:"getActiveRow",value:function(){var e=this.list.current&&this.list.current.getInitialActiveItem();return e?this.getRowAndFrame(e):null}},{key:"getActiveRowForKeyboardMarking",value:function(){var e=this.getActiveRow();if(e)return e;var t=this.defaultActiveItemForKeyboardMarking||this.keys[0];return t?this.getRowAndFrame(t):null}},{key:"onMarkReadKeyCommand",value:function(){var e=this.props,t=e.logger,n=e.frames;t.info("onMarkReadKeyCommand");var a=this.getActiveRowForKeyboardMarking()||{},r=a.row,i=a.frame;if(r&&i){var o=Object(aa.a)(this.rows,{channelId:i.channelId,type:"message"}).length;if(!o)return r.markedMsgCount?void this.markChannelLastRead(i.channelId,i.initialLastRead):void t.warn("No messages to mark or to undo");if(this.markChannelLastRead(i.channelId,i.end,o),1!==n.filter(function(e){return e.start<e.end}).length){var s=n[1+n.indexOf(i)],l=s?"header-"+s.channelId:"header-"+i.channelId;this.setState(function(){return{keyToFocus:l}}),this.defaultActiveItemForKeyboardMarking=l}}}},{key:"onMarkReadKeyCommandWithR",value:function(){var e=this.props.logger;e.info("onMarkReadKeyCommandWithR");var t=this.getActiveRowForKeyboardMarking()||{},n=t.row,a=t.frame;n&&a&&("header"===n.type?this.onMarkReadKeyCommand():e.info("Header not selected: "+n.type))}},{key:"onLeftKeyCommand",value:function(){this.props.logger.info("onLeftKeyCommand");var e=this.getActiveRow(),t=e.row,n=e.frame;t&&n&&("header"!==t.type||n.collapsed||(this.toggleCollapse(n.channelId),this.setState(function(){return{keyToFocus:"header-"+n.channelId}})))}},{key:"onRightKeyCommand",value:function(){this.props.logger.info("onRightKeyCommand");var e=this.getActiveRow(),t=e.row,n=e.frame;if(t&&n){if("header"===t.type&&n.collapsed)return this.toggleCollapse(n.channelId),void this.setState(function(){return{keyToFocus:"header-"+n.channelId}});if("message"===t.type){var a=t.ts,r=t.channelId;this.props.showThreadIfThreadable({channelId:r,threadTs:a,requestFocus:!0}),this.blur()}}}},{key:"onPreviousChannelKeyCommand",value:function(){var e=this.props,t=e.logger,n=e.frames;t.info("onPreviousChannelKeyCommand");var a=this.getActiveRow()||{},r=a.row,i=a.frame;if(r&&i){var o=i;"header"!==r.type||(o=n[n.indexOf(i)-1])?this.setState(function(){return{keyToFocus:"header-"+o.channelId}}):t.info("No previous frame")}}},{key:"onNextChannelKeyCommand",value:function(){var e=this.props,t=e.logger,n=e.frames;t.info("onNextChannelKeyCommand");var a=this.getActiveRow()||{},r=a.row,i=a.frame;if(r&&i){var o=n[n.indexOf(i)+1];o?this.setState(function(){return{keyToFocus:"header-"+o.channelId}}):t.info("No next frame")}}},{key:"onItemTabWithin",value:function(){this.props.setInitialActiveSection()}},{key:"shouldIgnoreKeyEvent",value:function(e){return!!Object(Sd.a)(e.target)||(!this.checkUserAttentionIsOnChat()||e.target!==document.body&&((!e.target||"Punreads"!==e.target.getAttribute("data-sidebar-link-id"))&&!this.state.hasKeyboardFocus))}},{key:"shouldIgnoreFocusedKeyEvent",value:function(e){return!!Object(Sd.a)(e.target)||(!this.checkUserAttentionIsOnChat()||!this.state.hasKeyboardFocus)}},{key:"checkUserAttentionIsOnChat",value:function(){return Object(ae.a)()?this.props.userAttentionIsOnChat:Object(jd.f)()}},{key:"maybeAnchorToHeader",value:function(e){if(this.list.current){var t="header-"+e;this.list.current.getTop(t)-this.list.current.getScrollTop()>0||this.layout.setAnchor(t,0)}}},{key:"markChannelLastRead",value:function(e,t,n){this.maybeAnchorToHeader(e),this.props.markChannelLastRead(e,t,n)}},{key:"clogClick",value:function(e,t){this.props.clogLinkClick({event:e,metadata:t})}},{key:"toggleCollapse",value:function(e){var t=Object(Dd.a)(this.props.frames,{channelId:e});if(t){var n={channel_id:e,channel_type:t.channelType};this.maybeAnchorToHeader(e),t.collapsed?(this.props.expandChannel(e),this.props.showNewerMessages(e,t.latest),this.clogClick("UNREADS_EXPAND_GROUP",n)):(this.props.collapseChannel(e),this.clogClick("UNREADS_COLLAPSE_GROUP",n))}}},{key:"handleMessageBackgroundClick",value:function(e){var t=e.channel,n=e.ts;this.props.setUnreadPoint({channelId:t,unreadTs:n})}},{key:"isFocusableItem",value:function(e){var t=e.index,n=this.rows[t];return["header","message","show-newer","footer"].includes(n.type)}},{key:"isItemAriaExpanded",value:function(e,t){var n=this.rows[t];if(n&&"header"===n.type)return!n.collapsed}},{key:"getPropsForItem",value:function(e){var t=e.key,n=e.index,a=this.rows[n];return a&&a.type?{"aria-label":this.getAriaLabelForRow(n),"aria-expanded":this.isItemAriaExpanded(t,n)}:void 0}},{key:"scrollToTop",value:function(){this.list.current&&this.list.current.scrollToOffset(0)}},{key:"focus",value:function(){var e=this.list.current;e&&e.focus()}},{key:"blur",value:function(){var e=this.list.current;e&&e.blur()}},{key:"onFocusEnter",value:function(){var e=this;this.setState(function(){return{hasKeyboardFocus:!0}},function(){var t=e.props.focusRequestedThreadKey,n=e.list.current;n&&t&&("message-"+t===n.getActiveItem()&&e.props.setFocusRequestedThreadKey(null))})}},{key:"onFocusLeave",value:function(){this.setState(function(){return{hasKeyboardFocus:!1}})}},{key:"onListScroll",value:function(){var e=this.list.current.getVisibleRange(void 0,!0),t=e.start,n=e.end,a=this.rows.slice(t,n).filter(function(e){return"message"===e.type}).map(function(e){return{ts:e.ts,channel:e.channelId}});try{this.messageImpressionLogger.setCurrentlyVisibleMessages(a)}catch(e){this.props.logger.error("unreads_list_unable_log_message_impressions","Unreads List View unable to log message impressions",e)}}},{key:"getAriaLabelForRow",value:function(e){if(!this.props.makeMessageSummary)return null;var t=this.rows[e];if(!t||!t.type)return null;switch(t.type){case"message":var n=t.ts;return this.props.makeMessageSummary({channelId:t.channelId,ts:n,hasFocus:this.state.hasKeyboardFocus,day:{ts:n,isFirstDay:!1,isLastDay:!1},viewContext:Ca.H.UNREAD_VIEW});case"header":return this.props.makeHeaderLabel({channelId:t.channelId,messageCount:t.messageCount,messageCountAfterLatest:t.messageCountAfterLatest,markedMsgCount:t.markedMsgCount,messageCountIsExact:t.messageCountIsExact,collapsed:t.collapsed});case"show-newer":return qm.t("{count, plural, =1 {# new message} other {# new messages}}",{count:t.count});case"footer":return qm.t("Mark All Messages Read");default:return null}}},{key:"renderRow",value:function(e,t){var n=t.hasFocus,a=this.rows[e],r=this.list.current&&this.list.current.getInitialActiveItem();switch(a.type){case"header":return m.a.createElement(nm,{channelId:a.channelId,channelType:a.channelType,messageCount:a.messageCount,messageCountAfterLatest:a.messageCountAfterLatest,messageCountIsExact:a.messageCountIsExact,markedMsgCount:a.markedMsgCount,collapsed:a.collapsed,latest:a.end,initialLastRead:a.initialLastRead,totalUnreadCount:this.props.totalUnreadCount,markChannelLastRead:this.markChannelLastRead,showNewerMessages:this.showNewerMessages,toggleCollapse:this.toggleCollapse,selected:Object(fs.a)(r,a.channelId),clogLinkClick:this.props.clogLinkClick});case"message":return m.a.createElement(Wm,{channelId:a.channelId,ts:a.ts,prevTs:a.prevTs,actionsPosition:a.isFirstMessage?"default":void 0,onBackgroundClick:this.handleMessageBackgroundClick,focused:n,renderActionsOffscreen:this.state.hasKeyboardFocus,theme:this.props.theme,rollup:a.rollup});case"loading":return this.props.featureOfflineMode&&this.props.isOffline?m.a.createElement(Lp,null):m.a.createElement(Bm,null);case"day-divider":var i=+a.dayTs;return m.a.createElement(m.a.Fragment,null,m.a.createElement(Pp,{date:i}),m.a.createElement(Rp,{date:i,isUnread:a.unread}));case"unread-divider":return m.a.createElement(Np,null);case"show-newer":return m.a.createElement(Mm,{count:a.count,channelId:a.channelId,showNewerMessages:this.showNewerMessages});case"spacer":return m.a.createElement("div",{className:f()("p-unreads_view__spacer",{"p-unreads_view__spacer--bottom":!!a.isBottom})});case"footer":return m.a.createElement(Lm,{markAllRead:this.markAllRead});default:return this.props.logger.error("Unhandled row type:",a.type),a.type}}},{key:"fetchPost",value:function(){var e=this,t=Object(Ud.a)(this.rows);if(t&&"loading"===t.type&&!this.loading){this.loading=!0;var n=t.channelId,a=t.oldest;this.props.logger.info("fetchPost",n,a),this.props.fetchHistory({channelId:n,oldest:a,reason:"unreads-view/fetchPost"}).then(function(t){var r=t.msgs,i=t.hasMore,o=t.deleted;e.props.addMessagesFromHistory({channelId:n,oldest:a,msgs:r,hasMore:i,deleted:o})}).finally(function(){e.loading=!1})}}},{key:"render",value:function(){var e=this,t=this.props,n=t.allUnreadsSortOrder,a=t.frames,r=t.currentUserId,i=t.featureOfflineMode,o=t.isOffline,s=function(e,t){var n=[],a=[],r=[],i=!0;return Object(qp.a)(e,function(e){var o=e.channelId,s=e.channelType,l=e.start,c=e.end,u=e.timestamps,d=e.sliceEnd,p=e.reachedEnd,m=e.messages,h=e.lastRead,b=e.initialLastRead,f=e.markedMsgCount,g=e.collapsed,_=u.filter(function(e){var n=m[e];return!(Object(et.fb)(n)||Object(et.ib)(n)&&!Object(et.hb)(n,t)||Object(et.sb)(n))}),v=_.filter(function(e){return e>l&&e<=c}),y=_.filter(function(e){return e>c}),k=v.length&&!g,O=!Object(Hp.a)(v[0]),C=h>l&&Object(Dd.a)(v,function(e){var n=m[e];return Object(et.kb)(n,h,t)});if(n.push("header-"+o),r.push({key:"header-"+o,index:a.length}),a.push({type:"header",channelId:o,channelType:s,end:c,initialLastRead:b,markedMsgCount:f,messageCount:v.length,messageCountAfterLatest:y.length,messageCountIsExact:p,collapsed:g}),k&&!O&&(n.push("spacer-top-"+o),a.push({type:"spacer"})),k){var E=v.map(function(e){return m[e]}),j=Object(Wp.a)(E).rollups;v.forEach(function(e,t){var r=v[t-1],i=e===C,s=r&&Yd(r),l=Yd(e);O&&s!==l?(n.push("day-divider-"+o+"-"+l),a.push({type:"day-divider",dayTs:l,unread:i})):i&&(n.push("unread-divider-"+o),a.push({type:"unread-divider"})),n.push("message-"+o+"-"+e),a.push({type:"message",channelId:o,ts:e,prevTs:r,isFirstMessage:0===t,rollup:j[e]})})}if(!p&&!g){var S=d||l;return n.push("loading-"+o+"-"+S),a.push({type:"loading",channelId:o,oldest:S}),i=!1,!1}return k&&(y.length?(n.push("show-newer-"+o),a.push({type:"show-newer",channelId:o,count:y.length})):(n.push("spacer-bottom-"+o),a.push({type:"spacer",isBottom:!0}))),!0}),i&&(n.push("footer"),a.push({type:"footer"})),{keys:n,rows:a,stickyItems:r}}(a,r),l=s.keys,c=s.rows,u=s.stickyItems,d=!Object(Fd.a)(c,function(e){return"message"===e.type});if(i&&o&&d)return m.a.createElement(yd,null);var p=this.keys;this.rows=c,this.keys=l;var h=[{keys:["r"],handler:this.onMarkReadKeyCommandWithR,filter:this.shouldIgnoreKeyEvent},{keys:["esc"],handler:this.onMarkReadKeyCommand,filter:this.shouldIgnoreKeyEvent},{keys:["left"],handler:this.onLeftKeyCommand,filter:this.shouldIgnoreFocusedKeyEvent},{keys:["right"],handler:this.onRightKeyCommand,filter:this.shouldIgnoreFocusedKeyEvent},{keys:["shift+pageup"],handler:this.onPreviousChannelKeyCommand,filter:this.shouldIgnoreFocusedKeyEvent},{keys:["shift+pagedown"],handler:this.onNextChannelKeyCommand,filter:this.shouldIgnoreFocusedKeyEvent}],b=void 0;b="alphabetical"===n?qm.t("All Unreads, sorted alphabetically"):"priority"===n?qm.t("All Unreads, sorted scientifically"):"newest"===n?qm.t("All Unreads, sorted by newest channel"):qm.t("All Unreads, sorted by oldest channel");var f=this.determineKeyToFocus(p,this.keys),g=m.a.createElement(ni.a,null,function(t){var n=t.width,a=t.height;return m.a.createElement(gp,{ref:e.list,layout:e.layout,width:n,height:a,keys:l,rowRenderer:e.renderRow,isFocusableItem:e.isFocusableItem,loadAround:e.fetchPost,loadPost:e.fetchPost,stickyItems:u,stickyZIndex:202,keyCommands:h,activeItem:f,getPropsForItem:e.getPropsForItem,onFocusEnter:e.onFocusEnter,onFocusLeave:e.onFocusLeave,useAriaApplicationMode:e.props.featureAriaApplicationMode,"aria-label":b,onItemTabWithin:e.onItemTabWithin,onScroll:e.onListScrolledDebounce})});return Object(ae.a)()?g:m.a.createElement(Mp.a,{component:this,order:.2},g)}}]),t}(kd.a);Vm.displayName="UnreadsList",Vm.propTypes=Gm,Vm.defaultProps=Km;var zm={fetchHistory:function(){return Et.b.apply(void 0,arguments)},addMessagesFromHistory:function(){return _t.a.apply(void 0,arguments)},setUnreadPoint:function(){return Fo.setUnreadPoint.apply(void 0,arguments)},expandChannel:function(){return tp.apply(void 0,arguments)},collapseChannel:function(){return np.apply(void 0,arguments)},makeMessageSummary:function(){return Xd.apply(void 0,arguments)},makeHeaderLabel:function(){return Vp.apply(void 0,arguments)},showThreadIfThreadable:function(){return qd.m.apply(void 0,arguments)},setFocusRequestedThreadKey:function(){return hs.c.apply(void 0,arguments)}},Ym=Object(ae.a)()?Object(V.a)(Vm,"UnreadsList",{index:0}):Vm,Qm=Object(g.b)(function(e,t){var n=Object(Ct.a)({label:Hm,state:e}),a=Object(re.a)({state:e}),r=Object(Bd.a)(e),i=Object(Zt.i)(e),o=t.frames.map(function(t){var n=Object(G.e)(e,t.channelId),a=Object(K.D)(n),r=Object($e.h)(e,n.id),o=Object(K.F)(n,r.timestamps),s=Object($e.h)(e,n.id,t.start),l=s.timestamps,c=s.end,u=!!s.reachedEnd,d=Object(Ze.b)(e,n.id),p=i.includes(t.channelId),m=Object(K.nb)(n);return ye()({},t,{lastRead:a,latest:o,timestamps:l,sliceEnd:c,reachedEnd:u,messages:d,collapsed:p,isMember:m})});return{logger:n,clogger:a,teamId:Object(v.b)(e),theme:r,frames:o,currentUserId:Object(y.c)(e),featureAriaApplicationMode:Object(y.m)(e,"feature_aria_application_mode"),allUnreadsSortOrder:gs(e),focusRequestedThreadKey:ms(e),userAttentionIsOnChat:Object(Ed.e)(e),featureOfflineMode:Object(y.m)(e,"feature_offline_mode"),isOffline:!Object(Qt.c)(e),composerVisible:(Object(lt.a)(e)||"composer_toolbar"===Object(Xt.c)(e,"composer_toolbar"))&&Object(Dp.b)(e),impressionLoggingWebGroup:Object(Xt.c)(e,"impression_logging_web")}},zm,null,{withRef:!0})(Ym),Xm=n("Yk7g"),Jm=n("1myf"),Zm=n("pHS2"),$m=n("dYt1");function eh(e){var t=ih(e),n=t.publicChannels,a=t.privateChannels,r=t.ims,i=t.mpims;return function(e){var t=function(e){var t=Object(Zm.a)(e,function(e){return e.unreadHighlightCnt>0}),n=t.true||[],a=t.false||[];return{hasMentions:n,noMentions:a}}(e),n=t.hasMentions,a=t.noMentions;return ah(n).concat(ah(a))}(n.concat(a)).concat(ah(r)).concat(ah(i))}function th(e){var t=ih(e),n=t.publicChannels,a=t.privateChannels,r=t.ims,i=t.mpims,o=nh(n.concat(a)),s=nh(r),l=nh(i);return o.concat(s).concat(l)}function nh(e){return Object($m.a)(e).sort(function(e,t){return Object(B.q)(e.displayName,t.displayName)})}function ah(e){return Object($m.a)(e).sort(function(e,t){return e.priority===t.priority?Object(B.q)(e.displayName,t.displayName):t.priority-e.priority})}function rh(e){var t=Object(Zm.a)(e,"isStarred");return{starred:t.true||[],notStarred:t.false||[]}}function ih(e){var t=Object(Zm.a)(e,"channelType");return{publicChannels:t.channel||[],privateChannels:t.private||[],ims:t.im||[],mpims:t.mpim||[]}}var oh=function(e){var t=e.channels,n=e.allUnreadsSortOrder,a=e.currentUserId;return"oldest"===n?function(e,t){var n=Object(It.a)(function(e){var n=e.lastRead,a=e.messages,r=e.oldestSliceTimestamps,i=e.createdTime,o=!1,s=Object(Dd.a)(r,function(e){if(e<=n)return!1;var r=a[e];return r?Object(et.kb)(r,n,t):(o=!0,!1)});return s&&!o?s:"0000000000.000000"===n?i+".000000":n});return Object(Jm.a)(e,n)}(t,a):"priority"===n?function(e){var t=rh(e),n=t.starred,a=t.notStarred;return eh(n).concat(eh(a))}(t):"newest"===n?function(e){return Object(Xm.a)(Object(Jm.a)(e,"latest"))}(t):function(e){var t=rh(e),n=t.starred,a=t.notStarred;return th(n).concat(th(a))}(t)},sh=(h.b.number.isRequired,h.b.func.isRequired,h.b.func.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["refreshFromKeyPress"]),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.setNewUnreadMsgCount(this.props.newUnreadMsgCount)}},{key:"componentDidUpdate",value:function(e){e.newUnreadMsgCount!==this.props.newUnreadMsgCount&&this.props.setNewUnreadMsgCount(this.props.newUnreadMsgCount)}},{key:"componentWillUnmount",value:function(){this.props.setNewUnreadMsgCount(0)}},{key:"refreshFromKeyPress",value:function(){this.props.newUnreadMsgCount>0&&this.props.refreshAllUnreads()}},{key:"render",value:function(){return null}}]),t}(p.Component));sh.displayName="NewMessagesUpdater";var lh=Object(g.b)(function(e,t){var n=t.frames.map(function(e){return e.channelId}),a=Rd(e).countsPerChannel,r=Object(aa.a)(a,function(e,t){return!n.includes(t)});return{newUnreadMsgCount:Object(cs.a)(Object(ft.a)(r,"unreadCnt"))}})(sh),ch=(n("oq3d"),new B.b("all_unreads")),uh="UNREADS-VIEW",dh={channels:h.b.arrayOf(h.b.shape({id:h.b.string.isRequired,lastRead:h.b.string.isRequired,latest:h.b.string.isRequired,displayName:h.b.string.isRequired,channelType:h.b.string.isRequired,isStarred:h.b.bool.isRequired,priority:h.b.number.isRequired,unreadHighlightCnt:h.b.number.isRequired,messages:h.b.object.isRequired,oldestSliceTimestamps:h.b.arrayOf(h.b.string).isRequired,createdTime:h.b.number.isRequired})).isRequired,logger:h.b.object.isRequired,clogger:h.b.object,allUnreadsSortOrder:h.b.string.isRequired,currentUserId:h.b.string.isRequired,refreshId:h.b.number.isRequired,totalUnreadCount:h.b.number.isRequired,unreadChannelsAreKnown:h.b.bool.isRequired,featureOfflineMode:h.b.bool.isRequired,isOffline:h.b.bool.isRequired,clientTheme:h.b.oneOf(["light","dark"]),markLastRead:h.b.func.isRequired,setNewUnreadMsgCount:h.b.func.isRequired},ph={clogger:{track:d.a,error:d.a},clientTheme:"light"},mh=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["showNewerMessages","markChannelLastRead","markAllRead","undoMarkAllRead","refreshAllUnreads","removeFrames","clogUnreadsEvent"]),n.state=n.computeInitialState(),n.unreadsEventSeqId=0,n.initializedTime=Date.now(),n.listRef=m.a.createRef(),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.clogUnreadsEvent({event:"UNREADS_OPEN",metadata:{}}),this.incrementTrackingSeqId()}},{key:"componentDidUpdate",value:function(e){(e.allUnreadsSortOrder!==this.props.allUnreadsSortOrder||e.refreshId<this.props.refreshId||!e.unreadChannelsAreKnown&&this.props.unreadChannelsAreKnown)&&this.refreshAllUnreads()}},{key:"componentDidCatch",value:function(e){this.setState(function(){return{errored:!0}}),this.props.logger.error("Unreads view componentDidCatch","unreads_view_did_catch",e)}},{key:"componentWillUnmount",value:function(){var e={unreads_event_seq_id:this.unreadsEventSeqId,unreads_elapsed_time:Date.now()-this.initializedTime};this.clogUnreadsEvent({event:"UNREADS_CLOSE",metadata:e})}},{key:"incrementTrackingSeqId",value:function(){this.unreadsEventSeqId+=1}},{key:"clogUnreadsEvent",value:function(e){var t=e.event,n=e.metadata;this.props.clogger.track(t,ye()({is_unreads_view:1},n))}},{key:"computeInitialState",value:function(){var e=this.props,t=e.channels,n=e.allUnreadsSortOrder,a=e.currentUserId;return{frames:oh({channels:t,allUnreadsSortOrder:n,currentUserId:a}).map(function(e){var t=e.id,n=e.lastRead;return{channelId:t,start:n,end:e.latest,initialLastRead:n,markedMsgCount:0,channelType:e.channelType||""}}),markedChannels:[],errored:!1}}},{key:"showNewerMessages",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.setState(function(a){return{frames:a.frames.map(function(a){return a.channelId!==e?a:ye()({},a,{initialLastRead:n||a.initialLastRead,start:n||a.start,end:t})})}})}},{key:"markChannelLastRead",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.props.logger.info("Marking "+e+" to "+t),this.props.markLastRead({id:e,ts:t,immediate:!0,reason:"unreads-view/markChannelLastRead"}),this.setState(function(a){return{frames:a.frames.map(function(a){return a.channelId!==e?a:ye()({},a,{start:t,markedMsgCount:n})}),markedChannels:[e]}})}},{key:"markAllRead",value:function(e){this.props.logger.info("Marking all: "+JSON.stringify(e)),this.props.markManyLastRead({markers:e,reason:"unreads-view/markAllRead"});var t={unread_count:this.props.totalUnreadCount};this.clogUnreadsEvent({event:"UNREADS_MARK_ALL_AS_READ",metadata:t}),this.setState(function(t){var n=t.frames.map(function(e){return ye()({},e,{start:e.end})});return ye()({},t,{frames:n,markedChannels:Object(us.a)(e)})})}},{key:"undoMarkAllRead",value:function(){this.clogUnreadsEvent({event:"UNREADS_MARK_ALL_AS_UNREAD",metadata:{}}),this.setState(function(e,t){var n=e.frames.map(function(t){return e.markedChannels.includes(t.channelId)?ye()({},t,{start:t.initialLastRead}):t}),a={};return n.forEach(function(t){e.markedChannels.includes(t.channelId)&&(t.initialLastRead>=t.end||(a[t.channelId]=t.initialLastRead))}),t.logger.info("Undoing mark all: "+JSON.stringify(a)),t.markManyLastRead({markers:a,reason:"unreads-view/undoMarkAllRead"}),ye()({},e,{frames:n,markedChannels:[]})})}},{key:"refreshAllUnreads",value:function(){var e=this;this.props.logger.info("Refreshing"),this.setState(function(){return e.computeInitialState()},function(){e.listRef&&e.listRef.current&&e.listRef.current.getWrappedInstance()&&e.listRef.current.getWrappedInstance().scrollToTop()}),this.props.setNewUnreadMsgCount(0)}},{key:"removeFrames",value:function(e){this.setState(function(t){return ye()({},t,{frames:t.frames.filter(function(t){return!e.includes(t.channelId)})})})}},{key:"renderTopBanners",value:function(){return m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:"p-unreads_view__top_banners"},m.a.createElement(Cs,null),m.a.createElement(Es.a,null,m.a.createElement(Bs,null))),m.a.createElement(fd,null))}},{key:"render",value:function(){if(!this.props.unreadChannelsAreKnown){var e=this.props,t=e.featureOfflineMode,n=e.isOffline;return m.a.createElement(m.a.Fragment,null,this.renderTopBanners(),t&&n?m.a.createElement(yd,null):m.a.createElement(Ws,{clientTheme:this.props.clientTheme}))}var a=this.state,r=a.markedChannels;if(a.errored)return m.a.createElement("div",{className:"p-unreads_view"},this.renderTopBanners(),m.a.createElement(Ys,{tryAgain:this.refreshAllUnreads,"data-qa":"unreads_view_error"},ch.t("Something\u2019s fishy! Slack can\u2019t seem to load your unread messages.")," ",m.a.createElement("br",null),ch.rt("You can try again, but if the problem persists, please <a>drop us a line.</a>",null,function(e){var t=e.text;return m.a.createElement(la.a,{href:"https://slack.com/help/contact"},t)})));var i=m.a.createElement(lh,{frames:this.state.frames,setNewUnreadMsgCount:this.props.setNewUnreadMsgCount,refreshAllUnreads:this.refreshAllUnreads}),o=!this.state.frames.some(function(e){return e.start<e.end}),s=m.a.createElement(xd,{visible:o,showUndo:!Object(ls.a)(r),undoMarkAllRead:this.undoMarkAllRead,refreshAllUnreads:this.refreshAllUnreads}),l=m.a.createElement(Qs.a,{id:Ca.H.UNREAD_VIEW},m.a.createElement("div",{className:"p-unreads_view"},m.a.createElement(Qm,{ref:this.listRef,frames:this.state.frames,showNewerMessages:this.showNewerMessages,markChannelLastRead:this.markChannelLastRead,markAllRead:this.markAllRead,removeFrames:this.removeFrames,totalUnreadCount:this.props.totalUnreadCount,clogLinkClick:this.clogUnreadsEvent})));return m.a.createElement(p.Fragment,null,this.renderTopBanners(),s,!o&&l,!o&&i)}}]),t}(kd.a);mh.displayName="UnreadsView",mh.propTypes=dh,mh.defaultProps=ph;var hh={markLastRead:function(){return bs.a.apply(void 0,arguments)},markManyLastRead:function(){return bs.b.apply(void 0,arguments)},setNewUnreadMsgCount:function(){return hs.d.apply(void 0,arguments)}},bh=Object(g.b)(function(e){var t=Object(Ct.a)({label:uh,state:e}),n=Object(re.a)({state:e}),a=Rd(e),r=a.countsPerChannel,i=a.unreadChannelIds,o=a.unreadChannelsAreKnown,s=Object(cs.a)(Object(ft.a)(r,"unreadCnt")),l=Object(D.c)(e);return{logger:t,clogger:n,channels:i.map(function(t){return Object(G.e)(e,t)}).map(function(t){var n=Object(K.D)(t),a=Object($e.h)(e,t.id),i=Object(K.F)(t,a.timestamps);i&&"0000000000.000000"!==i||(i=Math.floor(Date.now()/1e3)+".000000");var o=Object($e.h)(e,t.id,n),s=Object(Ze.b)(e,t.id)||{};return{id:t.id,lastRead:n,latest:i,displayName:Object(K.x)(e,t,{publicChannelIncludeHashSign:!1,imIncludeAtSign:!1}),channelType:Object(K.v)(t),isStarred:Object(K.Ib)(t)||!1,priority:Object(K.P)(t)||0,unreadHighlightCnt:r[t.id].unreadHighlightCnt||0,messages:s,oldestSliceTimestamps:o&&o.timestamps||[],createdTime:Object(K.q)(t)}}),clientTheme:l,allUnreadsSortOrder:gs(e),currentUserId:Object(y.c)(e),refreshId:ps(e),totalUnreadCount:s,unreadChannelsAreKnown:o,featureOfflineMode:Object(y.m)(e,"feature_offline_mode"),isOffline:!Object(Qt.c)(e)}},hh)(mh),fh=n("llxT"),gh=new B.b("all_unreads"),_h=(h.b.number,h.b.func,{newUnreadMsgCount:0,incrementRefreshId:d.a}),vh=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.refreshMessages=n.refreshMessages.bind(n),n}return u()(t,e),o()(t,[{key:"refreshMessages",value:function(){this.props.incrementRefreshId()}},{key:"render",value:function(){var e=this.props.newUnreadMsgCount;if(e<1)return null;var t=gh.t("{newUnreadMsgCount, plural, =1 {# new message} other {# new messages}}",{newUnreadMsgCount:e});return m.a.createElement("div",{className:"p-classic_nav__channel_header__refresh_button"},m.a.createElement(_e.d,{type:"outline",onClick:this.refreshMessages},m.a.createElement(ta.b,{inline:!0,size:"inherit",type:"sync",className:"p-classic_nav__channel_header__refresh_button_icon"}),t))}}]),t}(p.Component);vh.displayName="RefreshUnreadMessagesButton",vh.defaultProps=_h;var yh={incrementRefreshId:function(){return hs.a.apply(void 0,arguments)}},kh=Object(g.b)(function(e){return{newUnreadMsgCount:ds(e)}},yh)(vh),Oh=(h.b.oneOf(["main","name","info"]).isRequired,h.b.string,h.b.bool,{className:void 0,flex:!1});function Ch(e){var t=e.regionId,n=e.className,a=e.flex,r=Ep()(e,["regionId","className","flex"]);if(Object(ae.a)())return null;var i=f()(n,{"p-classic_nav__page_header__legacy_drag_region":!0,flex_one:a,channel_header_drag_region:!0});return m.a.createElement("div",ye()({},r,{className:i,"data-region":t}))}Ch.displayName="LegacyPageHeaderDragRegion",Ch.defaultProps=Oh;var Eh=Ch,jh=(n("tFl5"),new B.b("all_unreads")),Sh=(h.b.string,h.b.string.isRequired,h.b.bool.isRequired,h.b.func.isRequired,{className:void 0}),Ih=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderMenu=n.renderMenu.bind(n),n}return u()(t,e),o()(t,[{key:"onSortSelected",value:function(e){this.props.setUserPrefByApi({pref:"all_unreads_sort_order",value:e})}},{key:"renderMenu",value:function(e){var t=this,n=this.props.teamIsPaid,a=[{value:"alphabetical",label:jh.t("Alphabetically")},{value:"priority",label:jh.t("Scientifically")},{value:"newest",label:jh.t("Newest")},{value:"oldest",label:jh.t("Oldest")}],r=jh.t("Sort...");return m.a.createElement(na.f,e,m.a.createElement(na.c,{label:r}),a.map(function(e){return function(e,a){return n||"priority"!==e?m.a.createElement(na.b,{key:e,label:a,onSelected:function(){return t.onSortSelected(e)}}):null}(e.value,e.label)}))}},{key:"renderSortingMenuTrigger",value:function(){var e=this.props.allUnreadsSortOrder,t="";return t="alphabetical"===e?jh.t("Sorted alphabetically"):"priority"===e?jh.t("Sorted scientifically"):"newest"===e?jh.t("Sorted by newest channel"):jh.t("Sorted by oldest channel"),m.a.createElement("div",{className:"p-classic_nav__channel_header__subtitle"},m.a.createElement(na.e,{renderMenu:this.renderMenu,position:"bottom-left"},m.a.createElement(fh.a,null,m.a.createElement("span",null,t),m.a.createElement(ta.b,{type:"chevron-down",className:"align_top"}))))}},{key:"render",value:function(){var e=this.props.className,t=f()("p-classic_nav__channel_header__title","p-classic_nav__no_drag"),n=f()(e,{"p-classic_nav__channel_header__all_unreads_wrapper":!Object(ae.a)()}),a=jh.t("All Unreads options",{fallbackHash:"2c3cef6f55bd97dda9e8fe6290c4e4a9f285409c",note:"Label for the Channel Header as a section. Not visible on screen as it is only for customers using screen readers."});return m.a.createElement("div",{className:n,role:"group","aria-label":a},m.a.createElement("div",{className:"p-classic_nav__channel_header__title_section"},m.a.createElement("div",{"aria-hidden":"true",className:t},jh.t("All Unreads")),this.renderSortingMenuTrigger()),m.a.createElement(Eh,{flex:!0,regionId:"main"}),m.a.createElement(kh,null))}}]),t}(p.Component);Ih.displayName="AllUnreadsHeader",Ih.defaultProps=Sh;var wh={setUserPrefByApi:function(){return Tn.f.apply(void 0,arguments)}},Nh=Object(g.b)(function(e){return{allUnreadsSortOrder:gs(e),teamIsPaid:Object(De.D)(Object(we.d)(e))}},wh)(Ih),Th=n("+uGN"),Ah=new B.b("drafts"),Rh=(h.b.string,h.b.bool,h.b.number,{className:void 0,featureComposeFlow:!1,numDrafts:0});function Ph(e){var t=e.className,n=e.featureComposeFlow,a=e.numDrafts;return n?m.a.createElement("div",{className:t},m.a.createElement("div",{className:"p-classic_nav__channel_header__title_section"},m.a.createElement("div",{className:"p-classic_nav__channel_header__title p-classic_nav__no_drag"},Ah.t("Drafts"))),m.a.createElement("div",{className:"p-classic_nav__channel_header__subtitle"},Ah.t("{count, plural, =0 {No drafts} =1 {# draft} other {# drafts}}",{count:a}))):null}Ph.displayName="DraftsHeader",Ph.defaultProps=Rh;var Mh=Object(g.b)(function(e){return{featureComposeFlow:Object(T.g)(e),numDrafts:Object(Th.j)(e)}})(Ph),xh=n("DodW"),Fh=n("KkNX"),Lh=(n("CSrb"),new B.b("welcome_place")),Dh=function(e){function t(){r()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.isDismissClicked=!1,e.clickDismiss=function(){e.isDismissClicked=!0,e.props.dismissWelcomePlace(),e.props.closeModal(),e.props.clogger.track("WELCOME_PLACE",{contexts:{ui_context:{action:le.UiAction.CLICK,ui_element:le.UiElement.WELCOME_PLACE_DISMISS_MODAL_SUBMIT,ui_properties:{element_type:le.ElementType.BUTTON}},welcome_place:{welcome_session_id:e.getWelcomeSessionId()}}})},e.hideModal=function(){e.props.closeModal(),e.isDismissClicked||e.props.clogger.track("WELCOME_PLACE",{contexts:{ui_context:{action:le.UiAction.CLICK,ui_element:le.UiElement.WELCOME_PLACE_DISMISS_MODAL_HIDE},welcome_place:{welcome_session_id:e.getWelcomeSessionId()}}})},e}return u()(t,e),o()(t,[{key:"getWelcomeSessionId",value:function(){return this.props.isOnWelcomePlacePage?this.props.pageViewingSessionId:null}},{key:"render",value:function(){return m.a.createElement(xh.a,{title:Lh.t("Remove the Get Started page?"),submitButtonText:Lh.t("Remove",{note:"Primary call-to-action (button copy) on the \u201cRemove the Get Started page\u201d dialog. Implied direct object is the \u201cGet Started page.\u201d"}),cancelButtonText:Lh.t("Cancel",{note:"Secondary call-to-action (button copy) that allows the user to close the modal."}),submitButtonType:"primary",onSubmit:this.clickDismiss,onCancel:this.hideModal,onClose:this.props.closeModal},m.a.createElement("div",{className:"welcome-place-dismiss-dialog__body"},Lh.rt("If you're all set, you can remove this page permanently. If you need help later, head to our <a1>Help Center</a1>, or reach out to us at <a2>feedback@slack.com</a2>.",{note:"Body copy of the \u201cRemove the Get Started page\u201d dialog. Explains permanence of the primary action and provides alternate paths for help (Help Center link and clickable email address to support team)."},function(e){var t=e.tag,n=e.text;return"a1"===t?m.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://get.slack.help/hc/"+Object(B.r)()},n):"a2"===t?m.a.createElement("a",{href:"mailto:feedback@slack.com"},n):null})))}}]),t}(p.Component);Dh.displayName="DismissWelcomePlaceDialog";var Uh={closeModal:tn.a,dismissWelcomePlace:oe.c},Bh=Object(g.b)(function(e){return{clogger:Object(re.a)({state:e}),pageViewingSessionId:Object(ie.i)(e),isOnWelcomePlacePage:Object(Fh.a)(e)}},Uh)(Dh),qh=(n("9pzU"),new B.b("welcome_place")),Hh=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props.className,t=qh.t("Get Started",{note:"The label for the Welcome place, both for the title of the page in the header and for the sidebar affordance. Conveys the purpose of the page (a place with learning/action modules to help you start using Slack)."}),n=qh.t("A few essential steps to help you get going with Slack",{note:"The subtitle for the page that lets the reader know the purpose and what to expect from the page contents. Note: there should be no punctuation at the end."});return m.a.createElement("div",{className:f()(e,"welcome-place-page-header")},m.a.createElement("div",{className:"p-classic_nav__channel_header__title"},t),m.a.createElement("div",{className:"p-classic_nav__channel_header__subtitle overflow_ellipsis"},n))}}]),t}(p.Component);Hh.displayName="WelcomePlacePageHeader";var Wh,Gh=Object(g.b)(function(){return{}})(Hh),Kh=n("9oTK"),Vh=Object(gt.b)("Completes joiner onboarding",(Wh=Object(Kh.method)(function(e){e(Object($t.b)(!1)),e(Object($t.c)(!1)),e(Object(Tn.e)({onboarding_complete:!0,seen_welcome_2:!0}))}),function(e){return Wh.apply(this,arguments)}));Vh.meta={name:"completeJoinerOnboarding",key:"onboardingStoreThunksCompleteJoinerOnboardingCompleteJoinerOnboarding",description:"Completes joiner onboarding"};n("9Oym");var zh=new B.b("welcome_place"),Yh=function(e){function t(){r()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.onClickCoachmark=function(t){t&&t.stopPropagation&&t.stopPropagation(),e.props.dismissSidebarCoachmark()},e}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.startWorkflow,n=e.isOnboarding,a=e.completeOnboarding;t(),n&&a()}},{key:"render",value:function(){var e=this.props,t=e.name,n=e.progress,a=n.total,r=n.completed,i=n.nextTaskType,o=e.isCoachmarkVisible,s=e.isInTreatment,l=e.featureNewxp2372v2,c=e.isAnimating,u=Math.round(r/a*100),d=void 0;d=0===r?l?zh.t("First:"):"":r===a-1?l?zh.t("Finally:"):"":l?zh.t("Next:"):"";var p=zh.t("All done."),h=r===a?p:(d+" "+function(e,t){var n,a=(n={},fe()(n,de.d.SendMessage,t?zh.t("Send a message"):zh.t("First: Send a message")),fe()(n,de.d.JoinChannel,t?zh.t("Join a few channels"):zh.t("Next: Join a few channels")),fe()(n,de.d.EnableNotifications,t?zh.t("Turn on notifications"):zh.t("Next: Turn on notifications")),fe()(n,de.d.DownloadDesktopApp,t?zh.t("Get the Slack app"):zh.t("Next: Get the Slack app")),fe()(n,de.d.AddAppFileManagement,t?zh.t("Connect your tools"):zh.t("Finally: Connect your tools")),n);return e?a[e]:""}(i,l)).trim(),b=l&&s?m.a.createElement(Mn.a,{isOpen:o,closeCoachmark:this.onClickCoachmark,onClickPrimaryButton:this.onClickCoachmark,qa:"welcome-place-sidebar-link-coachmark",offsetX:-20,offsetY:0,primaryCallToActionText:zh.t("Got It")},m.a.createElement("h3",{className:"margin_bottom_50"},zh.rt("<b>Welcome to Slack!</b>")),m.a.createElement("p",null,zh.rt("For tips, tricks, and a quick introduction, head on over to the <b>Get Started</b> page."))):null;return m.a.createElement("div",{className:"display_flex flex_direction_column full_width p-welcome-place__sidebar_content"},m.a.createElement(Vn.b,{coachmarkElement:b,orientation:"right"},m.a.createElement("div",{className:"margin_bottom_25 p-welcome-place__sidebar_content__title"},t)),m.a.createElement("div",{className:"p-welcome-place__sidebar_content__link_progress"},m.a.createElement("div",{className:"p-welcome-place__sidebar_content__link_progress_inner",style:{width:u+"%"}})),m.a.createElement("div",{title:h,className:"p-welcome-place__sidebar_content__link_caption overflow_ellipsis"},h||" "),m.a.createElement("div",{className:f()("p-welcome-place__sidebar_content__gradient",{"p-welcome-place__sidebar_content__gradient--animating":c})}))}}]),t}(p.Component);Yh.displayName="SidebarLinkContent";var Qh=Object(g.b)(function(e){return{progress:Object(ie.m)(e),isCoachmarkVisible:Object(ie.k)(e),featureNewxp2372v2:Object(y.m)(e,"feature_newxp2372_v2"),isInTreatment:Object(ie.q)(e),isAnimating:Object(ie.a)(e),isOnboarding:!!Object(Yt.e)(e)}},function(e){return{dismissSidebarCoachmark:function(){return e(Object(se.g)(!1))},startWorkflow:function(){return e(Object(oe.e)())},completeOnboarding:function(){e(Vh())}}})(Yh),Xh=n("za+y"),Jh=n("D6w7"),Zh=n("/MYD"),$h=n("oW4N"),eb=n("wCpp");var tb=function(e){if(Object(T.g)(e)){var t=Object(w.c)(e),n=t.entityId,a=t.draftId;return n&&Object(eb.a)(a)}},nb=n("kLJo"),ab=n("sDWr"),rb=n("jHww"),ib=Object(gt.b)("Navigate to the last known channel",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.reason,r=n.shouldReplaceState,i=void 0===r||r,o=t(),s=Object(rb.a)(o);Object(nb.g)(ab.a,{entityId:s},{reason:a,shouldReplaceState:i})});ib.meta={name:"navigateToPrevChannel",key:"actionsNavigateToPrevChannelNavigateToPrevChannel",description:"Navigate to the last known channel"},ib.propTypes={reason:h.b.string.isRequired,shouldReplaceState:h.b.bool};var ob=ib,sb=n("VBRD"),lb=n("0rID"),cb=n("lCOO");var ub=n("UF3u");function db(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.a,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Object(p.useRef)();Object(p.useEffect)(function(){Object(ub.a)(n.current,t)||(n.current=t,e())})}function pb(e,t){if(!Object(Th.l)(t))return null;var n=Object(Th.c)(t);if(n&&1===n.length)return n[0];var a=Object(Th.i)(t);if(!Object(ls.a)(a)){if(1===a.length)return Object(G.l)(e,a[0]);var r=Object(y.c)(e),i=[].concat(ti()(a),[r]),o=Object(G.n)(e,i);if(o)return o.id}return null}var mb=n("TGBA"),hb=n("UHk2"),bb=2,fb=1e4,gb=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.limit,a=void 0===n?bb:n,i=t.duration,o=void 0===i?fb:i;r()(this,e),this.historyRequests={},this.promise=null,this.requestLimit=a,this.initialDuration=o}return o()(e,[{key:"reset",value:function(){this.historyRequests={},this.promise=null}},{key:"logHistoryRequest",value:function(e){var t=e.oldest,n=e.latest,a=e.now,r=void 0===a?Date.now():a,i=e.promise,o=t+"_"+n,s=this.historyRequests[o];s||(s={count:0,time:0,duration:this.initialDuration},this.historyRequests[o]=s),i&&(s.promise=i,i.finally(function(){s.promise=null})),r-s.duration>s.time?(s.count>=this.requestLimit?s.duration=Math.min(2*s.duration,16e4):s.duration=this.initialDuration,s.count=1,s.time=r):s.count+=1}},{key:"shouldPreventHistoryRequest",value:function(e){var t=e.oldest,n=e.latest,a=e.now,r=void 0===a?Date.now():a,i=this.historyRequests[t+"_"+n];return!!i&&(!(i.count<this.requestLimit)&&!(i.time<r-i.duration))}},{key:"isRequestPending",value:function(e){var t=e.oldest,n=e.latest,a=this.historyRequests[t+"_"+n];return!!a&&(a.promise&&a.promise.isPending())}}]),e}(),_b=n("F294"),vb=(h.b.string,h.b.string,h.b.arrayOf(h.b.string).isRequired,h.b.func.isRequired,h.b.string,h.b.number,h.b.string,h.b.func,h.b.bool,h.b.bool,h.b.object,h.b.bool,h.b.func,{oldest:void 0,latest:void 0,startTs:void 0,startTsOffset:0,highlightKey:void 0,requestHistory:d.a,reachedStart:!0,reachedEnd:!0,layout:void 0,isFileExpanding:!1,onVisibleRowsChanged:d.a}),yb=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onScroll=n.onScroll.bind(n),n.setListRef=n.setListRef.bind(n),n.loadAround=n.loadAround.bind(n),n.loadPre=n.loadPre.bind(n),n.loadPost=n.loadPost.bind(n),n.focus=n.focus.bind(n),n.onListScrolled=n.onListScrolled.bind(n),n.debouncedOnListScrolled=Object(ap.a)(n.onListScrolled,150),n.list=null,n.layout=e.layout||new di.a,n.layout.setAnchor(e.startTs||!1),e.startTsOffset&&(n.layout.anchorOffset=e.startTsOffset),n.layout.setStickToBottom(e.reachedEnd),n.state={isLoading:!1},n}return u()(t,e),o()(t,[{key:"componentDidUpdate",value:function(e){!e.reachedEnd&&this.props.reachedEnd&&this.layout.setAnchor(!1),!!e.isFileExpanding&&!this.props.isFileExpanding?this.layout.setStickToBottom(!1):this.layout.setStickToBottom(this.props.reachedEnd),this.updateVisibleRows()}},{key:"onListScrolled",value:function(){this.updateVisibleRows()}},{key:"onScroll",value:function(){this.layout.setAnchor(!1),this.debouncedOnListScrolled()}},{key:"getScrollmark",value:function(){if(!this.list)return null;var e=this.list.getScrollTop(),t=this.layout.shouldStickToBottom(e),n=this.props.timestamps,a=this.layout.findAnchor(n,n,e);return{mark:a,offset:this.layout.getTop(a)-e,stickToBottom:t}}},{key:"setListRef",value:function(e){this.list=e}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){if(!this.list)throw new Error("MessageList needs a ref to List");(e.startTs!==this.props.startTs||e.highlightKey&&e.highlightKey!==this.props.highlightKey)&&(e.timestamps===this.props.timestamps?this.list.scrollToKey(e.startTs,{lazy:!0}):this.layout.setAnchor(e.startTs))}},{key:"focus",value:function(){this.list&&this.list.focus()}},{key:"loadAround",value:function(){var e=this;if(this.state.isLoading)return!1;var t=this.props,n=t.oldest,a=t.latest,r=t.reachedStart,i=t.reachedEnd,o=t.timestamps,s=t.startTs;if(i)return this.loadPre();if(r)return this.loadPost();var l=a||Object(_b.a)(o)||s,c=n||Object(Ud.a)(o)||s,u=this.props.requestHistory({latest:l,oldest:c});return u&&(u.finally(function(){return Promise.delay(250)}).then(function(){return e.setState(function(){return{isLoading:!1}})}),this.setState(function(){return{isLoading:"around"}})),u}},{key:"loadPost",value:function(){var e=this;if(this.state.isLoading)return!1;var t=this.props,n=t.latest,a=t.reachedEnd,r=t.timestamps,i=t.startTs;if(a)return!1;this.isLoading=!0;var o=n||Object(Ud.a)(r)||i,s=this.props.requestHistory({oldest:o});return s&&(s.finally(function(){return Promise.delay(250)}).then(function(){return e.setState(function(){return{isLoading:!1}})}),this.setState(function(){return{isLoading:"pre"}})),s}},{key:"loadPre",value:function(){var e=this;if(this.state.isLoading)return!1;var t=this.props,n=t.oldest,a=t.reachedStart,r=t.timestamps,i=t.startTs;if(a)return!1;var o=n||Object(_b.a)(r)||i,s=this.props.requestHistory({latest:o});return s&&(s.finally(function(){return Promise.delay(250)}).then(function(){return e.setState(function(){return{isLoading:!1}})}),this.setState(function(){return{isLoading:"pre"}})),s}},{key:"updateVisibleRows",value:function(){if(this.list){var e=this.list.getVisibleRange(void 0,!1),t=e.start,n=e.end,a=this.list.getVisibleRange(void 0,!0),r=a.start,i=a.end;this.props.onVisibleRowsChanged(this.props.timestamps.slice(t,n),this.props.timestamps.slice(r,i))}}},{key:"render",value:function(){var e=this.props,t=e.reachedStart,n=e.reachedEnd,a=e.timestamps;return this.props.listRenderer({reachedStart:t,reachedEnd:n,keys:a,layout:this.layout,onScroll:this.onScroll,loadAround:this.loadAround,loadPre:this.loadPre,loadPost:this.loadPost,ref:this.setListRef})}}]),t}(p.PureComponent);yb.displayName="MessageList";var kb=yb;yb.defaultProps=vb;h.b.bool,h.b.bool;function Ob(e){var t=e.featureOfflineMode,n=e.isOffline;return t&&n?m.a.createElement(Lp,null):m.a.createElement("div",{className:"c-message_list__spinner"},m.a.createElement(ci.a,{size:"jumbo"}))}Ob.displayName="MessageListEmptyLoader",Ob.defaultProps={featureOfflineMode:!1,isOffline:!1};var Cb=Object(g.b)(function(e){return{featureOfflineMode:Object(y.m)(e,"feature_offline_mode"),isOffline:!Object(Qt.c)(e)}})(Ob);h.b.oneOf(["light","dark"]),h.b.bool,h.b.bool,h.b.oneOf(["dense","light"]);function Eb(e){var t=e.clientTheme,n=e.featureOfflineMode,a=e.isOffline,r=e.theme;return n&&a?m.a.createElement(Lp,null):m.a.createElement("div",{className:f()("c-message_list__placeholders","c-message_list__placeholders--"+r,"c-message_list__placeholders--client-theme-"+t,{"c-message_list__placeholders--legacy":!Object(ae.a)()})})}Eb.displayName="MessageListInlineLoader",Eb.defaultProps={clientTheme:"light",featureOfflineMode:!1,isOffline:!1,theme:"light"};var jb=Object(g.b)(function(e){return{clientTheme:Object(D.c)(e),featureOfflineMode:Object(y.m)(e,"feature_offline_mode"),isOffline:!Object(Qt.c)(e),theme:Object(Bd.a)(e)}})(Eb),Sb=n("TSHB"),Ib=n("vJtL"),wb=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Ib.a)(e.shouldExcludeFirstItemFromGravity)&&(n.shouldExcludeFirstItemFromGravity=e.shouldExcludeFirstItemFromGravity),n}return u()(t,e),o()(t,[{key:"layout",value:function(){if(up()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"layout",this).call(this),this.totalHeight<this.containerHeight){var e=this.containerHeight-this.totalHeight;this.tops=Object(Sb.a)(this.tops,function(t){return t+e}),this.totalHeight=this.containerHeight}this.shouldExcludeFirstItemFromGravity&&this.shouldExcludeFirstItemFromGravity()&&this.keys.length>0&&(this.tops[Object(_b.a)(this.keys)]=0)}}]),t}(di.a),Nb=Object(gt.b)("Request channel history for a given timespan",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.channelId,r=n.historyRateLimiter,i=n.oldestTs,o=n.latestTs;if(r.isRequestPending({oldest:i,latest:o}))return Promise.resolve();if(r.shouldPreventHistoryRequest({oldest:i,latest:o}))return Object(Ct.a)({getState:t}).error({channelId:a,latestTs:o,oldestTs:i},"composer_request_rate_limited"),Promise.resolve();var s=e(Ht({oldest:i,latest:o,channelId:a,reason:"composer-context"}));return s?(r.logHistoryRequest({oldest:i,latest:o,promise:s}),s):Promise.resolve()});Nb.meta={name:"fetchChannelHistory",key:"componentsComposerPageUtilityFetchChannelHistoryFetchChannelHistory",description:"Request channel history for a given timespan"},Nb.propTypes={channelId:h.b.string.isRequired,historyRateLimiter:h.b.shape({isRequestPending:h.b.func.isRequired,logHistoryRequest:h.b.func.isRequired,shouldPreventHistoryRequest:h.b.func.isRequired}).isRequired,latestTs:h.b.string,oldestTs:h.b.string};var Tb=Nb;var Ab=Op(Am),Rb={dispatch:h.b.func,isLoading:h.b.bool,messages:h.b.array,reachedEnd:h.b.bool,reachedStart:h.b.bool,renderFooter:h.b.func,theme:h.b.oneOf(["dense","light"]).isRequired,viewId:h.b.string.isRequired},Pb={dispatch:d.a,isLoading:!1,messages:[],reachedStart:!1,reachedEnd:!1,renderFooter:void 0},Mb=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.requestHistory=n.requestHistory.bind(n),n.renderList=n.renderList.bind(n),n.renderRow=n.renderRow.bind(n),n.historyRateLimiter=new gb,n.layout=new wb({shouldExcludeFirstItemFromGravity:!1,stickToBottom:!0}),n}return u()(t,e),o()(t,[{key:"componentDidUpdate",value:function(e){this.props.channelId!==e.channelId&&(this.historyRateLimiter.reset(),this.layout.heightCache&&this.layout.heightCache.invalidate&&this.layout.heightCache.invalidate())}},{key:"requestHistory",value:function(e){var t=e.oldest,n=e.latest,a=this.props,r=a.channelId;(0,a.dispatch)(Tb({channelId:r,historyRateLimiter:this.historyRateLimiter,latestTs:n,oldestTs:t}))}},{key:"renderRow",value:function(e){var t=this.props,n=t.channelId,a=t.renderFooter,r=t.theme,i=this.rows[e];if(!i)return null;switch(i.type){case"message":return m.a.createElement(Ab,{channelId:n,ts:i.ts,prevTs:i.prevTs,theme:r});case"day_divider":return m.a.createElement("div",{className:"p-composer_page__context_list_divider"},m.a.createElement(Pp,{date:i.dayTs}),m.a.createElement(Rp,{date:i.dayTs}));case"loading_empty":return m.a.createElement(Cb,null);case"loading_inline":return m.a.createElement(jb,null);case"footer":return a();default:return null}}},{key:"renderList",value:function(e){var t=this,n=this.props,a=n.isLoading,r=n.messages,i=n.reachedEnd,o=n.reachedStart,s=n.renderFooter,l=n.viewId,c=ui.a,u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isLoading,n=e.messages,a=[],r=[],i=Object(aa.a)(n,function(e){return!Object(et.fb)(e)&&!Object(et.sb)(e)});if(Object(ls.a)(i))t&&(a.push("loading_empty"),r.push({type:"loading_empty"}));else{if(t){var o=Object(et.Q)(i[0]);a.push("loading_inline-"+o),r.push({type:"loading_inline"})}i.forEach(function(e,t){var n=Object(et.Q)(i[t-1]),o=Object(et.Q)(e),s=Yd(n),l=Yd(o);s!==l&&(a.push("day_divider-"+l+"-"+o),r.push({type:"day_divider",dayTs:Number(l)})),a.push(o),r.push({type:"message",ts:o,prevTs:n})})}return{rows:r,keys:a}}({isLoading:a,messages:r}),d=u.rows,p=u.keys;return this.rows=d,this.keys=p,s&&(this.keys.push("footer"),this.rows.push({type:"footer"})),m.a.createElement(sb.a,null,function(n){var a=n.measureRef,r=n.width,s=n.height;return m.a.createElement("div",{className:"p-composer_page__context_list_wrapper",ref:a},m.a.createElement(c,ye()({},e,{height:s,id:l+"-list",keys:p,reachedEnd:i,reachedStart:o,rowRenderer:t.renderRow,width:r})))})}},{key:"render",value:function(){var e=this.props,t=e.latest,n=e.messages,a=e.oldest,r=e.reachedEnd,i=e.reachedStart,o=e.renderFooter,s=e.viewId;if(i&&r&&Object(ls.a)(n)&&!o)return null;var l=Object(ft.a)(n,et.Q);return m.a.createElement(Qs.a,{id:s},m.a.createElement("div",{className:"p-composer_page__context"},m.a.createElement(kb,{latest:t,layout:this.layout,listRenderer:this.renderList,oldest:a,reachedEnd:r,reachedStart:i,requestHistory:this.requestHistory,startTs:Object(Ud.a)(l),timestamps:l})))}}]),t}(hb.a);Mb.displayName="ComposerContext",Mb.propTypes=Rb,Mb.defaultProps=Pb;var xb=Object(g.b)(function(e,t){var n=t.channelId,a=Object($e.f)(e,n)||{},r=a.end,i=a.prevReachedEnd,o=a.reachedEnd,s=a.reachedStart,l=a.start,c=a.timestamps,u=Object(Ze.c)(e,n,c);return{isLoading:Object(yt.d)(e,n),latest:r,messages:Object(mb.a)(u),oldest:l,prevReachedEnd:i,reachedEnd:o,reachedStart:s,theme:Object(Bd.a)(e)}})(Mb),Fb=n("WD4z"),Lb=n("hUMe"),Db=n("HiDb"),Ub=n("1zbP"),Bb=n("Qrgz");var qb=new B.b("drafts"),Hb=(h.b.object,h.b.string,h.b.bool,{alertData:void 0,alertType:void 0,featureComposeFlow:!1});function Wb(e){var t=e.alertData,n=e.alertType;if(!e.featureComposeFlow)return null;if(!n)return null;var a=void 0,r=void 0;if("too_many_channels"===n)a="error",r=qb.t("Too many channels");else if("invalid_channel"===n)a="error",r=qb.t("Cannot send message to this channel");else if("too_many_members"===n)a="error",r=qb.t("Direct messages can\u2019t have more than {maxMembers} people.",{maxMembers:Ca.D});else if("deactivated_member"===n)a="error",r=qb.t("This account has been deactivated.");else if("deactivated_members"===n)a="error",r=qb.t("These accounts have been deactivated.");else if("max_members"===n)a="warning",r=qb.t("Direct messages can\u2019t have more than {maxMembers} people.",{maxMembers:Ca.D});else if("pending_shared_channels"===n){a="warning";var i=t.pendingSharedTeamIds.map(function(e){return m.a.createElement(Lb.a,{id:e})});r=qb.rt("<strong>This channel will soon be shared with {teams}.</strong> Messages and files sent here will be seen by members of both organizations.",{teams:Object(B.j)(i,{react:!0})})}else if("shared_channels"===n){a="warning";var o=t.sharedTeamIds.map(function(e){return m.a.createElement(Lb.a,{id:e})});r=qb.rt("<strong>This is a shared channel.</strong> Messages and files sent here will also be seen by members of {teams}.",{teams:Object(B.j)(o,{react:!0})})}else"unjoined_channels"===n&&(a="warning",r=qb.t("You\u2019ll join this channel when you send this message."));return m.a.createElement(Fb.a,{className:"p-composer_page__destination_alert",level:a,type:"inline"},r)}Wb.displayName="ComposerDestinationAlert",Wb.defaultProps=Hb;var Gb=Object(g.b)(function(e,t){var n=function(e,t){var n=Object(Th.r)(e,t,{canPostInChannel:Bb.p});if(!n.ok){if(n.reasons.invalidChannelCount)return{type:"too_many_channels"};if(n.reasons.invalidChannel)return{type:"invalid_channel"};if(n.reasons.invalidMemberCount)return{type:"too_many_members"};if(n.reasons.deactivatedMember)return{type:"deactivated_member"};if(n.reasons.deactivatedMembers)return{type:"deactivated_members"}}var a=Object(Th.i)(t),r=Object(y.c)(e),i=Object(Jd.a)(a,r);if(!Object(ls.a)(i)&&i.length===Ca.D)return{type:"max_members"};var o=[],s=[],l=[],c=Object(Th.c)(t);if(Object(qp.a)(c,function(t){var n=Object(G.e)(e,t);Object(Ub.b)(n)&&(Object(K.yb)(n)?o.push(n):Object(K.ab)(n)&&s.push(n),Object(K.nb)(n)||l.push(n))}),o.length||s.length){var u=[].concat(o,s),d=Object(Db.a)(u,function(t){return Object(K.N)(e,t)});return o.length?{type:"pending_shared_channels",data:{pendingSharedTeamIds:d}}:{type:"shared_channels",data:{sharedTeamIds:d}}}return l.length?{type:"unjoined_channels"}:{}}(e,t.draft);return{alertData:n.data,alertType:n.type}})(Wb);Gb.propTypes={draft:h.b.object.isRequired};var Kb=Gb,Vb=n("20gP"),zb=n("FHcd"),Yb=Object(gt.b)("Split destination ids into channels and members",function(e,t,n){var a=n.ids,r=t(),i=Object(y.c)(r),o=[],s=[];return Object(qp.a)(a,function(e){if(Object(_a.a)(e)){var t=Object(G.e)(r,e);if(Object(K.pb)(t)){var n=Object(K.I)(t),a=Object(Jd.a)(n,i);s.push.apply(s,ti()(a))}else o.push(e)}else if(Object(zb.a)(e))s.push(e);else{Object(Ct.a)({state:r}).warn("COMPOSER",'Unhandled selected id "'+e+'"')}}),Promise.resolve({channelIds:o,memberIds:s})});Yb.meta={name:"categorizeDestinationIds",key:"componentsComposerPageUtilityCategorizeDestinationIdsCategorizeDestinationIds",description:"Split destination ids into channels and members"},Yb.propTypes={ids:h.b.arrayOf(h.b.string.isRequired)};var Qb=Yb;function Xb(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).canPostInChannel,a=Object(Th.r)(e,t,{canPostInChannel:n}).reasons;return!!(a.invalidChannelCount||a.invalidChannel||a.invalidMembers)}var Jb=n("TegG"),Zb=n("oiAH"),$b=n("Zhly");h.b.string.isRequired,h.b.object.isRequired;var ef=Object(g.b)(function(e,t){var n=t.id,a=void 0;return Object(_a.a)(n)?a=Object(G.e)(e,n):Object(zb.a)(n)&&(a=Object(xo.d)(e,n)),{model:a}})(function(e){var t=e.id,n=e.model;return Object(_a.a)(t)?Object(K.pb)(n)?m.a.createElement(Zb.a,{id:t}):m.a.createElement($b.a,{channelId:t}):Object(zb.a)(t)?m.a.createElement(Jb.a,{id:t}):null}),tf=new B.b("drafts"),nf=(h.b.func,h.b.object.isRequired,h.b.bool,h.b.object,h.b.bool,h.b.func,h.b.func,{dispatch:d.a,featureComposeFlow:!1,forwardedRef:void 0,isInvalid:!1,onChange:d.a,onSelect:d.a});function af(e){var t=e.dispatch,n=e.draft,a=e.featureComposeFlow,r=e.forwardedRef,i=e.isInvalid,o=e.onChange,s=e.onSelect;if(!n||!a)return null;var l=Object(Th.c)(n),c=Object(Th.i)(n),u=void 0;Object(ls.a)(c)?Object(ls.a)(l)||(u=l):u=c;var d=Object(ls.a)(c),p=Object(ls.a)(l);return m.a.createElement(m.a.Fragment,null,m.a.createElement(ta.b,{className:"p-composer_page__destination_select_icon",size:"inherit",type:"paper-plane"}),m.a.createElement(Vb.c,{className:"p-composer_page__destination_select",classPrefix:"p-composer_page__destination",focusOnMount:!0,inputRef:r,isInvalid:i,maxHeight:130,onKeyDown:function(e,t){var n=t.hasActiveRowIndex;"Enter"!==e.key||n||Object(ls.a)(u)||(e.preventDefault(),s())},onSelectedItemsChange:function(e){var n=Object(ft.a)(e,"value");t(Qb({ids:n})).then(function(e){var t=Object(Th.a)(e);o(t)})},placeholderText:tf.t("Select a channel or conversation"),renderOption:function(e,t){return m.a.createElement(ef,{id:e.value,isActive:t.isActive})},searcherOptions:{allowEmptyQuery:!0,entities:{channels:d&&{includePublic:!0,includePrivate:!0,includeMpims:p,includeArchived:!1,onlyVisibleMpims:!0},members:p&&{includeSelf:Object(ls.a)(c),includeSlackbot:!0,includeBots:!0,includeWorkflows:!1,includeExternal:!0,onlyLocalTeam:!1,onlyAdmins:!1,includeGuests:!0},userGroups:!1}},selectId:"composer_page__destination",selectedOptions:Object(ft.a)(u,function(e){return{label:e,value:e}}),width:"100%"}))}af.displayName="ComposerDestinationSelect",af.defaultProps=nf;var rf=Object(g.b)(function(e,t){var n=t.draft;return{featureComposeFlow:Object(T.g)(e),isInvalid:Xb(e,n,{canPostInChannel:Bb.p})}})(af),of=m.a.forwardRef(function(e,t){return m.a.createElement(rf,ye()({},e,{forwardedRef:t}))}),sf=n("hCvz"),lf=(h.b.bool,h.b.arrayOf(h.b.string.isRequired),{featureComposeFlow:!1,destinationNames:void 0});function cf(e){var t=e.destinationNames;if(!e.featureComposeFlow)return null;var n=Object(ft.a)(t,function(e){return e||m.a.createElement(sf.b,{size:sf.a.SMALL})});return m.a.createElement("span",{className:"p-composer_page__destination_recipients"},Object(B.j)(n,{noConj:!0,react:!0}))}cf.displayName="ComposerDestinationRecipients",cf.defaultProps=lf;var uf=Object(g.b)(function(e,t){var n=t.draft;return{featureComposeFlow:Object(T.g)(e),destinationNames:Object(Th.f)(e,n)}})(cf);uf.propTypes={draft:h.b.object.isRequired};var df=uf,pf=new B.b("drafts");h.b.object.isRequired,h.b.bool,h.b.bool;function mf(e){var t=e.draft,n=e.featureComposeFlow,a=e.isInvalid;return n?m.a.createElement("div",{className:f()("p-composer_page__destination_text",{"p-composer_page__destination_text--invalid":a})},pf.rt("To: {names}",{names:m.a.createElement(df,{draft:t})})):null}mf.displayName="ComposerDestinationText",mf.defaultProps={featureComposeFlow:!1,isInvalid:!1};var hf=Object(g.b)(function(e,t){var n=t.draft;return{featureComposeFlow:Object(T.g)(e),isInvalid:Xb(e,n,{canPostInChannel:Bb.p})}})(mf),bf=(h.b.func,h.b.object.isRequired,h.b.bool,h.b.object,h.b.bool,h.b.func,h.b.func,h.b.func,{dispatch:d.a,featureComposeFlow:!1,forwardedRef:void 0,isFocused:!1,onChange:d.a,onFocus:d.a,onSelect:d.a});function ff(e){var t=e.dispatch,n=e.draft,a=e.featureComposeFlow,r=e.forwardedRef,i=e.isFocused,o=e.onChange,s=e.onFocus,l=e.onSelect;return m.a.createElement("div",{className:"p-composer_page__destination"},m.a.createElement("div",{className:"p-composer_page__destination_input"},i?m.a.createElement(of,{draft:n,onChange:o,onSelect:l,ref:r}):m.a.createElement(fh.a,{className:"p-composer_page__destination_recipients_wrapper",onClick:s},m.a.createElement(hf,{draft:n})),m.a.createElement("div",{className:"p-composer_page__destination_controls"},m.a.createElement(Qp.a,{icon:"times",onClick:function(){return t(ob({reason:"composer_close"}))}}))),m.a.createElement(Kb,{draft:n,featureComposeFlow:a}))}ff.displayName="ComposerDestination",ff.defaultProps=bf;var gf=Object(g.b)(function(e){return{featureComposeFlow:Object(T.g)(e)}})(ff),_f=m.a.forwardRef(function(e,t){return m.a.createElement(gf,ye()({},e,{forwardedRef:t}))}),vf=n("eCgt"),yf=Object(gt.b)("Sends a composer message",function(){var e=Object(Kh.coroutine)(regeneratorRuntime.mark(function e(t,n){var a,r,i,o,s,l,c,u,d,p,m=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).draft;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n(),Object(Th.q)(a,m,{canPostInChannel:Bb.p})){e.next=3;break}return e.abrupt("return",Promise.reject(new Error("Composer message is not sendable. This may be due to a missing destination, missing text, or posting restrictions")));case 3:if(r=Object(lt.a)(a),i=Object(Ct.a)({state:a,label:"COMPOSER"}),o=Object(Th.c)(m),s=Object(Th.i)(m),l=m.id,c=m.ops,u=void 0,Object(ls.a)(s)){e.next=17;break}return d=void 0,1===s.length?d=s:(p=Object(y.c)(a),d=Object(Jd.a)(s,p)),e.next=14,Object(Kh.resolve)(t(Object(Fo.startMpimByMemberIds)({memberIds:d})).then(function(e){return e.id}));case 14:u=e.sent,e.next=20;break;case 17:return u=o[0],e.next=20,Object(Kh.resolve)(t(Object(ot.a)({channelId:u})));case 20:return i.info("Preparing to send a composer message to "+u),e.abrupt("return",t(Object(vf.a)({channelId:u,text:Object(ct.a)({contents:c}),delta:r?new zt.a(c):null})).then(function(){i.info("Composer message successfuly sent. Removing the draft ("+l+")"),t(Object(an.a)({ids:[l]}))}));case 22:case"end":return e.stop()}},e,void 0)}));return function(t,n,a){return e.apply(this,arguments)}}());yf.meta={name:"sendComposerMessage",key:"actionsSendMessageSendComposerMessageSendComposerMessage",description:"Sends a composer message"},yf.propTypes={draft:h.b.object.isRequired};var kf=new B.b("drafts"),Of=(h.b.arrayOf(h.b.string.isRequired),h.b.func,h.b.object.isRequired,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.func,h.b.func,h.b.func,{destinationNames:void 0,dispatch:d.a,featureComposeFlow:!1,featureWysiwygComposer:!1,isDraftValid:!1,isExpanded:!1,isFocused:!1,isSendButtonEnabledPref:!1,onChange:d.a,onExpand:d.a,onFocus:d.a});function Cf(e){var t=e.destinationNames,n=e.dispatch,a=e.draft,r=e.featureComposeFlow,i=e.featureWysiwygComposer,o=e.isDraftValid,s=e.isExpanded,l=e.isFocused,c=e.isSendButtonEnabledPref,u=e.onChange,d=e.onExpand,h=e.onFocus,b=Object(p.useRef)(),f=function(){return b.current.getWrappedInstance?b.current.getWrappedInstance():b.current};if(Object(p.useEffect)(function(){l&&f().focus()},[l]),db(function(){var e=Object(Th.d)(a);Object(mt.a)(e)?f().setCursor(e):f().setCursorAtEnd()},[a.id]),!r)return null;var g=Object(Th.c)(a)||[],_=Object(ls.a)(t)?kf.t("Start a new message"):kf.t("Message {names}",{names:Object(B.j)(t,{noConj:!0}).join("")});return m.a.createElement(Ji,{autocompleteProps:{completeOnCommands:!1,position:s?"bottom":"top"},channelId:g[0],className:"p-composer_page__message_input",composerDraft:a,enableComposerButton:i,enableEmojiButton:!0,enableFileButton:!0,enableMentionButton:!0,enableSendButton:s||c,enableExpandButton:!0,enableSnippetCreation:!1,focusOnPaste:!0,isComposerPage:!0,isExpanded:s,isSendButtonDisabled:!o,maxLength:i?Ca.C:Ca.B,onDraftUpdate:u,onExpand:d,onFocus:h,placeholder:_,ref:b,sendMessage:function(){var e=f().getContents().contents;n(yf({draft:ye()({},a,{ops:e})}))},useSendButton:s||c})}Cf.displayName="ComposerInput",Cf.defaultProps=Of;var Ef=Object(g.b)(function(e,t){var n=t.draft;return{destinationNames:Object(Th.f)(e,n),featureWysiwygComposer:Object(lt.a)(e),featureComposeFlow:Object(T.g)(e),isDraftValid:Object(Th.q)(e,n,{canPostInChannel:Bb.p}),isSendButtonEnabledPref:Object(Zt.j)(e,"msg_input_send_btn")}})(Cf),jf=n("oLrU"),Sf=n("m+G5"),If=Object(gt.b)("Processes a file object, adds it to Redux, and uploads it",function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).file;if(!n)return Promise.resolve();var a=Object(jf.a)();n.id=a,e(Object(Sf.a)({files:[n]}));var r=t(),i=Object(v.b)(r),o=Object(vs.a)(i).uploadFiles({files:[n],shareData:{isOptimisticUpload:!0}});return Promise.resolve({pendingFileId:a,uploadPromise:o})});If.meta={name:"addAndUploadPendingFile",key:"pendingFileUploadsStoreThunksAddAndUploadPendingFileAddAndUploadPendingFile",description:"Processes a file object, adds it to Redux, and uploads it"},If.propTypes={file:h.b.object.isRequired};var wf=n("2XCg"),Nf=Object(gt.b)("Kicks off the file upload and updates the draft store with the file IDs",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.draftId,r=n.files;a&&!Object(ls.a)(r)&&r.forEach(function(n){e(If({file:n})).then(function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.pendingFileId,i=n.uploadPromise,o=void 0===i?Promise.resolve():i;r&&(e(Object(wf.b)({draftId:a,pendingFileId:r})),o.then(function(){var n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).fileIds,r=void 0===n?[]:n;if(!Object(ls.a)(r)){var i=t(),o=Object(T.d)(i,a),s=r[0];e(Object(an.f)(ye()({},o,{files:[].concat(ti()(Object(Th.g)(o)),[s])})))}}))})})});Nf.meta={name:"uploadDraftFiles",key:"draftsStoreThunksUploadDraftFilesUploadDraftFiles",description:"Kicks off the file upload and updates the draft store with the file IDs"},Nf.propTypes={draftId:h.b.string.isRequired,files:h.b.arrayOf(h.b.object).isRequired};var Tf=Object(Je.b)(function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).draftId;return e&&e.draftPendingFileIds&&e.draftPendingFileIds[t]});Tf.meta={name:"getPendingFileIdsByDraftId",key:"draftPendingFileIdsStoreSelectorsGetPendingFileIdsByDraftId"},Tf.propTypes={draftId:h.b.string.isRequired};var Af=Object(Je.b)(function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).fileId;return e&&e.pendingFileUploads&&e.pendingFileUploads[t]});Af.meta={name:"getPendingFileById",key:"pendingFileUploadsStoreSelectorsGetPendingFileById"},Af.propTypes={fileId:h.b.string.isRequired};var Rf=n("mZe+"),Pf=(h.b.func,h.b.object.isRequired,h.b.bool,h.b.arrayOf(h.b.object),{dispatch:d.a,featureComposeFlowFiles:!1,pendingFiles:[]});function Mf(e){var t=e.dispatch,n=e.draft,a=e.featureComposeFlowFiles,r=e.pendingFiles,i=Object(cb.a)();if(!a)return null;var o=r.map(function(e){return e.file});return m.a.createElement("div",null,m.a.createElement(Rf.a,{files:o,onFilesSelected:function(e){i.info("COMPOSER","Preparing to upload "+e.length+" files"),t(Nf({draftId:n.id,files:e}))}}))}Mf.displayName="ComposerFiles",Mf.defaultProps=Pf;var xf=Object(g.b)(function(e,t){var n=t.draft,a=Tf(e,{draftId:n.id});return{pendingFiles:Object(U.a)(Object(ft.a)(a,function(t){return Af(e,{fileId:t})})),featureComposeFlowFiles:Object(T.h)(e)}})(Mf),Ff=(n("oV5z"),new B.b("drafts")),Lf=(h.b.string,h.b.func,h.b.object,h.b.bool,{contextChannelId:void 0,dispatch:d.a,draft:{},featureComposeFlow:!1});function Df(e){var t=e.contextChannelId,n=e.dispatch,a=e.draft,r=e.featureComposeFlow,i=Object(p.useState)(),o=it()(i,2),s=o[0],l=o[1],c=Object(p.useState)(!1),u=it()(c,2),h=u[0],b=u[1],g=Object(p.useRef)();db(function(){Object(Th.l)(a)?l("body"):(l("dest"),g.current&&g.current.focus())},[a.id]);var _=Object(lb.a)(!1,1500),v=it()(_,2),y=v[0],k=v[1],O=Object(lb.a)(!1,3e3),C=it()(O,2),E=C[0],j=C[1],S=Object(cb.a)();if(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d.a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document,a=Object(cb.a)();e||a.warn("USE_EVENT_LISTENER",'Missing required "eventName"');var r=Object(p.useRef)();Object(p.useEffect)(function(){r.current=t},[t]),Object(p.useEffect)(function(){var t=function(e){return r.current(e)};return n.addEventListener(e,t),function(){n.removeEventListener(e,t)}},[e,n])}("keydown",function(e){"Escape"!==e.key||Object(Th.l)(a)||Object(Th.m)(a)||n(Object(an.a)({ids:[a.id]}))}),!r)return null;if(Object(ls.a)(a))return n(ob({reason:"composer_page_empty"})),null;function I(e){S.info("COMPOSER","Saving draft (id:"+a.id+")"),n(Object(an.f)(e)),k(!0),j(!0)}var w=t&&!h;return m.a.createElement("div",{className:f()("p-composer_page",{"p-composer_page--noncontextual":!w,"p-composer_page--expanded":h})},m.a.createElement("div",{className:"p-composer_page__header"},m.a.createElement(_f,{draft:a,isFocused:!Object(Th.l)(a)||"dest"===s,onChange:function(e){return I(ye()({},a,{destinations:e}))},onFocus:function(){return l("dest")},onSelect:function(){return l("body")},ref:g})),!h&&m.a.createElement("div",{className:"p-composer_page__body"},m.a.createElement(xb,{channelId:t,draft:a,renderFooter:function(){var e=void 0;if(y)e=Ff.t("Saving message\u2026");else if(E)e=Ff.t("Draft saved");else{var t=Object(Th.h)(a),n=Object(Th.e)(a);if(t&&t!==n){var r=t/1e3,i=Object(Hp.a)(r)?Object($h.a)(r):Object(Zh.a)(r);e=Ff.rt("Edited {lastEdited}",{lastEdited:i})}}return m.a.createElement("div",{className:"p-composer_page__context_list_meta"},e)},viewId:"composer_context"})),m.a.createElement(sb.a,null,function(e){var t=e.height,n=e.measureRef;return m.a.createElement("div",{className:"p-composer_page__footer",ref:n},m.a.createElement("div",{className:"p-composer_page__message_input_wrapper",style:{height:h?t:void 0}},m.a.createElement(Ef,{draft:a,height:t,isExpanded:h,isFocused:"body"===s,onChange:function(e){var t=e.ops,n=e.range,r=void 0===n?{}:n;return I(ye()({},a,{ops:t,cursor_index:r.index}))},onExpand:b,onFocus:function(){return l("body")}}),m.a.createElement(xf,{draft:a})))}))}Df.displayName="ComposerPage",Df.defaultProps=Lf;var Uf=Object(g.b)(function(e){var t=tb(e),n=Object(T.d)(e,t);return{contextChannelId:pb(e,n),draft:n,featureComposeFlow:Object(T.g)(e)}})(Df),Bf=n("qc8s"),qf=Object(gt.b)("Create a new composer draft",function(e){var t=Object(jf.a)();return e(Object(an.f)({id:t,is_from_composer:!0})),Promise.resolve(t)});qf.meta={name:"createComposerDraft",key:"draftsStoreThunksCreateComposerDraftCreateComposerDraft",description:"Create a new composer draft"},qf.propTypes=null;var Hf=qf,Wf=Object(gt.b)("Opens the composer page",function(){var e=Object(Kh.coroutine)(regeneratorRuntime.mark(function e(t,n){var a,r,i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).draftId;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Object(Ct.a)({getState:n,label:"COMPOSER"}),r=void 0,!i){e.next=6;break}r=i,e.next=10;break;case 6:return e.next=8,Object(Kh.resolve)(t(Hf()));case 8:r=e.sent,a.info("Creating a new composer draft "+r);case 10:a.info("Opening the composer page to the following draft "+r),Object(nb.g)(ab.a,{entityId:"composer",draftId:Object(eb.b)(r)});case 12:case"end":return e.stop()}},e,void 0)}));return function(t,n,a){return e.apply(this,arguments)}}());Wf.meta={name:"openComposerPage",key:"actionsOpenComposerPageOpenComposerPage",description:"Opens the composer page"},Wf.propTypes={draftId:h.b.string};var Gf=n("hhak"),Kf=n("4RH7"),Vf=n("YaVv"),zf=n("EsOt"),Yf=(h.b.object.isRequired,h.b.object,{draftBlocks:void 0});function Qf(e){var t=e.draft,n=e.draftBlocks;return Object(ls.a)(n)?null:m.a.createElement(zf.a,{blocks:n.blocks,blocksContainerContext:am.a.draft,containerId:t.id,disableHighlights:!0})}Qf.displayName="DraftPreview",Qf.defaultProps=Yf;var Xf=Object(g.b)(function(e,t){var n=t.draft,a=new zt.a(n.ops);return{draftBlocks:Object(Vf.a)(e,a)}})(Qf),Jf=new B.b("drafts"),Zf=(h.b.func,h.b.bool,h.b.object.isRequired,h.b.bool,h.b.arrayOf(h.b.string),h.b.number,{dispatch:d.a,do24hrTime:!1,featureComposeFlow:!1,replyUsers:void 0,replyUsersCount:void 0});function $f(e){var t=e.dispatch,n=e.do24hrTime,a=e.draft,r=e.featureComposeFlow,i=e.replyUsers,o=e.replyUsersCount;if(!r)return null;var s=Object(Th.h)(a),l=s/1e3;return m.a.createElement(fh.a,{className:"margin_bottom_100",onClick:function(){if(Object(Th.o)(a))t(Wf({draftId:a.id}));else{var e=Object(Th.b)(a)||{},n=e.channelId,r=e.threadTs;t(r?Object(Gf.a)({channelId:n,threadTs:r}):Object(wa.a)({id:n}))}}},m.a.createElement("div",{className:"p-drafts_page__draft"},m.a.createElement("div",{className:"p-drafts_page__draft_header"},Object(Th.l)(a)?m.a.createElement(hf,{draft:a}):Jf.t("No destination"),m.a.createElement("div",{className:"p-drafts_page__draft_meta"},s&&m.a.createElement("span",{className:"p-drafts_page__draft_timestamp"},Jf.t("{date} at {time}",{date:Object(Zh.a)(l,{shortenMonth:!0}),time:Object(Bf.a)(l,{do24hrTime:n})})),m.a.createElement("div",{className:"p-drafts_page__draft_badge"},Jf.t("Draft")),!Object(Th.o)(a)&&m.a.createElement("div",{className:"p-drafts_page__draft_badge"},m.a.createElement(ta.b,{size:"inherit",type:"pencil"})))),!Object(ls.a)(i)&&m.a.createElement(Kf.a,{className:"p-drafts_page__draft_thread_participants",replyUsers:i,replyUsersCount:o}),Object(Th.m)(a)&&m.a.createElement("div",{className:"p-drafts_page__draft_body"},m.a.createElement(Xf,{draft:a}))))}$f.displayName="DraftItem",$f.defaultProps=Zf;var eg=Object(g.b)(function(e,t){var n=t.draft,a=void 0,r=void 0;if(!Object(Th.o)(n)){var i=Object(Th.b)(n)||{},o=i.channelId,s=i.threadTs,l=Object(Ze.a)(e,o,s);a=Object(et.T)(l),r=Object(et.U)(l)}return{do24hrTime:Object(Zt.j)(e,"time24"),featureComposeFlow:Object(T.g)(e),replyUsers:a,replyUsersCount:r}})($f),tg=(n("/UDf"),h.b.func,h.b.arrayOf(h.b.object),{visibleUnifiedDrafts:[],dispatch:d.a});function ng(e){var t=e.visibleUnifiedDrafts,n=e.dispatch;if(Object(ls.a)(t))return n(ob({reason:"drafts_page_empty"})),null;var a=Object(Th.s)(t);return m.a.createElement("div",{className:"p-drafts_page"},a.map(function(e){return m.a.createElement(eg,{draft:e,key:e.id})}))}ng.displayName="DraftsPage",ng.defaultProps=tg;var ag=Object(g.b)(function(e){return{visibleUnifiedDrafts:Object(Th.k)(e),featureComposeFlow:Object(T.g)(e)}})(ng),rg=n("Cvbp"),ig=n("zbZx"),og=n("N1Yt"),sg=n("dHYv"),lg=n("kAFe"),cg=n("+Lv6"),ug=n("AgpX"),dg=n("iB/r"),pg=n("lek6"),mg=n("hW7Y"),hg=(h.b.object.isRequired,h.b.object,h.b.bool.isRequired,h.b.bool.isRequired,h.b.bool.isRequired,h.b.bool.isRequired,h.b.bool,h.b.func.isRequired,h.b.func.isRequired,h.b.func.isRequired,h.b.func.isRequired,h.b.func.isRequired,{message:void 0,isInMutedChannel:!1}),bg=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["onClickItem","onClickArchive","onClickMarkAsRead"]),n.state={focused:!1},n}return u()(t,e),o()(t,[{key:"onClickItem",value:function(){var e=this.props,t=e.item,n=e.isRead,a=e.message,r=this.state.focused;n||r||this.props.markItemAsRead(t),a&&this.setState(function(){return{focused:!r}})}},{key:"onClickArchive",value:function(e){var t=this.props,n=t.item,a=t.isArchived;e.preventDefault(),e.stopPropagation(),a?this.props.unarchiveItem({id:"reminder"===n.type?n.reminderId:n.id,type:n.type}):this.props.archiveItem({id:"reminder"===n.type?n.reminderId:n.id,type:n.type,subtype:n.subtype||null,channelId:n.channelId||null})}},{key:"onClickMarkAsRead",value:function(e){var t=this.props,n=t.item,a=t.isRead;e.preventDefault(),e.stopPropagation(),a?this.props.markItemAsUnread(n):this.props.markItemAsRead(n)}},{key:"renderSharedActions",value:function(){var e=this.props,t=e.isArchived,n=e.isRead;return m.a.createElement(p.Fragment,null,m.a.createElement(mg.c,{tip:n?"Mark unread":"Mark as read",delay:0},m.a.createElement(dg.a,{icon:"emoji-objects",className:"p-inbox__item_actions--mark-as-read",onClick:this.onClickMarkAsRead})),m.a.createElement(mg.c,{tip:t?"Unarchive":"Archive",delay:0},m.a.createElement(dg.a,{icon:"circle-checkbox-checked-o",className:"p-inbox__item_actions--archive",onClick:this.onClickArchive})))}},{key:"renderTruncatedMessage",value:function(){var e=this.props.message;return m.a.createElement(p.Fragment,null,m.a.createElement("span",{className:"p-inbox__item_sender"},m.a.createElement(lo.a,{msg:e})),m.a.createElement("span",{className:"p-inbox__item_content"},m.a.createElement(og.a,{lines:1},Object(et.mb)(e)?m.a.createElement(sg.a,{richTextBlock:e.blocks[0]}):m.a.createElement(co.a,{msg:e}))))}},{key:"renderMessage",value:function(){var e=this,t=this.props,n=t.item,a=t.message,r=t.includeActions,i=a,o=m.a.createElement(io.a,{msg:i},m.a.createElement(oo.a,{light:m.a.createElement(so.a,{msg:i})},m.a.createElement(lo.a,{msg:i}),"\xa0\xa0",m.a.createElement(ho.a,{msg:i,clickable:!0,full:!0}),m.a.createElement("br",null),m.a.createElement(co.a,{msg:i}),m.a.createElement(uo.a,{msg:i,blocksContainerContext:am.a.all_unreads}),m.a.createElement(mo.b,{msg:i}),m.a.createElement(rm.a,{msg:i}),m.a.createElement(sm.a,{msg:i}),m.a.createElement(mm,{msg:i,className:"p-unreads_view__thread_replies"}),m.a.createElement(cm,{msg:i}))),s=m.a.createElement(fm.a,null,m.a.createElement(gm.a,{msg:i,showComment:!0,showShare:!0,messageContainerType:Ca.H.UNREAD_VIEW,position:"above"},o)),l=r?s:o;return m.a.createElement("div",{className:"p-inbox__item p-inbox__item--expanded"},m.a.createElement(_e.c,{className:"p-inbox__item_header",onClick:this.onClickItem},m.a.createElement("span",{className:"p-inbox__item_type"},this.renderIconWithTooltip()),m.a.createElement("span",{className:"p-inbox__item_source"},m.a.createElement(En.a,{onClick:function(){return e.props.setPrimaryView({id:n.channelId})}},m.a.createElement(Yp.a,{channelId:n.channelId}))),m.a.createElement("span",{className:"p-inbox__item_actions"},this.renderSharedActions())),m.a.createElement("div",{className:"p-inbox__item_message"},l))}},{key:"renderIconWithTooltip",value:function(){var e=this.props.item,t=void 0,n=void 0;return"mention"===e.type?(t="comment-alt",n="You were mentioned",e.subtype&&"cursor_mark"===e.subtype?(t="mark_unread",n="You marked this channel unread"):e.subtype&&"dm"===e.subtype&&(t="user",n="You received this direct message")):"star"===e.type?(t="star-o",n="You starred this item"):"reminder"===e.type&&(t="check-list",n="You set this reminder"),m.a.createElement(mg.c,{tip:n},m.a.createElement(ta.b,{type:t}))}},{key:"renderMention",value:function(){var e=this.props,t=e.item,n=e.isArchived,a=e.isRead,r=e.isInMutedChannel;return!e.message||r?null:m.a.createElement(p.Fragment,null,this.state.focused?this.renderMessage():m.a.createElement(_e.c,{className:f()("p-inbox__item",{"p-inbox__item--archived":n,"p-inbox__item--read":a}),onClick:this.onClickItem},m.a.createElement("span",{className:"p-inbox__item_type"},this.renderIconWithTooltip()),m.a.createElement(mg.c,{tip:m.a.createElement(Yp.a,{channelId:t.channelId,className:"normal_wrap"})},m.a.createElement("span",{className:"p-inbox__item_source"},m.a.createElement(Yp.a,{channelId:t.channelId}))),this.renderTruncatedMessage(),m.a.createElement("span",{className:"p-inbox__item_actions"},this.renderSharedActions())))}},{key:"renderStarredItem",value:function(){var e=this.props,t=e.item,n=e.isArchived,a=e.isRead;return e.message?m.a.createElement(p.Fragment,null,this.state.focused?this.renderMessage():m.a.createElement(_e.c,{className:f()("p-inbox__item",{"p-inbox__item--archived":n,"p-inbox__item--read":a}),onClick:this.onClickItem},m.a.createElement("span",{className:"p-inbox__item_type"},this.renderIconWithTooltip()),m.a.createElement(mg.c,{tip:m.a.createElement(Yp.a,{channelId:t.channelId,className:"normal_wrap"})},m.a.createElement("span",{className:"p-inbox__item_source"},m.a.createElement(Yp.a,{channelId:t.channelId}))),this.renderTruncatedMessage(),m.a.createElement("span",{className:"p-inbox__item_actions"},this.renderSharedActions()))):null}},{key:"renderReminder",value:function(){var e=this.props,t=e.item,n=e.isArchived,a=e.isRead,r=e.message,i=null,o=null;return r?i=r:o=Object(Ii.q)(t.text)?m.a.createElement(ug.a,{href:t.text}):m.a.createElement(pg.a,{text:t.text}),m.a.createElement(p.Fragment,null,this.state.focused&&i?this.renderMessage():m.a.createElement(_e.c,{className:f()("p-inbox__item",{"p-inbox__item--archived":n,"p-inbox__item--read":a}),onClick:this.onClickItem},m.a.createElement("span",{className:"p-inbox__item_type"},this.renderIconWithTooltip()),i?m.a.createElement(mg.c,{tip:m.a.createElement(Yp.a,{channelId:t.channelId,className:"normal_wrap"})},m.a.createElement("span",{className:"p-inbox__item_source"},m.a.createElement(Yp.a,{channelId:t.channelId}))):m.a.createElement(p.Fragment,null,m.a.createElement("span",{className:"p-inbox__item_source"},"Reminder"),m.a.createElement("span",{className:"p-inbox__item_sender"},"You")),i?this.renderTruncatedMessage():m.a.createElement("span",{className:"p-inbox__item_content"},m.a.createElement(og.a,{lines:1},o)),m.a.createElement("span",{className:"p-inbox__item_actions"},this.renderSharedActions())))}},{key:"render",value:function(){var e=this.props,t=e.item;return e.visible?m.a.createElement(cg.b,null,"mention"===t.type&&this.renderMention(),"star"===t.type&&this.renderStarredItem(),"reminder"===t.type&&this.renderReminder()):null}}]),t}(p.PureComponent);bg.displayName="InboxItem",bg.defaultProps=hg;var fg={archiveItem:function(){return lg.b.apply(void 0,arguments)},unarchiveItem:function(){return lg.h.apply(void 0,arguments)},markItemAsRead:function(){return lg.f.apply(void 0,arguments)},markItemAsUnread:function(){return lg.g.apply(void 0,arguments)},setPrimaryView:function(){return wa.a.apply(void 0,arguments)}},gg=Object(g.b)(function(e,t){var n=t.item,a=Object(Ze.a)(e,n.channelId,n.messageTs),r=Object(G.e)(e,n.channelId),i=Object(we.d)(e).id,o=Object(K.B)(e,r)||[];return{item:n,message:a,includeActions:!Object(ig.d)(e)||Object(K.jb)(r)||Object(K.xb)(r)||o.includes(i),isArchived:n.archived,isRead:n.read,isInMutedChannel:r&&Object(Ad.c)(e,r.id)}},fg)(bg),_g=(n("m2U7"),h.b.array.isRequired,h.b.func.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["toggleArchives"]),n.state={includeArchives:!1},n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.refreshInbox()}},{key:"toggleArchives",value:function(){var e=this.state.includeArchives;this.setState(function(){return{includeArchives:!e}})}},{key:"renderDay",value:function(e){var t=this.state.includeArchives,n=!1,a=Object.values(e).map(function(e){return n=n||!!t||!e.archived,m.a.createElement(gg,{key:"reminder"===e.type?e.type+"-"+e.reminderId:e.type+"-"+e.id,item:e,visible:!!t||!e.archived})});return n?m.a.createElement(p.Fragment,null,m.a.createElement("h4",null,Object(Zh.a)(e[0].id)),m.a.createElement("div",{className:"p-inbox__day",key:e[0].id},a)):null}},{key:"renderItems",value:function(){var e=this,t=this.props.items,n=[],a=t;return Object(qp.a)(a,function(t){n.push(e.renderDay(t))}),n}},{key:"render",value:function(){return m.a.createElement("div",{className:"p-workspace__primary_view_body p-inbox"},m.a.createElement(_e.c,{className:"float_right micro",onClick:this.toggleArchives},m.a.createElement(ta.b,{type:"archive",size:"inherit",className:"margin_right_25"}),this.state.includeArchives?"Hide archived items":"Include archived items"),this.renderItems())}}]),t}(p.Component));_g.displayName="InboxView";var vg={refreshInbox:rg.a},yg=Object(g.b)(function(e){return{items:Object(Jh.c)(e)}},vg)(_g),kg=(h.b.string.isRequired,h.b.func.isRequired,h.b.func.isRequired,h.b.func.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["onClickRefresh","onClickMarkAllAsRead","onClickArchiveAll"]),n}return u()(t,e),o()(t,[{key:"onClickRefresh",value:function(){this.props.refreshInbox()}},{key:"onClickMarkAllAsRead",value:function(){this.props.markAllAsRead()}},{key:"onClickArchiveAll",value:function(){this.props.archiveAll()}},{key:"render",value:function(){var e=this.props.className;return m.a.createElement("div",{className:e},m.a.createElement("div",{className:"p-classic_nav__channel_header__title_section"},m.a.createElement("div",{className:"p-classic_nav__channel_header__title p-classic_nav__no_drag"},"Home")),m.a.createElement("div",{className:"p-classic_nav__channel_header__subtitle"},m.a.createElement(En.a,{onClick:this.onClickRefresh},"Refresh")," |"," ",m.a.createElement(En.a,{onClick:this.onClickMarkAllAsRead},"Mark all as read")," |"," ",m.a.createElement(En.a,{onClick:this.onClickArchiveAll},"Archive all")))}}]),t}(p.PureComponent));kg.displayName="InboxHeader";var Og={refreshInbox:rg.a,markAllAsRead:lg.e,archiveAll:lg.a},Cg=Object(g.b)(null,Og)(kg),Eg=n("fvjX"),jg=n("1tsX"),Sg=n("QkOX"),Ig=n("O5cs"),wg=n("3zPy"),Ng=n.n(wg),Tg=n("IRvZ"),Ag=(h.b.object.isRequired,h.b.bool,h.b.string,h.b.string,h.b.string.isRequired,h.b.string,{featureAppLauncher:!1,categoryName:"",teamUrl:"",referringEventId:void 0}),Rg=new B.b("app_launcher");function Pg(e){var t=e.clogger,n=e.featureAppLauncher,a=e.categoryName,r=e.teamUrl,i=e.resultKey,o=e.referringEventId,s=Object(p.useCallback)(function(){return t.track(le.EventId.APP_INDEX_VIEW_APP_DIRECTORY_CLICK,fe()({},le.ClientEventKeys.referring_event_id,o))},[t,o]);if(!n)return null;var l=i===Tg.b||i===Tg.d?m.a.createElement(ug.a,{className:"p-app_launcher__category_header__link",href:r+"apps?utm_source=in-prod&utm_medium=inprod-link_app_directory-index-click",onClick:s,"data-qa":"app_launcher__category_header__app_directory_link"},Rg.t("See all apps in the App Directory")):null;return m.a.createElement("div",{className:"p-app_launcher__category_header","data-category_header":"true","data-qa":"app_launcher__category_header_"+i,key:i},m.a.createElement("div",{className:"p-app_launcher__category_header__title"},a),l)}Pg.displayName="AppLauncherCategoryHeader",Pg.defaultProps=Ag;var Mg=Object(g.b)(function(e,t){var n=t.result,a=void 0===n?{}:n,r=Object(v.b)(e),i=Object(we.i)(e,r);return{clogger:Object(re.a)({state:e}),featureAppLauncher:Object(jg.a)(e),categoryName:a.display_name,resultKey:a.key,teamUrl:Object(De.o)(i),referringEventId:Object(Ig.k)(e)}})(Pg),xg=n("V/As"),Fg=n("yywf"),Lg=new B.b("app_launcher"),Dg=(h.b.string.isRequired,h.b.object,h.b.func,{app:void 0,handleClick:d.a});function Ug(e){var t=e.app,n=e.handleClick,a=e.appKey,r=Object(p.useState)(!1),i=it()(r,2),o=i[0],s=i[1],l=Object(p.useCallback)(function(){s(!0)},[s]),c=Object(p.useCallback)(function(){n({appKey:a})},[n,a]);if(!t)return null;var u=o?xg.a:Object(xg.b)(t,72),d=t.is_installed,h=d?null:m.a.createElement("div",{className:"p-app_launcher__app_card__pseudobutton c-button c-button--medium c-button--outline","data-qa":"app_launcher__app_card__add"},Lg.t("Add"));return m.a.createElement(fh.a,{className:"p-app_launcher__app_card",onClick:c,"data-qa":"app_launcher__app_card--"+(d?"installed":"not_installed"),"data-app-id":t.app_id},m.a.createElement("div",{className:"p-app_launcher__app_card__container"},m.a.createElement("img",{className:"p-app_launcher__app_card__icon",src:u,alt:"",onError:l}),m.a.createElement("div",null,m.a.createElement("strong",{className:"p-app_launcher__app_card__title",style:{WebkitBoxOrient:"vertical"}},t.name),m.a.createElement("span",{className:"p-app_launcher__app_card__text",style:{WebkitBoxOrient:"vertical"},"aria-label":t.short_description||""},Object(Fg.a)(t.short_description||"",function(e,t){return m.a.createElement("strong",{key:t},e)})))),h)}Ug.displayName="AppLauncherAppCard",Ug.defaultProps=Dg;var Bg=Object(g.b)(function(e,t){var n=t.appKey;return{app:(Object(Ig.b)(e)||{})[n]}},function(e){return Object(Eg.b)({handleClick:Xh.c},e)})(Ug);h.b.object;function qg(e){var t=e.chunk;return m.a.createElement("div",{className:"p-app_launcher__grid",key:t.key,"data-qa":"app_launcher__result_row"},t.appKeys.map(function(e){return m.a.createElement(Bg,{appKey:e,key:e})}))}qg.displayName="AppLauncherResultRow",qg.defaultProps={chunk:{appKeys:[]}};var Hg=Object(jp.a)(qg);function Wg(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=n.uiStep,r=n.uiElement,i=n.referringEventId,o=n.additionalPayload;return ye()({},o,(t={},fe()(t,le.ClientEventKeys.ui_context,(e={},fe()(e,le.UiContextKeys.action,le.UiAction.CLICK),fe()(e,le.UiContextKeys.ui_component,le.UiComponent.APP_LAUNCHER_BANNER),fe()(e,le.UiContextKeys.step,a),fe()(e,le.UiContextKeys.ui_element,r),e)),fe()(t,le.ClientEventKeys.referring_event_id,i),t))}function Gg(e){return e.replace(/-/g,"_")}var Kg=Object(gt.b)("Clog App Launcher Banner Impression",function(e,t,n){var a,r,i=t(),o=Object(re.a)({state:i}),s=Object(Ig.k)(i),l=n?Gg(n):"";o.track(le.EventId.APP_LAUNCHER,(r={},fe()(r,le.ClientEventKeys.ui_context,(a={},fe()(a,le.UiContextKeys.action,le.UiAction.IMPRESSION),fe()(a,le.UiContextKeys.ui_component,le.UiComponent.APP_LAUNCHER_BANNER),fe()(a,le.UiContextKeys.step,l),a)),fe()(r,le.ClientEventKeys.referring_event_id,s),r))});Kg.meta={name:"clogImpression",key:"actionsAppLauncherBannerActionsClogImpression",description:"Clog App Launcher Banner Impression"},Kg.propTypes={bannerKey:h.b.string};var Vg=Object(gt.b)("Handle a click to the App Directory and clog",function(e,t,n){var a=t(),r=Object(v.b)(a),i=Object(we.i)(a,r),o=Object(re.a)({state:a}),s=Object(Ig.k)(a),l=Wg({uiStep:n?Gg(n):"",uiElement:le.UiElement.LINK_APP_DIRECTORY,referringEventId:s});o.track(le.EventId.APP_LAUNCHER,l),Object(De.R)(i,"/apps")});Vg.meta={name:"navigateToAppDirectory",key:"actionsAppLauncherBannerActionsNavigateToAppDirectory",description:"Handle a click to the App Directory and clog"},Vg.propTypes={bannerKey:h.b.string};var zg=Object(gt.b)("Handle a click to the slack.com/apps/manage and clog",function(e,t,n){var a=t(),r=Object(v.b)(a),i=Object(we.i)(a,r),o=Object(re.a)({state:a}),s=Object(Ig.k)(a),l=Wg({uiStep:n?Gg(n):"",uiElement:le.UiElement.LINK_MANAGE_APPS,referringEventId:s});o.track(le.EventId.APP_LAUNCHER,l),Object(De.R)(i,"/apps/manage")});zg.meta={name:"navigateToManageApps",key:"actionsAppLauncherBannerActionsNavigateToManageApps",description:"Handle a click to the slack.com/apps/manage and clog"},zg.propTypes={bannerKey:h.b.string};var Yg=Object(gt.b)("Handle a click to the slack.com/pricing and clog",function(e,t,n){var a=t(),r=Object(v.b)(a),i=Object(we.i)(a,r),o=Object(re.a)({state:a}),s=Object(Ig.k)(a),l=Wg({uiStep:n?Gg(n):"",uiElement:le.UiElement.LINK_PRICING,referringEventId:s});o.track(le.EventId.APP_LAUNCHER,l),Object(De.R)(i,"/pricing?ui_step=280&ui_element=5")});Yg.meta={name:"navigateToPricing",key:"actionsAppLauncherBannerActionsNavigateToPricing",description:"Handle a click to the slack.com/pricing and clog"},Yg.propTypes={bannerKey:h.b.string};var Qg=Object(gt.b)("Clog and set dismiss welcome banner pref",function(e,t,n){var a=t(),r=Object(re.a)({state:a}),i=Object(Ig.k)(a),o=Wg({uiStep:n?Gg(n):"",uiElement:le.UiElement.BTN_CLOSE,referringEventId:i});r.track(le.EventId.APP_LAUNCHER,o),e(Object(Tn.f)({pref:"dismissed_app_launcher_welcome",value:!0})),e(Object(Xh.i)({isBannerDismissed:!0}))});Qg.meta={name:"setWelcomeDismissedPref",key:"actionsAppLauncherBannerActionsSetWelcomeDismissedPref",description:"Clog and set dismiss welcome banner pref"},Qg.propTypes={bannerKey:h.b.string};var Xg=Object(gt.b)("Clog and set dismiss limit banner pref",function(e,t,n){var a=t(),r=Object(re.a)({state:a}),i=Object(Ig.k)(a),o=Wg({uiStep:n?Gg(n):"",uiElement:le.UiElement.BTN_CLOSE,referringEventId:i});r.track(le.EventId.APP_LAUNCHER,o),e(Object(Tn.f)({pref:"dismissed_app_launcher_limit",value:!0})),e(Object(Xh.i)({isBannerDismissed:!0}))});Xg.meta={name:"setLimitDismissedPref",key:"actionsAppLauncherBannerActionsSetLimitDismissedPref",description:"Clog and set dismiss limit banner pref"},Xg.propTypes={bannerKey:h.b.string};var Jg=Object(gt.b)("Clog and set dismiss limit banner pref and welcome dismissed pref",function(e,t,n){var a=t(),r=Object(re.a)({state:a}),i=Object(Ig.k)(a),o=Wg({uiStep:n?Gg(n):"",uiElement:le.UiElement.BTN_CLOSE,referringEventId:i});r.track(le.EventId.APP_LAUNCHER,o),e(Object(Tn.f)({pref:"dismissed_app_launcher_welcome",value:!0})),e(Object(Tn.f)({pref:"dismissed_app_launcher_limit",value:!0})),e(Object(Xh.i)({isBannerDismissed:!0}))});Jg.meta={name:"setLimitAndWelcomeDismissedPref",key:"actionsAppLauncherBannerActionsSetLimitAndWelcomeDismissedPref",description:"Clog and set dismiss limit banner pref and welcome dismissed pref"},Jg.propTypes={bannerKey:h.b.string};n("cLBS");var Zg=new B.b("app_launcher"),$g=(h.b.string.isRequired,h.b.func.isRequired,h.b.bool.isRequired,h.b.node,h.b.string,h.b.func,h.b.string,h.b.func,h.b.string,h.b.string,{children:null,primaryButtonCTA:null,handlePrimaryButtonClick:d.a,secondaryButtonCTA:null,handleSecondaryButtonClick:d.a,imageUrl:null,imageUrl2x:null});function e_(e){var t=e.title,n=e.primaryButtonCTA,a=e.handlePrimaryButtonClick,r=e.secondaryButtonCTA,i=e.children,o=e.handleClose,s=e.handleSecondaryButtonClick,l=e.imageUrl,c=e.imageUrl2x;if(!e.isShowing)return m.a.createElement(p.Fragment,null);var u=void 0,d=void 0,h=void 0,b=void 0;return n&&(u=m.a.createElement(_e.d,{className:"p-app_launcher_banner__primary_cta",type:"primary",size:"medium",onClick:a,"data-qa":"app_launcher_banner__primary_cta"},n)),r&&(d=m.a.createElement(_e.d,{type:"outline",size:"medium",onClick:s,"data-qa":"app_launcher_banner__secondary_cta"},r)),l&&c&&(b={srcSet:l+", "+c+" 2x"}),l&&(h=m.a.createElement("img",ye()({},b,{src:l,className:"p-app_launcher_banner__image",alt:"","data-qa":"app_launcher_banner__image"}))),m.a.createElement("section",{className:"p-app_launcher_banner","data-qa":"app_launcher_banner"},m.a.createElement("div",{className:"p-app_launcher_banner__body"},m.a.createElement("h2",{className:"p-app_launcher_banner__title"},t),i,m.a.createElement("div",{className:"p-app_launcher_banner__ctas"},u,d)),h,m.a.createElement(Qp.a,{icon:"times","aria-label":Zg.t("Close",{fallbackHash:"da38860cb875cb64092e402d80d9fe29c4865b18",fallbackNs:"chat_commands"}),className:"p-app_launcher_banner__close",onClick:o,"data-qa":"app_launcher_banner_close"}))}e_.displayName="AppLauncherBanner",e_.defaultProps=$g;var t_=e_,n_=new B.b("app_launcher"),a_=(h.b.bool,h.b.string,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,{featureAppLauncherBanners:!1,bannerKey:"",navigateToAppDirectory:d.a,navigateToManageApps:d.a,navigateToPricing:d.a,setWelcomeDismissedPref:d.a,setLimitDismissedPref:d.a,setLimitAndWelcomeDismissedPref:d.a,clogImpression:d.a}),r_=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.closeBannerWithWelcomeDismissedPref=n.closeBannerWithWelcomeDismissedPref.bind(n),n.closeBannerWithLimitDismissedPref=n.closeBannerWithLimitDismissedPref.bind(n),n.closeBannerWithLimitAndWelcomeDismissedPref=n.closeBannerWithLimitAndWelcomeDismissedPref.bind(n),n.handleAppDirectoryClick=n.handleAppDirectoryClick.bind(n),n.handleManageAppsClick=n.handleManageAppsClick.bind(n),n.handlePricingClick=n.handlePricingClick.bind(n),n.state={isShowing:!0},n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.clogImpression(this.props.bannerKey)}},{key:"closeBannerWithWelcomeDismissedPref",value:function(){this.setState(function(){return{isShowing:!1}}),this.props.setWelcomeDismissedPref(this.props.bannerKey)}},{key:"closeBannerWithLimitDismissedPref",value:function(){this.setState(function(){return{isShowing:!1}}),this.props.setLimitDismissedPref(this.props.bannerKey)}},{key:"closeBannerWithLimitAndWelcomeDismissedPref",value:function(){this.setState(function(){return{isShowing:!1}}),this.props.setLimitAndWelcomeDismissedPref(this.props.bannerKey)}},{key:"handleAppDirectoryClick",value:function(){this.props.navigateToAppDirectory(this.props.bannerKey)}},{key:"handleManageAppsClick",value:function(){this.props.navigateToManageApps(this.props.bannerKey)}},{key:"handlePricingClick",value:function(){this.props.navigateToPricing(this.props.bannerKey)}},{key:"render",value:function(){var e=this;if(!this.props.featureAppLauncherBanners)return m.a.createElement(p.Fragment,null);switch(this.props.bannerKey){case Tg.c.FREE_WELCOME:return m.a.createElement(t_,{title:n_.t("Apps for you and your team"),primaryButtonCTA:n_.t("Browse Apps"),handlePrimaryButtonClick:this.handleAppDirectoryClick,imageUrl:"/img/app-launcher/no_app_splash.png",imageUrl2x:"/img/app-launcher/no_app_splash@2x.png",handleClose:this.closeBannerWithWelcomeDismissedPref,isShowing:this.state.isShowing},n_.rt("<p>On Slack apps belong to you and your team. Install once and everyone can use them. Free teams get up to 10 apps. <Link>Upgrade to a paid team</Link> to get as many as you want.</p>",null,function(t){var n=t.tag,a=t.key,r=t.text;switch(n){case"Link":return m.a.createElement(la.a,{key:a,onClick:e.handlePricingClick},r);default:return m.a.createElement("p",{key:a},r)}}));case Tg.c.FREE_LIMIT:return m.a.createElement(t_,{title:n_.t("You could use some more space"),primaryButtonCTA:n_.t("Upgrade Team"),handlePrimaryButtonClick:this.handlePricingClick,secondaryButtonCTA:n_.t("Later"),handleSecondaryButtonClick:this.closeBannerWithLimitDismissedPref,imageUrl:"/img/app-launcher/no_app_splash.png",imageUrl2x:"/img/app-launcher/no_app_splash@2x.png",handleClose:this.closeBannerWithLimitDismissedPref,isShowing:this.state.isShowing},n_.rt("<p>Your team has met the 10 app limit for free teams. <Link>See the full list.</Link></p>",null,function(t){var n=t.tag,a=t.key,r=t.text;switch(n){case"Link":return m.a.createElement(la.a,{key:a,onClick:e.handleManageAppsClick},r);default:return m.a.createElement("p",{key:a},r)}}));case Tg.c.FREE_LIMIT_WELCOME:return m.a.createElement(t_,{title:n_.t("Apps for you and your team"),primaryButtonCTA:n_.t("Upgrade Team"),handlePrimaryButtonClick:this.handlePricingClick,secondaryButtonCTA:n_.t("Later"),handleSecondaryButtonClick:this.closeBannerWithLimitAndWelcomeDismissedPref,imageUrl:"/img/app-launcher/no_app_splash.png",imageUrl2x:"/img/app-launcher/no_app_splash@2x.png",handleClose:this.closeBannerWithLimitAndWelcomeDismissedPref,isShowing:this.state.isShowing},n_.rt("<p>Your team has met the 10 app limit for free teams. <Link>See the full list.</Link></p><p>On Slack apps belong to you and your team. Install once and everyone can use them.</p>",null,function(t){var n=t.tag,a=t.key,r=t.text;switch(n){case"Link":return m.a.createElement(la.a,{key:a,onClick:e.handleManageAppsClick},r);default:return m.a.createElement("p",{key:a},r)}}));case Tg.c.PAID_WELCOME:return m.a.createElement(t_,{title:n_.t("Apps for you and your team"),primaryButtonCTA:n_.t("Browse Apps"),handlePrimaryButtonClick:this.handleAppDirectoryClick,imageUrl:"/img/app-launcher/no_app_splash.png",imageUrl2x:"/img/app-launcher/no_app_splash@2x.png",handleClose:this.closeBannerWithWelcomeDismissedPref,isShowing:this.state.isShowing},n_.rt("<p>On Slack apps belong to you and your team. Install once and everyone can use them. They can add contextual messages to your channels, help you complete common tasks, and more.</p>"));case Tg.c.PAID_WELCOME_SMALL_CTA:return m.a.createElement(t_,{title:n_.t("Apps for you and your team"),imageUrl:"/img/app-launcher/no_app_splash.png",imageUrl2x:"/img/app-launcher/no_app_splash@2x.png",handleClose:this.closeBannerWithWelcomeDismissedPref,isShowing:this.state.isShowing},n_.rt("<p>On Slack apps belong to you and your team. Install once and everyone can use them. They can add contextual messages to your channels, help you complete common tasks, and more.</p><p>Looking for more apps? <Link>Browse App Directory</Link></p>",null,function(t){var n=t.tag,a=t.key,r=t.text;switch(n){case"Link":return m.a.createElement(la.a,{key:a,onClick:e.handleAppDirectoryClick},r);default:return m.a.createElement("p",{key:a},r)}}));case Tg.c.PAID_AAA_APP_REQUESTING_OFF:return m.a.createElement(t_,{title:n_.t("Apps for you and your team"),imageUrl:"/img/app-launcher/no_app_splash.png",imageUrl2x:"/img/app-launcher/no_app_splash@2x.png",handleClose:this.closeBannerWithWelcomeDismissedPref,isShowing:this.state.isShowing},n_.rt("<p>On Slack apps belong to you and your team. Install once and everyone can use them. They can add contextual messages to your channels, help you complete common tasks, and more.</p><p>Apps on your workspace must be approved by admins. <Link>Learn More</Link></p>",null,function(e){var t=e.tag,n=e.key,a=e.text;switch(t){case"Link":return m.a.createElement(la.a,{key:n,href:"https://slack.com/help/articles/202035138"},a);default:return m.a.createElement("p",{key:n},a)}}));default:return m.a.createElement(p.Fragment,null)}}}]),t}(p.Component);r_.displayName="AppLauncherConnectedBanner",r_.defaultProps=a_;var i_=Object(g.b)(function(e){return{featureAppLauncherBanners:Object(y.m)(e,"feature_app_launcher_banners")}},function(e){return Object(Eg.b)({setWelcomeDismissedPref:Qg,setLimitDismissedPref:Xg,setLimitAndWelcomeDismissedPref:Jg,navigateToAppDirectory:Vg,navigateToManageApps:zg,navigateToPricing:Yg,clogImpression:Kg},e)})(r_),o_=new B.b("app_launcher"),s_=Ng()("enter"),l_=(h.b.object.isRequired,h.b.bool,h.b.string,h.b.func,h.b.func,h.b.string.isRequired,h.b.object.isRequired,h.b.object.isRequired,h.b.bool.isRequired,h.b.bool,h.b.string,h.b.string,h.b.bool.isRequired,h.b.number,h.b.number,{featureAppLauncher:!1,nextCursor:void 0,referringEventId:void 0,isBannerDismissed:!1,loadMoreApps:d.a,handleAppLauncherCardClick:d.a,clientTheme:"light",width:0,height:0}),c_=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.isPaginating=!1,n.renderRow=n.renderRow.bind(n),n.paginate=n.paginate.bind(n),n.isFocusableItem=n.isFocusableItem.bind(n),n.getCurrentResults=n.getCurrentResults.bind(n),n.handleKeydownOnItem=n.handleKeydownOnItem.bind(n),n.state={numOfColumns:Tg.f},n}return u()(t,e),o()(t,null,[{key:"getDerivedStateFromProps",value:function(e,t){for(var n=e.width,a=1,r=1;r<=Tg.f;r++)n>=Tg.a*r&&(a=r);return a!==t.numOfColumns?{numOfColumns:a}:null}}]),o()(t,[{key:"componentDidMount",value:function(){this.props.clogger.track(le.EventId.APP_INDEX_OPEN,fe()({},le.ClientEventKeys.referring_event_id,this.props.referringEventId))}},{key:"getCurrentResults",value:function(){return this.props.resultsMap[this.state.numOfColumns]||[]}},{key:"isFocusableItem",value:function(e){var t=e.index,n=(this.getCurrentResults()[t]||{}).type;return n===Tg.g.APP_CHUNK||n===Tg.g.CATEGORY||n===Tg.g.EMPTY_STATE||n===Tg.g.APP_LAUNCHER_BANNER&&!this.props.isBannerDismissed}},{key:"handleKeydownOnItem",value:function(e){e.keyCode===s_&&1===this.state.numOfColumns&&this.props.handleAppLauncherCardClick({appKey:e.id})}},{key:"paginate",value:function(){this.shouldPaginate()&&this.loadMoreApps()}},{key:"shouldPaginate",value:function(){return!!this.props.nextCursor&&!!this.props.isShowingDefaultAppCategories}},{key:"loadMoreApps",value:function(){var e=this;this.isPaginating||(this.isPaginating=!0,this.props.loadMoreApps({isAppLauncher:!0}).then(function(){e.isPaginating=!1}))}},{key:"renderRow",value:function(e){var t=this.getCurrentResults()[e];switch(t.type){case Tg.g.LOADING:return m.a.createElement("div",{style:{height:62},key:t.key},m.a.createElement(ci.a,{size:"jumbo",loadingMessage:o_.t("Loading apps...")}));case Tg.g.CATEGORY:return m.a.createElement(Mg,{result:t});case Tg.g.APP_CHUNK:return m.a.createElement(Hg,{chunk:t});case Tg.g.APP_LAUNCHER_BANNER:return m.a.createElement(i_,{bannerKey:t.key});default:return m.a.createElement(p.Fragment,null)}}},{key:"render",value:function(){var e=this.props,t=e.featureAppLauncher,n=e.searchInput,a=e.isLoading,r=e.clientTheme,i=e.keysMap,o=e.width,s=e.height;if(!t)return null;var l=this.state.numOfColumns,c=i[l]||[];if(!this.getCurrentResults().length&&n)return a?m.a.createElement(ci.a,{size:"jumbo",loadingMessage:o_.t("Loading apps...")}):m.a.createElement("section",{key:"no-results",className:"p-app_launcher__no_results","data-qa":"app_launcher__no_results",role:"alert"},m.a.createElement("span",null,o_.rt("There are no apps matching <strong>{searchTerm}</strong>",{searchTerm:n})));var u=f()("p-app_launcher__list_container","p-app_launcher__list_container--"+l+"_column",fe()({"p-app_launcher__list_container--loading":0===c.length},"p-app_launcher__list_container--loading--"+r,0===c.length&&"light"!==r));return m.a.createElement("div",{className:u,"data-qa":"app_launcher__results_list"},m.a.createElement(ui.a,{width:o,height:Math.floor(s),keys:c,rowRenderer:this.renderRow,loadPost:this.paginate,loadAround:this.paginate,isFocusableItem:this.isFocusableItem,onItemClick:this.handleKeydownOnItem,hideHiddenStopTabs:!0}))}}]),t}(p.Component);c_.displayName="AppLauncherSearchResults",c_.defaultProps=l_;var u_=Object(g.b)(function(e){return{clogger:Object(re.a)({state:e}),searchInput:Object(Ig.m)(e),resultsMap:Object(Ig.d)(e),keysMap:Object(Ig.c)(e),nextCursor:Object(Ig.j)(e),isShowingDefaultAppCategories:Object(Ig.h)(e),isBannerDismissed:Object(Ig.f)(e),featureAppLauncher:Object(jg.a)(e),clientTheme:Object(D.c)(e),referringEventId:Object(Ig.k)(e),isLoading:Object(Ig.g)(e)}},function(e){return Object(Eg.b)({loadMoreApps:Xh.d,handleAppLauncherCardClick:Xh.c},e)})(c_),d_=new B.b("app_launcher");h.b.bool.isRequired,h.b.string.isRequired,h.b.bool.isRequired;function p_(e){var t=e.featureAppLauncher,n=e.searchInput,a=e.isLoading;if(!t)return null;var r=n&&!a?d_.t('App search results for "{searchTerm}" ready',{searchTerm:n}):null;return m.a.createElement(p.Fragment,null,m.a.createElement("span",{"aria-live":"polite",className:"offscreen"},r),m.a.createElement(sb.a,null,function(e){var t=e.width,n=e.height,a=e.measureRef;return m.a.createElement("div",{className:"p-app_launcher__measure_container","data-qa":"app_launcher__results_container",ref:a},m.a.createElement(u_,{width:t,height:n}))}))}p_.displayName="AppLauncherResultsContainer";var m_=Object(g.b)(function(e){return{clientTheme:Object(D.c)(e),searchInput:Object(Ig.m)(e),isLoading:Object(Ig.g)(e),featureAppLauncher:Object(jg.a)(e)}})(p_),h_=(n("oFS/"),h.b.func,h.b.func,h.b.func,h.b.bool,h.b.func,h.b.func,h.b.bool,h.b.bool,h.b.func,h.b.func,h.b.string,{closeFlexpane:d.a,toggleFlexpane:d.a,onFlexpaneClose:d.a,featureAppLauncher:!1,fetchDefaultApps:d.a,resetSearch:d.a,userAttentionIsOnChat:!1,composerVisible:!1,removeFromSectionNavigation:d.a,addToSectionNavigation:d.a,secondaryView:""}),b_=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={hadSecondaryView:!!e.secondaryView},n.searchInputRef=m.a.createRef(),n.focus=n.focus.bind(n),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.fetchDefaultApps({isAppLauncher:!0}),this.props.onFlexpaneClose(),this.props.closeFlexpane()}},{key:"componentDidUpdate",value:function(e){var t={prevUserAttentionIsOnChat:e.userAttentionIsOnChat,prevComposerVisible:e.composerVisible,currentUserAttentionIsOnChat:this.props.userAttentionIsOnChat,currentComposerVisible:this.props.composerVisible};Object(Up.a)(t)&&this.props.addToSectionNavigation(),Object(Bp.a)(t)&&this.props.removeFromSectionNavigation()}},{key:"componentWillUnmount",value:function(){var e=this.state.hadSecondaryView,t=this.props.secondaryView;this.props.resetSearch(),e&&""===t&&this.props.toggleFlexpane()}},{key:"focus",value:function(){this.searchInputRef.current.focus()}},{key:"render",value:function(){if(!this.props.featureAppLauncher)return null;return m.a.createElement(cg.b,{subtype:"app_launcher"},m.a.createElement("div",{className:"p-app_launcher","data-qa":"app_launcher"},m.a.createElement("div",{className:"p-app_launcher__grid margin_bottom_0 margin_top_0"},m.a.createElement("div",{className:"p-app_launcher__filter"},m.a.createElement(Sg.a,{isAppLauncher:!0,ref:this.searchInputRef}))),m.a.createElement(m_,{addAppsVariant:!1,channelId:null})))}}]),t}(p.Component);b_.displayName="AppLauncher",b_.defaultProps=h_;var f_=Object(V.a)(b_,"AppLauncher",{index:7}),g_=Object(g.b)(function(e){return{secondaryView:Object(A.j)(e),featureAppLauncher:Object(jg.a)(e),userAttentionIsOnChat:Object(Ed.e)(e),composerVisible:(Object(lt.a)(e)||"composer_toolbar"===Object(Xt.c)(e,"composer_toolbar"))&&Object(Dp.b)(e)}},function(e){return Object(Eg.b)({fetchDefaultApps:Xh.b,resetSearch:Xh.e,closeFlexpane:jn.a,toggleFlexpane:jn.s,onFlexpaneClose:jn.b},e)})(f_),__=new B.b("app_launcher"),v_=(h.b.string,function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props.className,t=__.t("Apps"),n=__.t("Your tools, right in Slack.");return m.a.createElement("div",{className:f()(e,"app-launcher-page-header"),"data-qa":"app_launcher__page_header"},m.a.createElement("div",{className:"p-classic_nav__channel_header__title"},t),m.a.createElement("div",{className:"p-classic_nav__channel_header__subtitle overflow_ellipsis"},n))}}]),t}(p.Component));v_.displayName="AppLauncherPageHeader",v_.defaultProps={className:""};var y_=v_,k_=n("oUB8"),O_=n("peh1"),C_=n("ukTK"),E_=(n("5oz1"),function(){return m.a.createElement("div",{className:"p-flexpane__loader_item"},m.a.createElement(ci.a,{noMargin:!0,size:"medium"}))});E_.displayName="FlexpaneLoaderItem";var j_=E_,S_=n("Kdk+"),I_=n("sIET"),w_=n("rUi3"),N_=36,T_=(h.b.string,h.b.object.isRequired,h.b.func.isRequired,h.b.func.isRequired,h.b.func.isRequired,{className:void 0});function A_(e){var t=e.className,n=e.message,a=e.renderAvatar,r=e.renderBody,i=e.renderHeader;return m.a.createElement(fm.a,{className:f()(t,"c-message_kit__message","p-activity_flexpane__item")},m.a.createElement(io.a,{msg:n},m.a.createElement(gm.a,{jumpOrigin:"activity",msg:n,position:"inside",showComment:!1,showJump:!0,showMoreActions:!1,showReact:!1,showShare:!1,showStar:!1},m.a.createElement(oo.a,{className:"p-activity_flexpane__item_gutter",light:a({size:N_})},i(),m.a.createElement("br",null),r(),m.a.createElement(po.a,{msg:n}),m.a.createElement(mo.b,{msg:n}),m.a.createElement(sm.a,{className:"p-activity_flexpane__item_reactions",msg:n}),m.a.createElement(w_.a,{flexOrigin:"activity",msg:n})))))}A_.displayName="ActivityItem",A_.defaultProps=T_;var R_=m.a.memo(A_),P_=(h.b.string,h.b.object,{className:void 0,message:void 0});function M_(e){var t=e.className,n=e.message;return n?m.a.createElement(R_,{className:t,message:n,renderAvatar:function(e){var t=e.size;return m.a.createElement(so.a,{msg:n,size:t})},renderBody:function(){return m.a.createElement(m.a.Fragment,null,m.a.createElement(co.a,{msg:n}),m.a.createElement(uo.a,{msg:n,blockLimit:1,blocksContainerContext:am.a.activity}))},renderHeader:function(){return m.a.createElement(m.a.Fragment,null,m.a.createElement(lo.a,{msg:n}),"\xa0\xa0",m.a.createElement(ho.a,{msg:n,clickable:!0,full:!1,relative:!0}))}}):null}M_.displayName="ActivityMention",M_.defaultProps=P_;var x_=Object(g.b)(function(e,t){var n=t.channelId,a=t.messageTs;return{message:Object(Ze.a)(e,n,a)}})(M_);x_.propTypes={channelId:h.b.string.isRequired,messageTs:h.b.string.isRequired};var F_=x_,L_=n("QB+X"),D_=n("Q+UV"),U_=n("VlZM"),B_=n("y7mK"),q_=new B.b("mentions");function H_(e,t){var n=Object(dt.a)(Object(Db.a)(e,"users"));return Object(Jd.a)(n,t)}h.b.string,h.b.string,h.b.bool,h.b.object,h.b.arrayOf(h.b.object);var W_={className:void 0,currentUserId:void 0,featureSonicActivity:!1,message:void 0,reactions:void 0};function G_(e){var t=e.className,n=e.currentUserId,a=e.featureSonicActivity,r=e.message,i=e.reactions,o=Object(p.useCallback)(function(e){var t=e.size,a=H_(i,n);return 1===a.length?m.a.createElement(Do.c,{userId:a[0],size:t,showCard:!0}):m.a.createElement(U_.a,{primaryMemberId:a[0],secondaryMemberId:a[1]})},[n,i]),s=Object(p.useCallback)(function(){return m.a.createElement(m.a.Fragment,null,m.a.createElement(co.a,{msg:r,className:"sk_foreground_max",isSingleLine:!0}),m.a.createElement(uo.a,{msg:r,blockLimit:1,blocksContainerContext:am.a.activity}))},[r]),l=Object(p.useCallback)(function(){if(!a)return!1;var e=H_(i,n);if(e.length<=2){var t=e.map(function(e){return m.a.createElement(B_.a,{className:"p-activity_flexpane__reaction_item_name",userId:e})});return q_.rt("{names} reacted to your message",{names:Object(B.j)(t,{react:!0})})}return q_.rt("<r1>Several people</r1> reacted to your message",null,function(e){var t=e.text;return m.a.createElement("span",{className:"black"},t)})},[n,a,i]);return!(!a||Object(ls.a)(i))&&m.a.createElement(R_,{className:t,message:r,renderAvatar:o,renderBody:s,renderHeader:l})}G_.displayName="ActivityReaction",G_.defaultProps=W_;var K_=Object(g.b)(function(e,t){var n=t.channelId,a=t.messageTs,r=Object(Ze.a)(e,n,a),i=Object(D_.b)(r),o=Object(L_.e)(e,i);return{currentUserId:Object(y.c)(e),featureSonicActivity:Object(y.m)(e,"feature_sonic_activity"),message:r,reactions:o}})(G_);K_.propTypes={channelId:h.b.string.isRequired,messageTs:h.b.string.isRequired};var V_=K_,z_=new B.b("mentions"),Y_=(h.b.func,h.b.bool,h.b.arrayOf(h.b.shape({channelId:h.b.string.isRequired,messageTs:h.b.string.isRequired,threadTs:h.b.string,ts:h.b.string.isRequired,type:h.b.string.isRequired})),h.b.func,h.b.func,h.b.func,h.b.string,h.b.func,{fetchActivity:d.a,isLoading:!1,items:[],onItemTabWithin:d.a,makeMessageSummary:d.a,makeReactionsSummary:d.a,focusKey:null,setFocusKey:d.a}),Q_=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));Object(Kt.a)(n,["getAriaLabelForRow","isFocusableItem","renderListItem","focus","onFocusEnter","onFocusLeave"]);var a=new C_.a({DEFAULT_HEIGHT:150});return n.layout=new di.a({heightCache:a}),n.getItemKeys=Object(O_.createSelector)(function(e){return e.items},function(e){return e.isLoading},function(e,t){var n=["top-anchor-hack"],a=e.map(function(e){return e.type+"-"+e.ts+"-"+e.messageTs});return n.push.apply(n,ti()(a)),t&&n.push("loader"),n}),n.state={hasKeyboardFocus:!1},n.list=m.a.createRef(),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.focusKey,n=e.items;"activity"===t&&n.length&&this.setFocusOnFirstItem()}},{key:"onFocusEnter",value:function(e){this.setState(function(){return{hasKeyboardFocus:e.isKeyboardFocus}})}},{key:"onFocusLeave",value:function(){this.setState(function(){return{hasKeyboardFocus:!1}})}},{key:"setFocusOnFirstItem",value:function(){var e=this.props,t=e.isLoading,n=e.items,a=this.getItemKeys({isLoading:t,items:n})[1],r=this.list.current;r&&r.focusOnKey(a),this.props.setFocusKey(null)}},{key:"getAriaLabelForRow",value:function(e){var t=e.index,n=this.props,a=n.isLoading,r=n.items,i=this.state.hasKeyboardFocus,o=this.getItemKeys({isLoading:a,items:r})[t];if("top-anchor-hack"!==o&&"loader"!==o){var s=r[t-1];if(s)return"reaction"===s.type?{"aria-label":this.props.makeReactionsSummary({channelId:s.channelId,messageTs:s.messageTs,hasFocus:i,viewContext:Ca.H.ACTIVITY_FLEXPANE})}:{"aria-label":this.props.makeMessageSummary({channelId:s.channelId,ts:s.messageTs,hasFocus:i,viewContext:Ca.H.ACTIVITY_FLEXPANE})}}}},{key:"focus",value:function(){var e=this.list.current;e&&e.focus()}},{key:"isFocusableItem",value:function(e){var t=e.index,n=this.props,a=n.isLoading,r=n.items,i=this.getItemKeys({isLoading:a,items:r})[t];return i&&"top-anchor-hack"!==i&&"loader"!==i}},{key:"renderListItem",value:function(e){var t=this.props,n=t.isLoading,a=t.items,r=this.getItemKeys({isLoading:n,items:a});if("top-anchor-hack"===r[e])return m.a.createElement("div",{className:"p-activity_flexpane__top_anchor_hack_item"});if("loader"===r[e])return m.a.createElement(j_,null);var i=a[e-1];if(!i)return null;var o=i===a[a.length-1],s=f()({margin_bottom_0:o&&n});return"reaction"===i.type?m.a.createElement(V_,{key:i.ts,channelId:i.channelId,className:s,messageTs:i.messageTs}):m.a.createElement(F_,{key:i.ts,channelId:i.channelId,className:s,messageTs:i.messageTs})}},{key:"render",value:function(){var e=this,t=this.props,n=t.fetchActivity,a=t.isLoading,r=t.items,i=t.onItemTabWithin;return m.a.createElement(ni.a,null,function(t){var o=t.width,s=t.height;return m.a.createElement(ui.a,{ref:e.list,animateOnScroll:!1,height:s,isFocusableItem:e.isFocusableItem,"aria-label":z_.t("Activity"),getPropsForItem:e.getAriaLabelForRow,keys:e.getItemKeys({isLoading:a,items:r}),layout:e.layout,loadPost:n,rowRenderer:e.renderListItem,width:o,onFocusEnter:e.onFocusEnter,onFocusLeave:e.onFocusLeave,onItemTabWithin:i})})}}]),t}(p.PureComponent);Q_.displayName="ActivityList";var X_=Object(g.b)(function(e){return{focusKey:Object(S_.a)(e)}},function(e){return{setFocusKey:function(t){return e(Object(I_.a)(t))}}},null,{withRef:!0})(Q_);Q_.defaultProps=Y_;h.b.arrayOf(h.b.shape({channelId:h.b.string.isRequired,messageTs:h.b.string.isRequired,threadTs:h.b.string,ts:h.b.string.isRequired,type:h.b.string.isRequired})),h.b.bool,h.b.bool,h.b.func.isRequired;var J_=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.fetchMentions=n.fetchMentions.bind(n),n.fetchMoreMentions=n.fetchMoreMentions.bind(n),n}return u()(t,e),o()(t,[{key:"fetchMentions",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).afterTs;this.props.dispatch(Object(k_.c)({afterTs:e,limit:20}))}},{key:"fetchMoreMentions",value:function(){var e=this.props,t=e.activityList,n=e.hasMore;if(!e.isLoading&&n){var a=t[t.length-1].ts;this.fetchMentions({afterTs:a})}}},{key:"render",value:function(){var e=this.props,t=e.activityList,n=e.isLoading;return m.a.createElement(X_,{fetchActivity:this.fetchMoreMentions,isLoading:n,items:t})}}]),t}(p.Component);J_.displayName="ActivityPage",J_.defaultProps={activityList:[],hasMore:!1,isLoading:!1};var Z_=Object(g.b)(function(e){return{activityList:Object(k_.d)(e),hasMore:Object(k_.e)(e),isLoading:Object(k_.f)(e)}})(J_),$_=n("o18M"),ev=n("uvIC"),tv=n("P9LH"),nv=n("bsix"),av=new B.b("files"),rv=Object(gt.b)("build file summary for aria labels",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.fileId,r=n.hasFocus,i=t();if(Object(Vd.b)(i)||r){var o=Object(ev.c)(i,a);if(o){var s=o.created,l=o.timestamp,c=o.user,u=s||l,d=Object(tv.E)(o)?Object(nv.a)(o):Object(tv.p)(o),p=Object(tv.k)(o),m=Object(eo.W)(i,c),h=Object(Ps.k)(u,{shortenMonth:!1,excludeYear:Object(Ps.i)(u)}),b=Object(Zt.j)(i,"time24"),f=Object(Ps.p)(u,{do24hrTime:b});return av.t("{fileType} file {fileName} uploaded by {userName} on {dateStr} at {timeStr}",{fileType:d,fileName:p,userName:m,dateStr:h,timeStr:f})}}});rv.meta={name:"makeFileSummary",key:"actionsMakeFileSummaryMakeFileSummary",description:"build file summary for aria labels"},rv.propTypes={fileId:h.b.string.isRequired,hasFocus:h.b.bool};var iv=rv,ov=n("BRQ/"),sv=n("0gqo"),lv=(h.b.object.isRequired,h.b.bool,function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.hasReactionOrReplies,n=e.msg;return t?m.a.createElement("div",{className:"p-starred_item_message__reactions_and_replies","data-qa":"starred-item-reaction-reply-bar"},m.a.createElement(ov.a,{msg:n}),m.a.createElement(sv.a,{msg:n,flexOrigin:"starred_items"})):null}}]),t}(m.a.PureComponent));lv.displayName="StarredItemReactionReplyBar",lv.defaultProps={hasReactionOrReplies:!1};var cv=Object(g.b)(function(e,t){var n=t.msg,a=Object(D_.b)(n),r=Object(L_.e)(e,a);return{hasReactionOrReplies:!!(Object(et.S)(n)>0||r&&r.length)}})(lv),uv=(n("2FVR"),h.b.object.isRequired,h.b.string,h.b.string,{className:void 0,"data-qa":void 0}),dv=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.msg,n=e["data-qa"],a=f()("p-starred_item__message",this.props.className);return m.a.createElement(fm.a,{className:a,"data-qa":n},m.a.createElement(gm.a,{msg:t,position:"inside",className:"p-starred_item__message_actions",showComment:!1,showShare:!1,showReact:!1,showJump:!0,showMoreActions:!1,jumpOrigin:"starred_items"},m.a.createElement(io.a,{msg:t},m.a.createElement(oo.a,{light:m.a.createElement(so.a,{msg:t,size:36})},m.a.createElement(lo.a,{msg:t}),"\xa0\xa0",m.a.createElement(ho.a,{msg:t,full:!0}),m.a.createElement("br",null),m.a.createElement(co.a,{msg:t}),m.a.createElement(uo.a,{msg:t,blocksContainerContext:am.a.starred_message}),m.a.createElement(po.a,{msg:t}),m.a.createElement(mo.b,{msg:t}),m.a.createElement(rm.a,{msg:t}),m.a.createElement(w_.a,{flexOrigin:"starred_items",msg:t}),m.a.createElement(cv,{msg:t})))))}}]),t}(p.PureComponent);dv.displayName="StarredItemMessage",dv.defaultProps=uv;var pv=dv,mv=(h.b.object.isRequired,h.b.string.isRequired,h.b.string,h.b.bool,h.b.func,h.b.string,{className:void 0,useRowAction:!0,previewFile:d.a,"data-qa":void 0}),hv=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onFileClick=n.onFileClick.bind(n),n}return u()(t,e),o()(t,[{key:"onFileClick",value:function(e,t){if(t){this.props.previewFile({fileId:t.id,flexOrigin:"starred_items"})}}},{key:"render",value:function(){var e=f()("p-starred_item__message",this.props.className),t=this.props["data-qa"];return this.props.file?m.a.createElement(pi.a,{file:this.props.file,className:e,key:this.props.id,useRowAction:this.props.useRowAction,includeRootDownloadAction:!1,includeRootStarAction:!0,fullWidth:!0,onClick:this.onFileClick,"data-qa":t}):null}}]),t}(p.PureComponent);hv.displayName="StarredItemFile",hv.defaultProps=mv;var bv=Object(g.b)(function(e,t){var n=t.id;return{file:Object(ev.c)(e,n)}},{previewFile:jn.c})(hv),fv=(h.b.object,h.b.string,h.b.string,h.b.string,{comment:void 0,fileId:void 0,className:void 0,"data-qa":void 0}),gv=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.comment,n=e.fileId,a=e.className,r=e["data-qa"];if(!t)return null;var i={user:t.user,ts:t.timestamp.toString(),subtype:"file_comment",comment:t,files:[n]};return m.a.createElement(pv,{msg:i,className:a,"data-qa":r})}}]),t}(p.PureComponent);gv.displayName="StarredItemFileComment",gv.defaultProps=fv;var _v=Object(g.b)(function(e,t){var n=t.fileId,a=t.commentId;return{comment:Object(ev.d)(e,n,a)}})(gv),vv=new B.b("starred_items"),yv=yp(pv),kv=(h.b.func,h.b.bool,h.b.arrayOf(h.b.object.isRequired),h.b.func.isRequired,h.b.func.isRequired,h.b.func,h.b.string,h.b.func,{fetchMoreItems:d.a,isLoading:!1,items:void 0,onItemTabWithin:d.a,focusKey:null,setFocusKey:d.a}),Ov="message",Cv="file",Ev="file_comment",jv=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["renderItem","isFocusableItem","getAriaLabelForRow","onFocusEnter","onFocusLeave"]),n.getItemKeys=Object(O_.createSelector)(function(e){return e.items},function(e){return e.isLoading},function(e,t){var a=["top-anchor-hack"],r=e.map(function(e){return n.getStarredItemId(e)});return a.push.apply(a,ti()(r)),t&&a.push("loader"),a}),n.list=m.a.createRef(),n.state={hasKeyboardFocus:!1},n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.focusKey,n=e.items;"stars"===t&&n.length&&this.setFocusOnFirstItem()}},{key:"onFocusEnter",value:function(e){this.setState(function(){return{hasKeyboardFocus:e.isKeyboardFocus}})}},{key:"onFocusLeave",value:function(){this.setState(function(){return{hasKeyboardFocus:!1}})}},{key:"setFocusOnFirstItem",value:function(){var e=this.props,t=e.isLoading,n=e.items,a=this.getItemKeys({isLoading:t,items:n})[1],r=this.list.current;r&&r.focusOnKey(a),this.props.setFocusKey(null)}},{key:"getStarredItemId",value:function(e){switch(e.type){case Ov:return e.channel+e.ts;case Cv:case Ev:return e.id;default:return null}}},{key:"getAriaLabelForRow",value:function(e){var t=e.index,n=this.props.items,a=this.state.hasKeyboardFocus,r=n[t-1];if(r&&r.type)return r.type===Ov?{"aria-label":this.props.makeMessageSummary({channelId:r.channel,ts:r.ts,hasFocus:a,viewContext:Ca.H.STARS_FLEXPANE})}:{"aria-label":this.props.makeFileSummary({fileId:r.id,hasFocus:a})}}},{key:"focus",value:function(){var e=this.list.current;e&&e.focus()}},{key:"isFocusableItem",value:function(e){var t=e.index,n=this.props,a=n.isLoading,r=n.items,i=this.getItemKeys({isLoading:a,items:r})[t];return!!i&&("top-anchor-hack"!==i&&"loader"!==i)}},{key:"renderItem",value:function(e){var t=this.props,n=t.isLoading,a=t.items,r=this.getItemKeys({isLoading:n,items:a});if("top-anchor-hack"===r[e])return m.a.createElement("div",{className:"p-starred_item__top_anchor_item_hack"});if("loader"===r[e])return m.a.createElement(j_,null);var i=a[e-1],o={key:this.getStarredItemId(i),className:f()("c-message_kit__message","p-starred_item",{"p-starred_item--first":i===a[0]}),"data-qa":"starred_item_"+i.type};switch(i.type){case Ov:return m.a.createElement(yv,ye()({},o,{channelId:i.channel,ts:i.ts}));case Cv:return m.a.createElement(bv,ye()({},o,{id:i.id}));case Ev:return m.a.createElement(_v,ye()({},o,{fileId:i.fileId,commentId:i.id}));default:return null}}},{key:"render",value:function(){var e=this,t=this.props,n=t.isLoading,a=t.items,r=t.onItemTabWithin;return m.a.createElement(ni.a,null,function(t){var i=t.width,o=t.height;return m.a.createElement(ui.a,{ref:e.list,width:i,height:o,keys:e.getItemKeys({isLoading:n,items:a}),rowRenderer:e.renderItem,loadPost:e.props.fetchMoreItems,animateOnScroll:!1,"aria-label":vv.t("Starred Items"),getPropsForItem:e.getAriaLabelForRow,isFocusableItem:e.isFocusableItem,onFocusEnter:e.onFocusEnter,onFocusLeave:e.onFocusLeave,onItemTabWithin:r})})}}]),t}(p.PureComponent);jv.displayName="StarredItemsList",jv.defaultProps=kv;var Sv=Object(g.b)(function(e){return{focusKey:Object(S_.a)(e)}},function(e){return{makeMessageSummary:function(){return e(Xd.apply(void 0,arguments))},makeFileSummary:function(){return e(iv.apply(void 0,arguments))},setFocusKey:function(t){return e(Object(I_.a)(t))}}})(function(e){var t=e.forwardedRef,n=Ep()(e,["forwardedRef"]);return m.a.createElement(jv,ye()({ref:t},n))}),Iv=m.a.forwardRef(function(e,t){return m.a.createElement(Sv,ye()({forwardedRef:t},e))}),wv=(h.b.bool,h.b.arrayOf(h.b.object.isRequired),h.b.string,h.b.func.isRequired,{isLoading:!1,starredItems:void 0,cursorMark:void 0}),Nv=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.fetchMoreStarredItems=n.fetchMoreStarredItems.bind(n),n}return u()(t,e),o()(t,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.starredItems,a=t.cursorMark;!Object(ls.a)(e.starredItems)&&Object(ls.a)(n)&&a&&this.fetchStarredItems(a)}},{key:"fetchStarredItems",value:function(e){var t=this;return!this.requestStars&&(this.requestStars=this.props.dispatch(Object($_.c)({exclude:"Ch,Gh,Dh",limit:20,cursor:e})),this.requestStars.finally(function(){t.requestStars=null}))}},{key:"fetchMoreStarredItems",value:function(){var e=this.props,t=e.isLoading,n=e.cursorMark;t||n&&this.fetchStarredItems(n)}},{key:"render",value:function(){return m.a.createElement(Iv,{fetchMoreItems:this.fetchMoreStarredItems,isLoading:this.props.isLoading,items:this.props.starredItems})}}]),t}(p.Component);Nv.displayName="StarsPage",Nv.defaultProps=wv;var Tv=Object(g.b)(function(e){return{isLoading:Object($_.f)(e),starredItems:Object($_.d)(e),totalPages:Object($_.g)(e),cursorMark:Object($_.e)(e)}})(Nv),Av=n("glRj"),Rv=(n("CoJr"),new B.b("files")),Pv=Object(mi.a)(pi.a),Mv=(h.b.array,h.b.string,h.b.string,h.b.string.isRequired,h.b.func.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.requestPre=null,n.requestPost=null,n.reachedStart=!1,n.reachedEnd=!1,n.keys=null,n.layout=new di.a,n.layout.heightCache.DEFAULT_HEIGHT=69,n.onFileClick=n.onFileClick.bind(n),n.onScroll=n.onScroll.bind(n),n.fetchPre=n.fetchPre.bind(n),n.fetchPost=n.fetchPost.bind(n),n.fetchAround=n.fetchAround.bind(n),n.renderRow=n.renderRow.bind(n),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.dispatch(Object(Av.k)(this.props.currentUserId))}},{key:"onFileClick",value:function(e){var t=e.id;t&&this.props.dispatch(Object(jn.c)({fileId:t}))}},{key:"onScroll",value:function(){this.layout.anchor&&this.layout.setAnchor(!1)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props,n=t.filetype,a=t.user;e.filetype===n&&e.user===a||(this.requestPre&&this.requestPre.cancel(),this.requestPost&&this.requestPost.cancel(),this.requestPre=null,this.requestPost=null,this.reachedStart=!1,this.reachedEnd=!1,this.layout&&this.layout.setAnchor(!1))}},{key:"fetchAround",value:function(){return(!this.requestPre||!this.requestPost)&&(this.reachedEnd?this.fetchPre():this.reachedStart?this.fetchPost():this.fetchPre())}},{key:"fetchPost",value:function(){var e=this;return!this.requestPost&&(!this.reachedEnd&&(this.requestPost=this.props.dispatch(Object(Av.b)({types:this.props.filetype,user:this.props.user})),this.requestPost.then(function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).paging;t.page>=t.pages&&(e.reachedEnd=!0)}).finally(function(){e.requestPost=null})))}},{key:"fetchPre",value:function(){var e=this;return!this.requestPre&&(!this.reachedStart&&(this.requestPre=this.props.dispatch(Object(Av.c)({types:this.props.filetype,user:this.props.user})),this.requestPre.then(function(){1===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).paging.page&&(e.reachedStart=!0)}).finally(function(){e.requestPre=null})))}},{key:"isEmpty",value:function(){return!this.props.files.length&&this.reachedStart&&this.reachedEnd}},{key:"renderFile",value:function(e){var t=this.props.files[e]&&this.props.files[e].id;if(!t)return null;var n=e===this.props.files.length-1,a=f()("p-file_list__file",{"p-file_list__file--last":n});return m.a.createElement(Pv,{fileId:t,className:a,clogLinkClick:this.clogFileClick,fullWidth:!0,useRowAction:!0})}},{key:"renderRow",value:function(e){var t=this.keys[e];if(!t)return null;switch(t[0]){case"L":return m.a.createElement("div",{className:"p-file_list__loading"},Rv.t("Loading\u2026"));case"P":return m.a.createElement("div",{className:"p-file_list__empty"},Rv.t("No matching files were found."));default:return this.renderFile(e)}}},{key:"render",value:function(){var e=this,t=this.props.files.map(function(e){return e.id});return this.keys=[].concat(ti()(t)),this.reachedEnd||this.keys.push("Loading"+this.keys.length),this.isEmpty()&&this.keys.push("Placeholder"),m.a.createElement("div",{className:"p-files_page__container"},m.a.createElement(ni.a,null,function(t){var n=t.width,a=t.height;return m.a.createElement(ui.a,{width:n,height:a,keys:e.keys,layout:e.layout,rowRenderer:e.renderRow,onScroll:e.onScroll,ref:e.list,loadAround:e.fetchAround,loadPre:e.fetchPre,loadPost:e.fetchPost,onItemClick:e.onFileClick,"aria-label":Rv.t("Files")})}))}}]),t}(p.Component));Mv.displayName="FilesPage",Mv.defaultProps={files:[],user:"",filetype:""};var xv=Object(g.b)(function(e){return{files:Object(Av.e)(e),user:Object(Av.g)(e),filetype:Object(Av.d)(e),currentUserId:Object(y.c)(e)}})(Mv),Fv=n("nlS/"),Lv=n("g9w/"),Dv=n("WTjW"),Uv=(h.b.string,h.b.string,h.b.string,h.b.func.isRequired,{className:void 0,user:"",filetype:""}),Bv=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderMemberOption=n.renderMemberOption.bind(n),n.renderSelectedMemberOption=n.renderSelectedMemberOption.bind(n),n.processMemberOptions=n.processMemberOptions.bind(n),n.onMemberSelected=n.onMemberSelected.bind(n),n.onFiletypeSelected=n.onFiletypeSelected.bind(n),n}return u()(t,e),o()(t,[{key:"onMemberSelected",value:function(e){this.props.dispatch(Object(Av.k)(e.value))}},{key:"onFiletypeSelected",value:function(e){this.props.dispatch(Object(Av.j)(e.value))}},{key:"processMemberOptions",value:function(e,t){return t&&t.length>0?Promise.resolve(e):Promise.resolve([{value:"",label:"Anyone"}].concat(ti()(e)))}},{key:"renderSelectedMemberOption",value:function(e){var t=""===e.value?e.label:m.a.createElement(Dv.a,{id:e.value});return m.a.createElement("span",null,"From: ",m.a.createElement("strong",null,t))}},{key:"renderMemberOption",value:function(e){return""===e.value?m.a.createElement("strong",null,e.label):m.a.createElement(Jb.a,{id:e.value})}},{key:"renderMemberSelect",value:function(){var e=this.props.user;return m.a.createElement(Fv.d,{key:e,renderOption:this.renderMemberOption,renderSelectedOption:this.renderSelectedMemberOption,selectedOption:{value:e,label:e||"Anyone"},searcherOptions:{entities:{members:{includeSelf:!0,onlyLocalTeam:!0}},sort:{selfFirst:!0},allowEmptyQuery:!0},processOptions:this.processMemberOptions,onOptionSelected:this.onMemberSelected})}},{key:"renderFiletypeSelect",value:function(){var e=this,t=[{label:"All File Types",value:""},{label:"Posts",value:"docs"},{label:"Snippets",value:"snippets"},{label:"Emails",value:"emails"},{label:"Images",value:"images"},{label:"Videos",value:"videos"},{label:"PDF Files",value:"pdfs"},{label:"Spreadsheets",value:"spreadsheets"},{label:"Google Docs",value:"gdocs"}];return m.a.createElement(Lv.a,{className:"p-files_page__header__controls__filetype",options:t,selectedOption:t.find(function(t){return t.value===e.props.filetype}),onOptionSelected:this.onFiletypeSelected})}},{key:"render",value:function(){var e=this.props.className;return m.a.createElement("div",{className:f()(e,"p-files_page__header")},m.a.createElement("div",{className:"p-files_page__header__title"},"Files"),m.a.createElement("div",{className:"p-files_page__header__controls"},this.renderFiletypeSelect(),this.renderMemberSelect()))}}]),t}(p.Component);Bv.displayName="FilesHeader",Bv.defaultProps=Uv;var qv=Object(g.b)(function(e){return{user:Object(Av.g)(e),filetype:Object(Av.d)(e)}})(Bv),Hv=Object(Je.b)(function(e){return e&&e.memberDirectoryFlexpane&&e.memberDirectoryFlexpane.memberIds});Hv.meta={name:"getFlexpaneMemberIds",key:"memberDirectoryFlexpaneStoreMemberDirectoryFlexpaneSelectorsGetFlexpaneMemberIds"};var Wv=Object(Je.b)(function(e){return e&&e.memberDirectoryFlexpane&&e.memberDirectoryFlexpane.nonExactMatchMemberIds});Wv.meta={name:"getFlexpaneNonExactMatchMemberIds",key:"memberDirectoryFlexpaneStoreMemberDirectoryFlexpaneSelectorsGetFlexpaneNonExactMatchMemberIds"};var Gv=Object(Je.b)(function(e){return e&&e.memberDirectoryFlexpane&&e.memberDirectoryFlexpane.scrollmark});Gv.meta={name:"getScrollmark",key:"memberDirectoryFlexpaneStoreMemberDirectoryFlexpaneSelectorsGetScrollmark"};var Kv=Object(Je.b)(function(e){return e&&e.memberDirectoryFlexpane&&e.memberDirectoryFlexpane.marker});Kv.meta={name:"getMarker",key:"memberDirectoryFlexpaneStoreMemberDirectoryFlexpaneSelectorsGetMarker"};var Vv=Object(Je.b)(function(e){return e&&e.memberDirectoryFlexpane&&e.memberDirectoryFlexpane.searchQuery});Vv.meta={name:"getSearchQuery",key:"memberDirectoryFlexpaneStoreMemberDirectoryFlexpaneSelectorsGetSearchQuery"};var zv=Object(Je.b)(function(e){return e&&e.memberDirectoryFlexpane&&e.memberDirectoryFlexpane.filter});zv.meta={name:"getFilter",key:"memberDirectoryFlexpaneStoreMemberDirectoryFlexpaneSelectorsGetFilter"};var Yv=n("l4bA"),Qv=n("YhFg"),Xv=n("k2C/"),Jv=n("l+8s"),Zv=n("qPro"),$v=n("CPJ1"),ey=n("eJ6O"),ty=n("Fuyg"),ny=Object(gt.b)("Fetch and upsert membersIds displayed in member directory flexpane",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.isNonExactMatchMembersSearch,r=void 0!==a&&a,i=Ep()(n,["isNonExactMatchMembersSearch"]),o=t(),s=Object(ey.a)(o)&&Object(ra.a)(o,"display_email_addresses"),l=i.searchQuery||"",c=l.indexOf("@")>0||l.indexOf("\uff20")>0,u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.searchQuery,n=void 0===t?"":t,a=e.marker,r=void 0===a?"":a,i=e.index,o=void 0===i?"":i,s=e.filter,l=void 0===s?"":s,c=Object(Xv.a)(l)||Object(Xv.b)(l),u={count:n?100:10,index:o,locale:Object(Yo.f)(),external_team:c?l:void 0,filter:c?"people":l};return n?(u.query=n,u.search_profile_fields=!0):u.marker=r,u}(i);return e(Object($v.d)({query:u})).then(function(t){var n=t.members,a=void 0===n?[]:n,o=t.next_marker,u=a;if("deactivated"===i.filter&&(u=a.filter(function(e){return e&&!e.is_bot})),s&&c){var d=Object(ty.a)(l);u=a.filter(function(e){return Object(ty.a)(Object(eo.v)(e)).startsWith(d)})}var p=u.map(function(e){return e.id});return e(r?Object(Yv.b)(p):Object(Yv.a)(p)),o&&e(Object(Yv.e)(o)),{members:a,nextMarker:o}})});ny.meta={name:"listAndUpsertMembers",key:"memberDirectoryFlexpaneStoreMemberDirectoryFlexpaneThunksListAndUpsertMembers",description:"Fetch and upsert membersIds displayed in member directory flexpane"},ny.propTypes={searchQuery:h.b.string,marker:h.b.string,index:h.b.string,filter:h.b.string,isNonExactMatchMembersSearch:h.b.bool};var ay=Object(gt.b)("Fetch and upsert members",function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).isNonExactMatchMembersSearch,a=void 0!==n&&n,r=t(),i=Vv(r),o=Kv(r),s=a?"people":zv(r),l=Object(Zt.k)(r)?"users_by_realname":"users_by_display_name";return e(ny({searchQuery:i,marker:o,index:l,filter:s,isNonExactMatchMembersSearch:a}))});ay.meta={name:"fetchMembersPost",key:"memberDirectoryFlexpaneStoreMemberDirectoryFlexpaneThunksFetchMembersPost",description:"Fetch and upsert members"},ay.propTypes={isNonExactMatchMembersSearch:h.b.bool};var ry=n("iH/p"),iy=n("Xuqh"),oy=n("P+mv"),sy=n("FQfs"),ly=(h.b.string.isRequired,h.b.func,h.b.shape({track:h.b.func.isRequired}).isRequired,h.b.number.isRequired,h.b.number.isRequired,h.b.string.isRequired,h.b.object.isRequired,h.b.bool,h.b.func,{showMemberProfile:d.a,saveScrollmarkForKey:d.a,featureFantailNurture:!1}),cy=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return u()(t,e),o()(t,[{key:"onClick",value:function(){var e=this.props,t=e.id,n=e.member,a=e.searchQuery,r=e.featureFantailNurture,i=e.clogger;this.props.showMemberProfile({memberId:t}),this.props.saveScrollmarkForKey(t);var o=new oy.a({query:a,options:{entities:{members:{matchEmailField:r}},sort:{preferExactMatch:!0}}}),s=o.scoreMember(n).scoreDetails,l=o.isMemberExactMatch(n),c=o.getMemberExactMatchDetails(n);i.track("ORGANIZATION_DIRECTORY_CLICK",{organization_directory_query_length:a.length,organization_directory_results_length:this.props.numResults,organization_directory_selected_position:this.props.index,organization_directory_selected_id:n.id,organization_directory_selected_match_details:{is_exact_match:l,exact_match_details:c,score_details:s}})}},{key:"render",value:function(){var e=this.props.id;return m.a.createElement("div",{className:"p-member_directory__member_row","data-qa":"member_directory_show_profile","data-qa-member":e,role:"presentation",onClick:this.onClick},m.a.createElement(sy.a,{id:e}))}}]),t}(p.Component);cy.displayName="SearchableMemberListMember",cy.defaultProps=ly;var uy={showMemberProfile:function(){return jn.j.apply(void 0,arguments)},saveScrollmark:function(){return Yv.c.apply(void 0,arguments)}},dy=Object(g.b)(function(e,t){var n=t.id;return{clogger:Object(re.a)({state:e}),member:Object(xo.d)(e,n),searchQuery:Vv(e),featureFantailNurture:Object(ey.a)(e)}},uy)(cy),py=(n("GhVE"),new B.b("member_directory")),my=(h.b.arrayOf(h.b.string),h.b.shape({key:h.b.string,offset:h.b.number}),h.b.string,h.b.func,h.b.string,h.b.func,h.b.func,h.b.func,h.b.arrayOf(h.b.string),h.b.bool,h.b.bool,h.b.string,h.b.shape({track:h.b.func.isRequired}).isRequired,h.b.func,h.b.bool,h.b.bool,h.b.bool,h.b.func,{memberIds:[],scrollmark:void 0,searchQuery:void 0,setSearchQuery:d.a,filter:"people",setFilter:d.a,fetchMembersPost:d.a,saveScrollmark:d.a,nonExactMatchMemberIds:[],isEnterprise:!1,isFreeTeamAdmin:!1,"aria-label":void 0,openFromOrgDirectory:d.a,featureSonicMemberDirectory:!1,featureFantailNurture:!1,onItemTabWithin:d.a,displayEmailAddresses:!1}),hy=100,by=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["onScroll","onClearSearch","onClickSearchInProductEducation","onViewMatchesClick","onPricingClick","saveScrollmarkForKey","fetchPost","fetchAround","fetchMembers","fetchNonExactMatchMembers","renderRow","getListKeys","shouldFetchNonExactMembers","isFocusableItem","focus"]),n.requestPost=null,n.requestNonExactMatchMembers=null,n.keys=null,n.list=m.a.createRef(),n.layout=new di.a,n.layout.heightCache.DEFAULT_HEIGHT=60,n.state={reachedEnd:!1},n.debouncedFetchPost=Object(Gt.a)(n.fetchPost,hy),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){if(this.props.scrollmark){var e=this.props.scrollmark,t=e.key,n=e.offset;this.layout.setAnchor(t,n),this.props.saveScrollmark(null)}}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.searchQuery,a=t.filter,r=t.clogger;e.searchQuery===n&&e.filter===a||(this.requestPost&&this.requestPost.cancel(),this.requestNonExactMatchMembers&&this.requestNonExactMatchMembers.cancel(),this.requestPost=null,this.requestNonExactMatchMembers=null,this.layout&&this.layout.setAnchor(!1),this.setReachedEnd(!1,this.fetchAround),e.searchQuery!==n&&r.track("ORGANIZATION_DIRECTORY_KEYPRESS",{}),e.filter!==a&&r.track("ORGANIZATION_DIRECTORY_FILTER",{organization_directory_filter:a}))}},{key:"componentWillUnmount",value:function(){this.requestPost&&this.requestPost.cancel(),this.requestNonExactMatchMembers&&this.requestNonExactMatchMembers.cancel()}},{key:"onScroll",value:function(){this.layout.anchor&&this.layout.setAnchor(!1)}},{key:"onClearSearch",value:function(){this.props.setSearchQuery(""),this.props.setFilter("people")}},{key:"onClickSearchInProductEducation",value:function(){this.props.openFromOrgDirectory({query:this.props.searchQuery})}},{key:"onViewMatchesClick",value:function(){this.props.setFilter("people")}},{key:"onPricingClick",value:function(){this.props.clogger.track("GROWTH_PRICING",{contexts:{ui_context:{ui_element:"pricing_link",step:"team_directory",action:"click"}}})}},{key:"setReachedEnd",value:function(e,t){this.setState(function(){return{reachedEnd:e}},t)}},{key:"getListKeys",value:function(){return this.props.memberIds.filter(function(e){return"L"!==e[0]})}},{key:"getNonExactMatchEmptyStateLabel",value:function(){if(!this.props.featureSonicMemberDirectory)return null;var e=this.props,t=e.filter,n=e.isEnterprise,a=e.searchQuery,r={query:m.a.createElement("strong",null,a)};switch(t){case"admins":return n?py.rt("No workspace admins match {query}, but there are other members who do.",r):py.rt("No admins match {query}, but there are other members who do.",r);case"bots":return py.rt("No bots match {query}, but there are other members who do.",r);case"org_members":return py.rt("No members match {query}, but there are other members who do.",r);case"org_admins":return py.rt("No org admins match {query}, but there are other members who do.",r);case"guests":return py.rt("No guests match {query}, but there are other members who do.",r);case"deactivated":return py.rt("No deactivated members match {query}, but there are other members who do.",r);default:return py.rt("No members match {query}, but there are other members who do.",r)}}},{key:"focus",value:function(){var e=this.list.current;e&&e.focus()}},{key:"saveScrollmarkForKey",value:function(e){var t=this.list.current;t&&e&&this.props.saveScrollmark({key:e,offset:this.layout.getOffsetForKey(e)-t.getScrollTop()})}},{key:"fetchPost",value:function(){var e=this;return!this.requestPost&&(!this.state.reachedEnd&&(this.requestPost=this.fetchMembers(),this.requestPost.finally(function(){e.requestPost=null})))}},{key:"shouldFetchNonExactMembers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.props,n=t.filter,a=t.searchQuery;return!Object(ls.a)(a)&&"people"!==n&&0===e.length}},{key:"fetchMembers",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.props.fetchMembersPost({isNonExactMatchMembersSearch:t}).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.nextMarker,a=t.members;!e.props.searchQuery&&n||e.setReachedEnd(!0),e.shouldFetchNonExactMembers(a)&&e.fetchNonExactMatchMembers()})}},{key:"fetchAround",value:function(){return!this.requestPost&&!this.state.reachedEnd&&this.debouncedFetchPost()}},{key:"fetchNonExactMatchMembers",value:function(){var e=this;if(this.requestNonExactMatchMembers)return!1;return this.requestNonExactMatchMembers=this.fetchMembers(!0),this.requestNonExactMatchMembers.finally(function(){e.requestNonExactMatchMembers=null})}},{key:"isFocusableItem",value:function(e){var t=e.key;return t!==this.loadingIndicatorKey&&"SearchInProductEducation"!==t}},{key:"renderRow",value:function(e){if(!this.props.featureSonicMemberDirectory)return null;var t=this.keys[e];return t?t===this.loadingIndicatorKey?m.a.createElement("div",{className:"p-member-directory__loading"},py.t("Loading\u2026")):"SearchInProductEducation"===t?this.renderSearchInProductEducation():this.renderMember({id:t,index:e}):null}},{key:"renderSearchInProductEducation",value:function(){var e=this.props.searchQuery.indexOf("@")>0;return this.props.featureFantailNurture&&!this.props.displayEmailAddresses&&e?m.a.createElement(iy.a,{"data-qa":"workspace-directory-search-email-hint",className:"p-member-directory__empty_list",description:py.t("Searching for people by email has been disabled in this workspace. Questions? Contact a Workspace Admin.",{ns:"search"})}):m.a.createElement(iy.a,{"data-qa":"workspace-directory-search-in-product-education",className:"p-member-directory__empty_list",description:py.t("No luck? You can also search for people based on the topics they talk about.",{ns:"search"}),primaryActionText:py.t("Search by Topic",{ns:"search"}),onClickPrimaryAction:this.onClickSearchInProductEducation})}},{key:"renderMember",value:function(e){var t=e.id,n=e.index;return m.a.createElement(dy,{id:t,index:n,numResults:this.keys.length,saveScrollmarkForKey:this.saveScrollmarkForKey})}},{key:"renderEmptyListView",value:function(){var e=this;if(!this.props.featureSonicMemberDirectory)return null;var t=this.props,n=t.searchQuery,a=t.nonExactMatchMemberIds,r=t.filter,i=t.isFreeTeamAdmin,o=t.clogger,s=py.t("Clear Search"),l=py.t("View Matches");if(a.length)return m.a.createElement(iy.a,{className:"p-member-directory__empty_list",description:this.getNonExactMatchEmptyStateLabel(),primaryActionText:l,onClickPrimaryAction:this.onViewMatchesClick,secondaryActionText:s,onClickSecondaryAction:this.onClearSearch});if(!n&&"guests"===r&&i){var c=py.rt("Workspaces on paid plans can invite guests, like contractors, vendors, or clients. <a>See pricing plans</a>",null,function(t){var n=t.key,a=t.text;return m.a.createElement(ug.a,{key:n,href:"/pricing?ui_step=86&ui_element=5",class:"no_underline",target:"_blank",onClick:e.onPricingClick},a)});return o.track("GROWTH_PRICING",{contexts:{ui_context:{step:"team_directory",action:"impression"}}}),m.a.createElement(iy.a,{className:"p-member-directory__empty_list",description:c,primaryActionText:s,onClickPrimaryAction:this.onClearSearch})}return this.renderSearchInProductEducation()}},{key:"render",value:function(){var e=this;return this.keys=this.getListKeys(),!this.keys.length&&this.state.reachedEnd?this.renderEmptyListView():(this.state.reachedEnd?this.keys.push("SearchInProductEducation"):(this.loadingIndicatorKey="Loading"+this.keys.length,this.keys.push(this.loadingIndicatorKey)),m.a.createElement(sb.a,null,function(t){var n=t.measureRef,a=t.width,r=t.height;return m.a.createElement("div",{className:"p-member_directory__member_list",ref:n},m.a.createElement(ui.a,{width:a,height:r,keys:e.keys,layout:e.layout,rowRenderer:e.renderRow,onScroll:e.onScroll,ref:e.list,loadAround:e.fetchAround,loadPost:e.debouncedFetchPost,isFocusableItem:e.isFocusableItem,onItemTabWithin:e.props.onItemTabWithin,"aria-label":e.props["aria-label"]}))}))}}]),t}(p.PureComponent);by.displayName="SearchableMemberList",by.defaultProps=my;var fy={fetchMembersPost:ay,saveScrollmark:Yv.c,setSearchQuery:Yv.f,setFilter:Yv.d,openFromOrgDirectory:ry.f},gy=Object(g.b)(function(e){return{scrollmark:Gv(e),searchQuery:Vv(e),filter:zv(e),memberIds:Hv(e),nonExactMatchMemberIds:Wv(e),isEnterprise:Object(ig.d)(e),isFreeTeamAdmin:!Object(De.D)(Object(we.d)(e))&&Object(eo.eb)(Object(xo.b)(e)),clogger:Object(re.a)({state:e}),featureSonicMemberDirectory:Object(y.m)(e,"feature_sonic_member_directory"),featureFantailNurture:Object(ey.a)(e),displayEmailAddresses:Object(ra.a)(e,"display_email_addresses")}},fy)(function(e){var t=e.forwardedRef,n=Ep()(e,["forwardedRef"]);return m.a.createElement(by,ye()({ref:t},n))}),_y=m.a.forwardRef(function(e,t){return m.a.createElement(gy,ye()({forwardedRef:t},e))}),vy=(n("cYut"),new B.b("member_directory")),yy=(h.b.bool,h.b.bool,h.b.string,h.b.func,h.b.string,h.b.string,h.b.array,h.b.object,h.b.bool,{featureSonicMemberDirectory:!1,isEnterprise:!1,selectedFilter:void 0,onMenuItemSelected:d.a,workspaceName:void 0,enterpriseOrgName:void 0,externalWorkspaces:[],menuProps:void 0,featureMemberDirWorkspaceFilterFirst:!1}),ky="people",Oy="org_members",Cy="org_admins",Ey="members",jy="admins",Sy="bots",Iy="guests",wy="deactivated",Ny=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.memberDirectoryStrings=n.props.featureSonicMemberDirectory?{people:vy.t("Everyone"),org_members:vy.t("All Members"),org_admins:vy.t("Org Admins"),members:vy.t("All Members"),admins:n.props.isEnterprise?vy.t("Workspace Admins"):vy.t("Admins"),bots:vy.t("Bots"),guests:vy.t("Guests"),deactivated:vy.t("Deactivated accounts")}:null,n}return u()(t,e),o()(t,null,[{key:"menuSeparator",value:function(){return{type:"separator"}}}]),o()(t,[{key:"getLabel",value:function(e){return this.memberDirectoryStrings[e]}},{key:"getWorkspaceSectionLabel",value:function(){var e=this.props,t=e.isEnterprise,n=e.externalWorkspaces,a=e.workspaceName;if(!e.featureSonicMemberDirectory)return null;var r=n.length>0;return t?vy.t("{workspaceName} (current workspace)",{workspaceName:a}):r?a:""}},{key:"buildMenuItemTemplate",value:function(e){var t=this.props,n=t.selectedFilter,a=t.onMenuItemSelected,r=m.a.createElement(ta.b,{type:"check-small",className:"p-member_directory_menu--icon"});return{label:this.getLabel(e),click:function(){return a(e)},icon:n===e?r:null,className:n===e?"p-member_directory_menu--selected-item":""}}},{key:"maybeBuildOrgFilterSection",value:function(){var e=this.props,n=e.isEnterprise,a=e.enterpriseOrgName;if(!n)return[];var r={type:"header",label:a};return[t.menuSeparator(),r,this.buildMenuItemTemplate(Oy),this.buildMenuItemTemplate(Cy)]}},{key:"buildWorkspaceFilterSection",value:function(){var e={type:"header",label:this.getWorkspaceSectionLabel()};return[t.menuSeparator(),e,this.buildMenuItemTemplate(Ey),this.buildMenuItemTemplate(jy),this.buildMenuItemTemplate(Iy),this.buildMenuItemTemplate(Sy)]}},{key:"maybeBuildExternalWorkspaceSection",value:function(){var e=this.props,n=e.externalWorkspaces,a=e.selectedFilter,r=e.onMenuItemSelected;if(!e.featureSonicMemberDirectory)return null;var i=n.length>0,o=m.a.createElement(ta.b,{type:"check-small",className:"p-member_directory_menu--icon"});if(!i)return[];var s={type:"header",label:vy.t("External Organizations")},l=n.map(function(e){var t=Object(De.j)(e);return{label:Object(De.f)(e),click:function(){return r(t)},icon:a===t?o:null,className:a===t?"p-member_directory_menu--selected-item":""}});return[t.menuSeparator(),s].concat(ti()(l))}},{key:"render",value:function(){var e=this.props,n=e.featureSonicMemberDirectory,a=e.menuProps,r=e.featureMemberDirWorkspaceFilterFirst;if(!n)return null;var i=void 0;i=r?[].concat(ti()(this.buildWorkspaceFilterSection()),ti()(this.maybeBuildOrgFilterSection())):[].concat(ti()(this.maybeBuildOrgFilterSection()),ti()(this.buildWorkspaceFilterSection()));var o=[this.buildMenuItemTemplate(ky)].concat(ti()(i),ti()(this.maybeBuildExternalWorkspaceSection()),[t.menuSeparator(),this.buildMenuItemTemplate(wy)]);return m.a.createElement(na.a,ye()({},a,{template:o}))}}]),t}(p.PureComponent);Ny.displayName="MemberDirectoryMenu";Ny.defaultProps=yy;var Ty=Object(g.b)(function(e,t){var n=t.externalTeams,a=Object(we.d)(e),r=Object(y.q)(e),i={featureSonicMemberDirectory:Object(y.m)(e,"feature_sonic_member_directory"),workspaceName:Object(De.f)(a),isEnterprise:r,externalWorkspaces:n.map(function(t){return Object(we.i)(e,t)}),featureMemberDirWorkspaceFilterFirst:Object(y.m)(e,"feature_member_dir_workspace_filter_first")};return r&&(i.enterpriseOrgName=Object(we.e)(e)),i})(Ny),Ay=(n("VGdo"),new B.b("member_directory")),Ry=(h.b.string,h.b.string,h.b.bool,h.b.func.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onMenuItemSelected=n.onMenuItemSelected.bind(n),n.onFilterIconClick=n.onFilterIconClick.bind(n),n.onFilterInputChange=n.onFilterInputChange.bind(n),n.onFilterInputBlur=n.onFilterInputBlur.bind(n),n.onFilterInputReset=n.onFilterInputReset.bind(n),n.renderMenu=n.renderMenu.bind(n),n.state={externalTeams:[],isFilterExpanded:!1},n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.fetchExternalTeams()}},{key:"onMenuItemSelected",value:function(e){this.props.dispatch(Object(Yv.d)(e))}},{key:"onFilterIconClick",value:function(){this.setState(function(){return{isFilterExpanded:!0}})}},{key:"onFilterInputChange",value:function(e){var t=e.target.value||"";this.props.dispatch(Object(Yv.f)(t))}},{key:"onFilterInputBlur",value:function(){""===this.props.searchQuery&&this.setState(function(){return{isFilterExpanded:!1}})}},{key:"onFilterInputReset",value:function(){this.setState(function(){return{isFilterExpanded:!1}})}},{key:"fetchExternalTeams",value:function(){var e=this;this.props.dispatch(Object(Qv.a)()).then(function(t){t&&t.external_teams&&e.setState(function(){return{externalTeams:Object.keys(t.external_teams)}})})}},{key:"renderMenu",value:function(e){return m.a.createElement(Ty,{onMenuItemSelected:this.onMenuItemSelected,selectedFilter:this.props.filter,menuProps:e,externalTeams:this.state.externalTeams})}},{key:"render",value:function(){var e=this.props,t=e.filter,n=e.searchQuery,a=this.state.isFilterExpanded||n?m.a.createElement(Zv.a,{value:n,onChange:this.onFilterInputChange,onBlur:this.onFilterInputBlur,onReset:this.onFilterInputReset,placeholder:Ay.t("Search by name or title"),icon:"search",size:"small",autoFocus:!0,inputAriaLabel:Ay.t("Search members by name or title"),className:"p-directory_page__filter_input"}):m.a.createElement(fh.a,{onClick:this.onFilterIconClick,className:"p-directory_page__filter_icon"},m.a.createElement(ue.a,{type:"search-medium"})),r={people:Ay.t("Everyone"),org_members:Ay.t("All Members"),org_admins:Ay.t("Org Admins"),members:Ay.t("All Members"),admins:this.props.isEnterprise?Ay.t("Workspace Admins"):Ay.t("Admins"),bots:Ay.t("Bots"),guests:Ay.t("Guests"),deactivated:Ay.t("Deactivated accounts")},i=Object(Xv.a)(t)?m.a.createElement(Lb.a,{id:t}):r[this.props.filter];return m.a.createElement("div",{className:"p-directory_page"},m.a.createElement("div",{className:"p-directory_page__actions"},m.a.createElement(Jv.a,{renderMenu:this.renderMenu,position:"bottom-left",offsetX:-4,offsetY:4},m.a.createElement(fh.a,{className:"p-directory_page__filter_type"},"Account type: ",m.a.createElement("strong",null,i),m.a.createElement(ue.a,{type:"chevron-down",inline:!0}))),a),m.a.createElement(_y,null))}}]),t}(p.Component));Ry.displayName="DirectoryPage",Ry.defaultProps={searchQuery:"",filter:"people",isEnterprise:!1};var Py=Object(g.b)(function(e){return{searchQuery:Vv(e),filter:zv(e),isEnterprise:Object(y.q)(e)}})(Ry),My=n("4vzu"),xy=n("eqKo"),Fy=n("IF1j"),Ly=n("85z6"),Dy=(n("23La"),h.b.node,h.b.string.isRequired,h.b.string.isRequired,h.b.string.isRequired,h.b.bool,{children:void 0,startOpen:!1}),Uy=function(e){var t=e.children,n=e.label,a=e.description,r=e.emoji,i=e.startOpen,o=Object(p.useState)(i),s=it()(o,2),l=s[0],c=s[1],u=Object(p.useCallback)(function(){return c(!l)},[l,c]);return m.a.createElement(p.Fragment,null,m.a.createElement(fh.a,{onClick:u,className:"p-page_accordion__button"},m.a.createElement("div",{className:"p-page_accordion__emoji"},m.a.createElement(Ly.b,{text:r})),m.a.createElement("div",null,m.a.createElement("div",{className:"p-page_accordion__label"},n),m.a.createElement("div",{className:"p-page_accordion__description"},a)),m.a.createElement(ue.a,{className:"p-page_accordion__caret",type:l?"chevron-medium-down":"chevron-medium-right"})),l&&t)};Uy.displayName="PageAccordion",Uy.defaultProps=Dy;var By=Uy,qy=(n("eZdM"),h.b.string.isRequired,h.b.object,h.b.string,h.b.string,h.b.func.isRequired,{currentUser:void 0,customStatusText:void 0,customStatusEmoji:void 0}),Hy=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onCustomStatusClick=n.onCustomStatusClick.bind(n),n}return u()(t,e),o()(t,[{key:"onCustomStatusClick",value:function(){this.props.dispatch(Object(xy.a)())}},{key:"renderHeader",value:function(){var e=this.props,t=e.currentUserId,n=e.currentUser,a=e.customStatusEmoji,r=e.customStatusText,i=m.a.createElement(fh.a,{className:"p-profile_page__header__info__status",onClick:this.onCustomStatusClick},a&&m.a.createElement(pg.a,{text:r?a+" "+r:a,emojiSize:Gs.a.SMALL,showTooltips:!1,noJumbomoji:!0,noLinking:!0,noSpecials:!0,noHighlights:!0,noEmojiText:!0,preventCopyPaste:!0,stopAnimations:!0}),!a&&"Set a status",m.a.createElement(ue.a,{type:"pencil",inline:!0,size:"inherit",className:"small_left_margin"}));return m.a.createElement("div",{className:"p-profile_page__header"},m.a.createElement(Fy.c,{userId:t,size:100}),m.a.createElement("div",{className:"p-profile_page__header__info"},m.a.createElement(Dv.a,{id:t,className:"p-profile_page__header__info__name"}),m.a.createElement("div",{className:"p-profile_page__header__info__title"},Object(eo.S)(n)),i))}},{key:"render",value:function(){return m.a.createElement("div",{className:"p-profile_page"},this.renderHeader(),m.a.createElement(By,{emoji:"slightly_smiling_face",label:"About",description:"Full name, display name, and basic things others should know"},m.a.createElement("div",{className:"p-profile_page__section"},"Test")),m.a.createElement(By,{emoji:"telephone",label:"Contact",description:"Tell others how to get in touch with you"},m.a.createElement("div",{className:"p-profile_page__section"},"Test")),m.a.createElement(By,{emoji:"earth_americas",label:"Location",description:"Country, city, and floor"},m.a.createElement("div",{className:"p-profile_page__section"},"Test")),m.a.createElement(By,{emoji:"link",label:"Links",description:"Social accounts and more"},m.a.createElement("div",{className:"p-profile_page__section"},"Test")),m.a.createElement(By,{emoji:"octopus",label:"Everything else",description:"More details provided by your company"},m.a.createElement("div",{className:"p-profile_page__section"},"Test")))}}]),t}(p.Component);Hy.displayName="ProfilePage",Hy.defaultProps=qy;var Wy=Object(g.b)(function(e){var t=Object(y.c)(e),n=Object(xo.f)(e,t);return{currentUserId:t,currentUser:Object(xo.d)(e,t),customStatusText:n.text,customStatusEmoji:n.emoji,inDnd:!!Object(My.c)(e)}})(Hy),Gy=n("GZPf"),Ky=n("V+97"),Vy=n("VPVR"),zy=n("IfQk"),Yy=n("JQlo"),Qy=n("37yT"),Xy=n("+Y/z"),Jy=n("aPoH"),Zy=(n("bKze"),function(){return m.a.createElement("div",{className:"p-settings_page"},m.a.createElement(By,{emoji:"bell",label:"Set notifications",description:"Manage alerts, do-not-disturb, sounds and keywords"},m.a.createElement("div",{className:"p-settings_page__section"},m.a.createElement(Gy.a,null))),m.a.createElement(By,{emoji:"art",label:"Themes",description:"Change the appearance of Slack"},m.a.createElement("div",{className:"p-settings_page__section"},m.a.createElement(Ky.a,null))),m.a.createElement(By,{emoji:"desktop_computer",label:"Accessibility & display",description:"Choose how messages and other media and are displayed"},m.a.createElement("div",{className:"p-settings_page__section"},m.a.createElement(zy.a,null),m.a.createElement(Vy.a,null))),m.a.createElement(By,{emoji:"open_file_folder",label:"Sidebar",description:"Choose what conversations you see and how channels are organized"},m.a.createElement("div",{className:"p-settings_page__section"},m.a.createElement(Yy.a,null))),m.a.createElement(By,{emoji:"earth_africa",label:"Language & region",description:"Set your language and timezone settings"},m.a.createElement("div",{className:"p-settings_page__section"},m.a.createElement(Qy.a,null))),m.a.createElement(By,{emoji:"whale2",label:"Advanced preferences",description:"Everything else"},m.a.createElement("div",{className:"p-settings_page__section"},m.a.createElement(Xy.a,null))),m.a.createElement(By,{emoji:"telescope",label:"Labs",description:"TS only"},m.a.createElement("div",{className:"p-settings_page__section"},m.a.createElement(Jy.a,null))))});Zy.displayName="SettingsPage";var $y=Zy,ek=n("rzEj"),tk=(n("+V7z"),function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){return m.a.createElement("div",{className:"p-ia__browse_channels_page"},m.a.createElement(ek.a,{withoutFullscreenModal:!0,withoutHeader:!0}))}}]),t}(p.Component));tk.displayName="BrowseChannelsPage";var nk=tk,ak=n("rMl1"),rk=(n("RJyz"),function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){return m.a.createElement("div",{className:"p-ia__browse_dms_page"},m.a.createElement(ak.a,{withoutFullscreenModal:!0}))}}]),t}(p.Component));rk.displayName="BrowseDmsPage";var ik=rk,ok=(h.b.string,h.b.string,h.b.string,h.b.bool,h.b.bool,{className:void 0,teamUrl:"/",teamEnterpriseDomain:"",isAdminOrOwner:!1,isEnterpriseAdminOrOwner:!1}),sk=function(e){var t=e.className,n=e.teamUrl,a=e.teamEnterpriseDomain,r=e.isAdminOrOwner,i=e.isEnterpriseAdminOrOwner;return m.a.createElement("div",{className:f()("p-ia__settings_header",t)},m.a.createElement("div",{className:"p-ia__view_header__title"},"Settings"),i&&m.a.createElement(ug.a,{href:"https://"+a+".enterprise.slack.com/manage",className:"p-ia__settings_header__link"},"Organization settings",m.a.createElement(ue.a,{type:"external-link-square",inline:!0})),r&&m.a.createElement(ug.a,{href:n+"admin/settings",className:"p-ia__settings_header__link"},"Workspace settings ",m.a.createElement(ue.a,{type:"external-link-square",inline:!0})))};sk.displayName="SettingsHeader",sk.defaultProps=ok;var lk=Object(g.b)(function(e){var t=Object(we.d)(e),n=Object(xo.b)(e),a=Object(we.g)(e),r=Object(eo.qb)(n)||Object(eo.rb)(n),i=Object(eo.eb)(n)||Object(eo.Eb)(n)||r;return{teamUrl:Object(De.o)(t),teamEnterpriseDomain:a&&a.domain,isAdminOrOwner:i,isEnterpriseAdminOrOwner:r}})(sk),ck=n("iGrU"),uk=new B.b("paid_onboarding"),dk={SHARE_CHANNEL:"share_channel",INVITE_GUESTS:"invite_guests",SEARCH:"search",CONNECT_APP:"connect_app",START_GROUP_CALL:"start_group_call",RETENTION_SETTINGS:"retention_settings",SIGNIN_SETTINGS:"signin_settings",CREATE_USER_GROUP:"create_user_group"},pk={title:h.b.string.isRequired,description:h.b.string.isRequired,imageUrl:h.b.string.isRequired,ctaTitle:h.b.string.isRequired,ctaAction:h.b.string.isRequired,name:h.b.string.isRequired},mk={standard:["guests","sharedChannels","msgHistory","apps","storage","calls","gSuite","userGroups"],plus:[]},hk=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!Object(y.m)(e,"feature_gg_from_the_start"))return[];var n=function(e){return Object(y.m)(e,"feature_gg_from_the_start")?{guests:{title:uk.t("Work with clients and contractors, right in Slack"),description:uk.t("Shared channels and guest accounts let you use Slack with people outside your company, in just the channels you choose."),imageUrl:"/img/benefits_standard/0_Guests-n-SCs-min.png",ctaTitle:uk.t("See how to invite a guest"),ctaAction:dk.INVITE_GUESTS,name:"invite_guests_card"},sharedChannels:{title:uk.t("Work with clients and contractors, right in Slack"),description:uk.t("Shared channels and guest accounts let you use Slack with people outside your company, in just the channels you choose."),imageUrl:"/img/benefits_standard/0_Guests-n-SCs-min.png",ctaTitle:uk.t("See how to share a channel"),ctaAction:dk.SHARE_CHANNEL,name:"share_channel_card"},msgHistory:{title:uk.t("View and search your whole message history"),description:uk.t("On Standard, you get access to all of your team\u2019s public messages, instead of just the most recent 10k."),imageUrl:"/img/benefits_standard/4_messagehistory_group_min.png",ctaTitle:uk.t("Search Your Archive"),ctaAction:dk.SEARCH,name:"message_history_card"},apps:{title:uk.t("Connect Slack to all your apps and tools"),description:uk.t("Slack connects to hundreds of other apps and tools. Schedule meetings, file tickets, and more, without missing a beat."),imageUrl:"/img/benefits_standard/5_apps_integrations_group_min.png",ctaTitle:uk.t("Connect an App"),ctaAction:dk.CONNECT_APP,name:"apps_tools_card"},storage:{title:uk.t("Choose just how long your team\u2019s data is stored"),description:uk.t("Custom retention settings give you complete control over how long files and messages are stored in Slack."),imageUrl:"/img/benefits_standard/6_delete_files_messages_group_min.png",ctaTitle:uk.t("View Retention Settings"),ctaAction:dk.RETENTION_SETTINGS,name:"data_storage_card"},calls:{title:uk.t("Hold 15-person meetings with group calls"),description:uk.t("15-person video calls let you host daily stand-ups, share docs, and check in with team members all over the world."),imageUrl:"/img/benefits_standard/1_videochat_min.png",ctaTitle:uk.t("Start a Group Call"),ctaAction:dk.START_GROUP_CALL,name:"group_call_card"},gSuite:{title:uk.t("Let your team sign in with their G Suite account"),description:uk.t("If your team uses G Suite, members can sign in to Slack via their Google account \u2014 no need to remember another password."),imageUrl:"/img/benefits_standard/2_googleoauth_group_min.png",ctaTitle:uk.t("View Sign In Settings"),ctaAction:dk.SIGNIN_SETTINGS,name:"g_suite_card"},userGroups:{title:uk.t("Organize your team with user groups"),description:uk.t("User groups let you manage entire departments at once, by bundling them together in a group \u2014 like @sales or @marketing."),imageUrl:"/img/benefits_standard/3_usergroups_group_min.png",ctaTitle:uk.t("Create a User Group"),ctaAction:dk.CREATE_USER_GROUP,name:"user_groups_card"}}:{}}(e);return t.reduce(function(e,t){var a=n[t];return a?e.push(a):Object(Ct.b)().warn("Invalid key "+t+" when fetching benefits data"),e},[])},bk=function(e,t){return hk(e,mk[t])},fk=Object(gt.b)("Handles user click on cards for paid benefits views",function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).action,a=Object(Ct.b)();switch(a.debug("benefits action: "+n),n){case dk.SEARCH:case dk.CONNECT_APP:case dk.START_GROUP_CALL:case dk.RETENTION_SETTINGS:case dk.SIGNIN_SETTINGS:case dk.CREATE_USER_GROUP:case dk.SHARE_CHANNEL:case dk.INVITE_GUESTS:break;default:a.warn("Invalid benefits action: "+n)}});fk.meta={name:"handlePaidBenefitsActions",key:"actionsHandlePaidBenefitsActionsHandlePaidBenefitsActions",description:"Handles user click on cards for paid benefits views"},fk.propTypes={action:h.b.oneOf(Object.values(dk)).isRequired};var gk=fk,_k=(n("thgq"),ye()({},pk,{dispatchBenefitsAction:h.b.func.isRequired}),function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return u()(t,e),o()(t,[{key:"onClick",value:function(){var e=this.props,t=e.ctaAction;(0,e.dispatchBenefitsAction)({action:t})}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.description,a=e.imageUrl,r=e.ctaTitle;return m.a.createElement("div",{className:"p-benefit_card__container"},m.a.createElement(la.a,{className:"p-benefit_card__card_link",onClick:this.onClick},m.a.createElement("img",{className:"p-benefit_card__image",src:a,alt:""}),m.a.createElement("div",{className:"p-benefit_card__text"},m.a.createElement("h3",{className:"p-benefit_card__title"},t),m.a.createElement("p",{className:"p-benefit_card__description sk_foreground_max"},n)),m.a.createElement("span",{className:"p-benefit_card__text_link"},r)))}}]),t}(p.PureComponent));_k.displayName="BenefitCard";var vk=Object(g.b)(null,function(e){return{dispatchBenefitsAction:function(){return e(gk.apply(void 0,arguments))}}})(_k),yk=(n("We3W"),h.b.arrayOf(h.b.shape(ye()({},pk))).isRequired,function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"renderHeader",value:function(){return null}},{key:"renderBenefitCards",value:function(){return this.props.benefitsData.map(function(e){return m.a.createElement(vk,ye()({},e,{key:e.name}))})}},{key:"renderPaidBenefits",value:function(){return m.a.createElement("div",{className:"p-paid_benefits_view__container","data-qa":"paid_benefits_view_container"},this.renderHeader(),m.a.createElement("div",{className:"p-paid_benefits_view__benefit_cards"},m.a.createElement("div",{className:"p-paid_benefits_view__card_grid","data-qa":"paid_benefits_view_card-container"},this.renderBenefitCards())))}},{key:"render",value:function(){var e=this;return m.a.createElement(ni.a,null,function(t){var n=t.width,a=t.height;return m.a.createElement(ck.b,{width:n,height:a,fade:!0},m.a.createElement("div",{className:"p-paid_benefits_view"},e.renderPaidBenefits()))})}}]),t}(p.PureComponent));yk.displayName="PaidBenefitsView";var kk=Object(g.b)(function(e){return{benefitsData:bk(e,"standard")}})(yk),Ok=new B.b("channel_sidebar"),Ck=new B.b("welcome_place"),Ek=new B.b("app_launcher"),jk={Pcomposer:{label:function(){return"Composer"},isChannelHeaderHidden:function(){return!0},view:function(){return m.a.createElement("div",{className:"p-workspace__primary_view_body"},m.a.createElement(Uf,null))}},Pdrafts:{label:function(){return Ok.t("Drafts")},header:function(e){return m.a.createElement(Mh,e)},view:function(){return m.a.createElement("div",{className:"p-workspace__primary_view_body"},m.a.createElement(ag,null))}},Pexample:{label:function(){return"Example Page"},view:function(){return m.a.createElement("div",{className:"margin_100"},"Hi! This is an example page.")},sidebar:{icon:"small-quote",onClick:function(e){},onClickClose:function(e){},getCloseLinkLabel:function(){return Ok.t("Dismiss example page",{fallbackHash:"2c3cef6f55bd97dda9e8fe6290c4e4a9f285409c"})}}},Punreads:{label:function(){return Ok.t("All Unreads")},header:function(e){return m.a.createElement(Nh,e)},view:function(){return m.a.createElement("div",{className:"p-workspace__primary_view_body"},m.a.createElement(bh,null))},sidebar:{icon:"list",isBold:function(e){return Object(y.m)(e,"feature_incremental_unread_counts")?Object(te.i)(e):Object(ee.d)(e)}}},Pwelcome:{isChannelHeaderHidden:function(e){return Object(y.m)(e,"feature_newxp2372_v2")},sidebar:{icon:"map",onClick:function(e){e(Object(se.f)("sidebar")),e(Object(se.g)(!1))},onClickClose:function(e){e(Object(tn.e)({element:m.a.createElement(Bh,null)})),e(Object(oe.a)())},getCloseLinkLabel:function(){return Ok.t("Dismiss",{fallbackHash:"2c3cef6f55bd97dda9e8fe6290c4e4a9f285409c"})},isBold:function(e){return Object(ie.v)(e)},renderLinkContent:function(e){return m.a.createElement(Qh,e)},rowHeight:70},label:function(){return Ck.t("Get Started")},header:function(e){return m.a.createElement(Gh,e)},view:function(){return m.a.createElement(ss,null)}},Papps:{label:function(){return Ek.t("Apps",{fallbackHash:"d9a36850b7f3f78365a998cb16cb68b6fd79400d",fallbackHashNs:"channel_sidebar"})},header:function(e){return m.a.createElement(y_,e)},view:function(){return m.a.createElement(g_,null)},sidebar:{icon:"gn-menu-small",onClick:function(e){return e(Object(Xh.a)({eventId:"APP_LAUNCHER_OPEN_FROM_SIDEBAR"}))}}},Phome:{label:function(){return Ok.t("Home",{fallbackHashNs:"prefs",fallbackHash:"70f8bb9a8a5393ef080507a89e4b98d139000d65"})},header:function(e){return m.a.createElement(Cg,e)},view:function(){return m.a.createElement(yg,null)},sidebar:{icon:"home",isBold:function(e){return Object(Jh.d)(e)}}},Pactivity:{label:function(){return"Activity"},view:function(){return m.a.createElement(Z_,null)},sidebar:{icon:"mentions"}},Pstars:{label:function(){return"Saved"},view:function(){return m.a.createElement(Tv,null)},sidebar:{icon:"star-o"}},Pfiles:{label:function(){return"Files"},view:function(){return m.a.createElement(xv,null)},header:function(e){return m.a.createElement(qv,e)},sidebar:{icon:"all-files-alt"}},Pdirectory:{label:function(){return"Directory"},view:function(){return m.a.createElement(Py,null)},sidebar:{icon:"user-groups"}},Pprofile:{label:function(){return"Profile"},view:function(){return m.a.createElement(Wy,null)},isChannelHeaderHidden:function(){return!0},sidebar:{icon:"user-groups"}},Psettings:{label:function(){return"Settings"},view:function(){return m.a.createElement($y,null)},header:function(e){return m.a.createElement(lk,e)},sidebar:{icon:"cog-o"}},"Ppaid-benefits":{isChannelHeaderHidden:function(){return!0},label:function(){return"Benefits"},view:function(){return m.a.createElement(kk,null)}},"Pbrowse-channels":{label:function(){return"Browse channels"},view:function(){return m.a.createElement(nk,null)}},"Pbrowse-dms":{label:function(){return"Browse messages"},view:function(){return m.a.createElement(ik,null)}}};function Sk(e){return jk[e]||{}}var Ik=n("RAX8"),wk=n("uI5u"),Nk=n("cW5R"),Tk=n("ubOb"),Ak=new B.b("notifications"),Rk=(h.b.oneOf(["granted","default","denied","na"]),h.b.func.isRequired,h.b.bool,h.b.bool,h.b.func,h.b.func,h.b.object,{notificationPermission:"default",shouldHideBanner:!1,hasKeyboardFocusWithin:!1,onFocus:d.a,onBlur:d.a,clogger:{}}),Pk=Object(V.a)(wk.a,"EnableNotificationsBanner",{index:0}),Mk=Object(V.a)(wk.a,"ConfirmationBanner",{index:0}),xk=function(e,t){return Object(Pe.q)()&&"denied"!==e&&"1"!==Object(Nk.c)("no_growl_banner")&&"1"!==Object(Nk.c)("defer_growl_banner")&&!t},Fk=le.UiStep.NOTIFICATOIN_BANNER_FIRST_PROMPT,Lk=le.UiStep.NOTIFICATOIN_BANNER_SECOND_PROMPT,Dk=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["onClickEnableNotificationsBanner","onCloseEnableNotificationsBanner","onClickDeferNotificationsBanner","onClickNeverNotificationsBanner"]),n.state={showConfirmationBanner:!1},n.focusEnableButton=!1,n.enableNotificationsButton=m.a.createRef(),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){xk(this.props.notificationPermission,this.props.shouldHideBanner)&&this.props.clogger.track("BANNER_ACTION",{contexts:{ui_context:{action:le.UiAction.IMPRESSION,step:Fk}}})}},{key:"componentDidUpdate",value:function(e,t){var n=t.showConfirmationBanner,a=this.state.showConfirmationBanner;this.focusEnableButton&&!n&&a&&(this.enableNotificationsButton.current.focus(),this.focusEnableButton=!1),!xk(e.notificationPermission,e.shouldHideBanner)&&xk(this.props.notificationPermission,this.props.shouldHideBanner)&&this.props.clogger.track("BANNER_ACTION",{contexts:{ui_context:{action:le.UiAction.IMPRESSION,step:Fk}}}),!n&&a&&this.props.clogger.track("BANNER_ACTION",{contexts:{ui_context:{action:le.UiAction.IMPRESSION,step:Lk}}})}},{key:"onClickEnableNotificationsBanner",value:function(){var e=this,t=this.state.showConfirmationBanner?Lk:Fk;this.props.promptForPermissionAndSetPref().then(function(){e.props.clogger.track("BANNER_ACTION",{contexts:{ui_context:{action:le.UiAction.CLICK,step:t,ui_properties:{element_type:"link",element_name:"enable"}}}}),e.setState(function(){return{showConfirmationBanner:!1}})})}},{key:"onCloseEnableNotificationsBanner",value:function(){this.props.hasKeyboardFocusWithin&&(this.focusEnableButton=!0),this.props.clogger.track("BANNER_ACTION",{contexts:{ui_context:{action:le.UiAction.CLICK,step:Fk,ui_properties:{element_name:"dismiss",element_type:"button"}}}}),this.setState(function(){return{showConfirmationBanner:!0}})}},{key:"onClickDeferNotificationsBanner",value:function(){Object(Nk.a)("defer_growl_banner","1",3),this.props.clogger.track("BANNER_ACTION",{contexts:{ui_context:{action:le.UiAction.CLICK,step:Lk,ui_properties:{element_name:"defer",element_type:"link"}}}}),this.setState(function(){return{showConfirmationBanner:!1}})}},{key:"onClickNeverNotificationsBanner",value:function(){Object(Nk.a)("no_growl_banner","1",3650),this.props.clogger.track("BANNER_ACTION",{contexts:{ui_context:{action:le.UiAction.CLICK,step:Lk,ui_properties:{element_name:"never",element_type:"link"}}}}),this.setState(function(){return{showConfirmationBanner:!1}})}},{key:"render",value:function(){var e=this.props,t=e.onFocus,n=e.onBlur,a=this.state.showConfirmationBanner,r=m.a.createElement(En.a,{onClick:this.onClickEnableNotificationsBanner},Ak.t("enable desktop notifications"));return m.a.createElement(p.Fragment,null,a?m.a.createElement(p.Fragment,null,m.a.createElement(Mk,{onFocus:t,onBlur:n,showCloseButton:!1,isFixedPosition:!1},Ak.t("We strongly recommend enabling desktop notifications if you'll be using Slack on this computer."),m.a.createElement("br",null),m.a.createElement(En.a,{ref:this.enableNotificationsButton,onClick:this.onClickEnableNotificationsBanner},Ak.t("Enable notifications"))," \u2022 ",m.a.createElement(En.a,{onClick:this.onClickDeferNotificationsBanner},Ak.t("Ask me later"))," \u2022 ",m.a.createElement(En.a,{onClick:this.onClickNeverNotificationsBanner},Ak.t("Never ask again on this computer")))):xk(this.props.notificationPermission,this.props.shouldHideBanner)&&m.a.createElement(Pk,{type:"info",showCloseButton:!0,onClose:this.onCloseEnableNotificationsBanner,isFixedPosition:!1,onFocus:t,onBlur:n},Ak.rt("Slack needs your permission to {enableNotificationsLink}.",{enableNotificationsLink:r})))}}]),t}(p.Component);Dk.displayName="BannerEnableNotifications",Dk.defaultProps=Rk;var Uk={promptForPermissionAndSetPref:Re.c},Bk=Object(Tk.a)(Object(g.b)(function(e){return{notificationPermission:Object(Ik.b)(e),shouldHideBanner:Object(ie.w)(e),clogger:Object(re.a)({state:e})}},Uk)(Dk)),qk=n("vRZS"),Hk=new B.b("files"),Wk=(h.b.bool.isRequired,h.b.func,{toggleBanner:d.a}),Gk=Object(V.a)(wk.a,"EnablePopupsBanner",{index:0}),Kk=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["onCloseEnablePopupsBanner"]),n}return u()(t,e),o()(t,[{key:"onCloseEnablePopupsBanner",value:function(){this.props.toggleBanner(!1)}},{key:"render",value:function(){return this.props.isBannerShowing&&!Object(qk.a)()&&m.a.createElement(p.Fragment,null,m.a.createElement(Gk,{type:"info",showCloseButton:!0,onClose:this.onCloseEnablePopupsBanner,isFixedPosition:!1},Hk.rt("Please allow pop-ups in your browser. You can <a>contact Slack</a> if you need help.",{},function(e){var t=e.text,n=e.key;return m.a.createElement(la.a,{key:n,href:"http://my.slack.com/help/requests/new"},t)})))}}]),t}(p.Component);Kk.displayName="BannerEnablePopups",Kk.defaultProps=Wk;var Vk=Object(g.b)(function(e){return{isBannerShowing:Object(Aa.b)(e)}},function(e){return{toggleBanner:function(){return e(Aa.c.apply(void 0,arguments))}}})(Object(V.a)(Kk,"BannerEnablePopups",{index:0})),zk=new B.b("dunning_banners"),Yk=(h.b.string,h.b.object,h.b.func.isRequired,h.b.func.isRequired,h.b.object.isRequired,h.b.object.isRequired,{dunning_day_1_banner:{bannerPrefs:{countPref:"dunning_day_1_banner_cta_count",tsPref:"dunning_day_1_banner_last_ts"},renderMethod:"renderDunningDay1"},dunning_day_3_banner:{bannerPrefs:{countPref:"dunning_day_3_banner_cta_count",tsPref:"dunning_day_3_banner_last_ts"},renderMethod:"renderDunningDay3"},dunning_day_7_owner_cardholder_banner:{bannerPrefs:{countPref:"dunning_day_7_owner_cardholder_banner_cta_count",tsPref:"dunning_day_7_owner_cardholder_banner_last_ts"},renderMethod:"renderDunningDay7OwnerCardHolder"},dunning_day_7_admin_billing_contacts_banner:{bannerPrefs:{countPref:"dunning_day_7_admin_billing_contacts_banner_cta_count",tsPref:"dunning_day_7_admin_billing_contacts_banner_last_ts"},renderMethod:"renderDunningDay7AdminBillingContacts"},dunning_day_14_owner_cardholder_banner:{bannerPrefs:{countPref:"dunning_day_14_owner_cardholder_banner_cta_count",tsPref:"dunning_day_14_owner_cardholder_banner_last_ts"},renderMethod:"renderDunningDay14OwnerCardHolder",warningLevel:"urgent"},dunning_day_14_admin_billing_contacts_banner:{bannerPrefs:{countPref:"dunning_day_14_admin_billing_contacts_banner_cta_count",tsPref:"dunning_day_14_admin_billing_contacts_banner_last_ts"},renderMethod:"renderDunningDay14AdminBillingContacts",warningLevel:"urgent"},dunning_day_21_billing_stakeholders_banner:{bannerPrefs:{countPref:"dunning_day_21_billing_stakeholders_banner_cta_count",tsPref:"dunning_day_21_billing_stakeholders_banner_last_ts"},renderMethod:"renderDunningDay21BillingStakeHolders",warningLevel:"urgent"},dunning_day_21_all_users_banner:{bannerPrefs:{countPref:"dunning_day_21_all_users_banner_cta_count",tsPref:"dunning_day_21_all_users_banner_last_ts"},renderMethod:"renderDunningDay21AllUsers"}}),Qk=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["onClose"]),n}return u()(t,e),o()(t,[{key:"componentDidUpdate",value:function(e){var t=this.props.bannerName;t&&t!==e.bannerName&&Yk[t]&&this.clog({action:le.UiAction.IMPRESSION,ui_component:le.UiComponent[t.toUpperCase()],ui_properties:{element_type:le.ElementType.BANNER}})}},{key:"onClose",value:function(){var e=this.props.bannerName;if(e){var t=Yk[e].bannerPrefs;this.clog({action:le.UiAction.CLICK,is_primary_cta:!0,ui_component:le.UiComponent[e.toUpperCase()],ui_properties:{element_type:le.ElementType.BUTTON,element_name:"close"}}),this.props.closeBanner({bannerPrefs:t})}}},{key:"clog",value:function(e){var t=this.props.clogger,n=ye()({step:le.UiStep.BANNER_DUNNING},e);t.track(le.EventId.UPGRDEXP_DUNNING_BANNER,{contexts:{ui_context:n}})}},{key:"clogLink",value:function(e){var t=this.props.bannerName;this.clog({action:le.UiAction.CLICK,is_primary_cta:!0,ui_component:le.UiComponent[t.toUpperCase()],ui_properties:{element_type:le.ElementType.LINK,element_name:e}})}},{key:"renderDunningDay1",value:function(){var e=this,t=this.props.team;return zk.rt("There was an issue processing your recent payment. <a>Update your payment details</a>",null,function(n){var a=n.text,r=n.key;return m.a.createElement(la.a,{key:r,onClick:function(){Object(De.R)(t,"admin/billing/failed"),e.clogLink("admin_billing_methods")},"data-qa":"banner-dunning_billing_methods_link"},a)})}},{key:"renderDunningDay3",value:function(){var e=this,t=this.props.team;return zk.rt("Keep your workspace from being downgraded to the Free plan by <a>updating your payment details</a>.",null,function(n){var a=n.text,r=n.key;return m.a.createElement(la.a,{key:r,onClick:function(){Object(De.R)(t,"admin/billing/failed"),e.clogLink("admin_billing_methods")},"data-qa":"banner-dunning_billing_methods_link"},a)})}},{key:"renderDunningDay7OwnerCardHolder",value:function(){var e=this,t=this.props.team;return zk.rt("Keep your paid plan for access to your full message history. <a>Update your payment details</a>",null,function(n){var a=n.text,r=n.key;return m.a.createElement(la.a,{key:r,onClick:function(){Object(De.R)(t,"admin/billing/failed"),e.clogLink("admin_billing_methods")},"data-qa":"banner-dunning_billing_methods_link"},a)})}},{key:"renderDunningDay7AdminBillingContacts",value:function(){var e=this;return zk.rt("There was an issue processing payment for this workspace. Please <a>ask your Workspace Owner</a> to update their payment details.",null,function(t){var n=t.text,a=t.key;return m.a.createElement(la.a,{key:a,onClick:function(){e.props.showMemberDirectory({filter:"admins"}),e.clogLink("show_members_admins")},"data-qa":"banner-dunning_admin_members_link"},n)})}},{key:"renderDunningDay14OwnerCardHolder",value:function(){var e=this,t=this.props.team;return zk.rt("Your payment is overdue, and your workspace will be downgraded soon. Keep your paid plan by <a>updating your payment details</a>.",null,function(n){var a=n.text,r=n.key;return m.a.createElement(la.a,{key:r,onClick:function(){Object(De.R)(t,"admin/billing/failed"),e.clogLink("admin_billing_methods")},"data-qa":"banner-dunning_billing_methods_link"},a)})}},{key:"renderDunningDay14AdminBillingContacts",value:function(){var e=this,t=this.props.team;return zk.rt("Payment for this workspace is overdue, and it will be downgraded soon. Questions? <a>Contact your Workspace Owner</a>, or <contact>contact support</contact>.",null,function(n){var a=n.text,r=n.key;return"a"===n.tag?m.a.createElement(la.a,{key:r,onClick:function(){e.props.showMemberDirectory({filter:"admins"}),e.clogLink("show_members_admins")},"data-qa":"banner-dunning_admin_members_link"},a):m.a.createElement(la.a,{key:r,onClick:function(){Object(De.R)(t,"help/requests/new"),e.clogLink("contact_support")},"data-qa":"banner-dunning_support_link"},a)})}},{key:"renderDunningDay21BillingStakeHolders",value:function(){var e=this,t=this.props,n=t.team,a=t.bannerData.num_days_til_downgrade||7;return zk.rt("Your workspace will be downgraded if payment is not received within {numDaysTilDowngrade} days. <a>Update your payment details</a> or <contact>contact support</contact>.",{numDaysTilDowngrade:a},function(t){var a=t.text,r=t.key;return"a"===t.tag?m.a.createElement(la.a,{key:r,onClick:function(){Object(De.R)(n,"admin/billing/failed"),e.clogLink("admin_billing_methods")},"data-qa":"banner-dunning_billing_methods_link"},a):m.a.createElement(la.a,{key:r,onClick:function(){Object(De.R)(n,"help/requests/new"),e.clogLink("contact_support")},"data-qa":"banner-dunning_support_link"},a)})}},{key:"renderDunningDay21AllUsers",value:function(){var e=this;return zk.rt("Your workspace may be downgraded soon, which will limit how many past messages you can see. Questions? <a>Contact your admins</a>",null,function(t){var n=t.text,a=t.key;return m.a.createElement(la.a,{key:a,onClick:function(){e.props.showMemberDirectory({filter:"admins"}),e.clogLink("show_members_admins")},"data-qa":"banner-dunning_admin_members_link"},n)})}},{key:"render",value:function(){var e=this.props.bannerName;if(!e)return null;var t=Yk[e];if(!t)return null;var n=t.warningLevel||"warning";return m.a.createElement(wk.a,{type:n,isFixedPosition:!1,onClose:this.onClose},this[t.renderMethod]())}}]),t}(p.Component);Qk.displayName="BannerDunning",Qk.defaultProps={bannerName:"",bannerData:{}};var Xk=Object(g.b)(function(e){return{bannerName:Object(Xs.d)(e),bannerData:Object(Xs.c)(e),team:Object(we.d)(e),clogger:Object(re.a)({state:e})}},function(e){return{closeBanner:function(){return e(Xs.a.apply(void 0,arguments))},showMemberDirectory:function(){return e(jn.i.apply(void 0,arguments))}}})(Qk),Jk=n("/Qam"),Zk=n("mqzt"),$k=n("/LVU"),eO=n("dohy"),tO=n("jcvV"),nO=(n("1iAE"),new B.b("do_not_disturb")),aO=(h.b.bool.isRequired,h.b.func.isRequired,h.b.func.isRequired,h.b.func.isRequired,h.b.number,h.b.number,h.b.bool,h.b.object,h.b.object,h.b.func,h.b.func,h.b.func,h.b.object,h.b.func,h.b.bool,h.b.bool,{snoozeEndTs:void 0,dndEndTs:void 0,do24hrTime:!1,currentChannel:{},menuProps:{},openPrefsModal:d.a,openDndDialog:d.a,openChannelNotificationPrefsModal:d.a,clogger:{track:d.a},showNotificationScheduleNewBadge:!1,setUserPrefByApi:d.a,featureGranularDnd:!1}),rO=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderSubmenu=n.renderSubmenu.bind(n),n.onClickDoNotDisturbSchedule=n.onClickDoNotDisturbSchedule.bind(n),n.onClickNotificationPreferences=n.onClickNotificationPreferences.bind(n),n}return u()(t,e),o()(t,[{key:"onClickDoNotDisturbSchedule",value:function(){var e=this.props,t=e.featureGranularDnd,n=e.showNotificationScheduleNewBadge;this.props.openPrefsModal({activeSection:"notifications",activeSubsection:"prefs_dnd"}),t&&n&&this.props.setUserPrefByApi({pref:"dnd_notification_schedule_new_badge_seen",value:!0})}},{key:"onClickNotificationPreferences",value:function(){this.props.openPrefsModal({activeSection:"notifications"})}},{key:"renderDndMenuHeader",value:function(){var e=this.props,t=e.inDndBySnooze,n=e.snoozeEndTs,a=e.dndEndTs,r=e.do24hrTime,i=e.featureGranularDnd,o=t?n:a,s=Object(Zk.b)(o,{do24hrTime:r}),l=f()({"p-dnd_menu__snooze_header":t||i,"p-dnd_menu__schedule_header":!t&&!i});return m.a.createElement("div",{className:l},m.a.createElement("div",{className:"p-dnd_menu__header_status"},m.a.createElement("div",null,m.a.createElement("strong",null,i?nO.t("Do Not Disturb"):nO.t("Do Not Disturb: ON"))),m.a.createElement("div",null,s)))}},{key:"renderSubmenu",value:function(e){var t=this,n=this.props.clogger;return m.a.createElement(na.f,ye()({},e,{width:200}),m.a.createElement(na.b,{label:nO.t("30 minutes"),onSelected:function(){t.props.snoozeNotifications({duration:30,reason:"DndEnabledMenu:30m"}),n.track(le.EventId.DND_SNOOZE_NOTIFICATIONS,{dnd_duration:30,dnd_preset:le.DndPreset.DURATION_30_MINUTES,dnd_snooze_type:le.DndSnoozeType.SNOOZE_ADJUST})}}),m.a.createElement(na.b,{label:nO.t("1 hour"),onSelected:function(){t.props.snoozeNotifications({duration:60,reason:"DndEnabledMenu:1hr"}),n.track(le.EventId.DND_SNOOZE_NOTIFICATIONS,{dnd_duration:60,dnd_preset:le.DndPreset.DURATION_1_HOUR,dnd_snooze_type:le.DndSnoozeType.SNOOZE_ADJUST})}}),m.a.createElement(na.b,{label:nO.t("2 hours"),onSelected:function(){t.props.snoozeNotifications({duration:120,reason:"DndEnabledMenu:2hr"}),n.track(le.EventId.DND_SNOOZE_NOTIFICATIONS,{dnd_duration:120,dnd_preset:le.DndPreset.DURATION_2_HOURS,dnd_snooze_type:le.DndSnoozeType.SNOOZE_ADJUST})}}),m.a.createElement(na.b,{label:nO.t("4 hours"),onSelected:function(){t.props.snoozeNotifications({duration:240,reason:"DndEnabledMenu:4hr"}),n.track(le.EventId.DND_SNOOZE_NOTIFICATIONS,{dnd_duration:240,dnd_preset:le.DndPreset.DURATION_4_HOURS,dnd_snooze_type:le.DndSnoozeType.SNOOZE_ADJUST})}}),m.a.createElement(na.b,{label:nO.t("Until tomorrow"),onSelected:function(){var e=Object(Zk.d)();t.props.snoozeNotifications({duration:e,reason:"DndEnabledMenu:tomorrow"}),n.track(le.EventId.DND_SNOOZE_NOTIFICATIONS,{dnd_duration:e,dnd_preset:le.DndPreset.DURATION_TOMORROW,dnd_snooze_type:le.DndSnoozeType.SNOOZE_ADJUST})}}),m.a.createElement(na.b,{label:nO.t("Until next week"),onSelected:function(){var e=Object(Zk.c)();t.props.snoozeNotifications({duration:e,reason:"DndEnabledMenu:week"}),n.track(le.EventId.DND_SNOOZE_NOTIFICATIONS,{dnd_duration:e,dnd_preset:le.DndPreset.DURATION_NEXT_WEEK,dnd_snooze_type:le.DndSnoozeType.SNOOZE_ADJUST})}}),m.a.createElement(na.b,{label:nO.t("Custom\u2026"),onSelected:function(){t.props.openDndDialog(),n.track(le.EventId.DND_OPEN_CUSTOM_SNOOZE_DIALOG)}}))}},{key:"renderAdjustMenuItem",value:function(){var e=this.props,t=e.inDndBySnooze,n=e.featureGranularDnd;return t||n?m.a.createElement(da.a,{label:nO.t("Adjust time"),renderSubmenu:this.renderSubmenu}):m.a.createElement(na.b,{label:nO.t("Adjust schedule\u2026"),onSelected:this.onClickDoNotDisturbSchedule})}},{key:"renderSettingsMenuItem",value:function(){var e=this,t=this.props.currentChannel;if(!t.id||Object(K.hb)(t))return null;var n=m.a.createElement(Yp.a,{channelId:t.id,iconProps:{inherit:!0,align:"baseline"},inline:!0}),a=nO.rt("Settings for {name}\u2026",{name:m.a.createElement("strong",null,n),fallbackHash:"c6c4739d1b58eef23e9c67fb55a1961f80e0cf65"});return m.a.createElement(na.b,{label:a,onSelected:function(){return e.props.openChannelNotificationPrefsModal({channelId:t.id,entryPoint:"dnd_enabled_menu"})}})}},{key:"render",value:function(){var e=this,t=this.props,n=t.inDndBySnooze,a=t.menuProps,r=t.featureGranularDnd,i=t.showNotificationScheduleNewBadge,o=void 0,s=void 0;r&&(o=m.a.createElement("span",{className:"p-dnd_menu__new_pill"},nO.t("NEW")),s=i?m.a.createElement("span",null,nO.t("Notification schedule\u2026")," ",o):nO.t("Notification schedule\u2026"));return m.a.createElement("div",null,this.renderDndMenuHeader(),m.a.createElement(na.f,ye()({},a,{menuClassNames:"p-dnd_menu"}),m.a.createElement(na.b,{label:r?nO.t("Turn off"):nO.t("Resume notifications now"),onSelected:function(){n?e.props.endDndSnooze({reason:"DndEnabledMenu:end_snooze"}):e.props.endDndSchedule({reason:"DndEnabledMenu:end_schedule"})},danger:r}),this.renderAdjustMenuItem(),m.a.createElement(na.d,null),r&&m.a.createElement(na.b,{label:r?s:nO.t("Do Not Disturb schedule\u2026"),onSelected:this.onClickDoNotDisturbSchedule}),!r&&this.renderSettingsMenuItem(),!r&&m.a.createElement(na.b,{label:nO.t("Your notification preferences\u2026",{fallbackHash:"4fa8d4f0498a550e3cf075dc9c810f7b6f771e65"}),onSelected:this.onClickNotificationPreferences})))}}]),t}(p.PureComponent);rO.displayName="DndEnabledMenu",rO.defaultProps=aO;var iO=Object(g.b)(function(e){var t=Object(y.c)(e),n=Object(My.e)(e,t).nextDndEndTs,a=Object(My.f)(e);return{inDndBySnooze:a.snoozeEnabled,snoozeEndTs:a.snoozeEndTs,dndEndTs:n,do24hrTime:Object(Zt.j)(e,"time24"),clogger:Object(re.a)({state:e}),featureGranularDnd:Object(y.m)(e,"feature_granular_dnd"),showNotificationScheduleNewBadge:!Object(Zt.j)(e,"dnd_notification_schedule_new_badge_seen")}},function(e){return{snoozeNotifications:function(t){return e(Object($k.e)(t))},openDndDialog:function(){return e(Object(eO.a)())},endDndSnooze:function(t){return e(Object($k.b)(t))},endDndSchedule:function(t){return e(Object($k.a)(t))},openChannelNotificationPrefsModal:function(t){return e(Object(tO.a)(t))},setUserPrefByApi:function(t){return e(Object(Tn.f)(t))},openPrefsModal:function(t){return e(Object(ul.a)(t))}}})(rO),oO=new B.b("do_not_disturb"),sO=(h.b.bool.isRequired,h.b.object,h.b.string,h.b.bool,h.b.bool,h.b.object,{currentChannel:{},className:void 0,featureGranularDnd:!1,featureClassicNav:!1,clogger:{track:d.a}}),lO=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderMenu=n.renderMenu.bind(n),Object(Kt.a)(n,["onClick"]),n}return u()(t,e),o()(t,[{key:"onClick",value:function(){this.props.clogger.track(le.EventId.DND_MENU_OPEN,{})}},{key:"renderMenu",value:function(e){var t=this.props,n=t.inDnd,a=t.currentChannel,r=void 0;return t.featureClassicNav&&(r={menuProps:ye()({},e,{onMenuItemSelected:function(t,n){n.stopPropagation(),e.onMenuItemSelected(t,n)}})}),n?m.a.createElement(iO,ye()({currentChannel:a,menuProps:e},r)):m.a.createElement(Jk.a,ye()({currentChannel:a,menuProps:e},r))}},{key:"render",value:function(){var e=this.props,t=e.inDnd,n=e.className,a=e.featureGranularDnd,r=t?"snooze-outline":"bell-o";return m.a.createElement(na.e,{renderMenu:this.renderMenu,position:"bottom-left",offsetX:-4,offsetY:8,onClick:this.onClick},m.a.createElement(qi.c,{tip:a?oO.t("Do Not Disturb"):oO.t("Notifications"),position:"bottom",hideFromScreenReader:!0},m.a.createElement(fh.a,{className:f()("p-dnd_button",n),"data-qa":"do_not_disturb_btn","aria-label":a?oO.t("Do Not Disturb"):oO.t("Notifications"),"aria-pressed":t},m.a.createElement(ta.b,{type:r}))))}}]),t}(p.PureComponent);lO.displayName="DndButton",lO.defaultProps=sO;var cO=Object(g.b)(function(e){var t=Object(E.a)(e);return{inDnd:!!Object(My.c)(e),currentChannel:Object(G.e)(e,t)||void 0,featureGranularDnd:Object(y.m)(e,"feature_granular_dnd"),featureClassicNav:Object(y.m)(e,"feature_classic_nav"),clogger:Object(re.a)({state:e})}})(lO),uO=n("rz65"),dO=n("d24p"),pO=n("Jn9h"),mO=(n("skMg"),new B.b("global_actions")),hO=(h.b.object,h.b.object,h.b.func.isRequired,h.b.func.isRequired,h.b.func.isRequired,h.b.bool.isRequired,h.b.bool,{menuProps:{},clogger:{track:d.a},featureGlobalActionsV0:!1}),bO=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["onClickMessage","onClickChannel","renderBrowseMoreTools"]),n}return u()(t,e),o()(t,[{key:"onClickMessage",value:function(){this.props.isComposeFlowEnabled?this.props.openComposerPage():this.props.openDmBrowserModal()}},{key:"onClickChannel",value:function(){this.props.openChannelCreateModal({showOpenTransition:!1,entryPoint:"global_actions"})}},{key:"renderBrowseMoreTools",value:function(){var e=this.props,t=e.menuProps;if(!e.featureGlobalActionsV0)return null;var n=m.a.createElement(ta.b,{type:"search",className:"p-global_actions_menu__icon p-global_actions_menu__icon_search",size:"inherit"}),a=m.a.createElement(pO.a,{src:"/img/global-actions/asana/asana@2x.png",height:"20",width:"20",alt:""}),r=m.a.createElement(pO.a,{src:"/img/global-actions/bitmoji/bitmoji@2x.png",height:"20",width:"20",alt:""});return m.a.createElement(na.f,ye()({},t,{menuClassNames:"p-global_actions_menu"}),m.a.createElement(na.b,{icon:n,className:"p-global_actions_menu__item",onSelected:d.a},m.a.createElement(Bn.default,{className:"p-global_actions_menu__search_input_box",ariaLabel:mO.t("Find tools"),placeholder:mO.t("Find tools \u2026"),isSingleLine:!0})),m.a.createElement(na.d,null),m.a.createElement(na.c,{label:mO.t("Asana"),className:"p-global_actions_menu__item_header"}),m.a.createElement(na.b,{icon:a,label:mO.t("Create a new task"),className:"p-global_actions_menu__item p-global_actions_menu__asana",onSelected:this.onClickChannel}),m.a.createElement(na.b,{icon:a,label:mO.t("View my tasks"),className:"p-global_actions_menu__item p-global_actions_menu__asana",onSelected:this.onClickChannel}),m.a.createElement(na.c,{label:mO.t("Bitmoji"),className:"p-global_actions_menu__item_header"}),m.a.createElement(na.b,{icon:r,label:mO.t("Send a Bitmoji"),className:"p-global_actions_menu__item p-global_actions_menu__bitmoji",onSelected:this.onClickChannel}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.menuProps;if(!t.featureGlobalActionsV0)return null;var a=m.a.createElement("div",{className:"p-global_actions_menu__icon p-global_actions_menu__icon_message"},m.a.createElement(ta.b,{type:"pencil-filled",size:"inherit"})),r=m.a.createElement("div",{className:"p-global_actions_menu__icon p-global_actions_menu__icon_channel"},m.a.createElement(ta.b,{type:"channel",size:"inherit"})),i=m.a.createElement(pO.a,{src:"/img/global-actions/reminder/reminder@2x.png",height:"20",width:"20",alt:""}),o=m.a.createElement(pO.a,{src:"/img/global-actions/zoom/zoom@2x.png",height:"20",width:"20",alt:""}),s=m.a.createElement(pO.a,{src:"/img/global-actions/giphy/giphy@2x.png",height:"20",width:"20",alt:""});return m.a.createElement("div",null,m.a.createElement(na.f,ye()({},n,{menuClassNames:"p-global_actions_menu"}),m.a.createElement(na.b,{icon:a,label:mO.t("Start a message"),className:"p-global_actions_menu__item p-global_actions_menu__item_primary",onSelected:this.onClickMessage,type:uO.a.custom}),m.a.createElement(na.b,{icon:r,label:mO.t("Create a channel"),className:"p-global_actions_menu__item p-global_actions_menu__item_primary",onSelected:this.onClickChannel,type:uO.a.custom}),m.a.createElement(na.d,null),m.a.createElement(na.c,{label:mO.t("Suggestions"),className:"p-global_actions_menu__item_header p-global_actions_menu__item_header_suggestions"}),m.a.createElement(na.b,{icon:i,label:mO.t("New reminder"),className:"p-global_actions_menu__item",href:"https://calendar.google.com/calendar/b/1/r/eventedit",showLinkIndicatorIcon:!1,onSelected:function(){return e.props.clogger.track(le.EventId.GLOBAL_ACTIONS_CLICK_APP,{app_id:"reminder"})}}),m.a.createElement(na.b,{icon:o,label:mO.t("Start a Zoom call"),className:"p-global_actions_menu__item",href:"https://slack.zoom.us/j/176336025",showLinkIndicatorIcon:!1,onSelected:function(){return e.props.clogger.track(le.EventId.GLOBAL_ACTIONS_CLICK_APP,{app_id:"zoom"})}}),m.a.createElement(na.b,{icon:s,label:mO.t("Find a GIF"),className:"p-global_actions_menu__item",href:"https://giphy.com",showLinkIndicatorIcon:!1,onSelected:function(){return e.props.clogger.track(le.EventId.GLOBAL_ACTIONS_CLICK_APP,{app_id:"giphy"})}}),m.a.createElement(da.a,{label:mO.t("Browse more tools"),className:"p-global_actions_menu__item p-global_actions_menu__item_header",renderSubmenu:this.renderBrowseMoreTools})))}}]),t}(p.PureComponent);bO.displayName="GlobalActionsMenu",bO.defaultProps=hO;var fO={openDmBrowserModal:function(){return dO.a.apply(void 0,arguments)},openComposerPage:function(){return Wf.apply(void 0,arguments)},openChannelCreateModal:function(){return x.a.apply(void 0,arguments)}},gO=Object(g.b)(function(e){return{clogger:Object(re.a)({state:e}),featureGlobalActionsV0:Object(y.m)(e,"feature_global_actions_v0"),isComposeFlowEnabled:Object(T.g)(e)}},fO)(bO),_O=new B.b("global_actions"),vO=(h.b.string,h.b.bool,h.b.object,{className:void 0,featureGlobalActionsV0:!1,clogger:{track:d.a}}),yO=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderMenu=n.renderMenu.bind(n),Object(Kt.a)(n,["onClick"]),n}return u()(t,e),o()(t,[{key:"onClick",value:function(){this.props.clogger.track(le.EventId.GLOBAL_ACTIONS_CLICK,{})}},{key:"renderMenu",value:function(e){return m.a.createElement(gO,{menuProps:e})}},{key:"render",value:function(){var e=this.props,t=e.className;return e.featureGlobalActionsV0?m.a.createElement(na.e,{renderMenu:this.renderMenu,position:"bottom-left",offsetX:-4,offsetY:8,onClick:this.onClick},m.a.createElement(qi.c,{tip:_O.t("New"),position:"bottom"},m.a.createElement(fh.a,{className:f()("p-global_actions_button",t),"data-qa":"global_actions_btn","aria-label":_O.t("New")},m.a.createElement(ta.b,{type:"plus"})))):null}}]),t}(p.PureComponent);yO.displayName="GlobalActionsButton",yO.defaultProps=vO;var kO=Object(g.b)(function(e){return{featureGlobalActionsV0:Object(y.m)(e,"feature_global_actions_v0"),clogger:Object(re.a)({state:e})}})(yO),OO=n("ZYn4"),CO=n("6avh"),EO=n("K7zz"),jO=n("S6Dj");function SO(e){if(!Object(y.m)(e,"feature_channel_sections"))return!1;var t=Object(Xt.c)(e,"channel_sections_user");return"opt_in"===t||"opt_out"!==t&&"channel_sections"===Object(Xt.c)(e,"channel_sections_team")}var IO=n("okZA"),wO=n("yZEV"),NO=n("W045"),TO=n("8vJI"),AO=(h.b.string.isRequired,h.b.string,h.b.string.isRequired,{secondary:void 0}),RO=function(e){var t=e.name,n=e.secondary,a=e.userId,r=n&&m.a.createElement("div",{className:"p-classic_nav__team_menu__blurb__sub"},n);return m.a.createElement("div",{className:"p-classic_nav__team_menu__blurb p-classic_nav__team_menu__blurb--user"},m.a.createElement(Do.c,{userId:a,size:36,isInteractive:!1,className:"p-classic_nav__team_menu__blurb__icon",tabIndex:"-1"}),m.a.createElement("div",{className:"p-classic_nav__team_menu__blurb__right"},m.a.createElement("div",{className:"p-classic_nav__team_menu__blurb__name"},t),r))};RO.displayName="UserBlurb",RO.defaultProps=AO;var PO=Object(g.b)(function(e){var t=Object(xo.b)(e);return{name:Object(eo.V)(e,t),secondary:Object(eo.M)(e,t),userId:t.id}})(RO),MO=new B.b("classic_nav");function xO(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.presence;if(!e.featureClassicNav)return null;switch(t){case"active":return MO.rt("Set yourself to <strong>away</strong>");case"away":return MO.rt('<strong className="half_opacity">Away</strong> Set yourself to <strong>active</strong>');default:return null}}function FO(e){var t=Object(xo.b)(e);return{hasCustomStatus:Object(eo.ab)(t),presence:Object(wO.f)(e,t.id),isOffline:!Object(Qt.c)(e),featureClassicNav:Object(y.m)(e,"feature_classic_nav"),featureOfflineMode:Object(y.m)(e,"feature_offline_mode")}}function LO(e){return{clearStatus:function(){return e(Object(NO.a)({profile:{status_text:"",status_emoji:"",status_text_canonical:"",status_expiration:0}}))},setStatus:function(){return e(Object(xy.a)())},openProfile:function(){return e(Object(jn.j)())},preferences:function(){return e(Object(ul.a)())},togglePresence:function(){return e(Object(wO.h)())},help:function(){return e(Object(TO.a)())}}}var DO=n("yU6Y"),UO=n.n(DO),BO=n("KGMq"),qO=n("0nhw"),HO=n("s5Is"),WO=n("derf"),GO=new B.b("leave_workspace"),KO=Object(Ct.b)(),VO=(h.b.object.isRequired,h.b.object.isRequired,h.b.bool,h.b.func,h.b.func,h.b.func,h.b.func,{featureSonicLeaveWorkspaceDialog:!1,callLeaveWorkspace:d.a,enqueueToast:d.a,removeWorkspaceAndSignOutOfTeam:d.a,getSelfEnterpriseOwnerEmail:d.a}),zO="disable_denied_due_to_idpgroup_membership",YO="user_deleted_already",QO="failed_to_convert_org_user_to_team_user",XO=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isLoading:!1},n.onClickSubmit=n.onClickSubmit.bind(n),n.trackLeaveClick=n.trackLeaveClick.bind(n),n}return u()(t,e),o()(t,[{key:"onClickSubmit",value:function(){var e=this,t=this.props,n=t.team,a=t.removeWorkspaceAndSignOutOfTeam;if(!t.featureSonicLeaveWorkspaceDialog)return null;var r=Object(De.j)(n);this.setState(function(){return{isLoading:!0}});var i=this.props.getSelfEnterpriseOwnerEmail();return this.trackLeaveClick(),this.props.callLeaveWorkspace({teamId:r}).catch(function(t){var o=t.data;if(o.error===zO){var s=GO.rt("<strong>You can\u2019t leave this workspace.</strong>"),l=GO.rt("Because you\u2019re in an IdP group assigned to this workspace, you can\u2019t leave it here. <a>Contact an Org Admin</a> for help leaving the workspace.",null,function(e){var t=e.key,n=e.text;return m.a.createElement("a",{key:t,href:"mailto:"+i,target:"_blank",rel:"noopener noreferrer"},n)});e.setToastText({node:m.a.createElement("div",null,m.a.createElement("strong",null,s),m.a.createElement("br",null),l)}),KO.error("Error with Leave Workspace Action from TeamMenu - ",o.error)}else if(o.error===YO||o.error===QO){a(r);var c=GO.rt("<strong>You've successfully left {team_name}</strong>",{team_name:Object(De.f)(n),fallbackHash:"4a38fa5a5bec946cb5cc0d6a9e2817bc498562aa"});e.setToastText({node:m.a.createElement("span",null,c)})}else{var u=GO.rt("<strong>Leaving workspace failed due to an error</strong>",{fallbackHash:"e51a69c26500f73f762ddcacb0cdcb7db688191f"});e.setToastText({node:m.a.createElement("span",null,u)}),KO.error("Error with Leave Workspace Action from TeamMenu - ",o.error)}}).finally(function(){e.setState(function(){return{isLoading:!1}})})}},{key:"setToastText",value:function(e){var t=e.node;this.props.enqueueToast({element:m.a.createElement(Cn.b,{position:"bottom-right",offsetY:50,fadeDelay:5e3},t)})}},{key:"trackLeaveClick",value:function(){var e=this.props,t=e.team,n=e.clogger,a={anchor_page:"your_workspaces",entity_key:"leave_workspace_confirm",target_team_id:Object(De.j)(t),tracking_code:"your_workspaces_list"};n.track("ENTERPRISE_LEAVE_WORKSPACE",ye()({},a,{contexts:{ui_context:{action:"click",action_status:1}}}))}},{key:"render",value:function(){var e=this.props,t=e.featureSonicLeaveWorkspaceDialog,n=e.team,a=this.state.isLoading;if(!t)return null;var r=GO.t("Are you sure you want to leave {team_name}?",{team_name:Object(B.p)(Object(De.f)(n)),fallbackHash:"2db4b766c6e1e14fbc2657d45b8fb13b96b85dd6"}),i=m.a.createElement("div",{className:"display_flex align_items_center"},m.a.createElement(WO.b,{id:Object(De.j)(n),size:20,className:"margin_right_75"}),m.a.createElement("div",null,r));return m.a.createElement(m.a.Fragment,null,m.a.createElement(ar.a,{title:i,titleAria:r,goButtonText:GO.t("Leave This Workspace",{fallbackHash:"29b1014ee5c119d2a9785259535f58bb3f123bb6"}),onGo:this.onClickSubmit,showCancelButton:!0,truncateTitle:!1,shouldCloseOnGo:!0,goButtonIsPending:a},Object(De.L)(n)&&GO.t("This workspace is hidden. Once you leave, you won\u2019t have access unless you\u2019re invited back.")))}}]),t}(m.a.Component);XO.displayName="LeaveWorkspaceDialog",XO.defaultProps=VO;var JO=Object(g.b)(function(e){var t=Object(y.c)(e);return{team:Object(we.d)(e),clogger:Object(re.a)({state:e}),member:Object(xo.d)(e,t),featureSonicLeaveWorkspaceDialog:Object(y.m)(e,"feature_sonic_leave_workspace_dialog"),getSelfEnterpriseOwnerEmail:function(){return Object(we.f)(e)}}},function(e){return{enqueueToast:function(){return e(en.c.apply(void 0,arguments))},callLeaveWorkspace:function(){return e(qO.c.apply(void 0,arguments))},removeWorkspaceAndSignOutOfTeam:function(e){return Object(_.dispatchForClientStore)(Object(HO.removeWorkspace)(e))}}})(XO),ZO=Object(gt.b)("Opens the leave a workspace dialog",function(e,t){Object(y.m)(t(),"feature_sonic_leave_workspace_dialog")&&e(Object(tn.e)({element:m.a.createElement(JO,{})}))});ZO.meta={name:"openLeaveWorkspaceDialog",key:"actionsOpenLeaveWorkspaceDialogOpenLeaveWorkspaceDialog",description:"Opens the leave a workspace dialog"};var $O=ZO;ZO.propTypes={};var eC=n("XUHR"),tC=Object(gt.b)("Clogs shared channels team menu item click",function(e,t){var n=t(),a=Object(re.a)({state:n}),r=Object(De.D)(Object(we.d)(n));a.track(le.EventId.GROWTH_INTRO_SHARED_CHANNEL,{contexts:{ui_context:{step:le.UiStep.TEAM_MENU,step_variant:r?Sl.b.PAID:Sl.b.FREE,action:le.UiAction.CLICK,ui_properties:{element_type:le.ElementType.LINK,element_name:r?"shared_channels_beta_cta":"shared_channels_beta_new_cta"}}}}),a.track(le.EventId.CHANNEL_CREATE_FLOW,{contexts:{family:"shared",ui_context:{step:"channel_create_modal",action:le.UiAction.CLICK,ui_properties:{element_type:le.ElementType.BUTTON,element_name:"shared_channels_new"}}}})});tC.meta={name:"clogSharedChannelsTeamMenuItemClick",key:"actionsClogSharedChannelsTeamMenuItemClickClogSharedChannelsTeamMenuItemClick",description:"Clogs shared channels team menu item click"};var nC=tC,aC=n("XNBh"),rC=n("Lts7"),iC=n("UEyp"),oC=n("KXvl"),sC=n("p9qW"),lC=n("6FZx"),cC=Object(Je.b)(function(e){return e&&e.teamMenuCTA&&e.teamMenuCTA.name});cC.meta={name:"getTeamMenuCTAName",key:"teamMenuCtaStoreTeamMenuCtaSelectorsGetTeamMenuCTAName"};var uC=Object(Je.b)(function(e){return e&&e.teamMenuCTA&&e.teamMenuCTA.data});uC.meta={name:"getTeamMenuCTAData",key:"teamMenuCtaStoreTeamMenuCtaSelectorsGetTeamMenuCTAData"};var dC=n("dhcM"),pC=n("j4mf"),mC=(n("5DNE"),h.b.number.isRequired,h.b.number.isRequired,h.b.number.isRequired,h.b.string,h.b.string,h.b.string,function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.containerSizeInPixels,n=e.progressPercentage,a=e.progressBarWidthInPixels,r=e.progressBarColor,i=e.progressBarBackgroundColor,o=e.progressBarLabel,s=(t-a)/2,l=s*Math.PI*2,c=l-l*n/100,u=t/2;return m.a.createElement("svg",{width:t,height:t,viewBox:"0 0 "+t+" "+t},m.a.createElement("circle",{className:"p-classic_nav__team_messages_progress_bar_background",cx:u,cy:u,r:s,strokeWidth:a+"px",style:{stroke:i}}),m.a.createElement("circle",{className:"p-classic_nav__team_messages_progress_bar_progress",cx:u,cy:u,r:s,strokeWidth:a+"px",transform:"rotate(-90 "+u+" "+u+")",style:{stroke:r,strokeDasharray:l,strokeDashoffset:c}}),m.a.createElement("text",{className:"p-classic_nav__team_messages_progress_bar_text",x:u,y:u,dy:"4px",textAnchor:"middle"},o||Object(pC.e)(n,{precision:2})))}}]),t}(p.Component));mC.displayName="TeamMessagesProgressBar",mC.defaultProps={progressBarColor:null,progressBarBackgroundColor:null,progressBarLabel:null};var hC=mC,bC=n("BWAg"),fC=(n("Rx/r"),new B.b("classic_nav")),gC={r:69,g:186,b:133},_C={r:255,g:197,b:101},vC=243,yC=61,kC=95,OC=(h.b.number.isRequired,h.b.object.isRequired,h.b.bool.isRequired,h.b.object.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["onLimitMeterSelected"]),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.clogImpression()}},{key:"onLimitMeterSelected",value:function(){var e=this.props.team,t=Object(br.O)()?"stats":"pricing?ui_element=142&ui_step=61";Object(De.R)(e,t),this.clogClick()}},{key:"getTotalMessagesDetail",value:function(){var e=this.props,t=e.messagesCount,n=e.inLimitMeterSpAbbrExper;return t>1e4?t<10100||t>1e6?fC.rt("Upgrade to access all of your messages."):fC.rt("Upgrade to access your first {hiddenMessagesCountFormatted} messages.",{hiddenMessagesCountFormatted:Object(yc.a)(t-1e4,{precision:2,lowercase:!0,inLimitMeterSpAbbrExper:n})}):fC.rt("On the free plan, you can only view 10k most recent messages.")}},{key:"getTeamMessagesProgressBarData",value:function(){var e=this.props.messagesCount,t=0,n=null,a=null;if(e<=1e4){t=e/1e4*100,n="rgba(0, 0, 0, 0.1)";var r=Object(dC.a)(ye()({},gC),ye()({},_C),function(e,n){return Math.floor(e*(1-t/100)+n*(t/100))});a="rgb("+r.r+", "+r.g+", "+r.b+")"}else t=100*(Math.atan((e-1e4)/2500-3)/Math.PI+.5),n="rgb("+_C.r+", "+_C.g+" , "+_C.b+")",a="rgb("+vC+", "+yC+", "+kC+")";return{progressBarPercentage:t,progressBarBackgroundColor:n,progressBarColor:a}}},{key:"shouldShowProgressChart",value:function(){var e=this.props,t=e.messagesCount,n=e.inLimitMeterSpAbbrExper;return!("es"===Object(Yo.f)().split("-")[0]&&t>99999&&n)}},{key:"clog",value:function(e){var t=e.action,n=e.elementType;this.props.clogger.track(le.EventId.UPGRDEXP_LIMIT_METER,{contexts:{ui_context:{step:le.UiStep.SLACK_MENU,action:t,ui_properties:{element_type:n,element_name:"team_messages_limit_meter",element_value:this.props.messagesCount}}}})}},{key:"clogImpression",value:function(){this.clog({action:le.UiAction.IMPRESSION,elementType:le.ElementType.BANNER})}},{key:"clogClick",value:function(){this.clog({action:le.UiAction.CLICK,elementType:le.ElementType.BUTTON})}},{key:"renderHeading",value:function(e){if(this.shouldShowProgressChart())return m.a.createElement("strong",null,fC.rt("Total Messages"));var t=this.props.inLimitMeterSpAbbrExper;return m.a.createElement("strong",null,m.a.createElement("span",{className:"p-classic_nav__team_messages_limit_meter__heading"},fC.rt("Total Messages:",{fallbackHash:"534d090466ace9a2753bce9fb5c9771d48ff6a8f"})),Object(yc.a)(e,{precision:e>=1e4?3:2,lowercase:!0,inLimitMeterSpAbbrExper:t}))}},{key:"renderProgressBar",value:function(e){if(!this.shouldShowProgressChart())return null;var t=this.getTeamMessagesProgressBarData(),n=t.progressBarPercentage,a=t.progressBarBackgroundColor,r=t.progressBarColor,i=this.props.inLimitMeterSpAbbrExper;return m.a.createElement("div",{className:"p-classic_nav__team_messages_limit_meter__progress_chart"},m.a.createElement(hC,{containerSizeInPixels:54,progressBarWidthInPixels:4,progressPercentage:n,progressBarLabel:Object(yc.a)(e,{precision:e>=1e4?3:2,lowercase:!0,inLimitMeterSpAbbrExper:i}),progressBarColor:r,progressBarBackgroundColor:a}))}},{key:"render",value:function(){var e=this.props,t=e.messagesCount,n=Ep()(e,["messagesCount"]);return m.a.createElement(bC.a,ye()({},n,{onSelected:this.onLimitMeterSelected}),m.a.createElement("div",{className:"p-classic_nav__team_messages_limit_meter",role:"presentation"},m.a.createElement("div",null,m.a.createElement("div",{"data-qa":"limit-meter-heading"},this.renderHeading(t)),m.a.createElement("div",{className:"p-classic_nav__team_messages_limit_meter__detail"},this.getTotalMessagesDetail())),this.renderProgressBar(t)))}}]),t}(p.Component));OC.displayName="TeamMessagesLimitMeter";var CC=Object(g.b)(function(e){return{clogger:Object(re.a)({state:e}),team:Object(we.d)(e),inLimitMeterSpAbbrExper:"treatment"===Object(Xt.c)(e,"limit_meter_spanish_no_abbreviations")}})(OC),EC="limit_meter",jC=(h.b.string.isRequired,h.b.object.isRequired,function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.ctaName,n=e.ctaData,a=Ep()(e,["ctaName","ctaData"]);switch(t){case EC:return m.a.createElement(CC,ye()({messagesCount:n.messages_count},a));default:return null}}}]),t}(p.PureComponent));jC.displayName="TeamMenuCTAContainer";var SC=Object(lC.b)(Object(g.b)(function(e){return{ctaName:cC(e),ctaData:uC(e)}})(jC)),IC=n("0BC7"),wC=(n("p6QP"),new B.b("shared_channels")),NC=(h.b.bool,h.b.bool,h.b.string.isRequired,h.b.string.isRequired,h.b.object.isRequired,function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.clogger,n=e.clogStepVariant,a=e.clogElementName;t.track(le.EventId.GROWTH_INTRO_SHARED_CHANNEL,{contexts:{ui_context:{step:le.UiStep.TEAM_MENU,step_variant:n,action:le.UiAction.IMPRESSION,ui_properties:{element_type:le.ElementType.LINK,element_name:a}}}})}},{key:"render",value:function(){var e=this.props,t=e.showNewLabel,n=e.featureSharedChannelsRemoveBetaLabel?wC.rt("Shared channels"):wC.rt("Shared channels (beta)");return m.a.createElement("div",{className:"p-shared_channels_team_menu_item"},n,t&&m.a.createElement(p.Fragment,null," ",m.a.createElement("span",{className:"p-shared_channels_team_menu_item__label--new"},wC.rt("NEW"))))}}]),t}(p.PureComponent));NC.displayName="SharedChannelsTeamMenuItem",NC.defaultProps={showNewLabel:!1,featureSharedChannelsRemoveBetaLabel:!1};var TC=Object(g.b)(function(e){var t=Object(De.D)(Object(we.d)(e));return{clogger:Object(re.a)({state:e}),clogStepVariant:t?Sl.b.PAID:Sl.b.FREE,clogElementName:t?"shared_channels_beta_cta":"shared_channels_beta_new_cta",featureSharedChannelsRemoveBetaLabel:Object(y.m)(e,"feature_shared_channels_remove_beta_label")}})(NC),AC=n("IEWa"),RC=(n("RHBl"),h.b.object.isRequired,h.b.string.isRequired,h.b.string.isRequired,function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.team,n=e.name,a=e.url;return m.a.createElement("div",null,m.a.createElement("div",{className:"p-classic_nav__team_menu__blurb p-classic_nav__team_menu__blurb--team"},m.a.createElement(WO.b,{id:t.id,size:36,className:"p-classic_nav__team_menu__blurb__icon",tabIndex:"-1"}),m.a.createElement("div",{className:"p-classic_nav__team_menu__blurb__right"},m.a.createElement("div",{className:"p-classic_nav__team_menu__blurb__name"},n),m.a.createElement("div",{className:"p-classic_nav__team_menu__blurb__sub"},a))))}}]),t}(p.Component));RC.displayName="TeamBlurb";var PC=Object(g.b)(function(e){var t=Object(we.d)(e);return{team:t,name:Object(De.f)(t),url:t.domain+".slack.com"}})(Object(lC.b)(RC)),MC=n("whT2"),xC=new B.b("classic_nav"),FC=(h.b.object.isRequired,h.b.object.isRequired,h.b.string,h.b.func.isRequired,h.b.object.isRequired,h.b.object,{orgName:void 0,localDiscountOffer:null}),LC=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={paymentsStatusIsLoaded:!1},n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){var e=this;this.clogImpression(),this.props.fetchPaymentsStatus().then(function(){e.setState(function(){return{paymentsStatusIsLoaded:!0}})})}},{key:"clog",value:function(e){var t=e.action,n=e.elementType,a=e.elementName,r=void 0===a?"team_plan_pricing_link":a;this.props.clogger.track(le.EventId.GROWTH_PRICING,{contexts:{ui_context:{step:le.UiStep.SLACK_MENU,action:t,ui_properties:{element_type:n,element_name:r}}}})}},{key:"clogImpression",value:function(e){this.clog({action:le.UiAction.IMPRESSION,elementType:le.ElementType.LINK,elementName:e})}},{key:"clogClick",value:function(e){this.clog({action:le.UiAction.CLICK,elementType:le.ElementType.LINK,elementName:e})}},{key:"buildPlanInfoLink",value:function(e){var t=this,n=e.path,a=e.tag,r=e.text,i=e.elementName;if("a"!==a)return null;var o=this.props.team;return m.a.createElement(En.a,{target:"_blank",className:"bold",path:n,onClick:function(){Object(De.R)(o,n),t.clogClick(i)}},r)}},{key:"renderTeamPlanInfo",value:function(){var e=this,t=this.props,n=t.team,a=t.member,r=t.orgName,i=t.localDiscountOffer;if(!this.state.paymentsStatusIsLoaded)return null;if(Object(eo.wb)(a))return null;var o=void 0,s=void 0,l="p-classic_nav__team_menu__blurb_plan",c=Object(De.z)(n),u=Object(De.A)(n),d=Object(De.w)(n);if((u||d)&&i){var h=void 0;h=i.country?"team_plan_pricing_link_discount_"+i.country.replace(/\s/g,"_").toLowerCase():"team_plan_pricing_link_discount",o="pricing?ui_step=61&ui_element=5",s=m.a.createElement(p.Fragment,null,xC.rt("Get {localDiscountOfferPercent}% off a paid plan, for a limited time.",{localDiscountOfferPercent:i.discountPercent})," ",this.buildPlanInfoLink({path:o,tag:"a",text:xC.t("See upgrade options"),elementName:h})),l=f()(l,"p-classic_nav__team_menu__blurb_plan--has_local_discount","p-classic_nav__team_menu__blurb_plan--has_local_discount_"+i.country.toLowerCase())}else if(u){var b=Ku()(1e3*Object(De.d)(n)).subtract(1,"day"),g=Object(MC.a)(b,{timeZone:Object(eo.Q)(a),timeZoneOffset:Object(eo.R)(a),returnMoment:!0}),_=Object(Sp.a)(g,"{date}");o="pricing?ui_step=61&ui_element=5",s=m.a.createElement(p.Fragment,null,c?xC.rt("Your trial of <strong>Standard</strong> lasts through {trialExpiryDate}.",{trialExpiryDate:_}):xC.rt("Your trial of <strong>Plus</strong> lasts through {trialExpiryDate}.",{trialExpiryDate:_})," ",this.buildPlanInfoLink({path:o,tag:"a",text:xC.t("See upgrade options"),elementName:"team_plan_pricing_link_trial"}))}else d?(o="pricing?ui_step=61&ui_element=5",s=xC.rt("Your workspace is currently on the free version of Slack. <a>See upgrade options</a>",{fallbackHash:"4db253b125b40c2b0b2b8bc5e70aba1dbc223e5f",fallbackHashNs:"classic_nav"},function(t){var n=t.tag,a=t.text;return e.buildPlanInfoLink({path:o,tag:n,text:a})})):c?(o="pricing/standard?ui_step=61&ui_element=5",s=xC.rt("Your workspace is currently on Slack's <strong>Standard</strong> plan. <a>Learn more</a>",{},function(t){var n=t.tag,a=t.text;return e.buildPlanInfoLink({path:o,tag:n,text:a})})):Object(De.x)(n)?(o="pricing/plus?ui_step=61&ui_element=5",s=xC.rt("Your workspace is currently on Slack's <strong>Plus</strong> plan. <a>Learn more</a>",{},function(t){var n=t.tag,a=t.text;return e.buildPlanInfoLink({path:o,tag:n,text:a})})):Object(De.s)(n)?(o="account/workspace-settings",s=xC.rt("This workspace is part of the <strong>{orgName}</strong> organization. <a>Learn more</a>",{orgName:r},function(t){var n=t.tag,a=t.text;return e.buildPlanInfoLink({path:o,tag:n,text:a})})):Object(De.v)(n)&&(s=xC.t("Your workspace is currently on Slack\u2019s Enterprise Select plan."));return s?m.a.createElement("p",{className:l,"data-qa":"classic_nav__team_menu__blurb_plan"},s):null}},{key:"render",value:function(){return this.renderTeamPlanInfo()}}]),t}(p.PureComponent);LC.displayName="TeamPlanInfo",LC.defaultProps=FC;var DC={fetchPaymentsStatus:IO.d},UC=Object(g.b)(function(e){var t=Object(we.d)(e);return{team:t,member:Object(xo.b)(e),orgName:t.enterprise_name,clogger:Object(re.a)({state:e}),localDiscountOffer:Object(De.l)(t)}},DC)(Object(lC.b)(LC)),BC=n("5+aj"),qC=new B.b("classic_nav"),HC=(h.b.object.isRequired,h.b.bool,h.b.string,h.b.string,h.b.bool,h.b.bool,h.b.bool,h.b.bool.isRequired,h.b.bool.isRequired,h.b.func,h.b.bool,{teamIsEnterprise:!1,teamEnterpriseDomain:void 0,teamUrl:"",userIsAppmin:!1,userCanManageSharedChannels:!1,featureClassicNav:!1,performOpenConnectedWorkspacesModal:d.a,featureSharedChannelsRemoveBetaLabel:!1}),WC=function(e){var t=e.menuProps,n=e.teamIsEnterprise,a=e.teamEnterpriseDomain,r=e.teamUrl,i=e.userIsAppmin,o=e.userCanManageSharedChannels,s=e.featureClassicNav,l=e.isAdminOrOwner,c=e.isEnterpriseAdminOrOwner,u=e.performOpenConnectedWorkspacesModal,d=e.featureSharedChannelsRemoveBetaLabel;if(!s)return null;var p=[{label:qC.t("Manage members"),show:l,href:r+"admin",key:"manage-members"},{label:qC.t("Workspace settings"),show:l,href:r+"admin/settings",key:"workspace-settings"},{label:qC.t("Organization settings"),show:c,href:"https://"+a+".enterprise.slack.com/manage",key:"org-settings"},{label:qC.t("Manage apps"),show:!n&&i,href:r+"apps/manage?utm_source=in-prod&utm_medium=inprod-apps_link-slack_menu-click",key:"manage-apps"},{label:qC.t("Manage shared channels"),click:u,show:o,key:"manage-shared-channels",badgeLabel:d?qC.t("NEW"):null}].filter(function(e){return e.show});return m.a.createElement(na.a,ye()({},t,{template:p}))};WC.displayName="TeamAdminSubmenu",WC.defaultProps=HC;var GC=Object(g.b)(function(e){var t=Object(we.d)(e),n=Object(xo.b)(e),a=Object(we.g)(e),r=Object(eo.qb)(n)||Object(eo.rb)(n),i=Object(eo.eb)(n)||Object(eo.Eb)(n)||r;return{teamIsEnterprise:Object(De.s)(t),teamEnterpriseDomain:a&&a.domain,teamUrl:Object(De.o)(t),userIsAppmin:Object(xo.k)(e),userCanManageSharedChannels:Object(aC.a)(e)?Object(Bb.y)(e)||Object(Bb.S)(e):Object(eo.g)(e,{blockAllForNoOne:!1}),featureClassicNav:Object(y.m)(e,"feature_classic_nav"),featureSharedChannelsRemoveBetaLabel:Object(y.m)(e,"feature_shared_channels_remove_beta_label"),isAdminOrOwner:i,isEnterpriseAdminOrOwner:r}},function(e){return{performOpenConnectedWorkspacesModal:function(){return e(BC.a.apply(void 0,arguments))}}})(WC),KC=n("Zr7G"),VC=Object(gt.b)("Counts the number of times the Open App team menu item is selected",function(e,t){Object(KC.c)({getState:t}).count("team_menu_download_apps")});VC.meta={name:"countOpenAppClick",key:"componentsClassicNavTeamMenuUtilityCountOpenAppClickCountOpenAppClick",description:"Counts the number of times the Open App team menu item is selected"};var zC=VC,YC=n("IY6O"),QC=new B.b("classic_nav");function XC(e){var t=Object(xo.b)(e),n=Object(we.d)(e),a=Object(YC.getNumberOfWorkspaces)(Object(_.getStateForClientStore)()),r=Object(sC.a)({numTeams:a}),i=Object(De.s)(n),o=Object(we.g)(e),s=Object(De.F)(e),l=Object(br.O)();return{userId:t.id,userIsAdmin:Object(eo.eb)(t),userIsOwner:Object(eo.Eb)(t),userIsRestricted:Object(eo.Gb)(t),userIsEnterpriseAdminOrOwner:Object(eo.qb)(t)||Object(eo.rb)(t),teamIsEnterprise:i,teamIsPaid:Object(De.D)(n),orgName:n.enterprise_name,orgId:n.enterprise_id,teamName:Object(De.f)(n),teamUrl:Object(De.o)(n),teamEnterpriseDomain:o&&o.domain,team:n,numTeams:a,isSignedIntoOtherOrgTeams:Object(y.g)(e).some(function(e){return e.id!==n.id&&e.enterprise_id===n.enterprise_id}),isSharedChannelsExplicitlyDisabled:s,userCanSeeInviteModal:Object(iC.d)(e),userCanManageSharedChannelsBeta:Object(Bb.k)(e,!0),userCanManageESC:Object(aC.a)(e)?Object(Bb.y)(e)||Object(Bb.S)(e):Object(eo.g)(e,{blockAllForNoOne:!1}),userCanLeaveWorkspace:Object(eo.l)(e,t)&&Object(y.m)(e,"feature_sonic_leave_workspace_dialog"),userIsAppmin:Object(xo.k)(e),purchaserPref:Object(Zt.j)(e,"purchaser"),statsOnlyAdmins:Object(ra.a)(e,"stats_only_admins"),customizeOnlyAdmins:Object(ra.a)(e,"emoji_only_admins")&&Object(ra.a)(e,"slackbot_responses_only_admins")&&Object(ra.a)(e,"loading_only_admins"),showSwitchWorkspaces:Object(y.g)(e).length>0&&!r,showTeamSidebar:r,isAppSpaceEnabled:!0,featureClassicNav:Object(y.m)(e,"feature_classic_nav"),featureOfflineMode:Object(y.m)(e,"feature_offline_mode"),featureSharedChannelsRemoveBetaLabel:Object(y.m)(e,"feature_shared_channels_remove_beta_label"),isOffline:!Object(Qt.c)(e),workflowBuilderEnabled:Object(AC.b)(e),usingAppStoreBuild:l}}function JC(e){return{invite:function(){return e(Object(M.a)())},externalSharedChannels:function(){for(var t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];e(nC()),e(Object(eC.a)(ye()({entryPoint:"team_menu"},n)))},launchWorkflowBuilder:function(){return e(Object(rC.a)({source:"workspace_menu"}))},findWorkspaces:function(t){return e(Object(BO.a)(t))},leaveWorkspace:function(t){return e($O(t))},signOut:function(e){return Object(_.dispatchForClientStore)(Object(HO.removeWorkspace)(e))},signOutOfOrg:function(e){return Object(_.dispatchForClientStore)(Object(HO.removeOrg)(e))},signIn:function(){return Object(_.dispatchForClientStore)(Object(HO.startWorkspaceSignIn)())},openApp:function(){return e(zC())}}}function ZC(e){return m.a.createElement(GC,{menuProps:e})}function $C(e){return m.a.createElement(IC.a,{menuProps:e})}ZC.displayName="renderAdministrationSubmenu",$C.displayName="renderWorkspacesSubmenu";h.b.object.isRequired,h.b.object.isRequired,h.b.objectOf(h.b.func).isRequired,h.b.objectOf(h.b.func).isRequired,h.b.func,h.b.bool.isRequired;var eE={renderSonicMenu:d.a},tE=function(e){var t=e.userItemsData,n=e.userItemsActions,a=e.teamItemsData,r=e.teamItemsActions,i=e.renderSonicMenu,o=e.featureTinyspeck,s=Ep()(e,["userItemsData","userItemsActions","teamItemsData","teamItemsActions","renderSonicMenu","featureTinyspeck"]),l=Object(ae.a)()&&(ce.k||o)&&i!==d.a?[{type:"submenu",label:"Sonic",renderSubmenu:i,key:"sonic-debug-submenu"},{type:"separator",key:"sonic-debug-separator"}]:{},c=[].concat(ti()(l),ti()(function(e,t){var n=e.hasCustomStatus,a=e.presence,r=e.featureClassicNav,i=e.featureOfflineMode,o=e.isOffline;return r?[{type:"custom",children:m.a.createElement(PO,{key:"user-blurb"}),show:!0,key:"user-blurb"},{label:MO.t("Clear status"),show:n,click:t.clearStatus,key:"clear-status"},{label:n?MO.t("Edit status"):MO.t("Set a status"),shortcut:Object(ce.p)()?"\u2318\u21e7Y":"Ctrl+Shift+Y",show:!0,click:t.setStatus,key:"set-status"},{label:MO.t("Profile & account"),show:!0,click:t.openProfile,key:"profile"},{label:MO.t("Preferences"),shortcut:Object(ce.p)()&&br.Q&&"\u2318,",show:!0,click:t.preferences,key:"preferences"},{label:xO({presence:a,featureClassicNav:r}),show:!0,click:t.togglePresence,key:"presence",disabled:i&&o,showOfflineIcon:i&&o},{label:MO.t("Help & feedback"),show:!0,click:t.help,key:"help"}].filter(function(e){return e.show}):[]}(t,n)),[{type:"separator",key:"team-menu-separator"}],ti()(function(e,t){if(!e.featureClassicNav)return[];var n=e.userId,a=e.userIsAdmin,r=e.userIsEnterpriseAdminOrOwner,i=e.userIsOwner,o=e.userIsRestricted,s=e.teamIsEnterprise,l=e.teamIsPaid,c=e.orgId,u=e.orgName,d=e.teamName,p=e.teamUrl,h=e.teamEnterpriseDomain,b=e.team,f=e.isSignedIntoOtherOrgTeams,g=e.isSharedChannelsExplicitlyDisabled,_=e.userCanSeeInviteModal,v=e.userCanManageSharedChannelsBeta,y=e.userCanManageESC,k=e.userCanLeaveWorkspace,O=e.userIsAppmin,C=e.purchaserPref,E=e.statsOnlyAdmins,j=e.customizeOnlyAdmins,S=e.isAppSpaceEnabled,I=e.showSwitchWorkspaces,w=e.featureOfflineMode,N=e.featureSharedChannelsRemoveBetaLabel,T=e.isOffline,A=e.showTeamSidebar,R=e.workflowBuilderEnabled,P=e.usingAppStoreBuild,M=!o,x=!E,F=!j;return[{type:"custom",children:m.a.createElement(PC,{key:"team-blurb"}),show:!0,key:"team-blurb"},{type:"custom",children:m.a.createElement(UC,{key:"team-plan-info"}),show:s||!P,key:"team-plan-info"},{type:"custom",children:m.a.createElement(SC,{key:"team-menu-cta-container"}),show:!0,key:"team-menu-cta-container"},{type:"separator",show:!0,key:"separator-team-blurb"},{type:"submenu",label:QC.t("Administration"),show:y||a||i||r,renderSubmenu:ZC,key:"administration"},{label:QC.t("Invite people"),show:_,click:t.invite,key:"invite",disabled:w&&T,showOfflineIcon:w&&T},{label:QC.t("Analytics"),show:M&&(a||x),href:p+"stats",key:"analytics"},{label:QC.t("Billing"),show:s?r:!!l&&(i||C),href:s?"https://"+h+".enterprise.slack.com/manage/billing":p+"admin/billing",key:"billing"},{show:R,click:t.launchWorkflowBuilder,label:QC.t("Workflow Builder"),key:"launch-workflow-builder",badgeLabel:QC.t("NEW")},{label:QC.t("Customize Slack"),show:M&&(a||F),href:p+"customize?utm_source=in-prod&utm_medium=inprod-customize_link-slack_menu-click",key:"customize"},{label:QC.t("Manage apps"),show:S&&O&&s,href:p+"apps/manage?utm_source=in-prod&utm_medium=inprod-apps_link-slack_menu-click",key:"apps"},{label:m.a.createElement(TC,{showNewLabel:N}),show:l&&v&&!g,click:t.externalSharedChannels,key:"ext-shared-channels"},{label:m.a.createElement(TC,{showNewLabel:!0}),show:!l&&v&&!g&&!P,click:t.externalSharedChannels,key:"ext-shared-channels-free-team"},{label:QC.t("Find more workspaces"),show:s&&M,click:function(){return t.findWorkspaces(n)},disabled:w&&T,showOfflineIcon:w&&T,key:"find-workspaces"},{label:QC.t("Leave this workspace"),show:s&&k,click:t.leaveWorkspace,key:"leave-workspace",disabled:w&&T,showOfflineIcon:w&&T},{label:QC.rt("Sign out of <strong>{signoutName}</strong>",{signoutName:d}),show:!s||Object(oC.b)()&&f,click:function(){return t.signOut(b.id)},key:"sign-out",dataQa:"sign-out",disabled:w&&T,showOfflineIcon:w&&T},{label:QC.rt("Sign out of <strong>{signoutName}</strong> (organization)",{signoutName:u}),show:s,click:function(){return t.signOutOfOrg(c)},key:"org-sign-out",dataQa:"org-sign-out",disabled:w&&T,showOfflineIcon:w&&T},{type:"separator",show:!0,key:"separator-switch"},{type:"submenu",label:QC.t("Switch workspaces"),show:I,renderSubmenu:$C,key:"switch-workspaces"},{label:QC.t("Sign in to another workspace"),show:!A,click:t.signIn,key:"sign-in",disabled:w&&T,showOfflineIcon:w&&T},{type:"separator",show:!0,key:"separator-app"},{label:QC.rt("Open the Slack App"),show:!br.Q&&!UO.a.chromeBook,href:p+"ssb/redirect",click:t.openApp,key:"open-desktop-app"}].filter(function(e){return e.show})}(a,r)));return m.a.createElement(na.a,ye()({},s,{template:c,menuClassNames:"p-classic_nav__team_menu",stripTerminalSeparators:!0}))};tE.displayName="TeamMenu",tE.defaultProps=eE;var nE=Object(g.b)(function(e){return{userItemsData:FO(e),teamItemsData:XC(e),featureTinyspeck:Object(y.m)(e,"feature_tinyspeck")}},function(e){return{userItemsActions:LO(e),teamItemsActions:JC(e)}})(tE),aE=(n("Hza5"),new B.b("classic_nav")),rE=(h.b.string.isRequired,h.b.string.isRequired,h.b.string.isRequired,h.b.string.isRequired,h.b.bool,h.b.func,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.string,h.b.bool,h.b.bool,h.b.func,h.b.func,h.b.func.isRequired,h.b.object.isRequired,h.b.bool,h.b.bool,h.b.number,h.b.func,h.b.bool.isRequired,{featureClassicNav:!1,featureOfflineMode:!1,featureGlobalActionsV0:!1,renderSonicMenu:d.a,isWindowFrameless:!1,userAttentionIsOnChat:!1,composerVisible:!1,featureSonicServiceDown:!1,isServiceDown:!1,customStatusSite:void 0,removeFromSectionNavigation:d.a,addToSectionNavigation:d.a,featureChannelSections:!1,isOrganizing:!1,organizingSectionItemSelectedCount:0,clearAllOrganizingSections:d.a}),iE=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.menuButtonRef=m.a.createRef(),n.renderIcon=n.renderIcon.bind(n),n.renderMenu=n.renderMenu.bind(n),n.onServiceDownIndicatorClick=n.onServiceDownIndicatorClick.bind(n),n.onDndContainerClick=n.onDndContainerClick.bind(n),n.focus=n.focus.bind(n),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.fetchLocalDiscountOffer()}},{key:"componentDidUpdate",value:function(e){var t={prevUserAttentionIsOnChat:e.userAttentionIsOnChat,prevComposerVisible:e.composerVisible,currentUserAttentionIsOnChat:this.props.userAttentionIsOnChat,currentComposerVisible:this.props.composerVisible};Object(Up.a)(t)&&this.props.addToSectionNavigation(),Object(Bp.a)(t)&&this.props.removeFromSectionNavigation()}},{key:"onServiceDownIndicatorClick",value:function(e){e.stopPropagation();var t=this.props.customStatusSite,n=t?"https://status.slack.com/"+encodeURIComponent(t):"https://status.slack.com";Object(ji.a)(n,"_blank")}},{key:"onOfflineIndicatorClick",value:function(e){e.stopPropagation()}},{key:"onDndContainerClick",value:function(e){e.stopPropagation()}},{key:"focus",value:function(){this.menuButtonRef.current.focus()}},{key:"maybeRenderStatusIndicator",value:function(){var e=this.props,t=e.isServiceDown,n=e.featureOfflineMode;return e.featureSonicServiceDown&&t?m.a.createElement(qi.c,{tip:aE.t("Limited connectivity"),position:"bottom-left"},m.a.createElement(_e.c,{className:"display_flex",onClick:this.onServiceDownIndicatorClick,"aria-label":aE.t("Limited connectivity. Navigate to our status site.")},m.a.createElement(ta.b,{type:"exclamation-circle",className:"p-classic_nav__team_header__team__status_indicator p-classic_nav__team_header__team__status_indicator--service_down"}))):n?m.a.createElement(Fi.a,null,m.a.createElement(qi.c,{tip:aE.t("No connection",{fallbackHash:"38d627873d774089f849a0750d81e19e73eba862"}),position:"bottom-left"},m.a.createElement(_e.c,{onClick:this.onOfflineIndicatorClick},m.a.createElement(ta.b,{type:"cloud-offline-small",className:"p-classic_nav__team_header__team__status_indicator cursor_default"})))):null}},{key:"renderMenu",value:function(e){return this.props.clogger.track(le.EventId.GLOBAL_NAV,{contexts:{ui_context:{action:le.UiAction.CLICK,ui_component:le.UiComponent.GLOBAL_NAV,ui_element:le.UiElement.NAV_TEAM_MENU}}}),m.a.createElement(nE,ye()({},e,{renderSonicMenu:this.props.renderSonicMenu}))}},{key:"renderServiceDownIcon",value:function(){return this.props.featureSonicServiceDown?m.a.createElement(p.Fragment,null,m.a.createElement(qi.c,{tip:aE.t("Slack is unavailable. Check our status page for updates."),position:"bottom"},m.a.createElement(ta.b,{type:"warning",className:"p-classic_nav__team_header__team__status_indicator margin_left_50"}))):null}},{key:"renderIcon",value:function(){return m.a.createElement(ta.b,{type:"chevron-down",className:"p-classic_nav__team_header__team__icon"})}},{key:"render",value:function(){var e=this.props,t=e.teamName,n=e.teamId,a=e.userId,r=e.userName,i=e.featureClassicNav,o=e.isWindowFrameless,s=e.featureGlobalActionsV0,l=e.featureChannelSections,c=e.isOrganizing,u=e.organizingSectionItemSelectedCount,d=e.featureChannelHeaderLabels;if(!i)return null;var h=m.a.createElement(_e.c,{ref:this.menuButtonRef,className:"p-classic_nav__team_header__team__icon_button","aria-label":aE.t("Team Menu"),"aria-haspopup":!0},this.renderIcon()),b=this.maybeRenderStatusIndicator(),g=s?null:m.a.createElement("div",{className:"p-classic_nav__team_header__team__dnd_container",role:"presentation",onClick:this.onDndContainerClick},m.a.createElement(cO,{className:"p-classic_nav__team_header__team__dnd"})),_=s?m.a.createElement("div",{className:"p-global_actions_button__container",role:"presentation"},m.a.createElement(kO,null)):null,v=f()({"p-classic_nav__team_header":!0,"p-classic_nav__team_header--frameless":o,"p-global_actions_button__header":s});if(l&&c)return m.a.createElement("div",{className:v},m.a.createElement("div",{className:"p-classic_nav__team_header__content p-classic_nav__team_header__content--organizing","data-qa":"organizing_header"},m.a.createElement("div",{className:"p-classic_nav__team_header__team"},m.a.createElement("div",{"data-teamid":n,className:"p-classic_nav__team_header__team__name","data-qa":"team_header"},aE.t("Organizing\u2026"))),m.a.createElement("div",{className:"p-classic_nav__header_organizing_state"},m.a.createElement("span",{"data-qa":"organizing_selection_count",className:"p-classic_nav__header_organizing_selection_count"},aE.t("{organizingSectionItemSelectedCount} selected",{organizingSectionItemSelectedCount:u})),u>0&&m.a.createElement(p.Fragment,null,m.a.createElement("span",{className:"p-classic_nav__header_organizing_selection_separator"}),m.a.createElement(la.a,{className:"p-classic_nav__header_organizing_selection_clear","data-qa":"organizing_selection_clear",onClick:this.props.clearAllOrganizingSections,invert:!0},aE.t("Deselect"))))));var y=d?aE.t("{teamName} options",{teamName:t,note:"Label for the left section of the Channel Header containing the workspace menu and notification menu buttons. Not visible on screen as it is only for customers using screen readers."}):void 0,k=d?"group":void 0;return m.a.createElement("div",{className:v,role:k,"aria-label":y},m.a.createElement(na.e,{renderMenu:this.renderMenu,position:"bottom-left",offsetX:-8,offsetY:2,allowanceX:4},m.a.createElement("div",{className:"p-classic_nav__team_header__content",id:"team-menu-trigger"},m.a.createElement("div",{className:"p-classic_nav__team_header__team"},b,m.a.createElement("div",{"data-teamid":n,className:"p-classic_nav__team_header__team__name","data-qa":"team_header"},t),h,g),m.a.createElement("div",{className:"p-classic_nav__team_header__user","data-qa":"user_header"},m.a.createElement(OO.a,{memberId:a,className:"p-classic_nav__team_header__user__presence",inline:!0}),m.a.createElement("span",{className:"p-classic_nav__team_header__user__name"},m.a.createElement("span",{className:"p-classic_nav__team_header__user__name__truncate"},r),m.a.createElement(CO.b,{memberId:a,tooltip:!0,tipPosition:"bottom"}))))),_)}}]),t}(p.Component);iE.displayName="TeamHeader",iE.defaultProps=rE;var oE={fetchLocalDiscountOffer:IO.c,clearAllOrganizingSections:jO.a},sE=Object(ae.a)()?Object(V.a)(iE,"TeamHeader",{index:3}):iE,lE=Object(g.b)(function(e){var t=Object(y.c)(e);return{teamId:Object(v.b)(e),teamName:Object(De.f)(Object(we.d)(e)),userId:t,userName:Object(eo.W)(e,t),customStatusSite:Object(ra.a)(e,"custom_status_site"),isWindowFrameless:Object(P.l)(e),userAttentionIsOnChat:Object(Ed.e)(e),composerVisible:(Object(lt.a)(e)||"composer_toolbar"===Object(Xt.c)(e,"composer_toolbar"))&&Object(Dp.b)(e),featureClassicNav:Object(y.m)(e,"feature_classic_nav"),featureOfflineMode:Object(y.m)(e,"feature_offline_mode"),featureGlobalActionsV0:Object(y.m)(e,"feature_global_actions_v0"),featureSonicServiceDown:Object(y.m)(e,"feature_sonic_service_down"),isServiceDown:!Object(Qt.e)(e),clogger:Object(re.a)({state:e}),featureChannelSections:Object(y.m)(e,"feature_channel_sections"),shouldUseChannelSections:SO(e),isOrganizing:Object(EO.d)(e),organizingSectionItemSelectedCount:Object(EO.e)(e),featureChannelHeaderLabels:Object(y.m)(e,"feature_channel_header_labels")}},oE)(sE),cE=(h.b.object,h.b.bool,{channel:void 0,isAppIm:!1}),uE=function(e){var t=e.isAppIm,n=e.channel;return n&&Object(K.hb)(n)?t?m.a.createElement(Fy.c,{size:32,userId:Object(K.H)(n),className:"p-channel_tabs__header__avatar"}):m.a.createElement(OO.a,{memberId:Object(K.H)(n),className:"p-channel_tabs__header__presence"}):null};uE.displayName="TabsHeaderAvatar",uE.defaultProps=cE;var dE=Object(g.b)(function(e,t){var n=t.channelId;return{channel:Object(G.e)(e,n),isAppIm:Object(K.kb)(e,n)}})(uE),pE=n("kcos"),mE=n("Ov61"),hE=n("Sq1r"),bE=n("N5a2"),fE=n("FSos"),gE=(h.b.string.isRequired,h.b.bool.isRequired,h.b.func.isRequired,h.b.func.isRequired,function(e){var t=e.memberId,n=e.isActive,a=e.addMemberToPresenceSubscription,r=e.removeMemberFromPresenceSubscription;Object(p.useEffect)(function(){return a({memberId:t}),function(){r({memberId:t})}},[t,a,r]);var i=n?void 0:"p-classic_nav__model__title__name--dim";return m.a.createElement(Dv.a,{id:t,className:i})});gE.displayName="DimmableMemberName";var _E={addMemberToPresenceSubscription:function(){return fE.a.apply(void 0,arguments)},removeMemberFromPresenceSubscription:function(){return fE.c.apply(void 0,arguments)}},vE=Object(g.b)(function(e,t){var n=t.memberId;return{isActive:"active"===Object(wO.f)(e,n)}},_E)(gE),yE=(h.b.string.isRequired,h.b.string,h.b.string,{emoji:void 0,text:void 0}),kE=function(e){var t=e.emoji,n=e.text;return t?m.a.createElement(pg.a,{className:"p-classic_nav__model__title__name__status--im",text:n?t+" "+n:t,emojiSize:Gs.a.SMALL,showTooltips:!1,noJumbomoji:!0,noLinking:!0,noSpecials:!0,noHighlights:!0,noEmojiText:!0,preventCopyPaste:!0,stopAnimations:!0}):null};kE.displayName="IMCustomStatus",kE.defaultProps=yE;var OE=Object(g.b)(function(e,t){var n=t.memberId,a=Object(xo.f)(e,n);return{text:a.text,emoji:a.emoji}})(kE),CE=new B.b("channel_header"),EE=(h.b.string.isRequired,h.b.bool,function(e){return e.isYou?m.a.createElement("span",{className:"p-classic_nav__model__title__is_you"},CE.t("(you)",{fallbackHash:"1647df1274ca1403fb32187b06fed324ade6b1ad",fallbackHashNs:"channel_sidebar"})):null});EE.displayName="IMIsYou",EE.defaultProps={isYou:!1};var jE=Object(g.b)(function(e,t){var n=t.memberId;return{isYou:Object(y.c)(e)===n}})(EE),SE=n("stJQ"),IE=new B.b("classic_nav"),wE=(h.b.string.isRequired,h.b.bool.isRequired,h.b.func.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return u()(t,e),o()(t,[{key:"onClick",value:function(e){e.stopPropagation(),this.props.unmuteChannelById(this.props.channelId)}},{key:"render",value:function(){return this.props.featureClassicNav?m.a.createElement(mg.c,{tip:IE.t("Unmute"),position:"bottom"},m.a.createElement(fh.a,{className:"p-classic_nav__model__title__name__unmute",onClick:this.onClick},m.a.createElement(ue.a,{type:"bell-slash",size:"inherit"}))):null}}]),t}(p.Component));wE.displayName="UnmuteButton";var NE=Object(g.b)(function(e){return{featureClassicNav:Object(y.m)(e,"feature_classic_nav")}},function(e){return{unmuteChannelById:function(){return e(SE.b.apply(void 0,arguments))}}})(wE),TE=n("2Inn"),AE=n("ICFZ"),RE=Object(gt.b)("Copy channel name",function(e,t,n){var a=t(),r=Object(G.e)(a,n),i=Object(K.x)(a,r);Object(AE.b)(i)});RE.meta={name:"copyChannelNameById",key:"actionsCopyChannelNameByIdCopyChannelNameById",description:"Copy channel name"},RE.propTypes=h.b.string.isRequired;var PE=RE,ME=n("S6VJ"),xE=n("+j2t"),FE=n("QTMz"),LE=n("9/KO"),DE=n("53Ys"),UE=n("wfE8"),BE=n("zmUX"),qE=n("aolG"),HE=new B.b("mpims");function WE(e){var t=e.uras;if(Object(ls.a)(t))return null;var n=t.map(function(e){return m.a.createElement("strong",{key:e.id},m.a.createElement(Dv.a,{id:e.id}))});return m.a.createElement(Fb.a,{level:"warning",className:"top_margin"},HE.rt("{ura_list} { uras_length, plural, =1 { is a Single-Channel Guest. They are already a member } other { are Single-Channel Guests. They are already members }} of one channel, and will not have access to this new private channel.",{ura_list:Object(B.j)(n),uras_length:t.length}))}WE.displayName="SingleChannelGuestWarning",WE.defaultProps={uras:[]};var GE=Object(g.b)(function(e,t){return{uras:t.memberIds.map(function(t){return Object(xo.d)(e,t)}).filter(function(e){return Object(eo.Mb)(e)})}})(WE),KE=new B.b("mpims"),VE=(h.b.object.isRequired,h.b.string.isRequired,h.b.string.isRequired,h.b.arrayOf(h.b.string),h.b.func.isRequired,h.b.func.isRequired,h.b.func.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={confirmed:!1,newChannelName:"",newChannelNameValid:!1,promisePending:!1},n.onGo=n.onGo.bind(n),n.onValidNameEntered=n.onValidNameEntered.bind(n),n.onInvalidNameEntered=n.onInvalidNameEntered.bind(n),n}return u()(t,e),o()(t,[{key:"componentWillUnmount",value:function(){this.promise&&this.promise.cancel()}},{key:"onGo",value:function(){var e=this,t=this.props,n=t.channelId,a=t.logger,r=this.state,i=r.confirmed,o=r.newChannelName;i?(this.setState(function(){return{promisePending:!0}}),this.promise=this.props.convertMpimToPrivateChannel({mpimId:n,privateChannelName:o}).then(function(){e.promise=null,e.props.closeModal()}).catch(function(t){e.promise=null;var n=Object(ne.a)(t,"data.error","");"conversion_already_started"!==n?(e.setState(function(){return{promisePending:!1}}),a.error("MPIM-CONVERSION",n,t,{subtype:"mpim-conversion-error"}),e.props.openModal({element:m.a.createElement(ar.a,{title:KE.t("Sorry, something went wrong")},KE.t("Try again in a moment.")),isStackable:!0})):e.props.closeModal()})):this.setState(function(){return{confirmed:!0}})}},{key:"onValidNameEntered",value:function(e){var t=e.value;this.setState(function(){return{newChannelName:t,newChannelNameValid:!0}})}},{key:"onInvalidNameEntered",value:function(e){var t=e.value;this.setState(function(){return{newChannelName:t,newChannelNameValid:!1}})}},{key:"renderConfirmationStep",value:function(){return m.a.createElement("p",{className:"no_bottom_margin"},KE.t("By converting this conversation to a private channel, you will make the entire message history and all shared files visible to the new members that you invite to the channel."))}},{key:"renderNamingStep",value:function(){var e=this,t=this.props.memberIds.filter(function(t){return t!==e.props.currentUserId}).map(function(e){return m.a.createElement("strong",{key:e},m.a.createElement(Dv.a,{id:e}))});return m.a.createElement(m.a.Fragment,null,m.a.createElement(BE.a,{id:"mpim-conversion-modal-input",value:"",onValid:this.onValidNameEntered,onInvalid:this.onInvalidNameEntered,shouldFix:!0,focusOnMount:!0}),m.a.createElement("p",{className:"no_bottom_margin small_top_margin"},KE.rt("You are about to convert the group DM with {member_list} to a private channel. <strong>This cannot be undone.</strong>",{member_list:Object(B.j)(t)})))}},{key:"render",value:function(){var e=this.state,t=e.confirmed,n=e.newChannelNameValid,a=e.promisePending,r=this.props.memberIds,i=t?KE.t("Enter a name for the channel"):KE.t("Are you sure?"),o=t?KE.t("Convert to a private channel"):KE.t("Yes, continue");return m.a.createElement(qE.a,{title:i,goButtonText:o,onGo:this.onGo,goButtonIsDisabled:t&&!n,goButtonIsPending:a},t?this.renderNamingStep():this.renderConfirmationStep(),m.a.createElement(GE,{memberIds:r}))}}]),t}(p.Component));VE.displayName="MpimConversionModal",VE.defaultProps={memberIds:[]};var zE={convertMpimToPrivateChannel:function(){return UE.b.apply(void 0,arguments)},closeModal:function(){return tn.a.apply(void 0,arguments)},openModal:function(){return tn.e.apply(void 0,arguments)}},YE=Object(g.b)(function(e,t){var n=t.channelId,a=Object(G.e)(e,n);return{logger:Object(Ct.a)({state:e}),currentUserId:Object(y.c)(e),memberIds:Object(K.I)(a)}},zE)(VE),QE=Object(gt.b)("Starts the MPIM -> Private channel workflow",function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).channelId;n&&e(Object(tn.e)({element:m.a.createElement(YE,{channelId:n})}))});QE.meta={name:"openMpimConversionModal",key:"componentsMpimConversionModalOpenMpimConversionModalOpenMpimConversionModal",description:"Starts the MPIM -> Private channel workflow"},QE.propTypes={channelId:h.b.string.isRequired};var XE=QE,JE=n("t3J7"),ZE=Object(gt.b)("Sets the default tab for a channel",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.tabId,r=n.channelId,i=t();return r?Object(j.e)(i)?e(Object(UE.x)({channelId:r,newPrefs:JSON.stringify({default_tab:"subteam:"+(a||"messages")})})).then(function(t){var n=Object(ne.a)(t,["prefs","default_tab"]);n&&e(Object(JE.b)({channelId:r,pref:"default_tab",value:n}))}):Promise.reject(new Error("not-enabled")):Promise.reject(new Error("invalid-args"))});ZE.meta={name:"setDefaultTabForChannel",key:"actionsSetDefaultTabForChannelSetDefaultTabForChannel",description:"Sets the default tab for a channel"},ZE.propTypes={tabId:h.b.string,channelId:h.b.string.isRequired};var $E=Object(gt.b)("Add an embed tab for a channel",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.channelId,r=n.type,i=n.label,o=n.url,s=t();if(!(a&&r&&i&&o))return Promise.reject(new Error("invalid-args"));if(!Object(j.e)(s))return Promise.reject(new Error("not-enabled"));var l=Object(j.c)(s,a);return l.push({type:r,url:encodeURI(o),label:i}),e(Object(UE.x)({channelId:a,newPrefs:JSON.stringify({embed_tabs:"subteam:"+btoa(JSON.stringify(l))})})).then(function(t){var n=Object(ne.a)(t,["prefs","embed_tabs"]);n&&(e(Object(JE.b)({channelId:a,pref:"embed_tabs",value:n})),e(Object(W.a)({tabId:"embed-"+(l.length-1),channelId:a})))})});$E.meta={name:"addEmbedTab",key:"actionsEmbedTabsAddEmbedTab",description:"Add an embed tab for a channel"},$E.propTypes={channelId:h.b.string.isRequired,type:h.b.oneOf(["figma"]).isRequired,label:h.b.string.isRequired,url:h.b.string.isRequired};var ej=Object(gt.b)("Add an embed tab for a channel",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.tabId,r=n.channelId,i=t();if(!r||!a)return Promise.reject(new Error("invalid-args"));if(!Object(j.e)(i))return Promise.reject(new Error("not-enabled"));var o=Object(j.b)(a);if(!1===o)return Promise.reject(new Error("invalid-args"));var s=Object(j.c)(i,r);return s.splice(o,1),e(Object(UE.x)({channelId:r,newPrefs:JSON.stringify({embed_tabs:"subteam:"+btoa(JSON.stringify(s))})})).then(function(t){var n=Object(ne.a)(t,["prefs","embed_tabs"]);n&&(e(Object(JE.b)({channelId:r,pref:"embed_tabs",value:n})),e(Object(W.a)({tabId:void 0,channelId:r})))})});ej.meta={name:"removeEmbedTab",key:"actionsEmbedTabsRemoveEmbedTab",description:"Add an embed tab for a channel"},ej.propTypes={tabId:h.b.string.isRequired,channelId:h.b.string.isRequired};var tj=n("jK7E"),nj=n("xrsA"),aj=n("zo7m"),rj=Object(ba.b)("TS.ui.apps_browser.startAddApps"),ij=n("qEEt"),oj=(h.b.string.isRequired,h.b.func.isRequired,[{value:"figma",label:"Figma"}]),sj=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClose=n.onClose.bind(n),n.onSubmit=n.onSubmit.bind(n),n.onTypeChange=n.onTypeChange.bind(n),n.onLabelChange=n.onLabelChange.bind(n),n.onURLChange=n.onURLChange.bind(n),n.state={type:oj[0],label:void 0,url:void 0},n}return u()(t,e),o()(t,[{key:"onClose",value:function(){this.props.dispatch(Object(tn.a)())}},{key:"onSubmit",value:function(){this.props.dispatch($E({channelId:this.props.channelId,type:this.state.type.value,label:this.state.label,url:this.state.url})),this.props.dispatch(Object(tn.a)())}},{key:"onTypeChange",value:function(e){this.setState(function(){return{type:e}})}},{key:"onLabelChange",value:function(e){this.setState(function(){return{label:e}})}},{key:"onURLChange",value:function(e){this.setState(function(){return{url:e}})}},{key:"render",value:function(){return m.a.createElement(xh.a,{title:"Add an embed tab",submitButtonText:"Add",cancelButtonText:"Cancel",onClose:this.onClose,onCancel:this.onClose,onSubmit:this.onSubmit},m.a.createElement(ja.a,{text:"Embed type",className:"margin_bottom_125"},m.a.createElement(Lv.a,{options:oj,selectedOption:this.state.type,width:"100%",onOptionSelected:this.onTypeChange})),m.a.createElement(ja.a,{text:"Tab label"},m.a.createElement(ij.b,{value:this.state.label,onChange:this.onLabelChange})),m.a.createElement(ja.a,{text:"Embed URL"},m.a.createElement(ij.b,{value:this.state.url,onChange:this.onURLChange})))}}]),t}(p.Component);sj.displayName="AddEmbedTabDialog";var lj=Object(g.b)()(sj),cj=n("LzXF"),uj=n("hFPh"),dj=new B.b("classic_nav"),pj=(h.b.string.isRequired,h.b.object,h.b.func,h.b.func,h.b.bool,h.b.func,{channel:void 0,close:d.a,back:d.a,featureClassicNav:!1,jumpToTimestamp:d.a}),mj=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onDateChange=n.onDateChange.bind(n),n}return u()(t,e),o()(t,[{key:"onDateChange",value:function(e){var t=Ku()(e,"YYYY-MM-DD").format("X");this.props.jumpToTimestamp({ts:t,highlight:!0}),this.props.close()}},{key:"render",value:function(){var e=this.props,t=e.channel,n=e.back;if(!e.featureClassicNav)return null;var a=t.created?Ku()(t.created,"X").format("YYYY-MM-DD"):void 0;return m.a.createElement(na.f,ye()({},this.props,{width:325}),m.a.createElement(uj.a,{key:"date-picker",className:"p-classic_nav__model__menu__jump",disableDatesBefore:a,disableDatesAfter:Ku()().format("YYYY-MM-DD"),onDateChange:this.onDateChange}),m.a.createElement(_e.c,{key:"date-picker-back",className:"p-classic_nav__model__menu__jump__back","data-qa":"date_picker_back",onClick:n},dj.t("Back to menu")))}}]),t}(p.Component);mj.displayName="ModelMenuJump",mj.defaultProps=pj;var hj=Object(g.b)(function(e,t){var n=t.channelId;return{channel:Object(G.e)(e,n),featureClassicNav:Object(y.m)(e,"feature_classic_nav")}},function(e){return{jumpToTimestamp:function(){return e(cj.c.apply(void 0,arguments))}}})(mj),bj=n("HMjZ");function fj(e,t){var n=Object(G.e)(e,t);if(!e||!n)return null;var a=Object(xo.d)(e,Object(K.H)(n)),r=Object(xo.b)(e),i=Object(K.v)(n),o="im"===i,s="mpim"===i,l="channel"===i,c="private"===i,u=l||c,d=Object(K.Tb)(r.id,n),p=Object(bj.f)(e,n),m=Object(Bb.K)(e,t)||s,h=d,b=o&&!d,f=o&&!d&&!Object(K.Hb)(n)&&!Object(eo.Mb)(r)&&!Object(eo.Mb)(a)&&!Object(eo.mb)(a)&&!Object(eo.tb)(a),g=u,_=function(e,t){if(!t)return!1;var n=Object(K.v)(t),a="channel"===n||"private"===n,r=Object(xo.b)(e);return!(!a||Object(K.X)(t)||(Object(y.m)(e,"feature_announce_only")?!Object(K.nb)(t)||!Object(Bb.p)(e,t.id)&&(Object(K.Fb)(t)||Object(eo.Gb)(r)||Object(eo.Mb)(r)):Object(eo.Gb)(r)||Object(eo.Mb)(r)||!Object(K.nb)(t)||Object(y.q)(e)&&Object(K.vb)(t)&&!Object(Bb.L)(e)||!Object(Bb.p)(e,t.id)&&Object(K.Fb)(t)))}(e,n),v=Object(Bb.R)(e,t),k=s&&Object(Bb.C)(e)&&!Object(K.ab)(n)&&!Object(K.db)(n),O=!o&&(s||Object(K.nb)(n)&&!Object(K.X)(n)),C=Object(y.m)(e,"feature_all_dm_mute")?Object(K.nb)(n)&&!Object(K.X)(n)&&!d&&!Object(K.Hb)(n):O,E=Object(Bb.x)(e,t),j=Object(ra.a)(e,"allow_email_ingestion"),S=u&&Object(K.nb)(n)&&!Object(K.X)(n)&&!Object(K.Fb)(n)&&!Object(eo.Mb)(r)&&(!Object(eo.Gb)(r)||c),I=u&&!Object(K.nb)(n)&&!Object(K.X)(n)&&!Object(eo.Mb)(r)&&!Object(eo.Gb)(r),w=!l&&Object(Bb.J)(e,t),N=Object(K.X)(n)&&!Object(K.db)(n)&&!Object(K.C)(n),T=Object(K.X)(n)&&Object(eo.eb)(r)&&l&&!Object(K.Fb)(n);return Object(Sb.a)({call:p,jump:!0,invite:m,editProfile:h,viewProfile:b,addMember:f,details:!0,copyChannelName:g,options:_,retention:v,convertToPrivate:k,notifications:O,mute:C,apps:E,email:j,leave:S,join:I,exportHistory:w,unarchive:N,delete:T},function(e){return!!e})}var gj=new B.b("classic_nav"),_j=Object(gt.b)("Un-archive a channel",function(e,t,n){var a=n.channelId;Object(y.m)(t(),"feature_classic_nav")&&e(Object(UE.R)({channelId:a})).catch(function(n){Object(Ct.a)({getState:t}).error("CHANNEL-ACTIONS","Unarchive failed with error",n);var a="restricted_action"===Object(ne.a)(n,"data.error")?gj.t("You don\u2019t have permission to un-archive channels. Please talk to your Workspace Owner."):gj.t("Sorry, something went wrong. Try again in a moment.");e(Object(tn.e)({element:m.a.createElement(ar.a,{title:gj.t("Un-archive failed")},a)}))})});_j.meta={name:"unarchiveChannel",key:"componentsClassicNavChannelHeaderModelHeaderMenuUtilityUnarchiveChannelUnarchiveChannel",description:"Un-archive a channel"},_j.propTypes={channelId:h.b.string.isRequired};var vj=_j,yj=new B.b("classic_nav"),kj=(h.b.string.isRequired,h.b.object.isRequired,h.b.func,h.b.object,h.b.string,h.b.bool,h.b.object,h.b.bool,h.b.string,h.b.object,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.string,h.b.bool.isRequired,h.b.bool.isRequired,h.b.bool,h.b.string,h.b.string,h.b.func.isRequired,h.b.func.isRequired,h.b.func.isRequired,h.b.bool,h.b.bool,{onMenuItemSelected:d.a,actions:void 0,displayName:void 0,isMuted:!1,team:void 0,canManagePostingPermissions:!1,lastChannelDetailsSection:void 0,clogger:{track:d.a},joinChannel:d.a,unarchiveChannel:d.a,gantryStartCall:d.a,showDetails:d.a,showMemberProfile:d.a,copyChannelNameById:d.a,maybeLeaveChannel:d.a,muteChannelById:d.a,unmuteChannelById:d.a,openDmBrowserModal:d.a,startChannelInviteModal:d.a,openChannelOptions:d.a,openChannelNotificationPrefsModal:d.a,openEditProfileModal:d.a,openInviteMemberToChannelDialog:d.a,openAppsBrowserModal:d.a,openMpimConversionModal:d.a,showAnnounceOnlyPromo:!1,desktopNotifySetting:void 0,featureClassicNav:!1,featureSonicEditProfile:!1,featureM11nAppsBrowser:!1,featureAnnounceOnly:!1,featureCopyChannelName:!1,featureAnnounceOnlyPromo:!1,isChannelTabsEnabled:!1,currentTabId:void 0,defaultTabId:void 0,featureChannelNotificationSettings:!1,channelNotificationSettings:!1}),Oj=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onMenuItemSelected=n.onMenuItemSelected.bind(n),n.getMuteLabel=n.getMuteLabel.bind(n),n.getItems=n.getItems.bind(n),n.preventClose=!1,n.state={mode:"menu"},n}return u()(t,e),o()(t,[{key:"onMenuItemSelected",value:function(e,t){if(this.preventClose)this.preventClose=!1;else{var n=this.props,a=n.channel,r=n.clogger;"im"===Object(K.v)(a)&&r.track(le.EventId.USER_CARD_CLICK),this.props.onMenuItemSelected(e,t);var i=this.getItems()[e];i&&i.key&&r.track("CLASSIC_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"CHANNEL_HEADER",ui_element:"NAV_CHANNEL_SETTINGS_ITEM"}},label:i.key})}}},{key:"getMuteLabel",value:function(){var e=this.props,t=e.isMuted,n=e.channel,a=e.displayName,r=e.featureClassicNav,i="mpim"===Object(K.v)(n)||"im"===Object(K.v)(n);return r?t&&i?yj.t("Unmute conversation",{fallbackHash:"20adf9cbeb9de497d0542ed186c2346d59f40451",fallbackHashNs:"classic_nav"}):t&&!i?yj.t("Unmute {channelName}",{channelName:a}):!t&&i?yj.t("Mute conversation",{fallbackHash:"56403da5406f82ce89e0bc11bad072c588ca1a91",fallbackHashNs:"classic_nav"}):t||i?null:yj.t("Mute {channelName}",{channelName:a}):null}},{key:"getNotificationPreferencesDescription",value:function(){var e=this.props,t=e.desktopNotifySetting,n=e.isMuted,a=e.featureChannelNotificationSettings,r=e.channelNotificationSettings,i=Object(Pe.l)();if(!a||!r)return"";if("not_allowed"===i||"not_yet_allowed"===i)return"";if(n)return yj.t("Muted");var o=void 0;switch(t){case"everything":o=yj.t("Every new message");break;case"mentions_dms":o=yj.t("Just @mentions");break;case"nothing":o=yj.t("No notifications");break;default:o=""}return o}},{key:"getItems",value:function(){var e=this,t=this.props,n=t.channelId,a=t.channel,r=t.actions,i=t.displayName,o=t.joinChannel,s=t.featureClassicNav,l=t.team,c=t.canManagePostingPermissions,u=t.showAnnounceOnlyPromo,d=t.clogger,p=t.featureSonicEditProfile,h=t.featureM11nAppsBrowser,b=t.featureOfflineMode,f=t.featureAnnounceOnly,g=t.featureAnnounceOnlyPromo,_=t.featureCopyChannelName,v=t.isOffline,y=t.isChannelTabsEnabled,k=t.currentTabId,O=t.defaultTabId,C=Object(K.v)(a),E=Object(K.H)(a);if(!r||!C||!s)return[];var j="mpim"===C,S="channel"===C||"private"===C;return[{label:yj.t("Jump to date\u2026"),show:r.jump,key:"jump",click:function(){e.preventClose=!0,e.setState(function(){return{mode:"jump-to-date"}}),d.track("CLASSIC_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"CHANNEL_HEADER",ui_element:"NAV_CHANNEL_SETTINGS_ITEM"}},label:"jump"})},disabled:b&&v,showOfflineIcon:b&&v},{label:j?yj.t("Invite another member\u2026"):yj.rt("Add people to channel",{channelName:i,fallbackHash:"5a88a5faedf2e862fdeb161752d2d2f1b68b2333"}),show:r.invite,dataQa:"invite_user_modal",key:"invite",click:function(){if(j){var t=Object(K.I)(a);e.props.openDmBrowserModal({memberIds:t,source:xE.b.MPIM})}else e.props.startChannelInviteModal({channelId:n,entryPoint:"channel_settings_add_people"})},disabled:b&&v,showOfflineIcon:b&&v},{label:yj.t("Edit your profile"),show:r.editProfile,key:"editProfile",click:function(){return p?e.props.openEditProfileModal():Object(tj.a)()},disabled:b&&v,showOfflineIcon:b&&v},{label:yj.rt("View {userPossesive} profile",{userPossesive:Object(B.c)(i)}),show:r.viewProfile,key:"viewProfile",click:function(){return e.props.showMemberProfile({memberId:E})}},{label:yj.rt("Add {userName} to a channel\u2026",{userName:i}),show:r.addMember,key:"addMember",click:function(){return e.props.openInviteMemberToChannelDialog({memberId:E})},disabled:b&&v,showOfflineIcon:b&&v},{label:S?yj.t("View channel details"):yj.t("View conversation details"),show:r.details,key:"details",click:function(){return e.props.showDetails({sectionId:e.props.lastChannelDetailsSection||"info"})}},{label:_?yj.t("Copy channel name"):"",show:_&&r.copyChannelName,key:"copyChannelName",click:function(){return e.props.copyChannelNameById(a.id)}},{label:yj.t("Convert to a private channel\u2026"),show:r.convertToPrivate,key:"convertToPrivate",click:function(){return e.props.openMpimConversionModal({channelId:a.id})},disabled:b&&v,showOfflineIcon:b&&v},{label:yj.t("Edit message retention\u2026"),show:r.retention,key:"retention",click:function(){return e.props.openChannelOptions({channelId:n,section:"retention"})},disabled:b&&v,showOfflineIcon:b&&v},{label:yj.t("Manage posting permissions"),show:f&&c&&r.options,key:"posting_privilege",click:function(){return e.props.openChannelOptions({channelId:n,section:"posting_privilege"})},disabled:b&&v,showOfflineIcon:b&&v},{label:yj.t("Manage posting permissions"),show:g&&u&&!c&&r.options,key:"posting_privilege",click:function(){return e.props.openChannelOptions({channelId:n})},disabled:b&&v,showOfflineIcon:b&&v,badgeLabel:yj.t("UPGRADE")},{label:yj.t("Additional options\u2026"),show:r.options,key:"options",click:function(){return e.props.openChannelOptions({channelId:n})},disabled:b&&v,showOfflineIcon:b&&v},{type:"separator",key:"separator-1"},{label:yj.t("Notification preferences\u2026"),show:r.notifications,key:"notifications",description:this.getNotificationPreferencesDescription(),click:function(){return d.track(le.EventId.CHANNEL_NOTIFICATION_SETTINGS,{contexts:{ui_context:{step:le.UiStep.CHANNEL_NOTIFICATION_SETTINGS_OPEN,action:le.UiAction.CLICK}}}),e.props.openChannelNotificationPrefsModal({channelId:n,entryPoint:"modal_menu"})}},{label:this.getMuteLabel(),show:r.mute,key:"mute",click:function(){e.props.isMuted?e.props.unmuteChannelById(n):e.props.muteChannelById(n)}},{type:"separator",key:"separator-2"},{label:yj.t("Add an app"),show:r.apps,key:"apps",click:function(){var t=le.EventId.CHANNEL_SETTINGS,a={action:le.UiAction.CLICK,ui_element:le.UiElement.BTN_ADD_APPS};d.track(t,{contexts:{ui_context:a}}),h?e.props.openAppsBrowserModal({addAppsVariant:!0,referringEventId:t,referringUiContext:a,channelId:n}):rj()},disabled:b&&v,showOfflineIcon:b&&v},{label:j?yj.t("Send email to this conversation\u2026"):yj.t("Send email to {channelName}\u2026",{channelName:i}),show:r.email,key:"email",href:Object(De.o)(l,"/services/new/email"),target:"_blank",disabled:b&&v,showOfflineIcon:b&&v},{type:"separator",key:"separator-3"},{label:yj.t("Leave {channelName}",{channelName:i}),show:r.leave,key:"leave",click:function(){return e.props.maybeLeaveChannel({channelId:n})},disabled:b&&v,showOfflineIcon:b&&v},{label:yj.t("Join {channelName}",{channelName:i}),show:r.join,key:"join",click:function(){return o({channelId:n})},disabled:b&&v,showOfflineIcon:b&&v},{type:"separator",key:"separator-4"},{label:yj.t("Export message history\u2026"),show:r.exportHistory,key:"exportHistory",click:function(){return e.props.openChannelOptions({channelId:n,section:"export"})},disabled:b&&v,showOfflineIcon:b&&v},{type:"separator",key:"separator-5"},{label:yj.t("Un-archive {channelName}",{channelName:i}),show:r.unarchive,key:"unarchive",click:function(){return e.props.unarchiveChannel({channelId:n})},disabled:b&&v,showOfflineIcon:b&&v},{label:yj.t("Delete {channelName}",{channelName:i}),show:r.delete,key:"unarchive",click:function(){return e.props.openChannelOptions({channelId:n,section:"delete"})},disabled:b&&v,showOfflineIcon:b&&v},{type:"separator",key:"separator-6",show:eo.eb&&y},{label:"Make this tab the default",show:y&&c,key:"channel_tabs_default",disabled:k===O,click:function(){return e.props.setDefaultTabForChannel({tabId:k,channelId:n})}},{label:"Add an embed tab",show:y&&c,key:"channel_tabs_embed_add",click:function(){return e.props.openModal({element:m.a.createElement(lj,{channelId:n})})}},{label:"Remove this embed tab",show:y&&c&&k&&0===k.indexOf("embed"),key:"channel_tabs_embed_add",click:function(){return e.props.removeEmbedTab({tabId:k,channelId:n})}}].filter(function(e){return e&&(e.show||"separator"===e.type)})}},{key:"render",value:function(){var e=this;switch(this.state.mode){case"menu":return m.a.createElement(na.a,ye()({},this.props,{template:this.getItems(),onMenuItemSelected:this.onMenuItemSelected,stripTerminalSeparators:!0,width:"auto"}));case"jump-to-date":return m.a.createElement(hj,ye()({},this.props,{channelId:this.props.channelId,close:this.props.onMenuItemSelected,back:function(){e.preventClose=!0,e.setState(function(){return{mode:"menu"}})}}));default:return null}}}]),t}(p.Component);Oj.displayName="ModelMenu",Oj.defaultProps=kj;var Cj=Object(g.b)(function(e,t){var n=t.channelId,a=Object(G.e)(e,n),r=Object(we.d)(e),i=Object(Bb.M)(e,n),o=Object(y.m)(e,"feature_announce_only_promo"),s=o&&(Object(De.w)(r)||Object(De.z)(r))&&!Object(K.fb)(a),l=void 0;return Object(K.hb)(a)||(l=Object(Pe.f)(e,n)),{channel:a,actions:fj(e,n),displayName:Object(K.x)(e,a,{imIncludeAtSign:!1}),isMuted:Object(Ad.c)(e,n),team:r,canManagePostingPermissions:i,showAnnounceOnlyPromo:s,clogger:Object(re.a)({state:e}),lastChannelDetailsSection:Object(A.b)(e),featureClassicNav:Object(y.m)(e,"feature_classic_nav"),featureSonicEditProfile:Object(y.m)(e,"feature_sonic_edit_profile"),featureM11nAppsBrowser:Object(y.m)(e,"feature_m11n_apps_browser"),featureOfflineMode:Object(y.m)(e,"feature_offline_mode"),featureAnnounceOnly:Object(y.m)(e,"feature_announce_only"),featureCopyChannelName:Object(y.m)(e,"feature_copy_channel_name"),featureAnnounceOnlyPromo:o,featureChannelNotificationSettings:Object(y.m)(e,"feature_channel_notification_settings"),isOffline:!Object(Qt.c)(e),desktopNotifySetting:l,channelNotificationSettings:"new_design"===Object(Xt.c)(e,"channel_notification_settings"),isChannelTabsEnabled:Object(j.e)(e),currentTabId:N(e),defaultTabId:Object(j.a)(e,n)}},function(e){return{joinChannel:function(){return e(Fo.joinConversationApi.apply(void 0,arguments))},unarchiveChannel:function(){return e(vj.apply(void 0,arguments))},gantryStartCall:function(){return e(TE.d.apply(void 0,arguments))},showDetails:function(){return e(jn.e.apply(void 0,arguments))},showMemberProfile:function(){return e(jn.j.apply(void 0,arguments))},copyChannelNameById:function(){return e(PE.apply(void 0,arguments))},maybeLeaveChannel:function(){return e(ME.a.apply(void 0,arguments))},muteChannelById:function(){return e(SE.a.apply(void 0,arguments))},unmuteChannelById:function(){return e(SE.b.apply(void 0,arguments))},openDmBrowserModal:function(){return e(dO.a.apply(void 0,arguments))},startChannelInviteModal:function(){return e(FE.b.apply(void 0,arguments))},openChannelOptions:function(){return e(LE.a.apply(void 0,arguments))},openChannelNotificationPrefsModal:function(){return e(tO.a.apply(void 0,arguments))},openEditProfileModal:function(){return e(aj.a.apply(void 0,arguments))},openInviteMemberToChannelDialog:function(){return e(nj.a.apply(void 0,arguments))},openAppsBrowserModal:function(){return e(DE.a.apply(void 0,arguments))},openMpimConversionModal:function(){return e(XE.apply(void 0,arguments))},setDefaultTabForChannel:function(){return e(ZE.apply(void 0,arguments))},openModal:function(){return e(tn.e.apply(void 0,arguments))},removeEmbedTab:function(){return e(ej.apply(void 0,arguments))}}})(Oj),Ej=(h.b.string.isRequired,h.b.oneOf(["channel","private","im","mpim"]),h.b.string,h.b.string,h.b.arrayOf(h.b.string.isRequired),h.b.string.isRequired,h.b.bool.isRequired,h.b.bool,h.b.object.isRequired,h.b.object.isRequired,h.b.bool.isRequired,{type:void 0,name:void 0,memberId:void 0,mpimIds:void 0,isMuted:!1}),jj=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderMenu=n.renderMenu.bind(n),n.renderChannel=n.renderChannel.bind(n),n.renderIM=n.renderIM.bind(n),n.renderMPIM=n.renderMPIM.bind(n),n.onMenuOpen=n.onMenuOpen.bind(n),n}return u()(t,e),o()(t,[{key:"onMenuOpen",value:function(){this.props.clogger.track("CLASSIC_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"CHANNEL_HEADER",ui_element:"NAV_CHANNEL_NAME"}}})}},{key:"renderMenu",value:function(e){return m.a.createElement(Cj,ye()({},e,{channelId:this.props.channelId}))}},{key:"renderChannel",value:function(e){var t=this.props,n=t.channelId,a=t.name,r=t.isMuted,i=t.isIAP1Enabled,o=m.a.createElement(hE.a,{channelId:n,bold:!0,disableArchived:!0}),s=r&&!i?m.a.createElement(NE,{channelId:n}):null;return m.a.createElement(p.Fragment,null,m.a.createElement(e,null,o,a),i?null:m.a.createElement(mE.a,{channelId:n,className:"p-classic_nav__model__title__name__shared_icon",inherit:!1,inline:!1,tooltipPosition:"bottom"}),s)}},{key:"renderIM",value:function(e){var t=this.props,n=t.memberId,a=t.isMuted,r=t.channelId,i=t.isIAP1Enabled;if(!n)return null;var o=a&&!i?m.a.createElement(NE,{channelId:r}):null;return m.a.createElement(p.Fragment,null,m.a.createElement(e,null,m.a.createElement(vE,{memberId:n}),m.a.createElement(jE,{memberId:n}),m.a.createElement(OE,{memberId:n})),o)}},{key:"renderMPIM",value:function(e){var t=this.props,n=t.channelId,a=t.mpimIds,r=t.currentUser,i=t.isMuted,o=t.logger,s=t.isIAP1Enabled;if(!a||!a.length)return o.error("CLASSIC-NAV","MPIM "+n+" has no members"),m.a.createElement(p.Fragment,null,m.a.createElement(bE.b,{className:"align_self_center"}),"\u200b");var l=i&&!s?m.a.createElement(NE,{channelId:n}):null,c=a.filter(function(e){return e!==r}).map(function(e,t){return m.a.createElement(p.Fragment,{key:e},t>0?", ":null,m.a.createElement(vE,{memberId:e}),m.a.createElement(CO.b,{memberId:e,tipPosition:"bottom",className:"p-classic_nav__model__title__name__status--mpim"}))});return m.a.createElement(e,null,c,l)}},{key:"render",value:function(){var e=this,t=this.props,n=t.type,a=t.isMuted,r=t.isChannelUnavailable;if(!n)return null;var i=function(t){var n=t.children;return r?m.a.createElement("div",{className:"p-classic_nav__model__title__name__button","data-qa":"channel_name"},n):m.a.createElement(na.e,{renderMenu:e.renderMenu,onClick:e.onMenuOpen,position:"bottom-left",offsetX:-4,offsetY:4},m.a.createElement(_e.c,{className:"p-classic_nav__model__title__name__button","data-qa":"channel_name"},n))},o=void 0;switch(n){case"channel":case"private":o=this.renderChannel(i);break;case"im":o=this.renderIM(i);break;case"mpim":o=this.renderMPIM(i);break;default:o=null}var s=f()({"p-classic_nav__model__title__name":!0,"p-classic_nav__model__title__name--dim":a,"p-classic_nav__no_drag":!0});return m.a.createElement("div",{className:s},o)}}]),t}(p.Component);jj.displayName="ModelName",jj.defaultProps=Ej;var Sj=Object(g.b)(function(e,t){var n=t.channelId,a=Object(G.e)(e,n);return{type:Object(K.v)(a),name:a.name,memberId:Object(K.H)(a)||void 0,mpimIds:Object(K.I)(a)||void 0,currentUser:Object(y.c)(e),isMuted:Object(Ad.c)(e,n),isChannelUnavailable:Object(K.Lb)(e,a),logger:Object(Ct.a)({state:e}),clogger:Object(re.a)({state:e}),isIAP1Enabled:Object(pE.b)(e)}})(jj),Ij=function(){return m.a.createElement("span",{className:"p-classic_nav__model__title__info__sep","aria-hidden":"true"},"|")},wj=(n("hCXE"),h.b.string.isRequired,h.b.string,h.b.func.isRequired,h.b.bool,h.b.array,{tab:void 0,isEnabled:!1,embedTabs:[]}),Nj=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onTabClick=n.onTabClick.bind(n),n}return u()(t,e),o()(t,[{key:"onTabClick",value:function(e){this.props.setTab({tabId:e,channelId:this.props.channelId})}},{key:"render",value:function(){var e=this,t=this.props,n=t.tab,a=t.isEnabled,r=t.embedTabs;if(!a)return null;var i=[{id:void 0,label:"Messages"},{id:"about",label:"About"},{id:"space",label:"Notes"}].concat(ti()(r.map(function(e,t){return{id:"embed-"+t,label:e.label}}))).map(function(t,a){var r=t.id,i=t.label,o=f()("p-classic_nav__model__title__info__tab",{"p-classic_nav__model__title__info__tab--active":n===r,"p-classic_nav__model__title__info__tab--first":0===a});return m.a.createElement(_e.c,{className:o,onClick:function(){return e.onTabClick(r)},key:r||"default"},i)});return m.a.createElement(p.Fragment,null,i,m.a.createElement(Ij,null))}}]),t}(p.Component);Nj.displayName="ModelInfoTabs",Nj.defaultProps=wj;var Tj=Object(g.b)(function(e,t){var n=t.channelId;return{tab:N(e),isEnabled:Object(j.e)(e),embedTabs:Object(j.c)(e,n)}},function(e){return{setTab:function(){return e(W.a.apply(void 0,arguments))}}})(Nj),Aj=n("0F/N"),Rj=new B.b("classic_nav"),Pj=(h.b.string.isRequired,h.b.bool,h.b.oneOf(["channel","private","im","mpim"]).isRequired,h.b.bool,h.b.bool,h.b.bool,h.b.object.isRequired,h.b.string.isRequired,h.b.func,{isStarred:!1,featureClassicNav:!1,omitSeparator:!1,isMemberOfChannel:!1,updateStar:d.a}),Mj=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["onClick","renderTip","renderAriaLabel"]),n}return u()(t,e),o()(t,[{key:"onClick",value:function(){var e=this.props,t=e.channelId,n=e.isStarred;this.props.updateStar(!n,{channel:t}),this.props.clogger.track("CLASSIC_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"CHANNEL_HEADER",ui_element:"NAV_CHANNEL_STAR"}}})}},{key:"renderTip",value:function(){var e=this.props,t=e.channelType,n=e.isStarred;if(!e.featureClassicNav)return null;switch(t){case"channel":case"private":return n?Rj.t("Unstar this channel"):Rj.t("Star this channel");case"im":case"mpim":return n?Rj.t("Unstar this direct message"):Rj.t("Star this direct message");default:return null}}},{key:"renderAriaLabel",value:function(){var e=this.props,t=e.channelType,n=e.channelName;return"channel"===t||"private"===t?Rj.t("Star channel {channelName}",{channelName:n,fallbackHash:"f314f33a825d5dc3ac1683638acc464b2aae62fc",note:"A label for the button in the Channel Header to star a channel. Not visible on screen as it is only for customers using screen readers."}):"im"===t?Rj.t("Star conversation with {memberName}",{memberName:n,fallbackHash:"a04b360e228e052a9853fbe7203ab22697daade3",note:"A label for the button in the Channel Header to star an IM. Not visible on screen as it is only for customers using screen readers."}):"mpim"===t?Rj.t("Star conversation with {memberNames}",{memberNames:n,fallbackHash:"a04b360e228e052a9853fbe7203ab22697daade3",note:"A label for the button in the Channel Header to star an MPIM. memberNames is a comma-delimited set of names. Not visible on screen as it is only for customers using screen readers."}):void 0}},{key:"render",value:function(){var e=this.props,t=e.isStarred,n=e.omitSeparator;if(!e.isMemberOfChannel)return null;var a=t?"star":"star-o",r=f()({"p-classic_nav__model__title__info__star":!0,"p-classic_nav__model__title__info__star--starred":t});return m.a.createElement(p.Fragment,null,m.a.createElement(qi.c,{tip:this.renderTip,position:"bottom",hideFromScreenReader:!0},m.a.createElement(_e.c,{className:r,onClick:this.onClick,"aria-label":this.renderAriaLabel(),"data-qa":"channel_header__star_button","aria-pressed":t},m.a.createElement(ta.b,{type:a,size:"inherit",inline:!0}))),!n&&m.a.createElement(Ij,null))}}]),t}(p.Component);Mj.displayName="ModelInfoStar",Mj.defaultProps=Pj;var xj=Object(g.b)(function(e,t){var n=t.channelId,a=Object(G.e)(e,n),r=Object(K.x)(e,a,{publicChannelIncludeHashSign:!1});return{channelType:Object(K.v)(a),isStarred:Object(K.Ib)(a),isMemberOfChannel:Object(K.nb)(a),featureClassicNav:Object(y.m)(e,"feature_classic_nav"),clogger:Object(re.a)({state:e}),channelName:r}},function(e){return{updateStar:function(){return e(Aj.a.apply(void 0,arguments))}}})(Mj),Fj=n("K2Qr"),Lj=n("k0G2"),Dj=new B.b("classic_nav"),Uj=(h.b.string.isRequired,h.b.number,h.b.bool,h.b.arrayOf(h.b.string),h.b.number,h.b.bool,h.b.object.isRequired,h.b.bool,h.b.bool,h.b.string.isRequired,h.b.func,{memberCount:void 0,isSharedMpim:!1,pendingAndConnectedTeamIds:void 0,externalMemberCount:void 0,featureClassicNav:!1,isMembersVisible:!1,showDetails:d.a,isChannel:!1}),Bj=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n.onKeyDown=n.onKeyDown.bind(n),n}return u()(t,e),o()(t,[{key:"onClick",value:function(){this.props.showDetails({sectionId:"members"}),this.props.clogger.track("CLASSIC_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"CHANNEL_HEADER",ui_element:"NAV_CHANNEL_MEMBERS"}}})}},{key:"onKeyDown",value:function(e){e.keyCode===Lj.e&&(e.preventDefault(),this.props.showDetails({sectionId:"members",focusKey:"members"}))}},{key:"getCount",value:function(){var e=this.props,t=e.isSharedMpim,n=e.memberCount,a=Object(mt.a)(n)?Object(B.n)(n):"\u2013";return t?this.getSharedMpimCount(a):a}},{key:"getSharedMpimCount",value:function(e){var t=this.props,n=t.featureClassicNav,a=t.pendingAndConnectedTeamIds,r=t.externalMemberCount;return n?a&&a.length&&r?a.length>1?Dj.rt("{totalMemberCount} ({externalMemberCount} from other organizations)",{totalMemberCount:e,externalMemberCount:r}):Dj.rt("{totalMemberCount} ({externalMemberCount} from\xa0{externalTeamName})",{totalMemberCount:e,externalMemberCount:r,externalTeamName:m.a.createElement(Lb.a,{id:a[0],bold:!1})}):e:null}},{key:"render",value:function(){var e=this.props,t=e.featureClassicNav,n=e.isMembersVisible,a=e.channelName,r=e.isChannel;if(!t)return null;var i=r?Dj.t("Show member list for channel {channelName}",{channelName:a,fallbackHash:"cd2bc6930e2aeee592020415692ed1dc4c9652fe",note:"A label for the button in the Channel Header to show the member list for a channel in the Flexpane. Not visible on screen as it is only for customers using screen readers."}):Dj.t("Show member list for conversation with {memberNames}",{memberNames:a,fallbackHash:"cd2bc6930e2aeee592020415692ed1dc4c9652fe",note:"A label for the button in the Channel Header to show the member list for an MPIM in the Flexpane. memberNames is a comma-delimited set of names. Not visible on screen as it is only for customers using screen readers."}),o=m.a.createElement(_e.c,{className:"p-classic_nav__model__title__info__members",onClick:this.onClick,onKeyDown:this.onKeyDown,"aria-label":i,"aria-expanded":n},m.a.createElement(ta.b,{type:"user",size:"inherit",inline:!0}),"\xa0",this.getCount());return m.a.createElement(p.Fragment,null,n?o:m.a.createElement(qi.c,{tip:Dj.t("View member list"),position:"bottom",hideFromScreenReader:!0},o),m.a.createElement(Ij,null))}}]),t}(p.Component);Bj.displayName="ModelInfoMembers",Bj.defaultProps=Uj;var qj=Object(g.b)(function(e,t){var n=t.channelId,a=Object(G.e)(e,n),r=Object(Fj.f)(e,n),i=Object(K.ab)(a)&&Object(K.pb)(a),o=i?Object(K.N)(e,a):null,s=i?Object(K.I)(a).filter(function(t){return Object(eo.tb)(Object(xo.d)(e,t))}).length:void 0,l=Object(A.e)(e)[0]||"",c=Object(K.x)(e,a,{publicChannelIncludeHashSign:!1});return{memberCount:r&&r.counts&&r.counts.member_count,featureClassicNav:Object(y.m)(e,"feature_classic_nav"),isSharedMpim:i,pendingAndConnectedTeamIds:o,externalMemberCount:s,clogger:Object(re.a)({state:e}),isMembersVisible:"members"===l,channelName:c,isChannel:Object(K.Cb)(a)||Object(K.Bb)(a)}},function(e){return{showDetails:function(){return e(jn.e.apply(void 0,arguments))}}})(Bj),Hj=new B.b("classic_nav"),Wj=(h.b.string.isRequired,h.b.bool,h.b.number,h.b.bool,h.b.object.isRequired,h.b.string.isRequired,h.b.bool,h.b.oneOf(["channel","private","im","mpim"]).isRequired,h.b.func,{maybe:!1,pinsCount:void 0,featureClassicNav:!1,isPinsVisible:!1,showDetails:d.a}),Gj=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["onClick","onKeyDown","renderAriaLabel"]),n}return u()(t,e),o()(t,[{key:"onClick",value:function(){this.props.showDetails({sectionId:"pins"}),this.props.clogger.track("CLASSIC_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"CHANNEL_HEADER",ui_element:"NAV_CHANNEL_PINS"}}})}},{key:"onKeyDown",value:function(e){e.keyCode===Lj.e&&(e.preventDefault(),this.props.showDetails({sectionId:"pins",focusKey:"pins"}))}},{key:"renderAriaLabel",value:function(){var e=this.props,t=e.channelType,n=e.channelName;return"channel"===t||"private"===t?Hj.t("Show items pinned in channel {channelName}",{channelName:n,fallbackHash:"ed68592deea9577fd06f582a1ecb11ae4bc371e8",note:"A label for the button in the Channel Header to show the pinned items Flexpane for a channel. Not visible on screen as it is only for customers using screen readers."}):"im"===t?Hj.t("Show items pinned in conversation with {memberName}",{memberName:n,fallbackHash:"ed68592deea9577fd06f582a1ecb11ae4bc371e8",note:"A label for the button in the Channel Header to show the pinned items Flexpane for an IM. Not visible on screen as it is only for customers using screen readers."}):"mpim"===t?Hj.t("Show items pinned in conversation with {memberNames}",{memberNames:n,fallbackHash:"ed68592deea9577fd06f582a1ecb11ae4bc371e8",note:"A label for the button in the Channel Header to show the pinned items Flexpane for an MPIM. memberNames is a comma-delimited set of names. Not visible on screen as it is only for customers using screen readers."}):void 0}},{key:"render",value:function(){var e=this.props,t=e.maybe,n=e.featureClassicNav,a=e.pinsCount,r=e.isPinsVisible;if(!n)return null;if(t&&!a)return null;var i=Object(mt.a)(a)?Object(B.n)(a):"\u2013",o=Hj.t("View pinned items"),s=m.a.createElement(_e.c,{className:"p-classic_nav__model__title__info__pins",onClick:this.onClick,onKeyDown:this.onKeyDown,"aria-label":this.renderAriaLabel(),"aria-expanded":r},m.a.createElement(ta.b,{type:"thumb-tack",size:"inherit",inline:!0}),"\xa0",i);return m.a.createElement(p.Fragment,null,r?s:m.a.createElement(qi.c,{tip:o,position:"bottom",hideFromScreenReader:!0},s),m.a.createElement(Ij,null))}}]),t}(p.Component);Gj.displayName="ModelInfoPins",Gj.defaultProps=Wj;var Kj=Object(g.b)(function(e,t){var n=t.channelId,a=Object(G.e)(e,n),r=Object(A.e)(e)[0]||"",i=Object(K.x)(e,a,{publicChannelIncludeHashSign:!1});return{pinsCount:Object(K.O)(a),featureClassicNav:Object(y.m)(e,"feature_classic_nav"),clogger:Object(re.a)({state:e}),isPinsVisible:"pins"===r,channelName:i,channelType:Object(K.v)(a)}},function(e){return{showDetails:function(){return e(jn.e.apply(void 0,arguments))}}})(Gj),Vj=n("hCI9"),zj=n("+z37"),Yj=(n("4tN7"),new B.b("classic_nav")),Qj=(h.b.string.isRequired,h.b.string,h.b.oneOfType([h.b.string,h.b.object]),h.b.bool,h.b.func,h.b.func,{currentRawTopic:void 0,currentFormattedTopic:void 0,featureClassicNav:!1,submitChannelTopic:d.a,openModal:d.a}),Xj=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onSubmit=n.onSubmit.bind(n),n.renderInput=n.renderInput.bind(n),n.input=m.a.createRef(),n}return u()(t,e),o()(t,[{key:"onSubmit",value:function(){var e=this,t=this.input.current&&this.input.current.getWrappedInstance().value();null!=t&&t!==this.props.currentRawTopic&&this.props.submitChannelTopic({channelId:this.props.channelId,topic:t}).catch(function(t){var n=Object(K.u)(Object(ne.a)(t,"data.error"));e.props.openModal({element:m.a.createElement(ar.a,{title:Yj.t("Oooops!",{ns:"channels"})},n)})})}},{key:"renderInput",value:function(e){var t=e.modules,n=e.isOpen,a=this.props.currentFormattedTopic;return m.a.createElement(Vj.b,{initialText:a,focusOnMount:!0,minLines:3,modules:t,isAutocompleteOpen:n,maxLength:250,ariaLabel:Yj.t("Edit channel topic"),ref:this.input,useLegacyLists:!0})}},{key:"render",value:function(){return this.props.featureClassicNav?m.a.createElement(nn.b,ye()({className:"p-channel_topic_dialog",title:Yj.t("Edit channel topic"),goButtonText:Yj.t("Set topic"),onGo:this.onSubmit},this.props),m.a.createElement(Hn.a,{renderInput:this.renderInput,completeOnMembers:!0,completeOnChannels:!0,completeOnEmoji:!0,shouldCompleteOnTab:!1})):null}}]),t}(p.Component);Xj.displayName="ChannelTopicDialog",Xj.defaultProps=Qj;var Jj=Object(g.b)(function(e,t){var n=t.channelId,a=Object(G.e)(e,n),r=a&&a.topic&&a.topic.value;return{currentRawTopic:r,currentFormattedTopic:r&&Object(zj.a)(e,{text:r}),featureClassicNav:Object(y.m)(e,"feature_classic_nav")}},function(e){return{submitChannelTopic:function(){return e(UE.H.apply(void 0,arguments))},openModal:function(){return e(tn.e.apply(void 0,arguments))}}})(Xj),Zj=new B.b("classic_nav"),$j=(h.b.string.isRequired,h.b.string,h.b.bool,h.b.bool,h.b.object.isRequired,h.b.bool.isRequired,h.b.func,h.b.bool,h.b.func,h.b.func,{topic:void 0,readOnly:!1,featureClassicNav:!1,openModal:d.a,hasKeyboardFocusWithin:!1,onFocus:d.a,onBlur:d.a}),eS=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n.containerRef=m.a.createRef(),n}return u()(t,e),o()(t,[{key:"onClick",value:function(e){e.target&&"A"===e.target.tagName||this.props.readOnly||this.containerRef.current&&e.target&&!this.containerRef.current.contains(e.target)||(this.props.openModal({element:m.a.createElement(Jj,{channelId:this.props.channelId})}),this.props.clogger.track("CLASSIC_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"CHANNEL_HEADER",ui_element:"NAV_CHANNEL_TOPIC"}}}))}},{key:"render",value:function(){var e=this.props,t=e.topic,n=e.readOnly,a=e.featureClassicNav,r=e.hasKeyboardFocusWithin,i=e.isIAP1Enabled;if(!a)return null;if(n&&!t)return null;var o=t?m.a.createElement(pg.a,{text:t,className:"p-classic_nav__model__title__info__topic__content",emojiSize:Gs.a.SMALL,noJumbomoji:!0,noHighlights:!0}):!i&&m.a.createElement("div",{className:"p-classic_nav__model__title__info__topic__content"},m.a.createElement(ta.b,{type:"pencil",size:"inherit",inline:!0}),"\xa0",Zj.t("Add a topic")),s=n?null:m.a.createElement(_e.c,{"aria-label":Zj.t("Edit channel topic",{fallbackHash:"5301648dcf6b53cefc9ed52999aaa92d4603cae0"}),className:"p-classic_nav__model__title__info__topic__edit"},Zj.t("Edit")),l=f()({"p-classic_nav__model__title__info__item":!0,"p-classic_nav__model__title__info__topic":!0,"p-classic_nav__model__title__info__topic--empty":!t,"p-classic_nav__model__title__info__topic--readonly":n,"p-classic_nav__model__title__info__topic--focus-within":r});return m.a.createElement(p.Fragment,null,m.a.createElement("div",{role:"presentation",ref:this.containerRef,className:l,onClick:this.onClick,onFocus:this.props.onFocus,onBlur:this.props.onBlur},m.a.createElement("div",{className:"p-classic_nav__model__title__info__topic__text"},o),s),m.a.createElement(Ij,null))}}]),t}(p.Component);eS.displayName="ModelInfoTopic",eS.defaultProps=$j;var tS=Object(Tk.a)(Object(g.b)(function(e,t){var n=t.channelId,a=Object(G.e)(e,n);return{topic:a&&a.topic&&a.topic.value,readOnly:!Object(Bb.w)(e,n).ok,featureClassicNav:Object(y.m)(e,"feature_classic_nav"),clogger:Object(re.a)({state:e}),isIAP1Enabled:Object(pE.b)(e)}},function(e){return{openModal:function(){return e(tn.e.apply(void 0,arguments))}}})(eS)),nS=n("RDbB"),aS=n("yY9y"),rS=new B.b("presence"),iS=(h.b.string.isRequired,h.b.string,h.b.bool,{memberId:void 0,featureClassicNav:!1}),oS=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getPresenceDescription=n.getPresenceDescription.bind(n),n}return u()(t,e),o()(t,[{key:"getPresenceDescription",value:function(e){return this.props.featureClassicNav?e.isDnd?rS.t("notifications snoozed"):e.isActive?rS.t("active"):rS.t("away"):null}},{key:"render",value:function(){var e=this,t=this.props.memberId;return t?m.a.createElement(p.Fragment,null,m.a.createElement(nS.a,{memberId:t},function(t){return m.a.createElement("div",{className:"p-classic_nav__model__title__info__presence"},m.a.createElement(aS.a,ye()({},t,{className:"p-classic_nav__model__title__info__presence__icon"})),e.getPresenceDescription(t))}),m.a.createElement(Ij,null)):null}}]),t}(p.Component);oS.displayName="ModelInfoPresence",oS.defaultProps=iS;var sS=Object(g.b)(function(e,t){var n=t.channelId,a=Object(G.e)(e,n);return{memberId:Object(K.H)(a),featureClassicNav:Object(y.m)(e,"feature_classic_nav")}})(oS),lS=(h.b.string.isRequired,h.b.string,{secondaryName:void 0}),cS=function(e){var t=e.secondaryName;return t?m.a.createElement(p.Fragment,null,m.a.createElement("div",{className:"p-classic_nav__model__title__info__secondary_name"},t),m.a.createElement(Ij,null)):null};cS.displayName="ModelInfoSecondaryName",cS.defaultProps=lS;var uS=Object(g.b)(function(e,t){var n=t.channelId,a=Object(G.e)(e,n),r=Object(xo.d)(e,Object(K.H)(a));return{secondaryName:Object(eo.M)(e,r)}})(cS),dS=new B.b("classic_nav"),pS=(h.b.string.isRequired,h.b.bool,h.b.arrayOf(h.b.string),h.b.bool,h.b.bool,h.b.string.isRequired,h.b.func.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return u()(t,e),o()(t,[{key:"onClick",value:function(){this.props.showDetails({sectionId:"info"})}},{key:"render",value:function(){var e=this.props,t=e.isShared,n=e.pendingAndConnectedTeamIds,a=e.featureClassicNav,r=e.isInfoOpen,i=e.channelName;if(!a)return null;if(!t)return null;var o=Object(B.j)(n.map(function(e){return m.a.createElement(Lb.a,{id:e})})),s=dS.rt("Shared with {teamNames}",{teamNames:o}),l=dS.t("View the organizations {channelName} is shared with",{channelName:i,fallbackHash:"fa4fe5f6ebd939a3f0478bc80b4bcc1890ef936e"}),c=m.a.createElement(_e.c,{className:"p-classic_nav__model__title__info__shared_teams",onClick:this.onClick,"aria-expanded":r},s);return m.a.createElement(p.Fragment,null,r?c:m.a.createElement(qi.c,{tip:l,position:"bottom"},c),m.a.createElement(Ij,null))}}]),t}(p.Component));pS.displayName="ModelInfoSharedTeams",pS.defaultProps={isShared:!1,pendingAndConnectedTeamIds:[],isInfoOpen:!1,featureClassicNav:!1};var mS=Object(g.b)(function(e,t){var n=t.channelId,a=Object(G.e)(e,n),r=Object(A.e)(e)[0]||"",i=Object(K.x)(e,a,{publicChannelIncludeHashSign:!1});return{isShared:Object(K.ab)(a),pendingAndConnectedTeamIds:Object(K.N)(e,a),featureClassicNav:Object(y.m)(e,"feature_classic_nav"),isInfoOpen:"info"===r,channelName:i}},function(e){return{showDetails:function(){return e(jn.e.apply(void 0,arguments))}}})(pS),hS=(h.b.string.isRequired,h.b.bool,h.b.string,{isExternal:!1,memberTeamId:void 0}),bS=function(e){var t=e.isExternal,n=e.memberTeamId;return t&&n?m.a.createElement(p.Fragment,null,m.a.createElement(Lb.a,{id:n,bold:!1}),m.a.createElement(Ij,null)):null};bS.displayName="ModelInfoTeamName",bS.defaultProps=hS;var fS=Object(g.b)(function(e,t){var n=t.channelId,a=Object(G.e)(e,n),r=Object(K.H)(a),i=Object(xo.d)(e,r);return{isExternal:Object(eo.tb)(i),memberTeamId:Object(eo.P)(i)}})(bS),gS={channel:["star","members","pins","sharedTeams","topic"],private:["star","members","pins","sharedTeams","topic"],mpim:["star","members","pinsMaybe"],im:["star","presence","secondaryName","teamName","pinsMaybe"]},_S=(h.b.string.isRequired,h.b.oneOf(["channel","private","im","mpim"]),h.b.bool,{channelType:void 0,showTabs:!1}),vS=function(e){var t=e.channelId,n=e.channelType,a=e.showTabs;if(!n)return null;var r=a&&m.a.createElement(Tj,{channelId:t,key:"tabs"}),i=gS[n].map(function(e){switch(e){case"star":return m.a.createElement(xj,{channelId:t,key:"star"});case"members":return m.a.createElement(qj,{channelId:t,key:"members"});case"pins":return m.a.createElement(Kj,{channelId:t,key:"pins"});case"presence":return m.a.createElement(sS,{channelId:t,key:"presence"});case"secondaryName":return m.a.createElement(uS,{channelId:t,key:"secondaryName"});case"pinsMaybe":return m.a.createElement(Kj,{maybe:!0,channelId:t,key:"pinsMaybe"});case"sharedTeams":return m.a.createElement(mS,{channelId:t,key:"sharedTeams"});case"teamName":return m.a.createElement(fS,{channelId:t,key:"teamName"});case"topic":return m.a.createElement(tS,{channelId:t,key:"topic"});default:return null}}),o=f()("p-classic_nav__model__title__info","p-classic_nav__no_drag",{"p-classic_nav__model__title__info--tabs":a});return m.a.createElement("div",{"data-qa":"channel_header__title__info",className:o},r,i)};vS.displayName="ModelInfo",vS.defaultProps=_S;var yS=Object(g.b)(function(e,t){var n=t.channelId,a=Object(G.e)(e,n);return{channelType:Object(K.v)(a),showTabs:Object(j.e)(e)}})(vS),kS=new B.b("classic_nav"),OS=(h.b.string.isRequired,h.b.bool,h.b.string.isRequired,h.b.func,h.b.bool.isRequired,h.b.object.isRequired,h.b.object.isRequired,{featureBetterInvitesCopy:!1,startChannelInviteModal:d.a}),CS=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return u()(t,e),o()(t,[{key:"onClick",value:function(){this.props.startChannelInviteModal({channelId:this.props.channelId,entryPoint:"header_add_people"}),this.clogAddUsersToChannelClick()}},{key:"clogAddUsersToChannelClick",value:function(){this.props.clogger.track("CLASSIC_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"CHANNEL_HEADER",ui_element:"NAV_CHANNEL_INVITE"}}})}},{key:"renderTip",value:function(){var e=this.props,t=e.featureBetterInvitesCopy,n=e.channelId;return t?kS.rt("Add people to {channelName}",{channelName:m.a.createElement(Yp.a,{className:"overflow_ellipsis",channelId:n,inline:!0})}):null}},{key:"render",value:function(){var e=this.props,t=e.isImOrMpim,n=e.channel,a=e.featureBetterInvitesCopy,r=e.channelName;if(!a)return null;var i=Object(K.nb)(n)&&Object(K.X)(n);if(!Object(K.nb)(n)||Object(K.X)(n)||Object(K.db)(n)||t||i)return null;var o=kS.t("Add people to {channelName}",{channelName:r,note:"Label for the add users button in the Channel Header. Not visible on screen as it is only for customers using screen readers."});return m.a.createElement(qi.c,{position:"bottom",tip:this.renderTip(),hideFromScreenReader:!0},m.a.createElement(_e.c,{onClick:this.onClick,className:"p-classic_nav__model__button","data-qa":"channel_header_invite_button","aria-label":o},m.a.createElement(ta.b,{type:"add-user",className:"p-classic_nav__model__button__icon"})))}}]),t}(p.Component);CS.displayName="AddUserButton",CS.defaultProps=OS;var ES=Object(g.b)(function(e,t){var n=t.channelId,a=Object(G.e)(e,n),r=Object(K.hb)(a)||Object(K.pb)(a),i=Object(K.x)(e,a,{publicChannelIncludeHashSign:!1});return{channel:a,featureBetterInvitesCopy:Object(y.m)(e,"feature_better_invites_copy"),channelName:i,isImOrMpim:r,clogger:Object(re.a)({state:e})}},function(e){return{startChannelInviteModal:function(){return e(FE.b.apply(void 0,arguments))}}})(CS),jS=n("/m+M"),SS=n("cMxN"),IS=new B.b("channel_action_menu"),wS=function(e){var t=e.closeModal,n=e.setClickedThrough,a=e.launchWorkflowBuilder,r=Object(jS.a)().featureChannelActionsClient,i=Object(p.useCallback)(function(){a(),n(),t()},[t,n,a]);return r?m.a.createElement(xh.a,{onClose:t,title:IS.t("Add a new action"),submitButtonText:IS.t("Create Workflow"),onSubmit:i,showCancelButton:!1,"data-qa":"add_channel_action_modal"},m.a.createElement("p",null,IS.t("You can automate everyday actions \u2014 like sending routine messages or gathering info from people \u2014 with Workflow Builder. Create workflows and add them to a channel for everyone to use."))):null};wS.displayName="BaseAddChannelActionModal";var NS=Object(g.b)(void 0,function(e){return{closeModal:function(){return e(Object(tn.a)())},launchWorkflowBuilder:function(){return e(Object(rC.a)({source:"add_channel_action__modal"}))},setClickedThrough:function(){return e(Object(Tn.f)({pref:"workflow_builder_intro_modal_clicked_through",value:!0}))}}})(wS),TS=function(){return m.a.createElement(NS,null)};TS.displayName="createAddChannelActionModal";var AS=Object(gt.b)("add channel action with workflow builder",function(e,t){var n=t();Object(AC.a)(n)&&Object(y.m)(n,"feature_builder_can_access")&&(!0!==Object(Zt.j)(n,"workflow_builder_intro_modal_clicked_through")?e(Object(tn.e)({element:TS()})):e(Object(rC.a)({source:"add_channel_action__seen_modal"})))});AS.meta={name:"addChannelActionWithWorkflowBuilder",key:"actionsAddChannelActionWithWorkflowBuilderAddChannelActionWithWorkflowBuilder",description:"add channel action with workflow builder"},AS.propTypes=null;var RS=AS,PS=n("OYPW"),MS=n("Pb16"),xS=new B.b("channel_action_menu"),FS=(h.b.string.isRequired,function(e){var t=e.name,n=Ep()(e,["name"]),a=Object(jS.a)().featureChannelActionsClient;return m.a.createElement(Cn.b,n,m.a.createElement("span",null,a?xS.rt("You used the action <b>{name}</b>",{name:t}):""))});FS.displayName="AppActionSuccessToast";var LS=function(e){return m.a.createElement(FS,e)};LS.displayName="appActionSuccessToastFactory";var DS=n("DVJN"),US=Object(gt.b)("Runs a channel action",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.channelId,r=n.actionId,i=t(),o=Object(Ct.a)({state:i,label:"PLATFORM-CHANNEL-ACTIONS"}),s=xt(i,r);if(!s)return o.error("Unable to run unknown channel action with ID "+r+" for channel "+a),Promise.resolve();var l={actionId:r,appId:s.appId,channelId:a,type:DS.a.channelAction};return e(Object(Nt.c)(l)).tap(function(){o.info("Successfully ran channel action "+r+" for channel "+a);var t=LS({name:s.name});e(Object(en.c)({element:t}))}).catch(function(t){o.error("Failed to run channel action "+r+" for channel "+a,t);var n=Object(MS.a)({onRetry:function(){return e(US({channelId:a,actionId:r}))}});e(Object(en.c)({element:n}))})});US.meta={name:"runChannelAction",key:"channelActionsStoreActionsRunChannelAction",description:"Runs a channel action"},US.propTypes={actionId:h.b.string.isRequired,channelId:h.b.string.isRequired};n("fYpC");var BS=function(e){var t=e.action,n=e.app,a=e.channelId,r=e.isOffline,i=e.onSelected,o=e.runChannelAction,s=e.index,l=e.clogger,c=Ep()(e,["action","app","channelId","isOffline","onSelected","runChannelAction","index","clogger"]),u=Object(ne.a)(t,"app.icons.image_64",Object(xg.b)(n,64)),d=m.a.createElement(pO.a,{alt:name,className:"p-channel_action_menu_item__icon",height:20,src:u,width:20}),h=Object(p.useCallback)(function(){o({actionId:t.id,channelId:a}),function(e,t){var n,a,r=t.index,i=t.appId,o=t.actionId;e.track(le.EventId.CHANNEL_ACTION_MENU,{app_id:i,action_id:o,contexts:fe()({},le.ClientEventKeys.ui_context,(a={},fe()(a,le.UiContextKeys.action,le.UiAction.CLICK),fe()(a,le.UiContextKeys.ui_component,le.UiComponent.CHANNEL_ACTION),fe()(a,le.UiContextKeys.ui_properties,(n={},fe()(n,le.UiPropertiesKeys.element_type,le.ElementType.DROPDOWN),fe()(n,le.UiPropertiesKeys.element_name,"action_item"),fe()(n,le.UiPropertiesKeys.element_index,r),n)),a))})}(l,{index:s,actionId:t.id,appId:t.appId}),i(t)},[t,a,l,s,i,o]);return Object(p.useEffect)(function(){!function(e,t){var n,a,r=t.index,i=t.appId,o=t.actionId;e.track(le.EventId.CHANNEL_ACTION_MENU,{app_id:i,action_id:o,contexts:fe()({},le.ClientEventKeys.ui_context,(a={},fe()(a,le.UiContextKeys.action,le.UiAction.IMPRESSION),fe()(a,le.UiContextKeys.ui_component,le.UiComponent.CHANNEL_ACTION),fe()(a,le.UiContextKeys.ui_properties,(n={},fe()(n,le.UiPropertiesKeys.element_type,le.ElementType.DROPDOWN),fe()(n,le.UiPropertiesKeys.element_name,"action_item"),fe()(n,le.UiPropertiesKeys.element_index,r),n)),a))})}(l,{index:s,actionId:t.id,appId:t.appId})},[t.appId,t.id,l,s]),m.a.createElement(na.b,ye()({},c,{className:"p-channel_action_menu_item",onSelected:h,icon:d,"data-qa":"channel_action_menu_item",showOfflineIcon:r,disabled:r}),t.name)};BS.displayName="ChannelActionMenuItem",BS.defaultProps={app:null,onSelected:d.a};var qS=Object(g.b)(function(e,t){var n=t.action.appId;return{app:Object(ia.e)(e,n)||null,isOffline:!Object(Qt.c)(e),clogger:Object(re.a)({state:e})}},function(e){return{runChannelAction:function(t){return e(US(t))}}})(BS),HS=Object(lC.b)(qS),WS=new B.b("channel_action_menu"),GS={small:160,medium:200,large:240},KS=function(e){var t=e.channelId,n=e.channelActionCount,a=e.channelActions,r=e.onSelected,i=e.addChannelActionWithWorkflowBuilder,o=e.shouldShowCreateButton,s=e.clogger,l=Ep()(e,["channelId","channelActionCount","channelActions","onSelected","addChannelActionWithWorkflowBuilder","shouldShowCreateButton","clogger"]),c=Object(jS.a)().featureChannelActionsClient,u=Object(PS.a)(function(){return new Array(n).fill(null).map(function(e,t){return m.a.createElement(na.b,{"data-qa":"channel_action_menu__placeholder_item",key:t,disabled:!0},m.a.createElement(sf.b,{size:"random",sizes:GS}))})},[n]),d=Object(p.useMemo)(function(){return a&&0!==a.length?a.map(function(e,n){return m.a.createElement(HS,{key:e.id,action:e,channelId:t,onSelected:r,index:n})}):u},[u,a,t,r]),h=Object(p.useCallback)(function(){var e,t;s.track(le.EventId.CHANNEL_ACTION_MENU,{contexts:fe()({},le.ClientEventKeys.ui_context,(t={},fe()(t,le.UiContextKeys.action,le.UiAction.CLICK),fe()(t,le.UiContextKeys.ui_component,le.UiComponent.CHANNEL_ACTION),fe()(t,le.UiContextKeys.ui_properties,(e={},fe()(e,le.UiPropertiesKeys.element_type,le.ElementType.LINK),fe()(e,le.UiPropertiesKeys.element_name,"create_action"),e)),t))}),i()},[i,s]);return m.a.createElement(na.f,ye()({},l,{"data-qa":"channel_action_menu"}),d,o&&m.a.createElement(p.Fragment,null,m.a.createElement(na.d,null),m.a.createElement(na.b,{onSelected:h,"data-qa":"channel_action_menu__create_action_cta"},c?WS.t("Add a new action..."):"")))};KS.displayName="ChannelActionMenu",KS.defaultProps={channelActions:[],onSelected:d.a};var VS=Object(g.b)(function(e,t){var n=t.channelId;return{channelId:n,channelActionCount:Dt(e,n),channelActions:Ut(e,n),shouldShowCreateButton:Object(AC.a)(e),clogger:Object(re.a)({state:e})}},function(e){return{addChannelActionWithWorkflowBuilder:function(){return e(RS())}}})(KS),zS=new B.b("channel_action_menu"),YS=(h.b.string,h.b.node.isRequired,h.b.number,h.b.number,h.b.string,h.b.bool,function(e){var t=e.children,n=e.channelId,a=e.featureChannelActionsClient,r=e.offsetX,i=e.offsetY,o=e.position,s=Ep()(e,["children","channelId","featureChannelActionsClient","offsetX","offsetY","position"]);return a?m.a.createElement(SS.b,ye()({},s,{ariaHasPopup:!0,renderPopover:function(e){return m.a.createElement(SS.a,ye()({allowanceX:15,allowanceY:15,position:o,offsetX:r,offsetY:i,ariaLabel:zS.t("App Actions"),ariaRole:"dialog"},e),m.a.createElement(VS,{channelId:n,onTriggerClose:e.onClose,onMenuItemSelected:e.onClose}))}}),t):null});YS.displayName="ChannelActionMenuTrigger",YS.defaultProps={channelId:null,offsetX:0,offsetY:0,position:"bottom-right",featureChannelActionsClient:!1};var QS=Object(rr.a)("feature_channel_actions_client")(YS),XS=new B.b("classic_nav"),JS=(h.b.string.isRequired,h.b.string.isRequired,h.b.string.isRequired,h.b.number,h.b.bool.isRequired,h.b.object.isRequired,function(e){var t=e.teamId,n=e.channelId,a=e.channelName,r=e.channelActionCount,i=e.shouldDisplay,o=e.clogger,s=Object(jS.a)(),l=s.featureClassicNav,c=s.featureChannelActionsClient,u=l&&c&&i,d=Object(p.useCallback)(function(){return function(e){var t;return e.track(le.EventId.CLASSIC_NAV,{contexts:fe()({},le.ClientEventKeys.ui_context,(t={},fe()(t,le.UiContextKeys.action,le.UiAction.CLICK),fe()(t,le.UiContextKeys.ui_component,le.UiComponent.CHANNEL_HEADER),fe()(t,le.UiContextKeys.ui_element,le.UiElement.NAV_CHANNEL_ACTIONS),t))})}(o)},[o]),h=Object(p.useCallback)(function(){return function(e){var t,n;return e.track(le.EventId.CHANNEL_ACTION_MENU,{contexts:fe()({},le.ClientEventKeys.ui_context,(n={},fe()(n,le.UiContextKeys.action,le.UiAction.HOVER),fe()(n,le.UiContextKeys.ui_component,le.UiComponent.CHANNEL_ACTION),fe()(n,le.UiContextKeys.ui_properties,(t={},fe()(t,le.UiPropertiesKeys.element_type,le.ElementType.ICON),fe()(t,le.UiPropertiesKeys.element_name,"action_icon"),t)),n))})}(o)},[o]);if(Object(p.useEffect)(function(){i&&Pt(t,n)},[t,n,r,i]),Object(p.useEffect)(function(){u&&function(e){var t,n;e.track(le.EventId.CHANNEL_ACTION_MENU,{contexts:fe()({},le.ClientEventKeys.ui_context,(n={},fe()(n,le.UiContextKeys.action,le.UiAction.IMPRESSION),fe()(n,le.UiContextKeys.ui_component,le.UiComponent.CHANNEL_ACTION),fe()(n,le.UiContextKeys.ui_properties,(t={},fe()(t,le.UiPropertiesKeys.element_type,le.ElementType.ICON),fe()(t,le.UiPropertiesKeys.element_name,"action_icon"),t)),n))})}(o)},[o,u]),!u)return null;var b=XS.t("Actions in this channel"),f=c?XS.t("Actions in channel {channelName}",{channelName:a,fallbackHash:"b225cbd5ab14bf4bbd8e4b05e1beb652d1f7c33b",note:"Label for the channel actions button in Channel Header. Not visible on screen as it is only for customers using screen readers."}):"";return m.a.createElement(QS,{channelId:n,onClick:d},m.a.createElement(qi.c,{position:"bottom",tip:b,onMouseEnter:h,hideFromScreenReader:!0},m.a.createElement(_e.c,{className:"p-classic_nav__model__button","aria-label":f,"data-qa":"channel_action_button"},m.a.createElement(ta.b,{type:"bolt",className:"p-classic_nav__model__button__icon"}))))});JS.displayName="ChannelActionButton",JS.defaultProps={channelActionCount:null};var ZS=Object(g.b)(function(e,t){var n=t.channelId,a=Object(G.e)(e,n),r=Dt(e,n),i=(Object(K.Bb)(a)||Object(K.Cb)(a))&&Object(K.nb)(a)&&r>0,o=Object(K.x)(e,a,{publicChannelIncludeHashSign:!1});return{shouldDisplay:i,channelActionCount:r,teamId:Object(v.b)(e),clogger:Object(re.a)({state:e}),channelName:o}})(JS),$S=n("NB3s"),eI=n("WUBc"),tI=(h.b.string.isRequired,h.b.string,h.b.string,h.b.bool,h.b.bool,h.b.object.isRequired,h.b.number.isRequired,h.b.bool.isRequired,h.b.bool.isRequired,h.b.object,h.b.string,h.b.func,{tooltip:void 0,tooltipContext:void 0,isVisible:!0,isDisabled:!1,callConfirmationStrings:null,startCall:d.a,memberPhoneNumber:""}),nI=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["onClick","startCall","closeConfirmationModal","renderMenu"]),n.state={showConfirmation:!1},n}return u()(t,e),o()(t,[{key:"onClick",value:function(){var e=this.props,t=e.isDisabled,n=e.featureCallsLargeChannelConfirmation;t||(n&&this.props.memberCount>=100?this.setState(function(){return{showConfirmation:!0}}):this.startCall())}},{key:"closeConfirmationModal",value:function(){this.setState(function(){return{showConfirmation:!1}})}},{key:"startCall",value:function(){this.props.startCall(),this.closeConfirmationModal(),this.props.clogger.track("CLASSIC_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"CHANNEL_HEADER",ui_element:"NAV_CHANNEL_CALL"}}})}},{key:"maybeRenderConfirmationModal",value:function(){var e=this.props.callConfirmationStrings;return this.state.showConfirmation?m.a.createElement($S.a,{closeModal:this.closeConfirmationModal,isOpen:this.state.showConfirmation,centered:!0},m.a.createElement($S.h,null,m.a.createElement($S.j,{title:e.title})),m.a.createElement($S.d,null,m.a.createElement($S.e,null,m.a.createElement("p",null,e.description))),m.a.createElement($S.f,null,m.a.createElement($S.g,null,m.a.createElement($S.c,{type:"outline",onClick:this.closeConfirmationModal},e.cancel),m.a.createElement(_e.d,{type:"primary",onClick:this.startCall},e.confirm)))):null}},{key:"renderMenu",value:function(e){return m.a.createElement(eI.a,{memberPhoneNumber:this.props.memberPhoneNumber,menuProps:e,onSelected:this.onClick})}},{key:"render",value:function(){var e=this.props,t=e.tooltip,n=e.tooltipContext,a=e.isVisible,r=e.isDisabled,i=e.featurePlatformMultiCallSupport;if(!a)return null;var o=f()({"p-classic_nav__model__button":!0,"p-classic_nav__model__button--disabled":r}),s=i?m.a.createElement("div",null,m.a.createElement("div",null,t),m.a.createElement("div",{className:"p-classic_nav__model__button--tooltip"},n)):t,l=m.a.createElement(qi.c,{tip:s,position:"bottom"},m.a.createElement(_e.c,{onClick:i?null:this.onClick,className:o,"aria-label":t,"aria-disabled":r,"data-qa":"channel_header_calls_button"},m.a.createElement("div",{className:"display_flex"},m.a.createElement(ta.b,{type:"phone",className:"p-classic_nav__model__button__icon"}),i&&m.a.createElement(ta.b,{"data-qa":"call_icon_chevron_down",className:"p-classic_nav__model__button--chevron",type:"chevron_down",inline:!0}))));return m.a.createElement(p.Fragment,null,i?m.a.createElement(na.e,{position:"bottom-right",renderMenu:this.renderMenu},l):l,this.maybeRenderConfirmationModal())}}]),t}(p.Component);nI.displayName="CallButton",nI.defaultProps=tI;var aI=Object(g.b)(function(e,t){var n=t.channelId,a=Object(G.e)(e,n),r=Object(Fj.f)(e,a.id),i=Object(ne.a)(r,"counts.member_count")||0,o=Object(K.H)(a),s=Object(xo.d)(e,o),l=Object(eo.D)(s);return{memberCount:i,tooltip:Object(bj.d)(e,a),tooltipContext:Object(bj.c)(e),isVisible:Object(bj.f)(e,a),isDisabled:Object(bj.e)(e,a),clogger:Object(re.a)({state:e}),featureCallsLargeChannelConfirmation:Object(y.m)(e,"feature_calls_large_channel_confirmation"),callConfirmationStrings:Object(bj.b)(i),featurePlatformMultiCallSupport:Object(y.m)(e,"feature_platform_multi_call_support"),memberPhoneNumber:l}},function(e){return{startCall:function(){e(TE.d.apply(void 0,arguments))}}})(nI),rI=new B.b("classic_nav"),iI=(h.b.string.isRequired,h.b.oneOf(["channel","private","im","mpim"]).isRequired,h.b.bool,h.b.string,h.b.bool,h.b.object.isRequired,h.b.string.isRequired,h.b.func,h.b.func,{isActive:!1,lastChannelDetailsSection:null,featureClassicNav:!1,showDetails:d.a,closeFlexpane:d.a}),oI=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["onClick","onKeyDown","renderTip","renderAriaLabel"]),n}return u()(t,e),o()(t,[{key:"onClick",value:function(){this.props.isActive?this.props.closeFlexpane():this.props.showDetails({sectionId:this.props.lastChannelDetailsSection||"info"}),this.props.clogger.track("CLASSIC_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"CHANNEL_HEADER",ui_element:"NAV_CHANNEL_DETAILS"}}})}},{key:"onKeyDown",value:function(e){if(e.keyCode===Lj.e)if(e.preventDefault(),this.props.isActive)this.props.closeFlexpane();else{var t=this.props.lastChannelDetailsSection||"info";this.props.showDetails({sectionId:t,focusKey:t})}}},{key:"renderTip",value:function(){var e=this.props,t=e.channelType,n=e.isActive,a="channel"===t||"private"===t;return e.featureClassicNav?a&&n?rI.t("Hide channel details"):a&&!n?rI.t("View channel details"):!a&&n?rI.t("Hide conversation details"):a||n?null:rI.t("View conversation details"):null}},{key:"renderAriaLabel",value:function(){var e=this.props,t=e.channelType,n=e.channelName;return"channel"===t||"private"===t?rI.t("Show details for channel {channelName}",{channelName:n,fallbackHash:"f342e3d5c6b2ef68fd26370af67b8f6725a1ca43",fallbackHashNs:"client",note:"A label for the button in the Channel Header to show the details Flexpane for a channel. Not visible on screen as it is only for customers using screen readers."}):"im"===t?rI.t("Show details for conversation with {memberName}",{memberName:n,fallbackHash:"d98f3774273f4ddf16d4c19acfc148750dbadbea",fallbackHashNs:"client",note:"A label for the button in the Channel Header to show the details Flexpane for an IM. Not visible on screen as it is only for customers using screen readers."}):"mpim"===t?rI.t("Show details for conversation with {memberNames}",{memberNames:n,fallbackHash:"d98f3774273f4ddf16d4c19acfc148750dbadbea",fallbackHashNs:"client",note:"A label for the button in the Channel Header to show the details Flexpane for an MPIM. memberNames is a comma-delimited set of names. Not visible on screen as it is only for customers using screen readers."}):void 0}},{key:"render",value:function(){var e=this.props.isActive,t=f()({"p-classic_nav__model__button":!0,"p-classic_nav__model__button--active":e});return m.a.createElement(qi.c,{position:"bottom",tip:this.renderTip(),delay:qi.a,hideFromScreenReader:!0},m.a.createElement(_e.c,{className:t,onClick:this.onClick,onKeyDown:this.onKeyDown,"aria-label":this.renderAriaLabel(),"aria-expanded":e},m.a.createElement(ta.b,{type:"info-circle",className:"p-classic_nav__model__button__icon"})))}}]),t}(p.Component);oI.displayName="DetailsButton",oI.defaultProps=iI;var sI=Object(g.b)(function(e,t){var n=t.channelId,a=Object(G.e)(e,n),r=Object(K.x)(e,a,{publicChannelIncludeHashSign:!1});return{channelType:Object(K.v)(a),isActive:"details"===Object(A.j)(e),lastChannelDetailsSection:Object(A.b)(e),channelName:r,featureClassicNav:Object(y.m)(e,"feature_classic_nav"),clogger:Object(re.a)({state:e})}},function(e){return{showDetails:function(){return e(jn.e.apply(void 0,arguments))},closeFlexpane:function(){return e(jn.a.apply(void 0,arguments))}}})(oI),lI=n("8Mhq"),cI=n("u2vH"),uI=n("EOYu"),dI=n("tBeP");function pI(e,t){var n=Object(G.e)(e,t);if(!e||!n)return null;var a=Object(K.H)(n),r=Object(xo.d)(e,a),i=Object(eo.q)(r),o=Object(xo.b)(e),s=Object(we.d)(e),l=Object(uI.c)(e,{serviceId:i,memberId:a});if(Object(Ub.d)(l)||!Object(Ub.b)(l))return null;var c=Object(cI.j)(l),u=Object(cI.s)(l),d=Object(cI.B)(l),p=Object(cI.k)(l),m=Object(cI.p)(l),h="slack"===u,b=c!==s.id,f=!d||b||Object(eo.Gb)(o),g=!f,_=!f,v=Object(y.m)(e,"feature_all_dm_mute_bots"),k=Object(cI.L)(e,l),O=!!p,C=Object(cI.K)(e,l),E=!!m,j=!E&&h;return Object(Sb.a)({addApp:g,viewFiles:_,featureAllDmMuteBots:v,settings:k,homepage:O,viewInAppDirectory:C,support:E,slackSupport:j},function(e){return!!e})}n("CDdZ");var mI=new B.b("app_items"),hI=(h.b.string.isRequired,h.b.object.isRequired,h.b.string.isRequired,h.b.string.isRequired,h.b.string.isRequired,h.b.bool.isRequired,h.b.object.isRequired,h.b.bool,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.object,{onMenuItemSelected:d.a,openAppManagementModal:d.a,openInviteMemberToChannelDialog:d.a,muteChannelById:d.a,unmuteChannelById:d.a,openModal:d.a,showFileList:d.a,actions:void 0,featureClassicNav:!1}),bI=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getItems=n.getItems.bind(n),n.clogClick=n.clogClick.bind(n),n}return u()(t,e),o()(t,[{key:"getItems",value:function(){var e=this,t=this.props,n=t.teamUrl,a=t.appProfile,r=t.memberId,i=t.botId,o=t.channelId,s=t.isMuted,l=t.clogger,c=t.featureClassicNav,u=t.actions,d=t.onMenuItemSelected;if(!u||!c)return[];var p=Object(cI.l)(a),h=Object(cI.s)(a),b=Object(cI.k)(a),f=Object(cI.p)(a);return[{label:mI.t("Add this app to a channel\u2026"),show:u.addApp,key:"addApp",click:function(){return e.props.openInviteMemberToChannelDialog({memberId:r})},dataQa:"app_menu_add_app_to_channel"},{label:mI.t("View files shared by this app"),show:u.viewFiles,key:"viewFiles",click:function(){return e.props.showFileList({user:r})},dataQa:"app_menu_files_shared_by_app"},{type:"separator",key:"separator-1"},{label:s?mI.t("Unmute this app"):mI.t("Mute this app"),show:u.featureAllDmMuteBots,key:"muteApp",click:function(){s?e.props.unmuteChannelById(o):e.props.muteChannelById(o)},dataQa:"app_menu_mute_app"},{label:mI.t("Settings"),show:u.settings,key:"settings",href:n+"services/"+i,click:function(t){var n={action:"CLICK",ui_element:"LINK_APP_SETTINGS"};l.track("CHANNEL_SETTINGS",{contexts:{ui_context:n}}),"xoxa"===h&&(t.preventDefault(),e.props.openAppManagementModal({serviceId:i,referringEventId:"CHANNEL_SETTINGS",referringUiContext:n}))},dataQa:"app_menu_settings"},{label:mI.t("App Homepage"),show:u.homepage,key:"homepage",href:b,click:function(){l.track("APP_CLICK_LINK_APP_HOMEPAGE_IN_CHANNEL_SETTINGS",{contexts:{ui_context:{step:"channel_settings",action:"click",ui_element:"link_app_homepage"}}})},dataQa:"app_menu_homepage"},{label:mI.t("View in App Directory"),show:u.viewInAppDirectory,key:"viewInAppDirectory",href:n+"apps/"+p+"?utm_source=in-prod&utm_medium=inprod-link_app_directory-channel_settings-click",click:function(){l.track("APP_CLICK_LINK_APP_DIRECTORY_IN_CHANNEL_SETTINGS",{contexts:{ui_context:{step:"channel_settings",action:"click",ui_element:"link_app_directory"}}})},dataQa:"app_menu_view_app_directory"},{label:mI.t("Support for this app"),show:u.support,key:"support",href:f,dataQa:"app_menu_support"},{label:mI.t("Support for this app"),show:u.slackSupport,key:"slackSupport",click:function(){return e.props.openModal({element:m.a.createElement(lI.a,{trigger:"app_support_profile_button"})})},dataQa:"app_menu_support"}].filter(function(e){return e&&(e.show||"separator"===e.type)}).map(function(t,n){return ye()({},t,{click:function(a){return e.clogClick(),d(n,a),t.click?t.click(a):void 0}})})}},{key:"clogClick",value:function(){var e=this.props,t=e.appProfile,n=e.botId,a=e.clogger,r=t.app_id;a.track(le.EventId.USER_CARD_CLICK,{app_id:r,bot_id:n})}},{key:"render",value:function(){var e=this.props.appProfile;if(Object(Ub.d)(e))return m.a.createElement(na.f,{menuClassNames:"p-app_menu--loading"},m.a.createElement(ci.a,null));if(!Object(Ub.b)(e))return null;var t=this.getItems();return t.length?m.a.createElement(na.a,{template:t,stripTerminalSeparators:!0}):null}}]),t}(p.Component);bI.displayName="AppMenu",bI.defaultProps=hI;var fI=Object(g.b)(function(e,t){var n=t.channelId,a=Object(G.e)(e,n),r=Object(K.H)(a),i=Object(xo.d)(e,r),o=Object(eo.q)(i),s=Object(v.b)(e),l=Object(we.i)(e,s),c=Object(uI.b)(e,n),u=Object(y.m)(e,"feature_all_dm_mute_bots")&&Object(Ad.c)(e,n);return{actions:pI(e,n),teamUrl:Object(De.o)(l),appProfile:c,memberId:r,botId:o,channelId:n,isMuted:u,clogger:Object(re.a)({state:e}),featureClassicNav:Object(y.m)(e,"feature_classic_nav")}},function(e){return Object(Eg.b)({openAppManagementModal:dI.a,openInviteMemberToChannelDialog:nj.a,openModal:tn.e,showFileList:jn.g,muteChannelById:SE.a,unmuteChannelById:SE.b},e)})(bI),gI=new B.b("classic_nav"),_I=(h.b.string.isRequired,h.b.bool.isRequired,h.b.bool,h.b.bool,h.b.string,h.b.string.isRequired,h.b.oneOf(["channel","private","im","mpim"]).isRequired,h.b.object.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["renderMenu","onTriggerClick","renderAriaLabel"]),n}return u()(t,e),o()(t,[{key:"onTriggerClick",value:function(){this.props.clogger.track("CLASSIC_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"CHANNEL_HEADER",ui_element:"NAV_CHANNEL_SETTINGS"}}})}},{key:"renderMenu",value:function(e){return this.props.hasAppMenu?m.a.createElement(fI,ye()({},e,{channelId:this.props.channelId})):m.a.createElement(Cj,ye()({},e,{channelId:this.props.channelId}))}},{key:"renderAriaLabel",value:function(){var e=this.props,t=e.channelType,n=e.channelName;return"channel"===t||"private"===t?gI.t("Settings for channel {channelName}",{channelName:n,fallbackHash:"eb2e450637aca7e07bbb3574966b72549c2b533b",note:"A label for the button in the Channel Header to show the settings menu for a channel. Not visible on screen as it is only for customers using screen readers."}):"im"===t?gI.t("Settings for conversation with {memberName}",{memberName:n,fallbackHash:"575f3f99f1b5afc989da1de8ca14e234f55e7ede",note:"A label for the button in the Channel Header to show the settings menu for an IM. Not visible on screen as it is only for customers using screen readers."}):"mpim"===t?gI.t("Settings for conversation with {memberNames}",{memberNames:n,fallbackHash:"575f3f99f1b5afc989da1de8ca14e234f55e7ede",note:"A label for the button in the Channel Header to show the settings menu for an MPIM. memberNames is a comma-delimited set of names.  Not visible on screen as it is only for customers using screen readers."}):void 0}},{key:"render",value:function(){var e=this.props,t=e.featureClassicNav,n=e.isChannel,a=e.tooltipPosition,r=n?gI.t("Channel settings"):gI.t("Conversation settings");return t?m.a.createElement(na.e,{renderMenu:this.renderMenu,position:"bottom-right",onClick:this.onTriggerClick},m.a.createElement(qi.c,{position:a,tip:r},m.a.createElement(_e.c,{className:"p-classic_nav__model__button","data-qa":"channel_header_settings_button","aria-label":this.renderAriaLabel(),hideFromScreenReader:!0},m.a.createElement(ta.b,{type:"cog-o",className:"p-classic_nav__model__button__icon"})))):null}}]),t}(p.Component));_I.displayName="ActionsButton",_I.defaultProps={featureClassicNav:!1,isChannel:!1,tooltipPosition:"bottom"};var vI=Object(g.b)(function(e,t){var n=t.channelId,a=Object(G.e)(e,n),r=Object(K.x)(e,a,{publicChannelIncludeHashSign:!1});return{channelType:Object(K.v)(a),channelName:r,hasAppMenu:Object(K.kb)(e,n),featureClassicNav:Object(y.m)(e,"feature_classic_nav"),clogger:Object(re.a)({state:e})}})(_I),yI=new B.b("classic_nav"),kI=(h.b.node.isRequired,h.b.node,h.b.string,h.b.bool.isRequired,h.b.bool,h.b.string.isRequired,{className:"",buttons:void 0,featureChannelHeaderLabels:!1}),OI=function(e){var t=e.title,n=e.buttons,a=e.isChannelAvailable,r=e.className,i=e.featureChannelHeaderLabels,o=f()(r,"p-classic_nav__model_header",{"p-classic_nav__model__title__name__unavailable__channel":!a}),s=i?"group":void 0,l=i?yI.t("{channelName} options",{channelName:e["aria-label"],note:"Label for the Channel Header as a section. Not visible on screen as it is only for customers using screen readers."}):void 0;return m.a.createElement("div",{className:o,role:s,"aria-label":l},m.a.createElement("div",{"data-qa":"channel_header__title",className:"p-classic_nav__model__title"},t),n&&m.a.createElement("div",{"data-qa":"channel_header__buttons",className:"p-classic_nav__model__buttons p-classic_nav__no_drag"},n))};OI.displayName="ModelHeaderTemplate",OI.defaultProps=kI;var CI=OI,EI=(h.b.string.isRequired,h.b.bool.isRequired,h.b.bool.isRequired,h.b.string,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.bool.isRequired,h.b.string,{className:"",isBiInviteModalEnabled:!1,canInviteToChannel:!1,useTabsHeaderVariant:!1,featureChannelActionsClient:!1,renderDisplayInviteButton:!1,channelName:void 0}),jI=function(e){var t=e.channelId,n=e.isUnknown,a=e.isChannelAvailable,r=e.className,i=e.useTabsHeaderVariant,o=e.featureChannelActionsClient,s=e.featureChannelHeaderLabels,l=e.isBiInviteModalEnabled,c=e.canInviteToChannel,u=e.renderDisplayInviteButton,d=e.channelName;if(n)return m.a.createElement("div",{className:r});var h=f()(r,{"p-classic_nav__model_header--tabs_header":i}),b=l&&c&&u;return m.a.createElement(CI,{className:h,isChannelAvailable:a,title:m.a.createElement(p.Fragment,null,i&&m.a.createElement(dE,{channelId:t}),m.a.createElement(Sj,{channelId:t}),i&&m.a.createElement(xj,{channelId:t}),a&&m.a.createElement(yS,{channelId:t})),buttons:a&&m.a.createElement(p.Fragment,null,b&&m.a.createElement(ES,{channelId:t}),o&&m.a.createElement(ZS,{channelId:t}),m.a.createElement(aI,{channelId:t}),m.a.createElement(sI,{channelId:t}),m.a.createElement(vI,{channelId:t})),"aria-label":d,featureChannelHeaderLabels:s})};jI.displayName="ModelHeader",jI.defaultProps=EI;var SI=Object(g.b)(function(e){var t=Object(E.a)(e),n=Object(G.e)(e,t),a=Object(Bb.K)(e,t),r=Object(K.x)(e,n,{publicChannelIncludeHashSign:!1});return{channelId:t,isUnknown:!n,isChannelAvailable:!Object(K.Lb)(e,n),canInviteToChannel:a,useTabsHeaderVariant:Object(j.f)(e),isBiInviteModalEnabled:Object(aC.c)(e),featureChannelActionsClient:Object(y.m)(e,"feature_channel_actions_client"),renderDisplayInviteButton:Object(aC.e)(e),featureChannelHeaderLabels:Object(y.m)(e,"feature_channel_header_labels"),channelName:r}})(jI),II=function(e,t){return Object(ia.g)(e)&&Object(K.kb)(e,t)},wI=n("GbYP"),NI=new B.b("app_space"),TI="messages",AI="about",RI=(h.b.string.isRequired,h.b.string,h.b.func,{currentTab:TI,setAppSpaceOpen:void 0}),PI=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.switchTab=n.switchTab.bind(n),n}return u()(t,e),o()(t,[{key:"switchTab",value:function(e){this.props.setAppSpaceOpen(e===AI)}},{key:"render",value:function(){var e=this.props.currentTab,t=[{title:NI.t("Messages"),id:TI,content:m.a.createElement(p.Fragment,null),"data-qa":"messages"},{title:NI.t("About"),id:AI,content:m.a.createElement(p.Fragment,null),"data-qa":"about"}];return m.a.createElement("div",{className:"p-classic_nav__model__title__name__tabs"},m.a.createElement(wI.a,{defaultTabId:e,tabs:t,onTabChange:this.switchTab}))}}]),t}(p.Component);PI.displayName="ModelInfoAppIm",PI.defaultProps=RI;var MI=Object(g.b)(function(e){return{currentTab:Object(F.p)(e)?AI:TI}},function(e){return Object(Eg.b)({setAppSpaceOpen:cj.g},e)})(PI),xI=n("ukeO"),FI=(h.b.string,h.b.string.isRequired,h.b.string.isRequired,h.b.object,h.b.bool.isRequired,h.b.bool.isRequired,h.b.bool,h.b.string.isRequired,{className:"",appObj:void 0,isAppHomeTabsEnabled:!1}),LI=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"renderHeader",value:function(e,t){var n=this.props,a=n.channelId,r=n.memberId,i=n.isChannelAvailable;return m.a.createElement(p.Fragment,null,i&&m.a.createElement(xj,{channelId:a,key:"star",omitSeparator:!0}),m.a.createElement(Dv.a,{id:r,className:e}),t)}},{key:"renderAppHomeHeader",value:function(e,t){var n=this.props,a=n.channelId,r=n.memberId,i=n.isChannelAvailable,o=n.appObj;return m.a.createElement(p.Fragment,null,m.a.createElement(xI.a,{size:36,ariaHidden:!0,image:o?Object(xg.b)(o,72):null}),m.a.createElement("div",{className:"p-classic_nav_name_star","data-qa":"new_style_header"},m.a.createElement(Dv.a,{id:r,className:"p-classic_nav_member_name"}),i&&m.a.createElement(xj,{channelId:a,key:"star",omitSeparator:!0}),t))}},{key:"render",value:function(){var e=this.props,t=e.channelId,n=e.isChannelAvailable,a=e.isMuted,r=e.className,i=e.isAppHomeTabsEnabled,o=e.appName,s=n?"padding_left_50":"",l=a?m.a.createElement(NE,{channelId:t}):null,c=f()("p-classic_nav__no_drag","p-classic_nav__model__title__name",{"p-classic_nav__model__title__name--dim":a});return m.a.createElement(CI,{className:f()(r,{"p-classic_app_home_header":i}),isChannelAvailable:n,title:m.a.createElement(p.Fragment,null,m.a.createElement("div",{className:c},i?this.renderAppHomeHeader(s,l):this.renderHeader(s,l)),m.a.createElement("div",{className:"p-classic_nav__model__title__info p-classic_nav__no_drag"},!i&&m.a.createElement(MI,{channelId:t}))),buttons:n&&m.a.createElement(p.Fragment,null,m.a.createElement(sI,{channelId:t}),m.a.createElement(vI,{channelId:t})),"aria-label":o})}}]),t}(p.Component);LI.displayName="AppImHeader",LI.defaultProps=FI;var DI=Object(g.b)(function(e){var t=Object(E.a)(e),n=Object(G.e)(e,t),a=Object(y.m)(e,"feature_all_dm_mute_bots")&&Object(Ad.c)(e,t),r=Object(S.a)(e),i=II(e,t),o=Object(C.b)(e).appId,s=Object(uI.b)(e,t),l=Object(cI.m)(s);return{channelId:t,memberId:Object(K.H)(n)||void 0,isChannelAvailable:!Object(K.Lb)(e,n),appObj:i&&r&&o?Object(ia.e)(e,o):void 0,isMuted:a,isAppHomeTabsEnabled:r,appName:l}})(LI),UI=(h.b.object,h.b.string,{className:"",appObj:void 0}),BI=function(e){var t=e.appObj,n=e.className,a=f()("p-classic_nav__no_drag","p-classic_nav__model__title__name");return m.a.createElement(CI,{className:f()(n,"p-classic_app_home_header"),isChannelAvailable:!0,title:t?m.a.createElement(p.Fragment,null,m.a.createElement("div",{className:a},m.a.createElement(p.Fragment,null,m.a.createElement(xI.a,{size:36,ariaHidden:!0,image:t?Object(xg.b)(t,72):null}),m.a.createElement("div",{className:"p-classic_nav_name_star","data-qa":"new_style_header"},m.a.createElement("p",{className:"p-classic_nav_member_name padding_left_50"},t&&t.name))))):null,"aria-label":t&&t.name})};BI.displayName="UTAHeader",BI.defaultProps=UI;var qI=Object(g.b)(function(e){return{appObj:Object(ia.e)(e,Object(E.a)(e))}})(BI),HI=n("r5Q4"),WI=new B.b("classic_nav"),GI=(h.b.number,h.b.string,h.b.bool,{totalUnreadReplies:void 0,className:void 0,featureClassicNav:!1}),KI=function(e){var t=e.totalUnreadReplies,n=e.className;if(!e.featureClassicNav)return null;var a=f()("p-classic_nav__channel_header__title","p-classic_nav__no_drag"),r=null;return Object(mt.a)(t)&&(r=WI.t("{totalUnreadReplies, plural, =0 {No new replies} =1 {# new reply} other {# new replies}}",{totalUnreadReplies:t})),m.a.createElement("div",{className:n},m.a.createElement("span",{className:a},WI.t("Threads")),m.a.createElement("div",{className:"p-classic_nav__channel_header__subtitle"},r))};KI.displayName="AllThreadsHeader",KI.defaultProps=GI;var VI=Object(g.b)(function(e){return{totalUnreadReplies:Object(HI.j)(e),featureClassicNav:Object(y.m)(e,"feature_classic_nav")}})(KI),zI=(h.b.string.isRequired,h.b.string,h.b.bool,{className:void 0,legacy:!1}),YI=function(e){var t=e.id,n=e.className,a=e.legacy;if(!t)return null;var r=Sk(t);if(r.header)return r.header({className:n});var i=f()("p-classic_nav__page_header",{"p-classic_nav__page_header--legacy":a},n);return m.a.createElement("div",{className:i},m.a.createElement("div",{className:"p-classic_nav__channel_header__title"},r.label()),m.a.createElement(Eh,{regionId:"main",flex:!0}))};YI.displayName="PageHeader",YI.defaultProps=zI;var QI=YI,XI=n("5tH5"),JI=n("+Sjy"),ZI="EMPTY",$I="ALL_THREADS",ew="ALL_UNREADS",tw="PAGE",nw="APP_IM",aw="UTA_HOME",rw="DEFAULT",iw=[{type:ZI,isShowing:function(e){return!e}},{type:$I,isShowing:function(e){return e===XI.a.allThreads}},{type:ew,isShowing:function(e){return e===XI.a.allUnreads}},{type:tw,isShowing:function(e,t){return Object(JI.e)(t,e)}},{type:nw,isShowing:function(e,t){return II(t,e)&&!Object(j.f)(t)}},{type:aw,isShowing:function(e,t){return Object(O.a)(e)&&Object(C.c)(t)}}],ow=function(e){var t=Object(E.a)(e),n=iw.find(function(n){return n.isShowing(t,e)});return n?n.type:rw},sw=(n("c7HH"),h.b.string,h.b.string,h.b.bool,function(e){var t=e.primaryView,n=e.headerType,a=e.isWindowFrameless,r=f()({"p-classic_nav__channel_header":!0,"p-classic_nav__channel_header--frameless":a,"p-classic_nav__drag":a});switch(n){case ZI:return m.a.createElement("div",{className:r});case $I:return m.a.createElement(VI,{className:r});case ew:return m.a.createElement(Nh,{className:r});case tw:return m.a.createElement(QI,{id:t,className:r});case nw:return m.a.createElement(DI,{className:r});case aw:return m.a.createElement(qI,{className:r});default:return m.a.createElement(SI,{className:r})}});sw.defaultProps={primaryView:void 0,headerType:void 0,isWindowFrameless:!1};var lw=Object(g.b)(function(e){return{primaryView:Object(E.a)(e),headerType:ow(e),isWindowFrameless:Object(P.l)(e)}})(sw),cw=n("5dgH"),uw=n("m5Fn"),dw=(n("4F1B"),new B.b("app_launcher")),pw=(h.b.bool,h.b.object.isRequired,h.b.string,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderMenu=n.renderMenu.bind(n),n.clogAppDirectory=n.clogAppDirectory.bind(n),n}return u()(t,e),o()(t,[{key:"clogAppDirectory",value:function(){this.props.clogger.track("CLASSIC_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"CHANNEL_HEADER",ui_element:"LINK_APP_DIRECTORY"}}})}},{key:"renderMenu",value:function(){var e=this,t=[{label:dw.t("Manage Apps",{fallbackHash:"5b7111cdde14815bb325dae16d169cfdefda6165"}),key:"manageApps",href:this.props.teamUrl+"apps/manage",dataQa:"app_launcher_header__manage_apps_link",click:function(){e.props.clogger.track("CLASSIC_NAV",{contexts:{ui_context:{action:"CLICK",ui_element:"LINK_MANAGE_APPS"}}})}}];return m.a.createElement(na.a,{template:t,stripTerminalSeparators:!0,"data-qa":"app_launcher_menu"})}},{key:"render",value:function(){if(!this.props.featureAppLauncher)return null;var e=f()("p-classic_nav__right__button","p-classic_nav__no_drag");return m.a.createElement("div",{className:"p-app_launcher_actions"},m.a.createElement(la.a,{href:this.props.teamUrl+"apps",className:"p-app_launcher_actions__link",onClick:this.clogAppDirectory,"data-qa":"app_launcher_header__more_apps_link"},dw.t("Get more apps")),m.a.createElement(na.e,{position:"bottom-right",renderMenu:this.renderMenu,allowanceX:8},m.a.createElement(qi.c,{tip:dw.t("App Menu"),position:"bottom-right"},m.a.createElement(_e.c,{className:e,"aria-label":dw.t("App Menu"),"data-qa":"app_launcher_menu_trigger"},m.a.createElement(ta.b,{type:"cog-o"})))))}}]),t}(p.Component));pw.displayName="AppLauncherActions",pw.defaultProps={featureAppLauncher:!1,teamUrl:"my"};var mw=Object(g.b)(function(e){return{featureAppLauncher:Object(jg.a)(e),teamUrl:Object(De.o)(Object(we.d)(e)),clogger:Object(re.a)({state:e})}})(pw),hw=n("Go8C"),bw=n("7ARk"),fw=n("fdJE"),gw=new B.b("search"),_w=(h.b.string,h.b.bool,h.b.bool,h.b.bool,h.b.string,h.b.bool,h.b.oneOf(["dark","light"]),h.b.object.isRequired,h.b.func,h.b.func,{query:void 0,featureClassicNav:!1,featureComposeFlow:!1,isIAP1Enabled:!1,plainTextQuery:void 0,showKeyboardShortcut:!1,clientTheme:"light",openFromClick:d.a,clearSearchInput:d.a}),vw=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n.onMouseDown=n.onMouseDown.bind(n),n.onClearClick=n.onClearClick.bind(n),n}return u()(t,e),o()(t,[{key:"onClick",value:function(){this.props.openFromClick(),this.props.clogger.track("CLASSIC_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"CHANNEL_HEADER",ui_element:"NAV_SEARCH"}}})}},{key:"onMouseDown",value:function(e){2===e.nativeEvent.which&&(this.props.openFromClick(),this.props.clogger.track("CLASSIC_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"CHANNEL_HEADER",ui_element:"NAV_SEARCH"}}}))}},{key:"onClearClick",value:function(e){e.stopPropagation(),this.props.clearSearchInput()}},{key:"renderQueryText",value:function(){var e=this.props.query;return m.a.createElement(pg.a,{text:e,customLineEnding:" ",showTooltips:!1,noLinking:!0,noSpecials:!0,noHighlights:!0,noJumbomoji:!0})}},{key:"renderSmallButton",value:function(){var e=this,t=this.props,n=t.query,a=t.plainTextQuery,r=t.showKeyboardShortcut;if(!t.featureClassicNav)return null;var i=f()({"p-classic_nav__right__button":!0,"p-classic_nav__right__button--search_small":!0,"p-classic_nav__no_drag":!0}),o=r&&m.a.createElement("div",{className:"c-tooltip__tip_shortcut"},Object(ce.p)()?"\u2318G":"Ctrl+G");return m.a.createElement(p.Fragment,null,m.a.createElement("div",{className:"p-classic_nav__search_small_divider"}),m.a.createElement(qi.c,{position:"bottom",tip:function(){return n?gw.rt("Search: {query}",{query:e.renderQueryText()}):m.a.createElement(p.Fragment,null,gw.t("Search"),o)}},m.a.createElement(_e.c,{className:i,onClick:this.onClick,"data-qa":"legacy_search_header","aria-label":n?gw.t("Search: {query}",{query:a}):gw.t("Search")},m.a.createElement(ta.b,{type:"search"}))))}},{key:"render",value:function(){var e=this.props,t=e.query,n=e.plainTextQuery,a=e.featureClassicNav,r=e.clientTheme,i=e.featureComposeFlow,o=e.isIAP1Enabled;if(!a)return null;var s=t?m.a.createElement(p.Fragment,null,m.a.createElement(_e.c,{className:"p-classic_nav__right__search__text","aria-label":gw.t("Search: {query}",{query:n})},this.renderQueryText()),m.a.createElement(_e.c,{className:"p-classic_nav__right__search__clear",onClick:this.onClearClick,"aria-label":gw.t("Clear search field")},m.a.createElement(ta.b,{type:"times-small",inline:!0}))):m.a.createElement("span",{className:"p-classic_nav__right__search__placeholder"},gw.t("Search")),l=t?"div":_e.c;return m.a.createElement(p.Fragment,null,m.a.createElement(l,{className:f()("p-classic_nav__right__search","p-classic_nav__no_drag",fe()({},"p-classic_nav__right__search--"+r,"light"!==r)),onClick:this.onClick,onMouseDown:this.onMouseDown,"aria-label":gw.t("Search"),"data-qa":"legacy_search_header"},m.a.createElement(ta.b,{className:"p-classic_nav__right__search__icon",type:"search",size:"inherit",inline:!0}),s),this.renderSmallButton(),!o&&!i&&m.a.createElement(uw.a,null))}}]),t}(p.Component);vw.displayName="SearchInput",vw.defaultProps=_w;var yw=Object(g.b)(function(e){var t=Object(hw.b)(e),n=br.Q||Object(Zt.j)(e,"f_key_search");return{query:t,featureClassicNav:Object(y.m)(e,"feature_classic_nav"),featureComposeFlow:Object(T.g)(e),isIAP1Enabled:Object(pE.b)(e),plainTextQuery:t?Object(fw.a)(e,t):void 0,showKeyboardShortcut:n,clientTheme:Object(D.c)(e),clogger:Object(re.a)({state:e})}},function(e){return{openFromClick:function(){return e(ry.a.apply(void 0,arguments))},clearSearchInput:function(){return e(bw.a.apply(void 0,arguments))}}})(vw),kw=n("Vs2R"),Ow=n("TOkS"),Cw=new B.b("classic_nav"),Ew=(h.b.string,h.b.string,h.b.bool,h.b.bool,h.b.objectOf(h.b.bool),h.b.string.isRequired,h.b.string.isRequired,{userName:void 0,channelName:void 0,isDirectMessage:!1,otherUsers:void 0,featureClassicNav:!1}),jw=function(e){var t=e.userName,n=e.channelName,a=e.isDirectMessage,r=e.otherUsers;if(!e.featureClassicNav)return null;var i=Object(Tc.a)(r),o=0===i?t:Cw.t("{userName} and {numOthers,plural,=1{# other}other{# others}}",{userName:t,numOthers:i}),s=a?Cw.t("Direct Message"):n;return m.a.createElement(p.Fragment,null,o,m.a.createElement("span",{className:"p-classic_nav__tip_sub"},s))};jw.displayName="ActivityToastTip",jw.defaultProps=Ew;var Sw=Object(g.b)(function(e,t){var n=t.userId,a=t.channelId,r=Object(G.e)(e,a),i=Object(K.x)(e,r);return{userName:Object(eo.W)(e,n),channelName:i,isDirectMessage:Object(K.hb)(r),featureClassicNav:Object(y.m)(e,"feature_classic_nav")}})(jw),Iw=new B.b("classic_nav"),ww=(h.b.shape({key:h.b.string.isRequired,emoji:h.b.string.isRequired,userId:h.b.string.isRequired,channelId:h.b.string.isRequired,otherUsers:h.b.objectOf(h.b.bool)}),h.b.bool,h.b.bool,h.b.bool,h.b.func,h.b.func,h.b.object.isRequired,h.b.object.isRequired,{currentToast:void 0,isActive:!1,stopAnimations:!1,featureClassicNav:!1,toggleActivityFlexpane:d.a,shiftToast:d.a}),Nw=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n.onKeyDown=n.onKeyDown.bind(n),n.state={waiting:!1},n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.currentToast&&this.props.currentToast.emoji&&this.startToastTimer()}},{key:"componentDidUpdate",value:function(e,t){var n=e.currentToast&&e.currentToast.emoji,a=this.props.currentToast&&this.props.currentToast.emoji;a&&a!==n&&this.startToastTimer(),this.state.waiting&&!t.waiting&&this.startWaitTimer()}},{key:"componentWillUnmount",value:function(){this.props.shiftToast(),this.toastTimer&&clearTimeout(this.toastTimer),this.waitTimer&&clearTimeout(this.waitTimer)}},{key:"onClick",value:function(){this.props.toggleActivityFlexpane(),this.props.clogger.track("CLASSIC_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"CHANNEL_HEADER",ui_element:"NAV_FLEX_ACTIVITY"}}})}},{key:"onKeyDown",value:function(e){e.keyCode===Lj.e&&(e.preventDefault(),this.props.toggleActivityFlexpane({focusKey:"activity"}))}},{key:"startToastTimer",value:function(){var e=this,t=this.props.logger;t.info("REACTIONS_TOAST","Got next reaction, toasting"),this.toastTimer=setTimeout(function(){t.debug("REACTIONS_TOAST","Toasting done, starting wait period"),e.setState(function(e){return ye()({},e,{waiting:!0})})},3e3)}},{key:"startWaitTimer",value:function(){var e=this,t=this.props.logger;t.debug("REACTIONS_TOAST","Entering wait period"),this.waitTimer=setTimeout(function(){t.debug("REACTIONS_TOAST","Wait period done, shifting toast"),e.setState(function(e){return ye()({},e,{waiting:!1})}),e.props.shiftToast()},400)}},{key:"shouldShowToast",value:function(){return this.props.currentToast&&!this.state.waiting}},{key:"renderTipText",value:function(){return this.props.isActive?Iw.t("Hide Activity"):Iw.t("Show Activity")}},{key:"renderTip",value:function(){var e=this.props,t=e.currentToast;if(!e.featureClassicNav)return null;if(this.shouldShowToast())return m.a.createElement(Sw,t);var n=this.renderTipText(),a=!(UO.a.chrome&&!br.Q)&&m.a.createElement("div",{className:"c-tooltip__tip_shortcut"},Object(ce.p)()?"\u2318\u21e7M":"Ctrl+Shift+M");return m.a.createElement(p.Fragment,null,n,a)}},{key:"render",value:function(){var e=this.props,t=e.currentToast,n=e.isActive,a=e.stopAnimations,r=this.shouldShowToast()&&m.a.createElement(Gs.b,{text:":"+t.emoji+":",emojiSize:Gs.a.LARGE,className:"p-classic_nav__right__activity__toast"}),i=this.renderTip(),o=f()("p-classic_nav__right__activity__container",{"p-classic_nav__right__activity__container--no_animation":a}),s=f()({"p-classic_nav__right__button":!0,"p-classic_nav__right__button--activity":!0,"p-classic_nav__right__button--active":n,"p-classic_nav__right__activity":!0,"p-classic_nav__right__activity--toasting":this.shouldShowToast(),"p-classic_nav__no_drag":!0}),l=Iw.t("Show Activity");return m.a.createElement("div",{className:o},m.a.createElement(qi.c,{position:"bottom-right",tip:i,hideFromScreenReader:!0},m.a.createElement(_e.c,{className:s,onClick:this.onClick,"aria-label":l,"aria-expanded":n,onKeyDown:this.onKeyDown},m.a.createElement(ta.b,{type:"mentions",className:"p-classic_nav__right__activity__icon"}))),r)}}]),t}(p.Component);Nw.displayName="BaseActivityButton",Nw.defaultProps=ww;var Tw=Object(g.b)(function(e){return{isActive:"activity"===Object(A.j)(e),featureClassicNav:Object(y.m)(e,"feature_classic_nav"),stopAnimations:!Object(Zt.j)(e,"a11y_animations"),logger:Object(Ct.a)({state:e}),clogger:Object(re.a)({state:e})}},function(e){return{toggleActivityFlexpane:function(){return e(jn.q.apply(void 0,arguments))},shiftToast:function(){return e(kw.e.apply(void 0,arguments))}}})(Nw),Aw=(h.b.string.isRequired,function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"renderButton",value:function(e){var t=Object(kw.c)(e);return m.a.createElement(Tw,{currentToast:t})}},{key:"render",value:function(){var e=Object(_.getStoreInstanceByTeamId)(this.props.teamId);return m.a.createElement(Ow.a,{store:e,render:this.renderButton})}}]),t}(p.Component));Aw.displayName="ActivityButton";var Rw=Object(g.b)(function(e){return{teamId:Object(v.b)(e)}})(Aw),Pw=new B.b("classic_nav"),Mw=(h.b.bool,h.b.object.isRequired,h.b.func,h.b.func,{isActive:!1,showStarredItemsList:d.a,closeFlexpane:d.a}),xw=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n.onKeyDown=n.onKeyDown.bind(n),n}return u()(t,e),o()(t,[{key:"onClick",value:function(){this.showDetails(),this.props.clogger.track("CLASSIC_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"CHANNEL_HEADER",ui_element:"NAV_FLEX_STARS"}}})}},{key:"onKeyDown",value:function(e){e.keyCode===Lj.e&&(e.preventDefault(),this.showDetails({focusKey:"stars"}))}},{key:"showDetails",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).focusKey,t=void 0===e?null:e;this.props.isActive?this.props.closeFlexpane():this.props.showStarredItemsList({focusKey:t})}},{key:"render",value:function(){var e=this.props.isActive,t=e?Pw.t("Hide Starred Items"):Pw.t("Show Starred Items"),n=Pw.t("Show Starred Items"),a=m.a.createElement(p.Fragment,null,t,m.a.createElement("div",{className:"c-tooltip__tip_shortcut"},Object(ce.p)()?"\u2318\u21e7S":"Ctrl+Shift+S")),r=f()({"p-classic_nav__right__button":!0,"p-classic_nav__right__button--stars":!0,"p-classic_nav__right__button--active":e,"p-classic_nav__no_drag":!0});return m.a.createElement(qi.c,{position:"bottom-right",tip:a,hideFromScreenReader:!0},m.a.createElement(_e.c,{className:r,onClick:this.onClick,"aria-label":n,"aria-expanded":e,onKeyDown:this.onKeyDown},m.a.createElement(ta.b,{type:"star-o"})))}}]),t}(p.Component);xw.displayName="StarsButton",xw.defaultProps=Mw;var Fw=Object(g.b)(function(e){return{isActive:"starred_items"===Object(A.j)(e),clogger:Object(re.a)({state:e})}},function(e){return{showStarredItemsList:function(){return e(jn.k.apply(void 0,arguments))},closeFlexpane:function(){return e(jn.a.apply(void 0,arguments))}}})(xw),Lw=n("qcAq"),Dw=n("qSXi"),Uw=n("HYPA"),Bw=n("/X+W"),qw=n("rtjy"),Hw=function(e){return{id:e.frecencyId,action:e}},Ww=Object(gt.b)("Search global actions (shortcuts) in Redux store",function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).query,a=void 0===n?"":n,r=t(),i=Object(Uw.b)(r).actions,o=[].concat(ti()(i.map(Dw.a)));return o=o.filter(function(e){return Object(Dw.b)(e,Object(Bw.a)(a))}),o=(o=Object(qw.e)(r,{query:a,list:o.map(Hw)})).map(function(e){return e.action})});Ww.meta={name:"searchLocalGlobalActions",key:"actionsSearchShortcutsSearchLocalGlobalActions",description:"Search global actions (shortcuts) in Redux store"},Ww.propTypes={query:h.b.string};var Gw=Object(gt.b)("Search shortcuts, returns as Promise",function(e,t,n){var a=e(Ww(n));return Promise.resolve(a)});Gw.meta={name:"searchShortcuts",key:"actionsSearchShortcutsSearchShortcuts",description:"Search shortcuts, returns as Promise"},Gw.propTypes=Ww.propTypes;var Kw=Gw,Vw=n("2/vs"),zw=n("cTBa"),Yw=n("Rrdp"),Qw=(Hd.a.MessageAction.isRequired,h.b.string,h.b.string,Hd.a.maybeUnknown(Hd.a.App),h.b.string.isRequired,{className:"",pillarClassName:"",app:void 0}),Xw=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["renderEnter","renderIcon","renderIconMaybe"]),n}return u()(t,e),o()(t,[{key:"renderIcon",value:function(){var e=this.props,t=e.action,n=e.app,a=e.defaultAppIcon,r=n&&n.icons||t.iconSet;if(r){var i=Object(xg.b)({icons:r},56,a);return m.a.createElement("img",{alt:"",className:"p-shortcuts__icon",src:i})}return t.iconType?m.a.createElement(ta.b,{type:t.iconType}):null}},{key:"renderIconMaybe",value:function(e){return e?m.a.createElement("div",{className:"c-menu_item__icon","data-qa":"menu_item_icon",role:"presentation"},e):null}},{key:"renderEnter",value:function(){var e=this.props,t=e.className,n=e.pillarClassName,a=f()(t,"c-menu_item__enter",fe()({},n+"__enter",n));return m.a.createElement(ta.a,{type:"enter",className:a,"data-qa":"menu_item_enter",role:"presentation"})}},{key:"render",value:function(){var e,t=this.props,n=t.action,a=t.app,r=t.className,i=t.pillarClassName,o=f()(r,"c-menu_item__button","c-button-unstyled",(e={"c-menu_item__button--danger":n.danger},fe()(e,""+i,i),fe()(e,i+"--danger",n.danger&&i),e)),s=a&&a.name||n.description;return!s&&a&&(s=m.a.createElement(Yw.a,{type:Object(Ub.d)(a)?"unknown":"non-existent"})),m.a.createElement("div",{className:"c-menu_item__li",role:"presentation"},m.a.createElement("div",{className:o,"data-qa":n["data-qa"],key:n.id,id:n.id},this.renderIconMaybe(this.renderIcon()),m.a.createElement("div",{className:"c-menu_item__label",role:"presentation"},n.label||n.name,m.a.createElement("div",{className:"c-menu_item__description"},s)),this.renderEnter()))}}]),t}(p.PureComponent);Xw.displayName="ShortcutsDialogItem",Xw.defaultProps=Qw;var Jw=Object(g.b)(function(e,t){var n=t.action;return{app:n&&n.appId&&Object(ia.e)(e,n.appId),defaultAppIcon:Object(ia.f)(e)}})(Xw),Zw=(n("N391"),new B.b("shortcuts")),$w=(h.b.func,h.b.func.isRequired,h.b.func.isRequired,h.b.func.isRequired,h.b.func.isRequired,h.b.bool.isRequired,{onClose:d.a}),eN=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={filterQuery:"",isLoading:!0,isError:!1,actions:[]},n.initClogged=!1,Object(Kt.a)(n,["onFilterUpdate","onSelectAction","renderSingleAction","handleSelectEvent","searchShortcuts"]),n.searchShortcutsDebounced=Object(Gt.a)(n.searchShortcuts,200,{leading:!0}),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.searchShortcutsDebounced()}},{key:"componentDidUpdate",value:function(){this.initClogged||this.state.isLoading||this.state.isError||(this.initClogged=!0)}},{key:"componentWillUnmount",value:function(){this.activePromise&&delete this.activePromise}},{key:"onSelectAction",value:function(e,t){var n=this.props,a=n.closeModal,r=n.handleShortcut;a(),this.props.onClose&&this.props.onClose(e),r(t),this.props.recordShortcutFrecencyEvent({action:t,query:this.state.filterQuery})}},{key:"onFilterUpdate",value:function(e){this.setState(function(){return{filterQuery:e}},this.searchShortcutsDebounced)}},{key:"searchShortcuts",value:function(){var e=this,t=this.props.searchShortcuts({query:this.state.filterQuery}).then(function(n){e.activePromise===t&&e.setState(function(){return{actions:n,isError:!1,isLoading:!1}})}).catch(function(){e.setState(function(){return{isError:!0,isLoading:!1}})});this.activePromise=t}},{key:"handleSelectEvent",value:function(e,t,n){this.onSelectAction(n,t.props.action)}},{key:"renderTitle",value:function(e){return m.a.createElement("div",{className:"p-shortcuts_dialog__title","data-qa-shortcuts-dialog-title":!0},m.a.createElement("div",{className:"p-shortcuts_dialog__title_text"},e))}},{key:"renderLoading",value:function(){return m.a.createElement("div",{className:"p-shortcuts_dialog__loader"},m.a.createElement(ci.a,null))}},{key:"renderSingleAction",value:function(e){return{label:m.a.createElement(Jw,{key:e.id,pillarClassName:"p-shortcuts_dialog_option",action:e}),value:e.id}}},{key:"renderSelect",value:function(){if(!this.props.featureAppActionsGlobal)return null;var e=Zw.t("Search shortcuts");return m.a.createElement(zw.b,{"data-qa":"shortcuts-dialog-list",isAlwaysOpen:!0,usePlaceholderOption:!1,autoSelectFirstOption:!0,focusInputOnMount:!0,placeholder:e,icon:"search",id:"p-shortcuts_dialog__select",className:"p-shortcuts_dialog__select",pillarClassName:"p-shortcuts_dialog",onChange:this.handleSelectEvent,onFilterInputChange:this.onFilterUpdate,options:Object(ft.a)(this.state.actions,this.renderSingleAction),optionsRowHeight:64})}},{key:"render",value:function(){var e=this.state.isLoading;if(!this.props.featureAppActionsGlobal)return null;var t=Zw.t("Build your own!"),n=Zw.t("Use a shortcut");return m.a.createElement(nn.b,{contentLabel:n,className:"p-shortcuts_dialog",overlayClassName:"p-shortcuts_dialog__overlay",footerIcon:"external-link",footerLink:"/workflow-builder",footerText:t,goOnEnterPressed:!1,onCancel:this.props.onClose,showCloseButton:!1,showCancelButton:!1,showGoButton:!1,title:this.renderTitle(n),ariaContent:{describedby:"p-app_actions_pillow__body"},useSlackScrollbar:!1},e?this.renderLoading():this.renderSelect())}}]),t}(p.PureComponent);eN.displayName="ShortcutsDialog",eN.defaultProps=$w;var tN=Object(g.b)(function(e){return{clogger:Object(re.a)({state:e}),featureAppActionsGlobal:Object(y.m)(e,"feature_app_actions_global")}},function(e){return{closeModal:function(){return e(Object(tn.a)())},searchShortcuts:function(){return e(Kw.apply(void 0,arguments))},recordShortcutFrecencyEvent:function(t){return e(Object(Lw.a)(t))},handleShortcut:function(t){return e(Object(Vw.b)({actionId:t.id,appId:t.appId}))}}})(eN),nN=Object(gt.b)("Open app shortcuts dialog",function(e){var t=m.a.createElement(tN);e(Object(tn.e)({element:t}))});nN.meta={name:"browseShortcuts",key:"actionsBrowseShortcutsBrowseShortcuts",description:"Open app shortcuts dialog"};var aN=nN,rN=new B.b("classic_nav"),iN=(h.b.bool,h.b.bool,h.b.func,{featureClassicNav:!1,featureAppActionsGlobal:!1,browseShortcuts:d.a}),oN=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return u()(t,e),o()(t,[{key:"onClick",value:function(){this.props.browseShortcuts()}},{key:"render",value:function(){var e=this.props,t=e.featureClassicNav,n=e.featureAppActionsGlobal;if(!t||!n)return null;var a=rN.t("Show Shortcuts"),r=f()("p-classic_nav__right__button","p-classic_nav__right__button--shortcuts","p-classic_nav__no_drag");return m.a.createElement(qi.c,{position:"bottom-right",tip:a},m.a.createElement(_e.c,{className:r,onClick:this.onClick},m.a.createElement(ta.b,{type:"rocket"})))}}]),t}(p.Component);oN.displayName="ShortcutsButton",oN.defaultProps=iN;var sN=Object(g.b)(function(e){return{featureClassicNav:Object(y.m)(e,"feature_classic_nav"),featureAppActionsGlobal:Object(y.m)(e,"feature_app_actions_global")}},function(e){return{browseShortcuts:function(){return e(aN.apply(void 0,arguments))}}})(oN),lN=n("M1FR"),cN=new B.b("classic_nav"),uN=(h.b.object.isRequired,h.b.string,h.b.bool,h.b.bool,h.b.bool,h.b.number,h.b.number,h.b.bool,h.b.bool,h.b.object.isRequired,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.string,{currentUserId:void 0,isEnterprise:!1,isUserRestricted:!1,isPaid:!1,helpTicketsCount:0,whatsNewCount:0,featureClassicNav:!1,featureCalendarSimpleAgendaView:!1,showFileList:d.a,showDownloads:d.a,showMemberDirectory:d.a,showUserGroupList:d.a,showWhatsNew:d.a,showKeyboardShortcuts:d.a,openHelpModal:d.a,showUserCalendar:d.a,keyboardLocale:null}),dN=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onMenuItemSelected=n.onMenuItemSelected.bind(n),n}return u()(t,e),o()(t,[{key:"onMenuItemSelected",value:function(e,t){var n=this.props,a=n.menuProps,r=n.clogger;a&&a.onMenuItemSelected&&a.onMenuItemSelected(e,t);var i=this.items&&this.items[e];i&&i.key&&r.track("CLASSIC_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"CHANNEL_HEADER",ui_element:"NAV_FLEX_MENU_ITEM"}},label:i.key})}},{key:"render",value:function(){var e=this,t=this.props,n=t.menuProps,a=t.currentUserId,r=t.isEnterprise,i=t.isUserRestricted,o=t.isPaid,s=t.helpTicketsCount,l=t.whatsNewCount,c=t.featureClassicNav,u=t.featureCalendarSimpleAgendaView,d=t.keyboardLocale;if(!c)return null;var p=Object(B.i)("/",{kb:d}),h=[{key:"calendar",label:cN.t("Your calendar"),icon:m.a.createElement(ta.b,{type:"all-files-alt"}),click:this.props.showUserCalendar,show:u},{key:"files",label:cN.t("Files"),icon:m.a.createElement(ta.b,{type:"all-files-alt"}),click:function(t){return e.props.showFileList({focusKey:t&&"keydown"===t.type?"files":null,user:a})},show:!0},{key:"downloads",label:cN.t("Downloads"),icon:m.a.createElement(ta.b,{type:"cloud-download"}),click:function(t){return e.props.showDownloads({focusKey:t&&"keydown"===t.type?"downloads":null})},show:br.Q},{type:"separator",show:!0},{key:"team-directory",label:r?cN.t("Organization Directory"):cN.t("Workspace Directory"),icon:m.a.createElement(ta.b,{type:"team-directory"}),shortcut:!UO.a.firefox&&(Object(ce.p)()?"\u2318\u21e7E":"Ctrl+Shift+E"),click:this.props.showMemberDirectory,show:!0},{key:"user-groups",label:cN.t("User Groups"),icon:m.a.createElement(ta.b,{type:"user-groups"}),click:function(){return e.props.showUserGroupList()},show:!i&&o},{type:"separator",show:!0},{key:"whats-new",label:cN.t("What\u2019s New"),icon:m.a.createElement(ta.b,{type:"emoji-celebration"}),click:function(t){return e.props.showWhatsNew({focusKey:t&&"keydown"===t.type?"whats_new":null})},show:!0,badgeCount:l,dataQa:"whats_new_menu_item"},{key:"keyboard-shortcuts",label:cN.t("Keyboard Shortcuts"),icon:m.a.createElement(ta.b,{type:"keyboard"}),shortcut:Object(ce.p)()?"\u2318"+p:"Ctrl+"+p,click:function(t){return e.props.showKeyboardShortcuts({focusKey:t&&"keydown"===t.type?"keyboard_shortcuts":null})},show:!0},{key:"help",label:cN.t("Help"),icon:m.a.createElement(ta.b,{type:"question-circle"}),click:function(){return e.props.openHelpModal({trigger:"flex_menu"})},show:!0,badgeCount:s,dataQa:"help_center_menu_item"}].filter(function(e){return e.show});return this.items=h,m.a.createElement(na.a,ye()({},n,{onMenuItemSelected:this.onMenuItemSelected,menuClassNames:"p-classic_nav__right__flexpanes_menu",template:h,stripTerminalSeparators:!0,width:Object(ce.p)()?void 0:360}))}}]),t}(p.Component);dN.displayName="FlexpanesMenu",dN.defaultProps=uN;var pN=Object(g.b)(function(e){return{currentUserId:Object(y.c)(e),isEnterprise:Object(y.q)(e),isUserRestricted:Object(eo.Gb)(Object(xo.b)(e)),isPaid:Object(De.D)(Object(we.d)(e)),helpTicketsCount:Object(lN.d)(e),whatsNewCount:Object(cw.e)(e),featureClassicNav:Object(y.m)(e,"feature_classic_nav"),featureCalendarSimpleAgendaView:Object(y.m)(e,"feature_calendar_simple_agenda_view"),clogger:Object(re.a)({state:e})}},function(e){return{showFileList:function(){return e(jn.g.apply(void 0,arguments))},showDownloads:function(){return e(jn.f.apply(void 0,arguments))},showMemberDirectory:function(){return e(jn.i.apply(void 0,arguments))},showUserGroupList:function(){return e(jn.o.apply(void 0,arguments))},showWhatsNew:function(){return e(jn.p.apply(void 0,arguments))},showKeyboardShortcuts:function(){return e(jn.h.apply(void 0,arguments))},openHelpModal:function(){return e(TO.a.apply(void 0,arguments))},showUserCalendar:function(){return e(jn.m.apply(void 0,arguments))}}})(dN),mN=Object(Bi.a)(pN),hN=new B.b("classic_nav"),bN=(h.b.number,h.b.bool,h.b.object.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderMenu=n.renderMenu.bind(n),n.onTriggerClick=n.onTriggerClick.bind(n),n}return u()(t,e),o()(t,[{key:"onTriggerClick",value:function(){this.props.clogger.track("CLASSIC_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"CHANNEL_HEADER",ui_element:"NAV_FLEX_MENU"}}})}},{key:"maybeRenderBadge",value:function(){var e=this.props.helpTicketsCount;if(!e)return null;var t=e>9?"9+":String(e);return m.a.createElement("span",{className:"p-classic_nav__right__help_count","data-qa":"help_ticket_count"},t)}},{key:"renderMenu",value:function(e){return m.a.createElement(mN,{menuProps:e})}},{key:"render",value:function(){if(!this.props.featureClassicNav)return null;var e=f()("p-classic_nav__right__button","p-classic_nav__right__button--flexpanes","p-classic_nav__no_drag",{"p-classic_nav__right__button--flexpanes-help-count":!!this.props.helpTicketsCount});return m.a.createElement(na.e,{position:"bottom-right",renderMenu:this.renderMenu,allowanceX:8,onClick:this.onTriggerClick},m.a.createElement(qi.c,{tip:hN.t("More Items"),position:"bottom-right"},m.a.createElement(_e.c,{className:e,"aria-label":hN.t("More Items")},m.a.createElement(ta.b,{type:"vertical-ellipsis"}),this.maybeRenderBadge())))}}]),t}(p.Component));bN.displayName="FlexpanesButton",bN.defaultProps={helpTicketsCount:0,featureClassicNav:!1};var fN=Object(g.b)(function(e){return{helpTicketsCount:Object(lN.d)(e),featureClassicNav:Object(y.m)(e,"feature_classic_nav"),clogger:Object(re.a)({state:e})}})(bN),gN=new B.b("whats_new"),_N=(h.b.bool.isRequired,h.b.number.isRequired,h.b.number,h.b.object.isRequired,h.b.bool.isRequired,h.b.func.isRequired,{latestNewsTimestamp:void 0}),vN=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.updateCount&&this.doClogBadge()}},{key:"componentDidUpdate",value:function(e){!e.updateCount&&this.props.updateCount&&this.doClogBadge()}},{key:"doClogBadge",value:function(){var e=this.props,t=e.clogger,n=e.latestNewsTimestamp;t.track(le.EventId.WHATSNEW_ACTION,{action:"do_badge",trigger:String(n),step:String(n)})}},{key:"renderCount",value:function(){var e=this.props.updateCount;if(e<=1)return null;var t=e>9?"9+":String(e),n=gN.t("{num_updates} Updates",{num_updates:t});return m.a.createElement(p.Fragment,null,m.a.createElement("span",{className:"p-classic_nav__right__whats_new_num_only","data-qa":"whats_new_btn_count"},t),m.a.createElement("span",{className:"p-classic_nav__right__whats_new_num_updates","data-qa":"whats_new_btn_count_full"},n))}},{key:"render",value:function(){var e=this.props,t=e.isActive,n=e.updateCount;if(!e.featureClassicNav)return null;if(!n)return null;if(t)return null;var a=gN.t("What\u2019s New");return m.a.createElement(qi.c,{position:"bottom-right",tip:a},m.a.createElement(_e.c,{className:"p-classic_nav__right__button p-classic_nav__right__whats_new",onClick:this.props.showWhatsNew,"data-qa":"whats_new_button"},m.a.createElement(ta.b,{type:"emoji-celebration"}),this.renderCount()))}}]),t}(p.PureComponent);vN.displayName="WhastNewButton",vN.defaultProps=_N;var yN=Object(g.b)(function(e){return{isActive:"whats_new"===Object(A.j)(e),featureClassicNav:Object(y.m)(e,"feature_classic_nav"),updateCount:Object(cw.e)(e),latestNewsTimestamp:Object(cw.d)(e),clogger:Object(re.a)({state:e})}},function(e){return{showWhatsNew:function(){return e(jn.p.apply(void 0,arguments))}}})(vN),kN=(n("tLal"),new B.b("classic_nav")),ON=(h.b.string,h.b.bool,h.b.number.isRequired,h.b.bool.isRequired,h.b.bool.isRequired,h.b.bool,{secondaryView:void 0,isWindowFrameless:!1,isAppLauncherView:!1}),CN=function(e){var t=e.secondaryView,n=e.isWindowFrameless,a=e.whatsNewCount,r=e.featureAppActionsGlobal,i=e.isAppLauncherView,o=e.featureChannelHeaderLabels,s=f()({"p-classic_nav__right_header":!0,"p-classic_nav__right_header--context_pane":t,"p-classic_nav__right_header--frameless":n,"p-classic_nav__right_header--whats_new_showing":!i&&a>0,"p-classic_nav__drag":n,"p-classic_nav__right_header--page_view":i}),l=i?m.a.createElement(m.a.Fragment,null,m.a.createElement(uw.a,null),m.a.createElement(mw,null)):m.a.createElement(m.a.Fragment,null,m.a.createElement(yw,null),m.a.createElement(Rw,null),m.a.createElement(Fw,null),r&&m.a.createElement(sN,null),m.a.createElement(fN,null),m.a.createElement(yN,null)),c=o?"group":void 0,u=o?kN.t("Search and additional options",{note:"Label for the right section of the Channel Header containing the search box and button to its right. Not visible on screen as it is only for customers using screen readers."}):void 0;return m.a.createElement("div",{className:s,role:c,"aria-label":u},l)};CN.displayName="RightHeader",CN.defaultProps=ON;var EN=Object(g.b)(function(e){return{secondaryView:Object(A.j)(e),isWindowFrameless:Object(P.l)(e),whatsNewCount:Object(cw.e)(e),featureAppActionsGlobal:Object(y.m)(e,"feature_app_actions_global"),isAppLauncherView:Object(jg.a)(e)&&"Papps"===Object(E.a)(e),featureChannelHeaderLabels:Object(y.m)(e,"feature_channel_header_labels")}})(CN),jN=(n("05X0"),h.b.func,h.b.bool,{renderSonicMenu:d.a,hideChannelHeader:!1}),SN=function(e){var t=e.renderSonicMenu,n=e.hideChannelHeader;return m.a.createElement("div",{className:"p-classic_nav"},m.a.createElement(lE,{renderSonicMenu:t}),n?null:m.a.createElement(p.Fragment,null,m.a.createElement(lw,null),m.a.createElement(EN,null)))};SN.displayName="ClassicNav",SN.defaultProps=jN;var IN=SN,wN=n("XYlw"),NN=n("ManV"),TN=n("lyBs"),AN=n("brQN"),RN=n("OFWM"),PN=n("0Syo"),MN=Object(gt.b)("Ensure channels with drafts exist in our model",function(e,t){var n=t(),a=Object(Ct.a)({state:n,label:"DRAFTS"}),r=Object(ae.a)()?Object(T.a)(n):Object(PN.e)();Object(ls.a)(r)?a.info("There are no channels with drafts"):(a.info("Ensuring we have channel objects for all channels with drafts"),r.forEach(function(e){Object(G.e)(n,e)}))});MN.meta={name:"ensureDraftChannelObjects",key:"actionsEnsureDraftChannelObjectsEnsureDraftChannelObjects",description:"Ensure channels with drafts exist in our model"},MN.propTypes=null;var xN=MN,FN=n("eK5+");function LN(e){return Object(jg.a)(e)&&!Object(eo.Gb)(Object(xo.b)(e))}var DN=n("G4Tr"),UN=new B.b("a11y");var BN=n("Ik/9"),qN=n("Z3Pq"),HN=n("KCFn"),WN=28,GN=/^channel_draft-/,KN=/^composer_draft-/,VN="treeitem",zN=new B.b("channel_sidebar"),YN={drafts:function(){return zN.t("Drafts")},starred:function(){return zN.t("Starred")},sharedChannels:function(){return zN.t("Shared Channels")},channels:function(){return zN.t("Channels")},orgWideChannels:function(){return zN.t("Organization Channels")},ims:function(){return zN.t("Messages",{fallbackHash:"f1b1f5c277f7954dfbed1eddb8517dad1651b04b"})},apps:function(){return zN.t("Recent Apps")}},QN={id:null,type:"spacer",height:18,key:null,role:"presentation"},XN={id:"Vall_threads",type:"allThreadsLink",height:WN,key:"Vall_threads",role:VN,"aria-level":1},JN={id:"Punreads",type:"pageLink",height:WN,key:"Punreads",role:VN,"aria-level":1},ZN={id:"Pbrowse-channels",type:"pageLink",height:WN,key:"Pbrowse-channels",role:VN,"aria-level":2},$N={id:"Pbrowse-dms",type:"pageLink",height:WN,key:"Pbrowse-dms",role:VN,"aria-level":2},eT={id:null,type:"sectionHeading",name:"",height:36,role:VN,"aria-level":1},tT={id:null,type:"sectionHeadingAriaGroup",name:"",height:0,role:"group"},nT={id:null,type:"channel",index:null,height:28,role:VN,"aria-level":2},aT=ye()({},nT,{type:"composer_draft",role:VN,"aria-level":2}),rT=ye()({},nT,{type:"channel_draft",role:VN,"aria-level":2}),iT={id:null,type:"appDmSuggestion",index:null,height:28,role:VN,"aria-level":2};function oT(e,t){var n=Sk(e.id),a=n.sidebar&&n.sidebar.rowHeight||WN;return{id:e.id,key:e.id,type:"pageLink",height:a,scrollTop:t,scrollBottom:t+a,role:VN,"aria-level":1}}var sT=Object(O_.createSelector)([function(e){return e&&e.sidebarSectionsOrdered},function(e){return e&&e.sidebarSections},function(e){return e&&e.pages},function(e){return e&&e.hasAllUnreadsLink},function(e){return e&&e.hasThreadsLink},function(e){return e&&e.featureComposeFlow}],function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=[],s=0,l=n.find(function(e){return"Pwelcome"===e.id});if(l){var c=oT(l,s);o.push(c),s=c.scrollBottom}a&&o.push(ye()({},JN,{scrollTop:s,scrollBottom:s+=JN.height})),r&&o.push(ye()({},XN,{scrollTop:s,scrollBottom:s+=XN.height})),n.filter(function(e){return-1===["Punreads","Pwelcome","Phome","Pcomposer","Pdrafts","Papps","Pfiles","Pdirectory","Pprofile","Psettings","Pbrowse-channels","Pbrowse-dms"].indexOf(e.id)}).forEach(function(e){var t=oT(e,s);o.push(t),s=t.scrollBottom});var u=0;return e.forEach(function(e){var n=t[e]||{},a=n.channelsOrdered||[],r=Object(Ud.a)(o);("sectionHeading"!==r.type&&"sectionHeadingAriaGroup"!==r.type||a.length>0)&&o.push(ye()({},QN,{scrollTop:s,scrollBottom:s+=QN.height,key:"sectionHeading-spacer-"+e}));var i=n.channelsOrdered.reduce(function(e,t){return KN.test(t)?(e[t]=t.replace(KN,""),e):GN.test(t)?(e[t]=t.replace(GN,""),e):(e[t]=t,e)},{});n.hasHeading&&(o.push(ye()({},eT,{"aria-label":YN[e](),name:e,scrollTop:s,scrollBottom:s+=eT.height,sectionName:e,key:"sectionHeading-"+e,"aria-expanded":!0})),o.push(ye()({},tT,{"aria-label":YN[e](),scrollTop:s,scrollBottom:s+=tT.height,key:"sectionHeadingAriaGroup-"+e,"aria-owns":Object.values(i).join(" ")})),"channels"===e&&o.push(ye()({},ZN,{scrollTop:s,scrollBottom:s+=ZN.height})),"ims"===e&&o.push(ye()({},$N,{scrollTop:s,scrollBottom:s+=$N.height}))),n.channelsOrdered.forEach(function(t){var n=i[t],a=void 0,r=void 0;if(KN.test(t))a=aT;else if(GN.test(t)){a=rT;var l=Object(HN.b)(n);r={channelId:l.channelId,threadTs:l.threadTs}}else a=nT;o.push(ye()({},a,{id:n,index:u,scrollTop:s,scrollBottom:s+=a.height,sectionName:e,key:t,params:r})),u+=1}),"apps"===e&&(n.membersOrdered&&n.membersOrdered.forEach(function(t){var n=Object(zb.a)(t)?iT:nT;o.push(ye()({},n,{id:t,index:u,scrollTop:s,scrollBottom:s+=n.height,sectionName:e,key:t})),u+=1}),n.membersOrdered&&n.membersOrdered.length>0&&o.push(ye()({},QN,{scrollTop:s,scrollBottom:s+=QN.height,key:"spacer-apps"})))}),o.push(ye()({},QN,{scrollTop:s,scrollBottom:s+=QN.height,key:"spacer-footer-1"})),o.push(ye()({},QN,{scrollTop:s,scrollBottom:s+=QN.height,key:"spacer-footer-2"})),i&&(o.push(ye()({},QN,{scrollTop:s,scrollBottom:s+=QN.height,key:"spacer-footer-3"})),o.push(ye()({},QN,{scrollTop:s,scrollBottom:s+=QN.height,key:"spacer-footer-4"}))),{rows:o,rowsMap:Object(qN.a)(o,"id"),rowIds:Object(ft.a)(o,"id")}}),lT=n("Olm7"),cT=n("XIp8"),uT=n("OL4R"),dT=Object(Je.b)(function(e){var t=Object(we.d)(e);return Object(De.D)(t)?Object(Zt.j)(e,"channel_sort"):"alphabetical"});dT.meta={name:"getChannelSortPref",key:"prefsStoreUserDerivedSelectorsGetChannelSortPrefGetChannelSortPref"};var pT,mT=dT,hT=n("D03H"),bT=[hT.d,hT.h,hT.g,hT.c,hT.f,hT.e,hT.b],fT=(pT={},fe()(pT,hT.d,{channelsOrdered:[],hasHeading:!0,isCollapsed:!1}),fe()(pT,hT.h,{channelsOrdered:[],hasHeading:!0,isCollapsed:!1}),fe()(pT,hT.g,{channelsOrdered:[],hasHeading:!0,isCollapsed:!1}),fe()(pT,hT.c,{channelsOrdered:[],hasHeading:!0,isCollapsed:!1}),fe()(pT,hT.f,{channelsOrdered:[],hasHeading:!0,isCollapsed:!1}),fe()(pT,hT.e,{channelsOrdered:[],hasHeading:!0,isCollapsed:!1}),fe()(pT,hT.b,{channelsOrdered:[],hasHeading:!0,isCollapsed:!1}),pT),gT=["defaultMentions","default","sharedMentions","shared","privateMentions","private","slackbot","you","imsMentions","ims"],_T=Object(uT.a)(gT),vT={default:gT.map(function(){return[]}),muted:gT.map(function(){return[]}),suggested:gT.map(function(){return[]})},yT=function(e){return e&&e.has_draft},kT=function(e){var t=e.channel,n=e.members,a=e.isCurrentlySelected,r=e.shouldHideReadChannels,i=e.shouldHideReadChannelsUnlessStarred,o=e.hasDraft,s=e.teamId,l=e.isSuggested,c=e.showAppDmSuggestions;if(Object(K.cb)(t))return!1;if(Object(K.Nb)(t))return!1;if(a)return!0;if(Object(K.eb)(s,t))return!0;if(Object(K.X)(t))return!1;if(Object(K.ib)(t,n[Object(K.H)(t)]))return!1;if(!Object(K.nb)(t)&&!l)return!1;if((Object(K.hb)(t)||Object(K.pb)(t))&&!Object(K.sb)(t)&&Object(K.Db)(t)&&!o)return!1;var u={members:n,selfTeamIds:{teamId:s},dangerouslyOverrideCreateSelectorSanityCheck:!0};if(Object(K.hb)(t)){var d=[Object(K.H)(t)];if(d[0]||Object(Ct.a)({teamId:s}).error("SIDEBAR-SECTIONS","IM "+t.id+" is missing its associated user"),!Object(eo.cb)(u,d))return s&&Object(xo.g)(u,d),!1}if(Object(K.pb)(t)){var p=Object(K.I)(t);if(p&&p.length||Object(Ct.a)({teamId:s}).error("SIDEBAR-SECTIONS","MPIM "+t.id+" is missing its associated members"),!Object(eo.cb)(u,p))return s&&Object(xo.g)(u,p),!1}return!(!i||!Object(K.Ib)(t))||(!!o||!(c&&r&&Object(K.W)(t,n)&&Object(K.Ib)(t)&&Object(K.Db)(t))&&(!(!c||!Object(K.W)(t,n))||(!i&&!r||!Object(K.Db)(t))))},OT={},CT={},ET={},jT=Object(Gn.a)(function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channels,n=e.currentlySelectedId,a=e.mutedChannels,r=e.members,i=e.sidebarBehaviorPref,o=e.draftChannelIds,s=e.teamId,l=e.suggestedChannelIds,c=e.showAppDmSuggestions,u="hide_read_channels"===i,d="hide_read_channels_unless_starred"===i,p=[],m=!1,h=!1,b=!1,f=Object.keys(t),g=0;g<f.length;g+=1){var _=t[f[g]],v=-1!==o.indexOf(_.id);Object(ae.a)()||(v=yT(_)),kT({channel:_,members:r,isCurrentlySelected:n===_.id,isMuted:!!a[_.id],shouldHideReadChannels:u,shouldHideReadChannelsUnlessStarred:d,hasDraft:v,teamId:s,isSuggested:-1!==l.indexOf(_.id),showAppDmSuggestions:c})&&p.push(_),m||(m=Object(K.eb)(s,_)||Object(K.Gb)(_)&&(Object(K.nb)(_)||n===_.id)),h||(h=Object(K.ub)(_)&&!Object(K.Bb)(_)),b||(b=Object(K.Ib)(_))}return{channelsVisible:p,belongsToOrPreviewingAnySharedChannels:m,belongsToAnyOrgChannels:h,hasAStarredChannel:b}},2);function ST(e){var t=e.members,n=e.appChannels,a=e.flatSidebarSections,r=e.dismissedAppMembers,i=e.maxSuggestionsCount,o=void 0===i?10:i,s=Object(qN.a)(n,K.H),l=n.reduce(function(e,t){return a.starred&&-1!==a.starred.channelsOrdered.indexOf(t.id)||e.push(t.id),e},[]),c=[],u=o-l.length;if(u>0){var d=Object.values(t).reduce(function(e,t){var n=t.is_bot,a=t.id;return!n||s[a]||r[a]||Object(eo.mb)(t)||e.push(t),e},[]);d.sort(function(e,t){return Object(B.q)(e.name,t.name)}),c=d.map(function(e){return e.id}).slice(0,u)}return l.concat(c)}var IT=Object(Gn.a)(function(e){var t=e.channelsSorted,n=e.belongsToOrPreviewingAnySharedChannels,a=e.members,r=e.mutedChannels,i=e.draftChannelIds,o=e.visibleUnifiedDrafts,s=e.withheldDraftIds,l=e.suggestedChannelIds,c=e.currentUserId,u=e.currentlySelectedId,d=e.teamId,p=e.sortPref,m=e.isAppSpaceEnabled,h=e.shouldSeparateSharedChannels,b=e.shouldSeparateOrgWideChannels,f=e.shouldSeparatePrivateChannels,g=e.dismissedAppMembers,v=e.featureChannelSidebarDraftsSection,k=e.featureSilenceAppDMs,O=e.featureComposeFlow,C=e.canChannelSidebarSectionsBeCollapsed,E=e.defaultChannelSectionsCollapsed,j=e.showAppDmSuggestions,S={},I=[],w=bT.concat();w.forEach(function(e){S[e]=ye()({},fT[e]),S[e].channelsOrdered=Object(cT.a)(vT)});var N=[],T=[];t.forEach(function(e){Object(K.hb)(e)&&N.push(Object(K.H)(e));var t=Object(K.W)(e,a),n=function(e){var t=e.channel,n=e.isApp,a=e.isAppSpaceEnabled,r=e.shouldSeparateSharedChannels,i=e.shouldSeparateOrgWideChannels,o=e.draftChannelIds,s=e.featureChannelSidebarDraftsSection,l=e.featureComposeFlow,c=e.currentlySelectedId,u=e.teamId,d=Object(_.getStateByTeamId)(u);return!l&&s&&(Object(fs.a)(o,t.id)||yT(t))&&(Object(y.m)(d,"feature_announce_only_websocket")||Object(Bb.p)(d,t.id))&&(c!==t.id||Object(fs.a)(CT[u],t.id)||OT[u]||(ET[u]=t.id),ET[u]&&c!==ET[u]&&delete ET[u],t.id!==ET[u])?"drafts":Object(K.Ib)(t)?"starred":(Object(K.Gb)(t)||Object(K.eb)(u,t))&&r?"sharedChannels":Object(K.ub)(t)&&!Object(K.Bb)(t)&&i?"orgWideChannels":n&&a?"apps":Object(K.hb)(t)||Object(K.pb)(t)?"ims":"channels"}({channel:e,isApp:t,isAppSpaceEnabled:m,shouldSeparateSharedChannels:h,shouldSeparateOrgWideChannels:b,draftChannelIds:i,featureChannelSidebarDraftsSection:v,featureComposeFlow:O,currentlySelectedId:u,teamId:d});t&&I.push(e);var o=!!r[e.id],s=Object(K.p)(e,o,k,Object(K.W)({channel:e,members:a})),g=function(e){var t=e.channel,n=e.currentUserId,a=e.shouldSeparatePrivateChannels,r=e.shouldSeparateSharedChannels,i=e.shouldBumpMention;return Object(K.Hb)(t)?_T.slackbot:Object(K.Qb)(t,n)?_T.you:Object(K.hb)(t)||Object(K.pb)(t)?i?_T.imsMentions:_T.ims:a&&Object(K.Bb)(t)?i?_T.privateMentions:_T.private:r&&Object(K.Gb)(t)?i?_T.sharedMentions:_T.shared:i?_T.defaultMentions:_T.default}({channel:e,currentUserId:c,shouldSeparatePrivateChannels:f,shouldSeparateSharedChannels:h,shouldBumpMention:"priority"===p&&s>0}),C=void 0;C=-1!==l.indexOf(e.id)?"suggested":o?"muted":"default",S[n].channelsOrdered[C][g].push(e.id),Object(ae.a)()||yT(e)&&T.push(e.id)});var A={};l.forEach(function(e,t){A[e]=t}),S.channels.channelsOrdered.suggested.forEach(function(e){e.sort(function(e,t){return A[e]>A[t]?1:-1})}),CT[d]=[].concat(ti()(i),T);var R=Object(Sb.a)(S,function(e){return ye()({},e,{channelsOrdered:Object(Po.a)([].concat(ti()(e.channelsOrdered.default),ti()(e.channelsOrdered.muted),ti()(e.channelsOrdered.suggested)))})});if(O){var P=Object(Th.s)(o),M=[];P.forEach(function(e){Object(Th.o)(e)?M.push("composer_draft-"+e.id):Object(fs.a)(s,e.id)||M.push("channel_draft-"+e.id)}),R.drafts.channelsOrdered=M}return(!v||R.drafts.channelsOrdered.length<1)&&(delete R.drafts,Object(lT.a)(w,function(e){return"drafts"===e})),R.starred.channelsOrdered.length<1&&(delete R.starred,Object(lT.a)(w,function(e){return"starred"===e})),h&&n||(delete R.sharedChannels,Object(lT.a)(w,function(e){return"sharedChannels"===e})),(!b||R.orgWideChannels.channelsOrdered.length<1)&&(delete R.orgWideChannels,Object(lT.a)(w,function(e){return"orgWideChannels"===e})),m?j&&(R.apps={hasHeading:!0,channelsOrdered:[],membersOrdered:ST({members:a,appChannels:I,flatSidebarSections:R,dismissedAppMembers:g})}):(delete R.apps,Object(lT.a)(w,function(e){return"apps"===e})),C&&hT.a.forEach(function(e){R[e]&&(R[e].isCollapsed=!!E[e])}),{sidebarSectionsOrdered:w,sidebarSections:R,idsNeedingPresenceSubscription:N}},3),wT=function(e){var t=Object(v.b)(e),n=Object(G.b)(e),a=Object(Ad.b)(e),r=Object(xo.a)(e),i=Object(T.a)(e),o=Object(Th.k)(e),s=Object(T.f)(e),l=Object(K.S)(e),c=Object(E.a)(e),u=Object(y.c)(e),d=function(e){return Object(Zt.j)(e,"sidebar_behavior")}(e),p=function(e){return Object(Zt.j)(e,"separate_private_channels")}(e),m=function(e){return!Object(y.m)(e,"feature_channel_is_remove_create_shared_channel")&&Object(Zt.j)(e,"separate_shared_channels")}(e),h=function(e){return Object(Zt.j)(e,"ent_org_wide_channels_sidebar")}(e),b=Object(Zt.e)(e),f=Object(ia.g)(e),g=Object(y.u)(e),_=function(e){return Object(y.m)(e,"feature_channel_sidebar_drafts_section")}(e),k=Object(T.g)(e),O="variant"===Object(Xt.c)(e,"show_more_apps_in_sidebar_new_and_free"),C=SO(e),j=C?Object(EO.a)(e):null;void 0===OT[t]?OT[t]=!0:OT[t]&&(OT[t]=!1);var S=jT({channels:n,currentlySelectedId:c,mutedChannels:a,members:r,sidebarBehaviorPref:d,draftChannelIds:i,teamId:t,suggestedChannelIds:l,showAppDmSuggestions:O}),I=S.channelsVisible,w=S.belongsToOrPreviewingAnySharedChannels,N={};I.forEach(function(t){t&&t.id&&(N[t.id]=Object(K.x)(e,t,{publicChannelIncludeHashSign:!1,imIncludeAtSign:!1}))});var A=function(e,t){return Object(B.q)(e&&N[e.id],t&&N[t.id])},R=function(e,t){var n=e.priority||-1,a=t.priority||-1;return n===a?A(e,t):a-n},P=mT(e),M=I.sort(function(e){return"priority"===e?R:A}(P));return IT({channelsSorted:M,belongsToOrPreviewingAnySharedChannels:w,members:r,mutedChannels:a,draftChannelIds:i,visibleUnifiedDrafts:o,withheldDraftIds:s,suggestedChannelIds:l,currentUserId:u,currentlySelectedId:c,teamId:t,sortPref:P,isAppSpaceEnabled:f,shouldSeparateSharedChannels:m,shouldSeparateOrgWideChannels:h,shouldSeparatePrivateChannels:p,dismissedAppMembers:b,featureChannelSidebarDraftsSection:_,featureSilenceAppDMs:g,featureComposeFlow:k,canChannelSidebarSectionsBeCollapsed:C,defaultChannelSectionsCollapsed:j,showAppDmSuggestions:O})};Object(dn.a)("channelSidebar",{getDraftChannelToWithhold:function(){return ET}});var NT=26,TT=/^channel_draft-/,AT=/^composer_draft-/,RT="treeitem",PT=new B.b("channel_sidebar"),MT={drafts:function(){return PT.t("Drafts")},starred:function(){return PT.t("Starred")},sharedChannels:function(){return PT.t("Shared Channels")},channels:function(){return PT.t("Channels")},orgWideChannels:function(){return PT.t("Organization Channels")},ims:function(){return PT.t("Direct Messages")},apps:function(){return PT.t("Recent Apps")}},xT={id:null,type:"topPadding",height:12,key:null,role:"presentation"},FT={id:null,type:"spacer",height:18,key:null,role:"presentation"},LT={id:null,type:"spacer",height:6,key:null,role:"presentation"},DT={id:"Vquick_switcher",type:"quickswitcherButton",height:52,key:"Vquick_switcher",role:RT,"aria-level":1},UT={id:"Vall_threads",type:"allThreadsLink",height:NT,key:"Vall_threads",role:RT,"aria-level":1},BT={id:"Punreads",type:"pageLink",height:NT,key:"Punreads",role:RT,"aria-level":1},qT={id:"Vsearch",type:"searchLink",height:NT,key:"Vsearch",role:RT,"aria-level":1},HT={id:null,type:"sectionHeading",name:"",height:NT,role:RT,"aria-level":1},WT={id:null,type:"sectionHeadingAriaGroup",name:"",height:0,role:"group"},GT={id:null,type:"folderHeading",name:"",height:NT,role:RT,"aria-level":1},KT={id:null,type:"channel",index:null,height:NT,role:RT,"aria-level":2},VT=ye()({},KT,{type:"composer_draft",role:RT,"aria-level":2}),zT=ye()({},KT,{type:"channel_draft",role:RT,"aria-level":2}),YT={id:null,type:"appDmSuggestion",index:null,height:NT,role:RT,"aria-level":2},QT={id:null,type:"addAChannelLink",dim:!1,height:NT,key:"addAChannelLink",role:RT,"aria-level":1},XT={id:null,type:"invitePeopleLink",dim:!1,height:NT,key:"invitePeopleLink",role:RT,"aria-level":1},JT={id:null,type:"installAppsLink",dim:!1,height:NT,key:"installAppsLink",role:RT,"aria-level":1},ZT={id:null,type:"appSuggestionLinks",dim:!1,height:NT,key:"appSuggestionLinks",role:RT,"aria-level":1},$T={id:null,type:"upgradeSlackCTA",height:NT,key:"upgradeSlackCTA",role:RT,"aria-level":1},eA=ye()({},$T,{height:36,role:RT,"aria-level":1}),tA={id:null,type:"emptyState",index:null,height:NT,key:null,role:"presentation"};function nA(e,t){var n=Sk(e.id),a=n.sidebar&&n.sidebar.rowHeight||NT;return{id:e.id,key:e.id,type:"pageLink",height:a,scrollTop:t,scrollBottom:t+a,role:RT,"aria-level":1}}var aA=Object(O_.createSelector)([function(e){return e&&e.hasQuickswitcherButton},function(e){return e&&e.hasAllUnreadsLink},function(e){return e&&e.hasSearchLink},function(e){return e&&e.hasAddAChannelLink},function(e){return e&&e.hasInvitePeopleLink},function(e){return e&&e.appSuggestionsCount},function(e){return e&&e.hasUpgradeSlackCTA},function(e){return e&&e.upgradeSlackCTAVersion},function(e){return e&&e.hasThreadsLink},function(e){return e&&e.hasAppsLink},function(e){return e&&e.hasInstallAppsLink},function(e){return e&&e.sidebarSectionsOrdered},function(e){return e&&e.sidebarSections},function(e){return e&&e.sidebarFoldersIsEnabled},function(e){return e&&e.sidebarFolders},function(e){return e&&e.pages},function(e){return e&&e.featureComposeFlow},function(e){return e&&e.shouldUseChannelSections},function(e){return e&&e.shouldHideForWelcomePlace}],function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"",l=!(arguments.length>8&&void 0!==arguments[8])||arguments[8],c=arguments.length>9&&void 0!==arguments[9]&&arguments[9],u=arguments.length>10&&void 0!==arguments[10]&&arguments[10],d=arguments.length>11&&void 0!==arguments[11]?arguments[11]:[],p=arguments.length>12&&void 0!==arguments[12]?arguments[12]:{},m=arguments.length>13&&void 0!==arguments[13]&&arguments[13],h=arguments.length>14&&void 0!==arguments[14]?arguments[14]:[],b=arguments.length>15&&void 0!==arguments[15]?arguments[15]:[],f=arguments.length>16&&void 0!==arguments[16]&&arguments[16],g=arguments.length>17&&void 0!==arguments[17]&&arguments[17],_=arguments.length>18&&void 0!==arguments[18]&&arguments[18],v=[],y={},k=0;!_&&e?v.push(ye()({},DT,{scrollTop:k,scrollBottom:k+=DT.height})):v.push(ye()({},xT,{scrollTop:k,scrollBottom:k+=xT.height,key:"top-padding"}));var O=b.find(function(e){return"Pwelcome"===e.id});if(O){var C=nA(O,k);v.push(C),k=C.scrollBottom}var E=b.find(function(e){return"Phome"===e.id});if(!_&&E){var j=nA(E,k);v.push(j),k=j.scrollBottom}t&&v.push(ye()({},BT,{scrollTop:k,scrollBottom:k+=NT})),l&&v.push(ye()({},UT,{scrollTop:k,scrollBottom:k+=UT.height})),n&&v.push(ye()({},qT,{scrollTop:k,scrollBottom:k+=qT.height}));var S=b.find(function(e){return"Papps"===e.id});if(!_&&c){var I=nA(S,k);v.push(I),k=I.scrollBottom}b.filter(function(e){return-1===["Punreads","Pwelcome","Phome","Pcomposer","Pdrafts","Papps"].indexOf(e.id)}).forEach(function(e){var t=nA(e,k);v.push(t),k=t.scrollBottom});var w=0;if(m&&h.forEach(function(e){"folderHeading"!==Object(Ud.a)(v).type&&"sectionHeadingAriaGroup"!==Object(Ud.a)(v).type&&v.push(ye()({},FT,{scrollTop:k,scrollBottom:k+=FT.height,key:"spacer-"+e.name})),v.push(ye()({},GT,{"aria-label":e.name,id:e.name,name:e.name,key:"folder-"+e.name,"aria-expanded":!e.isCollapsed})),v.push(ye()({},WT,{"aria-label":e.name,scrollTop:k,scrollBottom:k+=WT.height,"aria-owns":e.channelIds.join(" "),key:"aria-group-"+e.name})),e.channelIds.forEach(function(t){var n=!1;d.forEach(function(e){var a=(p[e]||{}).channelsOrdered||[];n=n||a.filter(function(e){return e===t}).length>0}),n&&(e.isCollapsed||(v.push(ye()({},KT,{id:t,index:w,scrollTop:k,scrollBottom:k+=KT.height,sectionName:e.name,key:t})),w+=1),y[t]=!0)})}),d.forEach(function(e){var t=p[e]||{},n=t.channelsOrdered||[],o=g&&t.isCollapsed;if(g)v.push(ye()({},LT,{scrollTop:k,scrollBottom:k+=LT.height,key:"sectionHeading-spacer-"+e}));else{var s=Object(Ud.a)(v);("sectionHeading"!==s.type&&"sectionHeadingAriaGroup"!==s.type||n.length>0)&&v.push(ye()({},FT,{scrollTop:k,scrollBottom:k+=FT.height,key:"sectionHeading-spacer-"+e}))}var l=t.channelsOrdered.reduce(function(e,t){return AT.test(t)?(e[t]=t.replace(AT,""),e):TT.test(t)?(e[t]=t.replace(TT,""),e):(e[t]=t,e)},{});if(t.hasHeading&&(v.push(ye()({},HT,{"aria-label":MT[e](),name:e,scrollTop:k,scrollBottom:k+=HT.height,sectionName:e,key:"sectionHeading-"+e,"aria-expanded":!o,channelIds:g?t.channelsOrdered:void 0})),v.push(ye()({},WT,{"aria-label":MT[e](),scrollTop:k,scrollBottom:k+=WT.height,key:"sectionHeadingAriaGroup-"+e,"aria-owns":g&&t.isCollapsed?"":Object.values(l).join(" ")}))),t.channelsOrdered.forEach(function(n){if(!y[n]){var a=l[n],r=void 0,i=void 0;if(AT.test(n))r=VT;else if(TT.test(n)){r=zT;var o=Object(HN.b)(a);i={channelId:o.channelId,threadTs:o.threadTs}}else r=KT;g&&t.isCollapsed||(v.push(ye()({},r,{id:a,index:w,scrollTop:k,scrollBottom:k+=r.height,sectionName:e,key:n,params:i})),w+=1)}}),!_&&"channels"===e&&a&&(v.push(ye()({},FT,{scrollTop:k,scrollBottom:k+=FT.height,key:"spacer-addAChannelLink"})),v.push(ye()({},QT,{dim:!0,height:QT.height,scrollTop:k,scrollBottom:k+=QT.height}))),"ims"===e&&r&&(v.push(ye()({},FT,{scrollTop:k,scrollBottom:k+=FT.height,key:"spacer-invite-people"})),v.push(ye()({},XT,{dim:"dim"===r,height:XT.height,scrollTop:k,scrollBottom:k+=XT.height}))),"apps"===e){if(t.membersOrdered&&t.membersOrdered.forEach(function(t){var n=Object(zb.a)(t)?YT:KT;v.push(ye()({},n,{id:t,index:w,scrollTop:k,scrollBottom:k+=n.height,sectionName:e,key:t})),w+=1}),t.membersOrdered&&t.membersOrdered.length>0&&v.push(ye()({},FT,{scrollTop:k,scrollBottom:k+=FT.height,key:"spacer-apps"})),!_&&Number.isFinite(i)&&i>0){var c=i*ZT.height;v.push(ye()({},ZT,{height:c,scrollTop:k,scrollBottom:k+=c}))}!_&&u&&v.push(ye()({},JT,{height:JT.height,scrollTop:k,scrollBottom:k+=JT.height}))}}),o&&s){v.push(ye()({},tA,{scrollTop:k,scrollBottom:k+=tA.height,key:"upgrade-slack-cta-empty-state-1"}));var N="button"===s?eA:$T;v.push(ye()({},N,{height:N.height,scrollTop:k,scrollBottom:k+=N.height})),v.push(ye()({},tA,{scrollTop:k,scrollBottom:k+=tA.height,key:"upgrade-slack-cta-empty-state-2"}))}return v.push(ye()({},FT,{scrollTop:k,scrollBottom:k+=FT.height,key:"spacer-footer-1"})),v.push(ye()({},FT,{scrollTop:k,scrollBottom:k+=FT.height,key:"spacer-footer-2"})),f&&(v.push(ye()({},FT,{scrollTop:k,scrollBottom:k+=FT.height,key:"spacer-footer-3"})),v.push(ye()({},FT,{scrollTop:k,scrollBottom:k+=FT.height,key:"spacer-footer-4"}))),{rows:v,rowsMap:Object(qN.a)(v,"id"),rowIds:Object(ft.a)(v,"id")}}),rA=n("kMOi"),iA=new B.b("channel_sidebar"),oA=function(e,t){var n=Object(NN.f)(e,t),a=Object(rA.c)(n),r=Object(rA.e)(n),i=function(e,t){var n=Object(NN.f)(e,t);return Object(rA.d)(n)}(e,t),o=Object(we.d)(e);if(!a||!r)return{};var s="",l=Object(rA.b)(n)||"";return!i&&l&&(s=l).startsWith("/")&&(s=Object(De.o)(o,s)),{appId:a,isInstall:i,href:s||Object(De.o)(o,"/apps/"+a),text:i?iA.t("Install {name}",{name:r}):iA.t("Connect {name}",{name:r}),label:iA.t("Dismiss {name} suggestion",{name:r}),dismissKey:i?t+"_install_prompt_dismissed":t+"_connect_prompt_dismissed",clogUiElement:i?"app_install_prompt":"app_connect_prompt"}},sA=function(e){return Object(NN.g)(e).length};var lA=n("vPIQ"),cA=n("ukIz"),uA=n("Po2o"),dA=n("+yap"),pA=n("2Y1Y"),mA=n("yt6e"),hA=(n("Fsvi"),h.b.string.isRequired,h.b.func.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return u()(t,e),o()(t,[{key:"onClick",value:function(){this.props.openFromClick()}},{key:"render",value:function(){var e=this.props.teamName;return m.a.createElement(_e.c,{onClick:this.onClick,className:"p-ia__omniswitcher_button"},m.a.createElement(ue.a,{type:"search-medium",inline:!0})," Search ",e)}}]),t}(p.Component));hA.displayName="OmniswitcherButton";var bA=Object(g.b)(function(e){var t=Object(we.d)(e);return{teamName:Object(De.s)(t)?Object(we.e)(e):Object(De.f)(t)}},function(e){return{openFromClick:function(){return e(ry.a.apply(void 0,arguments))}}})(hA),fA=(n("C2OJ"),h.b.string.isRequired,h.b.func.isRequired,h.b.func.isRequired,h.b.bool.isRequired,function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"renderMenuItems",value:function(){var e=this,t=this.props.currentView;return[{label:"Apps",icon:m.a.createElement(ue.a,{type:"gn-menu"}),click:function(){return Object(nb.g)(ab.a,{entityId:"apps"})},dataQa:"start_menu_apps",key:"start-menu-apps",pageId:"Papps"},{label:"Directory",icon:m.a.createElement(ue.a,{type:"team-directory"}),click:function(){return Object(nb.g)(ab.a,{entityId:"directory-page"})},dataQa:"start_menu_directory",key:"start-menu-directory",pageId:"Pdirectory"},{label:"Files",icon:m.a.createElement(ue.a,{type:"all-files-alt"}),click:function(){return Object(nb.g)(ab.a,{entityId:"files-page"})},dataQa:"start_menu_files",key:"start-menu-files",pageId:"Pfiles"},{type:"separator"},{label:"Help",icon:m.a.createElement(ue.a,{type:"question-circle"}),click:function(){return e.props.openHelpModal({trigger:"start_menu"})},dataQa:"start_menu_help",key:"start-menu-help"},{label:"Settings",icon:m.a.createElement(ue.a,{type:"cog-o"}),click:function(){return Object(nb.g)(ab.a,{entityId:"preferences"})},dataQa:"start_menu_settings",key:"start-menu-settings",pageId:"Psettings"}].map(function(e){switch(e.type){case"separator":return m.a.createElement("div",{className:"p-ia__main_menu__separator"});default:return m.a.createElement(_e.c,ye()({key:e.key,className:f()("p-ia__main_menu__item",{"p-ia__main_menu__item--selected":t===e.pageId}),onClick:e.click,"aria-label":e.label,"data-qa":e.dataQa},e.props),m.a.createElement("span",{className:"p-ia__main_menu__item_icon"},e.icon)," ",e.label)}})}},{key:"render",value:function(){return this.props.iap1MainMenuIsVisible?m.a.createElement("div",{className:"p-ia__main_menu"},this.renderMenuItems()):null}}]),t}(p.Component));fA.displayName="MainMenu";var gA=Object(g.b)(function(e){return{currentView:Object(E.a)(e),iap1MainMenuIsVisible:Object(NN.h)(e)}},function(e){return{openHelpModal:function(){return e(TO.a.apply(void 0,arguments))}}})(fA),_A=(n("LR7P"),h.b.func.isRequired,h.b.bool.isRequired,h.b.bool.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.mainMenuTooltip=m.a.createRef(),n.renderMainMenu=n.renderMainMenu.bind(n),n.onClickMainMenu=n.onClickMainMenu.bind(n),n}return u()(t,e),o()(t,[{key:"onClickMainMenu",value:function(){this.props.setIAP1MainMenuIsVisible(!this.props.iap1MainMenuIsVisible),this.mainMenuTooltip&&this.mainMenuTooltip.current&&this.mainMenuTooltip.current.hideTip()}},{key:"renderMainMenu",value:function(e){return m.a.createElement(gA,{menuProps:e})}},{key:"render",value:function(){var e=this.props,t=e.iap1MainMenuIsVisible,n=e.iAPhase1IsWindows3000;return m.a.createElement("div",{className:f()("p-ia__global_control_bar",{"p-ia__global_control_bar--main-menu-open":t})},n&&m.a.createElement(_e.c,{className:"p-ia__global_control_bar_button",onClick:this.onClickMainMenu},m.a.createElement(ue.a,{className:"p-ia__global_control_bar_button--arrow",type:t?"chevron-medium-down":"chevron-medium-up"}),t?"Less":"More"))}}]),t}(p.Component));_A.displayName="GlobalControlBar";var vA=Object(g.b)(function(e){return{iap1MainMenuIsVisible:Object(NN.h)(e),iAPhase1IsWindows3000:Object(pE.e)(e)}},function(e){return{openHelpModal:function(){return e(TO.a.apply(void 0,arguments))},openPrefsModal:function(){return e(ul.a.apply(void 0,arguments))},showMemberProfile:function(){return e(jn.j.apply(void 0,arguments))},setIAP1MainMenuIsVisible:function(){return e(NN.p.apply(void 0,arguments))}}})(_A),yA=n("vVZ5"),kA=(n("wMxR"),new B.b("coachmarks")),OA=150,CA=(h.b.element,h.b.string,h.b.string,h.b.number,h.b.oneOfType([h.b.node,h.b.func]),h.b.oneOf(["above_fs","fs","menu","below_menu"]),h.b.func,h.b.func,h.b.func,h.b.bool,h.b.bool,h.b.bool,h.b.string,h.b.string,h.b.string,h.b.string,h.b.node,h.b.oneOfType([h.b.func,h.b.bool]),{children:void 0,className:void 0,position:"right",delay:0,content:"",zIndex:"above_fs",onContinue:d.a,onShow:d.a,onSkip:d.a,hasCloseButton:!0,hasSkipLink:!0,hasSkipButton:!1,skipButtonText:"",skipLinkPre:"",skipLinkText:"",continueButtonText:"",title:"",shouldShow:!1}),EA=function(e){function t(){r()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={isShowing:!1,contentsRect:null},e.setCoachmarkedContentRef=e.setCoachmarkedContentRef.bind(e),e.setCoachmarkRef=e.setCoachmarkRef.bind(e),e.maybeShowCoachmark=e.maybeShowCoachmark.bind(e),e.measureContents=e.measureContents.bind(e),e.onSkipClick=e.onSkipClick.bind(e),e.onCloseClick=e.onCloseClick.bind(e),e.onContinueClick=e.onContinueClick.bind(e),e.containClickEvents=e.containClickEvents.bind(e),e.onResize=Object(Gt.a)(e.measureContentsAndSetState.bind(e),OA,{maxWait:OA}),e}return u()(t,e),o()(t,[{key:"componentWillUnmount",value:function(){this.hideCoachmark(),window.clearTimeout(this.delayTimer),this.onResize.cancel(),this.listenerInstalled&&(window.removeEventListener("resize",this.onResize),this.listenerInstalled=!1)}},{key:"onCloseClick",value:function(e){this.hideCoachmark(),this.props.onSkip(e,"CLOSE")}},{key:"onContinueClick",value:function(e){this.hideCoachmark(),this.props.onContinue(e)}},{key:"onSkipClick",value:function(e){this.hideCoachmark(),this.props.onSkip(e,"SKIP")}},{key:"setCoachmarkRef",value:function(e){this.coachmark=e}},{key:"setCoachmarkedContentRef",value:function(e){this.coachmarkedContent=e}},{key:"UNSAFE_componentWillMount",value:function(){this.delayTimer=window.setTimeout(this.maybeShowCoachmark,this.props.delay)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.shouldShow!==e.shouldShow&&!0===e.shouldShow?this.delayTimer=window.setTimeout(this.maybeShowCoachmark,this.props.delay):this.props.shouldShow!==e.shouldShow&&!1===e.shouldShow&&this.hideCoachmark()}},{key:"containClickEvents",value:function(e){e.stopPropagation()}},{key:"hideCoachmark",value:function(){this.setState(function(){return{isShowing:!1,contentsRect:null}}),window.removeEventListener("resize",this.onResize),this.listenerInstalled=!1}},{key:"maybeShowCoachmark",value:function(){var e=this;(Object(Ib.a)(this.props.shouldShow)?this.props.shouldShow():this.props.shouldShow)?(this.setState(function(){return{isShowing:!0,contentsRect:e.measureContents()}}),window.addEventListener("resize",this.onResize),this.listenerInstalled=!0,this.props.onShow()):this.hideCoachmark()}},{key:"measureContents",value:function(){return this.coachmarkedContent?Object(Rc.findDOMNode)(this.coachmarkedContent).getBoundingClientRect():null}},{key:"measureContentsAndSetState",value:function(){var e=this;this.setState(function(){return{contentsRect:e.measureContents()}})}},{key:"renderCloseButton",value:function(){return this.props.hasCloseButton?m.a.createElement(_e.c,{className:"p-coachmark__close_btn","data-qa":"coachmark_close_btn",onClick:this.onCloseClick,"aria-label":kA.t("Close")},m.a.createElement(ta.a,{type:"times"})):null}},{key:"renderContent",value:function(){return m.a.createElement("div",{className:"p-coachmark__content"},this.props.content)}},{key:"renderFooter",value:function(){var e=this.props.hasSkipLink?"p-coachmark__footer":f()("p-coachmark__footer","margin_top_100"),t=this.props.continueButtonText||kA.t("Got It",{fallbackHash:"8297bb17c6aa1537d802e8ab86dcd018ffb7b6d0"});return m.a.createElement("div",{className:e},this.renderSkipLink(),this.renderSkipButton(),m.a.createElement(_e.d,{onClick:this.onContinueClick,className:"p-coachmark__continue_button","data-qa":"coachmark_continue_btn"},t))}},{key:"renderSkipButton",value:function(){return this.props.hasSkipButton?m.a.createElement(_e.d,{onClick:this.onSkipClick,type:"outline",className:"p-coachmark__skip_button margin_right_50","data-qa":"coachmark_skip_btn"},this.props.skipButtonText):null}},{key:"renderSkipLink",value:function(){if(!this.props.hasSkipLink)return null;var e=this.props.skipLinkPre||kA.t("Done?"),t=this.props.skipLinkText||kA.t("Click here to skip");return m.a.createElement("div",{className:"p-coachmark__skip_link"},m.a.createElement("span",null,e),e&&" ",m.a.createElement(_e.c,{className:"p-coachmark__skip_link_button","data-qa":"coachmark_skip_link",onClick:this.onSkipClick},t))}},{key:"renderTitle",value:function(){return m.a.createElement("h3",{className:"p-coachmark__title"},this.props.title)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.position,a=e.zIndex,r=this.state,i=r.isShowing,o=r.contentsRect,s=f()("p-coachmark","p-coachmark--"+n,this.props.className),l=i&&m.a.createElement(SS.a,{isOpen:i,position:n,targetBounds:o,allowanceX:-500,allowanceY:-500,zIndex:a,key:"coachmark-popover",onClose:this.onCloseClick},m.a.createElement("div",{className:s,"data-qa":"coachmark",onClick:this.containClickEvents,ref:this.setCoachmarkRef,role:"presentation"},m.a.createElement("div",{className:"p-coachmark__callout"}),this.renderCloseButton(),this.renderTitle(),this.renderContent(),this.renderFooter()));return m.a.cloneElement(t,{ref:this.setCoachmarkedContentRef},[].concat(ti()(m.a.Children.toArray(t.props.children)),[l]))}}]),t}(p.PureComponent);EA.displayName="DeprecatedCoachmark",EA.defaultProps=CA;var jA=EA,SA=(n("/6P7"),new B.b("channel_sidebar")),IA=(h.b.oneOf(["SHOW_BUTTON","HIDE_BUTTON","HIDE_BUTTON_PENDING"]),h.b.func,h.b.func,h.b.func,h.b.object.isRequired,h.b.func,h.b.bool,h.b.bool,{coachmarkState:void 0,setJumperCoachmarkState:d.a,setUserPrefByApi:d.a,maybeShowQuickSwitcher:d.a,openFromQuickSwitcherCmd:d.a,historyNavigationEnabled:!1,useHistoryNavigation:!1}),wA=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.hideCoachmark=n.hideCoachmark.bind(n),n.hideButton=n.hideButton.bind(n),n.onShowContinue=n.onShowContinue.bind(n),n.onShowSkip=n.onShowSkip.bind(n),n.onHideContinue=n.onHideContinue.bind(n),n.onHideSkip=n.onHideSkip.bind(n),n.onButtonClick=n.onButtonClick.bind(n),n}return u()(t,e),o()(t,[{key:"onShowContinue",value:function(e){e.stopPropagation(),this.clog("OK"),this.hideCoachmark()}},{key:"onShowSkip",value:function(e,t){switch(e.stopPropagation(),t){case"SKIP":return this.clog("SKIP"),this.hideButton();case"CLOSE":return this.clog("CLOSE"),this.hideCoachmark();default:return null}}},{key:"onHideContinue",value:function(e){e.stopPropagation(),this.clog("OK"),this.hideButton()}},{key:"onHideSkip",value:function(e,t){switch(e.stopPropagation(),t){case"SKIP":return this.clog("SKIP"),this.hideCoachmark();case"CLOSE":return this.clog("CLOSE"),this.hideButton();default:return null}}},{key:"onButtonClick",value:function(){this.props.openFromQuickSwitcherCmd({key:"button"})}},{key:"clog",value:function(e){var t=this.props,n=t.clogger,a={SHOW_BUTTON:"SIDEBAR_JUMPER_BUTTON_SHOW",HIDE_BUTTON:"SIDEBAR_JUMPER_BUTTON_HIDE"}[t.coachmarkState];n.track("SIDEBAR_JUMPER_COACHMARK",{contexts:{ui_context:{action:e,step:a}}})}},{key:"hideCoachmark",value:function(){this.props.setJumperCoachmarkState(null)}},{key:"hideButton",value:function(){this.hideCoachmark(),this.props.setUserPrefByApi({pref:"show_sidebar_quickswitcher_button",value:!1}),this.props.setUserPrefByApi({pref:"k_key_omnibox_auto_hide_count",value:5})}},{key:"maybeRenderCoachmark",value:function(e){var t={SHOW:{title:SA.rt("Get around Slack faster <sparkles></sparkles>",null,function(e){var t=e.tag,n=e.key;return"sparkles"===t?m.a.createElement(Gs.b,{key:n,text:":sparkles:",emojiSize:Gs.a.MEDIUM}):null}),content:SA.rt("To jump to a channel, person, or file \u2014 or even kick off a Slack search \u2014 try using the <strong>Quick Switcher</strong>. Summon it with this button or {shortcut}.",{shortcut:Object(ce.p)()?"\u2318K":"Ctrl+K",fallbackHash:"e5c4c0b492d4a5244f99eabd8b8d5bc558e93e55"}),skipLinkText:SA.t("Hide the sidebar button"),continueButtonText:SA.t("OK")},HIDE:{title:SA.t("You\u2019re a pro at keyboard shortcuts"),content:SA.rt("Looks like you\u2019ve gotten the hang of using {shortcut} to summon the Quick Switcher. If you\u2019d like, you can gain back some sidebar space by hiding the <strong>Jump to</strong> button.",{shortcut:Object(ce.p)()?"\u2318K":"Ctrl+K"}),skipLinkText:SA.t("No thanks, I like the button"),continueButtonText:SA.t("Hide Button")}},n={skipLinkPre:"",position:"right-bottom",shouldShow:!0,hasCloseButton:!1,className:"p-channel_sidebar__jumper_coachmark"};switch(this.props.coachmarkState){case"SHOW_BUTTON":return this.clog("IMPRESSION"),m.a.createElement(jA,ye()({},n,t.SHOW,{onContinue:this.onShowContinue,onSkip:this.onShowSkip}),e);case"HIDE_BUTTON":return this.clog("IMPRESSION"),m.a.createElement(jA,ye()({},n,t.HIDE,{onContinue:this.onHideContinue,onSkip:this.onHideSkip}),e);default:return e}}},{key:"render",value:function(){var e=this.props,t=e.historyNavigationEnabled,n=e.useHistoryNavigation,a=Object(ce.p)()?"\u2318K":"Ctrl+K",r=SA.t("Quick Switcher ({keyboardShortcut})",{keyboardShortcut:a,fallbackHash:"66d3ce0aa57a3b14881f5588807ccbd726af7a15",fallbackHashNs:"quick_switcher"}),i=m.a.createElement(_e.c,{className:"p-channel_sidebar__jumper",onClick:this.onButtonClick,"aria-label":r},m.a.createElement("div",{className:"p-channel_sidebar__jumper_left"},m.a.createElement(ta.a,{type:"filter",inherit:!0,align:"baseline",className:"p-channel_sidebar__jumper_icon"}),SA.t("Jump to...",{note:"This label should be brief. It needs to fit in a 192px wide container."})),!n&&m.a.createElement("span",{className:"p-channel_sidebar__jumper_keys"},a));return t?i:this.maybeRenderCoachmark(i)}}]),t}(p.Component);wA.displayName="QuickswitcherButton",wA.defaultProps=IA;var NA=Object(g.b)(function(e){return{coachmarkState:Object(NN.i)(e),clogger:Object(re.a)({state:e}),historyNavigationEnabled:Object(un.a)(e),useHistoryNavigation:Object(un.b)(e)}},function(e){return{setJumperCoachmarkState:function(){return e(NN.q.apply(void 0,arguments))},setUserPrefByApi:function(){return e(Tn.f.apply(void 0,arguments))},maybeShowQuickSwitcher:function(){return e(yA.a.apply(void 0,arguments))},openFromQuickSwitcherCmd:function(){return e(ry.g.apply(void 0,arguments))}}})(wA),TA=(h.b.string.isRequired,h.b.func.isRequired,h.b.bool.isRequired,h.b.string,h.b.string,h.b.string,{tooltip:void 0,ariaLabel:void 0,className:void 0}),AA=function(e){var t=e.iconType,n=e.onClick,a=e.isDisabled,r=e.tooltip,i=e.ariaLabel,o=e.className,s=f()("p-channel_sidebar__history_button",o,{"p-channel_sidebar__history_button--disabled":a});return m.a.createElement(mg.c,{tip:r,position:"bottom",delay:mg.a},m.a.createElement(_e.c,{className:s,onClick:n,"aria-label":i,"aria-disabled":a,tabIndex:a?-1:void 0},m.a.createElement(ta.b,{type:t})))};AA.displayName="HistoryButton",AA.defaultProps=TA;var RA=AA,PA=new B.b("navigation"),MA=(h.b.string.isRequired,h.b.func.isRequired,h.b.func.isRequired,h.b.bool,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onBackClick=n.onBackClick.bind(n),n.onForwardClick=n.onForwardClick.bind(n),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){fn()}},{key:"componentDidUpdate",value:function(e){this.props.primaryView!==e.primaryView&&fn()}},{key:"onBackClick",value:function(){this.props.triggerNavigateBack({fromKeyboardShortcut:!1})}},{key:"onForwardClick",value:function(){this.props.triggerNavigateForward({fromKeyboardShortcut:!1})}},{key:"render",value:function(){return this.props.historyNavigationEnabled?m.a.createElement(p.Fragment,null,m.a.createElement(RA,{onClick:this.onBackClick,tooltip:PA.t("Previous conversation"),ariaLabel:PA.t("Move to the previous conversation"),className:"p-channel_sidebar__history_button-left",iconType:"chevron-medium-left",isDisabled:gn()}),m.a.createElement(RA,{onClick:this.onForwardClick,tooltip:PA.t("Next conversation"),ariaLabel:PA.t("Move to the next conversation"),className:"p-channel_sidebar__history_button-right",iconType:"chevron-medium-right",isDisabled:_n()})):null}}]),t}(p.Component));MA.displayName="History",MA.defaultProps={historyNavigationEnabled:!1};var xA=Object(g.b)(function(e){return{historyNavigationEnabled:Object(un.a)(e),primaryView:Object(E.a)(e)}},function(e){return{triggerNavigateForward:function(t){return e(kn(t))},triggerNavigateBack:function(t){return e(yn(t))}}},null,{pure:!1})(MA),FA=new B.b("channel_sidebar"),LA=(h.b.bool,function(e){var t=FA.t("Navigation",{fallbackHash:"cf03cf2e9cdf95a20af09137dfb9071db0c31bf2",fallbackHashNs:"shortcuts_flexpane"});return m.a.createElement("div",{className:"p-channel_sidebar__navigation_bar",role:"toolbar","aria-orientation":"vertical","aria-label":t},m.a.createElement(NA,null),e.useHistoryNavigation&&m.a.createElement(xA,null))});LA.displayName="NavigationBar",LA.defaultProps={useHistoryNavigation:!1};var DA=LA,UA=n("lfjV"),BA=n("rCFu"),qA=n("oUPN"),HA=n("NcDR"),WA=n("lwWk"),GA=n("ESRc"),KA=n("eD8c"),VA={};var zA=Object(It.a)(function(e,t){var n=VA[e.teamId];return n||(n={},VA[e.teamId]=n),function(){var a=t({eventId:arguments.length<=0?void 0:arguments[0],payload:arguments.length<=1?void 0:arguments[1]});n[a]||(n[a]=!0,e.track.apply(e,arguments))}}),YA=new B.b("channel_sidebar"),QA=(h.b.string.isRequired,h.b.string.isRequired,h.b.func,h.b.string.isRequired,h.b.string.isRequired,h.b.func,h.b.bool.isRequired,h.b.bool,h.b.object,{selectItem:d.a,dismissInstalledAppDmSuggestion:d.a,featureSidebarVirtualized:!1,clogger:{track:d.a}}),XA=function(e){var t=e.eventId,n=e.payload;return t+"-"+n.contexts.ui_context.action+"-"+n.contexts.core.app_id},JA=function(e){return{contexts:{ui_context:{action:e.action},core:{app_id:e.appId}}}};function ZA(e){var t=e.id,n=e.name,a=e.appId,r=e.teamDomain,i=e.startImByMemberId,o=e.dismissInstalledAppDmSuggestion,s=e.featureSidebarContextMenu,l=e.featureSidebarVirtualized,c=e.clogger;Object(p.useEffect)(function(){zA(c,XA)(le.EventId.APP_SIDEBAR,JA({action:le.UiAction.IMPRESSION,appId:a}))});var u=Object(p.useState)(!1),d=it()(u,2),h=d[0],b=d[1],g=Object(p.useCallback)(function(e){e.preventDefault(),c.track(le.EventId.APP_SIDEBAR,JA({action:le.UiAction.CLICK,appId:a})),i({memberId:t})},[c,a,i,t]),_=Object(p.useCallback)(function(){return o({memberId:t,appId:a})},[a,o,t]),v=Object(p.useCallback)(function(){return[{label:YA.t("Dismiss app"),click:_}]},[_]),y=Object(p.useCallback)(function(e){e.target.offsetWidth<e.target.scrollWidth&&b(!0)},[b]),k=l?-1:void 0,O=m.a.createElement(_e.c,{onClick:_,className:"p-channel_sidebar__close","aria-label":l?void 0:YA.t("Dismiss app"),"aria-hidden":!!l||void 0,tabIndex:k},m.a.createElement(ta.a,{type:"times-circle-medium"})),C=m.a.createElement("div",{className:"p-channel_sidebar__close_container"},m.a.createElement(WA.a,{href:Object(K.o)({channelId:t,teamDomain:r}),className:"p-channel_sidebar__channel p-channel_sidebar__channel--suggested",onClick:g,"data-qa-channel-sidebar-channel":!0,"data-qa-channel-sidebar-channel-id":t,draggable:!1,"data-drag-type":"channel","data-drag-id":t,tabIndex:k,role:l?"presentation":void 0},m.a.createElement(OO.a,{className:"p-channel_sidebar__presence_icon",memberId:t,enablePresenceSubscriptions:!1,inline:!1}),m.a.createElement(qi.c,{delay:qi.a,position:"top-left",tip:n,tipClassName:f()({hidden:!h})},m.a.createElement("span",{className:"p-channel_sidebar__name","data-qa":"channel_sidebar_name",onMouseEnter:y},n))),O);return s?m.a.createElement(KA.a,{getTemplate:v},C):C}ZA.defaultProps=QA;var $A=Object(g.b)(function(e,t){var n=t.id,a=Object(xo.d)(e,n,!1);return{featureSidebarContextMenu:Object(y.m)(e,"feature_sidebar_context_menu"),teamDomain:Object(we.d)(e).domain,name:Object(eo.W)(e,n),appId:Object(eo.p)(a),clogger:Object(re.a)({state:e}),featureSidebarVirtualized:Object(y.m)(e,"feature_sidebar_virtualized")}},function(e){return Object(Eg.b)({dismissInstalledAppDmSuggestion:GA.a,startImByMemberId:Fo.startImByMemberId},e)})(ZA),eR=n("IEnm"),tR=Object(gt.b)("Dismiss suggested channel from channels list",function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).channelId;e(Object(eR.d)({ids:[n]}));var a=Object(Zt.h)(t()).split(","),r=a.indexOf(n);-1!==r&&(a.splice(r,1),e(Object(Tn.f)({pref:"newxp_suggested_channels",value:a.join(",")})))});tR.meta={name:"dismissSuggestedChannel",key:"actionsDismissSuggestedChannelDismissSuggestedChannel",description:"Dismiss suggested channel from channels list"},tR.propTypes={channelId:h.b.string.isRequired};var nR=tR,aR=n("WIdh"),rR=n("c48M"),iR=n("RbWr"),oR=n("sIuu"),sR=n("+Xah"),lR=n("weu1"),cR=new B.b("channel_sidebar");function uR(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,n=e.displayName,a=e.isShared,r=e.isOrgShared,i=e.isYou,o=e.isMuted,s=e.isSuggested,l=e.hasUnreads,c=e.hasDraft,u=e.isArchived,d=e.unreadCount,p=e.badgeCount,m=e.isSelected,h=e.userActive,b=e.isTyping,f=e.isThread,g=e.canPost,_=void 0===g||g,v=e.featureAnnounceOnly,y=void 0!==v&&v,k=[m?cR.t("selected"):null];return"channel"===t?k.push(a||r?cR.t("shared channel"):cR.t("channel")):"private"===t?k.push(cR.t("private channel")):"mpim"===t?k.push(cR.t("group direct message")):"im"===t&&(k.push(cR.t("direct message")),k.push(h?cR.t("active"):cR.t("away"))),u&&k.push(cR.t("archived")),o&&k.push(cR.t("muted")),!_&&y&&k.push(cR.t("read only",{fallbackHash:"1d8d39a6e91a5d579d831544fb5c2b08d7ea8d5d"})),s&&k.push(cR.t("suggested")),l&&d&&!p&&k.push(cR.t("{count} unread {count, plural, =1 {message} other {messages}}",{count:d})),p&&k.push(cR.t("{count} {count, plural, =1 {unread highlight} other {unread highlights}}",{count:p})),c&&k.push(cR.t("has draft")),b&&k.push(cR.t("typing")),(i?cR.t("{name} (you)",{name:n}):!f||"channel"!==t&&"private"!==t?!f||"mpim"!==t&&"im"!==t?n:cR.t("Thread with {name}",{name:n}):cR.t("Thread in {name}",{name:n}))+" ("+Object(lR.a)(Object(aa.a)(k,sR.a),", ")+")"}var dR=n("EetU");function pR(e){var t=e.canPostInChannel,n=e.featureComposeFlow,a=e.hasDraft,r=e.isSelected;return!n&&a&&t&&!r}var mR={canPostInChannel:h.b.bool,featureComposeFlow:h.b.bool,featureSonicPresenceManager:h.b.bool,hasDraft:h.b.bool,isArchived:h.b.bool,isChannel:h.b.bool,isFrozen:h.b.bool,isFrozenAndInGracePeriod:h.b.bool,isSelected:h.b.bool,isSlackbot:h.b.bool,isTyping:h.b.bool,type:h.b.oneOf(["channel","private","im","mpim"]),userCount:h.b.number,userId:h.b.string},hR={canPostInChannel:!1,featureComposeFlow:!1,featureSonicPresenceManager:!1,hasDraft:!1,isArchived:!1,isChannel:!0,isFrozen:!1,isFrozenAndInGracePeriod:!1,isSelected:!1,isSlackbot:!1,isTyping:!1,type:"channel",userCount:0,userId:void 0},bR=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.canPostInChannel,n=e.featureComposeFlow,a=e.featureSonicPresenceManager,r=e.hasDraft,i=e.isTyping,o=e.isSelected,s=e.isArchived,l=e.isFrozenAndInGracePeriod,c=e.isFrozen,u=e.isChannel,d=e.isSlackbot,p=e.type,h=e.userId,b=e.userCount;if(function(e){var t=e.featureComposeFlow,n=e.hasDraft,a=e.isArchived,r=e.isFrozen,i=e.isSelected,o=e.isSlackbot,s=e.isTyping;return!("im"!==e.type||o||!t&&n&&!i||s&&!i||a&&!r)}({featureComposeFlow:n,hasDraft:r,isArchived:s,isFrozen:c,isSelected:o,isSlackbot:d,isTyping:i,type:p}))return m.a.createElement(OO.a,{className:"p-channel_sidebar__presence_icon","data-qa":"sidebar-channel-presence-prefix",enablePresenceSubscriptions:a||Object(Si.a)(),inline:!1,memberId:h});var g=f()("p-channel_sidebar__channel_icon_prefix",{"p-channel_sidebar__channel_icon_prefix--im-slackbot":d,"p-channel_sidebar__channel_icon_prefix--typing":i&&!o});if(i&&!o)return m.a.createElement("div",{"data-qa":"sidebar-channel-icon-prefix",className:g});var _=void 0;return _=pR({canPostInChannel:t,featureComposeFlow:n,hasDraft:r,isSelected:o})?"pencil":!s||l||c&&!u?"private"===p?"lock-small":"mpim"===p?"multiparty-dm-"+b:d?"heart":"channel-pane-hash":"archived-channel",m.a.createElement(ta.b,{className:g,"data-qa":"sidebar-channel-icon-prefix",inline:!0,size:"inherit",type:_})}}]),t}(iR.a);bR.displayName="ChannelPrefix",bR.propTypes=mR,bR.defaultProps=hR;var fR=bR,gR=new B.b("channel_sidebar"),_R={displayName:h.b.string,isYou:h.b.bool,memberPresences:h.b.arrayOf(h.b.string),members:h.b.arrayOf(h.b.string),type:h.b.oneOf(["channel","private","im","mpim"]),userActive:h.b.bool,userId:h.b.string},vR={displayName:"",isYou:!1,memberPresences:null,members:void 0,type:"channel",userActive:!0,userId:void 0},yR=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleMouseEnter=n.handleMouseEnter.bind(n),n.state={isTruncated:!1},n}return u()(t,e),o()(t,[{key:"handleMouseEnter",value:function(e){e.target.offsetWidth<e.target.scrollWidth&&this.setState(function(){return{isTruncated:!0}})}},{key:"buildImName",value:function(){var e=this.props,t=e.userId,n=e.isYou;return this.renderName(m.a.createElement(m.a.Fragment,null,m.a.createElement(CO.b,{memberId:t}),m.a.createElement(Dv.a,{id:t}),n&&m.a.createElement("span",{className:"p-channel_sidebar__you_label","data-qa":"channel_sidebar_name_you"},gR.t("(you)"))))}},{key:"buildMpimName",value:function(){var e=this.props,t=e.type,n=e.members,a=e.memberPresences;if("mpim"!==t||!n||!a)return null;var r=Object(Db.a)(n,function(e,t){return[m.a.createElement(Dv.a,{id:e,key:e}),t<n.length-1?", ":null]});return this.renderName(r)}},{key:"renderName",value:function(e){var t=this.props,n=t.type,a=t.userActive,r=t.displayName,i=this.state.isTruncated,o=r.toString().replace(/ /g,"-").toLowerCase();return m.a.createElement(qi.c,{delay:qi.a,position:"top-left",tip:e,tipClassName:f()({hidden:!i})},m.a.createElement("span",{dir:"auto",className:f()("p-channel_sidebar__name",{"p-channel_sidebar__name--away":"im"===n&&!a}),"data-qa":"channel_sidebar_name_"+o,onMouseEnter:this.handleMouseEnter},e))}},{key:"render",value:function(){var e=this.props,t=e.displayName;switch(e.type){case"im":return this.buildImName();case"mpim":return this.buildMpimName();default:return this.renderName(t)}}}]),t}(iR.a);yR.displayName="ChannelName",yR.propTypes=_R,yR.defaultProps=vR;var kR=yR,OR=new B.b("channel_sidebar"),CR={isChannel:h.b.bool,isPendingShared:h.b.bool,isShared:h.b.bool,isOrgShared:h.b.bool,type:h.b.oneOf(["channel","private","im","mpim"]),isSlackbot:h.b.bool,isYou:h.b.bool,isMuted:h.b.bool,isSuggested:h.b.bool,hasUnreads:h.b.bool,hasDraft:h.b.bool,isArchived:h.b.bool,isFrozen:h.b.bool,isFrozenAndInGracePeriod:h.b.bool,sharedTeamIds:h.b.arrayOf(h.b.string),displayName:h.b.string,teamDomain:h.b.string,appId:h.b.string,botId:h.b.string,isSelected:h.b.bool,unreadCount:h.b.number,badgeCount:h.b.number,userCount:h.b.number,userId:h.b.string,userActive:h.b.bool,id:h.b.string.isRequired,priority:h.b.number,selectItem:h.b.func,closeIM:h.b.func,dismissSuggestedChannel:h.b.func,isTyping:h.b.bool,isStarred:h.b.bool,members:h.b.arrayOf(h.b.string),memberPresences:h.b.arrayOf(h.b.string),onContextMenu:h.b.func,featureSidebarContextMenu:h.b.bool,index:h.b.number.isRequired,sidebarFoldersIsEnabled:h.b.bool,onDragStart:h.b.func,onDragEnd:h.b.func,onDrop:h.b.func,onDragOver:h.b.func,featureSonicPresenceManager:h.b.bool,featureCopyChannelName:h.b.bool,featureCopyChannelLink:h.b.bool,featureComposeFlow:h.b.bool,isIAP1Enabled:h.b.bool,clogger:h.b.object.isRequired,canPostInChannel:h.b.bool,canStarOrUnstarChannel:h.b.bool,featureAnnounceOnly:h.b.bool,featureSidebarVirtualized:h.b.bool,onItemSelected:h.b.func,maybeLeaveChannel:h.b.func,muteChannelById:h.b.func,unmuteChannelById:h.b.func,updateStar:h.b.func,copyChannelNameById:h.b.func,featureChannelSections:h.b.bool,shouldUseChannelSections:h.b.bool,isOrganizing:h.b.bool,setIsOrganizing:h.b.func},ER={isChannel:!0,isSelected:!1,isPendingShared:!1,isShared:!1,isOrgShared:!1,type:"channel",isSlackbot:!1,isYou:!1,isMuted:!1,isSuggested:!1,hasUnreads:!1,hasDraft:!1,isArchived:!1,isFrozen:!1,isFrozenAndInGracePeriod:!1,appId:void 0,botId:void 0,sharedTeamIds:null,displayName:"",badgeCount:0,userCount:0,userId:void 0,userActive:!0,priority:null,selectItem:d.a,closeIM:d.a,dismissSuggestedChannel:d.a,isTyping:!1,isStarred:!1,members:null,memberPresences:null,onContextMenu:d.a,teamDomain:"",featureSidebarContextMenu:!1,sidebarFoldersIsEnabled:!1,onDragStart:d.a,onDragEnd:d.a,onDrop:d.a,onDragOver:d.a,featureSonicPresenceManager:!1,featureCopyChannelName:!1,featureComposeFlow:!1,isIAP1Enabled:!1,clogger:{},canPostInChannel:!0,canStarOrUnstarChannel:!0,featureAnnounceOnly:!1,featureSidebarVirtualized:!1,onItemSelected:d.a,maybeLeaveChannel:d.a,muteChannelById:d.a,unmuteChannelById:d.a,updateStar:d.a,copyChannelNameById:d.a,featureChannelSections:!1,shouldUseChannelSections:!1,isOrganizing:!1,setIsOrganizing:d.a},jR=Object(Ct.b)(),SR=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n.closeIM=n.closeIM.bind(n),n.closeSuggestedChannel=n.closeSuggestedChannel.bind(n),n.getContextMenuTemplate=n.getContextMenuTemplate.bind(n),n.linkRef=m.a.createRef(),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.isSelected&&this.props.onItemSelected(this.linkRef.current)}},{key:"componentDidUpdate",value:function(e){!e.isSelected&&this.props.isSelected&&this.props.onItemSelected(this.linkRef.current)}},{key:"onClick",value:function(e){e.preventDefault(),jR.action("CHANNEL-SIDEBAR","Selected "+this.props.id),this.props.selectItem(this.props.id),this.clogClick()}},{key:"closeIM",value:function(e){e.preventDefault(),e.stopPropagation(),jR.action("CHANNEL-SIDEBAR","Closed "+this.props.id),this.props.closeIM({channelId:this.props.id})}},{key:"closeSuggestedChannel",value:function(e){var t=this.props,n=t.id,a=t.index,r=t.isSelected,i=t.clogger,o=t.dismissSuggestedChannel;e.preventDefault(),e.stopPropagation(),jR.action("CHANNEL-SIDEBAR","Closed suggested channel "+n),o({channelId:n}),i.track("SIDEBAR_ITEM_SUGGESTED_CLOSE",{item_type:n[0],item_id:n,index:a,is_selected:r})}},{key:"clogClick",value:function(){var e=this.props,t=e.id,n=e.index,a=e.isMuted,r=e.isSuggested,i=e.isStarred,o=e.hasUnreads,s=e.isArchived,l=e.isFrozen,c=e.isSelected,u=e.badgeCount,d=e.appId,p=e.botId;e.clogger.track("SIDEBAR_ITEM_CLICK",{item_type:t[0],item_id:t,index:n,is_muted:a,is_suggested:r,is_starred:i,has_unreads:o,is_archived:s,is_frozen:l,is_selected:c,badge_count:u,app_id:d,bot_id:p})}},{key:"shouldShowClose",value:function(){var e=this.props,t=e.type,n=e.hasUnreads,a=e.isSuggested,r=e.hasDraft;return!("im"!==t&&"mpim"!==t&&!a)&&(!n&&!r)}},{key:"shouldShowExternalSharedIcon",value:function(){var e=this.props,t=e.isShared,n=e.type;return e.isFrozenAndInGracePeriod||t&&"im"!==n&&"mpim"!==n}},{key:"shouldShowOrgSharedIcon",value:function(){var e=this.props,t=e.isOrgShared,n=e.type;return!e.isIAP1Enabled&&t&&!("im"===n||"mpim"===n)}},{key:"buildSuffixIcon",value:function(){var e=this.props,t=e.sharedTeamIds,n=e.isPendingShared,a=e.isFrozenAndInGracePeriod;return this.shouldShowExternalSharedIcon()?m.a.createElement(oR.a,{tooltip:!0,sharedTeamIds:t,className:"p-channel_sidebar__icon",pending:n||a}):this.shouldShowOrgSharedIcon()?m.a.createElement(ta.b,{size:"inherit",inline:!0,"data-qa":"sidebar-channel-icon-suffix",className:"p-channel_sidebar__channel_icon_suffix",type:"shared-channel"}):null}},{key:"buildAriaLabel",value:function(){var e=this.props,t=e.type,n=e.displayName,a=e.isShared,r=e.isOrgShared,i=e.isYou,o=e.isMuted,s=e.isSuggested,l=e.hasUnreads,c=e.hasDraft,u=e.isArchived,d=e.unreadCount,p=e.badgeCount,m=e.isSelected,h=e.userActive,b=e.isTyping,f=e.canPostInChannel,g=e.featureAnnounceOnly;if(!e.featureSidebarVirtualized)return uR({type:t,displayName:n,isShared:a,isOrgShared:r,isYou:i,isMuted:o,isSuggested:s,hasUnreads:l,hasDraft:c,isArchived:u,unreadCount:d,badgeCount:p,isSelected:m,userActive:h,isTyping:b,canPost:f,featureAnnounceOnly:g})}},{key:"getChannelLink",value:function(){var e=this.props,t=e.id,n=e.teamDomain;return Object(K.o)({channelId:t,teamDomain:n,archive:!0})}},{key:"getContextMenuTemplate",value:function(){var e=this,t=new B.b("menu"),n=this.props,a=n.id,r=n.displayName,i=n.isChannel,o=n.isStarred,s=n.isMuted,l=n.canMute,c=n.canLeave,u=n.canStarOrUnstarChannel,d=n.maybeLeaveChannel,p=n.updateStar,m=n.muteChannelById,h=n.unmuteChannelById,b=n.copyChannelNameById,f=n.featureCopyChannelName,g=n.featureCopyChannelLink,_=n.featureChannelSections,v=n.shouldUseChannelSections,y=n.isOrganizing,k=n.setIsOrganizing,O=void 0,C=void 0,E=void 0,j=void 0,S=void 0,I=void 0,w=void 0,N=void 0,T=void 0,A=void 0,R=void 0,P=void 0,M=void 0,x=void 0;i?(O=t.t("Star Channel"),C="star_channel",E=t.t("Unstar Channel"),j="unstar_channel",S=t.t("Mute {channel}",{channel:"#"+r}),I="mute_channel",w=t.t("Unmute {channel}",{channel:"#"+r}),N="unmute_channel",T=t.t("Leave {channel}",{channel:"#"+r}),A="leave_channel",f&&(R=t.t("Copy Channel Name"),P="copy_channel_name"),g&&!br.Q&&(M=t.t("Copy Channel Link"),x="copy_channel_link")):(O=t.t("Star Conversation"),C="star_conversation",E=t.t("Unstar Conversation"),j="unstar_conversation",S=t.t("Mute Conversation"),I="mute_conversation",w=t.t("Unmute Conversation"),N="unmute_conversation",T=t.t("Leave Conversation"),A="leave_conversation");var F=[];if(_&&v){var L=void 0,D=void 0;y?(D=t.t("Stop organizing sidebar"),L="stop_organizing_sidebar"):(D=t.t("Organize sidebar"),L="organize_sidebar"),F.push({label:D,labelToClog:L,click:function(){return k({isOrganizing:!y})}}),F.push({type:"separator"})}return u&&F.push({label:o?E:O,labelToClog:o?j:C,click:function(){return p(!o,{channel:a})}}),c&&F.push({label:T,labelToClog:A,click:function(){return d({channelId:a})}}),l&&F.push({label:s?w:S,labelToClog:s?N:I,click:function(){return s?h(a):m(a)}}),R&&F.push({label:R,labelToClog:P,click:function(){return b(a)}}),M&&F.push({label:M,labelToClog:x,click:function(){Object(AE.b)(e.getChannelLink())}}),F.forEach(function(t){var n=t.click;t.click=function(){return e.props.clogger.track(le.EventId.CONTEXT_MENU_ACTION,{contexts:{ui_context:{action:le.UiAction.CLICK,ui_component:le.UiComponent.SIDEBAR,ui_element:le.UiElement.SIDEBAR_CHANNEL_ITEM}},label:t.labelToClog}),n.apply(void 0,arguments)}}),F}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.type,a=e.isSlackbot,r=e.isYou,i=e.isMuted,o=e.isSuggested,s=e.hasUnreads,l=e.isArchived,c=e.badgeCount,u=e.isSelected,d=e.userCount,p=e.displayName,h=e.priority,b=e.isStarred,g=e.onContextMenu,_=e.featureSidebarContextMenu,v=e.featureSidebarVirtualized,y=e.shouldUseChannelSections,k=e.isTyping,O=e.isChannel,C=e.hasDraft,E=e.isFrozen,j=e.isFrozenAndInGracePeriod,S=e.userId,I=e.featureSonicPresenceManager,w=e.featureComposeFlow,N=e.canPostInChannel,T=e.memberPresences,A=e.members,R=e.userActive,P=pR({canPostInChannel:N,featureComposeFlow:w,hasDraft:C,isSelected:u}),M=f()("p-channel_sidebar__channel",{"p-channel_sidebar__channel--mpim":"mpim"===n,"p-channel_sidebar__channel--im-slackbot":a,"p-channel_sidebar__channel--im-you":r,"p-channel_sidebar__channel--selected":u,"p-channel_sidebar__channel--muted":i,"p-channel_sidebar__channel--suggested":o,"p-channel_sidebar__channel--unread":s&&!l,"p-channel_sidebar__channel--draft":P,"p-channel_sidebar__channel--typing":k&&!u,"p-channel_sidebar__channel--in-section":y}),x=m.a.createElement(dR.b,{count:c,className:"p-channel_sidebar__badge"}),F={"data-user-count":d},L=m.a.createElement(fR,{canPostInChannel:N,featureComposeFlow:w,featureSonicPresenceManager:I,hasDraft:C,isArchived:l,isChannel:O,isFrozen:E,isFrozenAndInGracePeriod:j,isSelected:u,isSlackbot:a,isTyping:k,type:n,userCount:d,userId:S}),D=this.buildSuffixIcon(),U=m.a.createElement(kR,{displayName:p,isYou:r,memberPresences:T,members:A,type:n,userActive:R,userId:S}),B=m.a.createElement(WA.a,ye()({href:this.getChannelLink(),ref:this.linkRef,className:M,onClick:this.onClick,onContextMenu:g},F,{"data-qa-channel-sidebar-channel":!0,"data-qa-channel-sidebar-channel-is-selected":u,"data-qa-channel-sidebar-channel-id":t,"data-qa-channel-sidebar-channel-type":n,"data-qa-channel-sidebar-is-starred":b,"data-qa-channel-sidebar-is-you":r,"data-qa-channel-sidebar-priority":h,"aria-label":this.buildAriaLabel(),draggable:this.props.sidebarFoldersIsEnabled,"data-drag-type":"channel","data-drag-id":t,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragOver:this.props.onDragOver,tabIndex:v?-1:void 0,role:v?"presentation":void 0}),L,U,D,x);if(this.shouldShowClose()){var q=OR.t("Close Direct Message with {name}",{name:p});o&&(q=OR.t("Dismiss suggested channel"));var H=m.a.createElement(_e.c,{onClick:o?this.closeSuggestedChannel:this.closeIM,className:"p-channel_sidebar__close","aria-label":v?void 0:q,"aria-hidden":!!v||void 0,tabIndex:v?-1:void 0},m.a.createElement(ta.a,{type:"times-circle-medium"}));B=m.a.createElement("div",{className:"p-channel_sidebar__close_container","data-qa":"channel_item_container"},B,H)}return _?m.a.createElement(KA.a,{getTemplate:this.getContextMenuTemplate,desktopAppOnly:!1},B):B}}]),t}(iR.a);SR.displayName="Channel",SR.propTypes=CR,SR.defaultProps=ER;var IR=SR,wR={closeIM:Fo.closeChannelApi,dismissSuggestedChannel:nR,maybeLeaveChannel:ME.a,muteChannelById:SE.a,unmuteChannelById:SE.b,updateStar:Aj.a,copyChannelNameById:function(){return PE.apply(void 0,arguments)},setIsOrganizing:jO.h},NR=Object(g.b)(function(e,t){var n=t.id,a=Object(G.e)(e,n),r=SO(e);if(!a)return{id:n,featureSidebarContextMenu:Object(y.m)(e,"feature_sidebar_context_menu"),shouldUseChannelSections:r};var i=Object(K.pb)(a)?Math.min(Math.max(Object(ne.a)(a,"members.length",1)-1,2),9):0,o=Object(K.v)(a),s="im"===o&&Object(Zt.j)(e,"show_typing")&&Object(aR.f)(e,n).length>0,l=Object(K.H)(a),c="im"!==o||"active"===Object(wO.f)(e,l),u=void 0,d=void 0;if(Object(S.a)(e)){var p=Object(xo.d)(e,l);d=Object(eo.q)(p)||void 0,u=Object(eo.p)(p)||void 0}var m=Object(y.c)(e),h="mpim"===o&&Object(K.I)(a)&&Object(aa.a)(Object(K.I)(a),function(e){return e!==m}),b="mpim"===o&&h&&Object(ft.a)(h,function(t){return Object(wO.f)(e,t)}),f=Object(y.m)(e,"feature_all_dm_mute")?Object(K.nb)(a)&&!Object(K.kb)(e,a):Object(K.nb)(a)&&(Object(K.Cb)(a)||Object(K.Bb)(a)),g=!Object(K.pb)(a)&&!Object(K.hb)(a),_=Object(K.nb)(a)||Object(K.Bb)(a),v=Object(K.x)(e,a,{publicChannelIncludeHashSign:!1,imIncludeAtSign:!1}),k=Object(we.d)(e),O=Object(De.j)(k),C=Object(De.g)(k),j=Object(K.N)(e,a),I=Object(T.g)(e);return{isSelected:Object(E.a)(e)===n,isPendingShared:Object(K.yb)(a),isShared:Object(K.ab)(a),isOrgShared:Object(K.vb)(a),isSlackbot:Object(K.Hb)(a),isYou:Object(K.Tb)(m,a),isMuted:Object(Ad.c)(e,n),isSuggested:!Object(K.nb)(a)&&Object(K.Jb)(e,a),hasUnreads:!!Object(K.U)(a),hasDraft:!I&&Object(K.y)(e,n),isArchived:Object(K.X)(a),isFrozen:Object(K.db)(a),isFrozenAndInGracePeriod:Object(K.eb)(O,a),appId:u,botId:d,sharedTeamIds:j.length?j:rR.a,displayName:v,unreadCount:Object(K.U)(a),badgeCount:Object(G.d)(e,a),userCount:i,userId:Object(K.H)(a)||a.user_id,userActive:c,type:o,id:n,isTyping:s,isStarred:Object(K.Ib)(a),canPostInChannel:Object(Bb.p)(e,a.id),featureAnnounceOnly:Object(y.m)(e,"feature_announce_only"),members:h||null,memberPresences:b||null,priority:a.priority,isPrivateChannel:Object(K.Bb)(a),isMemberOfChannel:K.nb,canMute:f,canLeave:_,canStarOrUnstarChannel:Object(K.k)(a),isChannel:g,teamDomain:C,featureSidebarContextMenu:Object(y.m)(e,"feature_sidebar_context_menu"),featureCopyChannelName:Object(y.m)(e,"feature_copy_channel_name"),featureCopyChannelLink:Object(y.m)(e,"feature_copy_channel_link"),featureSonicPresenceManager:Object(y.m)(e,"feature_sonic_presence_manager"),featureComposeFlow:I,isIAP1Enabled:Object(pE.b)(e),clogger:Object(re.a)({state:e}),featureSidebarVirtualized:Object(y.m)(e,"feature_sidebar_virtualized"),shouldUseChannelSections:r,featureChannelSections:Object(y.m)(e,"feature_channel_sections"),isOrganizing:Object(EO.d)(e)}},wR,null,{withRef:!0})(IR),TR=n("UOab"),AR=new B.b("drafts"),RR=(h.b.func,h.b.bool,h.b.func,{dispatch:d.a,featureComposeFlow:!1,undo:d.a});function PR(e){var t=e.dispatch,n=e.featureComposeFlow,a=e.undo;return n?m.a.createElement(Cn.b,null,AR.t("The draft has been deleted."),"\xa0",m.a.createElement(la.a,{onClick:function(){a(),t(Object(en.b)())}},AR.t("Undo"))):null}PR.displayName="DeleteDraftToast",PR.defaultProps=RR;var MR=Object(g.b)(function(e){return{featureComposeFlow:Object(T.g)(e)}})(PR),xR=Object(gt.b)("Restore a deleted channel draft",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.channelId,r=n.threadTs,i=n.draft;if(a&&!Object(ls.a)(i)){var o=Object(HN.d)(a,r);o&&(o.setContents({contents:i.ops}),i.range&&o.setCursor(i.range.index,i.range.length)),e(Object(an.e)({channelId:a,threadTs:r,delta:new zt.a(i.ops),broadcast:i.broadcast,range:i.range}))}});xR.meta={name:"undoDeletedChannelDraft",key:"draftsStoreThunksUndoDeletedDraftUndoDeletedChannelDraft",description:"Restore a deleted channel draft"},xR.propTypes={channelId:h.b.string.isRequired,draft:h.b.object.isRequired,threadTs:h.b.string};var FR=Object(gt.b)("Restore a deleted composer draft",function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).draft;Object(ls.a)(n)||e(Object(an.f)(n))});FR.meta={name:"undoDeletedComposerDraft",key:"draftsStoreThunksUndoDeletedDraftUndoDeletedComposerDraft",description:"Restore a deleted composer draft"},FR.propTypes={draft:h.b.object.isRequired};var LR=Object(gt.b)("Open a toast with an option to restore a deleted draft",function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).undo;e(Object(en.c)({element:m.a.createElement(MR,{undo:n})}))});LR.meta={name:"openDeleteToast",key:"draftsStoreThunksDeleteDraftWithUndoOpenDeleteToast",description:"Open a toast with an option to restore a deleted draft"},LR.propTypes={featureComposeFlow:h.b.bool,undo:h.b.func};var DR=Object(gt.b)("Clear a channel draft with the option to undo",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.channelId,r=n.threadTs,i=t(),o=Object(T.b)(i,{channelId:a,threadTs:r});if(o){e(Object(an.b)({channelId:a,threadTs:r}));var s=Object(HN.d)(a,r);s&&s.clear(),e(LR({undo:function(){return e(xR({channelId:a,threadTs:r,draft:o}))}}))}});DR.meta={name:"deleteChannelDraftWithUndo",key:"draftsStoreThunksDeleteDraftWithUndoDeleteChannelDraftWithUndo",description:"Clear a channel draft with the option to undo"},DR.propTypes={channelId:h.b.string.isRequired,threadTs:h.b.string};var UR=Object(gt.b)("Clear a composer draft with the option to undo",function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).draftId,a=t(),r=Object(T.d)(a,n);r&&(e(Object(an.a)({ids:[n]})),(Object(Th.l)(r)||Object(Th.m)(r))&&e(LR({undo:function(){return e(FR({draft:r}))}})))});UR.meta={name:"deleteComposerDraftWithUndo",key:"draftsStoreThunksDeleteDraftWithUndoDeleteComposerDraftWithUndo",description:"Clear a composer draft with the option to undo"},UR.propTypes={draftId:h.b.string.isRequired};var BR=n("SDRE"),qR=new B.b("channel_sidebar"),HR=(h.b.func,h.b.object.isRequired,h.b.string,h.b.bool,h.b.bool,h.b.func,h.b.func,h.b.bool,{dispatch:d.a,draftText:void 0,featureComposeFlow:!1,isSelected:!1,onItemSelected:d.a,selectItem:d.a,featureSidebarVirtualized:!1});function WR(e){var t=e.dispatch,n=e.draft,a=e.draftText,r=e.featureComposeFlow,i=e.isSelected,o=e.onItemSelected,s=e.selectItem,l=e.featureSidebarVirtualized,c=Object(p.useRef)();Object(p.useEffect)(function(){o(c.current)},[i,o]);var u=Object(p.useMemo)(function(){return r?Object(ls.a)(n)?"("+qR.t("unknown")+")":a?m.a.createElement(m.a.Fragment,null,Object(B.e)(r),m.a.createElement(pg.a,{className:"p-channel_sidebar__name",customContentHandler:function(e){return e.map(function(e){return Object(BR.a)(e)?{text:" "}:e})},emojiSize:Ly.a.SMALL,maxCharacters:50,noHighlights:!0,noJumbomoji:!0,stopAnimations:!0,text:a}),Object(B.d)(r)):"("+qR.t("New message")+")":""},[n,a,r]);if(!r)return null;var d=l?-1:void 0;return m.a.createElement("div",{className:"p-channel_sidebar__close_container"},m.a.createElement(fh.a,{className:f()("p-channel_sidebar__channel","p-channel_sidebar__channel--composer_draft",{"p-channel_sidebar__channel--selected":i}),onClick:function(){s("Pcomposer",{routeParams:{draftId:Object(eb.b)(n.id)}})},ref:c,tabIndex:d,role:l?"presentation":void 0},m.a.createElement(ta.b,{size:"inherit",inline:!0,className:"p-channel_sidebar__channel_icon_prefix",type:"file"}),u),m.a.createElement(qi.c,{tip:qR.t("Delete draft")},m.a.createElement(fh.a,{className:"p-channel_sidebar__close",onClick:function(){return t(UR({draftId:n.id}))},tabIndex:d,"aria-hidden":!!l||void 0},m.a.createElement(ta.b,{className:"p-channel_sidebar__delete_icon",type:"trash"}))))}WR.displayName="ComposerDraft",WR.defaultProps=HR;var GR=Object(g.b)(function(e,t){var n=t.id,a=Object(E.a)(e),r=tb(e),i=Object(T.d)(e,n),o=void 0;if(i){var s=new zt.a(i.ops),l=Object(Vf.a)(e,s);o=Object(TR.a)(e,l.blocks)}return{draft:i,draftText:o,featureComposeFlow:Object(T.g)(e),isSelected:"Pcomposer"===a&&r===n,featureSidebarVirtualized:Object(y.m)(e,"feature_sidebar_virtualized")}})(WR),KR=new B.b("channel_sidebar"),VR=(h.b.string,h.b.string.isRequired,h.b.func,h.b.func,h.b.func,h.b.string,h.b.bool,h.b.bool,{channelName:void 0,dispatch:d.a,onItemSelected:d.a,selectItem:d.a,threadTs:void 0,featureComposeFlow:!1,featureSidebarVirtualized:!1});function zR(e){var t=e.channelName,n=e.channelId,a=e.dispatch,r=e.featureComposeFlow,i=e.featureSidebarVirtualized,o=e.onItemSelected,s=e.selectItem,l=e.threadTs,c=Object(p.useRef)();if(Object(p.useEffect)(function(){o(c.current)},[o]),!r)return null;var u=i?-1:void 0;return m.a.createElement("div",{className:"p-channel_sidebar__close_container"},m.a.createElement(fh.a,{className:"p-channel_sidebar__channel p-channel_sidebar__channel--thread_draft",onClick:function(){l?a(Object(Gf.a)({channelId:n,threadTs:l})):s(n)},ref:c,tabIndex:u,role:i?"presentation":void 0},m.a.createElement(ta.b,{size:"inherit",inline:!0,className:"p-channel_sidebar__channel_icon_prefix",type:"channel-pane-hash"}),m.a.createElement("span",{className:"p-channel_sidebar__name"},t),l&&m.a.createElement(ta.b,{className:"p-channel_sidebar__icon p-channel_sidebar__reply_icon",type:"small-reply"})),m.a.createElement(qi.c,{tip:KR.t("Delete draft")},m.a.createElement(fh.a,{className:"p-channel_sidebar__close",onClick:function(){a(DR({channelId:n,threadTs:l}))}},m.a.createElement(ta.b,{className:"p-channel_sidebar__delete_icon",type:"trash"}))))}zR.displayName="ChannelDraft",zR.defaultProps=VR;var YR=Object(g.b)(function(e,t){var n=t.channelId,a=Object(G.e)(e,n);return{channelName:Object(K.x)(e,a,{publicChannelIncludeHashSign:!1,imIncludeAtSign:!1}),featureComposeFlow:Object(T.g)(e),featureSidebarVirtualized:Object(y.m)(e,"feature_sidebar_virtualized")}})(zR),QR=n("V2L1"),XR=new B.b("channel_sidebar"),JR=(h.b.string.isRequired,h.b.string.isRequired,h.b.string,h.b.string,h.b.bool,h.b.number,h.b.bool,h.b.func,h.b.bool,h.b.string,h.b.bool,h.b.func,h.b.func,h.b.string,h.b.func,h.b.bool,{isSelected:!1,labelUnread:"",hasUnreads:!1,badgeCount:0,icon:void 0,selectItem:d.a,isDim:!1,qaLabel:"",disabledInSonic:!1,onItemSelected:d.a,onClick:d.a,className:"",renderLinkContent:null,featureSidebarVirtualized:!1}),ZR=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n.linkRef=m.a.createRef(),n.state={},n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.isSelected&&this.props.onItemSelected(this.linkRef.current)}},{key:"componentDidUpdate",value:function(e){!e.isSelected&&this.props.isSelected&&this.props.onItemSelected(this.linkRef.current)}},{key:"onClick",value:function(e){Object(Ct.b)().action("CHANNEL-SIDEBAR","Selected "+this.props.id),this.props.selectItem(this.props.id,e),"function"==typeof this.props.onClick&&this.props.onClick()}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.label,a=e.labelUnread,r=e.icon,i=e.hasUnreads,o=e.badgeCount,s=e.isSelected,l=e.isDim,c=e.qaLabel,u=e.disabledInSonic,d=e.className,h=e.renderLinkContent,b=e.featureSidebarVirtualized,g=f()("p-channel_sidebar__link",{"p-channel_sidebar__link--all-unreads":"Vall_unreads"===t,"p-channel_sidebar__link--all-threads":"Vall_threads"===t,"p-channel_sidebar__link--search":"Vsearch"===t,"p-channel_sidebar__link--invites":"Vinvites"===t,"p-channel_sidebar__link--add-channel":"Vadd_channel"===t,"p-channel_sidebar__link--selected":s,"p-channel_sidebar__link--unread":i,"p-channel_sidebar__link--dim":l},d),_=i&&a?a:n,v=m.a.createElement("span",{className:"p-channel_sidebar__name","data-qa":"channel_sidebar_name_"+c.toLowerCase()},_),y=Object(aa.a)([s?XR.t("selected"):null,i&&!o?XR.t("has unreads"):null,o?XR.t("{count} {count, plural, =1 {unread highlight} other {unread highlights}}",{count:o}):null],sR.a),k=_+(y.length?" ("+y.join(", ")+")":""),O=m.a.createElement(dR.b,{count:o,className:"p-channel_sidebar__badge"}),C=r&&m.a.createElement(ta.b,{type:r,size:"inherit",className:"p-channel_sidebar__link__icon"}),E=m.a.createElement(_e.c,{role:b?"presentation":void 0,className:g,onClick:this.onClick,"aria-label":b?void 0:k,"data-sidebar-link-id":t,"data-qa-channel-sidebar-link-id":t,ref:this.linkRef,tabIndex:b?-1:void 0},h?h({icon:C,name:v,badge:O}):m.a.createElement(p.Fragment,null,C,v,O));return u?m.a.createElement(QR.a,null,E):E}}]),t}(p.PureComponent);ZR.displayName="Link",ZR.defaultProps=JR;var $R=ZR,eP=new B.b("channel_sidebar"),tP=Object(g.b)(function(e){return{id:"Vall_threads",label:eP.t("Threads"),labelUnread:eP.t("Threads"),hasUnreads:Object(y.m)(e,"feature_incremental_unread_counts")?Object(te.j)(e):Object(ee.c)(e),badgeCount:Object(y.m)(e,"feature_incremental_unread_counts")?Object(te.e)(e):Object(ee.b)(e),isSelected:"Vall_threads"===Object(E.a)(e),featureSidebarVirtualized:Object(y.m)(e,"feature_sidebar_virtualized")}},null,null,{withRef:!0})($R),nP=new B.b("channel_sidebar"),aP=Object(g.b)(function(e){var t=Object(y.m)(e,"feature_primary_search")&&Object(L.a)(e)?nP.t("Search Results"):"",n=Object(y.m)(e,"feature_sidebar_virtualized");return{id:"Vsearch",label:t,isSelected:"Vsearch"===Object(E.a)(e),featureSidebarVirtualized:n}})($R),rP=new B.b("channel_sidebar"),iP=(h.b.string.isRequired,h.b.bool,h.b.string,h.b.object.isRequired,h.b.func.isRequired,h.b.bool.isRequired,h.b.func,h.b.bool,{isDim:!1,qaLabel:"",onClickClose:d.a,featureSidebarVirtualized:!1}),oP=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onItemSelect=n.onItemSelect.bind(n),n}return u()(t,e),o()(t,[{key:"onItemSelect",value:function(){this.props.clogger.track("SIDEBAR_ITEM_CLICK",{contexts:{ui_context:{step:"ADD_CHANNEL",action:"click",ui_component:"SIDEBAR"}}}),this.props.openChannelBrowser()}},{key:"render",value:function(){var e=this.props,t=e.label,n=e.qaLabel,a=e.isDim,r=e.onClickClose,i=e.featureNewxp2798,o=e.featureSidebarVirtualized,s=o?-1:void 0,l=i&&!o?rP.t("Hide Add Channel button"):null;return m.a.createElement("div",{className:"p-channel_sidebar__close_container"},m.a.createElement($R,{key:"Vadd_channel",id:"Vadd_channel",isDim:a,qaLabel:n,label:t,selectItem:this.onItemSelect,featureSidebarVirtualized:o}),m.a.createElement(fh.a,{onClick:r,className:"p-channel_sidebar__close","aria-hidden":!!o||void 0,"aria-label":l,tabIndex:s},m.a.createElement(ta.b,{type:"times-circle-medium"})))}}]),t}(m.a.Component);oP.displayName="AddChannelLink";var sP={openChannelBrowser:function(){return ge.a.apply(void 0,arguments)}};oP.defaultProps=iP;var lP=Object(g.b)(function(e){return{clogger:Object(re.a)({state:e}),featureNewxp2798:Object(y.m)(e,"feature_newxp_2798"),featureSidebarVirtualized:Object(y.m)(e,"feature_sidebar_virtualized")}},sP)(oP),cP=(h.b.string.isRequired,h.b.shape({label:h.b.func.isRequired,sidebar:h.b.shape({icon:h.b.string.isRequired,isBold:h.b.func,badgeCount:h.b.func,getCloseLinkLabel:h.b.func})}).isRequired,h.b.bool,h.b.number,h.b.bool,h.b.bool,h.b.func,h.b.func,h.b.bool,{isBold:!1,badgeCount:void 0,isSelected:!1,isCloseButtonVisible:!1,onClickClose:d.a,selectItem:d.a,featureSidebarVirtualized:!1}),uP=function(e){var t=e.id,n=e.views,a=e.isBold,r=e.isCloseButtonVisible,i=e.onClickClose,o=e.badgeCount,s=e.featureSidebarVirtualized,l=Ep()(e,["id","views","isBold","isCloseButtonVisible","onClickClose","badgeCount","featureSidebarVirtualized"]),c=Object(Ib.a)(n.label)&&n.label(),u=n.sidebar||{},d=u.icon,p=u.getCloseLinkLabel,h=m.a.createElement($R,ye()({},l,{id:t,label:c,className:"p-channel_sidebar__link--page_"+t.toLowerCase(),icon:d,hasUnreads:a,badgeCount:o,qaLabel:"page_"+t,featureSidebarVirtualized:s}));if(!r)return h;var b=Object(Ib.a)(p)?p():"",f=m.a.createElement(fh.a,{onClick:i,className:"p-channel_sidebar__close p-channel_sidebar__close--circle","aria-label":s?void 0:b,"aria-hidden":!!s||void 0,tabIndex:s?-1:void 0},m.a.createElement(ta.b,{type:"times-circle-medium"}));return m.a.createElement("div",{className:"p-channel_sidebar__close_container"},h,f)};uP.displayName="PageLink",uP.defaultProps=cP;var dP=Object(g.b)(function(e,t){var n=t.id,a=Sk(n),r=a.sidebar||{};return{id:n,views:a,isBold:Object(Ib.a)(r.isBold)&&r.isBold(e),badgeCount:Object(Ib.a)(r.badgeCount)?r.badgeCount(e):void 0,isSelected:Object(E.a)(e)===n,isCloseButtonVisible:Object(Ib.a)(r.onClickClose),featureSidebarVirtualized:Object(y.m)(e,"feature_sidebar_virtualized")}},function(e,t){var n=Sk(t.id).sidebar||{};return{onClickClose:Object(Ib.a)(n.onClickClose)?function(){n.onClickClose(e)}:null,onClick:Object(Ib.a)(n.onClick)?function(){n.onClick(e)}:null,renderLinkContent:n.renderLinkContent}})(uP),pP=new B.b("channel_sidebar"),mP=function(e){var t=e.selectItem,n=e.dim,a=e.label,r=e.qaLabel,i=e.showClose,o=e.onClickClose,s=e.featureSidebarVirtualized,l=a||pP.t("Invite people",{fallbackHash:"a937c4ac396e25f4c9a290d468e33c668ec6ff69"}),c=s?-1:void 0,u=m.a.createElement($R,{key:"Vinvites",id:"Vinvites",label:l,selectItem:t,isDim:n,qaLabel:r,featureSidebarVirtualized:s});if(!i)return u;var d=m.a.createElement(fh.a,{onClick:o,className:"p-channel_sidebar__close","aria-label":s?void 0:pP.t("Hide Invite People button"),tabIndex:c,"aria-hidden":!!s||void 0},m.a.createElement(ta.b,{type:"times-circle-medium"}));return m.a.createElement("div",{className:"p-channel_sidebar__close_container"},u,d)};mP.displayName="InvitePeopleLink",mP.defaultProps={selectItem:d.a,dim:!0,label:void 0,qaLabel:"",showClose:!1,onClickClose:d.a,featureSidebarVirtualized:!1};var hP=Object(jp.a)(mP),bP=n("YCXn"),fP=Object(gt.b)("Dismiss Add Apps link in sidebar",function(e){e(Object(Tn.f)({pref:"add_apps_prompt_dismissed",value:!0}))});fP.meta={name:"dismissInstallAppsPrompt",key:"actionsDismissInstallAppsPromptDismissInstallAppsPrompt",description:"Dismiss Add Apps link in sidebar"};var gP=fP,_P=n("97va"),vP=new B.b("channel_sidebar"),yP=(h.b.object.isRequired,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.number,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.func,{hideAppLinkPrompt:d.a,dismissInstallAppsPrompt:d.a,openAppsBrowserModal:d.a,openAppLauncherView:d.a,clogAppLauncherOpen:d.a,appSuggestionsCount:0,featureM11nAppsBrowser:!1,featureAppLauncher:!1,featureSidebarVirtualized:!1,appLinkImpression:!1,setAppLinkImpressionClogged:d.a}),kP=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleAppsBrowserClick=n.handleAppsBrowserClick.bind(n),n.dismissLink=n.dismissLink.bind(n),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.appLinkImpression||(this.clogEvent("impression"),this.props.setAppLinkImpressionClogged())}},{key:"clogEvent",value:function(e){this.props.clogger.track("APP_ADD_APPS_PROMPT",{contexts:{ui_context:{action:e,ui_element:"ADD_APPS"}}})}},{key:"handleAppsBrowserClick",value:function(){this.clogEvent("click"),this.props.clogger.track("INSTALL_APPS_LINK_APP_BROWSER_CLICK"),this.props.featureM11nAppsBrowser?this.props.featureAppLauncher?(this.props.openAppLauncherView(),this.props.clogAppLauncherOpen({eventId:"APP_LAUNCHER_OPEN_FROM_ADD_APPS_CTA"})):this.props.openAppsBrowserModal():Object(bP.a)()}},{key:"dismissLink",value:function(){this.props.hideAppLinkPrompt(),this.clogEvent("decline"),this.props.dismissInstallAppsPrompt()}},{key:"render",value:function(){var e=this.props,t=e.appSuggestionsCount,n=e.featureSidebarVirtualized,a=t>1?vP.t("Add more apps"):vP.t("Add apps"),r=vP.t('Dismiss "Add apps" prompt'),i=n?-1:void 0;return m.a.createElement("div",{className:"p-channel_sidebar__close_container"},m.a.createElement(_e.c,{className:"p-channel_sidebar__link p-channel_sidebar__link--dim p-channel_sidebar__link--add-apps",onClick:this.handleAppsBrowserClick,"data-qa":"add_apps_link",role:n?"presentation":void 0,tabIndex:i},m.a.createElement("span",{className:"p-channel_sidebar__name"},a)),m.a.createElement(_e.c,{onClick:this.dismissLink,className:"p-channel_sidebar__close","aria-label":n?void 0:r,"data-qa":"add_apps_dismiss_link",tabIndex:i,"aria-hidden":!!n||void 0},m.a.createElement(ta.b,{type:"times-circle-medium"})))}}]),t}(p.Component);kP.displayName="InstallAppsLink",kP.defaultProps=yP;var OP=Object(g.b)(function(e){return{clogger:Object(re.a)({state:e}),appLinkImpression:Object(NN.c)(e),appSuggestionsCount:(Object(NN.g)(e)||[]).length,featureM11nAppsBrowser:Object(y.m)(e,"feature_m11n_apps_browser"),featureAppLauncher:Object(jg.a)(e),featureSidebarVirtualized:Object(y.m)(e,"feature_sidebar_virtualized")}},function(e){return{setAppLinkImpressionClogged:function(){return e(NN.n.apply(void 0,arguments))},hideAppLinkPrompt:function(){return e(NN.j.apply(void 0,arguments))},dismissInstallAppsPrompt:function(){return e(gP.apply(void 0,arguments))},openAppsBrowserModal:function(){return e(DE.a.apply(void 0,arguments))},openAppLauncherView:function(){return e(_P.a.apply(void 0,arguments))},clogAppLauncherOpen:function(){return e(Xh.a.apply(void 0,arguments))}}})(kP),CP=n("4qCO"),EP=(h.b.string.isRequired,h.b.string.isRequired,h.b.bool.isRequired,h.b.string.isRequired,h.b.string.isRequired,h.b.string.isRequired,h.b.string.isRequired,h.b.string.isRequired,h.b.object.isRequired,h.b.object.isRequired,h.b.func,h.b.func,h.b.func,h.b.string,h.b.bool,{setUserPrefByApi:d.a,hideAppSuggestion:d.a,setAppSuggestionImpressionClogged:d.a,onboardingRoleApps:"",featureSidebarVirtualized:!1});function jP(e){var t=e.appKey,n=e.appId,a=e.isInstall,r=e.setUserPrefByApi,i=e.hideAppSuggestion,o=e.dismissKey,s=e.href,l=e.text,c=e.label,u=e.clogUiElement,d=e.clogger,h=e.appSuggestionImpressions,b=e.setAppSuggestionImpressionClogged,f=e.onboardingRoleApps,g=e.featureSidebarVirtualized,_=Object(p.useCallback)(function(e){d.track(le.EventId.APP_SIDEBAR_PROMPTS,{contexts:{ui_context:{action:e,ui_element:u},core:{app_id:n}}})},[n,d,u]);Object(p.useEffect)(function(){h[t]||(b(t),_("impression"))},[h,b,_,t]);var v=Object(p.useCallback)(function(){i(t),a||r({pref:o,value:!0}),_("click")},[t,i,a,_,r,o]),y=Object(p.useCallback)(function(){i(t);var e=(f||"").split(",");e.includes(n)&&(e.splice(e.indexOf(n),1),r({pref:"onboarding_role_apps",value:e.join(",")})),r({pref:o,value:!0}),_("decline")},[f,n,i,t,r,o,_]),k=g?-1:void 0,O=g?void 0:c;return m.a.createElement("div",{className:"p-channel_sidebar__close_container"},m.a.createElement(la.a,{"data-qa":"app_suggestion_prompt_cta",className:"p-channel_sidebar__link p-channel_sidebar__link--dim p-channel_sidebar__link--add-apps",href:s,onClick:v,tabIndex:k,role:g?"presentation":void 0},m.a.createElement("span",{className:"p-channel_sidebar__name"},l)),m.a.createElement(_e.c,{"data-qa":"app_suggestion_prompt_dismiss",onClick:y,className:"p-channel_sidebar__close","aria-label":O,"aria-hidden":!!g||void 0,tabIndex:k},m.a.createElement(ta.b,{type:"times-circle-medium"})))}jP.displayName="AppSuggestionLink",jP.defaultProps=EP;var SP=Object(g.b)(function(e,t){var n=t.appKey;return ye()({},oA(e,n),{clogger:Object(re.a)({state:e}),onboardingRoleApps:Object(Zt.j)(e,"onboarding_role_apps"),appSuggestionImpressions:Object(NN.e)(e),featureSidebarVirtualized:Object(y.m)(e,"feature_sidebar_virtualized")})},function(e){return{setUserPrefByApi:function(){return e(Tn.f.apply(void 0,arguments))},hideAppSuggestion:function(){return e(NN.k.apply(void 0,arguments))},setAppSuggestionImpressionClogged:function(){return e(NN.o.apply(void 0,arguments))}}})(jP),IP=(h.b.arrayOf(h.b.shape({appKey:h.b.string.isRequired,appName:h.b.string.isRequired})),function(e,t){var n=e.appName,a=t.appName;return Object(CP.a)(n,a)});function wP(e){var t=e.displayedAppSuggestionsList;return m.a.createElement(p.Fragment,null,t.sort(IP).map(function(e){var t=e.appKey;return m.a.createElement(SP,{appKey:t,key:t})}))}wP.displayName="AppSuggestionLinks",wP.defaultProps={displayedAppSuggestionsList:[]};var NP=Object(g.b)(function(e){return{displayedAppSuggestionsList:Object(NN.g)(e)}})(wP),TP=n("GRy9"),AP=Object(gt.b)("Channel Sections: UI action when the collapsed state of a custom or default section is toggled",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.defaultSectionName,r=n.isCollapsed;if(!a)throw new Error("NOT YET IMPLEMENTED");e(Object(jO.f)({defaultSectionName:a,isCollapsed:r}))});AP.meta={name:"setSectionCollapsed",key:"channelSectionsStoreChannelSectionsThunksSetSectionCollapsed",description:"Channel Sections: UI action when the collapsed state of a custom or default section is toggled"},AP.propTypes={defaultSectionName:h.b.oneOf(hT.a),channelSectionId:h.b.string,isCollapsed:h.b.bool.isRequired};var RP=Object(gt.b)("Channel Sections: create a new channel section",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{type:"standard",nextChannelSectionId:null},a=n.type,r=n.name,i=n.emoji,o=n.nextChannelSectionId,s="local-"+Object(jf.a)();return e(Object(jO.j)({channelSection:{id:s,type:a,name:r,emoji:i,nextChannelSectionId:o}})),e(Object(jO.l)({localChannelSection:{id:s,isCollapsed:!1,isEditable:!1}})),e(Object(TP.c)({name:r,emoji:i,type:a,nextChannelSectionId:o})).then(function(t){e(Object(jO.b)({channelSectionId:s})),e(Object(jO.j)({channelSection:{id:t.channel_section_id,type:a,name:r,emoji:i,nextChannelSectionId:o}})),e(Object(jO.c)({channelSectionId:s})),e(Object(jO.l)({localChannelSection:{id:t.channel_section_id,isCollapsed:!1,isEditable:!0}}))}).catch(function(){e(Object(jO.b)({channelSectionId:s})),e(Object(jO.c)({channelSectionId:s}))})});RP.meta={name:"createChannelSection",key:"channelSectionsStoreChannelSectionsThunksCreateChannelSection",description:"Channel Sections: create a new channel section"},RP.propTypes={type:h.b.oneOf(["starred","standard"]).isRequired,name:h.b.string.isRequired,emoji:h.b.string.isRequired,nextChannelSectionId:h.b.string};var PP=Object(gt.b)("Channel Sections: update a channel section",function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).channelSection,a=t(),r=Object(EO.b)(a,n.id);return e(Object(jO.j)({channelSection:n})),e(Object(TP.f)({channelSectionId:n.id,name:n.name,emoji:n.emoji,type:n.type,nextChannelSectionId:n.nextChannelSectionId})).catch(function(){e(Object(jO.j)({channelSection:r}))})});PP.meta={name:"updateChannelSection",key:"channelSectionsStoreChannelSectionsThunksUpdateChannelSection",description:"Channel Sections: update a channel section"},PP.propTypes={channelSection:hT.j.isRequired};var MP=Object(gt.b)("Channel Sections: delete a channel section",function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).channelSectionId,a=t(),r=Object(EO.b)(a,n);return e(Object(jO.b)({channelSectionId:n})),e(Object(TP.d)({channelSectionId:n})).catch(function(){e(Object(jO.j)({channelSection:r}))})});MP.meta={name:"deleteChannelSection",key:"channelSectionsStoreChannelSectionsThunksDeleteChannelSection",description:"Channel Sections: delete a channel section"},MP.propTypes={channelSectionId:h.b.string.isRequired};var xP=Object(gt.b)("Channel Sections: insert or update a channel within a channel section",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{nextChannelId:null},a=n.channelSectionId,r=n.channelId,i=n.nextChannelId,o=Object(EO.c)(t());return e(Object(jO.k)({channelSectionId:a,channelId:r,nextChannelId:i})),e(Object(TP.a)({channelSectionId:a,channelId:r,nextChannelId:i})).catch(function(){e(Object(jO.e)({channelSectionId:a,channelIds:o}))})});xP.meta={name:"upsertChannelSectionChannel",key:"channelSectionsStoreChannelSectionsThunksUpsertChannelSectionChannel",description:"Channel Sections: insert or update a channel within a channel section"},xP.propTypes={channelSectionId:h.b.string.isRequired,channelId:h.b.string.isRequired,nextChannelId:h.b.string};var FP=Object(gt.b)("Channel Sections: remove a channel from a channel section",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.channelSectionId,r=n.channelId,i=Object(EO.c)(t());return e(Object(jO.d)({channelSectionId:a,channelId:r})),e(Object(TP.b)({channelSectionId:a,channelId:r})).catch(function(){e(Object(jO.e)({channelSectionId:a,channelIds:i}))})});FP.meta={name:"removeChannelSectionChannel",key:"channelSectionsStoreChannelSectionsThunksRemoveChannelSectionChannel",description:"Channel Sections: remove a channel from a channel section"},FP.propTypes={channelSectionId:h.b.string.isRequired,channelId:h.b.string.isRequired},Object(dn.a)("channelSections",{create:function(e,t,n,a,r){return Object(_.dispatchForTeamId)(e,RP({type:a,name:t,emoji:n,nextChannelSectionId:r}))},update:function(e,t,n){return Object(_.dispatchForTeamId)(e,PP({channelSectionId:t,channelSection:n}))},deleteSection:function(e,t){return Object(_.dispatchForTeamId)(e,MP({channelSectionId:t}))},upsertChannel:function(e,t,n,a){return Object(_.dispatchForTeamId)(e,xP({channelSectionId:t,channelId:n,nextChannelId:a}))},removeChannel:function(e,t,n){return Object(_.dispatchForTeamId)(e,FP({channelSectionId:t,channelId:n}))}});var LP=new B.b("channel_browser_coachmark"),DP=(h.b.string.isRequired,h.b.string,h.b.string,h.b.node,h.b.string,h.b.string,h.b.number,h.b.func,h.b.bool,h.b.node,h.b.string,h.b.func,h.b.bool,h.b.bool,h.b.func,h.b.func,h.b.bool,h.b.bool,h.b.node,h.b.object,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.oneOf(hT.a),h.b.func,h.b.number,h.b.bool,{qaLabel:"",iconClass:null,tooltip:"",headerAriaLabel:"",tooltipClassName:null,tooltipArrowOffset:void 0,onLabelClick:d.a,showPlus:!1,plusTooltip:null,plusAriaLabel:"",onPlusClick:d.a,seenChannelBrowserCoachmark:!1,hasRecentlySharedAChannel:!1,setUserPrefByApi:d.a,openChannelBrowser:d.a,featureChannelIsRemoveCreateSharedChannel:!1,isSelected:!1,secondaryContent:void 0,clogger:{track:d.a},featureSidebarVirtualized:!1,defaultSectionName:void 0,shouldUseChannelSections:!1,isCollapsed:!1,isEmpty:!1,setSectionCollapsed:d.a,badgeCount:0,hasUnreads:!1}),UP={defaultSectionName:h.b.oneOf(hT.a),channelIds:h.b.arrayOf(h.b.string)},BP={defaultSectionName:void 0,channelIds:[]},qP=Object(Ct.b)(),HP=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onLabelClick=n.onLabelClick.bind(n),n.onPlusClick=n.onPlusClick.bind(n),n.setTooltipRef=n.setTooltipRef.bind(n),n.setPlusTooltipRef=n.setPlusTooltipRef.bind(n),n.onCollapseToggleClick=n.onCollapseToggleClick.bind(n),n}return u()(t,e),o()(t,[{key:"onCollapseToggleClick",value:function(e){e.preventDefault(),qP.action("CHANNEL-SIDEBAR","Toggled collapsed state of heading "+this.props.qaLabel);var t=this.props,n=t.defaultSectionName,a=t.isCollapsed;this.props.setSectionCollapsed({defaultSectionName:n,isCollapsed:!a})}},{key:"onLabelClick",value:function(e){this.props.isCollapsed?this.onCollapseToggleClick(e):(e.preventDefault(),qP.action("CHANNEL-SIDEBAR","Selected heading "+this.props.qaLabel),this.props.onLabelClick(),this.tooltip&&this.tooltip.hideTip())}},{key:"onPlusClick",value:function(e){e.preventDefault(),qP.action("CHANNEL-SIDEBAR","Clicked plus button for "+this.props.qaLabel),this.props.onPlusClick(),this.plusTooltip&&this.plusTooltip.hideTip(),this.props.clogger.track(le.EventId.SIDEBAR_PLUS_CLICK,{label:this.props.qaLabel})}},{key:"setTooltipRef",value:function(e){this.tooltip=e}},{key:"setPlusTooltipRef",value:function(e){this.plusTooltip=e}},{key:"determineTabIndexForPlus",value:function(){var e=this.props,t=e.onPlusClick,n=e.onLabelClick;return e.featureSidebarVirtualized?-1:t===n?"-1":void 0}},{key:"renderIconMaybe",value:function(){var e=this.props.iconClass;return e?m.a.createElement(ta.b,{size:"inherit",type:e}):null}},{key:"renderSectionHeadingRightMaybe",value:function(){var e=this.props,t=e.showPlus,n=e.plusTooltip,a=e.plusAriaLabel,r=e.qaLabel,i=e.onPlusClick,o=e.onLabelClick,s=e.featureSidebarVirtualized,l=e.isCollapsed,c=e.badgeCount,u=null;if(this.props.shouldUseChannelSections&&l&&c>0)u=m.a.createElement(dR.b,{className:"p-channel_sidebar__badge",style:dR.a.red,count:c});else if(t){var d=this.determineTabIndexForPlus(),p=i===o||s?"true":void 0,h=m.a.createElement(_e.c,{className:"p-channel_sidebar__section_heading_plus",onClick:this.onPlusClick,"aria-label":s?void 0:a,"aria-hidden":p,tabIndex:d,"data-qa":"channel_sidebar__plus__"+r});u=n?m.a.createElement(qi.c,{tip:n,position:"top",ref:this.setPlusTooltipRef,delay:qi.a},h):h}return u?m.a.createElement("div",{className:"p-channel_sidebar__section_heading_right"},u):null}},{key:"renderSharedChannelsCoachmarkMaybe",value:function(e){var t=this,n=this.props,a=n.seenChannelBrowserCoachmark,r=n.hasRecentlySharedAChannel,i=n.qaLabel,o=n.featureChannelIsRemoveCreateSharedChannel;if("shared_channels"!==i&&!o||"channels"!==i&&o||a||!r)return e;var s=function(){t.props.setUserPrefByApi({pref:"seen_channel_browser_admin_coachmark",value:!0})},l=m.a.createElement(Mn.a,{secondaryCallToActionText:LP.t("Close"),primaryCallToActionText:LP.t("Show Me"),title:LP.t("View and manage shared channels"),content:LP.t("Access the shared channels in your workspace, and any pending invitations, right from the sidebar."),isOpen:!0,onClickSecondaryButton:s,onClickPrimaryButton:function(){s(),t.props.openChannelBrowser()},orientation:"right",closeCoachmark:s},m.a.createElement("h3",{className:"margin_bottom_50"},LP.t("View and manage shared channels")),m.a.createElement("p",null,LP.t("Access the shared channels in your workspace, and any pending invitations, right from the sidebar.")));return m.a.createElement("div",null,m.a.createElement(Vn.b,{orientation:"right",coachmarkElement:l},e))}},{key:"renderCollapseToggle",value:function(){return this.props.shouldUseChannelSections&&this.props.defaultSectionName&&!this.props.isEmpty?m.a.createElement("span",{role:"presentation","aria-hidden":"true",onClick:this.onCollapseToggleClick},m.a.createElement(ta.b,{"data-qa":"channel-section-collapse",className:"p-channel_sidebar__section_heading_expand",type:"chevron-medium-right",size:"inherit",inline:!0})):null}},{key:"render",value:function(){var e=this.props,t=e.label,n=e.qaLabel,a=e.tooltip,r=e.headerAriaLabel,i=e.tooltipClassName,o=e.tooltipArrowOffset,s=e.onLabelClick,l=e.isSelected,c=e.isCollapsed,u=e.secondaryContent,p=e.featureSidebarVirtualized,h=e.shouldUseChannelSections,b=e.hasUnreads,g=p?-1:void 0,_=void 0,v=s!==d.a||h&&c;_=v?m.a.createElement(_e.c,{className:f()("p-channel_sidebar__section_heading_label","p-channel_sidebar__section_heading_label--clickable",{"p-channel_sidebar__section_heading_label--unreads":b}),onClick:this.onLabelClick,"aria-label":p?void 0:r,"aria-hidden":!!p||void 0,tabIndex:g,"data-qa":"channel_sidebar__section_heading_label__"+n},this.renderIconMaybe()," ",t):m.a.createElement("span",{role:p?void 0:"heading","aria-level":p?void 0:"2",className:f()("p-channel_sidebar__section_heading_label",{"p-channel_sidebar__section_heading_label--unreads":b}),"data-qa":"channel_sidebar__section_heading_label__"+n},this.renderIconMaybe()," ",t);var y=a&&!c?m.a.createElement(qi.c,{tip:a,tipClassName:i,position:"top-left",tipArrowOffset:o,ref:this.setTooltipRef,delay:qi.a},this.renderSharedChannelsCoachmarkMaybe(_)):_,k=v&&!p?m.a.createElement("h2",{className:"offscreen"},t):null,O=!p&&this.props.onPlusClick!==this.props.onLabelClick,C=O?"group":void 0,E=O?t:void 0;return m.a.createElement("div",{className:f()("p-channel_sidebar__section_heading",{"p-channel_sidebar__section_heading--selected":l,"p-channel_sidebar__section_heading--collapsed":c}),"data-qa-channel-sidebar-section-heading":n,"data-qa":n,role:C,"aria-label":E},this.renderCollapseToggle(),k,y,this.renderSectionHeadingRightMaybe(),u)}}]),t}(m.a.PureComponent);HP.displayName="SectionHeading",HP.defaultProps=DP;var WP={setUserPrefByApi:function(){return Tn.f.apply(void 0,arguments)},openChannelBrowser:function(){return ge.a.apply(void 0,arguments)},setSectionCollapsed:function(){return AP.apply(void 0,arguments)}},GP=Object(g.b)(function(e,t){var n=t.defaultSectionName,a=t.channelIds,r=SO(e),i=!!n&&Object(EO.f)(e,n),o=!1,s=0;return r&&i&&a.forEach(function(t){if(Object(_a.a)(t)){var n=Object(G.e)(e,t),a=Object(K.U)(n),r=Object(G.d)(e,n);o=o||a>0,s+=r}}),{seenChannelBrowserCoachmark:Object(Zt.j)(e,"seen_channel_browser_admin_coachmark"),hasRecentlySharedAChannel:Object(Zt.j)(e,"has_recently_shared_a_channel"),featureChannelIsRemoveCreateSharedChannel:Object(y.m)(e,"feature_channel_is_remove_create_shared_channel"),clogger:Object(re.a)({state:e}),featureSidebarVirtualized:Object(y.m)(e,"feature_sidebar_virtualized"),isCollapsed:r&&i,isEmpty:0===a.length,shouldUseChannelSections:r,hasUnreads:o,badgeCount:s}},WP)(HP);GP.propTypes=UP,GP.defaultProps=BP;var KP=GP,VP=new B.b("channel_sidebar"),zP=(h.b.bool,h.b.bool,h.b.bool,h.b.func,h.b.func,h.b.bool,h.b.func,h.b.arrayOf(h.b.string),{featureChannelSidebarDraftsSection:!1,featureComposeFlow:!1,isSelected:!1,selectItem:d.a,setUserPrefByApi:d.a,showDraftsSectionCoachmark:!1,scrollToTopOfChannelList:d.a,channelIds:[]}),YP=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={showCoachmark:e.showDraftsSectionCoachmark},n.markCoachmarkSeen=n.markCoachmarkSeen.bind(n),n.onShow=n.onShow.bind(n),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.showDraftsSectionCoachmark&&this.props.scrollToTopOfChannelList()}},{key:"onShow",value:function(){this.state.showCoachmark&&this.props.setUserPrefByApi({pref:"seen_drafts_section_coachmark",value:!0})}},{key:"markCoachmarkSeen",value:function(){this.setState(function(){return{showCoachmark:!1}})}},{key:"render",value:function(){var e=this.props,t=e.featureChannelSidebarDraftsSection,n=e.featureComposeFlow,a=e.isSelected,r=e.selectItem,i=e.channelIds,o=this.state.showCoachmark;if(!t)return null;var s={};if(n){var l=VP.t("View all drafts");s.onLabelClick=function(){return r("Pdrafts")},s.headerAriaLabel=l,s.tooltip=l,s.tooltipArrowOffset=20,s.isSelected=a}var c=m.a.createElement(KP,ye()({},s,{label:VP.t("Drafts"),defaultSectionName:hT.d,qaLabel:"drafts",channelIds:i}));if(o){this.onShow();var u=VP.t("Pick up where you left off"),d=VP.t("Your drafts are now collected in one place, so you can jump right back whenever you're ready to hit send."),p=m.a.createElement(Mn.a,{orientation:"right",onClickPrimaryButton:this.markCoachmarkSeen,closeCoachmark:this.markCoachmarkSeen,primaryCallToActionText:VP.t("Got it",{fallbackHash:"8297bb17c6aa1537d802e8ab86dcd018ffb7b6d0",fallbackHashNs:"coachmarks"}),isOpen:!0,"data-qa":"drafts-coachmark"},m.a.createElement("h3",{className:"margin_bottom_50"},u),m.a.createElement("p",null,d));return m.a.createElement(Vn.b,{orientation:"right",coachmarkElement:p},m.a.createElement("div",null,c))}return c}}]),t}(p.Component);YP.displayName="DraftsHeading",YP.defaultProps=zP;var QP=Object(g.b)(function(e){return{featureChannelSidebarDraftsSection:Object(y.m)(e,"feature_channel_sidebar_drafts_section"),featureComposeFlow:Object(T.g)(e),isSelected:"Pdrafts"===Object(E.a)(e),showDraftsSectionCoachmark:!Object(Zt.j)(e,"seen_drafts_section_coachmark")}},function(e){return{setUserPrefByApi:function(t){return e(Object(Tn.f)(t))}}})(YP),XP=new B.b("channel_sidebar"),JP="plans?ui_step="+le.UiStep.SIDEBAR+"&ui_element="+le.UiElement.PRICING_LINK+"&entry_point=channel_sidebar_upgrade_cta",ZP=(h.b.object.isRequired,h.b.object.isRequired,h.b.bool.isRequired,h.b.bool,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.clog(le.UiAction.IMPRESSION)}},{key:"onClick",value:function(){this.clog(le.UiAction.CLICK),Object(De.R)(this.props.team,JP)}},{key:"clog",value:function(e){var t=this.props.inButtonExperiment;this.props.clogger.track(le.EventId.GROWTH_PRICING,{contexts:{ui_context:{step:le.UiStep.SIDEBAR,action:e,ui_properties:{element_type:t?le.ElementType.BUTTON:le.ElementType.LINK,element_name:t?"upgrade_button":"upgrade_link"}}}})}},{key:"render",value:function(){var e=this.props.featureSidebarVirtualized,t=m.a.createElement("span",{className:"p-channel_sidebar__name"},XP.t("Upgrade")),n=e?-1:void 0,a=e?"presentation":void 0;return this.props.inButtonExperiment?m.a.createElement("div",{className:"p-channel_sidebar__upgrade_slack_button_container"},m.a.createElement(_e.d,{type:"outline",className:"p-channel_sidebar__upgrade_slack_button","data-qa":"upgrade-slack-cta",onClick:this.onClick,tabIndex:n,role:a},t)):m.a.createElement(la.a,{className:"p-channel_sidebar__link p-channel_sidebar__link--upgrade-slack","data-qa":"upgrade-slack-cta",onClick:this.onClick,href:JP,tabIndex:n,role:a},t)}}]),t}(p.PureComponent));ZP.displayName="UpgradeSlackCTA",ZP.defaultProps={featureSidebarVirtualized:!1};var $P=Object(g.b)(function(e){return{team:Object(we.d)(e),clogger:Object(re.a)({state:e}),inButtonExperiment:"treatment"===Object(Xt.c)(e,"sidebar_upgrade_button"),featureSidebarVirtualized:Object(y.m)(e,"feature_sidebar_virtualized")}})(ZP),eM=new B.b("channel_sidebar"),tM=function(e){return m.a.createElement(KP,ye()({},e,{label:eM.t("Starred"),qaLabel:"starred",defaultSectionName:hT.h}))};tM.displayName="StarredHeading";var nM=Object(jp.a)(tM),aM=n("08ch"),rM=new B.b("channel_sidebar"),iM=(h.b.bool,h.b.bool,h.b.func,h.b.func,h.b.func.isRequired,h.b.bool,h.b.bool,h.b.bool,h.b.func,h.b.object,{canOpenChannelBrowser:!0,showPlusButton:!1,openSharedChannelCreationOrRequestModal:d.a,openChannelCreateModal:d.a,canUserRequestSharedChannel:!1,canUserCreateSharedChannel:!1,featureSonicDmBrowser:!1,openDmBrowserModal:d.a,clogger:{}}),oM=function(e){var t=e.canOpenChannelBrowser,n=e.showPlusButton,a=void 0;t&&(a=rM.t("Browse all shared channels"));var r=t?function(){return e.openChannelBrowser({initialFilter:"shared"})}:d.a,i=e.openSharedChannelCreationOrRequestModal.bind(null,{entryPoint:"shared_channel_sidebar"});return m.a.createElement(KP,ye()({},e,{onLabelClick:r,tooltip:a,headerAriaLabel:rM.t("Browse all shared channels"),tooltipArrowOffset:50,label:rM.t("Shared Channels"),qaLabel:"shared_channels",showPlus:n,plusTooltip:rM.t("Create a shared channel"),onPlusClick:function(){return i.apply(void 0,arguments)},defaultSectionName:hT.g}))};oM.displayName="SharedChannelsHeading",oM.defaultProps=iM;var sM={openSharedChannelCreationOrRequestModal:function(){return aM.a.apply(void 0,arguments)},openChannelBrowser:function(){return ge.a.apply(void 0,arguments)},openDmBrowserModal:function(){return dO.a.apply(void 0,arguments)},openChannelCreateModal:function(){return x.a.apply(void 0,arguments)}},lM=Object(jp.a)(oM),cM=Object(g.b)(function(e){return{canOpenChannelBrowser:!Object(eo.Mb)(Object(xo.b)(e)),featureSonicEscCreation:Object(y.m)(e,"feature_sonic_esc_creation"),showPlusButton:uM(e),canUserRequestSharedChannel:Object(Bb.P)(e),canUserCreateSharedChannel:Object(Bb.E)(e),featureSonicDmBrowser:Object(y.m)(e,"feature_sonic_dm_browser")}},sM)(lM);function uM(e){var t=!Object(y.m)(e,"feature_shared_channels_block_large_orgs"),n=Object(xo.b)(e);return Object(aC.a)(e)?Object(Bb.P)(e):Object(ig.d)(e)&&t?Object(eo.g)(e,{blockAllForNoOne:!0}):!Object(eo.Mb)(n)&&!Object(eo.Gb)(n)&&Object(Bb.P)(e)}var dM=new B.b("coachmarks"),pM=(h.b.object,h.b.string,h.b.bool,h.b.bool,h.b.func.isRequired,h.b.instanceOf(Element),{currentMember:d.a,firstListedChannel:null,inSinglePublicChannel:!1,inSinglePrivateChannel:!1,anchorElement:null}),mM=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClose=n.onClose.bind(n),n.renderCoachmarkContent=n.renderCoachmarkContent.bind(n),n}return u()(t,e),o()(t,[{key:"onClose",value:function(e){e.preventDefault(),this.props.setAboutChannelsCoachmarkIsVisible(!1)}},{key:"renderCoachmarkContent",value:function(){var e=this.props,t=e.currentMember,n=e.inSinglePublicChannel,a=e.inSinglePrivateChannel,r=e.firstListedChannel;return Object(eo.eb)(t)?dM.t("Channels bring order and searchability to your team\u2019s conversations. Organize by topic (#research), working group (#sales), or specific project (#sales-tv-ad)."):Object(eo.Gb)(t)?n?dM.rt("Channels organize your team\u2019s conversations by topic or working group. As a guest, you can send messages and browse archives in one channel, {channelName}.",{channelName:m.a.createElement("strong",null,r),fallbackHash:"714a97c13fc44eebbf3c57a94f5e275f6c6da22f",fallbackHashNs:"coachmarks"}):a?dM.rt("Channels organize your team\u2019s conversations by topic or working group. As a guest, you can access one channel, {channelName}. This is a private, invitation-only channel.",{channelName:m.a.createElement("strong",null,r),fallbackHash:"6b2988717e064c5abfcad7bc9ba9187458753ac3",fallbackHashNs:"coachmarks"}):dM.t("Channels organize your team\u2019s conversations by topic or working group. As a guest, you can send messages and browse archives in the channels listed here."):dM.t("Channels bring order and searchability to your team\u2019s conversations. They\u2019re organized by topic (#research), working group (#sales), or specific project (#sales-tv-ad).")}},{key:"render",value:function(){var e=this.props.anchorElement;return m.a.createElement(Mn.a,{anchorElement:e,orientation:"right",onClickPrimaryButton:this.onClose,closeCoachmark:this.onClose,primaryCallToActionText:dM.t("Got it!"),isOpen:!0},m.a.createElement("h3",{className:"margin_bottom_50"},dM.t("Messaging happens in channels")),m.a.createElement("p",null,this.renderCoachmarkContent()))}}]),t}(p.Component);mM.displayName="ChannelHeadingCoachmark",mM.defaultProps=pM;var hM={setAboutChannelsCoachmarkIsVisible:function(){return NN.m.apply(void 0,arguments)}},bM=Object(g.b)(function(e){var t=Object(G.t)(e),n=t.filter(K.Bb),a=t.filter(K.Cb);return{currentMember:Object(xo.b)(e),inSinglePrivateChannel:1===t.length&&1===n.length,inSinglePublicChannel:1===t.length&&1===a.length,firstListedChannel:t.length?t[0].name:""}},hM)(mM),fM=new B.b("channel_sidebar"),gM=(h.b.bool,h.b.bool,h.b.bool.isRequired,h.b.bool.isRequired,h.b.bool.isRequired,h.b.func.isRequired,function(e){var t=e.featureOfflineMode,n=e.showPlus,a=e.canOpenChannelBrowser,r=e.wasRecentlyOnline,i=e.aboutChannelsCoachmarkIsVisible,o=e.iAPhase1Enabled,s=fM.t("Create a channel");t&&!r&&(s=m.a.createElement(Li.a,{tooltipLabel:fM.t("Create a channel")}));var l=void 0,c=void 0;a&&!o&&(l=e.openChannelBrowser,c=fM.t("Browse all channels"));var u=m.a.createElement(KP,ye()({},e,{onLabelClick:l,label:fM.t("Channels"),qaLabel:"channels",tooltip:c,headerAriaLabel:fM.t("Browse all channels"),tooltipArrowOffset:30,showPlus:n,plusTooltip:s,plusAriaLabel:fM.t("Create a channel"),defaultSectionName:hT.c}));return i?m.a.createElement(Vn.b,{orientation:"right",coachmarkElement:m.a.createElement(bM,null)},u):u});gM.defaultProps={showPlus:!0,canOpenChannelBrowser:!0};var _M={openChannelBrowser:function(){return ge.a.apply(void 0,arguments)}},vM=Object(g.b)(function(e){return{showPlus:!Object(pE.b)(e)&&(Object(Bb.D)(e)||Object(Bb.C)(e)),canOpenChannelBrowser:!Object(eo.Mb)(Object(xo.b)(e)),featureOfflineMode:Object(y.m)(e,"feature_offline_mode"),wasRecentlyOnline:Object(Qt.h)(e),aboutChannelsCoachmarkIsVisible:Object(NN.b)(e),iAPhase1Enabled:Object(pE.b)(e)}},_M)(gM),yM=(h.b.string,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.number,h.b.bool,h.b.bool,h.b.bool,h.b.func,h.b.func,h.b.func,h.b.func,h.b.bool,{name:"",setIsRenaming:d.a,saveFolderData:d.a,renameFolder:d.a,toggleFolderCollapse:d.a,setFolderCollapse:d.a,badgeCount:0,hasUnreads:!1,isCollapsed:!1,isRenaming:!1,onDragStart:d.a,onDragEnd:d.a,onDrop:d.a,onDragOver:d.a,featureSidebarVirtualized:!1}),kM=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggleFolderCollapse=n.toggleFolderCollapse.bind(n),n.renameFolder=n.renameFolder.bind(n),n.showRenameBox=n.showRenameBox.bind(n),n.setRenamingLabel=n.setRenamingLabel.bind(n),n.setInputRef=n.setInputRef.bind(n),n.onBlur=n.onBlur.bind(n),n.state={renamingLabel:n.props.name,hasTyped:!1},n}return u()(t,e),o()(t,[{key:"onBlur",value:function(e){if(this.props.isRenaming){var t=this.props.name,n=e.target.value;this.props.renameFolder({oldName:t,newName:n}),this.props.saveFolderData()}}},{key:"setRenamingLabel",value:function(e){var t=e.target.value;this.setState(function(){return{renamingLabel:t,hasTyped:!0}})}},{key:"setInputRef",value:function(e){e&&!this.state.hasTyped&&(e.select(),e.focus())}},{key:"showRenameBox",value:function(){var e=this.props.name;this.props.setIsRenaming({name:e}),this.setState(function(){return{renamingLabel:e,hasTyped:!1}})}},{key:"toggleFolderCollapse",value:function(e){e.altKey?this.props.setFolderCollapse({isCollapsed:!this.props.isCollapsed}):this.props.toggleFolderCollapse({name:this.props.name}),this.props.saveFolderData()}},{key:"renameFolder",value:function(e){var t=this.props.name,n=void 0;"Enter"===e.key&&(n=e.target.value),"Escape"===e.key&&(n=this.props.name),void 0!==n&&(this.props.renameFolder({oldName:t,newName:n}),this.props.saveFolderData())}},{key:"render",value:function(){var e=this.props.featureSidebarVirtualized,t=this.props.isRenaming?"":m.a.createElement(_e.c,{"aria-hidden":!!e||void 0,tabIndex:e?-1:void 0,className:f()("p-channel_sidebar__folder_heading_icon",{"p-channel_sidebar__folder_heading_icon_collapsed":this.props.isCollapsed}),onClick:this.toggleFolderCollapse}),n=void 0;n=this.props.isRenaming?m.a.createElement("input",{type:"text",className:"p-channel_sidebar__folder_heading_label_rename",value:this.state.renamingLabel,onChange:this.setRenamingLabel,onKeyDown:this.renameFolder,ref:this.setInputRef,onBlur:this.onBlur}):Object(fs.a)(this.props.name,"<")?m.a.createElement(_e.c,{className:f()("p-channel_sidebar__folder_heading_label",{"p-channel_sidebar__folder_heading_label--unread":this.props.hasUnreads&&this.props.isCollapsed},{"p-channel_sidebar__section_heading_label--unreads":this.props.hasUnreads&&this.props.isCollapsed}),onClick:this.toggleFolderCollapse,onDoubleClick:this.showRenameBox,"aria-label":e?"":void 0},this.props.name):m.a.createElement(_e.c,{className:f()("p-channel_sidebar__folder_heading_label",{"p-channel_sidebar__folder_heading_label--unread":this.props.hasUnreads&&this.props.isCollapsed},{"p-channel_sidebar__section_heading_label--unreads":this.props.hasUnreads&&this.props.isCollapsed}),onClick:this.toggleFolderCollapse,onDoubleClick:this.showRenameBox,"aria-label":e?"":void 0},m.a.createElement(pg.a,{text:this.props.name,noJumbomoji:!0,noHighlights:!0}));var a=this.props.isCollapsed?m.a.createElement(_e.c,{className:"p-channel_sidebar__folder_heading_badge",onClick:this.toggleFolderCollapse,"aria-hidden":!!e||void 0,tabIndex:e?-1:void 0},m.a.createElement(dR.b,{count:this.props.badgeCount,className:"p-channel_sidebar__badge"})):"";return m.a.createElement("div",{className:"p-channel_sidebar__folder_heading","data-qa-channel-sidebar-section-heading":"folder",draggable:!0,"data-drag-type":"folder","data-drag-id":this.props.name,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragOver:this.props.onDragOver},n,a,t)}}]),t}(m.a.PureComponent);kM.displayName="FolderHeading",kM.defaultProps=yM;var OM={toggleFolderCollapse:TN.k,setFolderCollapse:TN.i,saveFolderData:TN.h,renameFolder:TN.g,setIsRenaming:TN.j},CM=Object(g.b)(function(e,t){var n=t.name,a=Object(TN.d)(e,n),r=a?Object(ft.a)(a.channelIds,function(t){return Object(G.e)(e,t)}):[],i=!!a&&a.isCollapsed,o=!!a&&a.isRenaming,s=r.length>0?Object(cs.a)(Object(ft.a)(r,function(t){return Object(G.d)(e,t)})):0;return{isCollapsed:i,isRenaming:o,hasUnreads:r.length>0&&!!Object(Dd.a)(r,function(t){return Object(K.Ob)(t)&&!Object(Ad.c)(e,t.id)}),badgeCount:s,featureSidebarVirtualized:Object(y.m)(e,"feature_sidebar_virtualized")}},OM)(kM),EM=new B.b("channel_sidebar"),jM=(h.b.string.isRequired,function(e){return m.a.createElement(KP,ye()({},e,{tooltipClassName:"p-channel_sidebar__section_heading_tip--short",label:EM.t("Organization Channels"),qaLabel:"org_wide_channels",tooltip:EM.t("Shared with all workspaces at {orgName}",{orgName:e.orgName}),tooltipArrowOffset:50,defaultSectionName:hT.f}))});jM.displayName="OrgWideChannelsHeading";var SM=Object(jp.a)(jM),IM=Object(g.b)(function(e){return{orgName:Object(we.e)(e)}})(SM),wM=new B.b("channel_sidebar"),NM=function(e){return m.a.createElement(KP,ye()({},e,{label:e.label,qaLabel:"ims",tooltip:e.iAPhase1Enabled?void 0:wM.t("Open a direct message"),headerAriaLabel:e.iAPhase1Enabled?void 0:wM.t("Open a direct message"),tooltipArrowOffset:50,showPlus:e.showPlus,plusTooltip:wM.t("Open a direct message"),plusAriaLabel:wM.t("Open a direct message"),onLabelClick:e.iAPhase1Enabled?void 0:e.openDmBrowserModal,onPlusClick:e.openDmBrowserModal,defaultSectionName:hT.e}))};NM.displayName="DirectMessagesHeading",NM.defaultProps={openDmBrowserModal:d.a};var TM={openDmBrowserModal:function(){return Object(dO.a)()}},AM=Object(g.b)(function(e){return{showPlus:!Object(pE.b)(e),label:Object(pE.b)(e)?wM.t("Messages",{fallbackHash:"f1b1f5c277f7954dfbed1eddb8517dad1651b04b"}):wM.t("Direct Messages"),iAPhase1Enabled:Object(pE.b)(e)}},TM)(NM),RM=new B.b("sonic_pilot");var PM=Object(g.b)(function(e){return{featureSonicPlaceholderLabels:Object(y.m)(e,"feature_sonic_placeholder_labels")}})(function(e){var t=e.children;return e.featureSonicPlaceholderLabels&&Object(ae.a)()?m.a.createElement(m.a.Fragment,null,t,m.a.createElement("div",{className:"c-tooltip__sonic_placeholder","data-qa":"sonic-placeholder-text"},RM.t("Coming soon"))):t}),MM=new B.b("channel_sidebar"),xM=function(e){var t=e.featureM11nAppsBrowser?MM.t("Browse Apps"):m.a.createElement(PM,null,MM.t("Browse apps")),n=e.featureM11nAppsBrowser?e.openAppsBrowserModal:bP.a;return m.a.createElement(KP,ye()({},e,{onLabelClick:e.featureAppLauncher?d.a:n,onPlusClick:e.featureAppLauncher?d.a:n,label:e.featureAppLauncher?MM.t("Recent Apps"):MM.t("Apps"),qaLabel:"apps",tooltip:e.featureAppLauncher?"":t,headerAriaLabel:MM.t("Browse apps"),tooltipArrowOffset:16,showPlus:e.showPlus,plusTooltip:e.featureAppLauncher?"":t,plusAriaLabel:MM.t("Browse apps"),defaultSectionName:hT.b}))};xM.displayName="AppsHeading",xM.defaultProps={featureM11nAppsBrowser:!1,featureAppLauncher:!1};var FM=Object(g.b)(function(e){var t=Object(jg.a)(e);return{featureM11nAppsBrowser:Object(y.m)(e,"feature_m11n_apps_browser"),featureAppLauncher:t,showPlus:!Object(pE.b)(e)&&!t}},function(e){return Object(Eg.b)({openAppsBrowserModal:DE.a},e)})(xM),LM=n("3lVB"),DM=Ng()("enter"),UM=Ng()("delete"),BM=new B.b("channel_sidebar"),qM=(h.b.arrayOf(h.b.shape({type:h.b.string,scrollBottom:h.b.number,key:h.b.string})).isRequired,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.bool,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.object.isRequired,h.b.object,h.b.object,h.b.bool,h.b.oneOf(["warm","cold"]),h.b.func,h.b.func,h.b.string,h.b.bool,h.b.func,h.b.func,h.b.bool,h.b.bool,h.b.bool,h.b.string,h.b.func,h.b.func,h.b.bool,h.b.bool,h.b.bool,{onItemSelect:d.a,onInviteClick:d.a,onCreateChannelClick:d.a,onCreateSharedChannelClick:d.a,onResize:d.a,onScroll:d.a,sidebarFoldersIsEnabled:!1,onDragStart:d.a,onDragEnd:d.a,onDrop:d.a,onDragOver:d.a,onCreateFolder:d.a,shouldTrackTTFMP:!0,logger:null,clogger:null,bootType:null,setHideInviteButton:d.a,setHideAddChannelButton:d.a,teamId:null,featureSeeMoreChannels:!1,removeFromSectionNavigation:d.a,addToSectionNavigation:d.a,userAttentionIsOnChat:!1,composerVisible:!1,featureSidebarVirtualized:!1,selectedItemId:void 0,closeIM:d.a,getAriaLabelForRow:d.a,shouldUseChannelSections:!1,isScreenReaderEnabled:!1,hasKeyboardFocus:!1}),HM=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["setScrollbarRef","getCurrentScrollTop","resetCurrentScrollTopMaybe","onResize","onScroll","onInviteClick","onInviteCloseClick","onAddChannelCloseClick","onItemKeyDown","renderRow","renderRowWithWrapper","renderVirtualizedRowWithWrapper","isRowFocusable","getAriaAttributesForRow","onItemSelected","scrollToTopOfChannelList","focus","getPropsForItem"]),n.currentScrollTop=0,n.height=0,n.keyboardNavigableListRef=m.a.createRef(),n.rowRefByKey={},n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){var e=this;if(Object(ne.a)(window,"performance.timing.fetchStart")){var t=this.props.shouldTrackTTFMP;if(t&&Object(ae.a)()){var n=Object(_.getStateForClientStore)();(t=Object(k.f)(n))&&Object(_.dispatchForClientStore)(Object(k.b)(!1))}var a=Promise.resolve();Object(ce.u)()&&Object(br.nb)()&&(a=Object(br.z)("shouldLogFirstMeaningfulPaint").then(function(e){"false"===e&&(t=!1)})),(ce.k||ce.s||ce.n)&&(t=!1);var r=Object(BA.d)(),i=Object(ce.t)()?"_reload":"",o=Date.now()-(window.performance.timing.fetchStart+r),s=Object(ae.a)()?"ttfmp_sonic_"+this.props.bootType+i:"ttfmp_legacy"+i;a.then(function(){t&&(e.shouldLogFirstMeaningfulPaint=!1,Object(ce.u)()&&Object(br.nb)()&&Object(br.Kb)("shouldLogFirstMeaningfulPaint","false"),e.props.logger.info("PERF","First meaningful paint: "+o+"ms"),e.props.telemeter.store(s,o))}),this.clogInvitePeopleButton()}}},{key:"componentDidUpdate",value:function(e){if(Object(ae.a)()){var t=Object(_.getStateForClientStore)(),n=Object(YC.getFocusedWorkspace)(t);if(Object(k.i)(t)&&n===this.props.teamId){var a=Object(LM.b)(),r=Date.now()-a;this.props.telemeter.store("team_switch_sonic",r),Object(_.dispatchForClientStore)(Object(k.e)(!1))}}var i={prevUserAttentionIsOnChat:e.userAttentionIsOnChat,prevComposerVisible:e.composerVisible,currentUserAttentionIsOnChat:this.props.userAttentionIsOnChat,currentComposerVisible:this.props.composerVisible};Object(Up.a)(i)&&this.props.addToSectionNavigation(),Object(Bp.a)(i)&&this.props.removeFromSectionNavigation(),this.restoreFocusOnUpdate&&(this.focus(),this.restoreFocusOnUpdate=!1)}},{key:"onResize",value:function(e){var t=e.height;this.resetCurrentScrollTopMaybe(t),this.height=t,this.props.onResize({height:t})}},{key:"onScroll",value:function(e,t){var n=t.scrollTop;this.currentScrollTop=n,this.props.onScroll&&this.props.onScroll(n)}},{key:"onDeleteKeyPressed",value:function(e){this.restoreFocusOnUpdate=!0,this.props.closeIM({channelId:e.id})}},{key:"onEnterKeyPressed",value:function(e){var t=e.currentTarget.querySelector("a,button");t&&t.click()}},{key:"onItemKeyDown",value:function(e){var t=e.keyCode;t!==DM?t===UM&&this.onDeleteKeyPressed(e):this.onEnterKeyPressed(e)}},{key:"onInviteClick",value:function(e,t){this.props.onInviteClick(t)}},{key:"onInviteCloseClick",value:function(){this.props.setHideInviteButton()}},{key:"onAddChannelCloseClick",value:function(){this.props.setHideAddChannelButton()}},{key:"onItemSelected",value:function(e){this.selectedItemRef=e}},{key:"setScrollbarRef",value:function(e){this.Scrollbar=e&&e.getWrappedInstance?e.getWrappedInstance():e}},{key:"getCurrentScrollTop",value:function(){return this.currentScrollTop}},{key:"getContentHeight",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.rows;return e.length?e[e.length-1].scrollBottom:0}},{key:"getAriaLabelForRow",value:function(e){var t=this.props,n=t.isScreenReaderEnabled,a=t.hasKeyboardFocus;return e&&"channel"===e.type&&(a||n)?this.props.getAriaLabelForRow(e.id):void 0}},{key:"getAriaAttributesForRow",value:function(e){return"sectionHeading"===e.type?{role:e.role,"aria-expanded":e["aria-expanded"],"aria-level":e["aria-level"],"aria-label":e["aria-label"]}:"folderHeading"===e.type?{role:e.role,"aria-level":e["aria-level"],"aria-expanded":e["aria-expanded"],"aria-label":e.name}:"sectionHeadingAriaGroup"===e.type?{role:e.role,"aria-owns":e["aria-owns"],"aria-label":e["aria-label"]}:{role:e.role,"aria-level":e["aria-level"]}}},{key:"getPropsForItem",value:function(e){var t=e.key,n=e.index,a=this.props,r=a.rows,i=a.selectedItemId,o=r[n];if(o){var s={className:"p-channel_sidebar__static_list__item",tabIndex:-1};if("presentation"===o.role)return ye()({},s,{role:o.role});var l=this.getAriaAttributesForRow(o);if("group"===l.role)return ye()({},s,l);var c=i===t;return ye()({},s,l,{tabIndex:c?0:-1,"aria-label":o["aria-label"]||this.getAriaLabelForRow(o),"aria-selected":c})}}},{key:"focus",value:function(){var e=this.props,t=e.featureSidebarVirtualized,n=e.selectedItemId;t?this.keyboardNavigableListRef.current.focusOnKey(n):this.selectedItemRef&&this.selectedItemRef.focus()}},{key:"clogInvitePeopleButton",value:function(){var e=this.props.clogger;e.track("SIDEBAR_INVITE_PEOPLE",{contexts:{ui_context:{step:"invite_people",action:"impression",ui_properties:{element_type:"button",element_name:"invite_people"}}}}),e.track("INAPP_INVITES",{contexts:{ui_context:{step:"invite_people",action:"impression",ui_properties:{element_type:"button",element_name:"invite_people"}}}}),e.track("SIDEBAR_INVITE_PEOPLE",{contexts:{ui_context:{step:"invite_people",action:"impression",ui_properties:{element_type:"button",element_name:"hide_invite_people"}}}}),e.track("INAPP_INVITES",{contexts:{ui_context:{step:"invite_people",action:"impression",ui_properties:{element_type:"button",element_name:"hide_invite_people"}}}})}},{key:"resetCurrentScrollTopMaybe",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props.rows;e>this.getContentHeight(t)&&(this.currentScrollTop=0)}},{key:"scrollToTarget",value:function(e){var t=this,n=Math.max(0,Math.min(this.getContentHeight()-this.height,e));Object(UA.a)({fromValue:this.currentScrollTop,toValue:n,duration:200,easing:"easeOutQuad",onTick:function(e){var n=e.value,a=e.nextTick;t.jumpToOffset(n),a()}})}},{key:"scrollToTopOfChannelList",value:function(){this.jumpToOffset(0)}},{key:"jumpToOffset",value:function(e){this.Scrollbar&&this.Scrollbar.scrollTop(e),this.keyboardNavigableListRef.current&&this.keyboardNavigableListRef.current.scrollToOffset(e)}},{key:"isRowFocusable",value:function(e){var t=e.index,n=this.props.rows[t];return"presentation"!==n.role&&"group"!==n.role}},{key:"renderVirtualizedRowWithWrapper",value:function(e){var t=this.props.rows[e];return m.a.createElement("div",{style:{height:t.height}},this.renderRow(t))}},{key:"renderRowWithWrapper",value:function(e){var t=e.height,n=e.type,a=e.key,r={quickswitcherButton:"listitem",allThreadsLink:"listitem",searchLink:"listitem",pageLink:"listitem",sectionHeading:"listitem",channel:"listitem",app:"listitem",addAChannelLink:"listitem",invitePeopleLink:"listitem",installAppsLink:"listitem",appSuggestionLinks:"listitem",upgradeSlackCTA:"listitem",spacer:"presentation",topPadding:"presentation",emptyState:"listitem"}[n];return m.a.createElement("div",{key:a,style:{height:t},role:r},this.renderRow(e))}},{key:"renderRow",value:function(e){var t=this.props,n=t.onItemSelect,a=t.featureSeeMoreChannels,r=t.featureSidebarVirtualized;switch(e.type){case"quickswitcherButton":return m.a.createElement(NA,null);case"allThreadsLink":return m.a.createElement(tP,{qaLabel:"all_thread_link",selectItem:this.props.onItemSelect,onItemSelected:this.onItemSelected});case"searchLink":return m.a.createElement(aP,{selectItem:n});case"pageLink":return m.a.createElement(dP,{id:e.id,selectItem:n,onItemSelected:this.onItemSelected});case"sectionHeading":return this.renderSectionHeading(e);case"sectionHeadingAriaGroup":return null;case"folderHeading":return this.renderFolderHeading(e.name);case"channel":return this.renderChannel(e);case"composer_draft":return this.renderComposerDraft(e);case"channel_draft":return this.renderChannelDraft(e);case"appDmSuggestion":return this.renderAppDmSuggestion(e.id,e.index);case"addAChannelLink":return m.a.createElement(lP,{isDim:e.dim,qaLabel:"add_channel",label:a?BM.t("See more channels"):BM.t("Add a channel"),onClickClose:this.onAddChannelCloseClick});case"invitePeopleLink":return m.a.createElement(hP,{selectItem:this.onInviteClick,dim:e.dim,qaLabel:"invite_people",label:BM.t("Invite people"),showClose:!0,onClickClose:this.onInviteCloseClick,featureSidebarVirtualized:r});case"installAppsLink":return m.a.createElement(OP,null);case"appSuggestionLinks":return m.a.createElement(NP,null);case"upgradeSlackCTA":return m.a.createElement($P,null);case"spacer":case"topPadding":case"emptyState":return null;default:Object(Ct.b)().warn("Row type "+e.type+" not implemented",e)}return null}},{key:"renderSectionHeading",value:function(e){var t=e.name,n=e.channelIds,a=this.props,r=a.onCreateChannelClick,i=a.onCreateSharedChannelClick;switch(t){case"drafts":return m.a.createElement(QP,{selectItem:this.props.onItemSelect,scrollToTopOfChannelList:this.scrollToTopOfChannelList,channelIds:n});case"starred":return!this.props.shouldUseChannelSections&&this.props.sidebarFoldersIsEnabled?m.a.createElement(KP,{label:BM.t("Starred"),qaLabel:"starred",showPlus:!0,onPlusClick:this.props.onCreateFolder,channelIds:n}):m.a.createElement(nM,{channelIds:n});case"sharedChannels":return m.a.createElement(cM,{onPlusClick:i,channelIds:n});case"channels":return m.a.createElement(vM,{onPlusClick:r,channelIds:n});case"orgWideChannels":return m.a.createElement(IM,{channelIds:n});case"ims":return m.a.createElement(AM,{channelIds:n});case"apps":return m.a.createElement(FM,{channelIds:n});default:return null}}},{key:"renderFolderHeading",value:function(e){return m.a.createElement(CM,{name:e,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragOver:this.props.onDragOver})}},{key:"renderAppDmSuggestion",value:function(e,t){return m.a.createElement($A,{id:e,index:t})}},{key:"renderChannel",value:function(e){var t=e.id,n=e.index;return!this.props.shouldUseChannelSections&&this.props.sidebarFoldersIsEnabled?m.a.createElement(NR,{key:t,id:t,selectItem:this.props.onItemSelect,onItemSelected:this.onItemSelected,index:n,sidebarFoldersIsEnabled:!0,onDragStart:this.props.onDragStart,onDragEnd:this.props.onDragEnd,onDrop:this.props.onDrop,onDragOver:this.props.onDragOver}):m.a.createElement(NR,{key:t,id:t,selectItem:this.props.onItemSelect,onItemSelected:this.onItemSelected,index:n})}},{key:"renderComposerDraft",value:function(e){var t=e.id;return m.a.createElement(GR,{id:t,key:t,onItemSelected:this.onItemSelected,selectItem:this.props.onItemSelect})}},{key:"renderChannelDraft",value:function(e){var t=e.id,n=e.params,a=void 0===n?{}:n,r=a.channelId,i=a.threadTs;return m.a.createElement(YR,{channelId:r,threadTs:i,key:t,onItemSelected:this.onItemSelected,selectItem:this.props.onItemSelect})}},{key:"render",value:function(){var e=this,t=this.props.featureSidebarVirtualized,n=this.props.rows.map(function(e){return e.key});return m.a.createElement(ni.a,{onResize:this.onResize},function(a){var r=a.width,i=a.height;return t?m.a.createElement(qA.a,{ref:e.keyboardNavigableListRef,width:r,height:i,className:"p-channel_sidebar__static_list",keys:n,rowRenderer:e.renderVirtualizedRowWithWrapper,"aria-label":BM.t("Channels and direct messages"),onScroll:e.onScroll,onItemKeyDown:e.onItemKeyDown,isFocusableItem:e.isRowFocusable,pageHeight:i-26,getPropsForItem:e.getPropsForItem,initialActiveItem:e.props.selectedItemId,role:"tree"}):m.a.createElement(ck.a,{width:r,height:i,contentHeight:e.getContentHeight(),onScroll:e.onScroll,ref:e.setScrollbarRef,serializationKey:"channel-list-scrollbar"},m.a.createElement("div",{className:"p-channel_sidebar__static_list","data-qa":"channel_sidebar_list","aria-label":BM.t("Channels and direct messages"),role:"list"},e.props.rows.map(e.renderRowWithWrapper)))})}}]),t}(m.a.PureComponent);HM.displayName="ChannelList",HM.defaultProps=qM;var WM=Object(ae.a)()?Object(V.a)(HM,"ChannelList",{index:2}):HM,GM=Object(HA.a)(WM),KM=new B.b("channel_sidebar"),VM=(h.b.bool.isRequired,h.b.oneOfType([h.b.string,h.b.bool]),h.b.bool,h.b.oneOf(["top","bottom"]),h.b.func,{linkedId:null,isMention:!1,position:"top",ensureRowInView:d.a}),zM=function(e){function t(){r()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onClick=e.onClick.bind(e),e}return u()(t,e),o()(t,[{key:"onClick",value:function(e){var t=this.props,n=t.linkedId,a=t.ensureRowInView;e.preventDefault(),n&&a(n)}},{key:"render",value:function(){var e=this.props,t=e.isShowing,n=e.position,a=e.isMention,r=e.linkedId;if(!t)return null;var i=f()("p-channel_sidebar__banner",{"p-channel_sidebar__banner--mentions":a,"p-channel_sidebar__banner--unreads":!a,"p-channel_sidebar__banner--top":"top"===n,"p-channel_sidebar__banner--bottom":"bottom"===n}),o="top"===n?"up":"down",s=a?KM.t("Unread Mentions"):KM.t("More Unreads");return m.a.createElement(_e.c,{className:i,onClick:this.onClick,"data-qa-linked-id":r},s,m.a.createElement(ta.b,{type:"arrow_"+o,inline:!0,className:"p-channel_sidebar__banner_icon"}))}}]),t}(m.a.PureComponent);zM.displayName="UnreadBanner",zM.defaultProps=VM;var YM=zM,QM=new B.b("drafts"),XM=(h.b.bool,h.b.func,{featureComposeFlow:!1,openComposerPage:d.a}),JM=function(e){return e.featureComposeFlow?m.a.createElement(qi.c,{delay:qi.a,tip:QM.t("New message")},m.a.createElement(_e.c,{onClick:e.openComposerPage,className:"p-channel_sidebar__compose_button"},m.a.createElement(ta.b,{type:"pencil",className:"p-channel_sidebar__compose_button_icon"}))):null};JM.displayName="ComposeButton",JM.defaultProps=XM;var ZM=Object(g.b)(function(e){return{featureComposeFlow:Object(T.g)(e)}},function(e){return{openComposerPage:function(){return e(Wf.apply(void 0,arguments))}}})(JM),$M=n("ZSbO"),ex=new B.b("channel_sidebar"),tx=Object(FN.a)(1),nx={FOCUS_WITHIN:2,CONTAINER_FOCUSED:1,NOT_FOCUSED:-1},ax=(h.b.bool,h.b.string,h.b.arrayOf(h.b.string),h.b.arrayOf(h.b.string),h.b.arrayOf(h.b.string),h.b.arrayOf(h.b.object),h.b.object,h.b.arrayOf(h.b.string),h.b.arrayOf(h.b.string),h.b.func,h.b.func,h.b.func,h.b.string,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.string,h.b.bool,h.b.bool,h.b.object,h.b.object,h.b.bool,h.b.oneOf(["warm","cold"]),h.b.string,h.b.object,h.b.object,h.b.func,h.b.func,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.func,h.b.func,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.bool,{isBooted:!1,selectedItemId:null,mentionIds:[],unreadIds:[],mutedMentionIds:[],idsNeedingPresenceSubscription:[],rows:[],rowsMap:{},rowIds:[],onItemSelect:d.a,onInviteClick:d.a,onCreateChannelClick:d.a,jumperCoachmarkState:null,historyNavigationEnabled:!1,useHistoryNavigation:!1,featureClassicNav:!1,sidebarFoldersIsEnabled:!1,ensureDraftChannelObjects:void 0,initializeFolderData:d.a,initializeAppSuggestionLinksData:d.a,createFolder:d.a,dragFolderOrChannel:d.a,ariaLandmarkLabel:null,featureSonicPresenceManager:!1,featureSonicInputs:!1,telemeter:null,isWindowFocused:!1,logger:null,bootType:null,teamId:null,suggestedChannelsMap:{},clogger:{},setHideInviteButton:d.a,setHideAddChannelButton:d.a,featureSeeMoreChannels:!1,userAttentionIsOnChat:!1,composerVisible:!1,featureSidebarVirtualized:!1,closeIM:d.a,getAriaLabelForRow:d.a,shouldUseChannelSections:!1,isScreenReaderEnabled:!1,isWelcomePlaceAnimationEnabled:!1,isIAPhase1Enabled:!1,isIAPhase1Windows3000:!1,isIAPhase1Normcore:!1,shouldHideForWelcomePlace:!1}),rx=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setRef=n.setRef.bind(n),n.ensureRowInView=n.ensureRowInView.bind(n),n.onResize=n.onResize.bind(n),n.onScroll=n.onScroll.bind(n),n.onItemSelect=n.onItemSelect.bind(n),n.onDragStart=n.onDragStart.bind(n),n.onDragEnd=n.onDragEnd.bind(n),n.onDragOver=n.onDragOver.bind(n),n.onDrop=n.onDrop.bind(n),n.onCreateFolder=n.onCreateFolder.bind(n),Object(ae.a)()||(n.onFocusEnter=n.onFocusEnter.bind(n),n.onFocusLeave=n.onFocusLeave.bind(n),n.onFocusWithin=n.onFocusWithin.bind(n)),n.state=ye()({},n.getUnreadRows(e),{scrolledBelowFirstMention:!1,scrolledBelowFirstUnread:!1,scrolledAboveLastMention:!1,scrolledAboveLastUnread:!1,listHeight:0,hasInitializedFolderData:!1,hasInitializedAppSuggestionLinksData:!1}),Object(ae.a)()||(n.state.hasKeyboardFocus=nx.NOT_FOCUSED),n.presenceList=Object(uA.a)(n.props.idsNeedingPresenceSubscription),n.commands=[{keys:["option+up"],handler:n.gotoNext.bind(n,"up",!1)},{keys:["option+down"],handler:n.gotoNext.bind(n,"down",!1)},{keys:["option+shift+up"],handler:n.gotoNext.bind(n,"up",!0)},{keys:["option+shift+down"],handler:n.gotoNext.bind(n,"down",!0)}],n.pendingEnsureRowInView=!1,n.shouldTrackTTFMP=!0,n.isSuggestedChannelsClogSent=!1,n.hasInitializedDraftsData=!1,n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.keyCommands=new Id.a,this.keyCommands.bindAll(this.commands),this.maybeLoadFolderData(),this.maybeLoadDraftsData(),this.maybeLoadAppSuggestionLinksData(),this.shouldTrackTTFMP=this.props.isWindowFocused}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.selectedItemId,a=t.isBooted,r=t.jumperCoachmarkState,i=t.rows,o=t.suggestedChannelsMap,s=t.clogger,l=t.telemeter,c="SHOW_BUTTON"===r||"HIDE_BUTTON"===r,u=e.selectedItemId!==n,d=a&&!e.isBooted;if(c||!u&&!d||this.ensureRowInView(n),this.maybeLoadFolderData(),this.maybeLoadDraftsData(),this.maybeLoadAppSuggestionLinksData(),tx&&l.measureAndClear("react_channel_sidebar_update_mark","react_channel_sidebar_update"),!this.isSuggestedChannelsClogSent&&Object.keys(o).length){var p=i.filter(function(e){return"channel"===e.type&&o[e.id]}).length;p&&s.track&&(this.isSuggestedChannelsClogSent=!0,s.track("SIDEBAR_SUGGESTED_CHANNELS_RENDERED",{count:p}))}}},{key:"componentWillUnmount",value:function(){this.keyCommands.reset(),this.presenceList&&this.presenceList.destroy()}},{key:"onCreateFolder",value:function(){this.props.sidebarFoldersIsEnabled&&this.props.createFolder()}},{key:"onDragEnd",value:function(){this.props.sidebarFoldersIsEnabled&&(this.props.dragFolderOrChannel(this.state.dragData),this.setState(function(){return{dragData:null}}))}},{key:"onDragOver",value:function(e){this.props.sidebarFoldersIsEnabled&&e.preventDefault()}},{key:"onDragStart",value:function(e){if(this.props.sidebarFoldersIsEnabled){var t=e.dataTransfer;t.effectAllowed="move",t.dropEffect="move";for(var n=e.target;n&&!n.attributes["data-drag-type"];)n=n.parentNode;var a={src:{type:n.attributes["data-drag-type"].value,id:n.attributes["data-drag-id"].value}};this.setState(function(){return{dragData:a}})}}},{key:"onDrop",value:function(e){if(this.props.sidebarFoldersIsEnabled){for(var t=e.target;t&&!t.attributes["data-drag-type"];)t=t.parentNode;this.setState(function(e){return{dragData:ye()({},e.dragData,{dest:{type:t.attributes["data-drag-type"].value,id:t.attributes["data-drag-id"].value}})}})}}},{key:"onFocusEnter",value:function(e){var t=e.relatedEvent,n=e.target,a=e.currentTarget;if(!t||"mousedown"!==t.type){var r=n===a?nx.CONTAINER_FOCUSED:nx.FOCUS_WITHIN;this.setState(function(){return{hasKeyboardFocus:r}})}}},{key:"onFocusLeave",value:function(){this.setState(function(){return{hasKeyboardFocus:nx.NOT_FOCUSED}})}},{key:"onFocusWithin",value:function(){this.setState(function(){return{hasKeyboardFocus:nx.FOCUS_WITHIN}})}},{key:"onItemSelect",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).routeParams;return this.props.onItemSelect(e,{routeParams:t})}},{key:"onResize",value:function(e){var t=this,n=e.height;this.setState(function(e){var a=ye()({},e,{listHeight:n});return ye()({},a,t.getBannerState(a))},function(){!1!==t.pendingEnsureRowInView&&t.ensureRowInView(t.pendingEnsureRowInView)})}},{key:"onScroll",value:function(){this.setState(this.getBannerState)}},{key:"getBannerState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,t=e.firstMention,n=e.firstUnread,a=e.lastMention,r=e.lastUnread,i=e.listHeight,o=this.ChannelList?this.ChannelList.getCurrentScrollTop():0,s=!!(n&&n.scrollBottom-10<=o),l=!!(r&&r.scrollTop+10>=o+i);return{scrolledBelowFirstMention:!!(t&&t.scrollBottom-10-(s?24:0)<=o),scrolledBelowFirstUnread:s,scrolledAboveLastMention:!!(a&&a.scrollTop+10+(l?24:0)>=o+i),scrolledAboveLastUnread:l}}},{key:"getUnreadRows",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.rowsMap,n=e.unreadIds,a=e.mentionIds;return{firstUnread:t[Object(_b.a)(n)],lastUnread:t[Object(Ud.a)(n)],firstMention:t[Object(_b.a)(a)],lastMention:t[Object(Ud.a)(a)]}}},{key:"setRef",value:function(e){this.ChannelList=e}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;if(this.shouldTrackTTFMP=this.shouldTrackTTFMP&&e.isWindowFocused,e.isBooted){e.featureSonicPresenceManager||Object(Si.a)()||Object(ub.a)(this.props.idsNeedingPresenceSubscription,e.idsNeedingPresenceSubscription)||this.presenceList&&(this.presenceList.clear(),this.presenceList.add(e.idsNeedingPresenceSubscription));var n="SHOW_BUTTON"===e.jumperCoachmarkState||"HIDE_BUTTON"===e.jumperCoachmarkState,a=this.props.rows.length&&e.rows.length&&("Vquick_switcher"===this.props.rows[0].id||"Vquick_switcher"===e.rows[0].id)&&this.props.rows[0].id!==e.rows[0].id;(n||a)&&this.ChannelList&&this.ChannelList.jumpToOffset(0),this.setState(function(n){var a=ye()({},n,t.getUnreadRows(e));return t.ChannelList&&t.ChannelList.resetCurrentScrollTopMaybe(a.listHeight,e.rows),ye()({},a,t.getBannerState(a))})}}},{key:"UNSAFE_componentWillUpdate",value:function(e){tx&&e.telemeter.mark("react_channel_sidebar_update_mark")}},{key:"ensureRowInView",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.selectedItemId,t=this.props,n=t.rows,a=t.rowsMap,r=t.rowIds;if(a[e]){var i=this.ChannelList.currentScrollTop,o=this.state.listHeight;if(0!==o){this.pendingEnsureRowInView=!1;var s=n[Math.max(r.indexOf(e)-2,0)].scrollTop;if(s<i)this.ChannelList.scrollToTarget(s);else{var l=n[Math.min(r.indexOf(e)+2,n.length-1)].scrollBottom-o;l>i&&this.ChannelList.scrollToTarget(l)}}else this.pendingEnsureRowInView=e}}},{key:"gotoNext",value:function(e,t,n){var a=this,r=this.props,i=r.rows,o=r.rowIds,s=r.selectedItemId,l=r.featureSonicInputs,c=r.userAttentionIsOnChat;if(Object(ae.a)()){if(!c)return}else if(!Object(jd.f)())return;if(l){var u=Object(Ci.b)(document.activeElement);if(u){if(!u.isEmpty()){if(!("up"!==e||u.isCursorAtBeginning&&u.isCursorAtBeginning()))return;if(!("down"!==e||u.isCursorAtEnd&&u.isCursorAtEnd()))return}}else if(Object(Sd.a)(document.activeElement))return}else{var d=Object(dA.c)(),p=Object(pA.e)(d);if(Object(pA.f)(d)&&p>0){if(Object(pA.h)(d))return;var m=Object(pA.b)(d).start;if("up"===e&&0!==m)return;if("down"===e&&m!==p)return}}var h=o.indexOf(s),b=Object(aa.a)(Object(aa.a)(Object(ft.a)(i,function(e,t){return ye()({},e,{index:t})}),function(e){return"channel"===e.type}),function(e){return!t||Object(cA.a)(a.props.unreadIds,e.id)>=0||Object(cA.a)(a.props.mutedMentionIds,e.id)>=0});if(0!==b.length){var f=void 0;void 0===(f="down"===e?Object(Dd.a)(b,function(e){return e.index>h}):Object(lA.a)(b,function(e){return e.index<h}))&&(f="down"===e?Object(_b.a)(b):Object(Ud.a)(b)),this.props.onItemSelect(f.id),n&&n.preventDefault()}}},{key:"maybeLoadAppSuggestionLinksData",value:function(){this.state.hasInitializedAppSuggestionLinksData||this.props.initializeAppSuggestionLinksData===d.a||(this.props.initializeAppSuggestionLinksData(),this.setState(function(){return{hasInitializedAppSuggestionLinksData:!0}}))}},{key:"maybeLoadDraftsData",value:function(){this.props.ensureDraftChannelObjects&&!this.hasInitializedDraftsData&&(this.props.ensureDraftChannelObjects(),this.hasInitializedDraftsData=!0)}},{key:"maybeLoadFolderData",value:function(){this.props.sidebarFoldersIsEnabled&&!this.state.hasInitializedFolderData&&(this.props.initializeFolderData(),this.setState(function(e){return ye()({},e,{hasInitializedFolderData:!0})}))}},{key:"renderFocusOutline",value:function(){return this.state.hasKeyboardFocus===nx.CONTAINER_FOCUSED?m.a.createElement("div",{className:"sectionfocusindicator"}):null}},{key:"render",value:function(){if(!this.props.isBooted)return null;var e=this.props,t=e.rows,n=e.onInviteClick,a=e.onCreateChannelClick,r=e.selectedItemId,i=e.historyNavigationEnabled,o=e.useHistoryNavigation,s=e.featureClassicNav,l=e.sidebarFoldersIsEnabled,c=e.ariaLandmarkLabel,u=e.telemeter,d=e.logger,p=e.bootType,h=e.teamId,b=e.featureSeeMoreChannels,g=e.featureSidebarVirtualized,_=e.clogger,v=e.userAttentionIsOnChat,y=e.composerVisible,k=e.closeIM,O=e.getAriaLabelForRow,C=e.shouldUseChannelSections,E=e.isScreenReaderEnabled,j=e.isWelcomePlaceAnimationEnabled,S=e.isIAPhase1Enabled,I=e.isIAPhase1Windows3000,w=e.isIAPhase1Normcore,N=e.shouldHideForWelcomePlace,T=this.state,A=T.scrolledBelowFirstMention,R=T.scrolledBelowFirstUnread,P=T.scrolledAboveLastMention,M=T.scrolledAboveLastUnread,x=T.firstMention,F=T.firstUnread,L=T.lastMention,D=T.lastUnread,U=!Object(ae.a)()&&this.state.hasKeyboardFocus!==nx.NOT_FOCUSED,B=Object(ae.a)()||this.state.hasKeyboardFocus!==nx.CONTAINER_FOCUSED?null:"-1",q=f()("p-channel_sidebar",{focusablesection:!Object(ae.a)()&&U,"p-channel_sidebar--classic_nav":s,"p-channel_sidebar--animate-channels":j,"p-channel_sidebar--iap1":S}),H=Object(ae.a)()?{}:{"data-is-focusable-section":!0,tabIndex:B},W=!N&&S&&(I||w)?m.a.createElement(bA,null):null,G=m.a.createElement("nav",ye()({className:q,"data-qa-channel-sidebar":!0,"data-qa-channel-sidebar-selected-item-id":r,"aria-labelledby":c},H),m.a.createElement("h1",{id:"channel_sidebar_aria_label",className:"offscreen"},ex.t("Channel Sidebar")),m.a.createElement($M.a,null),W,!N&&!S&&i&&m.a.createElement(DA,{useHistoryNavigation:o}),m.a.createElement("div",{className:"p-channel_sidebar__list"},m.a.createElement(YM,{position:"top",isShowing:A||R,isMention:A,linkedId:A&&x.id||R&&F.id,ensureRowInView:this.ensureRowInView}),m.a.createElement(GM,{rows:t,onItemSelect:this.onItemSelect,onInviteClick:n,onCreateChannelClick:a,onScroll:this.onScroll,onResize:this.onResize,sidebarFoldersIsEnabled:l,onDragStart:this.onDragStart,onDragEnd:this.onDragEnd,onDrop:this.onDrop,onDragOver:this.onDragOver,onCreateFolder:this.onCreateFolder,ref:this.setRef,telemeter:u,logger:d,shouldTrackTTFMP:this.shouldTrackTTFMP,bootType:p,teamId:h,setHideInviteButton:this.props.setHideInviteButton,setHideAddChannelButton:this.props.setHideAddChannelButton,featureSeeMoreChannels:b,featureSidebarVirtualized:g,clogger:_,userAttentionIsOnChat:v,composerVisible:y,selectedItemId:r,closeIM:k,getAriaLabelForRow:O,shouldUseChannelSections:C,isScreenReaderEnabled:E}),m.a.createElement(YM,{position:"bottom",isShowing:P||M,isMention:P,linkedId:P&&L.id||M&&D.id,ensureRowInView:this.ensureRowInView}),!S&&m.a.createElement(ZM,null)),S&&I&&m.a.createElement(gA,null),S&&I&&m.a.createElement(vA,null),Object(ae.a)()?null:this.renderFocusOutline());return Object(ae.a)()?G:m.a.createElement(mA.a,{onFocusEnter:this.onFocusEnter,onFocusWithin:this.onFocusWithin,onFocusLeave:this.onFocusLeave},G)}}]),t}(p.PureComponent);rx.displayName="ChannelSidebar",rx.defaultProps=ax;var ix=rx,ox=Object(FN.a)(1),sx=function(e){if(Object(Yt.d)(e))return!1;if(Object(Zt.j)(e,"add_channel_prompt_dismissed"))return!1;if(Object(xo.l)(e))return!1;if(!!Object(Zt.h)(e))return!0;for(var t=Object(G.b)(e)||{},n=Object.keys(t),a=0,r=0;r<n.length;r++)if(Object(K.Rb)(t[n[r]])&&(a+=1),a>10)return!1;return!0},lx=function(e){if(!Object(iC.d)(e))return!1;var t=Object(Tc.a)(Object(aa.a)(Object(xo.a)(e),function(e){return!e.is_slackbot}));return!Object(Zt.j)(e,"channel_sidebar_hide_invite")&&(!(t>=2)||"dim")},cx=function(e){if("Vall_threads"!==Object(E.a)(e)){var t=Object(Zt.j)(e,"has_received_threaded_message"),n=Object(y.m)(e,"feature_incremental_unread_counts")?Object(te.j)(e):Object(ee.c)(e);return t||n}return!0},ux=function(e){var t=Object(un.a)(e),n=wT(e),a=n.sidebarSections,r=n.sidebarSectionsOrdered,i=n.idsNeedingPresenceSubscription,o="enabled"===Object(Xt.c)(e,"folders_sidebar")&&Object(Zt.j)(e,"folders_enabled"),s=o?Object(TN.e)(e):[],l=function(e){var t=Object(we.d)(e),n=Object(xo.b)(e),a=Object(eo.v)(n),r=Object(br.O)(),i=Object(De.w)(t),o=Object(eo.eb)(n),s=!/@(gmail|yahoo|aol)\.com$/.exec(a)&&!/\.edu$/.exec(a);return!r&&i&&s&&o}(e),c=l&&"treatment"===Object(Xt.c)(e,"sidebar_upgrade_button")?"button":"link",u=!Object(ls.a)(Object(we.g)(e)),d=Object(Zt.j)(e,"add_apps_prompt_dismissed")||Object(NN.d)(e),p=!u&&!Object(De.D)(Object(we.d)(e))&&!d,m=Object(pE.b)(e)?sT({sidebarSectionsOrdered:r,sidebarSections:a,pages:Object(JI.a)().filter(function(t){return Object(JI.d)(e,t)})||[],hasAllUnreadsLink:!0===Object(Zt.j)(e,"enable_unread_view"),hasThreadsLink:cx(e),featureComposeFlow:Object(T.g)(e)}):aA({hasQuickswitcherButton:!t&&Object(Zt.j)(e,"show_sidebar_quickswitcher_button")&&!Object(pE.b)(e),hasAllUnreadsLink:!0===Object(Zt.j)(e,"enable_unread_view"),hasAddAChannelLink:sx(e),hasInvitePeopleLink:lx(e),hasSearchLink:Object(L.a)(e),hasAppsLink:LN(e),hasInstallAppsLink:p,appSuggestionsCount:sA(e),hasUpgradeSlackCTA:l,upgradeSlackCTAVersion:c,hasThreadsLink:cx(e),sidebarSectionsOrdered:r,sidebarSections:a,sidebarFoldersIsEnabled:o,sidebarFolders:s,pages:Object(JI.a)().filter(function(t){return Object(JI.d)(e,t)})||[],featureComposeFlow:Object(T.g)(e),shouldUseChannelSections:SO(e),shouldHideForWelcomePlace:Object(ie.r)(e)});return{rows:m.rows,rowsMap:m.rowsMap,rowIds:m.rowIds,idsNeedingPresenceSubscription:i}},dx=Object(g.c)(function(e){var t=void 0,n=void 0,a=void 0,r=void 0,i=void 0,o=void 0,s=void 0,l=void 0,c=void 0,u=void 0,p=void 0,m=void 0,h=void 0,b=void 0,f=void 0,g=void 0,_=void 0,k=void 0,O=void 0,C=void 0,j=void 0,S=void 0;return function(I,w){!function(e,t){ox&&Object(KC.c)({state:t}).mark(e+"_mark")}("react_channel_sidebar_selector_factory",I);var N=Object(wN.b)(I),T=Object(Ct.a)({state:I}),A=Object(re.a)({state:I}),R=Object(KC.c)({state:I}),P=Object(RN.g)(I),M=Object(RN.b)(I);if(!N)return{isBooted:N,isWindowFocused:P};var x=Object(E.a)(I),F=w.onItemSelect,L=ux(I),D=L.rows,U=L.rowsMap,B=L.rowIds,q=L.idsNeedingPresenceSubscription,H=sA(I),W=[],V=[],z=[];Object(y.m)(I,"feature_incremental_unread_counts")?(Object(te.e)(I)&&V.push("Vall_threads"),Object(te.j)(I)&&W.push("Vall_threads")):(Object(ee.b)(I)&&V.push("Vall_threads"),Object(ee.c)(I)&&W.push("Vall_threads"));for(var Y=B.length,Q=0;Q<Y;Q++){var X=B[Q],J=Object(G.w)(I,X),Z=Object(Ad.c)(I,X);!Z&&Object(G.x)(I,X)&&W.push(X),!Z&&J&&V.push(X),Z&&J&&z.push(X)}var $=Object(Ed.e)(I),ne=(Object(lt.a)(I)||"composer_toolbar"===Object(Xt.c)(I,"composer_toolbar"))&&Object(Dp.b)(I),oe=Object(NN.i)(I),se=Object(Zt.j)(I,"sidebar_behavior"),le="enabled"===Object(Xt.c)(I,"folders_sidebar")&&Object(Zt.j)(I,"folders_enabled"),ce=Object(un.a)(I),ue=Object(un.b)(I),de=Object(y.m)(I,"feature_sonic_inputs"),pe=Object(y.m)(I,"feature_classic_nav"),me=Object(y.m)(I,"feature_sonic_presence_manager"),he=Object(y.m)(I,"feature_see_more_channels"),be=Object(y.m)(I,"feature_sidebar_virtualized"),fe=Object(Fd.a)(D,function(e){return"addAChannelLink"===e.type}),ge=Object(v.b)(I),_e=Object(K.S)(I),ve=_e.join(","),ke=Object(Vd.b)(I),Oe=Object(ie.a)(I),Ce=Object(ie.r)(I),Ee=Object(pE.b)(I),je=Object(pE.e)(I),Se=Object(pE.c)(I);if(x===n&&Object(ub.a)(W,a)&&Object(ub.a)(V,r)&&Object(ub.a)(z,i)&&Object(ub.a)(B,o)&&oe===s&&se===l&&le===c&&pe===u&&Object(ub.a)(w,p)&&fe===m&&ve===h&&$===b&&ne===f&&H===g&&_===ke&&k===Oe&&O===Ee&&C===je&&j===Se&&S===Ce)return t;var Ie=ye()({},w,{isBooted:N,rows:D,rowsMap:U,rowIds:B,selectedItemId:x,unreadIds:W,mentionIds:V,mutedMentionIds:z,userAttentionIsOnChat:$,composerVisible:ne,jumperCoachmarkState:oe,historyNavigationEnabled:ce,useHistoryNavigation:ue,featureClassicNav:pe,idsNeedingPresenceSubscription:q,featureSonicPresenceManager:me,featureSonicInputs:de,featureSeeMoreChannels:he,sidebarFoldersIsEnabled:le,featureSidebarVirtualized:be,closeIM:function(){return e(Fo.closeChannelApi.apply(void 0,arguments))},ensureDraftChannelObjects:function(){return e(xN())},initializeFolderData:function(){return e(Object(TN.f)())},initializeAppSuggestionLinksData:function(){return e(Object(NN.l)())},dragFolderOrChannel:function(t){var n=t.src,a=t.dest;e(Object(TN.c)({src:n,dest:a})),e(Object(TN.h)())},createFolder:function(){return e(Object(TN.a)())},setHideInviteButton:function(){return A.track("SIDEBAR_INVITE_PEOPLE",{contexts:{ui_context:{step:"invite_people",action:"click",ui_properties:{element_type:"button",element_name:"hide_invite_people"}}}}),A.track("INAPP_INVITES",{contexts:{ui_context:{step:"invite_people",action:"click",ui_properties:{element_type:"button",element_name:"hide_invite_people"}}}}),e(Object(Tn.f)({pref:"channel_sidebar_hide_invite",value:!0}))},setHideAddChannelButton:function(){return e(Object(Tn.f)({pref:"add_channel_prompt_dismissed",value:!0}))},onItemSelect:function(t){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).routeParams;T.info("CHANNEL-SIDEBAR","onItemSelect",t),x===t&&e(Object(As.a)({channelId:t})),Object(ae.a)()?(e(Object(wa.a)({id:t,routeParams:n})),e(Object(AN.d)({source:"SIDE_BAR",objId:t}))):F&&F(t).then(function(){e(Object(AN.d)({source:"SIDE_BAR",objId:t}))}).catch(d.a)},ariaLandmarkLabel:"channel_sidebar_aria_label",logger:T,clogger:A,telemeter:R,isWindowFocused:P,bootType:M,teamId:ge,suggestedChannelsMap:_e.reduce(function(e,t){return e[t]=t,e},{}),getAriaLabelForRow:function(e){var t=Object(G.e)(I,e),n=Object(K.v)(t),a=Object(K.x)(I,t,{publicChannelIncludeHashSign:!1}),r=Object(y.c)(I),i=Object(K.Tb)(r,t),o=Object(Ad.c)(I,e),s=!!Object(K.U)(t),l=Object(K.y)(I,e),c=!!Object(G.d)(I,t),u=Object(K.Ib)(t);return"im"===n?Object(BN.a)({name:a,isSelf:i,hasNotifications:c,isStarred:u,isMuted:o,hasDraft:l,hasUnreads:s}):"mpim"===n?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,n=e.isCurrent,a=e.hasNotifications,r=e.isStarred,i=e.isMuted,o=e.hasDraft,s=n&&a&&i&&r&&o?UN.t("current conversation, has notifications, muted, starred, has a draft message"):!n&&a&&i&&r&&o?UN.t("has notifications, muted, starred, has a draft message"):n&&!a&&i&&r&&o?UN.t("current conversation, muted, starred, has a draft message"):!n&&!a&&i&&r&&o?UN.t("muted, starred, has a draft message"):n&&a&&!i&&r&&o?UN.t("current conversation, has notifications, starred, has a draft message"):!n&&a&&!i&&r&&o?UN.t("has notifications, starred, has a draft message"):n&&!a&&!i&&r&&o?UN.t("current conversation, starred, has a draft message"):n||a||i||!r||!o?n&&a&&i&&!r&&o?UN.t("current conversation, has notifications, muted, has a draft message"):!n&&a&&i&&!r&&o?UN.t("has notifications, muted, has a draft message"):n&&!a&&i&&!r&&o?UN.t("current conversation, muted, has a draft message"):n||a||!i||r||!o?n&&a&&!i&&!r&&o?UN.t("current conversation, has notifications, has a draft message"):n||!a||i||r||!o?!n||a||i||r||!o?n||a||i||r||!o?n&&a&&i&&r&&!o?UN.t("current conversation, has notifications, muted, starred"):!n&&a&&i&&r&&!o?UN.t("has notifications, muted, starred"):n&&!a&&i&&r&&!o?UN.t("current conversation, muted, starred"):n||a||!i||!r||o?n&&a&&!i&&r&&!o?UN.t("current conversation, has notifications, starred"):n||!a||i||!r||o?!n||a||i||!r||o?n||a||i||!r||o?n&&a&&i&&!r&&!o?UN.t("current conversation, has notifications, muted"):n||!a||!i||r||o?!n||a||!i||r||o?n||a||!i||r||o?!n||!a||i||r||o?n||!a||i||r||o?!n||a||i||r||o?"":UN.t("current conversation"):UN.t("has notifications"):UN.t("current conversation, has notifications"):UN.t("muted"):UN.t("current conversation, muted"):UN.t("has notifications, muted"):UN.t("starred"):UN.t("current conversation, starred"):UN.t("has notifications, starred"):UN.t("muted, starred"):UN.t("has a draft message"):UN.t("current conversation, has a draft message"):UN.t("has notifications, has a draft message"):UN.t("muted, has a draft message"):UN.t("starred, has a draft message");return t&&s?UN.t("{name} ({context})",{name:t,context:s}):t||""}({name:a,hasNotifications:c,isStarred:u,isMuted:o,hasDraft:l,hasUnreads:s}):Object(DN.a)({channelName:a,isPrivate:Object(K.Bb)(t),isStarred:u,isMuted:o,hasDraft:l,hasUnreads:s})},shouldUseChannelSections:SO(I),isScreenReaderEnabled:ke,isWelcomePlaceAnimationEnabled:Oe,isIAPhase1Enabled:Ee,isIAPhase1Windows3000:je,isIAPhase1Normcore:Se,shouldHideForWelcomePlace:Ce});return t=Ie,n=x,a=W,r=V,i=z,o=B,s=oe,l=se,c=le,u=pe,p=w,m=fe,h=ve,b=$,f=ne,g=H,_=ke,O=Ee,C=je,j=Se,k=Oe,S=Ce,function(e,t){ox&&Object(KC.c)({state:t}).measureAndClear(e+"_mark",e)}("react_channel_sidebar_selector_factory",I),Ie}},{withRef:!0})(ix),px=n("NZ+B"),mx=n("uXhx"),hx=n("1wEm"),bx=Object(gt.b)("Save the scrollmark if the current user is viewing a public channel that they are a member of",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.channelId,r=n.scrollmark,i=t(),o=Object(G.e)(i,a);Object(K.Cb)(o)&&!Object(K.nb)(o)||e(Object(cj.d)({channelId:a,scrollmark:r}))});bx.meta={name:"maybeSaveScrollmark",key:"messagePaneStoreThunksMaybeSaveScrollmark",description:"Save the scrollmark if the current user is viewing a public channel that they are a member of"},bx.propTypes={channelId:h.b.string,scrollmark:h.b.object};var fx=n("umiW"),gx=n("pfyZ"),_x=n("YjHT"),vx=n("KdfD"),yx=function(e){var t=e.featureReactjiEducationTip,n=e.inProductCoachmark,a=e.channel;return!!Object(ae.a)()&&(!!t&&(!(!n||"reactji_awareness_coachmark"!==n.name)&&!(!a||!Object(K.Cb)(a)&&!Object(K.Bb)(a))))},kx=n("K138"),Ox=n("Muja"),Cx=Object(ba.b)("TS.debug_widget.isVisible"),Ex=Object(ba.b)("TS.debug_widget.setFrameRate"),jx=function(){function e(){r()(this,e),this.enabledForPRQMetrics=!1,this.enabledForClientStats=!1,this.resetCountersForClientStats(),this.resetCountersForPRQMetrics(),this.beachballsTotal=0,this.stuttersTotal=0,this.rafHandler=this.rafHandler.bind(this)}return o()(e,[{key:"isEnabled",value:function(){return this.isEnabledForClientStats()||this.isEnabledForPRQMetrics()}},{key:"rafHandler",value:function(){this.isEnabledForClientStats()&&this.rafHandlerForClientStats(),this.isEnabledForPRQMetrics()&&this.rafHandlerForPRQMetrics(),this.isEnabled()&&window.requestAnimationFrame(this.rafHandler)}},{key:"resetCountersForClientStats",value:function(){this.beachballs=0,this.frameRates=[],this.stutters=0,this.lastRafHandlerTimeForClientStats=window.performance.now(),this.fpsIndex=0,this.fpsStartTime=null}},{key:"rafHandlerForClientStats",value:function(){if(this.isEnabledForClientStats()){var e=window.performance.now(),t=e-this.lastRafHandlerTimeForClientStats;if(this.lastRafHandlerTimeForClientStats=e,t>1e3?(this.beachballs+=1,this.beachballsTotal+=1):t>100&&(this.stutters+=1,this.stuttersTotal+=1),0===this.fpsIndex&&(this.fpsStartTime=e),this.fpsIndex+=1,300===this.fpsIndex){var n=(e-this.fpsStartTime)/1e3,a=Math.floor(this.fpsIndex/n);this.fpsIndex=0,Cx()&&Ex(a),this.frameRates.push(a)}}}},{key:"startClientStats",value:function(){this.isEnabled()||window.requestAnimationFrame(this.rafHandler),this.enabledForClientStats=!0,this.resetCountersForClientStats()}},{key:"stopClientStats",value:function(){this.enabledForClientStats=!1}},{key:"storeClientStats",value:function(){var e=Object(KC.a)();if(e.count("stutters",this.stutters),e.count("beachballs",this.beachballs),!Object(ls.a)(this.frameRates)){var t=Object(ht.a)(this.frameRates),n=void 0,a=this.frameRates.sort(),r=Math.floor(a.length/2);n=a.length%2==1?a[r]:(a[r-1]+a[r])/2,e.store("fps_min",t),e.store("fps_median",n)}this.stutters=void 0,this.beachballs=void 0,this.frameRates=void 0}},{key:"isEnabledForClientStats",value:function(){return!!this.enabledForClientStats}},{key:"getTotalBeachballCount",value:function(){return this.beachballsTotal}},{key:"getTotalStutterCount",value:function(){return this.stuttersTotal}},{key:"resetCountersForPRQMetrics",value:function(){this.histJankyWindows={},this.histFrameRenderTime={},this.durationMs=0,this.lastRafHandlerTimeForPRQMetrics=void 0,this.nextJankyWindowSampleIntervalNumber=1,this.framesInPreviousJankyWindowSample=0,this.framesInCurrentJankyWindowSample=0}},{key:"recordJankyWindows",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!(t<1)){var n=Math.max(60-e,0);this.histJankyWindows[n]=(this.histJankyWindows[n]||0)+t}}},{key:"sampleJankyWindows",value:function(){var e=Object(yc.d)(this.durationMs,9)>500*this.nextJankyWindowSampleIntervalNumber,t=Math.floor(this.durationMs/500),n=t-this.nextJankyWindowSampleIntervalNumber;e&&(this.durationMs>=1e3&&(this.recordJankyWindows(0,n-1),this.recordJankyWindows(this.framesInCurrentJankyWindowSample,n>0?1:0),this.recordJankyWindows(this.framesInCurrentJankyWindowSample+this.framesInPreviousJankyWindowSample)),this.nextJankyWindowSampleIntervalNumber=t+1,this.framesInPreviousJankyWindowSample=n>0?0:this.framesInCurrentJankyWindowSample,this.framesInCurrentJankyWindowSample=0),this.framesInCurrentJankyWindowSample+=1}},{key:"rafHandlerForPRQMetrics",value:function(){if(this.isEnabledForPRQMetrics()){var e=window.performance.now();if(void 0!==this.lastRafHandlerTimeForPRQMetrics){var t=e-this.lastRafHandlerTimeForPRQMetrics,n=Object(yc.d)(Math.round(t,0),2);this.histFrameRenderTime[n]=(this.histFrameRenderTime[n]||0)+1,this.lastRafHandlerTimeForPRQMetrics=e,this.durationMs+=t,this.sampleJankyWindows()}else this.lastRafHandlerTimeForPRQMetrics=e}}},{key:"startPRQMetrics",value:function(){this.isEnabled()||window.requestAnimationFrame(this.rafHandler),this.enabledForPRQMetrics=!0,this.resetCountersForPRQMetrics()}},{key:"stopPRQMetrics",value:function(){this.enabledForPRQMetrics=!1}},{key:"isEnabledForPRQMetrics",value:function(){return!!this.enabledForPRQMetrics}},{key:"getPRQMetrics",value:function(){return{durationMs:Math.round(this.durationMs),histJankyWindows:this.histJankyWindows,histFrameRenderTime:this.histFrameRenderTime}}}]),e}();function Sx(){return null===jx.instance&&(jx.instance=new jx),jx.instance}jx.instance=null;Sx().startClientStats.bind(jx.instance),Sx().stopClientStats.bind(jx.instance),Sx().storeClientStats.bind(jx.instance),Sx().isEnabledForClientStats.bind(jx.instance),Sx().getTotalBeachballCount.bind(jx.instance),Sx().getTotalStutterCount.bind(jx.instance);var Ix=Sx().startPRQMetrics.bind(jx.instance),wx=Sx().stopPRQMetrics.bind(jx.instance),Nx=Sx().isEnabledForPRQMetrics.bind(jx.instance),Tx=Sx().getPRQMetrics.bind(jx.instance),Ax=n("h5+L"),Rx=n("F2y5"),Px=n("RQuH"),Mx=n("+6YQ"),xx=new B.b("contextual_shortcuts"),Fx=(h.b.func,h.b.bool,h.b.func,{showKeyboardShortcuts:d.a,featureContextualMessageShortcuts:!1,closeModal:d.a}),Lx=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isOpen:!0},Object(Kt.a)(n,["closeModal","openShortcutsPanel"]),n}return u()(t,e),o()(t,[{key:"closeModal",value:function(){this.setState(function(){return{isOpen:!1}}),this.props.closeModal()}},{key:"openShortcutsPanel",value:function(e){this.props.showKeyboardShortcuts({focusKey:e&&"keydown"===e.type?"keyboard_shortcuts":null}),this.closeModal()}},{key:"render",value:function(){if(!this.props.featureContextualMessageShortcuts)return null;var e=xx.t("Message keyboard shortcuts");return m.a.createElement($S.a,{isOpen:this.state.isOpen,centered:!0,fullscreen:!1,closeModal:this.closeModal},m.a.createElement($S.h,null,m.a.createElement($S.j,{title:e})),m.a.createElement($S.d,null,m.a.createElement($S.e,null,m.a.createElement("div",{className:"margin_bottom_100"},xx.rt("When you focus on a message using {up_arrow_key} or {f6_key}, you can quickly interact with it by pressing:",{up_arrow_key:m.a.createElement(On.a,{label:"\u2191"}),f6_key:m.a.createElement(On.a,{label:"F6"})})),m.a.createElement("ul",{className:"no_bullets margin_left_0"},m.a.createElement("li",{className:"margin_bottom_50"},xx.rt("{shortcut} to edit (if it's your message)",{shortcut:m.a.createElement(On.a,{label:"E"})})),m.a.createElement("li",{className:"margin_bottom_50"},xx.rt("{shortcut} to add an emoji reaction",{shortcut:m.a.createElement(On.a,{label:"R"})})),m.a.createElement("li",{className:"margin_bottom_50"},xx.rt("{shortcut} to open a thread",{shortcut:m.a.createElement(On.a,{label:"T"})})),m.a.createElement("li",{className:"margin_bottom_50"},xx.rt("{shortcut} to pin / unpin",{shortcut:m.a.createElement(On.a,{label:"P"})})),m.a.createElement("li",{className:"margin_bottom_50"},xx.rt("{shortcut} to share this message",{shortcut:m.a.createElement(On.a,{label:"S"})})),m.a.createElement("li",{className:"margin_bottom_50"},xx.rt("{shortcut} to star / unstar the message",{shortcut:m.a.createElement(On.a,{label:"A"})})),m.a.createElement("li",{className:"margin_bottom_50"},xx.rt("{shortcut} to mark as unread from this message",{shortcut:m.a.createElement(On.a,{label:"U"})})),m.a.createElement("li",{className:"margin_bottom_50"},xx.rt("{shortcut} to remind you about this message",{shortcut:m.a.createElement(On.a,{label:"M"})})),m.a.createElement("li",null,xx.rt("{shortcut} to delete this message",{shortcut:m.a.createElement(On.a,{label:"DELETE"})}))))),m.a.createElement($S.f,null,m.a.createElement($S.g,null,m.a.createElement(Mx.b,{type:"outline",onClick:this.openShortcutsPanel},xx.t("Open the shortcut panel")),m.a.createElement(Mx.b,{onClick:this.closeModal,autoFocus:!0},xx.t("Okay")))))}}]),t}(m.a.Component);Lx.displayName="ContextualShortcutsModal",Lx.defaultProps=Fx;var Dx=Object(g.b)(function(e){return{featureContextualMessageShortcuts:Object(y.m)(e,"feature_contextual_message_shortcuts")}},function(e){return{showKeyboardShortcuts:function(){return e(jn.h.apply(void 0,arguments))},closeModal:function(){return e(tn.a.apply(void 0,arguments))}}})(Lx),Ux=Object(gt.b)("Open the contextual message shortcuts modal",function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})();Object(y.m)(t,"feature_contextual_message_shortcuts")&&e(Object(tn.e)({element:m.a.createElement(Dx,null)}))});Ux.meta={name:"openContextualMessageShortcutsModal",key:"actionsOpenContextualMessageShortcutsModalOpenContextualMessageShortcutsModal",description:"Open the contextual message shortcuts modal"};var Bx=Ux,qx=n("gtcZ"),Hx=(h.b.string,h.b.string,h.b.bool,h.b.bool,h.b.bool,h.b.string,h.b.bool,h.b.bool,h.b.object.isRequired,h.b.oneOf(["light","dark"]),h.b.bool,function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.channelId,n=e.channelType,a=e.hasLimitedHistory,r=e.isShared,i=e.isSlackbotIm,o=e.newxpOnboardingStep,s=e.hasTeamMessageLimit,l=e.isMsgLimitBannerUpgrd1131BugTreatment,c=e.logger;if(i)return o&&o!==$F.COMPLETE?m.a.createElement(tL,{step:o,clientTheme:this.props.clientTheme}):m.a.createElement(zF,null);if(l){if(a&&s)return m.a.createElement(DF,{channelId:t,clientTheme:this.props.clientTheme})}else if(a)return s||c.error("Foreword Component: Rendering `LimitedHistoryForeword` component when channel history is limited but team message limit is not.",{subtype:"MESSAGE_PANE_FOREWORD"}),m.a.createElement(DF,{channelId:t,clientTheme:this.props.clientTheme});return"channel"===n||"private"===n?r?m.a.createElement(XF,{channelId:t}):!this.props.inCreatorOnboarding&&m.a.createElement(vF,{channelId:t}):"im"===n?r?m.a.createElement(MF,{channelId:t}):m.a.createElement(TF,{channelId:t}):"mpim"===n?m.a.createElement(GF,{channelId:t}):(Object(Ct.b)().warn('Unknown foreword type "'+n+'"'),null)}}]),t}(p.PureComponent));Hx.displayName="Foreword",Hx.defaultProps={channelId:null,channelType:null,hasLimitedHistory:!1,isShared:!1,isSlackbotIm:!1,newxpOnboardingStep:null,hasTeamMessageLimit:!1,isMsgLimitBannerUpgrd1131BugTreatment:!1,clientTheme:"light",inCreatorOnboarding:!1};var Wx=Object(g.b)(function(e,t){var n=t.channelId,a=Object(G.e)(e,n);if(!a)return null;var r=Object(we.d)(e);return{isShared:Object(K.ab)(a),isSlackbotIm:Object(K.Hb)(a),newxpOnboardingStep:Object(F.l)(e),hasTeamMessageLimit:Object(De.m)(r)>0,isMsgLimitBannerUpgrd1131BugTreatment:"treatment"===Object(Xt.c)(e,"lc_msg_limit_banner_upgrd_1131_bug"),logger:Object(Ct.a)({state:e}),inCreatorOnboarding:Object(Yt.d)(e)}})(Hx),Gx=n("w6pt"),Kx=n("Atrf"),Vx=Object(ba.b)("TS.ui.purpose_dialog.start",d.a),zx=(n("v+20"),new B.b("dialogs_purpose")),Yx=(h.b.string.isRequired,h.b.string,h.b.oneOfType([h.b.string,h.b.object]),h.b.bool,h.b.object.isRequired,h.b.func,h.b.bool,{currentRawPurpose:void 0,currentFormattedPurpose:void 0,featureM11nChannelDetails:!1,submitChannelPurpose:d.a,featureChangePurposeToDescription:!1}),Qx=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onSubmit=n.onSubmit.bind(n),n.renderInput=n.renderInput.bind(n),n.input=m.a.createRef(),n}return u()(t,e),o()(t,[{key:"onSubmit",value:function(){var e=this.input.current&&this.input.current.getWrappedInstance().value(),t=this.props.featureChangePurposeToDescription;if(null==e)return t&&this.props.logger.error("Channel Description dialog submitted with undefined value"),void this.props.logger.error("Channel Purpose dialog submitted with undefined value");e!==this.props.currentRawPurpose&&this.props.submitChannelPurpose({channelId:this.props.channelId,purpose:e})}},{key:"renderInput",value:function(e){var t=e.modules,n=e.isOpen,a=this.props,r=a.currentFormattedPurpose,i=a.featureChangePurposeToDescription;return m.a.createElement(Vj.b,{initialText:r,focusOnMount:!0,minLines:3,modules:t,isAutocompleteOpen:n,maxLength:K.b,ariaLabel:i?zx.t("Edit channel description"):zx.t("Edit channel purpose"),ref:this.input,useLegacyLists:!0})}},{key:"render",value:function(){if(!this.props.featureM11nChannelDetails)return null;var e=this.props.featureChangePurposeToDescription;return m.a.createElement(nn.b,ye()({className:"p-channel_purpose_dialog",title:e?zx.t("Edit channel description"):zx.t("Edit channel purpose"),goButtonText:e?zx.t("Update description"):zx.t("Update purpose"),onGo:this.onSubmit,footerText:zx.t("Describe what this channel is for.")},this.props),m.a.createElement(Hn.a,{renderInput:this.renderInput,completeOnMembers:!0,completeOnChannels:!0,completeOnEmoji:!0,shouldCompleteOnTab:!1}))}}]),t}(p.Component);Qx.displayName="ChannelPurposeDialog",Qx.defaultProps=Yx;var Xx=Object(g.b)(function(e,t){var n=t.channelId,a=Object(Ct.a)({label:"CHANNEL-PURPOSE",state:e}),r=Object(G.e)(e,n),i=r&&r.purpose&&r.purpose.value,o=i&&Object(zj.a)(e,{text:i});return{channelId:r.id,currentRawPurpose:i,currentFormattedPurpose:o,featureM11nChannelDetails:Object(y.m)(e,"feature_m11n_channel_details"),featureChangePurposeToDescription:Object(y.m)(e,"feature_change_purpose_to_description"),logger:a}},function(e){return{submitChannelPurpose:function(){return e(UE.G.apply(void 0,arguments))}}})(Qx),Jx=n("F+Fq"),Zx=new B.b("message_pane_foreword"),$x=(h.b.func,{onClick:d.a}),eF=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props.onClick;return m.a.createElement(En.a,{className:"p-message_pane__foreword__button",onClick:e},m.a.createElement(ta.b,{type:"plus",size:"inherit"})," ",Zx.t("Add an app"))}}]),t}(p.PureComponent);eF.displayName="AppButton",eF.defaultProps=$x;var tF=eF,nF=new B.b("message_pane_foreword"),aF=(h.b.bool,h.b.func,{isPrivate:!1,onClick:d.a}),rF=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.isPrivate,n=e.onClick,a=void 0;return a=t?nF.t("Add people to this private channel",{fallbackHash:"e39d2befa2a64ec5522429e9d4be5aace4c8f08b"}):nF.t("Add people to this channel",{fallbackHash:"379e588d09f8d3998101d407aac8b99c9555d635"}),m.a.createElement(En.a,{className:"p-message_pane__foreword__button",onClick:n},m.a.createElement(ta.b,{type:"user",size:"inherit"})," ",a)}}]),t}(p.PureComponent);rF.displayName="InviteButton",rF.defaultProps=aF;var iF=rF,oF=new B.b("message_pane_foreword"),sF=(h.b.func,h.b.bool,{onClick:d.a,featureChangePurposeToDescription:!1}),lF=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.onClick,n=e.featureChangePurposeToDescription;return m.a.createElement(En.a,{className:"p-message_pane__foreword__button",onClick:t},m.a.createElement(ta.b,{type:"pencil",size:"inherit"})," ",n?oF.t("Set a description"):oF.t("Set a purpose"))}}]),t}(p.PureComponent);lF.displayName="PurposeButton",lF.defaultProps=sF;var cF=Object(rr.a)("feature_change_purpose_to_description")(lF),uF=(h.b.string,h.b.string,h.b.bool,h.b.bool,h.b.string,h.b.object.isRequired,h.b.bool,h.b.bool,h.b.func,h.b.func,h.b.func,h.b.bool,{channelId:null,purpose:null,isUserRestricted:!1,isChannelArchived:!1,channelType:null,canInviteToChannel:!1,canAddAppsToChannel:!1,startChannelInviteModal:d.a,openModal:d.a,openAppsBrowserModal:d.a,featureM11nAppsBrowser:!1}),dF=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onPurposeButtonClick=n.onPurposeButtonClick.bind(n),n.onInviteButtonClick=n.onInviteButtonClick.bind(n),n.onAppButtonClick=n.onAppButtonClick.bind(n),n}return u()(t,e),o()(t,[{key:"onPurposeButtonClick",value:function(){var e=this.props.channelId;Object(ae.a)()?this.props.openModal({element:m.a.createElement(Xx,{channelId:e})}):Vx(e)}},{key:"onInviteButtonClick",value:function(){var e=this.props,t=e.channelId;e.clogger.track(le.EventId.CHANNEL_FOREWORD,{contexts:{ui_context:{action:"click",ui_properties:{element_type:"button",element_name:"channel_foreword_add"}}}}),this.props.startChannelInviteModal({channelId:t})}},{key:"onAppButtonClick",value:function(){var e,t=this.props,n=t.channelId,a=t.clogger,r=le.EventId.CHANNEL_FOREWORD,i=(e={},fe()(e,le.UiContextKeys.action,le.UiAction.CLICK),fe()(e,le.UiContextKeys.ui_element,le.UiElement.BTN_ADD_APPS),e);a.track(r,{contexts:fe()({},le.ClientEventKeys.ui_context,i)}),this.props.featureM11nAppsBrowser?this.props.openAppsBrowserModal({addAppsVariant:!0,referringEventId:r,referringUiContext:i,channelId:n}):Object(Jx.b)(r,i)}},{key:"render",value:function(){var e=this.props,t=e.channelId,n=e.canAddAppsToChannel,a=e.isUserRestricted,r=e.purpose,i=e.channelType,o=e.canInviteToChannel,s=e.isChannelArchived,l=void 0;r||a||s||(l=m.a.createElement(cF,{channelId:t,onClick:this.onPurposeButtonClick}));var c=void 0;n&&(c=m.a.createElement(tF,{onClick:this.onAppButtonClick}));var u=void 0;return o&&(u=m.a.createElement(iF,{onClick:this.onInviteButtonClick,isPrivate:"private"===i})),m.a.createElement("div",{className:"p-message_pane__foreword__buttons"},l,c,u)}}]),t}(p.PureComponent);dF.displayName="ChannelForewordButtons",dF.defaultProps=uF;var pF=Object(g.b)(function(e,t){var n=t.channelId,a=Object(G.e)(e,n);if(!a)return{};var r=Object(xo.b)(e),i=a.purpose?a.purpose.value:null,o=Object(Bb.K)(e,n),s=Object(Bb.x)(e,n);return{purpose:i,isUserRestricted:Object(eo.Gb)(r),isChannelArchived:Object(K.X)(a),channelType:Object(K.v)(a),clogger:Object(re.a)({state:e}),canInviteToChannel:o,canAddAppsToChannel:s,featureM11nAppsBrowser:Object(y.m)(e,"feature_m11n_apps_browser")}},function(e){return{startChannelInviteModal:function(){return e(FE.b.apply(void 0,arguments))},openAppsBrowserModal:function(){return e(DE.a.apply(void 0,arguments))},openModal:function(){return e(tn.e.apply(void 0,arguments))}}})(dF),mF=new B.b("message_pane_foreword"),hF=(h.b.string,h.b.node,h.b.string,h.b.bool,h.b.bool,h.b.bool,h.b.func,{channelId:null,description:null,purpose:null,isUserRestricted:!1,userCanSetPurposeForChannel:!0,featureChangePurposeToDescription:!1,openModal:d.a}),bF=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onPurposeButtonClick=n.onPurposeButtonClick.bind(n),n}return u()(t,e),o()(t,[{key:"onPurposeButtonClick",value:function(){var e=this.props.channelId;Object(ae.a)()?this.props.openModal({element:m.a.createElement(Xx,{channelId:e})}):Vx(e)}},{key:"maybeRenderPurpose",value:function(){var e=this.props,t=e.purpose,n=e.featureChangePurposeToDescription;return t?m.a.createElement("span",null," ",n?mF.t("Description:"):mF.t("Purpose:")," ",m.a.createElement(pg.a,{text:t})):null}},{key:"maybeRenderPurposeEditLink",value:function(){var e=this.props,t=e.purpose,n=e.isUserRestricted,a=e.userCanSetPurposeForChannel;return t&&!n&&a?m.a.createElement("span",{className:"no_wrap"}," ","(",m.a.createElement(En.a,{onClick:this.onPurposeButtonClick},mF.t("edit")),")"):null}},{key:"render",value:function(){var e=this.props.description;return m.a.createElement("div",{className:"p-message_pane__foreword__description","data-qa":"im_foreword_description"},e,this.maybeRenderPurpose(),this.maybeRenderPurposeEditLink())}}]),t}(p.PureComponent);bF.displayName="ChannelForewordDescription",bF.defaultProps=hF;var fF=Object(g.b)(function(e,t){return{userCanSetPurposeForChannel:Object(Bb.v)(e,t.channelId).ok}},function(e){return{openModal:function(){return e(tn.e.apply(void 0,arguments))}}})(Object(rr.a)("feature_change_purpose_to_description")(bF)),gF=new B.b("message_pane_foreword"),_F=(h.b.string,h.b.string,h.b.bool,h.b.string,h.b.number,h.b.bool,h.b.bool,h.b.bool.isRequired,function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"renderTitle",value:function(){var e=this.props,t=e.channelId,n=e.featureLongerChannelNames,a=f()("p-message_pane__foreword__title",{"p-message_pane__foreword__title--truncate":!n});return m.a.createElement("h1",{className:a},n?m.a.createElement(Lo.a,{channelId:t}):m.a.createElement(Yp.a,{channelId:t,inline:!0,iconProps:{inherit:!0,align:"baseline"}}))}},{key:"renderDescription",value:function(){var e=this.props,t=e.channelId,n=e.createdById,a=e.creatorIsYou,r=e.dateCreated,i=e.isPrivate,o=e.purpose,s=e.isUserRestricted,l=e.featureLongerChannelNames,c=void 0;r?(c=Object(Ps.l)(r),c=Object(Ps.f)(r)||Object(Ps.g)(r)?c.toLowerCase():gF.t("on {date}",{date:c})):c=gF.rt("on {date}",{date:m.a.createElement(Gx.a,{type:"unknown"})});var u=l?m.a.createElement("strong",null,m.a.createElement(Lo.a,{channelId:t,boldIcon:!0})):m.a.createElement(Yp.a,{channelId:t,inline:!0,iconProps:{inherit:!0,align:"baseline"},className:"bold"}),d=void 0;if(a)d=i?gF.rt("You created this private channel {date}. This is the very beginning of the {name} channel.",{date:c,name:u}):gF.rt("You created this channel {date}. This is the very beginning of the {name} channel.",{date:c,name:u});else{var p=n?m.a.createElement(Kx.a,{id:n,showTooltip:!0}):m.a.createElement(Gx.a,{type:"unknown"});d=i?gF.rt("{creator} created this private channel {date}. This is the very beginning of the {name} channel.",{creator:p,date:c,name:u}):gF.rt("{creator} created this channel {date}. This is the very beginning of the {name} channel.",{creator:p,date:c,name:u})}return m.a.createElement(fF,{channelId:t,description:d,purpose:o,isUserRestricted:s})}},{key:"render",value:function(){var e=this.props,t=e.channelId,n=e.isPrivate,a=f()("p-message_pane__foreword",{"p-message_pane__foreword--private":n});return m.a.createElement("div",{className:a},this.renderTitle(),this.renderDescription(),m.a.createElement(pF,{channelId:t}))}}]),t}(p.PureComponent));_F.displayName="ChannelForeword",_F.defaultProps={channelId:null,purpose:null,creatorIsYou:!1,createdById:null,dateCreated:null,isPrivate:!1,isUserRestricted:!1};var vF=Object(g.b)(function(e,t){var n=t.channelId,a=Object(G.e)(e,n);if(!a)return{};var r=Object(xo.b)(e),i=a.purpose?a.purpose.value:null,o=Object(K.Bb)(a);return{purpose:i,creatorIsYou:r&&r.id===a.creator,createdById:a.creator,dateCreated:a.created,isPrivate:o,isUserRestricted:Object(eo.Gb)(r),featureLongerChannelNames:Object(y.m)(e,"feature_longer_channel_names")}})(_F),yF=n("uksu"),kF=n("fyoz"),OF=new B.b("message_pane_foreword"),CF=(h.b.string,h.b.string,h.b.object.isRequired,h.b.func,{botName:null,botId:null,openAboutAppWithMemberId:void 0}),EF=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return u()(t,e),o()(t,[{key:"onClick",value:function(){var e=this.props.botId;this.props.openAboutAppWithMemberId({memberId:e}),this.props.clogger.track("APP_SPACE_ABOUT_CLICKED",{about_clicked_from_bot_dm:!0})}},{key:"render",value:function(){var e=this.props.botName;return m.a.createElement(En.a,{className:"p-message_pane__foreword__button",onClick:this.onClick},m.a.createElement(ta.b,{type:"lightbulb-o",size:"inherit"})," ",OF.t("How does {name} work?",{name:Object(B.p)(e)}))}}]),t}(p.PureComponent);EF.displayName="AppHelpButton",EF.defaultProps=CF;var jF=Object(g.b)(function(e,t){var n=t.botId,a=Object(xo.d)(e,n),r=Object(re.a)({state:e});return a?{botName:Object(eo.A)(a),clogger:r}:{clogger:r}},function(e){return{openAboutAppWithMemberId:function(){return e(yF.c.apply(void 0,arguments))}}})(EF),SF=new B.b("message_pane_foreword"),IF=(h.b.bool.isRequired,h.b.string,h.b.oneOf(["self","bot","member"]).isRequired,h.b.bool,h.b.func,h.b.func.isRequired,h.b.bool.isRequired,{memberId:null,prefWhoCanSeeThis:!1,openAboutAppWithMemberId:d.a}),wF=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onMemberClick=n.onMemberClick.bind(n),n}return u()(t,e),o()(t,[{key:"onMemberClick",value:function(e){e.preventDefault();var t=this.props,n=t.memberId,a=t.featureReactMemberProfileCard;this.canAppSpaceBeUsed()?this.props.openAboutAppWithMemberId({memberId:n}):a?this.props.showMemberProfile({memberId:n}):Object(jd.i)(n)}},{key:"canAppSpaceBeUsed",value:function(){var e=this.props,t=e.isAppSpaceEnabled;return"bot"===e.type&&t}},{key:"renderAvatar",value:function(){var e=this.props.memberId;return m.a.createElement("div",{className:"p-message_pane__foreword__avatars"},m.a.createElement(_e.c,{onClick:this.onMemberClick},m.a.createElement(kF.b,{id:e,size:"large",showPresence:!0,showStatus:!0,showAvatar:!0})))}},{key:"renderDescription",value:function(){var e=this.props,t=e.memberId;if("self"===e.type)return m.a.createElement("div",{className:"p-message_pane__foreword__description","data-qa":"im_foreword_description"},SF.rt("<b>This is your space.</b> Draft messages, list your to-dos, or keep links and files handy. You can also talk to yourself here, but please bear in mind you\u2019ll have to supply both sides of the conversation."));var n=SF.rt("This is the very beginning of your direct message history with {name}",{name:m.a.createElement(Kx.a,{id:t,showTooltip:!0})});return this.props.prefWhoCanSeeThis&&(n=SF.rt("This is the very beginning of your direct message history with {name}. Only the two of you are in this conversation, and no one else can join it. <a>Learn more</a>",{name:m.a.createElement(Kx.a,{id:t,showTooltip:!0})},function(e){var t=e.text,n=e.key;return m.a.createElement(la.a,{key:n,href:"https://get.slack.help/hc/articles/360002063088",rel:"noopener noreferrer"},t)})),m.a.createElement("div",{className:"p-message_pane__foreword__description","data-qa":"im_foreword_description"},n)}},{key:"renderButtons",value:function(){var e=this.props.memberId;return this.canAppSpaceBeUsed()?m.a.createElement("div",{className:"p-message_pane__foreword__buttons"},m.a.createElement(jF,{botId:e})):null}},{key:"render",value:function(){return m.a.createElement("div",{className:"p-message_pane__foreword"},this.renderAvatar(),this.renderDescription(),this.renderButtons())}}]),t}(p.PureComponent);wF.displayName="BaseImForeword",wF.defaultProps=IF;var NF=Object(g.b)(function(e,t){var n=t.channelId,a=Object(G.e)(e,n);if(!a)return{};var r=Object(K.H)(a),i=Object(xo.d)(e,r),o=void 0;return o=r===Object(y.c)(e)?"self":Object(eo.ib)(i)?"bot":"member",{isAppSpaceEnabled:Object(ia.g)(e),memberId:r,type:o,prefWhoCanSeeThis:Object(Zt.j)(e,"whocanseethis_dm_mpdm_badge"),featureReactMemberProfileCard:Object(y.m)(e,"feature_react_member_profile_card")}},function(e){return{openAboutAppWithMemberId:function(){return e(yF.c.apply(void 0,arguments))},showMemberProfile:function(){return e(jn.j.apply(void 0,arguments))}}})(wF);NF.propTypes={channelId:h.b.string},NF.defaultProps={channelId:null};var TF=NF,AF=new B.b("message_pane_foreword"),RF=(h.b.string,h.b.object,{memberId:void 0,sharedTeam:void 0}),PF=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"renderAvatar",value:function(){var e=this.props.memberId;return m.a.createElement("div",{className:"p-message_pane__foreword__avatars"},m.a.createElement(kF.b,{id:e,size:"large",showPresence:!0,showStatus:!0,showAvatar:!0}))}},{key:"renderDescription",value:function(){var e=this.props,t=e.sharedTeam,n=e.memberId,a=!t||Object(De.O)(t)?m.a.createElement(Il.a,{type:"unknown"}):m.a.createElement("strong",null,Object(De.f)(t)),r=AF.rt("{name} is from {team} and not a member of your team, so share files and information with care.",{name:m.a.createElement(Kx.a,{id:n,showTooltip:!0}),team:a});return m.a.createElement("div",{className:"p-message_pane__foreword__description","data-qa":"im_foreword_description"},r)}},{key:"render",value:function(){return m.a.createElement("div",{className:"p-message_pane__foreword"},this.renderAvatar(),this.renderDescription())}}]),t}(p.PureComponent);PF.displayName="ImSharedForeword",PF.defaultProps=RF;var MF=Object(g.b)(function(e,t){var n=t.channelId,a=Object(G.e)(e,n);if(!a)return null;var r=Object(xo.d)(e,Object(K.H)(a)),i=Object(eo.P)(r),o=Object(we.i)(e,i);return{memberId:Object(K.H)(a),sharedTeam:o}})(PF),xF=new B.b("message_pane_foreword"),FF=(h.b.string.isRequired,h.b.string,h.b.object.isRequired,h.b.func.isRequired,h.b.string,h.b.number,h.b.oneOf(["light","dark"]),function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.pricingPlansPageUrl="pricing?ui_step=42&ui_element="+n.getClogUiElementVal(),n.onClickLearnMore=n.onClickLearnMore.bind(n),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.clogger.track("GROWTH_PRICING",{contexts:{ui_context:{step:"history",action:"impression",ui_element:this.getClogUiElementVal()}}})}},{key:"onClickLearnMore",value:function(){this.props.clogger.track("GROWTH_PRICING",{contexts:{ui_context:{step:"history",action:"click",ui_element:this.getClogUiElementVal()}}}),this.props.showPricingPlans({pricingPlansPageUrl:this.pricingPlansPageUrl,source:"limited_history_foreword"})}},{key:"getClogUiElementVal",value:function(){var e=this.props.channelType;return"mpim"===e||"im"===e?33:34}},{key:"render",value:function(){var e=this.props,t=e.channelName,n=e.channelType,a=e.clientTheme,r=e.workspaceName,i=e.teamMessageLimitInSeconds,o=!0,s="",l="",c=xF.t("See Upgrade Options");i?(o=!1,s=xF.t("Unlock messages prior to {priorToDate} in {workspaceName}",{priorToDate:Object(Sp.a)(i,"{date}"),workspaceName:Object(B.p)(r)}),l=xF.t("To view and search all the messages in your workspace\u2019s history, rather than just the {maxMesssageLimitCount} most recent, upgrade to one of our paid plans.",{maxMesssageLimitCount:Object(pC.a)(1e4)})):"mpim"===n||"im"===n?(l=xF.t("To see and search this conversation\u2019s full history, upgrade to one of our paid plans."),s=xF.t("There\u2019s more to this conversation")):(s=xF.t("There\u2019s more to the conversation in {name}",{name:t}),l=xF.t("To see and search this channel\u2019s full history, upgrade to one of our paid plans."));var u=f()("p-message_pane__limited_history_foreword",fe()({},"p-message_pane__limited_history_foreword--"+a,"light"!==a));return m.a.createElement("div",{className:u,"data-qa":"msg_lim_header"},m.a.createElement("div",{className:"p-message_pane__limited_history_foreword_headline","data-qa":"msg_lim_headline"},o&&m.a.createElement(p.Fragment,null,m.a.createElement(Gs.b,{text:":speech_balloon:",emojiSize:Gs.a.MEDIUM,className:"p-message_pane__limited_history_speech_emoji"}),"\xa0"),s),m.a.createElement("div",{className:"p-message_pane__limited_history_foreword_subheading","data-qa":"msg_lim_subheading"},l),m.a.createElement(_e.d,{onClick:this.onClickLearnMore,"data-qa":"see_upgrade_options_btn",size:"small"},c))}}]),t}(p.PureComponent));FF.displayName="LimitedHistoryForeword",FF.defaultProps={channelName:"",workspaceName:"",teamMessageLimitInSeconds:0,clientTheme:"light"};var LF={showPricingPlans:Xs.g},DF=Object(g.b)(function(e,t){var n=t.channelId,a=Object(G.e)(e,n);if(!a)return{};var r=Object(we.d)(e),i=r?Object(De.f)(r):"",o=Object(De.m)(r),s=0;return o>0&&(s=o/1e6),{channelType:Object(K.v)(a),channelName:Object(K.x)(e,a),clogger:Object(re.a)({state:e}),workspaceName:i,teamMessageLimitInSeconds:s}},LF)(FF),UF=new B.b("message_pane_foreword"),BF=(h.b.string.isRequired,h.b.arrayOf(h.b.string),h.b.arrayOf(h.b.object),h.b.string,h.b.oneOf(["everything","mentions_dms","nothing"]),h.b.bool,h.b.func,h.b.func,h.b.bool.isRequired,{memberIds:[],externalTeams:[],notificationPermission:"na",notificationSetting:"everything",prefWhoCanSeeThis:!1,openChannelNotificationPrefsModal:d.a,openPrefsModal:d.a}),qF=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.openPrefsDialog=n.openPrefsDialog.bind(n),n.openChannelPrefsDialog=n.openChannelPrefsDialog.bind(n),n.state=Object(Pe.m)(),n}return u()(t,e),o()(t,[{key:"getNotificationWarningText",value:function(){var e=this,t=this.state,n=t.notificationsEnabled,a=t.notificationDisabledType;if(n)return null;switch(a){case"not_yet_allowed":return UF.rt("You have not yet allowed desktop notifications. Open the <button>Preferences Dialog</button> and follow the instructions to set them up.",null,function(t){var n=t.key,a=t.text;return m.a.createElement(En.a,{onClick:e.openPrefsDialog,key:n},a)});case"not_allowed":return UF.t("You\u2019ve disallowed notifications in your browser. You\u2019ll need to open your browser preferences to change that.");case"impossible":return UF.rt("Your browser does not support desktop notifications. <a>Try one of our apps?</a>",{},function(e){var t=e.key,n=e.text;return m.a.createElement(WA.a,{target:"_blank",key:t,href:"/downloads"},n)});default:return null}}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.notificationPermission!==e.notificationPermission&&this.setState(function(){return Object(Pe.m)()})}},{key:"openChannelPrefsDialog",value:function(){this.props.openChannelNotificationPrefsModal({channelId:this.props.channelId,entryPoint:"foreward"})}},{key:"openPrefsDialog",value:function(){this.props.openPrefsModal({activeSection:"notifications"})}},{key:"renderAvatars",value:function(){var e=this.props,t=e.memberIds,n=e.featureReactMemberProfileCard,a=t.map(function(e){return m.a.createElement(Do.c,{key:e,className:"p-message_pane__foreword__avatar",userId:e,size:56,showCard:n})});return m.a.createElement("div",{className:"p-message_pane__foreword__avatars"},a)}},{key:"renderDescription",value:function(){var e=this.props,t=e.memberIds,n=e.externalTeams;if(n.length){var a=n.map(this.renderTeamName),r=UF.rt("This conversation includes people from {teams}, so share files and information with care.",{teams:Object(B.j)(a,{noEscape:!0,react:!0,strong:!0})});return m.a.createElement("div",{className:"p-message_pane__foreword__description","data-qa":"im_foreword_description"},r,this.renderDescriptionActions())}var i=t.map(function(e){return m.a.createElement(Kx.a,{id:e,showTooltip:!0})}),o=UF.rt("This is the very beginning of your direct message history with {names}",{names:Object(B.j)(i,{noEscape:!0,react:!0})});return this.props.prefWhoCanSeeThis&&(o=UF.rt("This is the very beginning of your direct message history with {names}. Only the {number} of you are in this conversation, and no one else can join it. <a>Learn more</a>",{names:Object(B.j)(i,{noEscape:!0,react:!0}),number:i.length+1},function(e){var t=e.text,n=e.key;return m.a.createElement(WA.a,{key:n,href:"https://get.slack.help/hc/articles/360002063088",target:"_blank",rel:"noopener noreferrer"},t)})),m.a.createElement("div",{className:"p-message_pane__foreword__description","data-qa":"im_foreword_description"},o,this.renderDescriptionActions())}},{key:"renderDescriptionActions",value:function(){var e=this.getNotificationWarningText();if(e)return m.a.createElement("div",{className:"p-message_pane__foreword__notification_warning"},e);var t=this.props.notificationSetting;return"everything"===t?m.a.createElement("div",{className:"p-message_pane__foreword__notification_setting"},UF.rt("You\u2019ll be notified for <strong>every new message</strong> in this conversation.",{fallbackHash:"d74e681b9c224e38f01310015fd4ae63f9c3ba9c"})," ",this.renderEditButton()):"mentions_dms"===t?m.a.createElement("div",{className:"p-message_pane__foreword__notification_setting"},UF.rt("You\u2019ll be notified when <strong>a teammate mentions you or uses one of your keywords</strong>.")," ",this.renderEditButton()):m.a.createElement("div",{className:"p-message_pane__foreword__notification_setting"},UF.rt("You won\u2019t receive notifications.")," ",this.renderEditButton())}},{key:"renderEditButton",value:function(){return m.a.createElement(En.a,{onClick:this.openChannelPrefsDialog},UF.rt("Change this setting",{fallbackHash:"5301648dcf6b53cefc9ed52999aaa92d4603cae0"}))}},{key:"renderTeamName",value:function(e){return Object(De.O)(e)?m.a.createElement(Il.a,{type:"unknown"}):Object(De.f)(e)}},{key:"render",value:function(){return m.a.createElement("div",{className:"p-message_pane__foreword"},this.renderAvatars(),this.renderDescription())}}]),t}(p.PureComponent);qF.displayName="BaseMpimForeword",qF.defaultProps=BF;var HF=Object(O_.createSelector)(function(e,t){var n=t.channelId;return Object(G.e)(e,n)},y.c,function(e,t){var n=Object(K.I)(e);return Object(Jd.a)(n,t)});var WF=Object(g.b)(function(e,t){var n=t.channelId,a=Object(G.e)(e,n);if(!a)return null;var r=[];if(Object(K.ab)(a)){var i=Object(K.N)(e,a,{includeSelfTeamId:!0});r=Object(De.Q)(e,i).map(function(t){return Object(we.i)(e,t)})}return{memberIds:HF(e,{channelId:n}),externalTeams:r,notificationPermission:Object(Ik.b)(e),notificationSetting:Object(Pe.f)(e,n),prefWhoCanSeeThis:Object(Zt.j)(e,"whocanseethis_dm_mpdm_badge"),featureReactMemberProfileCard:Object(y.m)(e,"feature_react_member_profile_card")}},function(e){return{openChannelNotificationPrefsModal:function(){return e(tO.a.apply(void 0,arguments))},openPrefsModal:function(){return e(ul.a.apply(void 0,arguments))}}})(qF);WF.propTypes={channelId:h.b.string},WF.defaultProps={channelId:null};var GF=WF,KF=new B.b("message_pane_foreword"),VF=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){var e=m.a.createElement("h1",{className:"p-message_pane__foreword__title"},KF.t("Hi, Slackbot here!")),t=m.a.createElement("div",{className:"p-message_pane__foreword__description display_flex","data-qa":"im_foreword_description"},m.a.createElement(Do.c,{userId:"USLACKBOT",size:48,className:"p-message_pane__foreword__avatar"}),m.a.createElement("div",null,m.a.createElement("p",null,KF.rt("You can ask me simple questions about how Slack works, or just type a few keywords. I\u2019ll search the <a>Help Center</a> to help you find more info.",{fallbackHash:"0d892d295ed431c242e406d752976a0f4d8d8b38"},function(e){var t=e.key,n=e.text;return m.a.createElement(la.a,{key:t,rel:"noopener noreferrer",href:"https://get.slack.help/hc/en-us"},n)})),m.a.createElement("p",{className:"margin_0"},KF.rt("For example: <b>Can I edit a message I\u2019ve posted?</b> Or simply: <b>edit message</b>.",{fallbackHash:"bb42704f8751d2e3be33f3dd809a406c5a787d1e"},function(e){var t=e.key,n=e.text;return m.a.createElement(la.a,{key:t,rel:"noopener noreferrer",href:"https://get.slack.help/hc/en-us"},n)})))),n=f()("p-message_pane__foreword","p-message_pane__foreword--slackbot");return m.a.createElement("div",{className:n},e,t)}}]),t}(p.Component);VF.displayName="SlackbotForeword";var zF=VF,YF=new B.b("message_pane_foreword"),QF=(h.b.object,h.b.string,h.b.bool,h.b.bool,h.b.arrayOf(h.b.shape({id:h.b.string.isRequired,name:h.b.string})),h.b.arrayOf(h.b.shape({id:h.b.string.isRequired,name:h.b.string})),h.b.string,h.b.bool,h.b.bool.isRequired,function(e){function t(){r()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.renderTeamName=e.renderTeamName.bind(e),e}return u()(t,e),o()(t,[{key:"renderTitle",value:function(){var e=this.props,t=e.channel,n=e.featureLongerChannelNames,a=f()("p-message_pane__foreword__title",{"p-message_pane__foreword__title--truncate":!n});return m.a.createElement("h1",{className:a},n?m.a.createElement(Lo.a,{channel:t}):m.a.createElement(Yp.a,{channel:t,inline:!0,iconProps:{inherit:!0,align:"baseline"}}))}},{key:"renderAvatars",value:function(){var e=this.props,t=e.channel,n=e.sharedTeams;if(Object(ls.a)(n))return null;var a=n.map(function(e){var n=Object(K.zb)(t,e.id);return m.a.createElement(WO.b,{key:e.id,id:e.id,size:56,isPendingShared:n,className:"p-message_pane__foreword__avatar"})});return m.a.createElement("div",{className:"p-message_pane__foreword__avatars"},a)}},{key:"renderTeamName",value:function(e){return Object(De.O)(e)?m.a.createElement(Il.a,{type:"unknown"}):Object(De.f)(e)}},{key:"renderDescription",value:function(){var e=this.props,t=e.channelId,n=e.purpose,a=e.sharedTeams,r=e.externalTeams,i=e.isPendingShared,o=e.isUserRestricted,s=void 0;if(i){var l=r.map(this.renderTeamName),c=Object(B.j)(l,{noEscape:!0,react:!0,strong:!0});s=YF.rt("This is a shared channel. Waiting for {names} to join...",{names:c})}else{var u=a.map(this.renderTeamName),d=Object(B.j)(u,{noEscape:!0,react:!0,strong:!0});s=YF.rt("This is a shared channel between {names}.",{names:d})}return m.a.createElement(fF,{channelId:t,description:s,purpose:n,isUserRestricted:o})}},{key:"render",value:function(){var e=this.props,t=e.channelId,n=e.isPrivate,a=f()("p-message_pane__foreword",{"p-message_pane__foreword--private":n});return m.a.createElement("div",{className:a},this.renderAvatars(),this.renderTitle(),this.renderDescription(),m.a.createElement(pF,{channelId:t}))}}]),t}(p.PureComponent));QF.displayName="SharedForeword",QF.defaultProps={channel:null,channelId:null,isPrivate:!1,isPendingShared:!1,sharedTeams:[],externalTeams:[],purpose:null,isUserRestricted:!1};var XF=Object(g.b)(function(e,t){var n=t.channelId,a=Object(G.e)(e,n);if(!a)return null;var r=Object(xo.b)(e),i=a.purpose?a.purpose.value:null,o=Object(K.Bb)(a),s=Object(K.ab)(a),l=Object(K.yb)(a),c=[],u=[];if(s||l){var d=Object(K.N)(e,a,{includeSelfTeamId:!0});c=d.map(function(t){return Object(we.i)(e,t)}),u=Object(De.Q)(e,d).map(function(t){return Object(we.i)(e,t)})}return{channel:a,isPendingShared:l,isPrivate:o,isUserRestricted:r.is_restricted,purpose:i,sharedTeams:c,externalTeams:u,featureLongerChannelNames:Object(y.m)(e,"feature_longer_channel_names")}})(QF),JF=n("zBEu"),ZF=new B.b("newxp_onboarding"),$F=(h.b.string,h.b.oneOf(["light","dark"]),{START:"onboarding_start",CANCELLED:"onboarding_cancelled",SLACKBOT:"onboarding_slackbot_conversation",COMPLETE:"onboarding_complete"}),eL=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"renderHeaderAction",value:function(){return this.props.step===$F.CANCELLED?ZF.rt("I changed my mind. <a>Take the tutorial.</a>",null,function(e){var t=e.key,n=e.text;return m.a.createElement(la.a,{key:t,onClick:JF.b},n)}):this.props.step===$F.SLACKBOT?ZF.rt("Got the hang of Slack already? <a>Skip the tutorial.</a>",null,function(e){var t=e.key,n=e.text;return m.a.createElement(la.a,{key:t,onClick:JF.a},n)}):null}},{key:"renderFooter",value:function(){return this.props.step!==$F.START?null:m.a.createElement("div",{className:"p-message_pane__newxp_foreword__footer"},m.a.createElement(_e.d,{type:"primary",size:"large",className:"p-message_pane__newxp_foreword__explore",onClick:JF.g},ZF.rt("Explore Slack")),m.a.createElement("div",{className:"p-message_pane__newxp_foreword__pre_skip"},ZF.rt("Not your first Slack workspace? <a>Skip the tutorial</a>",null,function(e){var t=e.key,n=e.text;return m.a.createElement(la.a,{key:t,onClick:JF.a,"data-qa":"skip_tutorial"},n)})))}},{key:"render",value:function(){var e=this.props,t=e.step,n=e.clientTheme,a=f()("p-message_pane__newxp_foreword",{"p-message_pane__newxp_foreword--start":"onboarding_start"===t}),r=f()("p-message_pane__newxp_foreword__welcome_text",fe()({},"p-message_pane__newxp_foreword__welcome_text--"+n,"light"!==n));return m.a.createElement("div",{className:a},m.a.createElement("div",{className:"p-message_pane__newxp_foreword__header"},m.a.createElement("div",{className:r},ZF.rt("Welcome!")),m.a.createElement("div",{className:"p-message_pane__newxp_foreword__welcome_message"},ZF.t("Slack is a collaboration hub for teams.",{fallbackHash:"2548745b7be53c916d085ad9d7a6350c53b003b3"})),m.a.createElement("div",{className:"p-message_pane__newxp_foreword__skip_messaging"},this.renderHeaderAction())),this.renderFooter())}}]),t}(p.PureComponent);eL.displayName="NewxpForeword",eL.defaultProps={step:null,clientTheme:"light"};var tL=eL,nL=Wx,aL=new B.b("message_pane_foreword"),rL=(h.b.object.isRequired,h.b.oneOf(["light","dark"]),function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.clogger.track("GROWTH_PRICING",{contexts:{ui_context:{step:"history",action:"impression",ui_element:35}}})}},{key:"render",value:function(){var e=this.props.clientTheme,t=f()("p-message_pane__limited_history_alert",fe()({},"p-message_pane__limited_history_alert--"+e,"light"!==e));return m.a.createElement("div",{className:t},m.a.createElement(Gs.b,{text:":speech_balloon:",emojiSize:Gs.a.MEDIUM,className:"p-message_pane__limited_history_speech_emoji"}),"\xa0",aL.rt("<b>There\u2019s more to this conversation.</b> To see and search this conversation\u2019s full history, upgrade to one of our paid plans."),"\xa0",m.a.createElement(la.a,{href:"/pricing?ui_step=42&ui_element=35",target:"_blank",rel:"noopener noreferrer","data-clog-event":"GROWTH_PRICING","data-clog-ui-element":"slackbot_message_limit_header","data-clog-ui-action":"click","data-clog-ui-step":"history"},aL.t("Learn More")))}}]),t}(p.PureComponent));rL.displayName="LimitedHistoryAlert",rL.defaultProps={clientTheme:"light"};var iL=Object(g.b)(function(e){return{clogger:Object(re.a)({state:e})}})(rL),oL=(n("2XjY"),new B.b("messages")),sL=ye()({},gp.propTypes,{reachedStart:h.b.bool,reachedEnd:h.b.bool}),lL=ye()({},gp.defaultProps,{reachedStart:!1,reachedEnd:!1}),cL=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.pendingUpdate=null,n.recomputeOffsets(e),n.overscan=Math.max(200,e.height/2),n}return u()(t,e),o()(t,[{key:"componentDidUpdate",value:function(){for(var e,n=arguments.length,a=Array(n),r=0;r<n;r++)a[r]=arguments[r];(e=up()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidUpdate",this)).call.apply(e,[this].concat(a)),0===this.props.keys.length&&this.loadMore(),this.layout.setBottomMargin(this.getLoadingOffsetBottom()),this.pendingUpdate=!1}},{key:"onKeyDownPageDown",value:function(e){this.state.hasKeyboardFocus&&this.isScrolledToBottom()&&this.props.reachedEnd?this.focusLastItemInView():up()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onKeyDownPageDown",this).call(this,e)}},{key:"onKeyUpPageDown",value:function(e){this.state.hasKeyboardFocus&&this.isScrolledToTop()&&this.props.reachedStart?this.focusFirstItemInView():up()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onKeyUpPageDown",this).call(this,e)}},{key:"getOffset",value:function(){var e=this.getLoadingOffsetTop();return this.startTop-e}},{key:"getLoadingOffsetTop",value:function(){return this.props.keys.length?this.props.reachedStart&&0===this.state.start?0:this.layout.getTotalHeight()<=this.props.height?0:0!==this.state.start?96:56:0}},{key:"getLoadingOffsetBottom",value:function(){return this.props.keys.length?this.props.reachedEnd&&this.state.end===this.props.keys.length?0:96:0}},{key:"getScrollTop",value:function(){return"number"==typeof this.scrollTop?this.scrollTop:"number"==typeof this.pendingScrollTop?this.pendingScrollTop:up()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getScrollTop",this).call(this)+this.getOffset()}},{key:"getContentHeight",value:function(){return this.endBottom-this.getOffset()+this.getLoadingOffsetBottom()}},{key:"getTop",value:function(e){return this.layout.getTop(e)-this.getOffset()}},{key:"getBottom",value:function(e){return this.layout.getBottom(e)-this.getOffset()}},{key:"setScrollTop",value:function(e){var n=e<this.getOffset(),a=e+this.props.height>this.endBottom+this.getLoadingOffsetBottom();if(n&&0!==this.state.start||a&&this.state.end!==this.props.keys.length)return this.scrollTop=e,void this.relayout();up()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setScrollTop",this).call(this,e-this.getOffset())}},{key:"scrollToOffset",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.animate,r=n.absolute;if(this.node&&!this.pendingUpdate){var i=r?e:e-this.getOffset();!r&&i>0&&i<this.getLoadingOffsetTop()&&(i=0);var o=this.bracketScrollTop(i);r||o===i?a?this.scrollAnimation=this.node.scrollWithAnimation(o):up()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setScrollTop",this).call(this,o):this.setScrollTop(e)}}},{key:"bracketScrollTop",value:function(e){return Math.max(0,Math.min(this.getContentHeight()-this.props.height,e))}},{key:"resetRendered",value:function(){this.overscan=this.props.height/2}},{key:"loadMore",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.start,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.end,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.props,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.getScrollTop(),r=this.layout.getTotalHeight(),i=0===e&&a<1,o=t===n.keys.length&&a+n.height>r-1,s=!n.keys.length||r<=n.height||i,l=!n.keys.length||r<=n.height||o;return s&&l?n.loadAround():s?n.loadPre():!!l&&n.loadPost()}},{key:"relayout",value:function(){var e=this;this.setState(function(t,n){if(n.isLoading)return null;var a=t.start,r=t.end,i=e.startKey,o=e.endKey;e.recomputeOffsets(n,a,r);var s=e.node?e.node.scrollTop():0,l=e.getScrollTop(),c=s-1<=0||l-1<=e.getOffset(),u=s+1>=e.getContentHeight()-n.height||l+1>=e.endBottom-n.height,d={start:a,end:r};if(e.startKey!==i||e.endKey!==o||c&&0!==a||u&&r!==n.keys.length){t.scrolling&&(e.overscan=8e3);var p=d=e.computeBounds(n,l),m=p.start,h=p.end;e.recomputeOffsets(n,m,h),c=l-1<=e.getOffset(),u=l+n.height+1>=e.endBottom+e.getLoadingOffsetBottom()}(c&&0===d.start||u&&d.end===n.keys.length||e.layout.getTotalHeight()<n.height&&0===d.start)&&e.loadMore(a,r,n);var b=e.layout.getTops();return d.start===a&&d.end===r&&b===t.tops?null:(e.scrollAnimation&&e.scrollAnimation.cancel(),e.pendingUpdate=!0,e.scrollTop=l,ye()({},d,{tops:b}))})}},{key:"recomputeOffsets",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.start,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.state.end,a=this.layout.getTotalHeight()<=e.height;this.startKey=e.keys[t],this.endKey=e.keys[n-1],this.startTop=a?0:this.layout.getTop(this.startKey)||0,this.endBottom=this.layout.getBottom(this.endKey)||0}},{key:"computeBounds",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,n=arguments[1],a=n-this.overscan,r=n+e.height+this.overscan,i=up()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getBounds",this).call(this,a,r);return this.snapBounds(e,i)}},{key:"snapBounds",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=arguments[1],n=t.start,a=t.end;return{start:n<20?0:n,end:e.keys.length-a<20?e.keys.length:a}}},{key:"renderLoading",value:function(e,t){var n=e?{top:0,paddingTop:40}:{bottom:0,paddingBottom:15},a=e?"degradedLoadingTop":"degradedLoadingBottom",r=this.props.featureOfflineMode&&this.props.isOffline&&!t,i=oL.t("Loading history...");this.props.featureOfflineMode&&r&&(i=m.a.createElement("span",null,m.a.createElement(ta.b,{type:"cloud-offline-small",size:"inherit"})," ",m.a.createElement("strong",null,oL.t("No connection."))," ",oL.t("Go online to load more messages.")));var o=f()("p-degraded_list__loading",{"p-degraded_list__loading--offline":r});return m.a.createElement("div",{key:a,className:o,style:n},i)}},{key:"renderItems",value:function(){var e=up()(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"renderItems",this).call(this),n=this.state.start>0,a=this.state.end<this.props.keys.length,r=this.props.keys.length>1&&(!this.props.reachedStart||n),i=this.props.keys.length>1&&(!this.props.reachedEnd||a);return[r&&this.renderLoading(!0,n)].concat(ti()(e),[i&&this.renderLoading(!1,a)])}}]),t}(gp),uL=cL;function dL(){var e=window.location.search||"";if(e.indexOf("force_degraded_list=1")>0)return!0;if(e.indexOf("force_infinite_list=1")>0)return!1;var t=window.navigator.userAgent;return-1!==t.indexOf("Firefox")||(-1!==t.indexOf("Windows")||-1!==t.indexOf("Linux"))}cL.propTypes=sL,cL.defaultProps=lL;var pL=n("H3xq").a,mL=n("PR8O"),hL=(n("EnhK"),gp),bL=uL,fL={channelId:h.b.string,timestamps:h.b.arrayOf(h.b.string),requestHistory:h.b.func,lastReadTs:h.b.string,isGhostLastRead:h.b.bool,startTs:h.b.string,startTsOffset:h.b.number,highlightTs:h.b.string,focusRequestedTs:h.b.string,rollups:h.b.objectOf(Hd.a.Rollup()),setUnreadPoint:h.b.func,isLoading:h.b.bool,isLoadingOlder:h.b.bool,reachedStart:h.b.bool,reachedEnd:h.b.bool,prevReachedEnd:h.b.bool,oldest:h.b.string,latest:h.b.string,onScroll:h.b.func,onVisibleRowsChanged:h.b.func,doneHighlighting:h.b.func,isFileExpanding:h.b.bool,isLimited:h.b.bool,isSlackbotIm:h.b.bool,useStickyDayDividers:h.b.bool,shouldIgnoreScrollKeys:h.b.func,shouldIgnoreArrowKeys:h.b.func,channelSessionId:h.b.string,theme:h.b.string,firstUnreadTs:h.b.string,featureTinyspeck:h.b.bool,featureAriaApplicationMode:h.b.bool,messageContainerType:h.b.string,"aria-label":h.b.string.isRequired,teamId:h.b.string,enterpriseId:h.b.string,sessionId:h.b.string,msgTriggers:h.b.object,currentUserId:h.b.string,jumpToTimestamp:h.b.func,makeMessageSummary:h.b.func,isScreenReaderEnabled:h.b.bool,windowLastFocusEvent:h.b.number,onFocusEnter:h.b.func,onFocusLeave:h.b.func,isBannerVisible:h.b.bool,setFocusRequestedTs:h.b.func,showThreadIfThreadable:h.b.func,currentThreadKey:h.b.string,isThreadable:h.b.func,threadListId:h.b.string,telemeter:h.b.object,featureOfflineMode:h.b.bool,isOffline:h.b.bool,userAttentionIsOnChat:h.b.bool,clientTheme:h.b.string,featureMessageNavigationShortcuts:h.b.bool,featureContextualMessageShortcuts:h.b.bool,latestMessageTsWithReactions:h.b.string,openContextualMessageShortcutsModal:h.b.func,seenContextualMessageShortcutsModal:h.b.bool,removeFromSectionNavigation:h.b.func,addToSectionNavigation:h.b.func,setInitialActiveSection:h.b.func,focusLastVisibleMessageInChannel:h.b.bool,setFocusLastVisibleMessageInChannel:h.b.func,setFocusMessageInput:h.b.func},gL={channelId:null,timestamps:[],requestHistory:d.a,lastReadTs:void 0,isGhostLastRead:!1,startTs:null,startTsOffset:null,highlightTs:null,focusRequestedTs:void 0,rollups:null,setUnreadPoint:d.a,isFileExpanding:!1,isLoading:!1,isLoadingOlder:!1,reachedStart:!1,reachedEnd:!1,prevReachedEnd:!1,oldest:void 0,latest:void 0,onScroll:d.a,onVisibleRowsChanged:d.a,doneHighlighting:d.a,isLimited:!1,isSlackbotIm:!1,useStickyDayDividers:!0,shouldIgnoreScrollKeys:function(){return!1},shouldIgnoreArrowKeys:function(){return!1},channelSessionId:null,theme:"light",firstUnreadTs:null,featureTinyspeck:!1,featureAriaApplicationMode:!1,messageContainerType:void 0,teamId:null,enterpriseId:null,sessionId:null,msgTriggers:null,currentUserId:null,jumpToTimestamp:d.a,makeMessageSummary:void 0,isScreenReaderEnabled:!1,windowLastFocusEvent:null,onFocusEnter:d.a,onFocusLeave:d.a,isBannerVisible:!1,setFocusRequestedTs:d.a,showThreadIfThreadable:d.a,currentThreadKey:void 0,isThreadable:d.a,threadListId:void 0,telemeter:{store:d.a,measure:d.a},featureOfflineMode:!1,isOffline:!1,userAttentionIsOnChat:!1,clientTheme:"light",latestMessageTsWithReactions:null,removeFromSectionNavigation:d.a,addToSectionNavigation:d.a,setInitialActiveSection:d.a,focusLastVisibleMessageInChannel:!1,setFocusLastVisibleMessageInChannel:d.a,setFocusMessageInput:d.a,featureMessageNavigationShortcuts:!1,featureContextualMessageShortcuts:!1,openContextualMessageShortcutsModal:d.a,seenContextualMessageShortcutsModal:!1},_L=80,vL=60,yL=64,kL=120,OL={ABOVE:1,VISIBLE:2,BELOW:3},CL="0000000000.000001",EL=function(e){return Math.floor(e/1e3)+".000000"},jL=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),a=dL();if(n.state={degraded:a,isLoading:e.isLoading,isLoadingOlder:e.isLoadingOlder,isSelecting:!1,hasKeyboardFocus:!1,isFileExpanding:!1},n.DEFAULT_ROW_HEIGHT="light"===e.theme?_L:vL,n.STICKY_EPSILON=n.DEFAULT_ROW_HEIGHT/2,n.ANCHOR_OFFSET=a?kL:yL,n.heightCache=new C_.a({DEFAULT_HEIGHT:n.DEFAULT_ROW_HEIGHT}),n.layout=new wb({heightCache:n.heightCache,stickToBottom:!e.isFileExpanding||e.reachedEnd||e.prevReachedEnd,shouldExcludeFirstItemFromGravity:n.isFirstRowLimitedHistoryForeword.bind(n),STICKY_EPSILON:n.STICKY_EPSILON,STICKY_EPSILON_SETHEIGHT:2,ANCHOR_OFFSET:n.ANCHOR_OFFSET}),n.keys=[],n.rows=[],n.visibleRows=[],n.partiallyVisibleRows=[],n.unreadIndex=null,n.list=null,n.useAnchor=!0,n.keyToScrollTo=null,n.width=0,n.hasRenderedOneMessage=!1,n.requestAround=n.requestAround.bind(n),n.requestOlder=n.requestOlder.bind(n),n.requestNewer=n.requestNewer.bind(n),n.renderRow=n.renderRow.bind(n),n.setListRef=n.setListRef.bind(n),n.getAriaLabelForRow=n.getAriaLabelForRow.bind(n),n.isItemAriaExpanded=n.isItemAriaExpanded.bind(n),n.getPropsForItem=n.getPropsForItem.bind(n),n.onScroll=n.onScroll.bind(n),n.onListScrolled=n.onListScrolled.bind(n),n.onFocusEnter=n.onFocusEnter.bind(n),n.onFocusLeave=n.onFocusLeave.bind(n),n.onItemTabWithin=n.onItemTabWithin.bind(n),n.onItemKeyDown=n.onItemKeyDown.bind(n),n.debouncedOnListScrolled=Object(ap.a)(n.onListScrolled,150),n.isMessage=n.isMessage.bind(n),n.onSelectionChange=n.onSelectionChange.bind(n),n.onJumpToUnreadShortcut=n.onJumpToUnreadShortcut.bind(n),n.focus=n.focus.bind(n),n.onShiftPageUp=n.onShiftPageUp.bind(n),n.onShiftPageDown=n.onShiftPageDown.bind(n),n.onEnd=n.onEnd.bind(n),n.onArrowKeyRight=n.onArrowKeyRight.bind(n),n.scrollToOffset=Object(js.a)(n.scrollToOffset.bind(n),200),n.messagesRendered={},n.loadingHistoriesSeen=0,n.loadingHistoriesSeenHighEnd=0,n.loadingHistoriesPerHowManyMessages=84,n.loadingHistoriesPerHowManyMessagesHighEnd=500,n.scrollMetricsGatheringEnabled=Object(FN.a)(1)||n.props.featureTinyspeck,n.scrollMetricsGatheringEnabled){var i=Object(_.getStateByTeamId)(e.teamId),o=Object(KC.c)({state:i});n.debounceBatchMessagesSeen=Object(Gt.a)(function(){o.store("modern_history_load_seen_per_84_messages",n.loadingHistoriesSeen,{allow_zero:!0}),n.loadingHistoriesSeen=0},1e3),n.debounceBatchMessagesSeenHighEnd=Object(Gt.a)(function(){o.store("modern_history_load_seen_per_500_messages",n.loadingHistoriesSeenHighEnd,{allow_zero:!0}),n.loadingHistoriesSeenHighEnd=0},1e3)}return n.debounceCountHistoryLoadSeen=Object(Gt.a)(function(){n.loadingHistoriesSeen+=1,n.loadingHistoriesSeenHighEnd+=1},1e3),n.prqMetrics={channelSwitch:{}},n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.shouldShowContextualShortcutsOnMount()&&this.showContextualShortcutsModal()}},{key:"componentDidUpdate",value:function(e){this.keyToScrollTo&&this.list&&(this.list.scrollToKey(this.keyToScrollTo,{lazy:this.lazyScroll}),this.keyToScrollTo=null);var t=this.props.isLoading||this.props.isLoadingOlder;Object(Ib.a)(this.onJump)&&!t&&this.props.timestamps.length&&(this.onJump(),this.onJump=null),!!e.isFileExpanding&&!this.props.isFileExpanding?this.layout.setStickToBottom(!1):this.layout.setStickToBottom(this.props.reachedEnd||this.props.prevReachedEnd),this.onListScrolled(),this.maybeLogChannelSwitch(e);var n={prevUserAttentionIsOnChat:e.userAttentionIsOnChat,prevComposerVisible:e.composerVisible,currentUserAttentionIsOnChat:this.props.userAttentionIsOnChat,currentComposerVisible:this.props.composerVisible};Object(Up.a)(n)&&this.props.addToSectionNavigation(),Object(Bp.a)(n)&&this.props.removeFromSectionNavigation(),this.props.featureMessageNavigationShortcuts&&this.maybeFocusOnLastVisibleMessage(e)}},{key:"maybeFocusOnLastVisibleMessage",value:function(e){var t=this.props.focusLastVisibleMessageInChannel;t&&e.focusLastVisibleMessageInChannel!==t&&(this.list.focusLastItemInView(),this.props.setFocusLastVisibleMessageInChannel(null))}},{key:"maybeLogChannelSwitch",value:function(e){if(navigator.onLine)if(void 0!==this.props.msgTriggers[this.props.channelId]&&this.props.windowLastFocusEvent===this.props.msgTriggers[this.props.channelId].lastFocus){if(e.channelId!==this.props.channelId)this.trackChannelSwitchWithoutSync(e.channelId);else if(this.prqMetrics.channelSwitch.duration&&this.prqMetrics.channelSwitch.nextChannelId===this.props.channelId&&!1===e.isLoading&&!0===this.props.isLoading&&!0!==this.props.isLoadingOlder&&!1===this.prqMetrics.channelSwitch.hasLoggedVisible&&!1===this.prqMetrics.channelSwitch.hasLoggedUsable){this.trackChannelSwitchWithSync(BA.g,!1)}else if(this.prqMetrics.channelSwitch.duration&&this.prqMetrics.channelSwitch.nextChannelId===this.props.channelId&&!0===e.isLoading&&!1===this.props.isLoading&&!0!==this.props.isLoadingOlder&&!0===this.prqMetrics.channelSwitch.hasLoggedVisible){this.trackChannelSwitchWithSync(BA.f,!0)}}else this.prqMetrics.channelSwitch={}}},{key:"trackChannelSwitchWithoutSync",value:function(e){this.prqMetrics.channelSwitch.duration&&(Object(BA.f)(this.prqMetrics.channelSwitch.duration,this.props.msgTriggers[this.prqMetrics.channelSwitch.nextChannelId].trigger,this.prqMetrics.channelSwitch.nextChannelId,this.prqMetrics.channelSwitch.fetchHistoryState,this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId),Object(BA.g)(this.prqMetrics.channelSwitch.duration,this.props.msgTriggers[this.prqMetrics.channelSwitch.nextChannelId].trigger,this.prqMetrics.channelSwitch.nextChannelId,this.prqMetrics.channelSwitch.fetchHistoryState,this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId));var t=Object(_.getStateByTeamId)(this.props.teamId),n=Object(KC.c)({state:t}),a="start_channel_change_"+this.props.channelId,r=n.measure(a,"channel_change_react_msgs",null,{return_unprocessed:!0}).unprocessed;this.prqMetrics.channelSwitch={duration:r,prevChannelId:e,nextChannelId:this.props.channelId,fetchHistoryState:BA.c,hasLoggedVisible:!1,hasLoggedUsable:!1}}},{key:"trackChannelSwitchWithSync",value:function(e,t){var n="start_channel_change_"+this.prqMetrics.channelSwitch.nextChannelId,a=Object(_.getStateByTeamId)(this.props.teamId);e(Object(KC.c)({state:a}).measure(n,"channel_change_not_stored",null,{ephemeral:!0,return_unprocessed:!0}).unprocessed,this.props.msgTriggers[this.prqMetrics.channelSwitch.nextChannelId].trigger,this.prqMetrics.channelSwitch.nextChannelId,BA.a,this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId),t?(this.prqMetrics.channelSwitch={},this.prqMetrics.channelSwitch.hasLoggedUsable=!0):this.prqMetrics.channelSwitch.hasLoggedVisible=!0}},{key:"findTimestampClosestToStartTs",value:function(){var e=this.props,t=e.startTs,n=e.timestamps;return!!n.length&&(t?Object(Dd.a)(n,function(e){return e>=t}):null)}},{key:"focus",value:function(){this.list.focus()}},{key:"blur",value:function(){this.list.blur()}},{key:"setListRef",value:function(e){this.list=e}},{key:"jumpToUnread",value:function(e){var t=this,n=this.props,a=n.lastReadTs,r=n.isScreenReaderEnabled,i=n.firstUnreadTs,o=e&&"keydown"===e.type&&(r||this.state.hasKeyboardFocus),s=Object(mt.a)(this.unreadIndex)&&this.keys[this.unreadIndex];s?o?(this.list.setActiveItem(i),this.list.scrollToKey(i)):this.list.scrollToKey(s):this.jumpToTimestamp({ts:a,onJump:function(){t.state.hasKeyboardFocus&&t.list.setActiveItem(t.props.firstUnreadTs)}})}},{key:"isAtBottom",value:function(){if(!this.list)return!1;var e=this.list.getScrollTop(),t=this.layout.getTotalHeight();return e+this.height>=Math.floor(t)-this.STICKY_EPSILON}},{key:"getUnreadLinePlacement",value:function(){if("number"!=typeof this.unreadIndex)return OL.ABOVE;if(!this.list)return OL.ABOVE;var e=this.list.getVisibleRange(),t=e.start,n=e.end;return this.unreadIndex<t?OL.ABOVE:this.unreadIndex<n?OL.VISIBLE:OL.BELOW}},{key:"getVisibleRows",value:function(e){if(!this.list)return[];var t=this.list.getVisibleRange(void 0,e),n=t.start,a=t.end;return this.rows.slice(n,a)}},{key:"getScrollmarkForFocusedItem",value:function(e){var t=e===CL?this.props.timestamps[0]:e;return{mark:e,offset:this.layout.getTop(t)-this.list.getScrollTop()}}},{key:"getScrollmark",value:function(){if(!this.list||!this.layout)return null;var e=this.state.hasKeyboardFocus?this.list.getActiveItem():this.previouslyActiveItem;if(this.previouslyActiveItem=null,e)return this.getScrollmarkForFocusedItem(e);var t=this.list.getScrollTop();if(this.layout.shouldStickToBottom(t))return null;var n=this.props.timestamps,a=this.layout.findAnchor(n,n,t+this.ANCHOR_OFFSET);return{mark:a,offset:this.layout.getTop(a)-t}}},{key:"onScroll",value:function(){this.useAnchor=!1,this.layout.setAnchor(!1),this.debouncedOnListScrolled(),this.props.onScroll()}},{key:"onSelectionChange",value:function(e){this.node&&this.setState(function(){return{isSelecting:e}})}},{key:"isMessage",value:function(e){var t=this.rows[e.index];return t&&("message"===t.type||"foreword"===t.type)}},{key:"onListScrolled",value:function(){var e=this.getVisibleRows(!1),t=this.getVisibleRows(!0);Object(Ox.a)(e,this.visibleRows)&&Object(Ox.a)(t,this.partiallyVisibleRows)||(this.visibleRows=e,this.partiallyVisibleRows=t,this.props.onVisibleRowsChanged(e,t))}},{key:"onShiftPageUp",value:function(){var e=this,t=this.getTimestampOfPrevDay();if(t){var n=this.state.hasKeyboardFocus;if(this.list.isScrolledToTop()&&this.props.reachedStart&&n)this.list.setActiveItem(this.getTimestampOfFirstMessageForDay(t));else{var a=EL(t),r=this.props.isBannerVisible?yL:28;this.jumpToTimestamp({ts:a,offset:r,onJump:function(){var a=e.getTimestampOfFirstMessageForDay(t);n&&e.list.setActiveItem(a),e.list.scrollToKey(a,{lazy:e.lazyScroll})}})}}}},{key:"onShiftPageDown",value:function(){var e=this,t=this.getTimestampOfNextDay();if(t){var n=this.state.hasKeyboardFocus;if(this.list.isScrolledToBottom()&&this.props.reachedEnd&&n)this.list.setActiveItem(this.getTimestampOfFirstMessageForDay(t));else{var a=EL(t),r=this.props.isBannerVisible?yL:28;this.jumpToTimestamp({ts:a,offset:r,onJump:function(){var a=e.getTimestampOfFirstMessageForDay(t);n&&e.list.setActiveItem(a),e.list.scrollToKey(a,{lazy:e.lazyScroll})}})}}}},{key:"onEnd",value:function(){var e=this,t=this.props,n=t.reachedEnd,a=t.timestamps,r=n?a[a.length-1]:null;return this.jumpToTimestamp({ts:r,onJump:function(){if(e.state.hasKeyboardFocus){var t=e.rows,n=t[t.length-1];"message"===(n&&n.type)&&e.list.setActiveItem(n.ts)}}}),!1}},{key:"onArrowKeyRight",value:function(e){var t=e.target;if(!Object(Sd.a)(t)){var n=this.props,a=n.channelId,r=n.timestamps;if(this.state.hasKeyboardFocus){var i=this.list.getInitialActiveItem();if(i&&Object(fs.a)(r,i))this.props.showThreadIfThreadable({channelId:a,threadTs:i,requestFocus:!0})&&this.blur()}}}},{key:"onItemKeyDown",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.key,n=e.id;if(this.props.featureMessageNavigationShortcuts&&"ArrowDown"===t){var a=this.rows[this.rows.length-1];a&&n===a.ts&&this.props.setFocusMessageInput(!0)}}},{key:"onJumpToUnreadShortcut",value:function(e){mL.a&&this.jumpToUnread(e)}},{key:"onFocusEnter",value:function(e){var t=this;e.isKeyboardFocus&&!Object(Sd.a)(e.target)&&this.shouldShowContextualShortcutsOnKeyPress()?this.showContextualShortcutsModal():this.setState(function(){return{hasKeyboardFocus:e.isKeyboardFocus}},function(){t.props.onFocusEnter(e);var n=t.props,a=n.focusRequestedTs,r=n.setFocusRequestedTs;a&&a===t.list.getActiveItem()&&r(null)})}},{key:"onFocusLeave",value:function(e){var t=this;this.state.hasKeyboardFocus&&(this.previouslyActiveItem=e.activeItem),this.setState(function(){return{hasKeyboardFocus:!1}},function(){t.props.onFocusLeave(e)})}},{key:"onItemTabWithin",value:function(){this.props.setInitialActiveSection()}},{key:"scrollToOffset",value:function(){var e;this.list&&(e=this.list).scrollToOffset.apply(e,arguments)}},{key:"shouldShowContextualShortcutsOnKeyPress",value:function(){return this.props.featureContextualMessageShortcuts&&!this.props.seenContextualMessageShortcutsModal}},{key:"shouldShowContextualShortcutsOnMount",value:function(){return this.props.isScreenReaderEnabled&&this.props.featureContextualMessageShortcuts&&!this.props.seenContextualMessageShortcutsModal}},{key:"shouldShowLimitedHistoryAlert",value:function(){var e=this.props,t=e.isLimited,n=e.isSlackbotIm;return t&&n}},{key:"shouldShowLimitedHistoryForeword",value:function(){var e=this.props,t=e.isLimited,n=e.isSlackbotIm;return t&&!n}},{key:"isFirstRowLimitedHistoryForeword",value:function(){if(!this.shouldShowLimitedHistoryForeword())return!1;var e=Object(_b.a)(this.rows);return e&&"foreword"===e.type}},{key:"showContextualShortcutsModal",value:function(){this.props.openContextualMessageShortcutsModal(),this.props.setUserPrefByApi({pref:"seen_contextual_message_shortcuts_modal",value:!0})}},{key:"requestAround",value:function(){var e=this;if(this.state.isLoading)return!1;if(this.props.reachedEnd)return this.requestOlder();if(this.props.reachedStart)return this.requestNewer();Object(Ct.a)({teamId:this.props.teamId}).info("MESSAGE-LIST","requestAround channelId: "+this.props.channelId+" isLoading: "+this.state.isLoading+" timestamps: "+Object(Tc.a)(this.props.timestamps)+" reachedStart: "+this.props.reachedStart+" reachedEnd: "+this.props.reachedEnd);var t=this.props,n=t.oldest,a=t.latest,r=t.timestamps,i=t.startTs;if(Object(ls.a)(r)&&!i)return this.props.requestHistory({});var o=n||r&&Object(_b.a)(r)||i,s=a||r&&Object(Ud.a)(r)||i,l=this.props.requestHistory({latest:o,oldest:s});return l&&(this.prqMetrics.channelSwitch.fetchHistoryState!==BA.a&&(this.prqMetrics.channelSwitch.fetchHistoryState=BA.b),l.then(function(){e.prqMetrics.channelSwitch.fetchHistoryState=BA.a}),this.setState(function(){return{isLoading:!0,isLoadingOlder:!1}})),l}},{key:"requestOlder",value:function(){var e=this;if(this.state.isLoading)return!1;var t=this.props,n=t.oldest,a=t.timestamps,r=t.startTs,i=n||a&&Object(_b.a)(a)||r,o=this.props.requestHistory({latest:i});return o&&(this.prqMetrics.channelSwitch.fetchHistoryState!==BA.a&&(this.prqMetrics.channelSwitch.fetchHistoryState=BA.b),o.then(function(){e.prqMetrics.channelSwitch.fetchHistoryState=BA.a}),this.setState(function(){return{isLoading:!0,isLoadingOlder:!0}})),o}},{key:"requestNewer",value:function(){var e=this;if(this.state.isLoading)return!1;var t=this.props,n=t.latest,a=t.timestamps,r=t.startTs,i=n||a&&Object(Ud.a)(a)||r,o=this.props.requestHistory({oldest:i});return o&&(this.prqMetrics.channelSwitch.fetchHistoryState!==BA.a&&(this.prqMetrics.channelSwitch.fetchHistoryState=BA.b),o.then(function(){e.prqMetrics.channelSwitch.fetchHistoryState=BA.a}),this.setState(function(){return{isLoading:!0,isLoadingOlder:!1}})),o}},{key:"renderMessage",value:function(e,t){var n=t.hasFocus,a=t.isHovered,r=t.isExpanded,i=t.itemId,o=e.ts,s=e.previousMessageTs,l=Object(Ud.a)(this.props.timestamps),c=o&&o===this.props.highlightTs;if(this.scrollMetricsGatheringEnabled){this.messagesRendered[e.ts]=!0;var u=Object(us.a)(this.messagesRendered).length;u%this.loadingHistoriesPerHowManyMessages==0&&this.debounceBatchMessagesSeen(),u%this.loadingHistoriesPerHowManyMessagesHighEnd==0&&this.debounceBatchMessagesSeenHighEnd()}return m.a.createElement(pL,{ts:o,key:o,channelId:this.props.channelId,previousMessageTs:s,isLast:o===l,rollup:this.props.rollups[o],setUnreadPoint:this.props.setUnreadPoint,fadeAwayHighlight:c,doneHighlighting:this.props.doneHighlighting,channelType:this.props.channelType,channelSessionId:this.props.channelSessionId,latestMessageTsWithReactions:this.props.latestMessageTsWithReactions,isHovered:a,isThreadExpanded:r,threadListId:this.props.threadListId,messageContainerType:this.props.messageContainerType,renderActions:a||n,hasFocus:n,renderActionsOffscreen:this.state.hasKeyboardFocus,showThreadIfThreadable:this.props.showThreadIfThreadable,parentId:i})}},{key:"renderForeword",value:function(){return m.a.createElement(nL,{key:"message-list-foreword",channelType:this.props.channelType,channelId:this.props.channelId,clientTheme:this.props.clientTheme,hasLimitedHistory:this.shouldShowLimitedHistoryForeword()})}},{key:"renderRow",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.hasFocus,a=t.isHovered,r=t.isExpanded,i=t.itemId,o=this.rows[e];if(!o||!o.type)return null;switch(o.type){case"message":return this.renderMessage(o,{hasFocus:n,isHovered:a,isExpanded:r,itemId:i});case"dayDividerLabel":return m.a.createElement(Pp,{key:o.day,date:o.day,sticky:this.props.useStickyDayDividers});case"dayDivider":return m.a.createElement(Rp,{key:o.day,date:o.day,isUnread:o.showDayDividerAsUnread,ghost:this.props.isGhostLastRead});case"unread":return m.a.createElement(Np,{key:"unread",ghost:this.props.isGhostLastRead});case"loading":return this.debounceCountHistoryLoadSeen(),m.a.createElement(jb,null);case"loadingSpinner":return m.a.createElement(Cb,null);case"foreword":return this.renderForeword({hasFocus:n});case"limited_history":return m.a.createElement(iL,{clientTheme:this.props.clientTheme});default:return null}}},{key:"isItemAriaExpanded",value:function(e,t){var n=this.props,a=n.channelId,r=n.isThreadable,i=n.currentThreadKey;if(r){var o=this.rows[t];if(o&&o.type&&"message"===o.type){var s=Object(Pn.a)(i),l=s.threadTs,c=s.channelId,u=l===e&&a===c;return r({channelId:a,threadTs:e})?u:void 0}}}},{key:"getAriaLabelForRow",value:function(e){var t=this.props,n=t.channelId,a=t.makeMessageSummary,r=t.isScreenReaderEnabled;if(!a)return null;var i=this.rows[e];if(!i||!i.type)return null;if("message"!==i.type)return null;var o=i.ts,s=i.previousMessageTs,l=i.isFirstMsgForDay,c=i.isLastMsgForDay,u=i.isFirstUnreadMsg,d=i.day,p=this.props.rollups[o];return this.state.hasKeyboardFocus||r?a({channelId:n,ts:o,isFirstUnreadMsg:u,isFirstMsgForDay:l,isLastMsgForDay:c,previousMessageTs:s,day:d,rollup:p,hasFocus:this.state.hasKeyboardFocus,viewContext:Ca.H.MESSAGE_PANE}):null}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;if(this.setState(function(n){return e.isLoading===n.isLoading&&e.isLoadingOlder===n.isLoadingOlder?null:(Object(Ct.a)({teamId:t.props.teamId}).info("MESSAGE-LIST","componentWillReceiveProps isLoading: "+e.isLoading+" isLoadingOlder: "+e.isLoadingOlder+" timestamps: "+Object(Tc.a)(e.timestamps)),{isLoading:e.isLoading,isLoadingOlder:e.isLoadingOlder})}),e.channelId!==this.props.channelId||e.startTs!==this.props.startTs||e.highlightTs&&e.highlightTs!==this.props.highlightTs||e.timestamps.length&&!this.props.timestamps.length){this.useAnchor=!0;var n=e.startTs,a=this.props.timestamps,r=e.timestamps;if(Object(Px.a)(n,Object(Rx.a)(Object(_b.a)(a)),Object(Ax.a)(Object(Ud.a)(a)))&&e.channelId===this.props.channelId){var i=Object(lA.a)(r,function(t){return t<=e.startTs});this.keyToScrollTo=i,this.lazyScroll=e.highlightLazy,this.useAnchor=!1}}e.channelId!==this.props.channelId&&(this.heightCache.invalidate(),this.list&&this.list.resetRendered&&this.list.resetRendered(),Object(Ct.a)({teamId:this.props.teamId}).info("MESSAGE-LIST","Switching channels: "+e.channelId+" timestamps: "+Object(Tc.a)(e.timestamps))),e.lastReadTs!==this.props.lastReadTs&&(this.unreadIndex=null)}},{key:"groupTimestampsByDay",value:function(e){return Object(Zm.a)(e,function(e){return Yd(e)})}},{key:"getTimestampsForDays",value:function(e){return Object(us.a)(this.groupTimestampsByDay(e)).sort()}},{key:"getTimestampOfDayClosestToTop",value:function(){var e=this.list.getVisibleRange().start,t=this.rows[e];if(t)return"dayDivider"===t.type?t.day.toString():"dayDividerLabel"===t.type?t.day.toString():"message"===t.type?t.day.ts.toString():void 0}},{key:"getStartTimestampForDayNavigation",value:function(){return this.state.hasKeyboardFocus?Yd(this.list.getInitialActiveItem()):this.getTimestampOfDayClosestToTop()}},{key:"getTimestampOfPrevDay",value:function(){var e=this.getStartTimestampForDayNavigation(),t=this.getTimestampOfFirstMessageForDay(e);if(!t)return e;if(t&&!this.list.isItemInView(t))return e;var n=this.getTimestampsForDays(this.props.timestamps);return n[Object(cA.a)(n,e)-1]}},{key:"getTimestampOfNextDay",value:function(){var e=this.getStartTimestampForDayNavigation(),t=this.getTimestampsForDays(this.props.timestamps),n=t[Object(cA.a)(t,e)+1];return n||(parseInt(e,10)+864e5).toString()}},{key:"getTimestampOfFirstMessageForDay",value:function(e){var t=this.getTimestampsForDays(this.props.timestamps),n=Object(cA.a)(t,e);if(!(n<0)&&(0!==n||this.props.reachedStart)){var a=this.groupTimestampsByDay(this.props.timestamps)[e];return a?a[0]:void 0}}},{key:"jumpToTimestamp",value:function(e){var t=e.ts,n=e.offset,a=e.onJump;Object(Ib.a)(a)&&(this.onJump=a),this.props.jumpToTimestamp({ts:t,offset:n})}},{key:"getPropsForItem",value:function(e){var t=e.key,n=e.index,a=this.rows[n];return a&&a.type?{"aria-label":this.getAriaLabelForRow(n),"aria-expanded":this.isItemAriaExpanded(t,n)}:void 0}},{key:"render",value:function(){var e=this;if(this.props.featureOfflineMode&&this.props.isOffline&&Object(ls.a)(this.props.timestamps))return m.a.createElement(yd,null);var t=this.groupTimestampsByDay(this.props.timestamps),n=Object(us.a)(t).sort(),a=[],r=[],i=[],o=this.findTimestampClosestToStartTs(),s=this.props.firstUnreadTs,l=o;this.props.reachedStart&&(r.push(CL),a.push({type:"foreword",ts:CL}),this.shouldShowLimitedHistoryAlert()&&(r.push("limited_history"),a.push({type:"limited_history"}))),this.unreadIndex=null;var c=Object(_b.a)(this.props.timestamps)<=this.props.lastReadTs||this.props.reachedStart;Object(qp.a)(n,function(o,u){var d=parseInt(o,10),p=t[o],m=o+"."+e.props.channelId,h=c&&Object(_b.a)(p)===s;h&&(e.unreadIndex=a.length,e.props.startTs===e.props.lastReadTs&&(l=m)),a.push({type:"dayDividerLabel",day:d,showDayDividerAsUnread:h}),e.props.useStickyDayDividers&&i.push({key:m,index:r.length}),r.push(m),(u>0||e.props.reachedStart||e.state.degraded)&&(a.push({type:"dayDivider",day:d,showDayDividerAsUnread:h}),r.push(o+"divider")),e.state.degraded||e.state.isSelecting||0!==u||!e.state.isLoadingOlder||(r.push("loading"),a.push({type:"loading"}));var b=void 0;Object(qp.a)(p,function(t,i){if(c&&0!==i&&t===s){e.unreadIndex=a.length;r.push("unreadDivider"),a.push({type:"unread",day:d}),e.props.startTs===e.props.lastReadTs&&(l=s)}var o=0===u&&e.props.reachedStart,m=u===n.length-1&&e.props.reachedEnd,h=0===i&&(u>0||e.props.reachedStart),f=i===p.length-1&&(u<n.length-1||e.props.reachedEnd),g=s===t;a.push({type:"message",ts:t,previousMessageTs:b,isFirstMsgForDay:h,isLastMsgForDay:f,isFirstUnreadMsg:g,day:{ts:d,isFirstDay:o,isLastDay:m}}),r.push(t),b=t})}),!this.state.isLoading||this.state.isLoadingOlder||this.props.reachedEnd||this.props.prevReachedEnd||(r.push("loadingSpinner"),a.push({type:"loadingSpinner"})),this.layout.setAnchor(this.useAnchor&&l,this.useAnchor&&this.props.startTsOffset),!this.useAnchor&&this.keyToScrollTo&&Object(mt.a)(this.props.startTsOffset)&&(this.layout.anchorOffset=this.props.startTsOffset),this.keys=r,this.rows=a;var u={firstVisibleUnreadTs:s,isGhostLastRead:this.props.isGhostLastRead,highlightTs:this.props.highlightTs,lastTimestamp:Object(Ud.a)(this.props.timestamps),reachedEnd:this.props.reachedEnd,isLimited:this.props.isLimited,isSlackbotIm:this.props.isSlackbotIm,useStickyDayDividers:this.props.useStickyDayDividers},d=this.state.degraded?bL:hL,p=this.props.shouldIgnoreScrollKeys,h=[{keys:["command+j","ctrl+j"],handler:this.onJumpToUnreadShortcut},{keys:["shift+pagedown"],handler:this.onShiftPageDown.bind(this),filter:p},{keys:["shift+pageup"],handler:this.onShiftPageUp.bind(this),filter:p},{keys:["right"],handler:this.onArrowKeyRight,filter:this.props.shouldIgnoreArrowKeys}],b=function(){if(e.state.isLoading)return null;var t=a[a.length-1],n=t&&t.type;return e.props.startTs===CL||!1===o&&"foreword"===n?CL:null===o&&"message"===n?t.ts:s||(o||null)}();return m.a.createElement(ni.a,null,function(t){var n=t.width,a=t.height;return 0===n||0===a?null:(n!==e.width&&(e.heightCache.invalidate(),e.width=n),e.height=a,m.a.createElement(d,{ref:e.setListRef,className:"c-message_list",id:e.listId,"aria-label":e.props["aria-label"],height:a,width:n,keys:r,rowRenderer:e.renderRow,layout:e.layout,stickyItems:i,stickyOffsetTop:-21,stickyZIndex:200,loadAround:e.requestAround,loadPre:e.requestOlder,loadPost:e.requestNewer,isLoading:e.state.isLoading,reachedStart:e.props.reachedStart,reachedEnd:e.props.reachedEnd||e.props.prevReachedEnd,fadeScrollbar:!0,onScroll:e.onScroll,onSelectionChange:e.onSelectionChange,onEnd:e.onEnd,onFocusEnter:e.onFocusEnter,onItemTabWithin:e.onItemTabWithin,onFocusLeave:e.onFocusLeave,keyCommands:h,shouldIgnoreScrollKeys:e.props.shouldIgnoreScrollKeys,shouldIgnoreArrowKeys:e.props.shouldIgnoreArrowKeys,isFocusableItem:e.isMessage,unrelatedUpdateProps:u,activeItem:e.props.focusRequestedTs,initialActiveItem:b,useAriaApplicationMode:e.props.featureAriaApplicationMode,getPropsForItem:e.getPropsForItem,featureOfflineMode:e.props.featureOfflineMode,isOffline:e.props.isOffline,onItemKeyDown:e.onItemKeyDown}))})}}]),t}(iR.a);jL.displayName="MessageList";jL.propTypes=fL,jL.defaultProps=gL;var SL=Object(qx.a)(jL),IL=Object(g.b)(function(e){return{focusLastVisibleMessageInChannel:Object(F.c)(e),featureMessageNavigationShortcuts:Object(y.m)(e,"feature_message_navigation_shortcuts"),featureContextualMessageShortcuts:Object(y.m)(e,"feature_contextual_message_shortcuts"),seenContextualMessageShortcutsModal:Object(Zt.j)(e,"seen_contextual_message_shortcuts_modal")}},function(e){return{setFocusLastVisibleMessageInChannel:function(){return e(cj.h.apply(void 0,arguments))},setFocusMessageInput:function(){return e(cj.i.apply(void 0,arguments))},openContextualMessageShortcutsModal:function(){return e(Bx.apply(void 0,arguments))},setUserPrefByApi:function(){return e(Tn.f.apply(void 0,arguments))}}})(function(e){var t=e.forwardedRef,n=Ep()(e,["forwardedRef"]);return m.a.createElement(SL,ye()({ref:t},n))}),wL=m.a.forwardRef(function(e,t){return m.a.createElement(IL,ye()({forwardedRef:t},e))}),NL=n("jWJI"),TL=n("JS8a"),AL=(n("3ise"),new B.b("unavailable_channel")),RL=(h.b.bool.isRequired,h.b.string.isRequired,h.b.bool,function(e){var t=e.isThread,n=e.isImOrMpim,a=e.unavailableTeamId,r=void 0,i=m.a.createElement(Lb.a,{id:a});r=t?AL.t("This thread is currently unavailable"):AL.rt("{teamName} is making changes to their workspace",{teamName:i});var o=void 0;o=t?AL.rt("{teamName} is making changes to their workspace, and this thread will be unavailable until that process is complete.",{teamName:i}):n?AL.t("This conversation will be unavailable until this process is complete."):AL.t("This channel will be unavailable until this process is complete.");var s=cdn_url+"/80588/img/enterprise/unavailable_channel.png";return m.a.createElement(p.Fragment,null,m.a.createElement("img",{className:"p-unavailable_channel_image",src:s,srcSet:s+", "+s.replace(".png","@2x.png")+" 2x",alt:""}),m.a.createElement("h2",{className:"p-unavailable_channel_title"},r),m.a.createElement("div",{className:"p-unavailable_channel_content"},o))});RL.displayName="UnavailableChannelBlocker",RL.defaultProps={isThread:!1};var PL=RL,ML=n("c695"),xL=n("YB7p"),FL=new B.b("unavailable_channel"),LL=(h.b.bool.isRequired,h.b.string.isRequired,h.b.bool,h.b.object.isRequired,h.b.string.isRequired,h.b.oneOf(Object.values(K.a)).isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={loading:!1},n.handleReload=n.handleReload.bind(n),n}return u()(t,e),o()(t,[{key:"handleReload",value:function(){var e=this.props,t=e.channelId,n=e.channelPrivacyType,a=e.unavailableTeamId,r=e.clogger,i=e.isThread;this.setState(function(){return{loading:!0}});var o="UnavailableChannelReload: Remote team "+a+" has migrated their data, user triggered client reload";Object(Si.a)()?Object(xL.a)({reason:o,reasonKey:"unavailable_channel_reload"}):Object(xL.b)({reason:o,reasonKey:"unavailable_channel_reload",noCache:!0}),r.track(le.EventId.CHANNEL_UNAVAILABLE,{channel_id:t,channel_type:t?t.charAt(0):null,channel_privacy_type:n,unavailable_team_id:a,contexts:{ui_context:{action:le.UiAction.CLICK,step:i?le.UiStep.THREAD:le.UiStep.MESSAGE_PANE,ui_element:le.UiElement.BTN_RELOAD}}}),r.sendDataAndEmptyQueue()}},{key:"render",value:function(){var e=this.props,t=e.isThread,n=e.isImOrMpim,a=e.unavailableTeamId,r=void 0;r=t?FL.t("Reload Slack to view this thread"):n?FL.t("Reload Slack to view this conversation"):FL.t("Reload Slack to view this channel");var i=m.a.createElement(Lb.a,{id:a}),o=void 0;o=t?FL.rt("{teamName} has made some changes to their workspace, so you\u2019ll need to reload Slack to keep working in this thread.",{teamName:i}):n?FL.rt("{teamName} has made some changes to their workspace, so you\u2019ll need to reload Slack to keep working in this conversation.",{teamName:i}):FL.rt("{teamName} has made some changes to their workspace, so you\u2019ll need to reload Slack to keep working in this channel.",{teamName:i});var s=cdn_url+"/80588/img/enterprise/unavailable_channel_reload.png";return m.a.createElement(p.Fragment,null,m.a.createElement("img",{className:"p-unavailable_channel_image p-unavailable_channel_image--reload",src:s,srcSet:s+", "+s.replace(".png","@2x.png")+" 2x",alt:""}),m.a.createElement("h2",{className:"p-unavailable_channel_title"},r),m.a.createElement("div",{className:"p-unavailable_channel_content"},m.a.createElement("p",null,o),m.a.createElement("div",{className:"align_center"},m.a.createElement(ML.a,{type:"primary",size:"large",onClick:this.handleReload,disabled:this.state.loading,loading:this.state.loading},FL.t("Reload Slack")))))}}]),t}(p.PureComponent));LL.displayName="UnavailableChannelReload",LL.defaultProps={isThread:!1};var DL=LL,UL=(h.b.bool.isRequired,h.b.bool.isRequired,h.b.string.isRequired,h.b.bool,h.b.object.isRequired,h.b.string.isRequired,h.b.oneOf(Object.values(K.a)).isRequired,function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.clogImpression()}},{key:"componentDidUpdate",value:function(e){e.isReloadRequired===this.props.isReloadRequired&&e.channelId===this.props.channelId||this.clogImpression()}},{key:"clogImpression",value:function(){var e=this.props,t=e.channelId,n=e.channelPrivacyType,a=e.unavailableTeamId,r=e.clogger,i=e.isThread,o=e.isReloadRequired;r.track(le.EventId.CHANNEL_UNAVAILABLE,{channel_id:t,channel_type:t?t.charAt(0):null,channel_privacy_type:n,unavailable_team_id:a,contexts:{ui_context:{action:le.UiAction.IMPRESSION,step:i?le.UiStep.THREAD:le.UiStep.MESSAGE_PANE,ui_properties:{element_name:o?"reload":"blocker"}}}})}},{key:"render",value:function(){var e=this.props,t=e.isReloadRequired,n=e.isThread,a=f()("p-unavailable_channel",{"p-unavailable_channel_thread":n});return m.a.createElement("div",{className:a},t?m.a.createElement(DL,this.props):m.a.createElement(PL,this.props))}}]),t}(p.PureComponent));UL.displayName="UnavailableChannel",UL.defaultProps={isThread:!1};var BL=Object(g.b)(function(e,t){var n=t.unavailableTeamId,a=t.channelId,r=Object(we.i)(e,n),i=Object(G.e)(e,a);return{isReloadRequired:Object(De.b)(r),isImOrMpim:Object(K.hb)(i)||Object(K.pb)(i),clogger:Object(re.a)({state:e}),channelId:i.id,channelPrivacyType:Object(K.t)(i)}})(UL),qL=n("j/30"),HL=(n("qfOp"),new B.b("messages")),WL=(h.b.string.isRequired,h.b.string.isRequired,h.b.func.isRequired,function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=Object(qL.a)(this.props.firstTimestamp,{shortenMonth:!0}),t=Object(qL.a)(this.props.lastTimestamp,{shortenMonth:!0});return m.a.createElement("div",{className:"p-archives_banner"},m.a.createElement("span",{className:"p-archives_banner__date_range"},HL.t("Viewing archives from {rangeStart} - {rangeEnd}",{rangeStart:e,rangeEnd:t})),m.a.createElement(_e.c,{className:"p-archives_banner__jump",onClick:this.props.jumpToRecent,"data-qa":"archives_banner"},HL.t("Jump to recent messages"),m.a.createElement(ta.a,{type:"arrow_down"})))}}]),t}(p.PureComponent));WL.displayName="ArchivesBanner";var GL=WL;WL.defaultProps={};var KL=new B.b("messages"),VL=(h.b.bool.isRequired,h.b.number,h.b.oneOfType([h.b.string,h.b.number]),h.b.bool,h.b.bool,h.b.string,h.b.bool,h.b.oneOf(Object(mb.a)(OL)),h.b.func,h.b.func,h.b.func,{displayCount:0,since:null,do24hrTime:!1,known:!1,channelId:null,ghost:!1,unreadPlacement:OL.VISIBLE,jumpToUnread:d.a,markMostRecentMsgRead:d.a,onHide:d.a}),zL=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.startFade=n.startFade.bind(n),n.onAnimationTick=n.onAnimationTick.bind(n),n.onAnimationEnd=n.onAnimationEnd.bind(n),n.onKeyDown=n.onKeyDown.bind(n),n.jumpOrMark=n.jumpOrMark.bind(n),n.markAsRead=n.markAsRead.bind(n),n.animation=null,n.state={hasUnreads:e.hasUnreads,displayCount:e.displayCount,since:e.since,unreadPlacement:e.unreadPlacement,opacity:1},n}return u()(t,e),o()(t,[{key:"componentWillUnmount",value:function(){this.animation&&this.animation.cancel()}},{key:"onAnimationEnd",value:function(){var e=this;this.setState(function(){return{hasUnreads:!1,opacity:1}},function(){e.props.onHide()})}},{key:"onAnimationTick",value:function(e){var t=e.value,n=e.nextTick;this.animation&&(this.setState(function(){return{opacity:t}}),n())}},{key:"onKeyDown",value:function(e){var t=[Lj.e,Lj.j];Object(fs.a)(t,e.keyCode)&&this.jumpOrMark(e)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){if(e.channelId!==this.props.channelId&&this.animation&&this.animation.cancel(),!this.state.hasUnreads||e.hasUnreads)this.setState(function(){return{hasUnreads:e.hasUnreads,displayCount:e.displayCount,since:e.since,unreadPlacement:e.unreadPlacement,opacity:1}});else{var t=e.ghost?3e3:0;this.startFade(t)}}},{key:"jumpOrMark",value:function(e){this.state.unreadPlacement===OL.VISIBLE?this.markAsRead(e):this.props.jumpToUnread(e)}},{key:"makeJumpAriaLabel",value:function(){if(Object(mL.a)()){var e=Object(ce.p)()?KL.t("Cmd"):KL.t("Ctrl");return KL.t("Jump to first unread message ({cmdButton} J)",{cmdButton:e,fallbackHash:"1eba140fdd9c6860a1730c408e3064aa417ca2a3"})}}},{key:"makeJumpLabel",value:function(){if(!Object(mL.a)())return KL.t("Jump");var e=Object(ce.p)()?KL.t("Cmd"):KL.t("Ctrl");return KL.rt("Jump <span>({cmdButton} + J)</span>",{cmdButton:e},function(e){var t=e.text,n=e.key;return m.a.createElement("span",{key:n,className:"normal"},t)})}},{key:"markAsRead",value:function(e){e.stopPropagation(),Object(Ct.b)().action("UNREAD-BANNER","Mark "+this.props.channelId+" read"),this.props.markMostRecentMsgRead({channelId:this.props.channelId,reason:Ca.w.CLICKED}),this.animation&&this.animation.cancel(),this.onAnimationEnd()}},{key:"startFade",value:function(e){this.animation=Object(UA.a)({delay:e,fromValue:1,toValue:0,duration:100,easing:"easeInQuad",onTick:this.onAnimationTick,onComplete:this.onAnimationEnd})}},{key:"renderClose",value:function(){var e=f()("p-message_pane__unread_banner__close",{"p-message_pane__unread_banner__close--detached":this.state.unreadPlacement!==OL.VISIBLE});return m.a.createElement(qi.c,{tip:KL.t("Mark as read (esc)"),position:"bottom-right"},m.a.createElement(_e.c,{className:e,onClick:this.markAsRead,"aria-label":KL.t("Mark as read")},m.a.createElement("span",{className:"p-message_pane__unread_banner__close__label"},KL.t("Mark as read")),m.a.createElement(ta.a,{type:"times_small",className:"p-message_pane__unread_banner__close__icon"})))}},{key:"renderJump",value:function(){var e=this.state.unreadPlacement;if(e===OL.VISIBLE)return null;var t=e===OL.ABOVE?"arrow_up":"arrow_down",n=this.makeJumpLabel(),a=this.makeJumpAriaLabel();return m.a.createElement(_e.c,{"aria-label":a,onMouseDown:this.jumpOrMark,onKeyDown:this.onKeyDown,className:"p-message_pane__unread_banner__jump"},m.a.createElement(ta.a,{type:t,className:"p-message_pane__unread_banner__jump__arrow"}),n)}},{key:"render",value:function(){var e=this.state,t=e.hasUnreads,n=e.since,a=e.displayCount,r=this.props,i=r.do24hrTime,o=r.known;if(!t||!n)return null;var s=Math.floor(parseFloat(n));if(!s)return null;var l=Object(qL.a)(s,{excludeYear:!0}),c=Object(Bf.a)(s,{do24hrTime:i}),u=o?"":"+",d=a;!o&&d>10&&(d=10*Math.floor(d/10));var p=KL.t("{count, plural, =1 {#{certainty} new message} other {#{certainty} new messages}} since {time} on {date}",{certainty:u,count:d,time:c,date:l});return d&&(1!==d||o)||(p=KL.t("New messages since {time} on {date}",{time:c,date:l})),m.a.createElement("div",{className:"p-message_pane__unread_banner p-message_pane__banner"},m.a.createElement("div",{className:"p-message_pane__unread_banner__banner"},this.renderJump(),m.a.createElement(_e.c,{className:"p-message_pane__unread_banner__msg",onMouseDown:this.jumpOrMark,onKeyDown:this.jumpOrMark,style:{opacity:this.state.opacity}},p)),this.renderClose())}}]),t}(p.PureComponent);zL.displayName="UnreadBanner",zL.defaultProps=VL;var YL=Object(g.b)(function(e,t){var n=t.since;"0000000000.000000"===n&&(n=Object(G.e)(e,t.channelId).created);return{do24hrTime:Object(Zt.j)(e,"time24"),since:n}})(zL),QL=n("9/ob"),XL=n("e9Nc"),JL=n("Rjjz"),ZL=(n("Rmar"),new B.b("search")),$L=(h.b.object.isRequired,h.b.bool.isRequired,h.b.func,h.b.object,h.b.func,h.b.func,h.b.bool,h.b.func,{searchInProductEducationDismiss:d.a,channelForCurrentInFilterQuery:null,openFromScrollSearchTipBanner:d.a,incrementScrollerSearchInProductEducationDismissalCount:d.a,featureStrollersToPerch:!1,recordLastDismissedScrollSearchTooltipTimestamp:d.a}),eD=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["onClose","onClickBannerContent"]),n}return u()(t,e),o()(t,[{key:"componentDidUpdate",value:function(e){this.props.showSearchScrollbackTip&&!e.showSearchScrollbackTip&&this.props.clogger.track("SEARCH_SCROLL_TIP",{channel_id:this.props.channelForCurrentInFilterQuery&&this.props.channelForCurrentInFilterQuery.id})}},{key:"onClose",value:function(e){e.stopPropagation(),e.preventDefault(),this.props.clogger.track("SEARCH_SCROLL_TIP_DISMISS",{channel_id:this.props.channelForCurrentInFilterQuery&&this.props.channelForCurrentInFilterQuery.id}),this.props.recordLastDismissedScrollSearchTooltipTimestamp(),this.props.incrementScrollerSearchInProductEducationDismissalCount(),this.props.searchInProductEducationDismiss()}},{key:"onEscape",value:function(e){"Escape"===e.key&&this.onClose(e)}},{key:"onClickBannerContent",value:function(e){e.stopPropagation(),e.preventDefault(),this.props.clogger.track("SEARCH_SCROLL_TIP_CLICK",{channel_id:this.props.channelForCurrentInFilterQuery&&this.props.channelForCurrentInFilterQuery.id}),this.props.openFromScrollSearchTipBanner()}},{key:"render",value:function(){var e=this,t=this.props,n=t.showSearchScrollbackTip,a=t.featureStrollersToPerch;return a&&!1===a?null:n&&m.a.createElement(QL.a,{enabled:["feature_strollers_to_perch"]},m.a.createElement("div",{className:"p-message_pane__search_tip_banner"},m.a.createElement(_e.c,{className:"p-message_pane__search_tip_banner_content",onClick:this.onClickBannerContent},ZL.rt("<strong>Tip</strong>: Try {command}{f} to search this channel.",{fallbackHash:"f74de2cccbeb348dd34450e1fc92a0fd0f502e71",command:m.a.createElement(On.a,{label:Object(ce.p)()?"Cmd":"Ctrl",slim:!0}),f:m.a.createElement(On.a,{label:"F",slim:!0})})),m.a.createElement(qi.c,{tip:ZL.t("Close",{fallbackHash:"1f863990d6ec5b308a2330f10e271f087ccf0bf7"})},m.a.createElement(_e.c,{className:"p-message_pane__search_tip_banner_action","aria-label":ZL.t("Close",{ns:"toast"}),onClick:this.onClose,onKeyDown:function(t){return e.onEscape(t)}},m.a.createElement(ta.b,{inline:!0,type:"times"})))))}}]),t}(p.PureComponent);eD.displayName="SearchTipBanner",eD.defaultProps=$L;var tD={searchInProductEducationDismiss:Ot.c,openFromScrollSearchTipBanner:ry.h,incrementScrollerSearchInProductEducationDismissalCount:JL.f,recordLastDismissedScrollSearchTooltipTimestamp:JL.k},nD=Object(g.b)(function(e){return{showSearchScrollbackTip:Object(Ot.f)(e),clogger:Object(re.a)({state:e}),channelForCurrentInFilterQuery:Object(XL.a)(e),featureStrollersToPerch:Object(y.m)(e,"feature_strollers_to_perch"),appearedTime:Object(Ot.b)(e)}},tD)(eD),aD=n("qgNY"),rD=new B.b("messages"),iD=(h.b.func.isRequired,h.b.bool,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.backToBriefings=n.backToBriefings.bind(n),n}return u()(t,e),o()(t,[{key:"backToBriefings",value:function(){this.props.displayModelOrViewById({id:"Vall_unreads"})}},{key:"render",value:function(){return this.props.isHighlightsBackButtonVisible?m.a.createElement(_e.d,{type:"outline",size:"small",className:"p-message_pane__briefings_back_button",onClick:this.backToBriefings},m.a.createElement(ta.b,{className:"p-message_pane__briefings_back_button_icon",type:"arrow-left"}),rD.t("Back to my highlights")):null}}]),t}(p.PureComponent));iD.displayName="BriefingsBackButton",iD.defaultProps={isHighlightsBackButtonVisible:!1};var oD=Object(g.b)(function(e){return{isHighlightsBackButtonVisible:Object(F.q)(e)}},function(e){return{displayModelOrViewById:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).id;return e(Object(aD.a)({id:t}))}}})(iD),sD=Object(ae.a)()?Object(V.a)(wL,"MessagePane",{index:0}):wL,lD=(h.b.object,h.b.object,h.b.string,h.b.string,h.b.oneOf(["channel","private","im","mpim"]),h.b.oneOf(["light","dense"]),h.b.arrayOf(h.b.string),h.b.bool,h.b.bool,h.b.bool,h.b.string,h.b.string,h.b.func,h.b.func,h.b.func,h.b.func,h.b.string,h.b.bool,h.b.number,h.b.bool,h.b.string,h.b.number,h.b.string,h.b.bool,h.b.string,h.b.objectOf(Hd.a.Rollup()),h.b.bool,h.b.bool,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.string,h.b.string,h.b.string,h.b.string,h.b.bool,h.b.bool,h.b.bool,h.b.string,h.b.string,h.b.string,h.b.object,h.b.bool,h.b.func,h.b.string,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.number,h.b.bool,h.b.number,h.b.number,h.b.func,h.b.bool,h.b.func,h.b.func,h.b.string,h.b.func,h.b.string,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.object.isRequired,h.b.func,h.b.bool,h.b.oneOf(["warm","cold"]),h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.string,h.b.string,h.b.string,{logger:{error:d.a},clogger:{track:d.a},channelId:null,channelDisplayName:void 0,type:"channel",theme:"light",timestamps:[],reachedStart:!1,reachedEnd:!1,prevReachedEnd:!1,oldest:void 0,latest:void 0,fetchHistory:d.a,fetchSliHighlights:d.a,onMount:d.a,callAppHomeOpenEventByChannelId:d.a,lastReadTs:void 0,isGhostLastRead:!1,unreadCount:0,unreadCountKnown:!1,startTs:null,startTsOffset:null,highlightTs:null,highlightLazy:void 0,focusRequestedTs:void 0,rollups:null,isLoading:!1,isLoadingOlder:!1,setUnreadPoint:d.a,markMostRecentMsgRead:d.a,setUnreadLineVisibility:d.a,clearHighlightTs:d.a,jumpToTimestamp:d.a,saveScrollmark:d.a,isArchived:!1,isLimited:!1,isSlackbotIm:!1,isAppIm:!1,overlayVisible:!1,channelSessionId:null,prevChannelSwitchTs:null,newxpOnboardingStep:null,firstUnreadTs:null,featureTinyspeck:!1,featureClassicNav:!1,featureAriaApplicationMode:!1,teamId:null,enterpriseId:null,sessionId:null,msgTriggers:null,hasMessagePaneUnmounted:!1,setMessagePaneHasUnmounted:d.a,currentUserId:null,isAppSpaceOpen:!1,isShared:!1,isOrgShared:!1,isYou:!1,isMuted:!1,hasUnreads:!1,hasDraft:!1,badgeCount:0,screenReaderOverride:void 0,windowLastBlurEvent:null,windowLastFocusEvent:null,makeMessageSummary:void 0,isScreenReaderEnabled:!1,setFocusRequestedTs:d.a,showThreadIfThreadable:d.a,currentThreadKey:void 0,isThreadable:d.a,unavailableTeamId:"",canPostInChannel:!0,featureAnnounceOnly:!1,featureSonicInputs:!1,featureAppHome:!1,searchInProductEducationReset:d.a,bootInFlight:!1,bootType:null,isFileExpanding:!1,featureOfflineMode:!1,isOffline:!1,userAttentionIsOnChat:!1,composerVisible:!1,clientTheme:"light",impressionLoggingWebGroup:"control",latestMessageTsWithReactions:null}),cD=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.list=null,n.onFocusEnter=n.onFocusEnter.bind(n),n.onFocusLeave=n.onFocusLeave.bind(n),n.onVisibleRowsChanged=n.onVisibleRowsChanged.bind(n),n.onUnreadBannerHide=n.onUnreadBannerHide.bind(n),n.setListRef=n.setListRef.bind(n),n.shouldIgnoreScrollKeys=n.shouldIgnoreScrollKeys.bind(n),n.shouldIgnoreArrowKeys=n.shouldIgnoreArrowKeys.bind(n),n.requestHistory=n.requestHistory.bind(n),n.jumpToMostRecent=n.jumpToMostRecent.bind(n),n.jumpToUnread=n.jumpToUnread.bind(n),n.focus=n.focus.bind(n),n.state={showingArchiveBanner:!1,showingUnreadBanner:!1,unreadPlacement:OL.VISIBLE},n.historyRateLimiter=new gb,n.prqMetrics={usableVisible:{}},n.sendSessionFrameStats=n.sendSessionFrameStats.bind(n),n.recordSessionFrameStats=n.recordSessionFrameStats.bind(n),n.attachMessageImpressionsLogger(e.teamId,e.impressionLoggingWebGroup,e.clogger),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){var e=this;this.props.onMount();var t=!!this.props.timestamps.length,n=!(!this.props.unreadCount&&!this.props.unreadCountKnown);t&&n&&("channel"===this.props.type||"private"===this.props.type)&&this.props.fetchSliHighlights({channelId:this.props.channelId,timestamps:Object(aa.a)(this.props.timestamps,function(t){return t>e.props.lastReadTs}),lastReadTs:this.props.lastReadTs,prevChannelSwitchTs:this.props.prevChannelSwitchTs}),this.props.isAppIm&&this.logAppHomeRequest(this.props.channelId,"messages"),this.recordAndTrackTimeToVisible(),document.hasFocus()?this.recordSessionFrameStats():window.addEventListener("focus",this.recordSessionFrameStats)}},{key:"componentDidUpdate",value:function(){if(this.list){var e=this.isUnreadLineVisible();this.props.setUnreadLineVisibility(e)}(!0===this.props.reachedStart&&!0===this.props.reachedEnd||this.props.timestamps.length>0)&&this.recordAndTrackTimeToUsable(le.TimingStatus.COMPLETED)}},{key:"componentWillUnmount",value:function(){if(Object(ae.a)()){var e=this.list&&this.list.getScrollmark(),t=this.props.channelId;this.props.saveScrollmark({channelId:t,scrollmark:e})}this.sendSessionFrameStats(),window.removeEventListener("focus",this.recordSessionFrameStats),this.props.setMessagePaneHasUnmounted(!0);try{this.messageImpressionLogger.flushAllVisibleMessages()}catch(e){this.props.logger.error("message_pane_unable_log_message_impressions","MessagePane unable to log message impressions",e)}}},{key:"onFocusEnter",value:function(e){this.hasFocus=!0,this.hasKeyboardFocus=e.isKeyboardFocus}},{key:"onFocusLeave",value:function(){this.hasFocus=!1,this.hasKeyboardFocus=!1}},{key:"onUnreadBannerHide",value:function(){this.setState(function(){return{showingUnreadBanner:!1}})}},{key:"onVisibleRowsChanged",value:function(e,t){var n=this;if(this.list){var a=this.getUnreadLinePlacement();this.setState(function(){return{unreadPlacement:a}});var r=this.isUnreadLineVisible();this.props.setUnreadLineVisibility(r);try{this.messageImpressionLogger.setCurrentlyVisibleMessages(t.filter(function(e){return"message"===e.type}).map(function(e){return{ts:e.ts,channel:n.props.channelId}}))}catch(e){this.props.logger.error("message_pane_unable_log_message_impressions","MessagePane unable to log message impressions",e)}this.list.isAtBottom()&&this.props.searchInProductEducationReset()}}},{key:"getUnreadBannerDisplayCount",value:function(){var e=this.props,t=e.timestamps,n=e.lastReadTs,a=e.unreadCount,r=e.reachedEnd;return t.length&&r?t.filter(function(e){return e>n}).length:a}},{key:"getUnreadLinePlacement",value:function(){return 1===this.props.unreadCount&&!this.props.unreadCountKnown||!this.list?OL.VISIBLE:this.list.getUnreadLinePlacement()}},{key:"setListRef",value:function(e){this.list=e}},{key:"componentDidCatch",value:function(e){this.setState(function(){return{caughtError:!0}}),this.props.logger.error("MessagePane componentDidCatch:",e,"message_pane_componentDidCatch")}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this,n=this.props.channelId;if(this.setState(function(n){var a=t.getUnreadLinePlacement();if(!e.isLoading&&!Object(ls.a)(e.timestamps)){var r=!1===e.reachedEnd&&!e.prevReachedEnd;if(r!==n.showingArchiveBanner)return ye()({},n,{unreadPlacement:a,showingArchiveBanner:r})}return n.unreadPlacement!==a?ye()({},n,{unreadPlacement:a}):n}),this.setState(function(e){var n=t.getUnreadBannerDisplayCount()>0;return ye()({},e,{showingUnreadBanner:n})}),this.setState(function(e){var n=t.getUnreadBannerDisplayCount()>0;return ye()({},e,{showingUnreadBanner:n})}),n&&e.channelId!==n){try{this.messageImpressionLogger.flushAllVisibleMessages()}catch(e){this.props.logger.error("message_pane_unable_log_message_impressions","MessagePane unable to log message impressions",e)}var a=this.list&&this.list.getScrollmark();this.props.saveScrollmark({channelId:n,scrollmark:a}),this.historyRateLimiter.reset(),this.recordAndTrackTimeToUsable(le.TimingStatus.ABANDONED),this.state.caughtError&&this.setState(function(){return{caughtError:!1}}),e.isAppIm&&this.logAppHomeRequest(e.channelId,"messages")}e.channelId===n&&e.isAppIm!==this.props.isAppIm&&e.isAppIm&&this.logAppHomeRequest(e.channelId,"messages");var r=this.props.timestamps.length!==e.timestamps.length,i=this.props.unreadCount!==e.unreadCount||this.props.unreadCountKnown!==e.unreadCountKnown;!e.channelId||!r&&!i||"channel"!==e.type&&"private"!==e.type||this.props.fetchSliHighlights({channelId:e.channelId,timestamps:Object(aa.a)(e.timestamps,function(t){return t>e.lastReadTs}),lastReadTs:e.lastReadTs,prevChannelSwitchTs:this.props.prevChannelSwitchTs}),e.teamId!==this.props.teamId&&this.attachMessageImpressionsLogger(e.teamId,e.impressionLoggingWebGroup,e.clogger)}},{key:"attachMessageImpressionsLogger",value:function(e,t,n){if(this.messageImpressionLogger)try{this.messageImpressionLogger.flushAllVisibleMessages()}catch(e){this.props.logger.error("message_pane_unable_log_message_impressions","MessagePane unable to log message impressions",e)}this.messageImpressionLogger=new rp({teamId:e,experimentGroup:t,clogger:n,messageViewLocation:ip})}},{key:"blur",value:function(){this.list.blur()}},{key:"focus",value:function(){this.list.focus()}},{key:"isUnreadLineVisible",value:function(){var e=this.props,t=e.isGhostLastRead,n=e.unreadCount,a=e.reachedEnd;return!e.isLoading&&(!t&&this.list.getUnreadLinePlacement()===OL.VISIBLE||!(n||!a||!this.list.isAtBottom()))}},{key:"jumpToMostRecent",value:function(){this.props.jumpToTimestamp({ts:null})}},{key:"jumpToUnread",value:function(e){this.list.jumpToUnread(e)}},{key:"logAppHomeRequest",value:function(e,t){this.props.featureAppHome||this.props.callAppHomeOpenEventByChannelId({channelId:e,appHomeSection:t})}},{key:"recordAndTrackTimeToUsable",value:function(e){if(Object(ae.a)()&&this.props.bootInFlight)this.staleTimestamps||(this.staleTimestamps=this.props.timestamps);else if(0!==Object.keys(this.prqMetrics.usableVisible).length)if(0===this.props.windowLastBlurEvent){if(Object(ae.a)()){if(!Object(k.g)(Object(_.getStateForClientStore)()))return;Object(_.dispatchForClientStore)(Object(k.c)(!1))}var t=this.props.telemeter.measure("navigationStart","prq_time_to_usable",null,{return_unprocessed:!0}).unprocessed;Object(ae.a)()&&this.props.telemeter.store("prq_time_to_usable_"+this.props.bootType,t),!!this.staleTimestamps&&!Object(Ox.a)(this.props.timestamps.sort(),this.staleTimestamps.sort())&&this.props.telemeter.count("prq_time_to_usable_required_sync"),Object(BA.i)(t,"APP_ICON",!0,this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId,e),this.prqMetrics.usableVisible={},this.props.logger.info("PERF","Logged time to usable (TTU): "+t)}else this.prqMetrics.usableVisible={}}},{key:"recordAndTrackTimeToVisible",value:function(){if(!this.props.hasMessagePaneUnmounted||this.props.bootInFlight)if(0===this.props.windowLastBlurEvent){if(Object(ae.a)()){if(!Object(k.h)(Object(_.getStateForClientStore)()))return;Object(_.dispatchForClientStore)(Object(k.d)(!1))}var e=this.props.telemeter.measure("navigationStart","prq_time_to_visible",null,{return_unprocessed:!0}).unprocessed;Object(ae.a)()&&this.props.telemeter.store("prq_time_to_visible_"+this.props.bootType,e),this.prqMetrics.usableVisible=fe()({},this.props.channelId,e),Object(BA.j)(e,"APP_ICON",!1,this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId),this.props.setMessagePaneHasUnmounted(!0),this.props.logger.info("PERF","Logged time to visible (TTV): "+e)}else this.prqMetrics.usableVisible={}}},{key:"recordSessionFrameStats",value:function(){window.removeEventListener("focus",this.recordSessionFrameStats),window.addEventListener("blur",this.sendSessionFrameStats),window.addEventListener("beforeunload",this.sendSessionFrameStats),Object(BA.e)(this.props.teamId,this.props.enterpriseId,le.EventId.PRQ_SESSION_FRAME_STATS)&&Ix()}},{key:"requestHistory",value:function(e){var t=e.oldest,n=e.latest,a=this.props,r=a.channelId,i=a.type,o=a.reachedStart,s=a.reachedEnd,l=a.logger;if(o&&s)return!1;var c=t,u=n;if(u&&o){if(!c)return!1;u=null}if(c&&s){if(!u)return!1;c=null}if(this.historyRateLimiter.isRequestPending({oldest:t,latest:n}))return!1;if(this.historyRateLimiter.shouldPreventHistoryRequest({oldest:t,latest:n}))return this.beaconedRateLimit?l.warn("MESSAGE_PANE","message_pane_request_rate_limited "+r+" "+t+"_"+n):(l.error({channelId:r,latestTs:u,oldestTs:c},"message_pane_request_rate_limited"),this.beaconedRateLimit=!0),!1;this.beaconedRateLimit=!1;var d=this.props.fetchHistory({channelId:r,type:i,oldest:c,latest:u,reason:"message-pane/requestHistory"});return d&&this.historyRateLimiter.logHistoryRequest({oldest:c,latest:u,promise:d}),d}},{key:"sendSessionFrameStats",value:function(){if(window.addEventListener("focus",this.recordSessionFrameStats),window.removeEventListener("blur",this.sendSessionFrameStats),window.removeEventListener("beforeunload",this.sendSessionFrameStats),Nx()){wx();var e=Tx();0!==e.durationMs&&Object(BA.h)(e.durationMs,e.histFrameRenderTime,e.histJankyWindows,this.props.teamId,this.props.enterpriseId,this.props.sessionId,this.props.currentUserId)}}},{key:"shouldIgnoreArrowKeys",value:function(e){var t=e.target,n=document.querySelector(".client_channels_list_container"),a=document.getElementById("col_flex"),r=n&&n.contains(t),i=a&&a.contains(t);return!(this.props.featureSonicInputs?this.props.userAttentionIsOnChat:Object(jd.f)())||i||r||Object(TL.b)()||!this.hasKeyboardFocus}},{key:"shouldIgnoreScrollKeys",value:function(e){var t=e.target===document.body,n=this.hasFocus,a=Object(jd.e)(),r=this.props,i=r.channelId;if(r.featureSonicInputs){var o=Object(Ci.a)({viewContext:Ca.H.MESSAGE_PANE,channelId:i});a=!!o&&o.hasFocus()}return!(t||n||a)}},{key:"renderArchivesBanner",value:function(){if(!this.state.showingArchiveBanner)return null;var e=this.props.timestamps;return Object(ls.a)(e)?null:m.a.createElement(GL,{firstTimestamp:Object(_b.a)(e),lastTimestamp:Object(Ud.a)(e),jumpToRecent:this.jumpToMostRecent})}},{key:"renderDegradedBanner",value:function(){var e=this.props,t=e.newxpOnboardingStep;return e.overlayVisible?null:t?null:m.a.createElement(Es.a,null,m.a.createElement(Bs,null))}},{key:"renderMessagePaneBannerContainer",value:function(){var e=this.props,t=e.newxpOnboardingStep;return e.overlayVisible?null:t?null:m.a.createElement(fd,null)}},{key:"renderSearchScrollbackTip",value:function(){return m.a.createElement(nD,null)}},{key:"renderUnreadBanner",value:function(){var e=this.props,t=e.unreadCount,n=e.unreadCountKnown,a=e.lastReadTs,r=e.channelId,i=e.isGhostLastRead,o=e.markMostRecentMsgRead,s=e.newxpOnboardingStep,l=e.overlayVisible,c=e.isArchived;return l?null:s&&s!==$F.CANCELLED&&s!==$F.COMPLETE?null:c?null:m.a.createElement(YL,{channelId:r,hasUnreads:t>0,displayCount:this.getUnreadBannerDisplayCount(),known:n,since:a,ghost:i,unreadPlacement:this.state.unreadPlacement,jumpToUnread:this.jumpToUnread,markMostRecentMsgRead:o,onHide:this.onUnreadBannerHide})}},{key:"render",value:function(){if(this.props.isAppSpaceOpen)return null;if(this.state.caughtError)return null;if(this.props.newxpOnboardingStep===$F.START)return m.a.createElement(tL,{step:this.props.newxpOnboardingStep});if(this.props.unavailableTeamId)return m.a.createElement(BL,{channelId:this.props.channelId,unavailableTeamId:this.props.unavailableTeamId});if(!this.props.channelId)return null;var e=UO.a.msie||UO.a.msedge,t=!this.props.overlayVisible&&!e,n=f()("p-message_pane",{"p-message_pane--ie":e,"p-message_pane--classic-nav":Object(ae.a)()&&this.props.featureClassicNav}),a=this.props,r=a.type,i=a.channelDisplayName,o=a.isShared,s=a.isOrgShared,l=a.isYou,c=a.isMuted,u=a.hasUnreads,d=a.hasDraft,p=a.isArchived,h=a.unreadCount,b=a.badgeCount,g=a.canPostInChannel,_=a.featureAnnounceOnly,v=a.isFileExpanding,y=a.userAttentionIsOnChat,k=a.composerVisible,O=a.clientTheme,C=a.latestMessageTsWithReactions,E=uR({type:r,displayName:i,isShared:o,isOrgShared:s,isYou:l,isMuted:c,hasUnreads:u,hasDraft:d,isArchived:p,unreadCount:h,badgeCount:b,canPost:g,featureAnnounceOnly:_,isSelected:!1,userActive:!1,isTyping:!1}),j=Object(Pn.e)(this.props.currentThreadKey),S=m.a.createElement("div",{className:n,"data-qa":"message_pane"},m.a.createElement("div",{className:"p-message_pane__top_banners"},m.a.createElement(Cs,null),this.renderDegradedBanner(),m.a.createElement(oD,null),this.renderUnreadBanner(),this.renderSearchScrollbackTip()),this.renderMessagePaneBannerContainer(),m.a.createElement(sD,{ref:this.setListRef,channelId:this.props.channelId,"aria-label":E,timestamps:this.props.timestamps,startTs:this.props.startTs,startTsOffset:this.props.startTsOffset,shouldIgnoreScrollKeys:this.shouldIgnoreScrollKeys,shouldIgnoreArrowKeys:this.shouldIgnoreArrowKeys,highlightTs:this.props.highlightTs,highlightLazy:this.props.highlightLazy,focusRequestedTs:this.props.focusRequestedTs,requestHistory:this.requestHistory,lastReadTs:this.props.lastReadTs,isGhostLastRead:this.props.isGhostLastRead,rollups:this.props.rollups,isLoading:this.props.isLoading,isLoadingOlder:this.props.isLoadingOlder,setUnreadPoint:this.props.setUnreadPoint,reachedStart:this.props.reachedStart,reachedEnd:this.props.reachedEnd,prevReachedEnd:this.props.prevReachedEnd,oldest:this.props.oldest,latest:this.props.latest,onVisibleRowsChanged:this.onVisibleRowsChanged,doneHighlighting:this.props.clearHighlightTs,channelType:this.props.type,isLimited:this.props.isLimited,isSlackbotIm:this.props.isSlackbotIm,useStickyDayDividers:t,theme:this.props.theme,channelSessionId:this.props.channelSessionId,firstUnreadTs:this.props.firstUnreadTs,messageContainerType:Ca.H.MESSAGE_PANE,featureTinyspeck:this.props.featureTinyspeck,featureAriaApplicationMode:this.props.featureAriaApplicationMode,teamId:this.props.teamId,enterpriseId:this.props.enterpriseId,sessionId:this.props.sessionId,msgTriggers:this.props.msgTriggers,windowLastFocusEvent:this.props.windowLastFocusEvent,currentUserId:this.props.currentUserId,screenReaderOverride:this.props.screenReaderOverride,jumpToTimestamp:this.props.jumpToTimestamp,makeMessageSummary:this.props.makeMessageSummary,isScreenReaderEnabled:this.props.isScreenReaderEnabled,onFocusEnter:this.onFocusEnter,onFocusLeave:this.onFocusLeave,isBannerVisible:this.state.showingUnreadBanner,setFocusRequestedTs:this.props.setFocusRequestedTs,showThreadIfThreadable:this.props.showThreadIfThreadable,currentThreadKey:this.props.currentThreadKey,isThreadable:this.props.isThreadable,threadListId:j,isFileExpanding:v,featureOfflineMode:this.props.featureOfflineMode,isOffline:this.props.isOffline,userAttentionIsOnChat:y,composerVisible:k,clientTheme:O,latestMessageTsWithReactions:C}),this.renderArchivesBanner());return Object(ae.a)()?S:m.a.createElement(Mp.a,{component:this,order:0},S)}}]),t}(p.PureComponent);cD.displayName="BaseMessagePane",cD.defaultProps=lD;var uD=Object(NL.a)(cD,{updateStore:function(e){var t=e.instance,n=e.dispatch,a=t.list&&t.list.getScrollmark();n(bx({channelId:t.props.channelId,scrollmark:a}))}}),dD=Object(O_.createSelectorCreator)(O_.defaultMemoize,ub.a),pD=dD([function(e){return e},function(e,t){return t},function(e,t,n){return n}],function(e,t,n){var a=e.timestamps,r=e.start,i=e.end,o=e.reachedStart,s=e.reachedEnd,l=e.prevReachedEnd;if(!s&&!l&&a&&a.length-Object(hx.a)(a,n)<20)return{messages:[],rollups:{},reachedStart:!1,reachedEnd:!1};var c=Object(mx.a)(Object(ft.a)(a,function(e){return t[e]}),et.fb),u=Object(Wp.a)(c),d=u.rollups,p=u.messages;return{messages:p,timestamps:Object(ft.a)(p,function(e){return e.ts}),rollups:d,reachedStart:o,reachedEnd:s,prevReachedEnd:l,oldest:r,latest:i}});var mD={fetchHistory:Ht,fetchSliHighlights:gx.c,setUnreadPoint:Fo.setUnreadPoint,markMostRecentMsgRead:Fo.markMostRecentMsgRead,setUnreadLineVisibility:function(e){return function(t,n){var a=Object(F.s)(n());a!==e&&(Object(Ct.a)({getState:n}).info("CHECK-UNREADS","unreadLineVisible updated: "+a+" -> "+e),t(Object(cj.p)(e)))}},clearHighlightTs:cj.a,jumpToTimestamp:cj.c,saveScrollmark:bx,onMount:fx.b,setMessagePaneHasUnmounted:cj.m,makeMessageSummary:Xd,setFocusRequestedTs:cj.j,callAppHomeOpenEventByChannelId:q.b,isThreadable:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n){return et.vb.apply(void 0,[n()].concat(t))}},showThreadIfThreadable:qd.m,searchInProductEducationReset:Ot.e},hD=Object(g.b)(function(e,t){var n=t.channelId||Object(E.a)(e),a=Object(G.e)(e,n),r=Object(Xt.c)(e,"context_bar"),i=Object(y.m)(e,"feature_tinyspeck"),o=Object(y.m)(e,"feature_classic_nav"),s=Object(y.m)(e,"feature_aria_application_mode"),l=Object(y.m)(e,"feature_context_bar"),c=Object(y.c)(e),u=Object(v.b)(e),d=Object(v.a)(e),p=Object(F.b)(e),m=Object(AN.b)(e),h=Object(F.g)(e),b=Object(RN.d)(e),f=Object(RN.e)(e),g=Object(Pn.b)(e),_=Object(KC.c)({state:e}),k=Object(Ct.a)({state:e}),O=Object(re.a)({state:e}),C=Object(_x.g)(e),j=Object(RN.b)(e),I=Object(Xt.c)(e,"impression_logging_web");if(!a)return{featureTinyspeck:i,featureClassicNav:o,impressionLoggingWebGroup:I,currentUserId:c,teamId:u,enterpriseId:d,sessionId:p,msgTriggers:m,hasMessagePaneUnmounted:h,windowLastBlurEvent:b,windowLastFocusEvent:f,telemeter:_,logger:k,clogger:O,bootInFlight:C,bootType:j};var w=Object(yt.d)(e,n),N=Object(yt.e)(e,n),T=Object(K.D)(a),A=!1,R=Object(F.f)(e);R&&R!==T&&(T=R,A=!0);var P=Object(F.j)(e),M=Object(F.k)(e),x=Object(F.i)(e),L=Object(F.h)(e),U=Object(K.U)(a),B=Object($e.h)(e,n,T),q=B&&B.reachedEnd,H=Object(F.b)(e),W=Object(F.n)(e),V=Object(Bd.a)(e),z=Object($e.f)(e,n,P),Y=Object(Ze.c)(e,n,z.timestamps),Q=pD(z,Y,P),X=Q.timestamps,J=Q.messages,Z=Q.rollups,$=Q.reachedStart,ee=Q.reachedEnd,te=Q.prevReachedEnd,ne=Q.oldest,ae=Q.latest;(Object(K.Cb)(a)&&!Object(K.nb)(a)||Object(K.X)(a))&&(T=Object(Ud.a)(X));var ie=function(e){var t=e.state,n=e.channelId,a=e.timestamps,r=e.rollups,i=e.lastReadTs;return Object(Dd.a)(a,function(e){var a=Object(Ze.a)(t,n,e),o=Object(y.c)(t);if(!a)return!1;if(r[e]){var s=Object(mb.a)(r[e]),l=Object(ft.a)(s,"ts"),c=Object(ft.a)(l,function(e){return Object(Ze.a)(t,n,e)});return Object(Fd.a)(c,function(e){return Object(et.kb)(e,i,o)})}return Object(et.kb)(a,i,o)})}({state:e,channelId:n,timestamps:X,rollups:Z,lastReadTs:T}),oe=Object(Vd.b)(e),se=Object(F.p)(e)&&II(e,n),le=void 0;Object(K.Lb)(e,a)&&(le=Object(K.T)(e,a));var ce=Object(kx.e)(e),ue=Object(Ed.e)(e),de=function(e){var t=e.state,n=e.channel,a=e.rolledMessages,r=Object(y.m)(t,"feature_reactji_education_tip"),i=Object(vx.b)(t);if(!yx({featureReactjiEducationTip:r,inProductCoachmark:i,channel:n}))return null;var o=Object(lA.a)(a,function(e){var n=Object(D_.b)(e),a=Object(L_.e)(t,n);return!!a&&!!a.length});return o?o.ts:null}({state:e,channel:a,rolledMessages:J});return{isFileExpanding:ce,channelId:n,type:Object(K.v)(a),channelDisplayName:Object(K.x)(e,a,{publicChannelIncludeHashSign:!1,imIncludeAtSign:!1}),timestamps:X,reachedStart:$,reachedEnd:ee,prevReachedEnd:te,oldest:ne,latest:ae,lastReadTs:T,isGhostLastRead:A,unreadCount:U,unreadCountKnown:q,startTs:P,startTsOffset:M,highlightTs:x,highlightLazy:L,focusRequestedTs:Object(F.e)(e),rollups:Z,isAppSpaceOpen:se,isArchived:Object(K.X)(a),isLoading:w,isLoadingOlder:N,isLimited:Object($e.e)(e,n),isSlackbotIm:Object(K.Hb)(a),isAppIm:Object(K.kb)(e,n),overlayVisible:Object(px.a)(t.overlayVisible)?t.overlayVisible:Object(F.r)(e),channelSessionId:H,prevChannelSwitchTs:W,theme:V,newxpOnboardingStep:Object(F.l)(e),firstUnreadTs:ie,featureTinyspeck:i,featureClassicNav:o,featureAriaApplicationMode:s,teamId:u,enterpriseId:d,sessionId:p,msgTriggers:m,hasMessagePaneUnmounted:h,windowLastBlurEvent:b,windowLastFocusEvent:f,currentUserId:c,badgeCount:Object(G.d)(e,a),isShared:Object(K.ab)(a),isOrgShared:Object(K.vb)(a),isYou:Object(K.Tb)(e,a),isMuted:Object(Ad.c)(e,n),hasUnreads:!!Object(K.U)(a),hasDraft:Object(K.y)(e,n),isScreenReaderEnabled:oe,currentThreadKey:g,unavailableTeamId:le,canPostInChannel:Object(Bb.p)(e,n),featureAnnounceOnly:Object(y.m)(e,"feature_announce_only"),featureAppHome:Object(S.a)(e),featureContextBar:l,featureSonicInputs:Object(y.m)(e,"feature_sonic_inputs"),telemeter:_,logger:k,clogger:O,bootInFlight:C,bootType:j,featureOfflineMode:Object(y.m)(e,"feature_offline_mode"),isOffline:!Object(Qt.c)(e),userAttentionIsOnChat:ue,contextBarExperimentGroup:r,composerVisible:(Object(lt.a)(e)||"composer_toolbar"===Object(Xt.c)(e,"composer_toolbar"))&&Object(Dp.b)(e),clientTheme:Object(D.c)(e),impressionLoggingWebGroup:I,latestMessageTsWithReactions:de}},mD)(uD),bD=n("c+rX"),fD=n("MyL6"),gD=Object(gt.b)("Start editing the last message in a given channel",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.channelId,r=n.threadTs,i=n.viewContext,o=t(),s=Object(Kd.c)(o,{channelId:a,threadTs:r});return!!s&&(e(Object(Kd.f)({channelId:a,ts:s.ts,viewContext:i,scroll:!0})),!0)});gD.meta={name:"editLastMessageInChannel",key:"actionsEditLastMessageInChannelEditLastMessageInChannel",description:"Start editing the last message in a given channel"},gD.propTypes={channelId:h.b.string.isRequired,threadTs:h.b.string,viewContext:h.b.string};var _D=gD,vD=n("oRxB"),yD=n("L8gx"),kD=n("/u/P"),OD=n("wMtF"),CD=(h.b.node.isRequired,h.b.string.isRequired,h.b.string,h.b.object.isRequired,h.b.func.isRequired,h.b.func.isRequired,h.b.func.isRequired,{threadTs:void 0}),ED=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={forceOpen:!1},n.onEmojiSelected=n.onEmojiSelected.bind(n),n.onClose=n.onClose.bind(n),n}return u()(t,e),o()(t,[{key:"onEmojiSelected",value:function(e,t){this.reactionKey?this.props.changeReactionFromUserAction({key:this.reactionKey,name:t}):this.props.logger.warn("GLOBAL-RXN-SHORTCUT","No reaction key")}},{key:"onClose",value:function(){this.setState(function(){return{forceOpen:!1}})}},{key:"startReactionPopoverForLastMessage",value:function(){var e=this.props,t=e.channelId,n=e.threadTs,a=e.logger,r=void 0;(r=n?this.props.getLastMessageInThread(t,n):this.props.getLastMessageInChannel(t))?(this.reactionKey=Object(D_.b)(r),a.info("GLOBAL-RXN-SHORTCUT","Opening reaction popover for "+this.reactionKey),this.setState(function(){return{forceOpen:!0}})):a.info("GLOBAL-RXN-SHORTCUT","Could not find last message")}},{key:"render",value:function(){var e=this.props.children,t=this.state.forceOpen;return m.a.createElement(OD.a,{showHandyReactions:!0,customTrigger:!0,forceOpen:t,onEmojiSelected:this.onEmojiSelected,onClose:this.onClose},m.a.createElement(ID,null,e))}}]),t}(p.PureComponent);ED.displayName="MessageInputReactionPopover",ED.defaultProps=CD;var jD={getLastMessageInChannel:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n){return yD.a.apply(void 0,[n()].concat(t))}},getLastMessageInThread:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n){return kD.a.apply(void 0,[n()].concat(t))}},changeReactionFromUserAction:function(){return vD.a.apply(void 0,arguments)}},SD=Object(g.b)(function(e){return{logger:Object(Ct.a)({state:e})}},jD,null,{withRef:!0})(ED),ID=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){return this.props.children}}]),t}(p.PureComponent);ID.displayName="PassThrough";var wD=n("7/SY"),ND=(n("HyiT"),new B.b("notification_bar")),TD=(h.b.bool,h.b.array,h.b.func,h.b.number,h.b.bool,h.b.bool,h.b.bool,h.b.string,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.bool,{wasRecentlyOnline:!1,typingNames:null,snippetCallback:d.a,tooLongCount:0,inputHasText:!1,showFormattingHint:!1,isLegacy:!1,secondaryView:void 0,showTypingIndicator:!0,featureWysiwygComposer:!1,useSendButton:!1,usePreNewlines:!1,cursorInCodeBlock:!1}),AD=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"renderLeft",value:function(){var e=this.props,t=e.wasRecentlyOnline,n=e.typingNames,a=e.inputHasText,r=e.showTypingIndicator;if(!t){var i=a?ND.t("Slack is trying to connect, so messages can\u2019t be sent yet."):ND.t("Slack is trying to connect.");return m.a.createElement("span",{id:"msg_input_info",className:"p-notification_bar__offline","aria-live":"polite"},i," ",m.a.createElement(ta.a,{type:"cloud-offline-small-filled",className:"p-notification_bar__offline_icon"}))}if(r&&n&&n.length>0){var o=ND.t("several people are typing");return 1===n.length?o=ND.rt("<b>{name}</b> is typing",{name:n[0]}):2===n.length&&(o=ND.rt("<b>{name}</b> and <b>{other_name}</b> are typing",{name:n[0],other_name:n[1]})),m.a.createElement("div",{role:"status","aria-live":"polite","aria-atomic":"true",className:"p-notification_bar__typing"},o)}return null}},{key:"renderRight",value:function(){var e=this.props,t=e.wasRecentlyOnline,n=e.snippetCallback,a=e.tooLongCount,r=e.featureWysiwygComposer,i=e.useSendButton,o=e.usePreNewlines,s=e.cursorInCodeBlock;if(t&&a>0){var l=ND.t("Your message is {diff_count, plural, =1{# character}other{# characters}} too long.",{diff_count:a}),c=ND.t("Make a snippet instead?"),u=ND.t("A snippet is a text file that can be much longer than a normal message.");return m.a.createElement("div",null,m.a.createElement("span",null,l," "),m.a.createElement(qi.c,{tip:u},m.a.createElement("span",null,m.a.createElement(la.a,{tabIndex:"5",onClick:n},c))))}var d=function(){if(!t)return"";var e=function(e){var t=e.tag,n=e.key,a=e.text;return"span"===t?m.a.createElement("span",{key:n,className:"p-notification_bar__send"},a):m.a.createElement("b",{className:"p-notification_bar__return",key:n},a)};return r?i||o&&s?Object(ce.p)()?ND.rt("<span><b>\u2318 + Return</b> to send</span><b>Return</b> to add a new line",null,e):ND.rt("<span><b>Ctrl + Return</b> to send</span><b>Return</b> to add a new line",null,e):ND.rt("<span><b>Return</b> to send</span><b>Shift + Return</b> to add a new line",null,e):Object(Yo.c)()?ND.rt("<b>\uff0abold\uff0a</b> <code>\uff40code\uff40</code> <code>\uff40\uff40\uff40preformatted\uff40\uff40\uff40</code> <span>\uff1equote</span>"):ND.rt("<b>*bold*</b> <i>_italics_</i> ~strike~ <code>`code`</code> <code>```preformatted```</code> <span>{quote}quote</span>",{quote:">",fallbackHash:"78fa2eabded9ec376bac82c1ade55d4f646aca2c"})}();return m.a.createElement("span",{className:"p-notification_bar__formatting","aria-hidden":"true"},d)}},{key:"render",value:function(){var e=this.props,t=e.showFormattingHint,n=e.wasRecentlyOnline,a=e.tooLongCount,r=e.isLegacy,i=e.typingNames,o=e.secondaryView,s=e.showTypingIndicator,l=f()("p-notification_bar__section","p-notification_bar__section--right",{"p-notification_bar__section--is-visible":n&&(t||a>0)}),c=f()("p-notification_bar",{"p-notification_bar--legacy":r,"p-notification_bar--typers_showing":s&&i&&i.length,"p-notification_bar--flexpane_open":!!o});return m.a.createElement("div",{className:c},m.a.createElement("div",{className:"p-notification_bar__section p-notification_bar__section--left"},this.renderLeft()),m.a.createElement("div",{className:l},this.renderRight()))}}]),t}(p.PureComponent);AD.displayName="NotificationBar",AD.defaultProps=TD;var RD=Object(g.b)(function(e,t){var n=t.inputText,a=t.wysiwygTextLength,r=t.wasRecentlyOnline,i=Object(lt.a)(e),o=void 0!==r?r:Object(Qt.h)(e),s=0,l=void 0;if(i&&a)l=a,s=Math.max(0,l-Ca.C);else if((l=n.length)>Ca.B/2){var c=Object(Fa.b)(e,n);s=Math.max(0,c.length-Ca.B)}return{wasRecentlyOnline:o,tooLongCount:s,showFormattingHint:l>2,inputHasText:l>0,secondaryView:Object(A.j)(e),showTypingIndicator:Object(Zt.j)(e,"show_typing"),useSendButton:Object(Zt.j)(e,"msg_input_send_btn"),usePreNewlines:Object(Zt.j)(e,"enter_is_special_in_tbt"),featureWysiwygComposer:i}})(AD),PD=new B.b("coachmarks"),MD={anchorElement:h.b.instanceOf(Element),completeJoinerOnboarding:h.b.func},xD=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.anchorElement,n=e.completeJoinerOnboarding;return m.a.createElement("div",{className:"position_relative"},m.a.createElement(Mn.a,{anchorElement:t,isOpen:!0,onClickPrimaryButton:n,closeCoachmark:n,coachmarkClassNames:"c-joiner-coachmark",qa:"joiner-coachmark",arrowPosition:10,offsetX:30,offsetY:45,primaryCallToActionText:PD.t("Got It",{fallbackHash:"8297bb17c6aa1537d802e8ab86dcd018ffb7b6d0"}),orientation:"top"},m.a.createElement("h3",null,PD.rt("Say hello!",{fallbackHash:"ff30242209ddac7a521de4f37aabe952bc39165f"})),m.a.createElement("p",null,PD.rt("Type a message to let your team know you\u2019re here.",{fallbackHash:"cacc432d26db2e0a0a36a197f329204ee25e63e1"}))))}}]),t}(Mn.a);xD.displayName="JoinerOnboardingCoachmark";var FD=xD;xD.propTypes=MD,xD.defaultProps={anchorElement:null,completeJoinerOnboarding:!1};var LD=new B.b("coachmarks"),DD={anchorElement:h.b.instanceOf(Element),setTractorMessageCoachmarkVisibility:h.b.func},UD={anchorElement:null,setTractorMessageCoachmarkVisibility:d.a},BD=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.anchorElement,n=e.setTractorMessageCoachmarkVisibility;return m.a.createElement("div",{className:"position_relative"},m.a.createElement(Mn.a,{anchorElement:t,"data-qa":"coachmark",isOpen:!0,orientation:"top",offsetX:30,offsetY:45,arrowPosition:10,closeCoachmark:function(){return n(!1)}},m.a.createElement("h3",null,LD.t("Just type and press Enter")),m.a.createElement("p",null,LD.t("Your Slack teammates will see your messages when they join. Feel free to use your own words instead!"))))}}]),t}(Mn.a);BD.displayName="TractorSendMessageCoachmark";var qD=BD;BD.propTypes=DD,BD.defaultProps=UD;var HD=n("8HWa"),WD=new B.b("message-input"),GD={channelId:h.b.string,anchorElement:h.b.instanceOf(Element),closeCoachmark:h.b.func,featureAtMentionInvites:h.b.bool,atMentionedUsers:h.b.arrayOf(h.b.string),submitInvite:h.b.func,prepareAndSendMessage:h.b.func,featureWysiwygComposer:h.b.bool},KD={channelId:void 0,anchorElement:null,closeCoachmark:d.a,featureAtMentionInvites:!1,atMentionedUsers:[],submitInvite:d.a,prepareAndSendMessage:d.a,featureWysiwygComposer:!1},VD=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.inviteMentionedUsers=n.inviteMentionedUsers.bind(n),n.sendMessage=n.sendMessage.bind(n),n.inputProxy=Object(Ci.a)({viewContext:Ca.H.MESSAGE_PANE,channelId:e.channelId}),n}return u()(t,e),o()(t,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.channelId,a=t.closeCoachmark;e.channelId!==n&&a()}},{key:"inviteMentionedUsers",value:function(){var e=this.props,t=e.submitInvite,n=e.channelId,a=e.atMentionedUsers,r=e.closeCoachmark;this.inputProxy.clear(),t({channelId:n,users:a.join(",")}),r()}},{key:"sendMessage",value:function(){var e=this.props,t=e.channelId,n=e.featureWysiwygComposer,a=this.inputProxy.getText(),r=n?new zt.a(this.inputProxy.getContents().contents):null;this.inputProxy.clear(),this.props.prepareAndSendMessage({channelId:t,text:a,delta:r,includeAtMentionInviteWarning:!1}),this.props.closeCoachmark()}},{key:"renderMessage",value:function(){if(this.props.featureAtMentionInvites){var e=this.props,t=e.atMentionedUsers,n=e.channelId,a=m.a.createElement("strong",null,m.a.createElement(Lo.a,{channelId:n}));if(1===t.length)return WD.rt("{user} isn\u2019t in {channelName} \u2014 want to invite them directly instead of sending a message to the whole channel? ",{user:m.a.createElement(HD.b,{id:t[0]}),channelName:a});if(2===t.length)return WD.rt("{user1} and {user2} aren't in {channelName} \u2014 want to invite them directly instead of sending a message to the whole channel? ",{user1:m.a.createElement(HD.b,{id:t[0]}),user2:m.a.createElement(HD.b,{id:t[1]}),channelName:a});if(3===t.length)return WD.rt("{user1}, {user2}, and {user3} aren't in {channelName} \u2014 want to invite them directly instead of sending a message to the whole channel? ",{user1:m.a.createElement(HD.b,{id:t[0]}),user2:m.a.createElement(HD.b,{id:t[1]}),user3:m.a.createElement(HD.b,{id:t[1]}),channelName:a});if(t.length>3)return WD.rt("{user1} and <strong>{remainingUsersCount} other people</strong> aren't in {channelName} \u2014 want to invite them directly instead of sending a message to the whole channel? ",{user1:m.a.createElement(HD.b,{id:t[0]}),remainingUsersCount:t.length-1,channelName:a})}return null}},{key:"renderInviteEducationMessage",value:function(){return this.props.featureAtMentionInvites?WD.rt("Learn more about adding people to channels by visiting our <link>Help Center</link>.",null,function(e){var t=e.key,n=e.text;return m.a.createElement(la.a,{key:t,href:"https://get.slack.help/hc/en-us/articles/201980108-Add-people-to-a-channel"},n)}):""}},{key:"renderPrimaryButtonText",value:function(){return this.props.featureAtMentionInvites?WD.t("Add to Channel"):""}},{key:"renderSecondaryButtonText",value:function(){return this.props.featureAtMentionInvites?WD.t("Send Message"):""}},{key:"render",value:function(){var e=this.props,t=e.anchorElement,n=e.closeCoachmark;return m.a.createElement("div",{className:"position_relative"},m.a.createElement(Mn.a,{anchorElement:t,isOpen:!0,closeCoachmark:n,onClickPrimaryButton:this.inviteMentionedUsers,onClickSecondaryButton:this.sendMessage,primaryCallToActionText:this.renderPrimaryButtonText(),secondaryCallToActionText:this.renderSecondaryButtonText(),arrowPosition:10,offsetX:30,offsetY:45,orientation:"top"},m.a.createElement("p",null,this.renderMessage()),m.a.createElement("p",null,this.renderInviteEducationMessage())))}}]),t}(Mn.a);VD.displayName="AtMentionInviteWarningCoachmark",VD.propTypes=GD,VD.defaultProps=KD;var zD=Object(g.b)(function(e){return{featureAtMentionInvites:Object(y.m)(e,"feature_at_mention_invites"),channelId:Object(E.a)(e),atMentionedUsers:Object(fD.c)(e)}},function(e){return{closeCoachmark:function(){return e(Object(fD.a)())},submitInvite:function(){return e(UE.M.apply(void 0,arguments))},prepareAndSendMessage:function(){return e(Wr.a.apply(void 0,arguments))}}})(VD),YD=n("yZHI"),QD=n("a6/V");function XD(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.e,n=e.isMenuVisible;return!!t&&(!(void 0!==n&&n)&&(!Object(Sd.a)(t.target)&&(!!Object(QD.a)(t)&&(!t||t.keyCode!==Lj.j))))}var JD=n("mLe0"),ZD=new B.b("welcome_place"),$D=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.featureNewxp2372v2,n=e.hasMessages,a=null;return t&&(a=n?ZD.rt("<b>Send your first message</b> to let your teammates know you're here."):ZD.rt("<b>Be the first to post a message</b> and help get the conversation started.")),m.a.createElement("p",{className:"padding_top_125"},a)}}]),t}(p.Component);$D.displayName="MessageSuggestionEncouragement";var eU=Object(g.b)(function(e){return{featureNewxp2372v2:Object(y.m)(e,"feature_newxp2372_v2"),hasMessages:at(e,Object(E.a)(e))}})($D),tU=new B.b("welcome_place"),nU=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.shouldRenderWrapper=function(){var e=n.props,t=e.isEligibleForWrapper,a=e.isSendMessageBannerDismissed,r=n.state.isTaskCompleteAtStart;return t&&!r&&!a},n.onClickClose=function(){n.props.dismissWrapper()},n.onClickGetStartedLink=function(){(0,n.props.goToWelcomePlace)()},n.state={isTaskCompleteAtStart:e.isTaskComplete},n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.clogger,n=e.pageViewingSessionId;this.shouldRenderWrapper()&&t.track("WELCOME_PLACE",{contexts:{ui_context:{action:le.UiAction.IMPRESSION,ui_element:le.UiElement.WELCOME_PLACE_CHANNEL_MESSAGE_BANNER},welcome_place:{welcome_session_id:n}}})}},{key:"render",value:function(){var e=this.props,t=e.channelId,n=e.children,a=e.hasMessagesToRender,r=e.prefillMessageInput,i=e.featureNewxp2372v2,o=e.isTaskComplete;if(!this.shouldRenderWrapper())return n;var s=m.a.createElement(fh.a,{onClick:this.onClickClose,className:""},m.a.createElement(ta.b,{type:"times-medium"}));return o?m.a.createElement("div",{className:"p-message_pane_input__wrapper--welcome-place","data-qa":"welcome_place_input_wrapper"},m.a.createElement("div",{className:"display_flex justify_content_between"},m.a.createElement("p",{className:"padding_top_125"},m.a.createElement("span",{role:"img","aria-label":i?tU.t("Tada!"):""},"\ud83c\udf89"),i?tU.rt("<b>Sent!</b> Ready to learn more about Slack?"):""," ",i?m.a.createElement(ug.a,{onClick:this.onClickGetStartedLink},tU.rt("Head to <b>Get Started</b>")):null),s),n):m.a.createElement("div",{className:"p-message_pane_input__wrapper--welcome-place","data-qa":"welcome_place_input_wrapper"},m.a.createElement("div",{className:"display_flex justify_content_between"},m.a.createElement(eU,{channelId:t}),s),n,m.a.createElement("div",{className:"p-message_pane_input__message-suggestions-container"},m.a.createElement(ao,{hasMessagesToRender:a,prefillMessageInput:r})))}}]),t}(p.Component);nU.displayName="WelcomeMessageWrapper";var aU=Object(g.b)(function(e,t){var n=t.channelId,a=Object(G.e)(e,n),r=Object(xo.b)(e);return{featureNewxp2372v2:Object(y.m)(e,"feature_newxp2372_v2"),hasMessagesToRender:at(e,a),isEligibleForWrapper:Object(ie.u)(e)&&!Object(K.jb)(a)&&!Object(K.Eb)(a)&&!Object(K.Tb)(r.id,a)&&Object(K.nb)(a)&&Object(Bb.p)(e,a.id)&&!Object(K.vb)(a)&&!Object(K.ab)(a)&&!Object(K.X)(a)&&!Object(K.Hb)(a),isTaskComplete:Object(ie.s)(e),isSendMessageBannerDismissed:!Object(ie.j)(e),clogger:Object(re.a)({state:e}),pageViewingSessionId:Object(ie.i)(e)}},function(e){return{dismissWrapper:function(){return e(Object(oe.b)())},goToWelcomePlace:function(){return e(Object(wa.a)({id:"Pwelcome",fromHistory:!1,replaceHistoryState:!1}))}}})(nU),rU=n("M46C"),iU=n("NYp8"),oU=n("AaT8"),sU=n("4rp9");h.b.func.isRequired,h.b.func.isRequired,h.b.string.isRequired;function lU(e){var t=e.renderIcon,n=e.renderText,a=e.type;return m.a.createElement("div",{className:"p-context_bar","data-qa":"context_bar"},t(),m.a.createElement("span",{className:"p-context_bar__text",id:"context-bar-text","data-qa":"context_bar_text_"+a},n()))}lU.displayName="ContextBarTemplate";var cU=lU;h.b.shape({emoji:h.b.string,text:h.b.string}).isRequired;function uU(e){var t=e.status;return m.a.createElement(cU,{renderIcon:function(){return m.a.createElement(oU.a,{className:"p-context_bar__icon",emoji:t.emoji,emojiSize:Gs.a.SMALL,showTooltips:!0,stopAnimations:!0})},renderText:function(){return m.a.createElement(sU.a,{emojiSize:Gs.a.SMALL,showTooltips:!0,stopAnimations:!0,text:t.text})},type:"custom_status"})}uU.displayName="ContextBarCustomStatus";var dU=Object(jp.a)(uU),pU=new B.b("messages");h.b.string.isRequired;function mU(e){var t=e.memberId;return m.a.createElement(cU,{renderIcon:function(){return m.a.createElement(ta.b,{className:"p-context_bar__dnd_icon",type:"snooze-filled-small"})},renderText:function(){return pU.rt("{member} has <strong>notifications turned off</strong>",{member:m.a.createElement(kF.a,{id:t}),fallbackHash:"af944df75258fb2dc2f1bacf18089b94d89efec8"})},type:"do_not_disturb"})}mU.displayName="ContextBarDnd";var hU=Object(jp.a)(mU),bU=new B.b("messages");h.b.object.isRequired,h.b.number.isRequired;function fU(e){var t=e.channel,n=e.guestCount,a=void 0;return a=Object(K.hb)(t)?bU.rt("This person is a <strong>guest</strong> in your organization",{fallbackHash:"05fd90c8107c4450309a1fac880837845b684fa3"}):Object(K.pb)(t)?bU.rt("{guestCount, plural, =1 {<strong># guest</strong> is} other {<strong># guests</strong> are}} in this conversation",{guestCount:n,fallbackHash:"001b03a22307ab209631ce684de51e97f6eddd94"}):bU.rt("{guestCount, plural, =1 {<strong># guest</strong> is} other {<strong># guests</strong> are}} in this channel",{guestCount:n,fallbackHash:"6101cfd18ba681495b6716c62d50ae9de09aadb7"}),m.a.createElement(cU,{renderIcon:function(){return m.a.createElement(ta.b,{className:"p-context_bar__icon",size:"inherit",style:{fontSize:16},type:"user-filled"})},renderText:function(){return a},type:"guest"})}fU.displayName="ContextBarGuest";var gU=Object(jp.a)(fU),_U=new B.b("messages");h.b.arrayOf(h.b.string).isRequired;function vU(e){var t=e.connectedTeamIds,n=void 0;return n=Object(ls.a)(t)?_U.rt("<strong>Another organization</strong> has been invited to this channel"):_U.rt("{numConnectedTeams, plural, =1 {{singleTeamName} has} other {<strong># other organizations</strong> have}} been invited to this channel",{singleTeamName:m.a.createElement(Lb.a,{id:t[0]}),numConnectedTeams:t.length,fallbackHash:"bda628c81a343fa32b015e193f6efb7d0db4fbc2"}),m.a.createElement(cU,{renderIcon:function(){return m.a.createElement(ta.b,{className:"p-context_bar__icon",size:"inherit",style:{fontSize:16},type:"paper-plane"})},renderText:function(){return n},type:"pending_shared"})}vU.displayName="ContextBarPendingShared";var yU=Object(jp.b)(function(e,t){return!Object(ub.a)(t,e,2)})(vU),kU=n("GzZI"),OU=3,CU=new B.b("messages");h.b.object.isRequired,h.b.arrayOf(h.b.string).isRequired,h.b.number.isRequired,h.b.string.isRequired;function EU(e){var t=e.channel,n=e.connectedTeamIds,a=e.guestCount,r=e.teamId,i=void 0;if(Object(ls.a)(n))i=m.a.createElement(ta.b,{className:"p-context_bar__icon",size:"inherit",style:{fontSize:16},type:"shared-channels"});else{var o=Math.min(n.length,OU);i=Object(kU.a)(o).map(function(e){return m.a.createElement(WO.b,{className:"p-context_bar__icon",id:n[e],isPendingShared:Object(K.yb)(t),key:n[e],size:16})})}var s=void 0;return s=Object(K.hb)(t)?Object(ls.a)(n)?CU.rt("This person is from <strong>another organization</strong>"):CU.rt("This person is from {team}",{team:m.a.createElement(Lb.a,{id:n[0]}),fallbackHash:"d4b920ecdba14d62b4972dd3f8a95382091f31e1"}):Object(K.pb)(t)?Object(ls.a)(n)?CU.rt("This conversation includes people outside {userTeamName}",{userTeamName:m.a.createElement("strong",null,m.a.createElement(Lb.a,{id:r}))}):CU.rt("<strong>{numConnectedTeams, plural, =1 {{singleTeamName}} other {# other organizations}}</strong> {guestCount, plural, =0 {{numConnectedTeams, plural, =1 {is} other {are}}} =1 {and <strong># guest</strong> are} other {and <strong># guests</strong> are}} in this conversation",{guestCount:a,singleTeamName:m.a.createElement(Lb.a,{id:n[0]}),numConnectedTeams:n.length,fallbackHash:"15c8badcafe7312961e8f41ee9124ac65309cd3f"}):Object(ls.a)(n)?CU.rt("This channel is shared outside {userTeamName}",{userTeamName:m.a.createElement("strong",null,m.a.createElement(Lb.a,{id:r}))}):CU.rt("<strong>{numConnectedTeams, plural, =1 {{singleTeamName}} other {# other organizations}}</strong> {guestCount, plural, =0 {{numConnectedTeams, plural, =1 {is} other {are}}} =1 {and <strong># guest</strong> are} other {and <strong># guests</strong> are}} in this channel",{guestCount:a,singleTeamName:m.a.createElement(Lb.a,{id:n[0]}),numConnectedTeams:n.length,fallbackHash:"f32040563023486aa2782d3260f9017b3e6b3a7a"}),m.a.createElement(cU,{renderIcon:function(){return i},renderText:function(){return s},type:"shared"})}EU.displayName="ContextBarShared";var jU=Object(jp.b)(function(e,t){return!Object(ub.a)(t,e,2)})(EU),SU=new B.b("messages");function IU(e,t){return Object(MC.a)(Date.now(),{timeZone:Object(eo.Q)(e),timeZoneOffset:Object(eo.R)(e),do24hrTime:t})}h.b.object.isRequired,h.b.bool;function wU(e){var t=e.member,n=e.time24,a=Object(p.useState)(IU(t,n)),r=it()(a,2),i=r[0],o=r[1];return Object(iU.a)(function(){o(IU(t,n))},[t,n]),m.a.createElement(cU,{renderIcon:function(){return m.a.createElement(ta.b,{className:"p-context_bar__icon",size:"inherit",style:{fontSize:16},type:"clock-o"})},renderText:function(){return SU.rt("It\u2019s {time} for {member}",{member:m.a.createElement(kF.a,{id:t.id}),time:i?m.a.createElement("strong",null,i):m.a.createElement(sf.b,{size:"small"}),fallbackHash:"8438a232c197c83b0b53191ac5834f1d8efc5eca"})},type:"time_zone"})}wU.displayName="ContextBarTimeZone",wU.defaultProps={time24:!1};var NU=Object(g.b)(function(e){return{time24:Object(Zt.j)(e,"time24")}})(wU),TU=new B.b("messages");h.b.bool,h.b.object.isRequired,h.b.object.isRequired;function AU(e){var t=e.featureMigrationBackgroundClient,n=e.clogger,a=e.channel;return t?(n.track(le.EventId.ENTERPRISE_MIGRATION_BACKGROUND,{contexts:{ui_context:{action:le.UiAction.IMPRESSION,ui_element:le.UiElement.MIGRATION_CONTEXT_BAR},channel_id:a.id,channel_privacy_type:Object(K.t)(a)}}),m.a.createElement(cU,{renderIcon:function(){return m.a.createElement(ta.b,{className:"p-context_bar__dnd_icon",type:"info-circle-filled"})},renderText:function(){return TU.rt("Missing messages? They'll show up shortly when your workspace's migration is complete.")},type:"is_migrating"})):null}AU.displayName="ContextBarMigrating",AU.defaultProps={featureMigrationBackgroundClient:!1};var RU=Object(jp.a)(AU),PU=(n("AuaN"),22),MU=8,xU={channel:h.b.object.isRequired,currentUser:h.b.object,guestCount:h.b.number,connectedTeamIds:h.b.array,contextBarExperimentGroup:h.b.oneOf(["default","control","test"]),isDnd:h.b.bool,imMember:h.b.object,teamId:h.b.string.isRequired,maybePullDownMessagePane:h.b.func,featureContextBarCustomStatus:h.b.bool,imCustomStatus:h.b.shape({emoji:h.b.string,text:h.b.string}),isMigrating:h.b.bool,featureMigrationBackgroundClient:h.b.bool},FU={currentUser:void 0,guestCount:0,connectedTeamIds:[],contextBarExperimentGroup:"default",isDnd:!1,imMember:null,maybePullDownMessagePane:d.a,featureContextBarCustomStatus:!1,imCustomStatus:void 0,isMigrating:!1,featureMigrationBackgroundClient:!1};function LU(e){var t=e.channel,n=e.connectedTeamIds,a=e.contextBarExperimentGroup,r=e.featureContextBarCustomStatus,i=e.guestCount,o=e.imCustomStatus,s=e.imMember,l=e.isDnd,c=e.maybePullDownMessagePane,u=e.teamId,d=e.isMigrating,h=e.featureMigrationBackgroundClient,b=e.clogger,f=e.currentUser,g=Object(K.ab)(t),_=Object(K.yb)(t),v="control"===a,y=function(e){var t=e.currentUser,n=e.imMember,a=e.contextBarExperimentGroup,r=e.teamId,i=Object(p.useState)(!1),o=it()(i,2),s=o[0],l=o[1],c=Object(Ct.a)({teamId:r}),u=Object(p.useCallback)(function(){if("control"===a)if(!n||Object(eo.tb)(n)||Object(eo.Hb)(n)||Object(eo.kb)(n))l(!1);else if(t.tz!==n.tz&&n.tz)try{var e=Object(MC.a)(Date.now(),{timeZone:Object(eo.Q)(n),timeZoneOffset:Object(eo.R)(n),do24hrTime:!0,returnMoment:!0,noTzFallback:!0}).hour();if(Object(mt.a)(e))return void l(e>=PU||e<MU);l(!1)}catch(e){e&&e.message&&(e.message.includes("Unsupported time zone")||e.message.includes("Invalid time zone")||c.error("CONTEXT_BAR",e)),l(!1)}else l(!1);else l(!1)},[a,n,c,t]);return Object(iU.a)(function(){u()},[u]),Object(p.useEffect)(function(){u()},[u]),s}({imMember:s,contextBarExperimentGroup:a,teamId:u,currentUser:f}),k=r&&o&&o.text&&o.emoji,O=l&&v,C=y&&v,E=void 0;h&&d?E=m.a.createElement(RU,{featureMigrationBackgroundClient:h,clogger:b,channel:t}):_?E=m.a.createElement(yU,{connectedTeamIds:n}):g?E=m.a.createElement(jU,{channel:t,connectedTeamIds:n,guestCount:i,teamId:u}):O?E=m.a.createElement(hU,{memberId:s.id}):k?E=m.a.createElement(dU,{status:o}):C?E=m.a.createElement(NU,{member:s}):i>0&&(E=m.a.createElement(gU,{channel:t,guestCount:i}));var j=!!E;return Object(p.useEffect)(function(){c(j)},[j,c]),E||null}LU.propTypes=xU,LU.defaultProps=FU;var DU=Object(g.b)(function(e){var t=Object(E.a)(e),n=Object(G.e)(e,t),a=Object(K.N)(e,n),r=Object(Fj.f)(e,t),i=Object(y.m)(e,"feature_context_bar_guests"),o=Object(y.m)(e,"feature_migration_background_client"),s=i?Object(ne.a)(r,"counts.restricted_member_count"):0,l=Object(Xt.c)(e,"context_bar"),c=Object(y.m)(e,"feature_context_bar_custom_status"),u=Object(K.hb)(n)?Object(K.H)(n):null,d=u?Object(xo.d)(e,u):null,p=!c||!d||Object(eo.tb)(d)||Object(eo.Hb)(d)||Object(eo.kb)(d)?null:Object(xo.f)(e,u),m=Object(v.b)(e),h=d&&!Object(eo.tb)(d)&&!Object(eo.Hb)(d)&&!Object(eo.kb)(d)&&Object(My.d)(e,u),b=Object(K.ob)(e,n),f=Object(re.a)({state:e});return{currentUser:Object(xo.b)(e),channel:n,connectedTeamIds:a,guestCount:s,contextBarExperimentGroup:l,isDnd:h,imMember:d,teamId:m,featureContextBarCustomStatus:c,imCustomStatus:p,isMigrating:b,featureMigrationBackgroundClient:o,clogger:f}})(LU),UU=(n("HQme"),new B.b("msg_input")),BU=(h.b.string,h.b.string,h.b.bool,h.b.bool,{tooltip:null,border:!1,padding:void 0,featureAnnounceOnly:!1}),qU=function(e){var t=e.tooltip,n=e.border,a=e.padding;if(!e.featureAnnounceOnly)return null;var r=f()("p-message_input_announce_only_roadblock",{"p-message_input_announce_only_roadblock--border":n,"p-message_input_announce_only_roadblock--large_padding":"large"===a});return m.a.createElement("div",{className:r},m.a.createElement(ta.b,{type:"emoji-objects",className:"p-message_input_announce_only_roadblock__icon",inline:!0}),UU.t("Read only",{fallbackHash:"9b19a5a212deb29444cc1b420ad81703205848be"}),t&&m.a.createElement(qi.c,{position:"top-right",tip:t},m.a.createElement(ta.b,{type:"question-circle",className:"p-message_input_announce_only_roadblock__tip",inline:!0})))};qU.displayName="MessageInputAnnounceOnlyRoadblock",qU.defaultProps=BU;var HU=qU,WU=new B.b("view"),GU=(h.b.string.isRequired,h.b.func.isRequired,h.b.func.isRequired,h.b.func.isRequired,h.b.object.isRequired,h.b.object.isRequired,h.b.object,h.b.bool,h.b.string,h.b.bool,h.b.bool,h.b.bool,h.b.bool.isRequired,h.b.object.isRequired,{showCloseButton:!1,channelIsIMWithDeletedMember:!1,prevChannelId:void 0,member:void 0,featureAnnounceOnly:!1,featureSharedChannelsFreeTrial:!1}),KU=function(e){function t(){r()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Object(Kt.a)(e,["onCloseButtonClicked","renderSharedChannelFreeTrialUpgradePane","onUpgradeButtonClicked"]),e}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){var e,t,n=this.props,a=n.clogger,r=n.featureSharedChannelsFreeTrial,i=n.isChannelFrozenAndInGracePeriod;r&&i&&a.track(le.EventId.CHANNEL_CREATE_FLOW,{contexts:fe()({},le.ClientEventKeys.ui_context,(t={},fe()(t,le.UiContextKeys.step,le.UiStep.SHARED_CHANNEL_TRIAL_EXPIRED),fe()(t,le.UiContextKeys.action,le.UiAction.IMPRESSION),fe()(t,le.UiContextKeys.ui_properties,(e={},fe()(e,le.UiPropertiesKeys.element_type,le.ElementType.BANNER),fe()(e,le.UiPropertiesKeys.element_name,"frozen_message_pane"),e)),t))})}},{key:"onCloseButtonClicked",value:function(){Object(K.hb)(this.props.channel)?this.props.closeChannelApi({channelId:this.props.channelId}):this.props.archiveChannel({id:this.props.channelId,wasArchivedThisSession:!1}),this.props.displayModelOrViewById({id:this.props.prevChannelId})}},{key:"onUpgradeButtonClicked",value:function(){var e,t,n=this.props,a=n.team,r=n.clogger,i=n.featureSharedChannelsFreeTrial,o=n.isChannelFrozenAndInGracePeriod;i&&o&&r.track(le.EventId.CHANNEL_CREATE_FLOW,{contexts:fe()({},le.ClientEventKeys.ui_context,(t={},fe()(t,le.UiContextKeys.step,le.UiStep.SHARED_CHANNEL_TRIAL_EXPIRED),fe()(t,le.UiContextKeys.action,le.UiAction.CLICK),fe()(t,le.UiContextKeys.ui_properties,(e={},fe()(e,le.UiPropertiesKeys.element_type,le.ElementType.BUTTON),fe()(e,le.UiPropertiesKeys.element_name,"frozen_message_pane_upgrade"),e)),t))});Object(De.R)(a,Sl.a+"?s=1&p=std_y&entry_point=shared_channels_free_trial_frozen_pane")}},{key:"renderSharedChannelFreeTrialUpgradePane",value:function(){return this.props.featureSharedChannelsFreeTrial?m.a.createElement("div",{className:"p-message_pane_input__disabled"},m.a.createElement("span",{className:"p-message_pane_input__disabled_text"},WU.rt("Upgrade to reconnect this shared channel for your organization.")),m.a.createElement(_e.d,{pillarClassName:"p-message_pane_input__disabled_button",onClick:this.onUpgradeButtonClicked,type:"outline-primary",size:"small"},WU.t("Upgrade"))):null}},{key:"render",value:function(){var e=this.props,t=e.channel,n=e.showCloseButton,a=e.channelIsIMWithDeletedMember,r=e.member,i=e.featureAnnounceOnly,o=e.featureSharedChannelsFreeTrial,s=e.isChannelFrozenAndInGracePeriod;if(!t)return null;var l=Object(K.Y)(t)?WU.t("Close Channel"):WU.t("Close"),c=null,u="";if(o&&s)return this.renderSharedChannelFreeTrialUpgradePane();if(Object(K.db)(t))u=Object(K.hb)(t)?WU.rt("Your two organizations are no longer connected."):Object(K.pb)(t)?WU.rt("These organizations are no longer connected."):WU.rt("This channel is no longer shared with your organization.");else if(Object(K.X)(t)&&!Object(K.hb)(t))u=Object(K.C)(t)?WU.rt("{channel_or_group} was moved to another workspace.",{channel_or_group:m.a.createElement("strong",null,m.a.createElement(Yp.a,{channel:t})),fallbackHash:"27c083b405e96387febe1099064dd930b6696124",fallbackHashNs:"view"}):WU.rt("You are viewing {channel_or_group}, an archived channel",{channel_or_group:m.a.createElement("strong",null,m.a.createElement(Yp.a,{channel:t}))});else if(a&&r&&Object(eo.jb)(r))u=WU.t("You are viewing messages from {app_name} which has been removed from your workspace",{app_name:Object(eo.K)(r)});else if(a)c=m.a.createElement(ta.b,{type:"archive"}),u=WU.rt("You are viewing the archives of a deactivated account",{fallbackHash:"a2f3df2a30993d2303ac6a87adcd41cb35c1799f"});else{if(i){var d=WU.t("Posting to this channel has been restricted to select members");return m.a.createElement(HU,{tooltip:d,featureAnnounceOnly:i,border:!0,padding:"large"})}u=WU.rt("Your Workspace Owners have limited who can post to {channel_or_group}",{channel_or_group:m.a.createElement("strong",null,m.a.createElement(Yp.a,{channel:t}))})}return m.a.createElement("div",{className:"p-message_pane_input__disabled"},m.a.createElement("span",{className:"p-message_pane_input__disabled_text"},c," ",u),n&&m.a.createElement(_e.d,{pillarClassName:"p-message_pane_input__disabled_button",onClick:this.onCloseButtonClicked,type:"outline",size:"small"},l))}}]),t}(p.Component);KU.displayName="MessagePaneInputDisabled",KU.defaultProps=GU;var VU={closeChannelApi:Fo.closeChannelApi,archiveChannel:Fo.archiveChannel,displayModelOrViewById:aD.a},zU=Object(g.b)(function(e,t){var n=t.teamId,a=t.channelId,r=Object(we.i)(e,n),i=Object(G.e)(e,a),o=Object(K.hb)(i)?Object(xo.d)(e,Object(K.H)(i)):null,s=Object(K.mb)(e,i);return{team:r,channel:i,member:o,channelIsIMWithDeletedMember:s,prevChannelId:Object(rb.a)(e),showCloseButton:!Object(K.db)(i)&&(Object(K.X)(i)||s),featureAnnounceOnly:Object(y.m)(e,"feature_announce_only"),featureSharedChannelsFreeTrial:Object(y.m)(e,"feature_shared_channels_free_trial"),isChannelFrozenAndInGracePeriod:Object(K.eb)(n,i),clogger:Object(re.a)({state:e})}},VU)(KU),YU=n("GdsW"),QU=new B.b("archives"),XU=(h.b.string.isRequired,h.b.object.isRequired,h.b.bool,h.b.bool,h.b.number,h.b.string,h.b.func.isRequired,h.b.func.isRequired,h.b.func.isRequired,h.b.bool,h.b.string,h.b.bool.isRequired,h.b.bool.isRequired,{channelCreatedBySelf:!1,channelDetailsVisible:!1,dateCreated:void 0,createdById:void 0,userAttentionIsOnChat:!1,previousChannelId:void 0}),JU=function(e){function t(){r()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onJoinButtonClicked=e.onJoinButtonClicked.bind(e),e.onDetailsButtonClicked=e.onDetailsButtonClicked.bind(e),e.handleKeyDown=e.handleKeyDown.bind(e),e}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"onDetailsButtonClicked",value:function(){this.props.showDetails()}},{key:"onJoinButtonClicked",value:function(){this.props.joinConversationApi({channelId:this.props.channelId})}},{key:"handleKeyDown",value:function(e){var t=this.props,n=t.userAttentionIsOnChat,a=t.previousChannelId;if(!(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)&&!Object(Sd.a)(document.activeElement)&&(!Object(ae.a)()||n)&&(Object(ae.a)()||Object(jd.f)()))if(e.keyCode!==Lj.e){if(e.keyCode===Lj.f){if(Object(ae.a)())return void this.props.displayModelOrViewById({id:a});Object(YU.a)()}}else this.onJoinButtonClicked()}},{key:"render",value:function(){var e=this.props,t=e.channel,n=e.dateCreated,a=e.createdById,r=e.channelCreatedBySelf,i=e.channelDetailsVisible,o=e.featureOfflineMode,s=e.isOffline,l=m.a.createElement(Gx.a,{type:"unknown"});n&&(l=Object(Ps.k)(n));var c=m.a.createElement(Gx.a,{type:"unknown"});a&&(c=m.a.createElement(kF.a,{id:a}));var u=QU.rt("You are viewing {channel_name}",{channel_name:m.a.createElement("strong",null,m.a.createElement(Lo.a,{channel:t,boldIcon:!0}))}),d="";d=r?QU.rt("Created by you on {created_at}",{created_at:l}):QU.rt("Created by {name} on {created_at}",{name:c,created_at:l});var p=m.a.createElement(_e.d,{pillarClassName:"p-message_pane_input__preview_join",onClick:this.onJoinButtonClicked,type:"primary",size:"medium",disabled:o&&s},QU.t("Join Channel"));if(o&&s){var h=m.a.createElement(Li.a,{tooltipLabel:QU.t("Go online to join this channel")});p=m.a.createElement(qi.c,{tip:h},m.a.createElement("div",{className:"inline_block"},p))}return m.a.createElement("div",{className:"p-message_pane_input__preview"},m.a.createElement("div",{className:"p-message_pane_input__preview_subtitle"},u),m.a.createElement("div",{className:"p-message_pane_input__preview_metadata"},d),m.a.createElement("div",null,p,!i&&m.a.createElement(_e.d,{pillarClassName:"p-message_pane_input__preview_details",onClick:this.onDetailsButtonClicked,type:"outline",size:"medium"},QU.t("See More Details"))))}}]),t}(p.Component);JU.displayName="MessagePaneInputPreview",JU.defaultProps=XU;var ZU={joinConversationApi:Fo.joinConversationApi,showDetails:jn.e,displayModelOrViewById:aD.a},$U=Object(g.b)(function(e,t){var n=t.channelId,a=Object(G.e)(e,n),r=Object(A.j)(e);return{channel:a,channelDetailsVisible:"details"===r||"channel_info"===r,createdById:a.creator,dateCreated:a.created,channelCreatedBySelf:a.creator===Object(y.c)(e),userAttentionIsOnChat:Object(Ed.e)(e),previousChannelId:Object(rb.a)(e),featureOfflineMode:Object(y.m)(e,"feature_offline_mode"),isOffline:!Object(Qt.c)(e)}},ZU)(JU),eB=(h.b.bool,h.b.string,h.b.string,h.b.bool,h.b.string,{isSelfDm:!1,channelName:void 0,memberId:void 0,showStatus:!1,forcePlaceholderText:void 0}),tB=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.channelName,n=e.isSelfDm,a=e.showStatus,r=e.memberId,i=e.forcePlaceholderText,o=i||$i({channelName:t,isSelfDm:n}),s=!i&&a&&m.a.createElement(CO.b,{memberId:r,tooltip:!1});return m.a.createElement("div",{className:"c-texty_input__placeholder"},o,s)}}]),t}(p.Component);tB.displayName="MessagePaneInputPlaceholder",tB.defaultProps=eB;var nB=Object(g.b)(function(e,t){var n=t.channelId,a=t.isSelfDm,r=Object(G.e)(e,n),i=Object(K.H)(r),o=i?Object(xo.d)(e,i):null,s=Object(y.m)(e,"feature_context_bar_custom_status");return{memberId:i||void 0,showStatus:Object(K.hb)(r)&&!a&&Object(eo.ab)(o)&&!s}})(tB),aB=(n("0Eo7"),h.b.object,h.b.string,h.b.bool,h.b.string,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.array,h.b.bool,h.b.bool,h.b.string,h.b.bool,h.b.bool,h.b.object.isRequired,h.b.bool,h.b.bool,h.b.func,h.b.bool,h.b.func,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.bool,h.b.func,{channel:void 0,channelId:void 0,isSelfDm:!1,channelName:void 0,prepareAndSendMessage:function(){return Promise.resolve()},currentUserStartedTyping:d.a,currentUserEndedTyping:d.a,editLastMessageInChannel:d.a,openSnippetDialog:d.a,useSendButton:!1,userCanPost:!0,typingNames:[],teamId:void 0,featureWysiwygComposer:!1,featureAtMentionInvites:!1,isUnavailable:!1,shouldShowJoinerLandingPlaceCoachmark:!1,completeJoinerOnboardingCallback:d.a,shouldShowTractorMessageCoachmark:!1,setTractorMessageCoachmarkVisibility:d.a,shouldShowAtMentionsInviteCoachmark:!1,userAttentionIsOnChat:!1,composerVisible:!1,removeFromSectionNavigation:d.a,addToSectionNavigation:d.a,resetSectionNavigation:d.a,shouldShowWorkflowItemCoachmark:!1,maybePullDownMessagePane:d.a,featureMessageNavigationShortcuts:!1,setFocusLastVisibleMessageInChannel:d.a,focusMessageInput:!1,setFocusMessageInput:d.a}),rB=function(e){function t(){r()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Object(Kt.a)(e,["handleKeyDown","onTextChange","onSelectionChange","sendMessage","editLastMessage","snippetCallback","startListeningToKeydown","stopListeningToKeydown","registerInput","unregisterInput","focus","blur","onFocus","onBlur","maybePullDownMessagePane","handleContextBarError","onUpArrow","prefillMessageInput"]),e.textyRef=m.a.createRef(),e.reactionPopoverRef=m.a.createRef(),e.state={textyValue:"",textyWysiwygLength:0,hasKeyboardFocus:!1},e}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.updatePlaceholder(),this.registerInput(),this.restoreLegacyDraft()}},{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=t.userCanPost,a=t.channel;return(n&&!e.userCanPost||!Object(K.Ab)(a)&&Object(K.Ab)(e.channel))&&this.unmountPlaceholder(),!0}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.userAttentionIsOnChat,a=t.channelId,r=t.userCanPost,i=t.channel,o=t.focusMessageInput,s=t.featureMessageNavigationShortcuts,l={prevUserAttentionIsOnChat:e.userAttentionIsOnChat,prevComposerVisible:e.composerVisible,currentUserAttentionIsOnChat:this.props.userAttentionIsOnChat,currentComposerVisible:this.props.composerVisible};Object(Up.a)(l)&&this.props.addToSectionNavigation(),Object(Bp.a)(l)&&this.props.removeFromSectionNavigation(),e.userAttentionIsOnChat&&!n?this.stopListeningToKeydown():!e.userAttentionIsOnChat&&n&&this.startListeningToKeydown(),e.channelId!==a&&(e.channelId&&this.unregisterInput(e.channelId),a&&(this.registerInput(),this.restoreLegacyDraft())),(a&&e.channelId!==a||!e.userCanPost&&r||(!e.channel||Object(K.Ab)(e.channel))&&!Object(K.Ab)(i))&&this.updatePlaceholder();var c=e.focusMessageInput!==o&&o;if(s&&c){var u=this.getInputRef();u&&u.focus(),this.props.setFocusMessageInput(null)}}},{key:"componentWillUnmount",value:function(){var e=this.props.channelId;this.stopListeningToKeydown(),this.unmountPlaceholder(),this.unregisterInput(e),this.shouldNotListenToKeyDownAgain=!0}},{key:"onUpArrow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.props.featureMessageNavigationShortcuts&&!e&&this.props.setFocusLastVisibleMessageInChannel(!0)}},{key:"onTextChange",value:function(e,t){var n=this.props,a=n.channelId,r=n.featureWysiwygComposer,i=this.getInputRef(),o=!1;if(r&&i){var s=i.getFormat();o=s&&s["code-block"]}this.setState(function(){return{textyValue:e,textyWysiwygLength:Object(JD.a)(new zt.a(t)),cursorInCodeBlock:o}}),Object(ae.a)()||Object(dA.h)(e),e&&0!==e.indexOf("/")&&Object(Wt.a)(e).length?this.props.currentUserStartedTyping({channelId:a}):this.props.currentUserEndedTyping({channelId:a})}},{key:"onSelectionChange",value:function(){var e=this.props.featureWysiwygComposer,t=this.state.cursorInCodeBlock;if(e){var n=this.getInputRef();if(n){var a=n.getFormat(),r=a&&a["code-block"];t!==r&&this.setState(function(){return{cursorInCodeBlock:r}})}}}},{key:"onFocus",value:function(){this.stopListeningToKeydown(),this.props.resetSectionNavigation()}},{key:"onBlur",value:function(){this.startListeningToKeydown(),this.getInputRef()&&this.setState(function(){return{hasKeyboardFocus:!1}})}},{key:"getInputRef",value:function(){return this.textyRef.current?this.textyRef.current.getWrappedInstance?this.textyRef.current.getWrappedInstance():this.textyRef.current:null}},{key:"restoreLegacyDraft",value:function(){var e=this.props.channelId,t=this.getInputRef();if(e&&!Object(ae.a)()&&t){var n=Object(PN.a)(e);t.value(n||"");var a=Object(dA.b)(e);a?t.setCursor(a.start,a.length):t.setCursorAtEnd()}}},{key:"registerInput",value:function(){var e=this,t=this.props.channelId;t&&Object(Ci.c)({viewContext:Ca.H.MESSAGE_PANE,channelId:t,functions:{getContainer:function(){var t=e.getInputRef();return t?t.container:null},isEmpty:function(){var t=e.getInputRef();return t?t.isEmpty():null},clear:function(){var t=e.getInputRef();t&&t.clear()},prependContents:function(t){var n=e.getInputRef();n&&n.prependContents(t)},setContents:function(t){var n=e.getInputRef();n&&n.setContents(t)},getContents:function(){var t=e.getInputRef();return t?t.getContents():null},setText:function(t){var n=e.getInputRef();n&&n.value(t)},getText:function(){var t=e.getInputRef();return t?t.value():null},getLength:function(){var t=e.getInputRef();return t?t.getLength():null},getDisplayValue:function(){var t=e.getInputRef();return t?t.displayValue():null},focus:function(){var t=e.getInputRef();t&&t.setCursorAtEnd()},focusWithoutSettingCursor:function(){var t=e.getInputRef();t&&t.focus()},hasFocus:function(){var t=e.getInputRef();return!!t&&t.hasFocus()},isEnabled:function(){var t=e.getInputRef();return!!t&&t.isEnabled()},getSelection:function(){var t=e.getInputRef();return t?t.getSelection():null},insertContentsAtCursor:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"user",r=e.getInputRef();r&&r.insertContentsAtCursor(t,n,a)},setCursor:function(t,n){var a=e.getInputRef();a&&a.setCursor(t,n)},setCursorAtEnd:function(){var t=e.getInputRef();t&&t.setCursorAtEnd()},setPlaceholder:function(t){e.updatePlaceholder(t)},getContentsForCurrentSelection:function(){var t=e.getInputRef();if(!t)return null;var n=t.getSelection();return n?t.getContentsForRange(n.index,n.length):null},openReactionPopoverForLastMessage:function(){e.reactionPopoverRef.current&&e.reactionPopoverRef.current.getWrappedInstance().startReactionPopoverForLastMessage()},isCursorAtBeginning:function(){var t=e.getInputRef();if(!t)return!1;var n=t.getSelection();return n&&0===n.index},isCursorAtEnd:function(){var t=e.getInputRef();if(!t)return!1;var n=t.getSelection();return n&&n.index===t.getLength()}}})}},{key:"unregisterInput",value:function(e){e&&Object(Ci.d)({viewContext:Ca.H.MESSAGE_PANE,channelId:e})}},{key:"unmountPlaceholder",value:function(){var e=this.getInputRef();if(e){var t=e.container.querySelector(".ql-placeholder");t&&Pc.a.unmountComponentAtNode(t)}}},{key:"updatePlaceholder",value:function(e){var t=this.props,n=t.channelName,a=t.isSelfDm,r=t.teamId,i=t.channelId,o=this.getInputRef();if(o){var s=o.container.querySelector(".ql-placeholder");if(s){Pc.a.render(m.a.createElement(g.a,{store:Object(_.getStoreInstanceByTeamId)(r)},m.a.createElement(nB,{channelId:i,channelName:n,forcePlaceholderText:e,isSelfDm:a})),s);var l=e||$i({channelName:n,isSelfDm:a});o.container.querySelector(".ql-editor").setAttribute("aria-label",l)}}}},{key:"editLastMessage",value:function(){this.props.editLastMessageInChannel({channelId:this.props.channelId})}},{key:"handleKeyDown",value:function(e){if(XD({e:e,isMenuVisible:Object(na.g)()})&&!Object(YD.a)(e.target,function(e){return e.classList.contains("p-threads_flexpane")})){var t=this.getInputRef();Object(Yo.c)()?setTimeout(function(){return t.focus()},0):t&&t.focus()}}},{key:"startListeningToKeydown",value:function(){this.shouldNotListenToKeyDownAgain||this.props.userAttentionIsOnChat&&document.addEventListener("keydown",this.handleKeyDown)}},{key:"stopListeningToKeydown",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"sendMessage",value:function(){var e=this,t=this.props,n=t.channelId,a=t.useSendButton,r=t.featureWysiwygComposer,i=t.telemeter,o=this.getInputRef(),s=o.value(),l=o.getContents();return Object(wD.a)(o.getContents(),{featureWysiwygComposer:r})?(Object(rU.a)()&&i.mark("msg_input_try_to_submit"),o.clear(),this.setState(function(){return{cursorInCodeBlock:!1}}),a&&o.focus(),this.props.prepareAndSendMessage({channelId:n,text:s,delta:r?new zt.a(l.contents):null,includeBroadcastKeywordWarning:!0,includeAtMentionInviteWarning:!0,includePrivateFileReshareWarning:!0}).then(function(){var t=e.getInputRef();t&&t.clearHistory()}).catch(function(){o.isEmpty()&&o.setContents(l)})):null}},{key:"snippetCallback",value:function(){var e=this.getInputRef();this.props.openSnippetDialog({initialChannelId:this.props.channelId,initialText:e.displayValue(),initialContents:e.getContents&&e.getContents(),fromPrompt:!0,viewContext:Ca.H.MESSAGE_PANE}),e.clear()}},{key:"focus",value:function(){var e=this.getInputRef();e&&(e.setCursorAtEnd(),this.setState(function(){return{hasKeyboardFocus:!0}}))}},{key:"blur",value:function(){var e=this.getInputRef();e&&e.blur(),this.onBlur()}},{key:"maybePullDownMessagePane",value:function(e){this.props.maybePullDownMessagePane(e)}},{key:"handleContextBarError",value:function(){this.props.maybePullDownMessagePane(!1)}},{key:"prefillMessageInput",value:function(e){var t=this.getInputRef();t.value(Object(st.b)(e)),t.setCursorAtEnd()}},{key:"renderContextBar",value:function(){return m.a.createElement(cg.a,{onError:this.handleContextBarError},m.a.createElement(DU,{maybePullDownMessagePane:this.maybePullDownMessagePane,key:this.props.channelId}))}},{key:"renderInput",value:function(){var e=this.props,t=e.channelId,n=e.useSendButton,a=e.featureWysiwygComposer,r=this.state.hasKeyboardFocus,i=m.a.createElement(Ji,{channelId:t,viewContext:Ca.H.MESSAGE_PANE,className:"p-workspace__input",sendMessage:this.sendMessage,editLastMessage:this.editLastMessage,useSendButton:n,useLegacyDrafts:!Object(ae.a)(),ref:this.textyRef,enableEmojiButton:!0,enableMentionButton:!0,enableComposerButton:a,enableSendButton:!1,focusOnMount:!0,focusOnPaste:!0,onTextChange:this.onTextChange,onSelectionChange:this.onSelectionChange,onFocus:this.onFocus,onBlur:this.onBlur,maxLines:null,showFocusOutline:r,ariaDescribedBy:"context-bar-text",onUpArrow:this.onUpArrow});return Object(ae.a)()?m.a.createElement(SD,{ref:this.reactionPopoverRef,channelId:t},i):i}},{key:"render",value:function(){var e=this.props,t=e.typingNames,n=e.useSendButton,a=e.completeJoinerOnboardingCallback,r=e.userCanPost,i=e.channel,o=e.channelId,s=e.teamId,l=e.shouldShowTractorMessageCoachmark,c=e.setTractorMessageCoachmarkVisibility,u=e.shouldShowJoinerLandingPlaceCoachmark,d=e.shouldShowAtMentionsInviteCoachmark,p=e.shouldShowWorkflowItemCoachmark,h=e.featureWysiwygComposer,b=e.featureAtMentionInvites,f=this.state,g=f.textyValue,_=f.textyWysiwygLength,v=f.cursorInCodeBlock,y=null;if(u?y=m.a.createElement(FD,{completeJoinerOnboarding:a}):l?y=m.a.createElement(qD,{setTractorMessageCoachmarkVisibility:c}):p?y=m.a.createElement(FD,{completeJoinerOnboarding:function(){return Object($t.c)(!1)}}):d&&(y=m.a.createElement(zD,{featureWysiwygComposer:h})),this.props.isUnavailable)return null;if(o&&Object(K.Ab)(i))return m.a.createElement($U,{channelId:this.props.channelId});if(o&&!r)return m.a.createElement(zU,{teamId:s,channelId:this.props.channelId});var k=m.a.createElement(aU,{channelId:o,prefillMessageInput:this.prefillMessageInput},m.a.createElement("div",{className:"p-message_pane_input"},m.a.createElement("div",{className:"p-message_pane_input_inner"},this.renderContextBar(),this.renderInput(),m.a.createElement(RD,{typingNames:t,snippetCallback:this.snippetCallback,inputText:g,wysiwygTextLength:_,cursorInCodeBlock:v})),n&&m.a.createElement(Xi,{isDisabled:!g,sendMessage:this.sendMessage,className:"p-workspace__message_pane_send"})));return Object(ae.a)()?b||y?m.a.createElement(Vn.b,{coachmarkElement:y,orientation:"top",style:{width:"100%"}},k):k:m.a.createElement(Mp.a,{component:this,order:2},k)}}]),t}(p.Component);rB.displayName="MessagePaneInput",rB.defaultProps=aB;var iB={prepareAndSendMessage:function(){return Wr.a.apply(void 0,arguments)},currentUserStartedTyping:function(){return aR.d.apply(void 0,arguments)},currentUserEndedTyping:function(){return aR.c.apply(void 0,arguments)},editLastMessageInChannel:function(){return _D.apply(void 0,arguments)},openSnippetDialog:function(){return cn.apply(void 0,arguments)},completeJoinerOnboardingCallback:function(){return Vh.apply(void 0,arguments)},setTractorMessageCoachmarkVisibility:function(){return $t.g.apply(void 0,arguments)},setFocusLastVisibleMessageInChannel:function(){return cj.h.apply(void 0,arguments)},setFocusMessageInput:function(){return cj.i.apply(void 0,arguments)}},oB=Object(ae.a)()?Object(V.a)(rB,"MessagePaneInput",{index:5}):rB,sB=Object(g.b)(function(e){var t=Object(E.a)(e),n=Object(G.e)(e,t),a=Object(ft.a)(Object(aR.f)(e,t),function(t){return Object(xo.d)(e,t)});a.sort(function(t,n){return Object(B.q)(Object(eo.X)(e,t),Object(eo.X)(e,n))});var r=Object(Bb.p)(e,t)||Object(y.m)(e,"feature_announce_only_websocket")&&Object(K.z)(e,n),i=a.map(function(t){return Object(eo.V)(e,t)}),o=Object(y.c)(e);return{channelId:t,channel:n,channelName:Object(K.x)(e,n,{imIncludeAtSign:!1}),isSelfDm:Object(K.Tb)(o,n),userCanPost:r&&!Object(K.X)(n),typingNames:i.length>0?i:rR.a,useSendButton:Object(Zt.j)(e,"msg_input_send_btn"),userAttentionIsOnChat:Object(Ed.e)(e),composerVisible:(Object(lt.a)(e)||"composer_toolbar"===Object(Xt.c)(e,"composer_toolbar"))&&Object(Dp.b)(e),teamId:Object(v.b)(e),featureWysiwygComposer:Object(lt.a)(e),featureAtMentionInvites:Object(y.m)(e,"feature_at_mention_invites"),isUnavailable:Object(K.Lb)(e,n),telemeter:Object(KC.c)({state:e}),shouldShowAtMentionsInviteCoachmark:Object(fD.d)(e),shouldShowTractorMessageCoachmark:Object(Yt.c)(e),shouldShowJoinerLandingPlaceCoachmark:Object(Yt.a)(e),shouldShowWorkflowItemCoachmark:Object(ie.l)(e),featureMessageNavigationShortcuts:Object(y.m)(e,"feature_message_navigation_shortcuts"),focusMessageInput:Object(F.d)(e)}},iB)(oB),lB=n("okoL"),cB=n("Xjfm"),uB=n("izWf");function dB(e,t,n){return Object(bt.a)(Object(aa.a)(n,function(n){return function(e,t,n){var a=Object(Ze.a)(e,t,n);return a&&!Object(et.sb)(a)&&!Object(et.bb)(a)}(e,t,n)}))}function pB(e){var t=e.timestamps;return Object(Ud.a)(t)}var mB=n("Gz0X");var hB=function(e){var t=e.messages,n=e.timestamps,a=e.threadTs,r=e.lastRead,i=e.reachedStart,o=t[a];if(!o)return"0000000000.000000";var s=Object(aa.a)(n,function(e){return e!==a});if(Object(et.S)(o)<=4)return"0000000000.000000";var l=Object(mB.a)(s,function(e){return e<=r});return i&&l.length<=2?"0000000000.000000":l.length===s.length?Object(_b.a)(Object(lB.a)(l,2)):Object(Ud.a)(l)},bB=n("m7fc");var fB=function(e){var t=e.threads,n=e.minimumVisibleTsByThread,a=e.maximumVisibleTsByThread,r=e.firstReadThreadKey,i=e.isDoingGlobalRefresh,o=e.currentUserId,s=e.initialLastReadByThread,l=e.hasMore,c=e.logError,u=void 0===c?d.a:c,p=[],m=[];i&&(p.push("global-loading"),m.push({type:"loading"}));var h=Object(bB.a)(t,function(e){return e.threadKey!==r}).some(function(e){return Object(mb.a)(e.messages).some(function(t){return t?t.ts>s[e.threadKey]&&t.user!==o:(u("Missing message in "+e.threadKey),!1)})});if(t.forEach(function(e){var t=e.channelId,o=e.threadTs,l=e.timestamps,c=e.threadKey,u=e.messages,d=e.reachedStart,b=n[c],f=a[c];i||h||c!==r||(p.push("divider-"+c),m.push({type:"divider"}));var g={channelId:t,threadTs:o,threadKey:c},_=l.some(function(e){return e>f});p.push("heading-"+c),m.push(ye()({type:"heading"},g)),p.push("root-"+c),m.push(ye()({type:"root"},g)),(!d||Object(Fd.a)(l,function(e){return e!==o&&e<b}))&&(p.push("load_older-"+c),m.push(ye()({type:"load_older",messages:u},g))),l.forEach(function(t){if(t!==o&&!(t<b||t>f)){var n=u[t];if(!Object(et.gb)(n)){var a=s&&t>s[e.threadKey];p.push(c+"-"+t),m.push(ye()({type:"reply",ts:t,isNewReply:a},g))}}}),_&&(p.push("load_newer-"+c),m.push(ye()({type:"load_newer"},g))),p.push("footer-"+c),m.push(ye()({type:"footer"},g))}),l&&t){var b=Object(Ud.a)(t),f=b&&b.threadKey;p.push("loading_more_threads-"+f),m.push({type:"loading_more_threads"})}return{keys:p,rows:m}};h.b.string,h.b.string,h.b.array,h.b.number,h.b.bool,h.b.func;var gB={channelId:void 0,threadTs:void 0,replyUsers:[],replyUsersCount:0,firstItem:!1,clogLinkClick:d.a},_B=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.clogClick=n.clogClick.bind(n),n}return u()(t,e),o()(t,[{key:"clogClick",value:function(){(0,this.props.clogLinkClick)("CLICK_CHANNEL_NAME")}},{key:"render",value:function(){var e=this.props,t=e.channelId,n=e.threadTs,a=e.replyUsers,r=e.replyUsersCount,i=e.firstItem,o=Object(et.v)(t,n),s=f()("p-threads_view_header",{"p-threads_view_header--first":i});return m.a.createElement("div",{className:s},m.a.createElement(la.a,{href:o,className:"p-threads_view_header__permalink",clogLinkClick:this.clogClick},m.a.createElement(Yp.a,{channelId:t,className:"p-threads_view_header__channel_name"})),m.a.createElement(Kf.a,{replyUsers:a,replyUsersCount:r,className:"p-threads_view_header__participant_list"}))}}]),t}(p.Component);_B.displayName="Header",_B.defaultProps=gB;var vB=Object(g.b)(function(e,t){var n=t.channelId,a=t.threadTs,r=Object(Ze.a)(e,n,a);if(!r)return null;var i=Object(et.T)(r),o=Object(et.U)(r);return r.replies?(i=Object(ft.a)(r.replies,"user"),r.user&&i.push(r.user),o=Object(dt.a)(i).length):r.user&&i.push(r.user),{replyUsers:i,replyUsersCount:o}})(_B),yB=(h.b.bool,h.b.bool,h.b.node,{first:!1,last:!1,children:void 0}),kB=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.first,n=e.last,a=f()("p-threads_view__default_background",{"p-threads_view__default_background--first":t,"p-threads_view__default_background--last":n});return m.a.createElement("div",{className:a},this.props.children)}}]),t}(p.PureComponent);kB.displayName="ThreadsDefaultBackground",kB.defaultProps=yB;var OB=kB,CB=new B.b("message_kit"),EB=(h.b.object.isRequired,h.b.string,h.b.oneOf(["light","dense"]),h.b.func,h.b.func,h.b.bool,h.b.bool,h.b.string,{className:void 0,theme:"light",clogLinkClick:d.a,clogThreadEvent:d.a,focused:!1,renderActionsOffscreen:!1,parentId:void 0}),jB=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"getMessageBody",value:function(e){return m.a.createElement(m.a.Fragment,null,m.a.createElement(lo.a,{msg:e}),"\xa0\xa0",m.a.createElement(ho.a,{msg:e,relative:!0,clickable:!0},CB.t("Open in channel")),m.a.createElement("br",null),m.a.createElement(co.a,{msg:e}),m.a.createElement(uo.a,{msg:e,blocksContainerContext:am.a.all_threads}),m.a.createElement(mo.b,{msg:e}),m.a.createElement(rm.a,{msg:e}),m.a.createElement(sm.a,{msg:e}))}},{key:"getCompactMessageBody",value:function(e){return m.a.createElement(Im.a,null,m.a.createElement(lo.a,{msg:e,className:"p-threads_view_sender--compact"}),"\xa0\xa0",m.a.createElement(co.a,{msg:e}),m.a.createElement(om,{msg:e,blocksContainerContext:am.a.all_threads}),m.a.createElement(mo.b,{msg:e}),m.a.createElement(rm.a,{msg:e}),m.a.createElement(sm.a,{msg:e}))}},{key:"render",value:function(){var e=this.props,t=e.msg,n=e.theme,a=e.clogLinkClick,r=e.focused,i=e.renderActionsOffscreen,o=e.clogThreadEvent,s=e.parentId,l="dense"===n,c=f()("p-threads_view_root","c-message_kit__message","c-message_kit__thread_message","c-message_kit__thread_message--root",this.props.className),u=l?m.a.createElement("div",{className:"p-threads_view_compact_timestamp"},m.a.createElement(ho.a,{msg:t,relative:!0,compact:!0,clickable:!0},CB.t("Open in channel"))):null,d=l?"above":"default",p=l?this.getCompactMessageBody(t):this.getMessageBody(t);return m.a.createElement(hm.a,{msg:t},m.a.createElement(OB,{first:!0},m.a.createElement(bm.a,{msg:t,className:c},m.a.createElement(fm.a,{hovered:r},m.a.createElement(gm.a,{msg:t,showComment:!0,showShare:!1,showJump:!0,messageContainerType:Ca.H.THREADS_VIEW,renderOffscreen:i,position:d,clogLinkClick:a,clogThreadEvent:o,parentId:s},m.a.createElement(io.a,{msg:t},m.a.createElement(Om.a,{msg:t},m.a.createElement(oo.a,{light:m.a.createElement(so.a,{msg:t}),compact:u},m.a.createElement(Sm,{msg:t},p)))))))))}}]),t}(p.PureComponent);jB.displayName="RootMessage";var SB=jB;jB.defaultProps=EB;var IB=n("qnZ7"),wB=n("0wDQ"),NB=(n("Mzw9"),new B.b("message")),TB=(h.b.object.isRequired,h.b.string,h.b.node,h.b.func.isRequired,h.b.func.isRequired,{className:void 0,children:void 0}),AB=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.resend=n.resend.bind(n),n.cancel=n.cancel.bind(n),n}return u()(t,e),o()(t,[{key:"getText",value:function(){return this.props.msg.isEKMError?NB.t("Your message couldn\u2019t be sent because your admins have disabled sending messages to this channel."):NB.t("Slack couldn\u2019t send this message")}},{key:"resend",value:function(){var e=this.props.msg,t=e.ts,n=e.channel;this.props.resendMessage(n,t)}},{key:"cancel",value:function(){var e=this.props.msg,t=e.ts,n=e.channel;this.props.removeMessageAndTimestamp({channelId:n,ts:t})}},{key:"renderFooter",value:function(){var e=this.props.msg,t=e.showResend,n=e.showCancel,a=e.isEKMError;if(!t&&!n)return null;var r=t&&m.a.createElement(En.a,{className:"c-message_kit__resend__resend",onClick:this.resend},NB.t("Try again")),i=n&&m.a.createElement(En.a,{className:"c-message_kit__resend__cancel",onClick:this.cancel},a?NB.t("Clear"):NB.t("Cancel")),o=r&&i&&m.a.createElement("span",{className:"c-message_kit__resend__separator"},"\xa0|\xa0");return m.a.createElement("div",{className:"c-message_kit__resend__footer"},m.a.createElement("div",{className:"c-message_kit__resend__footer__border"}),m.a.createElement("div",null,this.getText(),"\u2002",r,o,i))}},{key:"render",value:function(){var e=this.props.msg,t=e.showResend,n=e.showCancel,a=Object(et.xb)(this.props.msg);if(!t&&!n&&!a)return this.props.children;var r=f()("c-message_kit__resend",this.props.className,{"c-message_kit__resend--with_buttons":t||n,"c-message_kit__resend--unprocessed":a});return m.a.createElement("div",{className:r},this.props.children,this.renderFooter())}}]),t}(p.PureComponent);AB.displayName="MessageResend",AB.defaultProps=TB;var RB={resendMessage:function(){return IB.a.apply(void 0,arguments)},removeMessageAndTimestamp:function(){return wB.a.apply(void 0,arguments)}},PB=Object(g.b)(null,RB)(AB),MB=new B.b("threads"),xB=(h.b.object.isRequired,h.b.string,h.b.bool,h.b.func,h.b.bool,h.b.bool,h.b.bool,h.b.oneOf(["light","dense"]),h.b.func,h.b.string,{className:void 0,highlight:void 0,clearHighlight:void 0,focused:!1,renderActionsOffscreen:!1,isNewReply:!1,theme:"light",clogThreadEvent:d.a,parentId:void 0}),FB=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"getMessageBody",value:function(e){return m.a.createElement(m.a.Fragment,null,m.a.createElement(lo.a,{msg:e}),"\xa0\xa0",m.a.createElement(ho.a,{msg:e,relative:!0,clickable:!0},MB.t("Open in sidebar",{fallbackHash:"12680843c28c99d16fef1b02d2c6bbce0760c86b",fallbackHashNs:"templates_helpers"})),m.a.createElement("br",null),m.a.createElement(PB,{msg:e},m.a.createElement(co.a,{msg:e}),m.a.createElement(uo.a,{msg:e,blocksContainerContext:am.a.all_threads}),m.a.createElement(mo.b,{msg:e}),m.a.createElement(rm.a,{msg:e})),m.a.createElement(sm.a,{msg:e}))}},{key:"getCompactMessageBody",value:function(e){return m.a.createElement(Im.a,null,m.a.createElement(lo.a,{msg:e,className:"p-threads_view_sender--compact"}),"\xa0\xa0",m.a.createElement(PB,{msg:e},m.a.createElement(co.a,{msg:e}),m.a.createElement(om,{msg:e,blocksContainerContext:am.a.all_threads}),m.a.createElement(mo.b,{msg:e}),m.a.createElement(rm.a,{msg:e})),m.a.createElement(sm.a,{msg:e}))}},{key:"render",value:function(){var e=this.props,t=e.msg,n=e.highlight,a=e.clearHighlight,r=e.focused,i=e.renderActionsOffscreen,o=e.isNewReply,s=e.theme,l=e.clogThreadEvent,c=e.parentId,u="dense"===s,d=f()("c-message_kit__message","c-message_kit__thread_message","p-threads_view_reply",{"p-threads_view_reply--new_reply":o},this.props.className),p=u?m.a.createElement("div",{className:"p-threads_view_compact_timestamp"},m.a.createElement(ho.a,{msg:t,relative:!0,compact:!0,clickable:!0},MB.t("Open in sidebar",{fallbackHash:"12680843c28c99d16fef1b02d2c6bbce0760c86b",fallbackHashNs:"templates_helpers"}))):null,h=u?"above":"default",b=u?this.getCompactMessageBody(t):this.getMessageBody(t);return m.a.createElement(hm.a,{msg:t},m.a.createElement(OB,null,m.a.createElement(bm.a,{msg:t,className:d,highlight:n,clearHighlight:a},m.a.createElement(fm.a,{hovered:r},m.a.createElement(gm.a,{msg:t,showComment:!1,showShare:!1,messageContainerType:Ca.H.THREADS_FLEXPANE,renderOffscreen:i,position:h,clogThreadEvent:l,parentId:c},m.a.createElement(Om.a,{msg:t,showBroadcast:!0},m.a.createElement(oo.a,{light:m.a.createElement(so.a,{msg:t}),compact:p},m.a.createElement(Sm,{msg:t},b))))))))}}]),t}(p.PureComponent);FB.displayName="ReplyMessage";var LB=FB;FB.defaultProps=xB;var DB=n("8QLk"),UB=new B.b("threads"),BB=(h.b.string,h.b.string,h.b.string,h.b.object,h.b.object,h.b.func,h.b.oneOf(["light","dense"]),{channelId:void 0,threadTs:void 0,minimumVisibleTs:void 0,rootMsg:void 0,messages:{},loadOlderReplies:d.a,theme:"light"}),qB=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isLoading:!1},n.onClick=n.onClick.bind(n),n}return u()(t,e),o()(t,[{key:"onClick",value:function(){var e=this,t=this.props,n=t.channelId,a=t.threadTs,r=t.loadOlderReplies;!this.state.isLoading&&r&&(this.setState(function(){return{isLoading:!0}}),r(n,a).then(function(){e.setState(function(){return{isLoading:!1}})}))}},{key:"render",value:function(){var e=this.props,t=e.minimumVisibleTs,n=e.rootMsg,a=e.messages,r="dense"===e.theme,i=[],o=Object(et.Q)(n),s=Object(et.C)(n);Object(qp.a)(a,function(e,t){!Object(et.bb)(e)&&!Object(et.sb)(e)&&t!==o&&t<=s&&i.push(t)});var l=Object(et.S)(n)-i.length,c=i.filter(function(e){return e<t}),u=Object(DB.a)(l+c.length,0,100);if(!u)return null;var d=f()("p_threads_view_load_older_button",{"p_threads_view_load_older_button--with-gutter":r});return m.a.createElement(OB,null,m.a.createElement("div",{className:d},m.a.createElement(la.a,{onClick:this.onClick},UB.t("Show {showPrevCount, plural, =1 {# more reply} other {# more replies}}",{showPrevCount:u})),this.state.isLoading?m.a.createElement(ci.a,{size:"medium",className:"margin_left_25",inline:!0}):null))}}]),t}(p.Component);qB.displayName="LoadOlderButton",qB.defaultProps=BB;var HB=Object(g.b)(function(e,t){var n=t.channelId,a=t.threadTs,r=t.messages;return{rootMsg:Object(Ze.a)(e,n,a),messages:r}})(qB),WB=new B.b("threads"),GB=(h.b.string,h.b.string,h.b.string,h.b.arrayOf(h.b.string),h.b.func,h.b.oneOf(["light","dense"]),{channelId:void 0,threadTs:void 0,maximumVisibleTs:"0000000000.000000",timestamps:[],loadNewerReplies:d.a,theme:"light"}),KB=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return u()(t,e),o()(t,[{key:"onClick",value:function(){var e=this.props,t=e.channelId,n=e.threadTs;(0,e.loadNewerReplies)(t,n)}},{key:"render",value:function(){var e=this.props,t=e.maximumVisibleTs,n=e.timestamps,a="dense"===e.theme,r=n.filter(function(e){return e>t});if(!r.length)return null;var i=WB.t("{count, plural, =1 {# new reply} other {# new replies}}",{count:r.length}),o=f()("p_threads_view_load_newer_button",{"p_threads_view_load_newer_button--with-gutter":a});return m.a.createElement(OB,null,m.a.createElement("div",{className:o},m.a.createElement("span",{className:"p_threads_view_load_newer_button__blue_dot"},"\u2022"),m.a.createElement(la.a,{onClick:this.onClick},i)))}}]),t}(p.Component);KB.displayName="LoadNewerButton",KB.defaultProps=GB;var VB=Object(g.b)(function(e,t){var n=t.channelId,a=t.threadTs,r=Object(Pn.c)(n,a);return{timestamps:(Object($e.h)(e,r)||{timestamps:[]}).timestamps}})(KB),zB=n("WFc3"),YB=(n("t5GV"),new B.b("threads")),QB=(h.b.string.isRequired,h.b.string.isRequired,h.b.string,h.b.func,h.b.func,h.b.func,h.b.string,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.number,h.b.func,h.b.bool.isRequired,h.b.func,h.b.func,h.b.func,{channelType:"channel",prepareAndSendMessage:function(){return Promise.resolve()},legacySendSlashCommand:d.a,editLastMessageInChannel:d.a,viewContext:void 0,useSendButton:!1,focusInputOnMount:!1,featureSonicInputs:!0,featureWysiwygComposer:!1,enableStickyComposer:!1,replyCount:0,clogThreadEvent:d.a,onFocus:d.a,onUpArrow:d.a,onDownArrow:d.a}),XB=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.inputRef=m.a.createRef(),n.reactionPopoverRef=m.a.createRef(),n.state={hasEnteredText:!1,hasFocus:!1,broadcast:!1,broadcastControlsHeight:0},Object(Kt.a)(n,["onBroadcastChange","onBroadcastControlsMouseDown","onTextChange","onFocus","onBlur","sendMessage","editLastMessage","onExpandAnimationTick","onExpandAnimationEnd","handleDraftRestore"]),n.getAdditionalDraftContent=Object(Gn.a)(function(e){return{broadcast:e}}),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.channelId,a=t.threadTs,r=t.viewContext;if(!Object(ae.a)()&&this.inputRef.current){var i=Object(PN.c)(n,a);i&&this.inputRef.current.getWrappedInstance().value(i)}Object(Ci.c)({viewContext:r,channelId:n,threadTs:a,functions:{clear:function(){var t=e.getInputRef();t&&t.clear()},isEmpty:function(){var t=e.getInputRef();return t?t.isEmpty():null},prependContents:function(t){var n=e.getInputRef();n&&n.prependContents(t)},setContents:function(t){var n=e.getInputRef();n&&n.setContents(t)},getContents:function(){var t=e.getInputRef();return t?t.getContents():null},setText:function(t){var n=e.getInputRef();n&&n.value(t)},getText:function(){var t=e.getInputRef();return t?t.value():null},getDisplayValue:function(){var t=e.getInputRef();return t?t.displayValue():null},setBroadcast:function(t){return e.setState(function(){return{broadcast:t}})},getBroadcast:function(){return e.state.broadcast},focus:function(){var t=e.getInputRef();t&&t.setCursorAtEnd()},clearHistory:function(){var t=e.getInputRef();t&&t.clearHistory()},setCursorAtEnd:function(){var t=e.getInputRef();t&&t.setCursorAtEnd()},getContentsForCurrentSelection:function(){var t=e.getInputRef();if(!t)return null;var n=t.getSelection();return n?t.getContentsForRange(n.index,n.length):null},openReactionPopoverForLastMessage:function(){e.reactionPopoverRef.current&&e.reactionPopoverRef.current.getWrappedInstance().startReactionPopoverForLastMessage()},isCursorAtBeginning:function(){var t=e.getInputRef();if(!t)return!1;var n=t.getSelection();return n&&0===n.index},isCursorAtEnd:function(){var t=e.getInputRef();if(!t)return!1;var n=t.getSelection();return n&&n.index===t.getLength()},setCursor:function(t,n){var a=e.getInputRef();a&&a.setCursor(t,n)}}})}},{key:"componentDidUpdate",value:function(e,t){var n=this.state.hasFocus||this.state.hasEnteredText,a=t.hasFocus||t.hasEnteredText;n&&!a?this.startExpandAnimation(0,40):!n&&a&&this.startExpandAnimation(40,0)}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.channelId,n=e.threadTs,a=e.viewContext;Object(Ci.d)({viewContext:a,channelId:t,threadTs:n}),this.expandAnimation&&this.expandAnimation.cancel()}},{key:"onBroadcastChange",value:function(e){var t=e.target.checked;this.setState(function(){return{broadcast:!!t}}),this.state.hasEnteredText||(this.inputRef.current.getWrappedInstance().focus(),this.preventUnfocus=!1)}},{key:"onBroadcastControlsMouseDown",value:function(e){e.preventDefault(),this.state.hasEnteredText||(this.preventUnfocus=!0)}},{key:"onTextChange",value:function(e){this.setState(function(){return{hasEnteredText:!!e}});var t=this.props,n=t.channelId,a=t.threadTs;Object(ae.a)()||Object(PN.g)(n,a,e)}},{key:"onFocus",value:function(){this.setState(function(){return{hasFocus:!0}})}},{key:"onBlur",value:function(){this.preventUnfocus?this.preventUnfocus=!1:this.setState(function(){return{hasFocus:!1}})}},{key:"onExpandAnimationTick",value:function(e){var t=e.value,n=e.nextTick;this.setState(function(){return{broadcastControlsHeight:t}},n)}},{key:"onExpandAnimationEnd",value:function(){this.expandAnimation=null}},{key:"getInputRef",value:function(){return this.inputRef.current.getWrappedInstance?this.inputRef.current.getWrappedInstance():this.inputRef.current}},{key:"handleDraftRestore",value:function(e){this.setState(function(t){var n=t.broadcastControlsHeight;return{broadcast:!!e.broadcast,broadcastControlsHeight:e.ops?40:n}})}},{key:"startExpandAnimation",value:function(e,t){this.state.broadcastControlsHeight!==t&&(this.expandAnimation&&this.expandAnimation.cancel(),this.expandAnimation=Object(UA.a)({fromValue:e,toValue:t,duration:150,easing:"easeInOutQuad",onTick:this.onExpandAnimationTick,onComplete:this.onExpandAnimationEnd}))}},{key:"editLastMessage",value:function(){this.props.editLastMessageInChannel({channelId:this.props.channelId,threadTs:this.props.threadTs,viewContext:this.props.viewContext})}},{key:"sendMessage",value:function(){var e=this,t=this.props,n=t.channelId,a=t.threadTs,r=t.replyCount,i=t.clogThreadEvent,o=t.featureSonicInputs,s=t.featureWysiwygComposer,l=this.state.broadcast;this.setState(function(){return{broadcast:!1}});var c=this.getInputRef(),u=c.value();if(!o&&Object(zB.a)(u))return c.clear(),this.props.legacySendSlashCommand(n,a,u),Promise.resolve();if(!Object(wD.a)(c.getContents(),{featureWysiwygComposer:s}))return null;i({event:l?"THREADS_REPLY_BROADCAST_CLICKED":"THREADS_REPLY",metadata:{num_msg_in_thread:r+1}});var d=c.getContents();return c.clear(),c.focus(),this.props.prepareAndSendMessage({channelId:n,text:u,delta:s?new zt.a(d.contents):null,replyToTs:a,shouldBroadcast:l}).then(function(){var t=e.getInputRef();t&&t.clearHistory()}).catch(function(){c.isEmpty()&&c.setContents(d)})}},{key:"render",value:function(){var e=this.props,t=e.channelId,n=e.threadTs,a=e.viewContext,r=e.channelType,i=e.useSendButton,o=e.focusInputOnMount,s=e.userCanPost,l=e.featureSonicInputs,c=e.onFocus,u=e.featureWysiwygComposer,d=e.enableStickyComposer,p=this.state,h=p.broadcast,b=p.hasEnteredText,g=p.hasFocus,_=p.broadcastControlsHeight,v=b||g,y=f()("p-threads_footer__broadcast_controls",{"p-threads_footer__broadcast_controls--visible":v}),k={height:_},O="";O="mpim"===r?YB.t("Also send to the group"):"im"===r?YB.t("Also send as direct message"):YB.rt("Also send to <span></span>",null,function(){return m.a.createElement(Yp.a,{channelId:t,inline:!0,className:"p-threads_footer__broadcast_channel"})});var C="";C="mpim"===r||"im"===r?YB.t("Choose this if you\u2019d like your reply to post in the main conversation, too"):YB.t("Choose this if you\u2019d like your reply to post in the channel, too");var E="p-thread_footer__broadcast_checkbox--"+Object(Pn.c)(t,n)+"--"+a,j=f()("p-threads_footer__input",{"p-threads_footer__input--legacy":!l}),S=m.a.createElement(Ji,{key:"wysiwyg_"+u,className:j,channelId:t,threadTs:n,viewContext:a,placeholder:YB.t("Reply\u2026",{fallbackHash:"fefcf598b8ea8332c1557b2ee245e83e5c8b0aef"}),enableEmojiButton:!0,enableComposerButton:u,enableSendButton:!1,enableBroadcastKeywords:!1,onTextChange:this.onTextChange,onFocus:this.onFocus,onBlur:this.onBlur,sendMessage:this.sendMessage,editLastMessage:this.editLastMessage,ref:this.inputRef,useLegacyCreate:!l,useLegacyDrafts:!Object(ae.a)(),maxLines:8,useSendButton:i,focusOnMount:o,maxLength:u?Ca.C:Ca.B,onDraftRestore:this.handleDraftRestore,additionalDraftContent:this.getAdditionalDraftContent(h),onUpArrow:this.props.onUpArrow,onDownArrow:this.props.onDownArrow});Object(ae.a)()&&(S=m.a.createElement(SD,{ref:this.reactionPopoverRef,channelId:t,threadTs:n},S));var I=f()("p-threads_footer__input_container",{"p-threads_footer__input_container--sticky_composer":u&&d});return m.a.createElement("div",{className:I,"data-qa":"reply_container",onFocus:c},S,m.a.createElement("div",{className:y,style:k},m.a.createElement("div",{className:"p-threads_footer__broadcast_controls_inner"},s&&m.a.createElement(m.a.Fragment,null,m.a.createElement(ja.a,{className:"p-threads_footer__broadcast_label",text:O,htmlFor:E,type:"inline",onMouseDown:this.onBroadcastControlsMouseDown},m.a.createElement(Sa.a,{className:"p-threads_footer__broadcast_checkbox",id:E,checked:h,onChange:this.onBroadcastChange,"data-qa":"threads_footer_broadcast_checkbox",disabled:!v})),m.a.createElement(qi.c,{tip:C},m.a.createElement(ta.b,{className:"p-threads_footer__info_tooltip",type:"question_circle",inline:!0,size:"inherit"}))),m.a.createElement(Xi,{isDisabled:!b,className:"p-threads_footer__send_button",sendMessage:this.sendMessage,buttonSize:"small",tabIndex:0}))))}}]),t}(p.Component);XB.displayName="InputContainer",XB.defaultProps=QB;var JB={prepareAndSendMessage:function(){return Wr.a.apply(void 0,arguments)},editLastMessageInChannel:function(){return _D.apply(void 0,arguments)},legacySendSlashCommand:function(e,t,n){return function(a,r){var i=r(),o=Object(G.e)(i,e),s=Object(Ze.a)(i,e,t);o&&s&&Object(jd.k)(o,n,s)}}},ZB=Object(g.b)(function(e,t){var n=t.channelId,a=t.threadTs,r=Object(G.e)(e,n),i=Object(Ze.a)(e,n,a);return{channelType:Object(K.v)(r),featureSonicInputs:Object(y.m)(e,"feature_sonic_inputs"),featureWysiwygComposer:Object(lt.a)(e),enableStickyComposer:Object(Zt.j)(e,"msg_input_sticky_composer"),useSendButton:Object(Zt.j)(e,"msg_input_send_btn"),replyCount:Object(et.S)(i),userCanPost:Object(Bb.p)(e,n)}},JB)(XB),$B=(n("fxy3"),new B.b("threads")),eq=(h.b.string.isRequired,h.b.object,h.b.string.isRequired,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.func,h.b.bool,h.b.string,h.b.func,h.b.func,h.b.func,h.b.func,{channel:void 0,unknown:!1,archived:!1,frozen:!1,imWithDeletedMember:!1,cannotReply:!1,nonMember:!1,canJoin:!1,focusInputOnMount:!0,joinConversationApi:d.a,featureAnnounceOnly:!1,viewContext:void 0,clogThreadEvent:d.a,onFocus:d.a,onUpArrow:d.a,onDownArrow:d.a}),tq=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.joinChannel=n.joinChannel.bind(n),n.onUpArrow=n.onUpArrow.bind(n),n.onDownArrow=n.onDownArrow.bind(n),n}return u()(t,e),o()(t,[{key:"onUpArrow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.props,n=t.channelId,a=t.threadTs;this.props.onUpArrow({cmd:e,channelId:n,threadTs:a})}},{key:"onDownArrow",value:function(){var e=this.props,t=e.channelId,n=e.threadTs;this.props.onDownArrow({channelId:t,threadTs:n})}},{key:"joinChannel",value:function(){var e=this.props.channelId;this.props.joinConversationApi({channelId:e})}},{key:"render",value:function(){var e=this.props,t=e.channel,n=e.channelId,a=e.threadTs,r=e.unknown,i=e.archived,o=e.frozen,s=e.imWithDeletedMember,l=e.cannotReply,c=e.nonMember,u=e.canJoin,d=e.focusInputOnMount,p=e.featureAnnounceOnly,h=e.viewContext,b=e.clogThreadEvent,f=e.onFocus;if(r||s&&!o)return null;if(i||o){var g="";return g=o?Object(K.hb)(t)?$B.t("Your two organizations are no longer connected."):Object(K.pb)(t)?$B.t("These organizations are no longer connected."):$B.t("This channel is no longer shared with your organization."):$B.t("You are viewing a thread from an archived channel"),m.a.createElement(Fb.a,{level:"default",type:"inline",align:"center",className:"p-threads_footer_alert p-threads_footer_alert--archived"},g)}if(p&&l){var _=$B.t("Posting to this thread has been restricted to select members");return m.a.createElement(HU,{tooltip:_,featureAnnounceOnly:p})}return l?m.a.createElement(Fb.a,{level:"default",type:"inline",align:"center",className:"p-threads_footer_alert p-threads_footer_alert--no_reply"},$B.rt("Your Workspace Owners have limited who can post to <ChannelName></ChannelName>",null,function(){return m.a.createElement(Yp.a,{channelId:n,inline:!0,iconProps:{inherit:!0}})})):c?u?m.a.createElement("div",{className:"p-threads_footer_join_container"},m.a.createElement(_e.d,{type:"primary",size:"medium",onClick:this.joinChannel},$B.t("Join Channel")),!p&&m.a.createElement("p",{className:"p-threads_footer_join_label"},$B.rt("You\u2019ll need to join <ChannelName></ChannelName> to reply",null,function(){return m.a.createElement(Yp.a,{channelId:n,inline:!0,iconProps:{inherit:!0}})}))):null:m.a.createElement(ZB,{channelId:n,threadTs:a,key:Object(Pn.c)(n,a),focusInputOnMount:d,viewContext:h,clogThreadEvent:b,onFocus:f,onUpArrow:this.onUpArrow,onDownArrow:this.onDownArrow})}}]),t}(p.Component);tq.displayName="ThreadFooter",tq.defaultProps=eq;var nq=Object(g.b)(function(e,t){var n=t.channelId,a=Object(G.e)(e,n);return{unknown:Object(K.Nb)(a),archived:Object(K.X)(a),frozen:Object(K.db)(a),imWithDeletedMember:Object(K.mb)(e,a),cannotReply:!Object(K.l)(e,a),nonMember:Object(K.Cb)(a)&&!Object(K.nb)(a),canJoin:Object(Bb.f)(e,n),featureAnnounceOnly:Object(y.m)(e,"feature_announce_only"),channel:a}},{joinConversationApi:Fo.joinConversationApi})(tq);function aq(e){return m.a.createElement(OB,{last:!0},m.a.createElement("div",{className:"p-threads_view__footer"},m.a.createElement(nq,e)))}aq.displayName="Footer";var rq=aq,iq=n("81nI"),oq=new B.b("threads");function sq(){var e=Object(Yo.a)(),t=Object(iq.b)({zdLocale:e,articleId:"115000769927"});return m.a.createElement("div",{className:"p-threads_view_empty"},m.a.createElement("div",{className:"p-threads_view_empty__contents"},m.a.createElement("div",{className:"p-threads_view_empty__emoji"},m.a.createElement(Gs.b,{text:":seedling:",emojiSize:Gs.a.LARGE})),m.a.createElement("p",{className:"p-threads_view_empty__header"},oq.t("Tend to your threads")),m.a.createElement("p",{className:"p-threads_view_empty__message"},oq.t("Threads you\u2019re involved in will be collected right here.")," ",m.a.createElement("br",null),m.a.createElement(la.a,{href:t},oq.t("Learn about threads")))))}sq.displayName="ThreadsEmptyState";var lq=sq,cq=(h.b.string,h.b.string,h.b.bool,{className:void 0,label:void 0,showSpinner:!1}),uq=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.label,a=e.showSpinner;return m.a.createElement("div",{className:t},m.a.createElement("div",{className:"p-threads_view__divider_line"}),m.a.createElement("div",{className:"p-threads_view__divider_label"},a&&m.a.createElement(ci.a,{color:"blue",size:"medium",className:"p-threads_view__divider_spinner"}),n))}}]),t}(p.PureComponent);uq.displayName="Divider";var dq=uq;uq.defaultProps=cq;var pq=new B.b("threads"),mq=(h.b.bool,function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props.slowLoadingMore;return m.a.createElement("div",{className:"p-threads_view__loading_more_threads"},e?pq.t("Still loading... sorry for the long wait!"):pq.t("Loading more messages...",{fallbackHash:"49f93cf64ea9ce3b4fee3f46ee40103e4840b333",fallbackHashNs:"unread"}))}}]),t}(p.PureComponent));mq.displayName="LoadingMoreThreadsIndicator";var hq=mq;mq.defaultProps={slowLoadingMore:!1};var bq=new B.b("threads"),fq=(h.b.number,h.b.bool,h.b.func,{totalNewThreads:0,userHasUnreadThreads:!1,onClick:d.a}),gq=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return u()(t,e),o()(t,[{key:"onClick",value:function(){this.props.onClick()}},{key:"render",value:function(){var e=this.props,t=e.totalNewThreads,n=e.userHasUnreadThreads;if(!t)return null;if(!n)return null;var a=bq.rt('{totalNewThreads,plural,=1{{totalNewThreads} new thread}other{{totalNewThreads} new threads}} <span className="p-new_threads_banner__cta">Click to refresh</span>',{totalNewThreads:t});return m.a.createElement(_e.c,{className:"p-new_threads_banner p-message_pane__banner",onClick:this.onClick},a)}}]),t}(p.Component);gq.displayName="NewThreadsBanner",gq.defaultProps=fq;var _q=Object(g.b)(function(e){return{totalNewThreads:Object(HI.i)(e),userHasUnreadThreads:Object(y.m)(e,"feature_incremental_unread_counts")?Object(te.j)(e):Object(ee.c)(e)}})(gq),vq=(n("NPry"),new B.b("threads")),yq=yp(SB),kq=yp(LB),Oq={threadKey:h.b.string,channelId:h.b.string,threadTs:h.b.string,reachedStart:h.b.bool,timestamps:h.b.arrayOf(h.b.string),messages:h.b.objectOf(h.b.object),lastRead:h.b.string,subscribed:h.b.bool,maxMarkableTs:h.b.string},Cq=(h.b.string,h.b.arrayOf(h.b.shape(Oq)),h.b.bool,h.b.bool,h.b.string,h.b.string,h.b.string,h.b.func,h.b.func,h.b.func,h.b.shape({error:h.b.func,info:h.b.func}),h.b.func,h.b.func,h.b.func,h.b.bool,h.b.oneOf(["light","dense"]),h.b.func,h.b.func,h.b.object,h.b.number,h.b.func,h.b.string,h.b.func,h.b.number,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.func,h.b.bool,h.b.func,h.b.func,h.b.func,h.b.oneOf(["light","dark"]),h.b.string,{teamId:void 0,threads:void 0,threadsPresent:!1,hasMore:!0,refreshId:void 0,cursorTs:void 0,currentUserId:void 0,refreshThreads:d.a,loadMoreThreads:d.a,truncateThreads:d.a,logger:{error:d.a,info:d.a},requestReplies:d.a,markThread:d.a,markAllThreads:d.a,featureAriaApplicationMode:!1,theme:"light",makeMessageSummary:d.a,clearTotalNewThreads:d.a,clogger:{track:d.a},allThreadsRefreshCount:void 0,showThreadOrRefresh:d.a,focusRequestedThreadKey:void 0,setFocusRequestedThreadKey:d.a,totalUnreadReplies:void 0,featureOfflineMode:!1,isOffline:!1,userAttentionIsOnChat:!1,composerVisible:!1,hasReceivedThreadedMessage:!0,setUserPrefByApi:d.a,removeFromSectionNavigation:d.a,addToSectionNavigation:d.a,setInitialActiveSection:d.a,clientTheme:"light",featureMessageNavigationShortcuts:!1,impressionLoggingWebGroup:"control"}),Eq=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["fetchAround","fetchPre","fetchPost","renderRow","loadOlderReplies","loadNewerReplies","tryAgain","getPropsForItem","isFocusableItem","onKeyDown","reloadThreads","clogThreadEvent","clogThreadCloseEvent","onFocusEnter","onFocusLeave","onItemTabWithin","shouldIgnoreArrowKeys","logError","logInfo","focus","onArrowKeyRight","onItemFocusEnter","onUpArrowInEmptyInput","onDownArrowInEmptyInput","onListScroll"]),n.state={minimumVisibleTsByThread:{},maximumVisibleTsByThread:{},initialLastReadByThread:{},currentRefreshId:void 0,firstReadThreadKey:void 0,threadKeysOrdered:[],isDoingGlobalRefresh:!0,slowLoadingMore:!1,errored:!1,hasKeyboardFocus:!1},n.pendingPromises=[],n.threadsEventSeqId=0,n.initializedTime=Date.now(),n.clogThreadCloseHasBeenCalled=!1,n.onListScrolledDebounce=Object(ap.a)(n.onListScroll,150),n.listRef=m.a.createRef(),n.attachMessageImpressionLogger(e.teamId,e.impressionLoggingWebGroup,e.clogger),n}return u()(t,e),o()(t,null,[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.threads,a=e.currentUserId,r=e.refreshId,i=e.logger,o=t.minimumVisibleTsByThread,s=t.maximumVisibleTsByThread,l=t.initialLastReadByThread,c=t.firstReadThreadKey,u=t.threadKeysOrdered;if(r!==t.currentRefreshId&&(o={},s={},l={},c=null,u=[]),Object(ls.a)(u)){var d=function(e){var t=Object(aa.a)(e,"subscribed");return Object(Jm.a)(t,function(e){return(e.maxMarkableTs>e.lastRead?1:0)+"-"+e.maxMarkableTs}).reverse()}(n);if(u=Object(ft.a)(d,"threadKey"),t.currentRefreshId){var p=Object(ft.a)(n,"threadKey");Object(Ox.a)(u,p)||i.error("THREADS-VIEW","Thread order different after refreshing: "+u+" - "+p)}}if(!c){var m=Object(qN.a)(n,"threadKey");c=Object(Dd.a)(u,function(e){return m[e].maxMarkableTs<=m[e].lastRead})}var h={};n.forEach(function(e){if(!o[e.threadKey]){var t=hB(e);h[e.threadKey]=t}});var b={};n.forEach(function(e){var t=s[e.threadKey];if(t){e.messages[t]||(t=Object(lA.a)(e.timestamps,function(e){return e<t}),b[e.threadKey]=t);var n=Object(aa.a)(e.timestamps,function(e){return e>t}),r=Object(Fd.a)(n,function(t){var n=e.messages[t];return n&&n.user===a}),i=Object(Fd.a)(n,function(t){var n=e.messages[t];return Object(et.bb)(n)});if(!r&&!i)return}var o=pB(e);b[e.threadKey]=o});var f={};return n.forEach(function(e){l[e.threadKey]||(f[e.threadKey]=e.lastRead)}),Object(ls.a)(h)&&Object(ls.a)(b)&&Object(ls.a)(f)&&r===t.currentRefreshId&&c===t.firstReadThreadKey&&(u===t.threadKeysOrdered||Object(Ox.a)(u,t.threadKeysOrdered))?null:ye()({},t,{currentRefreshId:r,firstReadThreadKey:c,threadKeysOrdered:u,minimumVisibleTsByThread:ye()({},o,h),maximumVisibleTsByThread:ye()({},s,b),initialLastReadByThread:ye()({},l,f)})}}]),o()(t,[{key:"componentDidMount",value:function(){this.logInfo("mounting"),this.clogThreadEvent({event:"THREADS_VIEW_OPEN"}),this.loadThreads(),this.props.hasReceivedThreadedMessage||this.props.setUserPrefByApi({pref:"has_received_threaded_message",value:!0})}},{key:"shouldComponentUpdate",value:function(e,t){if(!Object(ub.a)(this.state,t))return!0;var n=this.props,a=n.threads,r=Ep()(n,["threads"]),i=e.threads,o=Ep()(e,["threads"]);if(!Object(ub.a)(r,o))return!0;return!Object(ub.a)(a,i,3)}},{key:"componentDidUpdate",value:function(e){var t={prevUserAttentionIsOnChat:e.userAttentionIsOnChat,prevComposerVisible:e.composerVisible,currentUserAttentionIsOnChat:this.props.userAttentionIsOnChat,currentComposerVisible:this.props.composerVisible};Object(Up.a)(t)&&this.props.addToSectionNavigation(),Object(Bp.a)(t)&&this.props.removeFromSectionNavigation(),e.allThreadsRefreshCount<this.props.allThreadsRefreshCount&&!1===this.loading&&this.reloadThreads(),e.refreshId!==this.props.refreshId&&Object(mt.a)(this.nextScrollTop)&&this.listRef.current&&(this.listRef.current.scrollToOffset(this.nextScrollTop),this.nextScrollTop=null),e.teamId!==this.props.teamId&&this.attachMessageImpressionLogger(this.props.teamId,this.props.impressionLoggingWebGroup,this.props.clogger)}},{key:"componentWillUnmount",value:function(){this.logInfo("unmounting"),this.clogThreadCloseEvent("OTHER"),this.pendingPromises.forEach(function(e){return e.cancel()}),this.props.truncateThreads(),this.messageImpressionLogger.flushAllVisibleMessages()}},{key:"onFocusEnter",value:function(e){var t=this;this.setState(function(){return{hasKeyboardFocus:e.isKeyboardFocus}},function(){var e=t.props.focusRequestedThreadKey,n=t.listRef.current;if(n&&e){var a=n.getActiveItem(),r=t.threadKeyForListKey(a);e&&r===e&&(t.logInfo("Focused "+e),t.props.setFocusRequestedThreadKey(null))}})}},{key:"onFocusLeave",value:function(){this.setState(function(){return{hasKeyboardFocus:!1}})}},{key:"onItemFocusEnter",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).id;if(this.props.featureMessageNavigationShortcuts&&e){var t=this.rows[this.keys.indexOf(e)];t&&"footer"===t.type&&this.focusInput({channelId:t.channelId,threadTs:t.threadTs})}}},{key:"onUpArrowInEmptyInput",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.cmd,n=void 0!==t&&t,a=e.channelId,r=e.threadTs;if(this.props.featureMessageNavigationShortcuts&&!n&&a&&r){var i=Object(Pn.c)(a,r);i&&this.focusItemAboveInput(i)}}},{key:"onDownArrowInEmptyInput",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channelId,n=e.threadTs;if(this.props.featureMessageNavigationShortcuts&&t&&n){var a=Object(Pn.c)(t,n);a&&this.focusItemBelowInput(a)}}},{key:"onKeyDown",value:function(e){if(!Object(Sd.a)(document.activeElement)&&Object(QD.a)(e)){var t=this.getKeyboardFocusedThreadKey();if(t){var n=Object(Pn.a)(t),a=n.channelId,r=n.threadTs;this.focusInput({channelId:a,threadTs:r})}}}},{key:"onArrowKeyRight",value:function(){var e=this.getKeyboardFocusedThreadKey(),t=Object(Pn.a)(e),n=t.channelId,a=t.threadTs;n&&a&&(this.props.showThreadOrRefresh({channelId:n,threadTs:a,requestFocus:!0}),this.blur())}},{key:"onItemTabWithin",value:function(){this.props.setInitialActiveSection()}},{key:"onListScroll",value:function(){var e=this.listRef.current.getVisibleRange(void 0,!0),t=e.start,n=e.end,a=this.rows.slice(t,n).filter(function(e){return["root","reply"].includes(e.type)}).map(function(e){return{ts:"root"===e.type?e.threadTs:e.ts,channel:e.channelId}});try{this.messageImpressionLogger.setCurrentlyVisibleMessages(a)}catch(e){this.props.logger.error("threads_view_unable_log_message_impressions","Threads View unable to log message impressions",e)}}},{key:"getKeyboardFocusedThreadKey",value:function(){var e=this.listRef.current;if(!e)return null;var t=e.getInitialActiveItem();return this.threadKeyForListKey(t)}},{key:"getPropsForItem",value:function(e){var t=e.index;if(this.props.makeMessageSummary){var n=this.rows[t];if(n&&n.type&&("root"===n.type||"reply"===n.type)){var a="root"===n.type?n.threadTs:n.ts;return{"aria-label":this.props.makeMessageSummary({channelId:n.channelId,ts:a,hasFocus:this.state.hasKeyboardFocus,day:{ts:a,isFirstDay:!1,isLastDay:!1},viewContext:Ca.H.THREADS_VIEW})}}}}},{key:"focusItemAboveInput",value:function(e){if(e){var t=this.keys[this.keys.indexOf("footer-"+e)-1];t&&this.listRef.current&&this.listRef.current.focusOnKey(t)}}},{key:"focusItemBelowInput",value:function(e){if(e){var t=this.keys[this.keys.indexOf("footer-"+e)+1];t&&this.listRef.current&&this.listRef.current.focusOnKey(t)}}},{key:"focusInput",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channelId,n=e.threadTs;if(t&&n){var a=Object(Ci.a)({viewContext:Ca.H.THREADS_VIEW,channelId:t,threadTs:n});if(a){var r=function(){a.focus()};Object(Yo.c)()?setTimeout(r,0):r()}}}},{key:"attachMessageImpressionLogger",value:function(e,t,n){if(this.messageImpressionLogger)try{this.messageImpressionLogger.flushAllVisibleMessages()}catch(e){this.props.logger.error("threads_view_unable_log_message_impressions","Threads View unable to log message impressions",e)}this.messageImpressionLogger=new rp({teamId:e,experimentGroup:t,clogger:n,messageViewLocation:lp})}},{key:"shouldIgnoreArrowKeys",value:function(e){return!!Object(Sd.a)(e.target)||!this.state.hasKeyboardFocus}},{key:"threadKeyForListKey",value:function(e){if(!e)return null;var t=this.keys.indexOf(e),n=this.rows[t];return n?n.threadKey:null}},{key:"focus",value:function(){var e=this.listRef.current;e&&e.focus()}},{key:"blur",value:function(){var e=this.listRef.current;e&&e.blur()}},{key:"isFocusableItem",value:function(e){var t=e.index,n=this.rows[t];if(!n)return!1;var a=["root","reply","heading","load_older","load_newer"];return this.props.featureMessageNavigationShortcuts&&a.push("footer"),Object(fs.a)(a,n.type)}},{key:"clogThreadCloseEvent",value:function(e){if(!this.clogThreadCloseHasBeenCalled){var t={view_session_elapsed_time:Date.now()-this.initializedTime,view_session_index:this.threadsEventSeqId,num_threads_loaded:this.props.threads.length,view_exit_event:e};this.clogThreadEvent({event:"THREADS_VIEW_CLOSE",metadata:t}),this.clogThreadCloseHasBeenCalled=!0}}},{key:"incrementTrackingSeqId",value:function(){this.threadsEventSeqId+=1}},{key:"clogThreadEvent",value:function(e){var t=e.event,n=e.metadata;this.props.clogger.track(t,ye()({is_threads_view:1,is_flexpane:0,view_session_index:this.threadsEventSeqId},n)),this.incrementTrackingSeqId()}},{key:"componentDidCatch",value:function(e){this.setState(function(){return{errored:!0}}),this.logError("Threads view componentDidCatch"),this.props.logger.error("THREADS-VIEW",e,"threads_view_did_catch")}},{key:"loadThreads",value:function(){var e=this;if(this.loading&&this.logError("Unexpectedly already loading"),this.props.refreshThreads){this.loading=!0;var t=this.props.refreshThreads({limit:8,refreshId:"threads-view-refresh-"+Date.now()}).then(function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).maxTs;e.listRef&&e.listRef.current&&(e.nextScrollTop=e.listRef.current.getScrollTop()),t?(e.logInfo("marking all: "+t),e.props.markAllThreads({maxTs:t})):e.logInfo("no threads to mark"),e.setState(function(){return{isDoingGlobalRefresh:!1,errored:!1}})}).catch(function(t){e.setState(function(){return{errored:!0}}),e.logError("refreshThreads caught error"),e.props.logger.error("THREADS-VIEW",t,"threads_view_loading_error")}).finally(function(){e.loading=!1,Object(lT.a)(e.pendingPromises,t)});this.pendingPromises.push(t)}}},{key:"reloadThreads",value:function(){var e=this;this.logInfo("Reloading threads"),this.setState(function(){return{currentRefreshId:null}},function(){e.listRef&&e.listRef.current&&e.listRef.current.scrollToOffset(0),e.props.clearTotalNewThreads(),e.loadThreads()})}},{key:"tryAgain",value:function(){var e=this;this.setState(function(e){return ye()({},e,{errored:!1})},function(){return e.loadThreads()})}},{key:"loadOlderReplies",value:function(e,t){var n=this,a=Object(Pn.c)(e,t),r=Object(Dd.a)(this.props.threads,{threadKey:a});if(!r)return this.logError("Could not find "+a+" in loadOlderReplies"),Promise.resolve();this.logInfo("Loading older replies in "+a);var i=r.timestamps,o=this.state.minimumVisibleTsByThread[r.threadKey],s=Object(aa.a)(i,function(e){return e<o&&e!==t});if(s.length>=100)return this.setState(function(e){return ye()({},e,{minimumVisibleTsByThread:ye()({},e.minimumVisibleTsByThread,fe()({},a,Object(_b.a)(Object(lB.a)(s,100))))})}),Promise.resolve();if(r.reachedStart)return this.setState(function(e){return ye()({},e,{minimumVisibleTsByThread:ye()({},e.minimumVisibleTsByThread,fe()({},a,"0000000000.000000"))})}),Promise.resolve();var l=this.props.requestReplies({channelId:e,threadTs:t,latest:Object(_b.a)(i),limit:100}).then(function(e){var t=e.msgs,r=Object(_b.a)(Object(lB.a)(t,100-s.length));n.setState(function(e){return ye()({},e,{minimumVisibleTsByThread:ye()({},e.minimumVisibleTsByThread,fe()({},a,r.ts))})})}).finally(function(){Object(lT.a)(n.pendingPromises,l)});return this.pendingPromises.push(l),l}},{key:"loadNewerReplies",value:function(e,t){var n=this,a=Object(Pn.c)(e,t),r=Object(Dd.a)(this.props.threads,{threadKey:a});r?this.setState(function(e){return ye()({},e,{maximumVisibleTsByThread:ye()({},e.maximumVisibleTsByThread,fe()({},a,pB(r)))})},function(){n.logInfo("Marking "+a+" to "+r.maxMarkableTs),n.props.markThread({channelId:e,ts:t,lastRead:r.maxMarkableTs,reason:"mark-thread-as-read-from-threads-view"})}):this.logError("Could not find "+a+" in loadNewerReplies")}},{key:"fetchAround",value:function(){return!1}},{key:"fetchPre",value:function(){return!1}},{key:"fetchPost",value:function(){var e=this,t=this.props,n=t.threads,a=t.hasMore,r=t.cursorTs;if(this.loading||!a||!n||!n.length||!r)return!1;var i=setTimeout(function(){e.setState(function(e){return ye()({},e,{slowLoadingMore:!0})})},Ca.V);this.loading=!0,this.logInfo("Loading more from "+r);var o=this.props.loadMoreThreads({currentTs:r,limit:8}).then(function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).threads;n&&e.setState(function(e){var n=Object(ft.a)(t,"threadKey");return{threadKeysOrdered:Object(dt.a)([].concat(ti()(e.threadKeysOrdered),ti()(n)))}})}).finally(function(){var t=e.state.slowLoadingMore;e.loading=!1,Object(lT.a)(e.pendingPromises,o),clearTimeout(i),t&&e.setState(function(e){return ye()({},e,{slowLoadingMore:!1})})});return this.pendingPromises.push(o),o}},{key:"determineFocusItemForRender",value:function(e,t){var n=this.props.focusRequestedThreadKey;if(n)return"root-"+n;var a=this.listRef.current;if(!a)return null;var r=a.getInitialActiveItem();if(!r)return null;if((Object(Ld.a)(r,"load_older-")||Object(Ld.a)(r,"load_newer-"))&&!Object(fs.a)(t,r)){var i=e.indexOf(r);if(-1===i)return null;var o=e[i-1],s=t.indexOf(o);if(-1===s)return null;var l=t[s+1];if(l)return l}return null}},{key:"logInfo",value:function(e){this.props.logger.info("THREADS-VIEW",e)}},{key:"logError",value:function(e){this.props.logger.error("THREADS-VIEW",e)}},{key:"renderRow",value:function(e,t){var n=t.hasFocus,a=t.itemId,r=this.rows[e],i=this.state,o=i.minimumVisibleTsByThread,s=i.maximumVisibleTsByThread,l=i.slowLoadingMore,c=i.hasKeyboardFocus,u=this.props,d=u.theme,p=u.featureOfflineMode,h=u.isOffline,b=f()("p-threads_view__divider",{"p-threads_view__divider--first":0===e}),g=vq.t("Loading threads\u2026");switch(r.type){case"heading":return m.a.createElement(vB,{channelId:r.channelId,threadTs:r.threadTs,firstItem:0===e,clogLinkClick:this.clogThreadCloseEvent});case"root":return m.a.createElement(yq,{channelId:r.channelId,ts:r.threadTs,theme:d,clogLinkClick:this.clogThreadCloseEvent,focused:n,renderActionsOffscreen:c,clogThreadEvent:this.clogThreadEvent,parentId:a});case"load_older":return m.a.createElement(HB,{messages:r.messages,channelId:r.channelId,threadTs:r.threadTs,minimumVisibleTs:o[r.threadKey],loadOlderReplies:this.loadOlderReplies,theme:d});case"load_newer":return m.a.createElement(VB,{channelId:r.channelId,threadTs:r.threadTs,maximumVisibleTs:s[r.threadKey],loadNewerReplies:this.loadNewerReplies,theme:d});case"reply":return m.a.createElement(kq,{channelId:r.channelId,ts:r.ts,minimumVisibleTs:o[r.threadKey],isNewReply:r.isNewReply,theme:d,focused:n,renderActionsOffscreen:c,clogThreadEvent:this.clogThreadEvent,parentId:a});case"divider":return m.a.createElement(dq,{className:b,label:vq.t("You\u2019re up to date")});case"loading":return m.a.createElement(dq,{className:b,label:g,showSpinner:!0});case"footer":return m.a.createElement(rq,{channelId:r.channelId,threadTs:r.threadTs,focusInputOnMount:!1,viewContext:Ca.H.THREADS_VIEW,clogThreadEvent:this.clogThreadEvent,onUpArrow:this.onUpArrowInEmptyInput,onDownArrow:this.onDownArrowInEmptyInput});case"loading_more_threads":return p&&h?m.a.createElement(Lp,{caption:vq.t("Go online to load more threads.")}):m.a.createElement(hq,{slowLoadingMore:l});default:return this.logError("Unknown row type "+r.type),null}}},{key:"renderTopBanners",value:function(){return m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:"p-threads_view__top_banners"},m.a.createElement(Cs,null),m.a.createElement(Es.a,null,m.a.createElement(Bs,null)),m.a.createElement(_q,{onClick:this.reloadThreads})),m.a.createElement(fd,null))}},{key:"render",value:function(){var e=this,t=this.props,n=t.threads,a=t.threadsPresent,r=t.currentUserId,i=t.hasMore,o=t.featureAriaApplicationMode,s=t.totalUnreadReplies,l=t.featureOfflineMode,c=t.isOffline,u=this.state,d=u.minimumVisibleTsByThread,p=u.maximumVisibleTsByThread,h=u.firstReadThreadKey,b=u.threadKeysOrdered,f=u.isDoingGlobalRefresh,g=u.initialLastReadByThread;if(u.errored)return m.a.createElement(m.a.Fragment,null,this.renderTopBanners(),m.a.createElement("div",{className:"p-threads_view"},m.a.createElement(Ys,{tryAgain:this.tryAgain,"data-qa":"threads_view_error"},vq.t("Something\u2019s fishy! Slack can\u2019t seem to load your threads.")," ",m.a.createElement("br",null),vq.rt("You can try again, but if the problem persists, please <a>drop us a line.</a>",null,function(e){var t=e.text;return m.a.createElement(la.a,{href:"https://slack.com/help/contact"},t)}))));if(l&&c&&!a)return m.a.createElement(m.a.Fragment,null,this.renderTopBanners(),m.a.createElement(yd,{caption:vq.t("Go online to get the latest threads.")}));if(!a)return m.a.createElement(m.a.Fragment,null,this.renderTopBanners(),m.a.createElement(Ws,{clientTheme:this.props.clientTheme}));var _=Object(qN.a)(n,"threadKey"),v=Object(U.a)(Object(ft.a)(b,function(e){return _[e]})),y=this.keys,k=fB({threads:v,minimumVisibleTsByThread:d,maximumVisibleTsByThread:p,firstReadThreadKey:h,isDoingGlobalRefresh:f,currentUserId:r,initialLastReadByThread:g,hasMore:i,logError:this.logError}),O=k.rows,C=k.keys;this.rows=O,this.keys=C;var E=this.determineFocusItemForRender(y,this.keys);if(0===v.length)return m.a.createElement(m.a.Fragment,null,this.renderTopBanners(),m.a.createElement(lq,null));var j=this.keys.filter(function(e){return Object(Ld.a)(e,"footer-")}),S=[{keys:["right"],handler:this.onArrowKeyRight,filter:this.shouldIgnoreArrowKeys}],I=void 0;I=vq.t("Threads"),Object(mt.a)(s)&&(I=vq.t("Threads, {totalUnreadReplies, plural, =0 {no new replies} =1 {# new reply} other {# new replies}}",{totalUnreadReplies:s}));var w=m.a.createElement(Qs.a,{id:Ca.H.THREADS_VIEW},m.a.createElement("div",{className:"p-threads_view",onKeyDown:this.onKeyDown},this.renderTopBanners(),m.a.createElement(ni.a,null,function(t){var n=t.width,a=t.height;return m.a.createElement(ui.a,{id:"threads_view",ref:e.listRef,width:n,height:a,keys:e.keys,rowRenderer:e.renderRow,isFocusableItem:e.isFocusableItem,loadAround:e.fetchAround,loadPre:e.fetchPre,loadPost:e.fetchPost,persistentKeys:j,getPropsForItem:e.getPropsForItem,"aria-label":I,useAriaApplicationMode:o,onFocusEnter:e.onFocusEnter,onFocusLeave:e.onFocusLeave,onScroll:e.onListScrolledDebounce,onItemTabWithin:e.onItemTabWithin,onItemFocusEnter:e.onItemFocusEnter,keyCommands:S,activeItem:E})})));return Object(ae.a)()?w:m.a.createElement(Mp.a,{component:this,order:.1},w)}}]),t}(p.Component);Eq.displayName="ThreadsView",Eq.defaultProps=Cq;var jq=Object(ae.a)()?Object(V.a)(Eq,"ThreadsView",{index:0}):Eq;var Sq=Object(g.b)(function(e){var t=Object(Ct.a)({state:e}),n=Object(re.a)({state:e}),a=Object(HI.e)(e),r=Object(U.a)(Object(ft.a)(a,function(n){var a=n.threadKey,r=Object(Pn.a)(a),i=r.channelId,o=r.threadTs,s=Object(G.e)(e,i);if(!s||Object(Ub.e)(s))return t.warn("Skipping "+a+" in unknown or non-existent channel"),null;if(Object(K.Cb)(s)&&!Object(K.nb)(s))return t.warn("Skipping "+a+" in non-member public channel"),null;var l=Object($e.f)(e,a)||{timestamps:[],reachedStart:!0},c=l.timestamps,u=l.reachedStart,d={},p=Object(Ze.a)(e,i,o);if(!p)return t.warn("Skipping "+a+" with missing root message"),null;d[o]=p,c.forEach(function(t){var n=Object(Ze.a)(e,i,t);n&&(d[t]=n)});var m=Object(cB.d)(e,{channelId:i,ts:o});return{threadKey:a,channelId:i,threadTs:o,reachedStart:u,timestamps:c,messages:d,lastRead:m.lastRead,subscribed:m.subscribed,maxMarkableTs:dB(e,i,c)||o}}));return{logger:t,clogger:n,teamId:Object(v.b)(e),featureAriaApplicationMode:Object(y.m)(e,"feature_aria_application_mode"),threadsPresent:void 0!==a,threads:r,hasMore:Object(HI.g)(e),refreshId:Object(HI.h)(e),cursorTs:Object(HI.f)(e),currentUserId:Object(y.c)(e),theme:Object(Bd.a)(e),allThreadsRefreshCount:Object(HI.c)(e),focusRequestedThreadKey:Object(HI.d)(e),totalUnreadReplies:Object(HI.j)(e),featureOfflineMode:Object(y.m)(e,"feature_offline_mode"),isOffline:!Object(Qt.c)(e),userAttentionIsOnChat:Object(Ed.e)(e),composerVisible:(Object(lt.a)(e)||"composer_toolbar"===Object(Xt.c)(e,"composer_toolbar"))&&Object(Dp.b)(e),hasReceivedThreadedMessage:Object(Zt.j)(e,"has_received_threaded_message"),featureMessageNavigationShortcuts:Object(y.m)(e,"feature_message_navigation_shortcuts"),impressionLoggingWebGroup:Object(Xt.c)(e,"impression_logging_web")}},function(e){return{refreshThreads:function(){return e(HI.o.apply(void 0,arguments))},loadMoreThreads:function(){return e(HI.m.apply(void 0,arguments))},truncateThreads:function(){return e(HI.q.apply(void 0,arguments))},requestReplies:function(){return e(qd.j.apply(void 0,arguments))},clearTotalNewThreads:function(){return e(HI.a.apply(void 0,arguments))},markThread:function(){return e(cB.e.apply(void 0,arguments))},markAllThreads:function(){return e(uB.c.apply(void 0,arguments))},makeMessageSummary:function(){return e(Xd.apply(void 0,arguments))},showThreadOrRefresh:function(){return e(qd.n.apply(void 0,arguments))},setFocusRequestedThreadKey:function(){return e(HI.p.apply(void 0,arguments))},setUserPrefByApi:function(){return e(Tn.f.apply(void 0,arguments))}}})(jq),Iq=n("O6kw"),wq=(n("PhaV"),new B.b("files")),Nq=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={spriteLoaded:!1},n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){var e=this,t=new Image;this.spritePromise=new Promise(function(e){t.onload=function(){e()},t.src=cdn_url+"/80588/img/dragdrop_sprites@2x.png"}).then(function(){e.setState(function(){return{spriteLoaded:!0}})})}},{key:"componentWillUnmount",value:function(){this.spritePromise&&!this.spritePromise.isResolved()&&this.spritePromise.cancel()}},{key:"render",value:function(){var e=this.props,t=e.featureAnnounceOnly,n=e.teamName,a=e.channelName,r=e.userCanPost,i=e.isImOrMpim,o=e.useNightIllustration,s=this.state.spriteLoaded,l=!1;if(Object(px.a)(o))l=o;else{var c=(new Date).getHours();l=c>=20||c<8}var u=f()("p-message_pane_drag_overlay",{"p-message_pane_drag_overlay--night":!!l}),d=t&&!r?wq.t("Read only",{fallbackHash:"9b19a5a212deb29444cc1b420ad81703205848be"}):wq.rt("Upload to {teamName}",{teamName:n}),p="";p=t&&!r?wq.t("Only selected team members can post in this channel."):i?wq.rt('Hold <span className="c-keyboard_key c-keyboard_key--slim">Shift</span> to share immediately with {userName}',{userName:a}):wq.rt('Hold <span className="c-keyboard_key c-keyboard_key--slim">Shift</span> to share immediately to {channelName}',{channelName:a});var h="";return t&&!r?h=m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:"p-message_pane_drag_overlay__anim_circle"}),m.a.createElement(ta.b,{type:"emoji-objects",className:"p-message_pane_drag_overlay__anim_readonly",inline:!0})):s&&(h=m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:"p-message_pane_drag_overlay__anim_circle"}),m.a.createElement("div",{className:"p-message_pane_drag_overlay__anim_card_03"}),m.a.createElement("div",{className:"p-message_pane_drag_overlay__anim_card_02"}),m.a.createElement("div",{className:"p-message_pane_drag_overlay__anim_card_01"}))),m.a.createElement("div",{className:u},m.a.createElement("div",{className:"p-message_pane_drag_overlay__info"},m.a.createElement("div",{className:"p-message_pane_drag_overlay__anim"},h),m.a.createElement("div",{className:"p-message_pane_drag_overlay__title"},d),m.a.createElement("div",{className:"p-message_pane_drag_overlay__subtitle"},p)))}}]),t}(p.PureComponent);Nq.displayName="MessagePaneDragOverlay",Nq.defaultProps={featureAnnounceOnly:!1,teamName:"",channelName:"",isImOrMpim:!1,useNightIllustration:void 0};var Tq=Object(g.b)(function(e,t){var n=t.channelId,a=Object(G.e)(e,n),r=Object(we.d)(e);return{featureAnnounceOnly:Object(y.m)(e,"feature_announce_only"),channelName:Object(K.x)(e,a,{imIncludeAtSign:!1}),teamName:Object(De.f)(r),userCanPost:Object(Bb.p)(e,a.id),isImOrMpim:Object(K.hb)(a)||Object(K.pb)(a)}})(Nq),Aq=(n("uC0n"),new B.b("threads")),Rq=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={spriteLoaded:!1},n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){var e=this,t=new Image;this.spritePromise=new Promise(function(e){t.onload=function(){e()},t.src=cdn_url+"/80588/img/dragdrop_threads_sprites@2x.png"}).then(function(){e.setState(function(){return{spriteLoaded:!0}})})}},{key:"componentWillUnmount",value:function(){this.spritePromise&&!this.spritePromise.isResolved()&&this.spritePromise.cancel()}},{key:"render",value:function(){var e=this.props,t=e.featureAnnounceOnly,n=e.userCanThread,a=e.useNightIllustration,r=this.state.spriteLoaded,i=!1;if(Object(px.a)(a))i=a;else{var o=(new Date).getHours();i=o>=20||o<8}var s=f()("p-thread_drag_overlay",{"p-thread_drag_overlay--night":!!i}),l="";t&&!n?l=m.a.createElement("div",{className:"p-thread_drag_overlay__anim--readonly"},m.a.createElement("div",{className:"p-thread_drag_overlay__anim_circle"}),m.a.createElement(ta.b,{type:"emoji-objects",className:"p-thread_drag_overlay__anim_readonly",inline:!0})):r&&(l=m.a.createElement("div",{className:"p-thread_drag_overlay__anim"},m.a.createElement("div",{className:"p-thread_drag_overlay__anim_text_01"}),m.a.createElement("div",{className:"p-thread_drag_overlay__anim_card_01"}),m.a.createElement("div",{className:"p-thread_drag_overlay__anim_text_02"})));var c=t&&!n?Aq.t("Read only",{fallbackHash:"9b19a5a212deb29444cc1b420ad81703205848be"}):Aq.t("Upload to thread"),u=Aq.rt('Hold <span className="c-keyboard_key c-keyboard_key--slim">Shift</span> to share immediately'),d=t&&!n?Aq.t("Only selected team members can post in this thread."):u;return m.a.createElement("div",{className:s},m.a.createElement("div",{className:"p-thread_drag_overlay__info"},l,m.a.createElement("div",{className:"p-thread_drag_overlay__title"},c),m.a.createElement("div",{className:"p-thread_drag_overlay__subtitle"},d)))}}]),t}(p.PureComponent);Rq.displayName="DragOverlay",Rq.defaultProps={featureAnnounceOnly:!1,useNightIllustration:void 0};var Pq=Object(g.b)(function(e){var t=Object(Pn.b)(e),n=Object(Pn.a)(t).channelId,a=Object(G.e)(e,n);return{featureAnnounceOnly:Object(y.m)(e,"feature_announce_only"),userCanThread:Object(K.l)(e,a)}})(Rq),Mq=(n("Jm6a"),{MESSAGE_PANE:"message_pane",THREAD:"thread"}),xq=(h.b.oneOf(Object(mb.a)(Mq)).isRequired,h.b.node,h.b.string.isRequired,h.b.string,h.b.string,h.b.string,h.b.object,h.b.string,h.b.bool,h.b.bool,h.b.string,h.b.func,h.b.func,{children:void 0,threadTs:void 0,viewContext:void 0,className:void 0,elementProps:void 0,disableFileUploadsPref:void 0,featureAnnounceOnly:!1,userCanPostInChannel:!0,teamId:void 0,openFileUploadDialog:d.a,filterFilesForUpload:function(){return Promise.resolve([])}}),Fq=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={dragging:!1},n.activeElements=new Set,n.containerRef=m.a.createRef(),n.onDrop=n.onDrop.bind(n),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){var e=this,t=this.containerRef.current;t.addEventListener("dragenter",function(t){e.shouldPreventDrag(t)||(t.preventDefault(),e.activeElements.add(t.target),1===e.activeElements.size&&e.setState(function(e){return ye()({},e,{dragging:!0})}))}),t.addEventListener("dragleave",function(t){t.preventDefault(),e.activeElements.delete(t.target),0===e.activeElements.size&&e.setState(function(e){return ye()({},e,{dragging:!1})})}),t.addEventListener("dragover",function(t){e.shouldPreventDrag(t)||t.preventDefault()}),t.addEventListener("dragend",function(){e.setState(function(e){return ye()({},e,{dragging:!1})}),e.activeElements.clear()}),t.addEventListener("drop",this.onDrop)}},{key:"onDrop",value:function(e){var t=this.props,n=t.channelId,a=t.threadTs,r=t.viewContext,i=t.teamId,o=t.userCanPostInChannel,s=t.featureAnnounceOnly;if(e.preventDefault(),this.setState(function(e){return ye()({},e,{dragging:!1})}),this.activeElements.clear(),!s||o){var l=e.dataTransfer.files,c=Object(Ci.a)({viewContext:r,channelId:n,threadTs:a}),u={fileUploadAction:le.FileUploadAction.DRAG_AND_DROP,fileUploadSrc:le.FileUploadSrc.LOCAL};e.shiftKey?this.props.filterFilesForUpload({selectedFiles:[].concat(ti()(l)),channelId:n,threadTs:a}).then(function(e){e&&e.length&&Object(vs.a)(i).uploadFiles({files:e,shareData:{channelId:n,threadTs:a,metadata:u}})}):this.props.openFileUploadDialog({files:[].concat(ti()(l)),threadTs:a,initialChannelId:n,inputProxy:c,metadata:u})}}},{key:"shouldPreventDrag",value:function(e){var t=this.props,n=t.disableFileUploadsPref,a=t.featureAnnounceOnly,r=t.userCanPostInChannel,i=Object(ne.a)(e,"dataTransfer.types");return!Object(fs.a)(i.map(function(e){return e.toLowerCase()}),"files")||("disable_all"===n||!a&&!r)}},{key:"maybeRenderOverlay",value:function(){if(!this.state.dragging)return null;var e=this.props.channelId;switch(this.props.location){case Mq.MESSAGE_PANE:return m.a.createElement(Tq,{channelId:e});case Mq.THREAD:return m.a.createElement(Pq,null);default:return null}}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,a=e.elementProps;return m.a.createElement("div",ye()({className:f()("p-file_drag_drop__container",n),ref:this.containerRef},a),t,this.maybeRenderOverlay())}}]),t}(p.Component);Fq.displayName="FileDragDrop",Fq.defaultProps=xq;var Lq=Object(Qs.b)(Object(g.b)(function(e,t){var n=t.channelId;return{featureAnnounceOnly:Object(y.m)(e,"feature_announce_only"),disableFileUploadsPref:Object(ra.a)(e,"disable_file_uploads"),userCanPostInChannel:Object(Bb.p)(e,n),teamId:Object(v.b)(e)}},function(e){return{openFileUploadDialog:function(){return e(pr.a.apply(void 0,arguments))},filterFilesForUpload:function(){return e(Iq.a.apply(void 0,arguments))}}})(Fq)),Dq=(h.b.string,h.b.bool,h.b.bool,h.b.string,h.b.string,h.b.func.isRequired,h.b.func.isRequired,{primaryView:void 0,userAttentionIsOnChat:!1,userCanPostInChannel:!1,teamId:void 0,disableFileUploadsPref:void 0}),Uq=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onPaste=n.onPaste.bind(n),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){window.addEventListener("paste",this.onPaste)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("paste",this.onPaste)}},{key:"onPaste",value:function(e){var t=this.props,n=t.primaryView,a=t.userAttentionIsOnChat,r=t.userCanPostInChannel,i=t.teamId;if(e&&e.clipboardData&&a){var o=this.getFiles(e);if(!Object(ls.a)(o)){var s=void 0,l=void 0,c=void 0,u=void 0,d=void 0;if(Object(YD.a)(document.activeElement,function(e){var t=e.classList.contains("p-threads_footer__input");return t&&(u=e.querySelector(".p-message_input_field").getAttribute("data-thread-key"),d=e.querySelector(".p-message_input_field").getAttribute("data-view-context")),t})&&u){var p=Object(Pn.a)(u),m=p.channelId,h=p.threadTs;s=m,l=h,c=Object(Ci.a)({viewContext:d,channelId:m,threadTs:h})}else Object(_a.a)(n)&&r&&n&&(s=n,c=Object(Ci.a)({viewContext:Ca.H.MESSAGE_PANE,channelId:n}));if(s){var b={fileUploadAction:le.FileUploadAction.COPY_AND_PASTE,fileUploadSrc:le.FileUploadSrc.LOCAL};e.shiftKey?this.props.filterFilesForUpload({selectedFiles:[].concat(ti()(o)),channelId:s,threadTs:l}).then(function(e){e&&e.length&&Object(vs.a)(i).uploadFiles({files:e,shareData:{channelId:s,threadTs:l,metadata:b}})}):this.props.openFileUploadDialog({files:Array.from(o),initialChannelId:s,fromPaste:!0,threadTs:l,inputProxy:c,metadata:b}),e.preventDefault()}}}}},{key:"getFiles",value:function(e){if("disable_all"===this.props.disableFileUploadsPref)return null;var t=Object(ft.a)(e.clipboardData.items,function(e){return e.type});return Object(aa.a)(e.clipboardData.files,function(e){if(-1!==e.type.indexOf("image")){if(Object(ce.p)()&&Object(fs.a)(t,"text/plain")&&Object(fs.a)(t,"text/html")&&Object(fs.a)(t,"text/rtf"))return!1;if(Object(ce.B)()&&Object(fs.a)(t,"text/plain")&&Object(fs.a)(t,"text/html")&&Object(fs.a)(t,"image/png"))return!1}return!0})}},{key:"render",value:function(){return null}}]),t}(p.Component);Uq.displayName="ClipboardHandler",Uq.defaultProps=Dq;var Bq={openFileUploadDialog:function(){return pr.a.apply(void 0,arguments)},filterFilesForUpload:function(){return Iq.a.apply(void 0,arguments)}},qq=Object(g.b)(function(e){var t=Object(E.a)(e),n=Object(_a.a)(t)&&t;return{primaryView:Object(E.a)(e),userAttentionIsOnChat:Object(Ed.e)(e),userCanPostInChannel:n&&Object(Bb.p)(e,n),disableFileUploadsPref:Object(ra.a)(e,"disable_file_uploads"),teamId:Object(v.b)(e)}},Bq)(Uq),Hq=n("MIIS"),Wq=n("DBPf"),Gq=(h.b.string,h.b.string,h.b.bool.isRequired,h.b.number.isRequired,h.b.number.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={highlightCount:0,unreadCount:0,showHighlights:!1,showUnreads:!1},n}return u()(t,e),o()(t,null,[{key:"getDerivedStateFromProps",value:function(e,t){var n=!e.isWindowFocused&&(t.showHighlights||e.highlightCount>t.highlightCount),a=!e.isWindowFocused&&(t.showUnreads||e.unreadCount>t.unreadCount);return{highlightCount:e.highlightCount,unreadCount:e.unreadCount,showHighlights:n,showUnreads:a}}}]),o()(t,[{key:"render",value:function(){var e=this.props,t=e.viewName,n=e.teamName;if(!n)return null;var a=t?t+" | "+n:n;return this.state.showHighlights?a="! "+a:this.state.showUnreads&&(a="* "+a),m.a.createElement(Wq.a,{title:a})}}]),t}(p.PureComponent));Gq.displayName="WorkspaceDocumentTitle",Gq.defaultProps={viewName:"",teamName:""};var Kq=Gq,Vq=new B.b("view"),zq=new B.b("welcome_place"),Yq=(h.b.shape({getState:h.b.func.isRequired,subscribeImmediate:h.b.func,subscribe:h.b.func.isRequired}).isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderWithState=n.renderWithState.bind(n),n}return u()(t,e),o()(t,[{key:"renderWithState",value:function(e){var t=Object(E.a)(e),n=Object(G.e)(e,t),a=Object(we.d)(e),r="";return t===XI.a.allUnreads||"Punreads"===t?r=Vq.t("Unread Messages"):t===XI.a.allThreads?r=Vq.t("Threads"):"Pwelcome"===t?r=zq.t("Get Started"):n&&(r=Object(K.x)(e,n,{publicChannelIncludeHashSign:!1,imIncludeAtSign:!1})),m.a.createElement(Kq,{viewName:r,teamName:a&&a.name,isWindowFocused:!!Object(RN.g)(e),highlightCount:Object(te.f)(e),unreadCount:Object(te.g)(e)})}},{key:"render",value:function(){return m.a.createElement(Hq.a,{render:this.renderWithState,store:this.props.store})}}]),t}(p.Component));Yq.displayName="ConnectedWorkspaceDocumentTitle";var Qq=Yq,Xq=n("2LCd"),Jq=n("5iqv");function Zq(e){return Object(Si.a)()&&Object(y.m)(e,"feature_insights_comms_impact_message_stats")}var $q=Object(Je.b)(function(e){return e&&e.commsImpact});$q.meta={name:"getCommsImpactSlice",key:"commsImpactSelectorsGetCommsImpactSlice"};var eH=Object(Je.b)(function(e){return $q(e)&&$q(e).messageStatsVisible});eH.meta={name:"isMessageStatsVisible",key:"commsImpactSelectorsIsMessageStatsVisible"};var tH=Object(Je.b)(function(e){return $q(e)&&$q(e).activeMessageTs});tH.meta={name:"getActiveMessageTs",key:"commsImpactSelectorsGetActiveMessageTs"};var nH=Object(Je.b)(function(e){return $q(e)&&$q(e).activeChannelId});nH.meta={name:"getActiveChannelId",key:"commsImpactSelectorsGetActiveChannelId"};var aH=n("NaWa"),rH=new B.b("search"),iH=(h.b.array.isRequired,h.b.number.isRequired,function(e){var t=e.topReactions,n=e.count,a=n>0;return m.a.createElement(QL.a,{enabled:["feature_insights_comms_impact_message_stats"]},m.a.createElement(p.Fragment,null,t.map(function(e){return m.a.createElement(Gs.b,{text:":"+e.name+":",key:e.name,emojiSize:Gs.a.SMALL,className:"margin_right_25"})}),a&&m.a.createElement("span",{"data-qa":"message-stats-reaction-count",className:"c-message_stats__reaction_count margin_right_150"},rH.t("{count, plural, =1 {# reaction} other {# reactions}}",{count:n}))))});iH.displayName="TopReactions";var oH=iH,sH=new B.b("search"),lH=(h.b.number.isRequired,function(e){var t=e.count,n=t>0;return m.a.createElement(QL.a,{enabled:["feature_insights_comms_impact_message_stats"]},m.a.createElement(p.Fragment,null,n&&m.a.createElement("span",{"data-qa":"search-replies",className:"c-message_stats__replies_count"},m.a.createElement(ta.b,{type:"comment-alt"}),sH.t("{count, plural, =1 {# reply} other {# replies}}",{count:t}))))});lH.displayName="CountReplies";var cH=lH,uH=(h.b.object.isRequired,function(e){var t=e.msg;return m.a.createElement(ro.a,{className:"c-message_kit__message c-message_kit__contextual_message elevation_3 no_border margin_200"},m.a.createElement(io.a,{msg:t},m.a.createElement(oo.a,{light:m.a.createElement(so.a,{msg:t,size:24})},m.a.createElement(lo.a,{msg:t}),"\xa0\xa0",m.a.createElement(ho.a,{msg:t,clickable:!0,full:!0,relative:!1}),m.a.createElement("br",null),m.a.createElement(co.a,{msg:t}),m.a.createElement(uo.a,{msg:t,blocksContainerContext:void 0}),m.a.createElement(w_.a,{flexOrigin:void 0,msg:t}),m.a.createElement("div",{className:"c-message_stats__message_snippet_engagement"},m.a.createElement(oH,{topReactions:[{name:"smile"},{name:"lets-go"}],count:200}),m.a.createElement(cH,{count:12})))))});uH.displayName="MessageSnippet";var dH=uH,pH=Object(g.b)(function(e){var t=tH(e),n=nH(e);return{msg:Object(Ze.a)(e,n,t,!0)}})(dH),mH=(h.b.object.isRequired,h.b.object.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={hasError:!1},n.retryRender=Object(js.a)(n.retryRender.bind(n),100,{leading:!1}),n}return u()(t,e),o()(t,[{key:"componentDidUpdate",value:function(){this.state.hasError&&this.retryRender()}},{key:"componentDidCatch",value:function(e,t){this.props.telemeter.count("comms_impact_snippet_render_fail",1),this.props.logger.error("COMMS_IMPACT","Error caught by ProtectedMessageSnippet "+t.componentStack,e,{subtype:"CommsImpact"}),this.setState(function(){return{hasError:!0}})}},{key:"retryRender",value:function(){this.setState(function(){return{hasError:!1}})}},{key:"render",value:function(){return!this.state.hasError&&m.a.createElement(pH,null)}}]),t}(p.PureComponent));mH.displayName="ProtectedMessageSnippet";var hH=Object(g.b)(function(e){return{logger:Object(Ct.a)({state:e}),telemeter:Object(KC.c)({state:e})}})(mH),bH=(n("R4Ut"),new B.b("commsImpact")),fH=(h.b.bool.isRequired,h.b.bool.isRequired,h.b.func.isRequired,h.b.func.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["onMessageStatsClose"]),Object(dn.a)("commsImpactMessageStats",{open:function(t){var n=t.messageTs,a=t.channelId;e.openMessageStats({messageTs:n,channelId:a})},close:function(){e.closeMessageStats()}}),n}return u()(t,e),o()(t,[{key:"onMessageStatsClose",value:function(){this.props.closeMessageStats()}},{key:"render",value:function(){var e=this.props,t=e.isMessageStatsEnabled,n=e.visible;if(!t)return!1;var a=f()("c-popover","c-message_stats_modal"),r=bH.t("Comms Impact, message statistics");return m.a.createElement(QL.a,{enabled:["feature_insights_comms_impact_message_stats"]},m.a.createElement(SS.a,{ariaRole:"dialog",ariaLabel:r,isOpen:n,position:"top-left",targetBounds:{top:0,left:0,bottom:0,right:0},onClose:this.onMessageStatsClose,shouldFade:!1,overlayClassName:a,allowanceX:0,allowanceY:0,shouldFocusAfterRender:!0,shouldReturnFocusAfterClose:!1},m.a.createElement(hH,null)))}}]),t}(p.PureComponent));fH.displayName="MessageStats";var gH={openMessageStats:aH.c,closeMessageStats:aH.a},_H=Object(g.b)(function(e){return{visible:eH(e),isMessageStatsEnabled:Zq(e)}},gH)(fH),vH=(h.b.object.isRequired,h.b.object.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={hasError:!1},n.retryRender=Object(js.a)(n.retryRender.bind(n),100,{leading:!1}),n}return u()(t,e),o()(t,[{key:"componentDidUpdate",value:function(){this.state.hasError&&this.retryRender()}},{key:"componentDidCatch",value:function(e,t){this.props.telemeter.count("comms_impact_full_render_fail",1),this.props.logger.error("COMMS_IMPACT","Error caught by ProtectedMessageStats "+t.componentStack,e,{subtype:"CommsImpact"}),this.setState(function(){return{hasError:!0}})}},{key:"retryRender",value:function(){this.setState(function(){return{hasError:!1}})}},{key:"render",value:function(){return!this.state.hasError&&m.a.createElement(_H,null)}}]),t}(p.PureComponent));vH.displayName="ProtectedMessageStats";var yH=Object(g.b)(function(e){return{logger:Object(Ct.a)({state:e}),telemeter:Object(KC.c)({state:e})}})(vH),kH={id:h.b.string.isRequired,isEnabled:h.b.bool.isRequired},OH=function(e){var t=e.id,n=e.isEnabled;return t&&n?Sk(t).view(t):null};OH.propTypes=kH;var CH=Object(g.b)(function(e){var t=Object(E.a)(e);return{id:t,isEnabled:Object(JI.e)(e,t)}})(OH),EH=n("qMFv"),jH=(h.b.object,{appProfile:void 0});function SH(e){var t=e.appProfile;if(!t)return null;var n=Object(xg.b)(t.profile,512);return m.a.createElement("div",{className:"p-app_space_profile__side__avatar"},m.a.createElement("img",{className:"rounded",src:n,alt:"app avatar","data-qa":"app_profile_avatar"}))}SH.displayName="AppSpaceProfileSideAvatar",SH.defaultProps=jH;var IH=SH,wH=new B.b("app_space"),NH=(h.b.bool.isRequired,h.b.string,h.b.string,h.b.func,h.b.func.isRequired,h.b.object,h.b.object,h.b.bool,h.b.bool.isRequired,{showWorkflowBuilderButton:!1,settingsUrl:void 0,homepageUrl:void 0,openAppManagementModal:d.a,appProfile:void 0,clogger:{track:d.a}}),TH=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onSettingsButtonClick=n.onSettingsButtonClick.bind(n),n.onWebsiteButtonClick=n.onWebsiteButtonClick.bind(n),n}return u()(t,e),o()(t,[{key:"onWebsiteButtonClick",value:function(){this.props.clogger.track(le.EventId.APP_CLICK_LINK_APP_HOMEPAGE_IN_APP_SPACE_ABOUT_TAB,{contexts:{ui_context:{step:le.UiStep.APP_SPACE_ABOUT_TAB,action:le.UiAction.CLICK,ui_element:le.UiElement.LINK_APP_HOMEPAGE}}})}},{key:"onSettingsButtonClick",value:function(e){var t=this.props.appProfile;this.props.clogger.track(le.EventId.APP_CLICK_LINK_APP_SETTINGS_IN_APP_SPACE_ABOUT_TAB,{contexts:{ui_context:{step:le.UiStep.APP_SPACE_ABOUT_TAB,action:le.UiAction.CLICK,ui_element:le.UiElement.LINK_APP_SETTINGS}}}),Object(cI.I)(t)&&(e.preventDefault(),this.props.openAppManagementModal({serviceId:Object(cI.o)(t),referringEventId:"APP_SPACE_ABOUT_OPEN"}))}},{key:"renderSettingsButton",value:function(){var e=this.props,t=e.showSettingsUrl,n=e.settingsUrl,a=e.appProfile,r=wH.t("Settings",{fallbackHash:"c7f73bb54d928922c3838bb789ee9fb8a5b1eb37",fallbackHashNs:"app_profile"});return t?m.a.createElement(_e.d,{type:"outline",size:"medium",href:Object(cI.I)(a)?void 0:n,"data-qa":"app_profile_settings_link",onClick:this.onSettingsButtonClick,className:"p-app_space_profile__side_link",title:r},r):null}},{key:"renderWorkFlowBuilderButton",value:function(){var e=this.props,t=e.showWorkflowBuilderButton,n=e.appProfile,a=e.launchWorkflowBuilder,r=e.featureBuilderIsWorkflowApp;return t&&r?m.a.createElement(_e.d,{type:"outline",size:"medium",className:"p-app_space_profile__side_link",onClick:function(){return a({subPath:"slack-apps/"+n.app_id})}},r?wH.t("Open in Builder"):""):null}},{key:"renderWebsiteUrl",value:function(){var e=this.props.homepageUrl,t=wH.t("App Homepage",{fallbackHash:"ee2dbe71c27837ecd0a10d866992e1b3ff0d9b2f",fallbackHashNs:"app_profile"});return e?m.a.createElement(_e.d,{type:"outline",size:"medium",href:e,"data-qa":"app_profile_homepage_link",className:"p-app_space_profile__side_link",title:t,onClick:this.onWebsiteButtonClick},t):null}},{key:"render",value:function(){return m.a.createElement("div",{className:"p-app_space_profile__side__links"},this.renderSettingsButton(),this.renderWorkFlowBuilderButton(),this.renderWebsiteUrl())}}]),t}(p.PureComponent);TH.displayName="BaseAppSpaceProfileSideLinks",TH.defaultProps=NH;var AH={openAppManagementModal:dI.a,launchWorkflowBuilder:rC.a},RH=Object(g.b)(function(e,t){var n=t.appProfile;return{clogger:Object(re.a)({state:e}),showSettingsUrl:Object(cI.z)(e,n),settingsUrl:Object(cI.y)(e,n),homepageUrl:Object(cI.k)(n),featureBuilderIsWorkflowApp:Object(y.m)(e,"feature_builder_is_workflow_app")}},AH)(TH),PH=n("Owxj"),MH=(h.b.string,h.b.func,{formattedDescription:"",clogLinkClick:d.a}),xH=function(e){var t=e.formattedDescription,n=e.clogLinkClick,a=Object(p.useCallback)(function(e){e&&e.target&&e.target.href&&"A"===e.target.tagName&&(n(),e.preventDefault(),Object(ji.a)(e.target.href))},[n]);return t?m.a.createElement("div",{onClick:a,dangerouslySetInnerHTML:{__html:t}}):null};xH.displayName="BaseFormattedAppDescription",xH.defaultProps=MH;var FH=Object(g.b)(function(e,t){var n=t.formattedDescription;return{formattedDescription:Object(PH.a)(e,{messageText:n,teamId:Object(v.b)(e)})}})(xH),LH=new B.b("app_space"),DH=(h.b.object,h.b.string,h.b.string,{appProfile:void 0,truncatedDescription:"",formattedDescription:""});function UH(e){var t=e.appProfile,n=e.formattedDescription,a=e.truncatedDescription,r=Object(p.useState)(!1),i=it()(r,2),o=i[0],s=i[1];if(!t||!n)return null;var l=Object(cI.J)(t),c=m.a.createElement(FH,{formattedDescription:n});return m.a.createElement("section",null,m.a.createElement("div",{className:"p-app_space_profile__description","data-qa":"app_profile_desc"},l?c:m.a.createElement(p.Fragment,null,m.a.createElement("span",{className:"p-app_space_profile__description__collapsed"},o?c:m.a.createElement(pg.a,{emoji:!0,text:a}))," ",m.a.createElement(la.a,{onClick:function(){return s(!o)},"data-qa":"toggle-app-description-expansion"},o?LH.t("Show less"):LH.t("Read more")))))}UH.displayName="AppSpaceProfileDescription",UH.defaultProps=DH;var BH=Object(g.b)(function(e,t){var n=t.appProfile;return{truncatedDescription:Object(PH.a)(e,{messageText:Object(cI.r)(n),teamId:Object(v.b)(e)}),formattedDescription:Object(cI.h)(n)}})(Object(jp.a)(UH)),qH=n("Pl1I"),HH=new B.b("app_space");h.b.bool,h.b.bool,h.b.bool,h.b.string,h.b.string,h.b.bool,h.b.string,h.b.object.isRequired,h.b.string,h.b.bool;function WH(e){var t=e.isWorkflowApp,n=e.isPublished,a=e.isDistributed,r=e.appType,i=e.installedUserId,o=e.installerIsYou,s=e.appName,l=e.appHomeTeamDisplayName,c=e.featureAddAppHomeTeamName,u=e.appProfile;return n?null:m.a.createElement("section",null,m.a.createElement("div",{className:"p-app_space_profile__disclaimer","data-qa":"app_space_profile_disclaimer"},a?m.a.createElement(p.Fragment,null,HH.t("This app has not been reviewed or approved by Slack.")," ",m.a.createElement(la.a,{href:"https://get.slack.help/hc/en-us/articles/222386767-Manage-apps-for-your-team"},HH.t("Learn more")),"."):m.a.createElement(qH.a,{displayCustomCreator:!0,isWorkflowApp:t,isError:!1,appType:r,memberId:i,installerIsYou:o,appName:s,creatorsId:Object(ne.a)(u,"legacy_app.auth.created_by",""),appHomeTeamDisplayName:l,featureAddAppHomeTeamName:c})))}WH.defaultProps={isWorkflowApp:!1,isPublished:!1,isDistributed:!1,appType:"",installedUserId:"",installerIsYou:!1,appName:"",appHomeTeamDisplayName:"",featureAddAppHomeTeamName:!1};var GH=Object(g.b)(function(e,t){var n=t.appProfile;return{isPublished:Object(cI.G)(n),isDistributed:Object(cI.D)(n),isWorkflowApp:Object(oa.g)(n),appType:Object(cI.s)(n),installedUserId:Object(cI.v)(n),installerIsYou:Object(cI.w)(e,n),appName:Object(cI.m)(n),appHomeTeamDisplayName:Object(cI.i)(e,n),featureAddAppHomeTeamName:Object(y.m)(e,"feature_add_app_home_team_name")}})(WH),KH=new B.b("app_space"),VH=function(){return Object(jS.a)().featureBuilderIsWorkflowApp?m.a.createElement("div",{className:"p-app_space_profile__privacy_disclaimer"},KH.rt("Apps made using our Workflow Builder only use data Slack already has access to (view our <a>Privacy Policy</a> to learn more).",{fallbackHash:"66b014ac2efc6359bc9644c6ba5fe9aac4e3cddb"},function(e){var t=e.key,n=e.text;return m.a.createElement("a",{key:t,target:"_blank",rel:"noopener noreferrer",href:"http://slack.com/privacy-policy"},n)})):null},zH=new B.b("app_space");h.b.object.isRequired,h.b.string,h.b.bool,h.b.bool.isRequired,h.b.string,h.b.bool.isRequired;function YH(e){var t=e.appProfile,n=e.appName,a=e.installerIsYou,r=e.isCustomIntegration,i=e.isWorkflowApp,o=e.manageUrl,s=Object(jS.a)().featureBuilderIsWorkflowApp,l=i&&!!s,c=t.profile.tagline;return m.a.createElement("div",{className:"p-app_space_profile__info"},m.a.createElement("div",{className:"p-app_space_profile__side"},m.a.createElement(IH,{appProfile:t}),m.a.createElement(RH,{appProfile:t,showWorkflowBuilderButton:l&&a})),m.a.createElement("div",{className:"p-app_space_profile__about"},!!n&&m.a.createElement("h2",{className:"p-app_space__header","data-qa":"app_profile_name"},n),m.a.createElement(BH,{appProfile:t}),m.a.createElement(GH,{appProfile:t}),l&&c&&m.a.createElement("div",null,c),l&&m.a.createElement(VH,null),r&&m.a.createElement(_e.d,{type:"outline",href:o},zH.t("Manage",{note:"Manage permissions"}))))}YH.displayName="AppSpaceProfileInfo",YH.defaultProps={appName:"",isCustomIntegration:!1,manageUrl:""};var QH=Object(g.b)(function(e,t){var n=t.appProfile;return{appName:Object(cI.m)(n),isCustomIntegration:Object(cI.C)(n),installerIsYou:Object(cI.w)(e,n),manageUrl:Object(cI.x)(e,n),isWorkflowApp:Object(oa.g)(n)}})(YH),XH=n("4phY"),JH=new B.b("app_space"),ZH=(h.b.string,h.b.string,h.b.array,h.b.string,h.b.bool,h.b.func,{appName:"",appIcon:"",appScreenshots:[],youtubeUrl:"",featureReactFileViewer:!1,openFileViewer:d.a}),$H=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleYoutubeClick=n.handleYoutubeClick.bind(n),n.handleImageClick=n.handleImageClick.bind(n),n}return u()(t,e),o()(t,[{key:"handleYoutubeClick",value:function(){var e=this.props,t=e.appName,n=e.appScreenshots,a=e.appIcon,r=e.youtubeUrl;if(e.featureReactFileViewer)this.props.openFileViewer({title:t,youtube:{src:r}});else{var i=Object(cI.A)(r);Object(jd.g)({youtubeId:i,screenshots:n,appName:t,appIcon:a},0)}}},{key:"handleImageClick",value:function(e){var t=this.props,n=t.appName,a=t.appScreenshots,r=t.appIcon,i=t.youtubeUrl;if(t.featureReactFileViewer)this.props.openFileViewer({title:n,image:{src:a[e].image_1600,altText:n,thumbnailUrl:a[e].image_440,height:400,width:600}});else{var o=Object(cI.A)(i),s=i?e+1:e;Object(jd.g)({youtubeId:o,screenshots:a,appName:n,appIcon:r},s)}}},{key:"generateThumbnailUrl",value:function(e){var t=Object(cI.A)(e);return""!==t&&"https://i.ytimg.com/vi/"+t+"/hqdefault.jpg"}},{key:"renderYoutubeVideo",value:function(){var e=this.props,t=e.youtubeUrl,n=e.appName;if(!t)return null;var a=this.generateThumbnailUrl(t);if(!a)return null;var r=JH.t("Video of {appName}",{note:"Alt text for a screenreader to play a video about an app",appName:n});return m.a.createElement(_e.c,{onClick:this.handleYoutubeClick,className:"p-app_space_profile__screenshots_item"},m.a.createElement("img",{src:a,alt:r,className:"p-app_space_profile__youtube_thumbnail"}),m.a.createElement("div",{className:"p-app_space_profile__youtube_play_button"},m.a.createElement(ta.b,{type:"play",size:"inherit"})))}},{key:"renderScreenshots",value:function(){var e=this,t=this.props,n=t.appScreenshots,a=t.appName;if(!n||!n.length)return null;var r=JH.t("Screenshot of {appName}",{note:"Alt text for screenshots of an app in the full screen modal.",appName:a});return n.map(function(t,n){return m.a.createElement(_e.c,{key:t.id,onClick:function(){return e.handleImageClick(n)},className:"p-app_space_profile__screenshots_item"},m.a.createElement("img",{src:t.image_440,alt:r}))})}},{key:"render",value:function(){var e=this.props,t=e.youtubeUrl,n=e.appScreenshots;return n&&n.length||t&&""!==t?m.a.createElement("div",{className:"p-app_space__screenshots"},m.a.createElement("h3",{className:"p-app_space__subheader"},JH.t("Screenshots",{note:"Heading for screenshots of an app in the app profile."})),m.a.createElement("div",{className:"p-app_space_profile__screenshots","data-qa":"app_profile_screenshots"},this.renderYoutubeVideo(),this.renderScreenshots())):null}}]),t}(p.PureComponent);$H.displayName="AppSpaceScreenshots",$H.defaultProps=ZH,$H.displayName="AppSpaceScreenshots";var eW=$H;var tW=Object(g.b)(function(e,t){var n=t.appProfile;return{youtubeUrl:Object(cI.t)(n),appScreenshots:Object(cI.n)(n),appName:Object(cI.m)(n),appIcon:Object(xg.b)(n.profile,512),featureReactFileViewer:Object(y.m)(e,"feature_react_file_viewer")}},function(e){return{openFileViewer:function(t){return e(Object(XH.a)(t))}}})(eW),nW=n("KPXh"),aW=n("zwKj"),rW=new B.b("app_space"),iW=(h.b.func,h.b.object,h.b.shape({name:h.b.string.isRequired,usage:h.b.string.isRequired,description:h.b.string.isRequired}).isRequired,h.b.string,h.b.string,{autoFillSlashCommand:d.a,clogger:{track:d.a},appId:"",botId:""});function oW(e){var t=e.autoFillSlashCommand,n=e.clogger,a=e.appId,r=e.botId,i=e.command,o=Object(nW.g)(i),s=Object(nW.i)(i),l=Object(nW.e)(i),c=Object(p.useCallback)(function(){t({commandName:o}),n.track(le.EventId.APP_SPACE_ABOUT_SLASH_COMMAND_CLICK,{app_id:a,bot_id:r,contexts:{core:{app_id:a,bot_id:r}}})},[t,o,n,a,r]);return m.a.createElement("div",{className:"p-app_space_profile__slash_command","data-qa":"app_space_profile_slash_command"},m.a.createElement("div",null,m.a.createElement("div",null,m.a.createElement("strong",null,o),m.a.createElement("span",null,s)),m.a.createElement("div",{className:"p-app_space_profile__slash_command_desc"},l)),m.a.createElement("div",null,m.a.createElement(_e.d,{type:"outline","data-qa":o,onClick:c},rW.t("Start command"))))}oW.displayName="AppSpaceSlashCommand",oW.defaultProps=iW;var sW={autoFillSlashCommand:function(){return aW.a.apply(void 0,arguments)}},lW=Object(g.b)(function(e){return{clogger:Object(re.a)({state:e})}},sW)(oW),cW=new B.b("app_space");h.b.object.isRequired;function uW(e){var t=e.appProfile,n=Object(cI.c)(t),a=Object(cI.l)(t),r=Object(cI.o)(t);return n&&n.length?m.a.createElement(p.Fragment,null,m.a.createElement("h3",{className:"p-app_space__subheader"},m.a.createElement("span",null,cW.t("Commands",{note:"Slash commands the app responds to"})),m.a.createElement("span",{className:"p-app_space__subheader__helper"},cW.t("Use / to start commands in any conversation",{note:"How to use slash commands helper text"}))),m.a.createElement("div",{className:"p-app_space_profile__slash_commands"},m.a.createElement("section",null,n.map(function(e){return m.a.createElement(lW,{key:e.name,command:e,appId:a,botId:r})})))):null}uW.displayName="AppSpaceSlashCommands";var dW=m.a.memo(uW),pW=(n("VTc2"),new B.b("app_space")),mW=(h.b.object,h.b.object,h.b.bool,h.b.oneOfType([h.b.object,h.b.func]),h.b.number,h.b.string,h.b.bool,h.b.func,h.b.func,{appProfile:void 0,clogger:{track:d.a},showSlashCommands:!1,forwardedRef:void 0,hasKeyboardFocus:!1,tabIndex:void 0,role:void 0,onFocus:d.a,onBlur:d.a});function hW(e){var t=e.clogger,n=e.appProfile,a=e.showSlashCommands,r=e.forwardedRef,i=e.hasKeyboardFocus,o=e.onFocus,s=e.onBlur,l=e.tabIndex,c=e.role,u=Object(cI.l)(n),d=Object(cI.o)(n),h=Object(p.useCallback)(function(){t.track("APP_SPACE_ABOUT_OPEN",{app_id:u,bot_id:d,contexts:{core:{app_id:u,bot_id:d}}})},[t,u,d]),b=Object(p.useCallback)(function(){return Object(EH.b)(n,d)},[n,d]);if(Object(p.useEffect)(function(){u&&d&&(b(),h())},[u,d,h,b]),!n||Object(Ub.e)(n))return null;var g=Object(cI.m)(n)||"",_=pW.t("About {appName}",{appName:g,fallbackHash:"f7f9e16e31e93cf02131b1e81ff028152a103a0a",fallbackHashNs:"app_card"}),v=f()("p-app_space_profile",{"p-app_space_profile--focus":i});return m.a.createElement("div",{"aria-label":_,ref:r,className:v,"data-qa":"app_space_profile",onFocus:o,onBlur:s,tabIndex:l,role:c},m.a.createElement(QH,{appProfile:n}),m.a.createElement(tW,{appProfile:n}),a?m.a.createElement(dW,{appProfile:n}):null)}hW.displayName="BaseAppSpace",hW.defaultProps=mW;var bW=Object(g.b)(function(e,t){var n=Object(E.a)(e),a=II(e,n),r=Object(S.a)(e),i=Object(C.c)(e);if(!(Object(ae.a)()&&r||a&&Object(F.p)(e)))return{};var o=t.utaApp&&i?t.appProfile:Object(uI.b)(e,n);return{appProfile:o,showSlashCommands:Object(cI.M)(e,o),clogger:Object(re.a)({state:e})}})(hW),fW=m.a.forwardRef(function(e,t){return m.a.createElement(bW,ye()({},e,{forwardedRef:t}))}),gW=(h.b.string,h.b.bool,h.b.func,h.b.func,{appId:null,hasKeyboardFocus:!1,onFocus:d.a,onBlur:d.a}),_W=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["focus"]),n.appSpaceRef=m.a.createRef(),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.focus()}},{key:"componentDidUpdate",value:function(e){e.appId!==this.props.appId&&this.focus()}},{key:"focus",value:function(){this.appSpaceRef&&this.appSpaceRef.current&&this.appSpaceRef.current.focus()}},{key:"render",value:function(){return m.a.createElement(fW,ye()({},this.props,{tabIndex:0,role:"tabPanel",ref:this.appSpaceRef}))}}]),t}(m.a.Component);_W.displayName="AppSpaceWrapper",_W.defaultProps=gW;var vW=Object(Tk.a)(Object(V.a)(_W,"AppSpaceWrapper",{index:5})),yW=Object(g.b)(function(e){var t=Object(E.a)(e),n=Object(uI.b)(e,t);return{appId:Object(Ub.b)(n)?n.app_id:null}})(vW),kW=n("pnoF"),OW=n("L4J1"),CW=Object(g.b)(function(e,t){var n=t.viewId;return{view:Object(kW.a)(e,n)}})(OW.a),EW=n("jK/K"),jW=n("bbGV"),SW=new B.b("app_home"),IW=(h.b.string.isRequired,h.b.func.isRequired,h.b.object.isRequired,h.b.bool,function(e){var t=e.app,n=e.setTab,a=e.channelId,r=e.featureAppHome,i=Object(p.useCallback)(function(){n({tabId:R.b.ABOUT,channelId:a})},[a,n]);if(!r)return null;var o=SW.rt("In the meantime, learn more about {app} and what it can do by visiting the About tab.",{app:Object(oa.b)(t)||m.a.createElement(jW.a,null)});return m.a.createElement("div",{className:"p-app_home__blockkit_loading_error"},m.a.createElement("h2",null,m.a.createElement(ta.b,{type:"life-ring",inline:!0})," ",SW.t("This is still a work in progress")),m.a.createElement("p",{className:"p-app_home__blockkit_loading_error__content"},o),m.a.createElement(_e.d,{type:"primary",onClick:i},SW.t("Learn More")))});IW.displayName="AppHomeTimeout",IW.defaultProps={featureAppHome:!1};var wW=Object(g.b)(function(e){return{channelId:Object(E.a)(e)}},function(e){return{setTab:function(){return e(W.a.apply(void 0,arguments))}}})(IW),NW=n("6BP1"),TW=new B.b("app_home"),AW=(h.b.string.isRequired,h.b.string.isRequired,h.b.bool,function(e){return e.featureAppHome?m.a.createElement("div",{className:"p-app_home__blockkit_loading_error","data-qa":"app_home_error_view"},m.a.createElement("h2",null,m.a.createElement(ta.b,{type:"life-ring",inline:!0})," ",TW.t("Hmm \u2014 something went wrong")),m.a.createElement("p",null,TW.t("There was an error loading this content. Mind trying again?")),m.a.createElement(_e.d,{type:"primary",onClick:function(){return Object(NW.e)(e.teamId,[e.viewId])}},TW.t("Reload"))):null});AW.displayName="AppHomeError",AW.defaultProps={featureAppHome:!1};var RW=Object(g.b)(function(e){return{teamId:Object(v.b)(e)}})(AW),PW=(h.b.string.isRequired,h.b.string,h.b.bool,h.b.string,h.b.string,h.b.func,h.b.bool,h.b.object.isRequired,h.b.bool,h.b.bool,h.b.bool,h.b.object.isRequired,{botId:void 0,containerId:void 0,renderBlockWrapper:void 0,featureAppHome:!1,appHomeIsLoading:!0,viewId:null,viewIsLoading:!1,viewIsStale:!1,viewIsNonExistentOrUnknown:!1}),MW=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.updateTimedOut=n.updateTimedOut.bind(n),n.state={timedOut:!1},n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.updateTimer()}},{key:"componentDidUpdate",value:function(){this.updateTimer()}},{key:"componentWillUnmount",value:function(){this.timer&&clearTimeout(this.timer)}},{key:"updateTimedOut",value:function(){this.setState(function(){return{timedOut:!0}});var e=this.props,t=e.appId,n=e.botId;e.clogger.track(le.EventId.APP_HOME_LOAD_ERROR,{app_id:t,bot_id:n,timeout:1e4})}},{key:"updateTimer",value:function(){this.state.timedOut||(this.timer&&(clearTimeout(this.timer),delete this.timer),this.showLoadingSpinner()&&(this.timer=setTimeout(this.updateTimedOut,1e4)))}},{key:"showLoadingSpinner",value:function(){return this.props.appHomeIsLoading||this.props.viewIsLoading}},{key:"renderLoadingSpinner",value:function(){return m.a.createElement(ci.a,{className:"p-app_home_spinner",size:"jumbo","data-qa":"app_home_bk_spinner"})}},{key:"render",value:function(){if(!this.props.featureAppHome)return null;if(this.props.viewIsNonExistentOrUnknown)return this.state.timedOut?m.a.createElement(wW,{app:this.props.app,featureAppHome:this.props.featureAppHome}):this.showLoadingSpinner()?this.renderLoadingSpinner():m.a.createElement(RW,{viewId:this.props.viewId,featureAppHome:this.props.featureAppHome});var e=f()("p-app_home__blockkit_container",{"p-app_home__blockkit_container--stale":this.props.viewIsStale});return m.a.createElement("div",{className:"p-app_home__blockkit","data-qa":"app_home_bk_app_view"},m.a.createElement("div",{className:e},m.a.createElement(CW,{viewId:this.props.viewId,containerContext:am.a.app_home,renderBlockWrapper:this.props.renderBlockWrapper,containerId:this.props.containerId})),this.props.viewIsStale&&this.renderLoadingSpinner())}}]),t}(m.a.PureComponent);MW.displayName="AppHomeBlockkit",MW.defaultProps=PW;var xW=Object(g.b)(function(e,t){var n=t.appId,a=t.viewId,r=a&&Object(kW.a)(e,a);return{app:Object(ia.e)(e,n),viewIsLoading:!a||Object(Ub.d)(r),viewIsStale:r&&Object(EW.a)(r),viewIsNonExistentOrUnknown:Object(Ub.c)(r)||Object(Ub.d)(r),clogger:Object(re.a)({state:e}),featureAppHome:Object(S.a)(e)||Object(y.m)(e,"feature_block_kit_builder_app_home")}})(MW),FW=(n("Dcvo"),new B.b("app_home")),LW=(h.b.bool.isRequired,h.b.string.isRequired,h.b.string,h.b.bool,h.b.string,h.b.string,h.b.bool,h.b.func,h.b.func,{botId:void 0,isLoading:void 0,viewId:void 0,appName:"",hasKeyboardFocus:!1,onFocus:d.a,onBlur:d.a}),DW=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["focus"]),n.appHomeRef=m.a.createRef(),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.focus()}},{key:"componentDidUpdate",value:function(e){e.appId!==this.props.appId&&this.focus()}},{key:"focus",value:function(){this.appHomeRef&&this.appHomeRef.current&&this.appHomeRef.current.focus()}},{key:"render",value:function(){var e=this.props,t=e.featureAppHome,n=e.isLoading,a=e.appId,r=e.botId,i=e.viewId,o=e.appName,s=e.hasKeyboardFocus,l=e.onFocus,c=e.onBlur;if(!t)return null;var u=f()("p-app_home",{"p-app_home--focus":s}),d=o+" "+FW.t("Home",{fallbackHash:"70f8bb9a8a5393ef080507a89e4b98d139000d65",fallbackHashNs:"app_space"});return m.a.createElement("div",{"aria-label":d,className:u,"data-qa":"app_home",onFocus:l,onBlur:c,tabIndex:0,ref:this.appHomeRef,role:"tabpanel"},m.a.createElement(xW,{appId:a,botId:r,viewId:i,appHomeIsLoading:n}))}}]),t}(m.a.Component);DW.displayName="BaseAppHome",DW.defaultProps=LW;var UW=Object(V.a)(DW,"BaseAppHome",{index:5}),BW=Object(Tk.a)(Object(g.b)(function(e){var t=Object(C.a)(e),n=t.appId,a=Object(ia.e)(e,n);return ye()({featureAppHome:Object(S.a)(e),appName:Object(oa.b)(a)||""},t)})(UW)),qW=(n("8ISr"),new B.b("app_settings")),HW=(h.b.string,h.b.bool,function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this;return this.props.featureAppHome?m.a.createElement("div",{className:"p-app_settings","data-qa":"app_settings"},m.a.createElement("div",{className:"p-app_settings_container"},m.a.createElement("h2",{className:"p-app_settings__sub_header"},qW.t("For App Permission and Authorizations, go to permissions")),m.a.createElement(_e.d,{type:"outline",size:"medium","data-qa":"app_settings_link",className:"p-app_settings_button",onClick:function(){return window.open(e.props.settingsUrl,"_blank")},title:qW.t("Manage App Permissions")},qW.t("Manage App Permissions")))):null}}]),t}(m.a.Component));HW.displayName="BaseAppSettings",HW.defaultProps={settingsUrl:"",featureAppHome:!1};var WW=Object(g.b)(function(e){var t=Object(E.a)(e);return{featureAppHome:Object(S.a)(e),appProfile:Object(uI.b)(e,t),settingsUrl:Object(cI.y)(e,Object(uI.b)(e,t))}})(HW),GW=n("Jufg"),KW=n("r6oD"),VW=n("cZF4"),zW=n("PAPM"),YW=n("QEGb"),QW=n("02hs"),XW=n("O/xh"),JW=new B.b("channel_details"),ZW=(h.b.string.isRequired,h.b.number.isRequired,h.b.bool,h.b.object.isRequired,h.b.func.isRequired,{className:"p-members_dialog__member_list_entity"}),$W=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["fetchPost","renderRow","onSearchInputChange","onScroll"]),n.keys=null,n.loading=!1,n.state={memberIds:[],searchQuery:"",fullyLoaded:!1,marker:void 0,showScrollIndicatorTop:!1},n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.fetchMembers()}},{key:"onSearchInputChange",value:function(e){var t=this,n=e.target.value;this.setState(function(){return{searchQuery:n,memberIds:[],fullyLoaded:!1,marker:void 0}},function(){t.fetchMembers()})}},{key:"onScroll",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).scrollTop,n=(void 0===t?0:t)>0;this.setState(function(){return{showScrollIndicatorTop:n}})}},{key:"getListKeys",value:function(){return this.state.memberIds}},{key:"fetchPost",value:function(){this.fetchMembers()}},{key:"fetchMembers",value:function(){var e=this;this.loading||this.state.fullyLoaded||(this.props.logger.info("CHANNEL-MEMBERS","Fetching more"),this.loading=!0,this.props.fetchAndUpsertMembersForChannel({channelId:this.props.channelId,count:50,marker:this.state.marker,searchQuery:this.state.searchQuery}).then(function(t){var n=t.members,a=t.nextMarker;e.setState(function(e){return{memberIds:Object(VW.a)(e.memberIds,Object(ft.a)(n,"id")),fullyLoaded:!a,marker:a}},function(){e.props.logger.info("CHANNEL-MEMBERS","Showing "+e.state.memberIds.length+" members"),e.state.fullyLoaded&&e.props.logger.info("CHANNEL-MEMBERS","Done fetching")})}).finally(function(){e.loading=!1}))}},{key:"renderSearch",value:function(){return this.props.featureM11nChannelDetails?m.a.createElement("div",{className:"p-channel_details__members_dialog__search"},m.a.createElement(Zv.a,{value:this.state.searchQuery,onChange:this.onSearchInputChange,placeholder:JW.t("Search members"),icon:"search","data-qa":"members_dialog_filter",autoFocus:!0})):null}},{key:"renderRow",value:function(e){var t=this.keys[e];return t?this.renderMember(t):null}},{key:"renderMember",value:function(e){return m.a.createElement(XW.a,{userId:e,position:"left-bottom",includeRemoveFromChannelAction:!0},m.a.createElement(QW.a,{id:e,className:"p-members_dialog__member_list_btn","data-qa":"member_row_btn",listEntityProps:ZW}))}},{key:"renderMemberList",value:function(){var e=this;this.keys=this.getListKeys();var t=this.state.showScrollIndicatorTop,n=f()("p-channel_details__members_dialog__list",{"p-channel_details__members_dialog__list--indicate-top":t});return m.a.createElement("div",{className:n},m.a.createElement(ni.a,null,function(t){var n=t.width,a=t.height;return m.a.createElement(ui.a,{width:n,height:a,keys:e.keys,rowRenderer:e.renderRow,loadAround:e.fetchPost,loadPost:e.fetchPost,onScroll:e.onScroll})}))}},{key:"render",value:function(){var e=this.props.channelId;if(!this.props.featureM11nChannelDetails)return null;var t=m.a.createElement(Lo.a,{truncate:!0,channelId:e}),n=JW.rt("{member_count, number} members in {channel_name}",{member_count:this.props.memberCount,channel_name:t,fallbackHash:"7be769e7cb0f1f771e7a14fb7b1b6c90eaedf0cb",fallbackHashNs:"channel_pages"}),a="members_dialog__title-bar";return m.a.createElement(YW.a,{labelledby:a,centered:!0},m.a.createElement(ri.a,null,m.a.createElement(ii.a,{id:a,title:n,"data-qa":"dialog_header"})),m.a.createElement("div",{className:"p-channel_details__members_dialog"},this.renderSearch(),this.renderMemberList()))}}]),t}(p.Component);$W.displayName="MembersDialog",$W.defaultProps={featureM11nChannelDetails:!1};var eG=Object(g.b)(function(e,t){var n=t.channelId,a=Object(Ct.a)({state:e});return{channelId:n,featureM11nChannelDetails:Object(y.m)(e,"feature_m11n_channel_details"),logger:a}},function(e){return{fetchAndUpsertMembersForChannel:function(){return e(zW.a.apply(void 0,arguments))}}})($W),tG=(h.b.string.isRequired,h.b.object,h.b.arrayOf(h.b.string),h.b.number,h.b.func.isRequired,{channel:void 0,memberList:[],memberCount:void 0}),nG=function(e){var t=e.channelId,n=e.channel,a=e.memberList,r=e.memberCount,i=e.dispatch;Object(p.useEffect)(function(){i(Object(GW.b)({channelId:t,count:50}))},[t,i]);var o=Object(p.useCallback)(function(){i(Object(tn.e)({element:m.a.createElement(eG,{channelId:t,memberCount:r})}))},[i,r,t]);if(Object(K.hb)(n))return null;var s=Object(mt.a)(r)?Object(B.n)(r):"\u2013",l=a.slice(0,50).map(function(e){return m.a.createElement(KW.a,{id:e,className:"p-about_tab__members__member",showPresence:!1,showStatus:!1,useShortMode:!0})}),c=Object(mt.a)(r)&&r>l.length&&m.a.createElement(Mx.b,{type:"outline",className:"p-about_tab__members__see_all",onClick:o},"See All ",s," Members");return m.a.createElement("div",{className:"p-about_tab__members"},m.a.createElement("div",{className:"p-about_tab__members__heading"},s>0?s+" Members":"Members"),m.a.createElement("div",{className:"p-about_tab__members__list"},l),c)};nG.displayName="MembersList",nG.defaultProps=tG;var aG=Object(g.b)(function(e,t){var n=t.channelId,a=Object(Fj.f)(e,n);return{channel:Object(G.e)(e,n),memberList:Object(GW.c)(e,n),memberCount:a&&a.counts&&a.counts.member_count}})(nG),rG=(h.b.string.isRequired,h.b.object,h.b.bool,h.b.func.isRequired,{channel:void 0,isCallButtonVisible:!0}),iG=function(e){var t=e.channelId,n=e.channel,a=e.isCallButtonVisible,r=e.dispatch,i=Object(p.useCallback)(function(){if(Object(K.pb)(n)){var e=Object(K.I)(n);r(Object(dO.a)({memberIds:e,source:xE.b.MPIM}))}else r(Object(FE.b)({channelId:t}))},[n,t,r]),o=Object(p.useCallback)(function(){r(Object(TE.d)())},[r]),s=!Object(K.hb)(n)&&m.a.createElement(Mx.b,{type:"primary",className:"p-about_tab__actions__button",onClick:i},"Add People"),l=a&&m.a.createElement(Mx.b,{type:"outline",className:"p-about_tab__actions__button",onClick:o},"Start a Call");return m.a.createElement("div",{className:"p-about_tab__actions"},s,l)};iG.displayName="ActionsList",iG.defaultProps=rG;var oG=Object(g.b)(function(e,t){var n=t.channelId,a=Object(G.e)(e,n);return{channel:a,isCallButtonVisible:Object(bj.f)(e,a)}})(iG),sG=(h.b.string.isRequired,h.b.object,h.b.func.isRequired,{channel:void 0}),lG=function(e){var t=e.channelId,n=e.channel,a=e.dispatch,r=Object(p.useCallback)(function(){a(Object(tn.e)({element:m.a.createElement(Xx,{channelId:t})}))},[a,t]);if(!n)return null;if(Object(K.hb)(n)||Object(K.pb)(n))return null;var i=Object(K.R)(n);return i&&i.value?m.a.createElement("div",{className:"p-about_tab__purpose"},m.a.createElement(pg.a,{text:i.value,className:"p-about_tab__purpose__text"}),m.a.createElement(En.a,{onClick:r,className:"p-about_tab__purpose__edit"},"Edit")):m.a.createElement("div",{className:"p-about_tab__purpose"},m.a.createElement(En.a,{className:"p-about_tab__purpose__text",onClick:r},m.a.createElement(ue.a,{type:"pencil",size:"inherit",inline:!0,className:"margin_right_50"}),"Add a channel description\u2026"))};lG.displayName="PurposeBlock",lG.defaultProps=sG;var cG=Object(g.b)(function(e,t){var n=t.channelId;return{channel:Object(G.e)(e,n)}})(lG),uG=n("hQtm"),dG=(h.b.string.isRequired,h.b.arrayOf(h.b.object),{pinnedItems:void 0}),pG=function(e){var t=e.pinnedItems;if(!t||!t.length)return null;var n=t.map(function(e){return m.a.createElement("div",{className:"p-about_tab__pins__item",key:e.ts||e.id},m.a.createElement(uG.a,{pin:e}))});return m.a.createElement("div",{className:"p-about_tab__pins"},m.a.createElement("h3",{className:"p-about_tab__pins__heading"},"Pinned"),n)};pG.displayName="PinsBlock",pG.defaultProps=dG;var mG=Object(g.b)(function(e,t){var n=t.channelId;return{pinnedItems:Object(kt.h)(e,n)||[]}})(pG),hG=Object(mi.a)(pi.a),bG=(h.b.string.isRequired,h.b.func.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.showFile=n.showFile.bind(n),n}return u()(t,e),o()(t,[{key:"showFile",value:function(){this.props.previewFile({fileId:this.props.fileId,flexOrigin:"details",flexOriginId:"shared_files"})}},{key:"render",value:function(){var e=this.props.fileId;return m.a.createElement(hG,{className:"p-channel_details__shared_files__file",fileId:e,onClick:this.showFile})}}]),t}(p.PureComponent));bG.displayName="SharedFile";var fG=Object(g.b)(null,function(e){return{previewFile:function(){return e(jn.c.apply(void 0,arguments))}}})(bG),gG=(h.b.string.isRequired,h.b.func.isRequired,function(e){var t=e.channelId,n=e.dispatch,a=Object(p.useState)([]),r=it()(a,2),i=r[0],o=r[1];if(Object(p.useEffect)(function(){n(Object(Av.h)({channelId:t,count:10,reason:"about-view-files"})).then(function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).files,t=Object(Xm.a)(Object(Jm.a)(e,function(e){return Object(tv.o)(e)}));o(Object(ft.a)(t,"id"))})},[t,n]),!i.length)return null;var s=Object(ft.a)(i,function(e){return m.a.createElement(fG,{key:e,fileId:e})});return m.a.createElement("div",{className:"p-about_tab__files"},m.a.createElement("h3",{className:"p-about_tab__files__heading"},"Recently Shared Files"),s)});gG.displayName="FilesBlock";var _G=Object(g.b)()(gG),vG=(n("U5UL"),h.b.string.isRequired,h.b.bool,function(e){var t=e.channelId;return e.isEnabled?m.a.createElement("div",{className:"p-about_tab"},m.a.createElement("div",{className:"p-about_tab__content"},m.a.createElement(cG,{channelId:t}),m.a.createElement(mG,{channelId:t}),m.a.createElement(_G,{channelId:t})),m.a.createElement("div",{className:"p-about_tab__sidebar"},m.a.createElement(oG,{channelId:t}),m.a.createElement(aG,{channelId:t}))):null});vG.displayName="AboutTab",vG.defaultProps={isEnabled:!1};var yG=Object(g.b)(function(e){return{isEnabled:Object(j.e)(e)}})(vG),kG=(n("ZYU7"),h.b.string.isRequired,h.b.string.isRequired,h.b.array,function(e){var t=e.tabId,n=e.embedTabs,a=Object(j.b)(t);if(!1===a)return null;var r=n[a];if(!r)return null;switch(r.type){case"figma":return m.a.createElement("iframe",{title:r.label,className:"p-embed_tab__frame",src:"https://www.figma.com/embed?embed_host=astra&url="+decodeURI(r.url)});default:return null}});kG.defaultProps={embedTabs:[]};var OG=Object(g.b)(function(e,t){var n=t.channelId;return{embedTabs:Object(j.c)(e,n)}})(kG),CG=(n("y4ZY"),h.b.string,h.b.string.isRequired,h.b.bool,h.b.bool,function(e){var t=e.tab,a=e.primaryView,r=e.isEnabled,i=e.isAppIm;if(!r)return null;if(!t)return null;if(t&&0===t.indexOf("embed"))return m.a.createElement(OG,{channelId:a,tabId:t});var o=""+a+t,s=Object(p.lazy)(function(){return Promise.all([n.e(108),n.e(107)]).then(n.bind(null,"MEK5"))});switch(t){case"about":return i?m.a.createElement(cg.b,{subtype:"app_space",key:o,className:"p-tab_view__error_boundary"},m.a.createElement(yW,null)):m.a.createElement(yG,{channelId:a});case"space":return m.a.createElement(p.Suspense,{fallback:""},m.a.createElement(s,{channelId:a}));case"app":return m.a.createElement(cg.b,{subtype:"app_home",key:o,className:"p-tab_view__error_boundary"},m.a.createElement(BW,{channelId:a}));case"settings":return m.a.createElement(WW,null);default:return null}});CG.defaultProps={tab:void 0,isEnabled:!1,isAppIm:!1};var EG=Object(g.b)(function(e){var t=Object(E.a)(e);return{tab:N(e),primaryView:t,isEnabled:Object(j.e)(e)||Object(S.a)(e),isAppIm:Object(K.kb)(e,t)}})(CG),jG=n("iqWe"),SG=(h.b.string.isRequired,h.b.func.isRequired,function(e){var t=e.appId,n=e.getAppProfile,a=Object(p.useState)(null),r=it()(a,2),i=r[0],o=r[1];return Object(p.useEffect)(function(){n(t).then(function(e){return o(Object(aW.c)(null,e,null))})},[t,n]),i?m.a.createElement(fW,{appProfile:i,utaApp:!0}):m.a.createElement(ci.a,{className:"p-app_home_spinner",size:"jumbo","data-qa":"app_home_uta_spinner"})});SG.displayName="AppHomeUTA";var IG=Object(g.b)(null,function(e){return{getAppProfile:function(t){return e(Object(jG.b)({appId:t}))}}})(SG),wG=n("/xs0"),NG=Object(gt.b)("Jump the message pane to the end",function(e){e(Object(cj.c)({ts:null}))});NG.meta={name:"triggerJumpToEnd",key:"actionsKeyCommandsTriggerJumpToEndTriggerJumpToEnd",description:"Jump the message pane to the end"};var TG=NG;var AG=Object(gt.b)("Handle key commands that trigger search",function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).channelId;e(Object(Fo.markMostRecentMsgRead)({channelId:n,reason:"triggerMarkAsReadFromEscKey"})),e(Object(cj.k)(null))});AG.meta={name:"triggerMarkAsReadFromEscKey",key:"actionsKeyCommandsTriggerMarkAsReadFromEscKeyTriggerMarkAsReadFromEscKey",description:"Handle key commands that trigger search"},AG.propTypes={channelId:h.b.string};var RG=AG;var PG=Object(gt.b)("Handle the escape key trigger",function(e,t){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).event.preventDefault();var n=t(),a=Object(E.a)(n);Object(_a.a)(a)&&(!function(e,t){var n=Object(F.j)(e),a=Object($e.h)(e,t,n);return a&&!a.reachedEnd}(n,a)?function(e,t){var n=Object(G.e)(e,t);return Object(K.Ob)(n)||Object(F.f)(e)}(n,a)&&e(RG({channelId:a})):e(TG()))});PG.meta={name:"handleEscape",key:"actionsKeyCommandsHandleEscapeHandleEscape",description:"Handle the escape key trigger"},PG.propTypes={event:h.b.object.isRequired};var MG=PG,xG=Object(gt.b)("Handle key commands that trigger search",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.event,r=n.keyCode;a.preventDefault(),r===wg.codes.f?e(Object(ry.b)()):e(Object(ry.c)())});xG.meta={name:"triggerSearchFromKeyCommand",key:"actionsKeyCommandsTriggerSearchFromKeyCommandTriggerSearchFromKeyCommand",description:"Handle key commands that trigger search"},xG.propTypes={event:h.b.object.isRequired,keyCode:h.b.number.isRequired};var FG=xG,LG=n("PJFs"),DG=Object(gt.b)("Mark all channels as read",function(e,t){var n=Object(LG.a)(t());e(Object(bs.b)({markers:n,reason:"markAllAsRead"})),e(Object(cj.k)(null)),e(Object(hs.b)())});DG.meta={name:"markAllAsRead",key:"actionsMarkAllAsReadMarkAllAsRead",description:"Mark all channels as read"},DG.propTypes={};var UG=DG,BG=new B.b("client"),qG=(h.b.func.isRequired,h.b.func.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={dontAskAgain:!1},n.onGo=n.onGo.bind(n),n.onCheckboxToggle=n.onCheckboxToggle.bind(n),n}return u()(t,e),o()(t,[{key:"onCheckboxToggle",value:function(){this.setState(function(e){return{dontAskAgain:!e.dontAskAgain}})}},{key:"onGo",value:function(){this.state.dontAskAgain&&this.props.setUserPrefByApi({pref:"confirm_clear_all_unreads",value:!1}),this.props.markAllAsRead()}},{key:"render",value:function(){var e=this.state.dontAskAgain;return m.a.createElement(nn.b,{"data-qa":"shift_escape_confirm_dialog",title:BG.t("Clear all unreads?"),goButtonText:BG.t("Yes, clear all!"),onGo:this.onGo,showCancelButton:!0},m.a.createElement("p",null,BG.rt("<b>Shift+esc</b> will clear all unread messages and notifications. Are you sure you want to do this? It\u2019s liberating\u2026 but there\u2019s no going back.")),m.a.createElement(ja.a,{htmlFor:"dont_ask_again",type:"inline",text:BG.t("Don\u2019t ask me again, please")},m.a.createElement(Sa.a,{id:"dont_ask_again",checked:e,onChange:this.onCheckboxToggle})))}}]),t}(m.a.PureComponent));qG.displayName="ShiftEscapeConfirmDialog";var HG=Object(g.b)(null,function(e){return{markAllAsRead:function(){return e(UG.apply(void 0,arguments))},setUserPrefByApi:function(){return e(Tn.f.apply(void 0,arguments))}}})(qG),WG=Object(gt.b)("Opens the Channel Create modal in client",function(e){return e(Object(tn.e)({element:m.a.createElement(HG,null)}))});WG.meta={name:"openShiftEscapeConfirmDialog",key:"actionsOpenShiftEscapeConfirmDialogOpenShiftEscapeConfirmDialog",description:"Opens the Channel Create modal in client"},WG.propTypes={};var GG=WG,KG=Object(gt.b)("Handle key commands that trigger search",function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).event;if(!n.repeat){n.preventDefault();var a=t();if(Object(Zt.j)(a,"confirm_clear_all_unreads"))e(GG());else{var r=Object(LG.a)(a);e(Object(bs.b)({markers:r,reason:"triggerMarkAllAsReadFromEscKey"})),e(Object(cj.k)(null)),e(Object(hs.b)())}}});KG.meta={name:"triggerMarkAllAsReadFromEscKey",key:"actionsKeyCommandsTriggerMarkAllAsReadFromEscKeyTriggerMarkAllAsReadFromEscKey",description:"Handle key commands that trigger search"},KG.propTypes={event:h.b.object.isRequired};var VG=KG,zG=Object(gt.b)("Cmd+Shift+\\ handler",function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).event,a=Object(Ct.a)({getState:t,label:"GLOBAL-RXN-SHORTCUT"}),r=Object(E.a)(t()),i=Ca.H.MESSAGE_PANE,o=Object(_a.a)(r)?r:void 0,s=void 0,l=document.activeElement;if(Object(Sd.a)(l)){var c=void 0;if(Object(YD.a)(document.activeElement,function(e){var t=e.classList.contains("p-threads_footer__input");return t&&(c=e.querySelector(".p-message_input_field").getAttribute("data-thread-key"),i=e.querySelector(".p-message_input_field").getAttribute("data-view-context")),t}),c){var u=Object(Pn.a)(c);o=u.channelId,s=u.threadTs}}var d=Object(Ci.a)({viewContext:i,channelId:o,threadTs:s});d?d.openReactionPopoverForLastMessage?(d.openReactionPopoverForLastMessage(),n.preventDefault()):a.warn("No openReactionPopoverForLastMessage for "+i+"-"+o+"-"+s):a.info("No input for "+i+"-"+o+"-"+s)});zG.meta={name:"triggerReactionPopoverForLastMessage",key:"actionsKeyCommandsTriggerReactionPopoverForLastMessageTriggerReactionPopoverForLastMessage",description:"Cmd+Shift+\\ handler"},zG.propTypes={event:h.b.object.isRequired};var YG=zG,QG=n("u4Vc"),XG=(n("PQ52"),new B.b("keyboard_shortcuts")),JG=(h.b.func.isRequired,h.b.func.isRequired,h.b.string,h.b.object,{keyboardLocale:null,telemeter:{count:d.a}}),ZG=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.closeAndShowKeyboardShortcuts=n.closeAndShowKeyboardShortcuts.bind(n),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.telemeter.count("displayed_keyboard_shortcuts_coachmark")}},{key:"componentWillUnmount",value:function(){this.props.telemeter.count("dismissed_keyboard_shortcuts_coachmark")}},{key:"getSlashKey",value:function(){var e=this.props.keyboardLocale;return Object(B.i)("/",{kb:e})}},{key:"closeAndShowKeyboardShortcuts",value:function(){this.props.telemeter.count("opened_keyboard_shortcuts_fp_from_coachmark"),this.props.showKeyboardShortcuts()}},{key:"render",value:function(){var e=Object(ce.p)()?XG.t("Cmd"):XG.t("Ctrl"),t=this.getSlashKey(),n=XG.t("F6");return m.a.createElement($S.a,{closeModal:this.props.closeModal},m.a.createElement($S.h,null,m.a.createElement($S.j,{title:XG.t("Navigating Slack with a keyboard?")})),m.a.createElement($S.d,null,m.a.createElement($S.e,null,m.a.createElement("p",null,XG.t("Shortcuts make it easier to get around in Slack. Here are a few you might find helpful:")),m.a.createElement("ul",{className:"p-keyboard_shortcut_prompt__list"},m.a.createElement("li",{className:"p-keyboard_shortcut_prompt__list_item"},m.a.createElement("span",{className:"c-keyboard_key"},m.a.createElement(ta.b,{type:"arrow-up-medium"})),m.a.createElement("span",{className:"c-keyboard_key"},m.a.createElement(ta.b,{type:"arrow-down-medium"}))," ",XG.t(" Move focus through messages")),m.a.createElement("li",{className:"p-keyboard_shortcut_prompt__list_item"},!br.Q&&m.a.createElement("span",{className:"c-keyboard_key"},e),m.a.createElement("span",{className:"c-keyboard_key"},n)," ",XG.t(" Move focus to the next section")),m.a.createElement("li",{className:"p-keyboard_shortcut_prompt__list_item"},!br.Q&&m.a.createElement("span",{className:"c-keyboard_key"},e),m.a.createElement("span",{className:"c-keyboard_key"},XG.t("K"))," ",XG.t("Quick Switcher"))),m.a.createElement("p",{className:"no_bottom_margin"},XG.rt('And that\u2019s just the beginning. To view the full list of keyboard shortcuts, just press <span class="c-keyboard_key">{cmd_key}</span> + <span class="c-keyboard_key">{slash_key}</span>',{cmd_key:e,slash_key:t})))),m.a.createElement($S.f,null,m.a.createElement($S.g,null,m.a.createElement(_e.d,{type:"outline",onClick:this.closeAndShowKeyboardShortcuts},XG.t("View More")),m.a.createElement($S.c,{type:"primary"},XG.t("Got it")))))}}]),t}(p.Component);ZG.displayName="KeyboardShortcutPrompt",ZG.defaultProps=JG;var $G={closeModal:function(){return tn.a.apply(void 0,arguments)},showKeyboardShortcuts:function(){return jn.h.apply(void 0,arguments)}},eK=Object(g.b)(function(e){return{telemeter:Object(KC.c)({state:e})}},$G)(ZG),tK=Object(Bi.a)(eK),nK=Object(gt.b)("Opens the keyboard shortcut prompt",function(e){e(Object(tn.e)({element:m.a.createElement(tK,null),name:QG.a}))});nK.meta={name:"openKeyboardShortcutPrompt",key:"componentsKeyboardShortcutPromptKeyboardShortcutPromptOpenKeyboardShortcutPrompt",description:"Opens the keyboard shortcut prompt"};var aK=0,rK=void 0,iK=Object(gt.b)("After 5 consecutive tabs we show a dialog explaining kb shortcuts",function(e){if(4===aK)return e(nK()),e(Object(Tn.f)({pref:"seen_keyboard_shortcuts_coachmark",value:!0})),clearTimeout(rK),void(aK=0);aK+=1,clearTimeout(rK),rK=setTimeout(function(){aK=0},1e3)});iK.meta={name:"triggerKeyboardShortcutsPrompt",key:"actionsKeyCommandsTriggerKeyboardShortcutsPromptTriggerKeyboardShortcutsPrompt",description:"After 5 consecutive tabs we show a dialog explaining kb shortcuts"};var oK=iK,sK=n("Nc5J"),lK=n("0Mct"),cK=Object(gt.b)("Toggles Dark Mode; for development only.",function(e,t){var n=Object(D.c)(t());e(Object(D.f)("light"===n?"dark":"light"))});cK.meta={name:"triggerDarkModeToggle",key:"actionsKeyCommandsTriggerDarkModeToggleTriggerDarkModeToggle",description:"Toggles Dark Mode; for development only."};var uK=cK,dK=n("YYb+"),pK=n("ZpWa"),mK=[{keys:["mod+f","mod+g"],handler:FG,ignoreIf:function(e){return!Object(Ed.e)(e)||!br.Q&&!Object(Zt.j)(e,"f_key_search")}},{keys:["mod+k"],handler:yA.a,ignoreIf:function(e){var t=Object(dK.e)(e)||Object(yA.b)(e);return!Object(Ed.e)(e)&&!t||!br.Q&&!Object(Zt.j)(e,"k_key_omnibox")}},{keys:["mod+t"],handler:yA.a,ignoreIf:function(e){var t=Object(dK.e)(e)||Object(yA.b)(e);return!br.Q||!Object(Ed.e)(e)&&!t}},{keys:["esc"],handler:MG,ignoreIf:function(e){return!Object(Ed.e)(e)}},{keys:["shift+esc"],handler:VG,ignoreIf:function(e){return!Object(Ed.e)(e)}},{keys:["mod+shift+y"],handler:function(e){return e.event.preventDefault(),Object(xy.a)({fromKeyboardShortcut:!0})},ignoreIf:function(e){return!Object(Ed.e)(e)}},{keys:["mod+,"],handler:function(){return Object(ul.a)({fromKeyboardShortcut:!0})},ignoreIf:function(e){return!Object(Ed.e)(e)||!(Object(ce.p)()&&br.Q)}},{keys:["mod+shift+k"],handler:function(e){return e.event.preventDefault(),Object(dO.a)()},ignoreIf:function(e){return!Object(Ed.e)(e)}},{keys:["mod+shift+l"],handler:function(){return Object(ge.a)()},ignoreIf:function(e){return!Object(Ed.e)(e)}},{keys:["mod+."],handler:jn.s,ignoreIf:function(e){return!Object(Ed.e)(e)}},{keys:["mod+/"],handler:function(e){var t=e.event,n=e.isScreenReaderEnabled;t.preventDefault();var a=n?"keyboard_shortcuts":null;return Object(jn.t)({focusKey:a})},ignoreIf:function(e){return!Object(Ed.e)(e)&&!Object(Ed.d)(e)}},{keys:["mod+shift+a"],handler:function(e){return e.event.preventDefault(),Object(sK.a)()},ignoreIf:function(e){return!Object(Ed.e)(e)||!Object(Zt.j)(e,"enable_unread_view")}},{keys:["mod+shift+t"],handler:lK.a,ignoreIf:function(e){return!Object(Ed.e)(e)||!br.Q}},{keys:["mod+shift+m"],handler:function(e){var t=e.event,n=e.isScreenReaderEnabled;t.preventDefault();var a=n?"activity":null;return Object(jn.q)({focusKey:a})},ignoreIf:function(e){return!(!UO.a.chrome||br.Q)||!Object(Ed.e)(e)}},{keys:["mod+shift+s"],handler:function(e){var t=e.isScreenReaderEnabled?"stars":null;return Object(jn.v)({focusKey:t})},ignoreIf:function(e){return UO.a.firefox||!Object(Ed.e)(e)}},{keys:["mod+shift+e"],handler:jn.u,ignoreIf:function(e){return UO.a.firefox||!Object(Ed.e)(e)}},{keys:["mod+shift+i"],handler:function(e){var t=e.isScreenReaderEnabled?"info":null;return Object(jn.r)({focusKey:t})},ignoreIf:function(e){return!br.Q||!Object(Ed.e)(e)||!Object(_a.a)(Object(E.a)(e))}},{keys:["mod+shift+\\"],handler:YG,ignoreIf:function(e){return!Object(Ed.e)(e)}},{keys:["command+left"],handler:function(e){var t=e.event;return yn({event:t,fromKeyboardShortcut:!0})},ignoreIf:function(e){return!Object(ce.p)()||!Object(Ed.e)(e)||Object(Sd.a)(document.activeElement)}},{keys:["command+right"],handler:function(e){var t=e.event;return kn({event:t,fromKeyboardShortcut:!0})},ignoreIf:function(e){return!Object(ce.p)()||!Object(Ed.e)(e)||Object(Sd.a)(document.activeElement)}},{keys:["command+["],handler:function(e){var t=e.event;return yn({event:t,fromKeyboardShortcut:!0})},ignoreIf:function(e){return!Object(un.a)(e)||!Object(ce.p)()}},{keys:["command+]"],handler:function(e){var t=e.event;return kn({event:t,fromKeyboardShortcut:!0})},ignoreIf:function(e){return!Object(un.a)(e)||!Object(ce.p)()}},{keys:["alt+left"],handler:function(e){var t=e.event;return yn({event:t,fromKeyboardShortcut:!0})},ignoreIf:function(e){return!Object(un.a)(e)||Object(ce.p)()}},{keys:["alt+right"],handler:function(e){var t=e.event;return kn({event:t,fromKeyboardShortcut:!0})},ignoreIf:function(e){return!Object(un.a)(e)||Object(ce.p)()}},{keys:["tab"],handler:oK,ignoreIf:function(e){return!Object(Ed.e)(e)||Object(Sd.a)(document.activeElement)||Object(Zt.j)(e,"seen_keyboard_shortcuts_coachmark")}},{keys:["command+option+shift+d"],handler:uK,ignoreIf:function(e){return!(Object(pK.a)(e)&&(ce.k||ce.n))}}],hK=n("KU1P"),bK=n("mqWI");h.b.node.isRequired,h.b.object.isRequired;function fK(e){var t=e.children,n=e.logger;return m.a.createElement(bK.a.Provider,{value:n},t)}fK.displayName="LoggerContextProvider";var gK=Object(g.b)(function(e){return{logger:Object(Ct.a)({state:e})}})(fK),_K=n("5APj");h.b.node.isRequired;function vK(e){var t=e.children;return m.a.createElement(_K.a,null,m.a.createElement(hK.a,null,m.a.createElement(gK,null,t)))}vK.displayName="AppContextProviders";var yK=vK,kK=(n("8IIt"),h.b.string.isRequired,function(e){var t=e.channelId;return m.a.createElement("div",{className:"p-channel_tabs__header"},m.a.createElement(Tj,{channelId:t}),m.a.createElement("div",{className:"p-channel_tabs__header__buttons"},m.a.createElement(aI,{channelId:t}),m.a.createElement(vI,{channelId:t,tooltipPosition:"bottom-right"})))});kK.displayName="TabsHeader";var OK=Object(g.b)(function(e){return{channelId:Object(E.a)(e)}})(kK),CK=(h.b.string.isRequired,h.b.oneOfType([h.b.string,h.b.bool]),h.b.oneOfType([h.b.object,h.b.bool]),h.b.bool.isRequired,h.b.bool.isRequired,h.b.bool.isRequired,h.b.bool.isRequired,h.b.bool.isRequired,h.b.bool.isRequired,h.b.bool.isRequired,h.b.bool.isRequired,h.b.bool.isRequired,h.b.func.isRequired,h.b.func.isRequired,h.b.func.isRequired,h.b.func.isRequired,h.b.func.isRequired,h.b.func.isRequired,{channelName:void 0,currentChannel:{}}),EK=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderActionsMenu=n.renderActionsMenu.bind(n),n.state={globalActionsButtonActive:!1},n}return u()(t,e),o()(t,[{key:"renderActionsMenu",value:function(e){var t=this,n=this.props,a=n.teamName,r=n.currentChannel,i=n.channelName,o=n.showCreateChannelAction,s=n.showInvitePeopleGlobalAction,l=n.showStartCallAction,c=n.showReminderAction,u=n.showContextualActions,h=n.showInvitePeopleChannelAction,b=n.showChannelCallAction,f=[];if(n.isIAP1Normcore&&f.push({label:"New message",click:function(){return t.props.openComposerPage()},dataQa:"global_actions_menu_new_message",key:"global-actions-menu-new-message"}),c&&f.push({label:"New reminder",click:function(){return d.a},dataQa:"global_actions_menu_new_reminder",key:"global-actions-menu-new-reminder"}),o&&f.push({label:"New channel",click:function(){return t.props.openChannelCreateModal()},dataQa:"global_actions_menu_create_channel",key:"global-actions-menu-create-channel"}),s&&f.push({label:m.a.createElement(p.Fragment,null,"Invite people to ",m.a.createElement("strong",null,a)),click:function(){return t.props.openInviteModal()},dataQa:"global_actions_menu_invite",key:"global-actions-menu-invite"}),l&&f.push({show:!1,label:"Start a call",click:function(){return d.a},dataQa:"global_actions_menu_call",key:"global-actions-menu-call"}),u){var g=Object(K.Bb)(r)?m.a.createElement(p.Fragment,null,m.a.createElement(ue.a,{type:"lock",size:"inherit"})," ",i):i;f.push({type:"separator"}),h&&f.push({label:m.a.createElement(p.Fragment,null,"Invite people to ",m.a.createElement("strong",null,g)),click:function(){if(Object(K.pb)(r)){var e=Object(K.I)(r);t.props.openDmBrowserModal({memberIds:e,source:xE.b.MPIM})}else t.props.startChannelInviteModal({channelId:r.id,entryPoint:"global_actions_menu_invite_to_channel"})},dataQa:"global_actions_menu_invite_to_channel",key:"global-actions-menu-invite_to_channel"}),b&&f.push({show:!1,label:m.a.createElement(p.Fragment,null,"Start a call with ",m.a.createElement("strong",null,g)),click:function(){return t.props.startCall()},dataQa:"global_actions_menu_channel_call",key:"global-actions-menu-channel-call"})}return f.push({type:"separator"},{label:"More actions...",click:function(){return d.a},dataQa:"global_actions_menu_more",key:"global-actions-menu-more"}),m.a.createElement("div",{className:"p-ia__actions_menu"},m.a.createElement(na.a,ye()({},e,{template:f})))}},{key:"render",value:function(){var e=this,t=this.props,n=t.isIAP1Normcore,a=t.isIAP1TopSearch;return m.a.createElement(na.e,{renderMenu:this.renderActionsMenu,position:"bottom-left",offsetY:6,onClick:function(){e.setState(function(){return{globalActionsButtonActive:!0}})},onClose:function(){e.setState(function(){return{globalActionsButtonActive:!1}})}},m.a.createElement(mg.c,{tip:"Quick actions",position:"bottom"},m.a.createElement(_e.c,{className:f()("p-ia__sidebar_header__button p-ia__sidebar_header__button--actions",{"p-ia__sidebar_header__button--active":this.state.globalActionsButtonActive,"p-ia__sidebar_header__button--primary":n||a})},m.a.createElement(ue.a,{type:"plus"}))))}}]),t}(p.Component);EK.displayName="GlobalActions",EK.defaultProps=CK;var jK=Object(g.b)(function(e){var t=Object(we.d)(e),n=Object(E.a)(e),a=Object(_a.a)(n),r=a&&Object(G.e)(e,n),i=a&&!Object(K.hb)(r)&&(Object(Bb.K)(e,r.id)||Object(K.pb)(r)),o=a||Object(K.hb)(r);return{teamName:Object(De.f)(t),channelName:a&&Object(K.x)(e,r),currentChannel:r,isIAP1Normcore:Object(pE.c)(e),isIAP1TopSearch:Object(pE.d)(e),showCreateChannelAction:Object(Bb.D)(e)||Object(Bb.C)(e),showStartCallAction:!1,showReminderAction:!1,showContextualActions:i||o,showChannelCallAction:o,showInvitePeopleGlobalAction:Object(iC.d)(e),showInvitePeopleChannelAction:i}},function(e){return{openChannelCreateModal:function(){return e(x.a.apply(void 0,arguments))},openInviteModal:function(){return e(M.a.apply(void 0,arguments))},startChannelInviteModal:function(){return e(FE.b.apply(void 0,arguments))},openDmBrowserModal:function(){return e(dO.a.apply(void 0,arguments))},openComposerPage:function(){return e(Wf.apply(void 0,arguments))},startCall:function(){return e(TE.d.apply(void 0,arguments))}}})(EK),SK={variant:h.b.oneOfType([h.b.number,h.b.array]),all:h.b.bool,iAPhase1IsEnabled:h.b.bool.isRequired,currentVariant:h.b.number,children:h.b.node.isRequired},IK={variant:void 0,all:!1,currentVariant:void 0};function wK(e){var t=e.variant,n=e.all,a=e.iAPhase1IsEnabled,r=e.currentVariant,i=e.children;return a?n?i:Object(Sr.a)(t)&&Object(fs.a)(t,r)?i:t===r?i:null:null}wK.propTypes=SK,wK.defaultProps=IK;var NK=Object(g.b)(function(e){return{iAPhase1IsEnabled:Object(pE.b)(e),currentVariant:Object(Zt.j)(e,"iap1_lab")}})(wK),TK=(n("tx91"),h.b.string.isRequired,h.b.bool.isRequired,h.b.bool.isRequired,h.b.func.isRequired,h.b.func.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderMainMenu=n.renderMainMenu.bind(n),n.state={mainMenuButtonActive:!1},n}return u()(t,e),o()(t,[{key:"renderMainMenu",value:function(e){var t=this,n=[{label:"Apps",icon:m.a.createElement(ue.a,{type:"gn-menu"}),click:function(){return Object(nb.g)(ab.a,{entityId:"apps"})},dataQa:"start_menu_apps",key:"start-menu-apps",pageId:"Papps"},{label:"Directory",icon:m.a.createElement(ue.a,{type:"team-directory"}),click:function(){return Object(nb.g)(ab.a,{entityId:"directory-page"})},dataQa:"start_menu_directory",key:"start-menu-directory",pageId:"Pdirectory"},{label:"Files",icon:m.a.createElement(ue.a,{type:"all-files-alt"}),click:function(){return Object(nb.g)(ab.a,{entityId:"files-page"})},dataQa:"start_menu_files",key:"start-menu-files",pageId:"Pfiles"},{label:"Help",icon:m.a.createElement(ue.a,{type:"question-circle"}),click:function(){return t.props.openHelpModal({trigger:"start_menu"})},dataQa:"start_menu_help",key:"start-menu-help"}];return m.a.createElement(na.a,ye()({},e,{template:n}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.teamName,a=t.isIAP1Normcore,r=t.isIAP1TopSearch;return m.a.createElement("div",{className:f()("p-ia__sidebar_header",{"p-ia__sidebar_header--normcore":a||r})},m.a.createElement(NK,{variant:[pE.a.Normcore,pE.a.TopSearch]},m.a.createElement(na.e,{renderMenu:this.renderMainMenu,position:"bottom-left",offsetY:6,offsetX:-23,width:186,allowanceX:-50,onClick:function(){e.setState(function(){return{mainMenuButtonActive:!0}})},onClose:function(){e.setState(function(){return{mainMenuButtonActive:!1}})}},m.a.createElement(fh.a,{className:f()("p-ia__sidebar_header__button p-ia__sidebar_header__button--main-menu",{"p-ia__sidebar_header__button--active":this.state.mainMenuButtonActive})},m.a.createElement(ue.a,{type:"grabby-patty"})))),m.a.createElement("div",{className:"p-ia__sidebar_header__team_name"},n),m.a.createElement(NK,{variant:pE.a.Windows3000},m.a.createElement(jK,{icon:"plus"}),m.a.createElement(qi.c,{delay:qi.a,position:"bottom",tip:"New message"},m.a.createElement(fh.a,{onClick:this.props.openComposerPage,className:"p-ia__sidebar_header__button p-ia__sidebar_header__button--compose p-ia__sidebar_header__button--primary"},m.a.createElement(ue.a,{type:"compose-dm"})))),m.a.createElement(NK,{variant:[pE.a.Normcore,pE.a.TopSearch]},m.a.createElement(jK,null)))}}]),t}(p.Component));TK.displayName="SidebarHeader";var AK=Object(g.b)(function(e){return{teamName:Object(De.f)(Object(we.d)(e)),isIAP1Normcore:Object(pE.c)(e),isIAP1TopSearch:Object(pE.d)(e)}},function(e){return{openHelpModal:function(){return e(TO.a.apply(void 0,arguments))},openComposerPage:function(){return e(Wf.apply(void 0,arguments))}}})(TK),RK=n("/K2e"),PK=(n("J0/G"),h.b.object,h.b.string.isRequired,h.b.string,h.b.string,h.b.bool,h.b.func.isRequired,{menuProps:{},customStatusText:void 0,customStatusEmoji:void 0,inDnd:!1,currentChannel:void 0}),MK=function(e){var t=e.menuProps,n=e.currentUserId,a=e.customStatusText,r=e.customStatusEmoji,i=e.inDnd,o=e.currentChannel,s=e.dispatch,l=r&&m.a.createElement("div",{className:"p-ia__user_menu__blurb__status"},m.a.createElement(pg.a,{text:a?r+" "+a:r,emojiSize:Gs.a.SMALL,showTooltips:!1,noJumbomoji:!0,noLinking:!0,noSpecials:!0,noHighlights:!0,noEmojiText:!0,preventCopyPaste:!0,stopAnimations:!0})),c=[{type:"custom",children:m.a.createElement("div",{className:"p-ia__user_menu__blurb"},m.a.createElement(LK,{size:36}),m.a.createElement("div",{className:"p-ia__user_menu__blurb__info"},m.a.createElement(Dv.a,{id:n,className:"p-ia__user_menu__blurb__name"}),l))},{type:"separator"},{label:r?"Edit status":"Set status",shortcut:Object(ce.p)()?"\u2318\u21e7Y":"Ctrl+Shift+Y",click:function(){return s(Object(xy.a)())}},{label:"View profile",click:function(){return s(Object(jn.j)())}},{type:"submenu",label:"Notifications",renderSubmenu:function(e){return i?m.a.createElement(iO,{menuProps:e,currentChannel:o}):m.a.createElement(Jk.a,{menuProps:e,currentChannel:o})}},{type:"separator"},{label:"Preferences",shortcut:Object(ce.p)()&&br.Q&&"\u2318,",click:function(){return Object(nb.g)(ab.a,{entityId:"preferences"})}},{label:"Help & feedback",click:function(){return s(Object(TO.a)({trigger:"user_menu"}))}}];return m.a.createElement(RK.a,ye()({},t,{template:c}))};MK.displayName="UserMenu",MK.defaultProps=PK;var xK=Object(g.b)(function(e){var t=Object(y.c)(e),n=Object(xo.f)(e,t),a=Object(E.a)(e);return{currentUserId:t,customStatusText:n.text,customStatusEmoji:n.emoji,inDnd:!!Object(My.c)(e),currentChannel:Object(G.e)(e,a)||void 0}})(MK),FK=(h.b.number.isRequired,h.b.bool,h.b.string.isRequired,function(e){var t=e.size,n=e.hasMenu,a=e.currentUserId,r=Object(p.useCallback)(function(e){return m.a.createElement(xK,{menuProps:e})},[]),i=m.a.createElement("div",{className:"p-ia__nav__user"},m.a.createElement(Fy.c,{userId:a,size:t,isInteractive:!1,className:"p-ia__nav__user__avatar"}),m.a.createElement(nS.a,{memberId:a,inline:!1,className:"p-ia__nav__user__presence--stroke"}),m.a.createElement(nS.a,{memberId:a,inline:!1,className:"p-ia__nav__user__presence"}));return n?m.a.createElement(Jv.a,{renderMenu:r,position:"bottom-right",offsetY:6,offsetX:4,allowanceX:8},m.a.createElement(fh.a,{className:"p-ia__nav__user__button"},i)):i});FK.defaultProps={hasMenu:!1};var LK=Object(g.b)(function(e){return{currentUserId:Object(y.c)(e)}})(FK),DK=(n("CDIG"),h.b.func.isRequired,function(e){var t=e.dispatch,n=Object(p.useCallback)(function(){t(Object(ry.a)())},[t]),a=Object(p.useCallback)(function(){t(yn({fromKeyboardShortcut:!1}))},[t]),r=Object(p.useCallback)(function(){t(kn({fromKeyboardShortcut:!1}))},[t]),i=Object(ce.u)()?m.a.createElement(p.Fragment,null,m.a.createElement(fh.a,{className:"p-ia__nav__history p-ia__nav__history--back",onClick:a},m.a.createElement(ue.a,{type:"chevron-medium-left"})),m.a.createElement(fh.a,{className:"p-ia__nav__history p-ia__nav__history--forward",onClick:r},m.a.createElement(ue.a,{type:"chevron-medium-right"}))):null;return m.a.createElement("div",{className:"p-ia__nav"},i,m.a.createElement(fh.a,{className:"p-ia__nav__search",onClick:n},m.a.createElement(ue.a,{type:"search-medium",inline:!0,className:"small_right_margin"}),"Search"),m.a.createElement(LK,{size:26,hasMenu:!0}))});DK.displayName="Nav";var UK=Object(g.b)(null)(DK),BK=(h.b.string,h.b.bool,h.b.bool,h.b.number,h.b.func.isRequired,{primaryView:void 0,showTopic:!1,hideHeader:!1,iaVariant:0}),qK=function(e){var t=e.primaryView,n=e.showTopic,a=e.hideHeader,r=e.iaVariant,i=e.toggleDetails;if(a)return null;var o=n&&m.a.createElement(tS,{channelId:t}),s=function(){if("Vall_threads"===t)return m.a.createElement("div",{className:"p-ia__view_header__title"},"Threads");if(t&&"P"===t[0]){var e=Sk(t);if(e)return e.header?e.header({className:"p-ia__view_header__page_header"}):m.a.createElement("div",{className:"p-ia__view_header__title"},e.label())}return m.a.createElement("div",{className:"p-ia__view_header__info"},m.a.createElement(Sj,{channelId:t}),m.a.createElement(xj,{channelId:t,omitSeparator:!0}),o)}(),l=Object(ce.u)()&&(r===pE.a.Windows3000||r===pE.a.Normcore);return m.a.createElement("div",{className:f()("p-ia__view_header",{"p-ia__view_header--with-history":l})},m.a.createElement(NK,{variant:[pE.a.Windows3000,pE.a.Normcore]},l&&m.a.createElement(xA,null)),s,m.a.createElement("div",{className:"p-ia__view_header__spacer"}),Object(_a.a)(t)&&m.a.createElement(Qp.a,{icon:"info-circle",onClick:i}),m.a.createElement(NK,{variant:[pE.a.Windows3000,pE.a.Normcore]},m.a.createElement(LK,{size:32,hasMenu:!0})))};qK.displayName="ViewHeader",qK.defaultProps=BK;var HK=Object(g.b)(function(e){var t=Object(E.a)(e),n=Sk(t),a=Object(_a.a)(t)&&Object(G.e)(e,t);return{primaryView:t,showTopic:Object(K.Cb)(a)||Object(K.Bb)(a),hideHeader:n&&n.isChannelHeaderHidden&&n.isChannelHeaderHidden(e),iaVariant:Object(Zt.j)(e,"iap1_lab")}},function(e){return{toggleDetails:function(){return e(Object(jn.r)())}}})(qK),WK=n("9rZX"),GK=n.n(WK),KK=n("VwqH"),VK=n("7Ztl"),zK=(n("Lpwv"),n("+rBa")),YK=n("1YQg"),QK=n("59b6"),XK=Object(g.b)(function(e){var t=Object(VK.c)(e),n=Object(QK.b)(e);return{invitingCall:t&&t.id,callTitle:n}},function(e){return{onAcceptCall:function(t){return e(Object(zK.a)(t))},onRejectCall:function(t){return e(Object(zK.b)({id:t,response:YK.c.Reject}))}}})(function(e){var t=e.invitingCall,n=e.onAcceptCall,a=e.onRejectCall,r=e.callTitle;if(Object(qk.a)()&&Object(Ct.b)().error("BrowserIncomingCall should only be instantiated in a browser."),!t)return null;return m.a.createElement(GK.a,{isOpen:!0,overlayClassName:"p-browser_incoming_call--shroud",shouldFocusAfterRender:!0,shouldReturnFocusAfterClose:!0,style:{content:{background:"transparent",border:"none",left:"50%",margin:"0",padding:"0",width:"200px"}},contentLabel:r},m.a.createElement("div",{className:"p-browser_incoming_call"},m.a.createElement(KK.a,{callId:t,onAcceptCall:n,onRejectCall:a})))}),JK=n("Gmrf"),ZK=(h.b.string,h.b.func,{lastError:void 0,enqueueToast:d.a}),$K=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.lastError&&e.lastError!==this.props.lastError&&this.props.enqueueToast({element:m.a.createElement(Cn.b,{position:"bottom-right",offsetY:66,shouldAutoFade:!1},m.a.createElement(ta.b,{type:"exclamation-circle",className:"margin_right_50"}),m.a.createElement("span",null,e.lastError))})}},{key:"render",value:function(){return null}}]),t}(p.Component);$K.displayName="DebugError",$K.defaultProps=ZK;var eV={enqueueToast:en.c},tV=Object(g.b)(function(e){var t=Object(JK.b)(e);return{lastError:Object(y.m)(e,"feature_tinyspeck")?t&&t.toString&&t.toString():void 0}},eV)($K),nV=n("UUlk"),aV=n("uFGw"),rV=n("J9z2"),iV=n("AUAP"),oV=n("GTwG"),sV=n("mOAw"),lV=n("u9my"),cV=n("K5QD"),uV=n("2Jxo"),dV=Object(ba.b)("TS.ui.comments.startDelete"),pV=new B.b("comments"),mV=(h.b.bool,h.b.func,h.b.string,h.b.string,{isStarred:!1,updateStar:d.a,commentId:void 0,fileId:void 0}),hV=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderMenu=n.renderMenu.bind(n),n.toggleStar=n.toggleStar.bind(n),n.deleteComment=n.deleteComment.bind(n),n}return u()(t,e),o()(t,[{key:"toggleStar",value:function(){var e=this.props,t=e.commentId,n=e.fileId,a=e.isStarred;t&&n&&this.props.updateStar(!a,{file_comment:t,file_comment_file:n})}},{key:"deleteComment",value:function(){var e=this.props,t=e.commentId,n=e.fileId;t&&n&&dV(n,t)}},{key:"renderMenu",value:function(e){var t=this.props.isStarred;return m.a.createElement(na.f,e,m.a.createElement(na.b,{label:t?pV.t("Unstar this file comment"):pV.t("Star this file comment"),onSelected:this.toggleStar}),m.a.createElement(na.d,null),m.a.createElement(na.b,{label:pV.t("Delete comment"),danger:!0,onSelected:this.deleteComment}))}},{key:"render",value:function(){return m.a.createElement(na.e,{renderMenu:this.renderMenu,position:"left-bottom"},m.a.createElement(fh.a,{className:"p-comment__actions","aria-label":pV.t("Show more actions")},m.a.createElement(ta.b,{type:"cog",size:"inherit"})))}}]),t}(p.PureComponent);hV.displayName="CommentActions",hV.defaultProps=mV;var bV=Object(g.b)(null,{updateStar:Aj.a})(hV),fV=(n("2ekl"),new B.b("comments")),gV=(h.b.bool,h.b.shape({id:h.b.string,user:h.b.string,timestamp:h.b.number,comment:h.b.string}).isRequired,h.b.string,{time24:!1,fileId:void 0}),_V=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.comment,n=e.time24,a=e.fileId,r=t.user,i=t.timestamp,o=t.comment,s=t.is_starred,l=t.id;return m.a.createElement("div",{className:"p-comment"},m.a.createElement("div",{className:"p-comment__header"},r?m.a.createElement(B_.a,{userId:r}):null,m.a.createElement("span",{className:"p-comment__timestamp"},fV.t("{date} at {time}",{date:Object(Zh.a)(i,{shortenMonth:!0}),time:Object(Bf.a)(i,{do24hrTime:n})})),m.a.createElement(bV,{isStarred:s,commentId:l,fileId:a})),m.a.createElement("div",{className:"p-comment__body"},m.a.createElement(pg.a,{text:o,memberId:r})))}}]),t}(p.PureComponent);_V.displayName="Comment",_V.defaultProps=gV;var vV=Object(g.b)(function(e){return{time24:Object(Zt.j)(e,"time24")}})(_V),yV=(n("G4eq"),new B.b("comments")),kV=(h.b.func,h.b.number,h.b.bool,{toggleList:d.a,commentCount:0,expanded:!1});function OV(e){var t=e.toggleList,n=e.commentCount,a=e.expanded,r=a?yV.t("Hide older comments",{fallbackHash:"f560b67c78f367354057065ac81410a1c310432b"}):yV.t("See older comments"),i=a?"caret-down":"caret-right";return m.a.createElement("div",{className:"p-comment_list__toggle_container"},m.a.createElement(En.a,{onClick:t,"aria-expanded":a},r),m.a.createElement("span",{className:"p-comment_list__toggle_count_button",role:"presentation",onClick:t},m.a.createElement(ta.b,{type:"comment-alt"}),m.a.createElement("span",{className:"p-comment_list__toggle_count"},n),m.a.createElement(ta.b,{type:i,className:"p-comment_list__toggle_caret"})))}OV.displayName="CommentListToggle",OV.defaultProps=kV;var CV={comments:h.b.array,fileId:h.b.string},EV={comments:void 0,fileId:void 0},jV=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggle=n.toggle.bind(n),n.state={expanded:!1},n}return u()(t,e),o()(t,[{key:"toggle",value:function(){this.setState(function(e){return{expanded:!e.expanded}})}},{key:"render",value:function(){var e=this.props,t=e.comments,n=e.fileId,a=this.state.expanded;if(Object(ls.a)(t))return null;var r=t.map(function(e){var t=e.id;return m.a.createElement(vV,{key:t,comment:e,fileId:n})}),i=f()("p-comment_list",{"p-comment_list--expanded":a});return m.a.createElement("div",{className:i},m.a.createElement(OV,{expanded:a,commentCount:t.length,toggleList:this.toggle}),m.a.createElement("div",{className:"p-comment_list__comments"},r))}}]),t}(iR.a);jV.displayName="CommentList",jV.propTypes=CV,jV.defaultProps=EV;var SV=jV,IV=n("JXW8"),wV=n("5yEy"),NV=n("VfGJ"),TV=n("1Lli"),AV=n("NvKv"),RV=new B.b("file-details"),PV=(h.b.string.isRequired,h.b.shape({sharedTeamIds:h.b.arrayOf(h.b.string),teamId:h.b.string,channelId:h.b.string,channelName:h.b.string,isPublic:h.b.bool,ts:h.b.string,threadTs:h.b.string,replyCount:h.b.number}).isRequired,h.b.string,h.b.string,h.b.func,{teamIdForIcon:void 0,teamDomain:void 0,openThread:d.a}),MV=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onShareClick=n.onShareClick.bind(n),n}return u()(t,e),o()(t,[{key:"onShareClick",value:function(e){var t=this.props,n=t.share,a=t.fileId,r=t.openThread;e.preventDefault();var i=n.threadTs||n.ts,o=i!==n.ts?n.ts:null,s=a;r({channelId:n.channelId,threadTs:i,highlightTs:o,origin:"file_details",originId:s})}},{key:"getReplyCountText",value:function(e,t,n){var a=e||{},r=a.replyCount,i=a.ts,o=a.threadTs;if(!r)return null;var s="";return s=o&&i!==o?RV.t("from a thread"):RV.t("{replyCount, plural, =1 {# reply} other {# replies}}",{replyCount:r}),m.a.createElement(m.a.Fragment,null,m.a.createElement("span",{className:"p-file_details__share_metadata_dot"},"\xb7"),m.a.createElement(la.a,{href:t,onClick:n},m.a.createElement("span",{className:"p-file_details__share_metadata_reply_count"},s)))}},{key:"render",value:function(){var e=this.props,t=e.share,n=e.teamIdForIcon,a=e.teamDomain,r=void 0,i=void 0,o=void 0;return n?r={id:t.channelId,name:t.channelName,is_channel:!0,is_private:!t.isPublic,shared_team_ids:t.sharedTeamIds,team_id:n}:o=this.onShareClick,a&&(i=Object(et.u)({teamDomain:a,channelId:t.channelId,ts:t.ts,threadTs:t.threadTs})),m.a.createElement("div",{className:"p-file_details__share",key:t.channelId+"_"+t.ts},m.a.createElement(la.a,{href:i,onClick:o,className:"p-file_details__share_channel_link"},m.a.createElement(Lo.a,{channel:r,channelId:t.channelId,className:"p-file_details__share_channel",truncate:!0,truncateWidth:"100%"})),m.a.createElement("span",{className:"p-file_details__share_metadata"},m.a.createElement(AV.a,{timestamp:t.ts,relative:!0}),this.getReplyCountText(t,i,o)))}}]),t}(p.Component);MV.displayName="FileDetailsShareLocation",MV.defaultProps=PV;var xV=Object(g.b)(function(e,t){var n=t.share,a=Object(we.d)(e);if(!a)return{};var r=a.id,i=a.enterprise_id,o=a.domain,s=void 0,l=n.teamId===i&&!Object(ls.a)(n.sharedTeamIds)&&!Object(fs.a)(n.sharedTeamIds,r),c=n.teamId&&n.teamId!==r&&n.teamId!==i;if(l||c){s=Object(_b.a)(n.sharedTeamIds)||n.teamId;var u=Object(we.j)(e,[s]);o=Object(De.t)(u&&u[0])?u[0].domain:null}return{teamIdForIcon:s,teamDomain:o}},{openThread:jn.l})(MV),FV=new B.b("file-details"),LV=(Hd.a.File(),function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"getFormattedSharesData",value:function(e){var t=this,n=[];Object(qp.a)(e.public,function(e,a){Object(qp.a)(e,function(e){var r=t.formatShareData(e,a,!0);r&&n.push(r)})});Object(qp.a)(e.private,function(e,a){Object(qp.a)(e,function(e){var r=t.formatShareData(e,a,!1);r&&n.push(r)})});var a=n.concat([]);return Object(TV.a)(a,"ts","desc")}},{key:"formatShareData",value:function(e,t,n){if("0000000000.000000"===e.ts)return Object(Ct.b)().warn("Skipping 0000000000.000000 share for "+this.props.file.id),null;var a=e.reply_count||null,r=e.reply_users,i=e.reply_users_count,o=e.latest_reply||e.ts,s=e.internal_team_ids;return{channelId:t,replyCount:a,replyUsers:r,replyUsersCount:i,latest:o,ts:e.ts,threadTs:e.thread_ts,channelName:e.channel_name,teamId:e.team_id,sharedTeamIds:s,isPublic:n}}},{key:"render",value:function(){var e=this.props.file;if(!e||!e.shares)return null;var t=e.shares,n=!!Object.keys(e.shares).length,a=n&&this.getFormattedSharesData(t);return n&&m.a.createElement("div",{className:"p-file_details__shares"},m.a.createElement("div",{className:"p-file_details__share_divider"},m.a.createElement("span",null,FV.rt("Shared in")),m.a.createElement("hr",null)),a.map(function(t){return m.a.createElement(xV,{key:t.ts+"-"+t.channelId,share:t,fileId:e.id})}))}}]),t}(p.PureComponent));LV.displayName="FileDetailsShares";var DV=LV;LV.defaultProps={file:null};var UV=n("s/YD"),BV=new B.b("file-details"),qV=(h.b.func,{tryAgain:d.a});function HV(e){var t=e.tryAgain;return m.a.createElement("div",{role:"alert",className:"p-file_details__error"},m.a.createElement("p",{className:"p-file_details__error_header"},BV.t("Couldn't load file")),m.a.createElement("p",null,BV.rt("If the problem persists, please <a>drop us a line.</a>",null,function(e){var t=e.text,n=e.key;return m.a.createElement(la.a,{href:"https://slack.com/help/contact",rel:"noopener noreferrer",key:n},t)})),m.a.createElement(_e.d,{type:"primary",onClick:t},BV.t("Try Again")))}HV.displayName="FileDetailsError",HV.defaultProps=qV;var WV=new B.b("file-details");function GV(){return m.a.createElement("div",{role:"alert",className:"p-file_details__tombstone"},m.a.createElement("div",{className:"p-file_details__tombstone_icon"},m.a.createElement(ta.b,{type:"trash",size:"inherit"})),m.a.createElement("p",null,WV.t("This file was deleted.")))}GV.displayName="FileDetailsTombstone";var KV=new B.b("file-details");h.b.bool;function VV(e){var t=e.featureDocsTranslations?KV.t("This file was not found."):"This file was not found.";return m.a.createElement("div",{role:"alert",className:"p-file_details__tombstone"},m.a.createElement("div",{className:"p-file_details__tombstone_icon"},m.a.createElement(ta.b,{type:"question",size:"inherit"})),m.a.createElement("p",null,t))}VV.displayName="FileDetailsNotFound",VV.defaultProps={featureDocsTranslations:!1};var zV=Object(g.b)(function(e){return{featureDocsTranslations:Object(y.m)(e,"feature_docs_translations")}},{})(VV),YV=(n("JHKc"),n("FXxD"),new B.b("file-details")),QV=(Hd.a.File(),h.b.string,h.b.bool,h.b.bool,h.b.func,h.b.string,h.b.string,h.b.bool,h.b.string,h.b.bool,h.b.func,{file:null,origin:null,do24hrTime:!1,fileIsFetching:!1,reloadFile:d.a,isWorkflow:!1,userId:"",botId:"",ownerName:"",featureReactMemberProfileCard:!1,clogFileClick:d.a}),XV=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["renderPreview","onNameClick","clogLinkClick","renderBody"]),n}return u()(t,e),o()(t,[{key:"onNameClick",value:function(e){if(!Object(Ei.a)(e)){var t=this.props,n=t.userId,a=t.botId,r=t.featureReactMemberProfileCard;(n||a)&&(e.preventDefault(),e.persist(),r||(a?Object(lV.a)(e,a):Object(sV.a)(e,n)))}}},{key:"clogLinkClick",value:function(e){var t=this.props.file;this.props.clogFileClick({file:t,payload:e})}},{key:"isImage",value:function(){return"image"===Object(tv.p)(this.props.file)}},{key:"renderPreview",value:function(){return m.a.createElement(NV.a,{file:this.props.file,showActions:!1,forceExpanded:!0,largeImage:!0,clogLinkClick:this.clogLinkClick,channelId:"",ts:""})}},{key:"renderUserNameAndTimestamp",value:function(){var e=this.props,t=e.file,n=e.do24hrTime,a=e.ownerName,r=e.userId,i=e.botId,o=e.isWorkflow,s=e.featureReactMemberProfileCard,l="";Object(tv.I)(t)||(l=m.a.createElement("div",{className:"p-file_details__private"},YV.t("Private file")));var c="";c=i?"/services/"+i:"/team/"+r;var u=void 0;return u=s?m.a.createElement(XW.a,{botId:i,userId:r,onClick:this.onNameClick},m.a.createElement(la.a,{href:c,className:"p-file_details__user_link"},a)):m.a.createElement(la.a,{href:c,className:"p-file_details__user_link",onClick:this.onNameClick},a),m.a.createElement("div",{className:"p-file_details__user_meta"},u,i&&m.a.createElement(IV.a,{isWorkflow:o}),m.a.createElement("div",{className:"p-file_details__upload_date"},YV.t("{date} at {time}",{date:Object(Ps.l)(t.timestamp),time:Object(Ps.p)(t.timestamp,{do24hrTime:n})})),l)}},{key:"renderComments",value:function(){var e=this.props.file;return Object(ls.a)(e.comments)?null:m.a.createElement("div",{className:"p-file_details__comments"},m.a.createElement("hr",{className:"p-file_details__comment_separator"}),m.a.createElement(SV,{comments:e.comments,fileId:e.id}))}},{key:"renderFileDetails",value:function(){var e=this.props,t=e.file,n=e.fileIsFetching,a=e.reloadFile;if(n&&(!t||Object(Ub.d)(t)&&!Object(Ub.c)(t)))return null;if(!t||Object(Ub.c)(t))return m.a.createElement(HV,{tryAgain:a});if(Object(tv.Q)(t))return m.a.createElement(GV,null);if(Object(tv.L)(t))return m.a.createElement(zV,null);var r=!Object(tv.K)(t),i={};this.isImage()&&(i.maxWidth=(t.thumb_480_w||t.thumb_360_w)+"px",i.maxHeight=(t.thumb_480_h||t.thumb_360_h)+"px");var o=Object(tv.p)(t),s="image"===o||"snippet"===o,l=f()("p-file_details__meta",{"p-file_details__meta--show_filename":s});return m.a.createElement(m.a.Fragment,null,r?m.a.createElement("div",{className:"p-file_details__meta_container","data-qa":"file_details-meta_container"},m.a.createElement("div",{className:l},s?m.a.createElement(cV.a,{file:t,className:"p-file_details__name"}):null,this.renderUserNameAndTimestamp()),m.a.createElement(wV.a,{file:t,clogLinkClick:this.clogLinkClick,inFileDetails:!0})):null,m.a.createElement("div",{className:"p-file_details__preview",style:i},this.renderPreview()),this.renderComments(),m.a.createElement(DV,{file:t}))}},{key:"renderBody",value:function(){var e=this;return m.a.createElement("div",{className:"p-file_flexpane__content"},m.a.createElement(ni.a,null,function(t){var n=t.width,a=t.height;return m.a.createElement(ck.b,{width:n,height:a,fade:!0},m.a.createElement("div",{className:"p-file_details"},e.renderFileDetails()))}))}},{key:"render",value:function(){var e=this.props.origin,t={member_preview:YV.t("Member"),starred_items:YV.t("Starred Items"),search_results:YV.t("Search Results"),channel_page:YV.t("Channel Details"),group_page:YV.t("Channel Info"),im_page:YV.t("Conversation Details"),mentions:YV.t("Activity")},n=YV.t("Files"),a=t[e]||n,r=f()("p-file_flexpane","p-file_flexpane--detail");return m.a.createElement(UV.b,{flexOrigin:e,className:r,title:a,renderBody:this.renderBody,viewId:"file-details",kbNavOrder:Object(ae.a)()?void 0:4.9})}}]),t}(p.PureComponent);XV.displayName="FileDetails",XV.defaultProps=QV;var JV={clogFileClick:function(){return oV.a.apply(void 0,arguments)}},ZV=Object(g.b)(function(e,t){var n=t.fileId;if(!n)return{};var a=Object(ev.c)(e,n);if(!a)return{};var r=Object(tv.l)(a),i=r.userId,o=r.botId,s=i?Object(xo.d)(e,i):null,l=s?Object(eo.q)(s):null,c=o||l,u="";if(c){var d=Object(iV.c)(e,c);d&&d.name&&(u=d.name)}return!u&&s&&(u=Object(eo.V)(e,s)),u||(u=a.username),{file:Object(ev.c)(e,n),do24hrTime:Object(Zt.j)(e,"time24"),featureEmailWorkobjectUi:Object(y.m)(e,"feature_email_workobject_ui"),featureReactMemberProfileCard:Object(y.m)(e,"feature_react_member_profile_card"),userId:i,botId:c,ownerName:u,isWorkflow:Object(eo.Qb)(s)}},JV)(XV),$V=Object(uV.a)(ZV,{alwaysFetchOnMount:!0}),ez=n("jYCR"),tz=n("kX2h"),nz=new B.b("files"),az=(h.b.object,h.b.func,h.b.func.isRequired,{member:null,onChange:d.a}),rz=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onChange=n.onChange.bind(n),n.state={value:e.member?e.member.id:null,selectedOption:e.member?iz(e.member.id):null},n}return u()(t,e),o()(t,[{key:"onChange",value:function(e,t){this.setState(function(){return{value:e,selectedOption:{value:e,label:t}}}),this.props.onChange(e)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState(function(){return{value:e.member?e.member.id:null,selectedOption:e.member?iz(e.member.id):null}})}},{key:"render",value:function(){return m.a.createElement(tz.a,{className:"p-file_list__select p-file_list__members_select",placeholder:nz.t("Everyone",{fallbackHash:"c756f6af1f03c9ce381cb85934ffb274e2f54af3"}),onChange:this.onChange,value:this.state.value,selectedOption:this.state.selectedOption,optionsFetcher:this.props.searchMembers,optionsRowHeight:30})}}]),t}(p.PureComponent);function iz(e){return{value:e,label:m.a.createElement("div",{className:"p-file_list__select__member"},m.a.createElement(kF.b,{id:e,size:"small"}))}}rz.displayName="FilesFlexpaneMembersSelect",rz.defaultProps=az;var oz=Object(g.b)(function(e,t){var n=t.userId;return{member:Object(xo.d)(e,n)}},function(e){return{searchMembers:function(t){return e(Object(ez.c)({query:t,options:{entities:{members:{includeSelf:!0,onlyLocalTeam:!0}},sort:{selfFirst:!0},allowEmptyQuery:!0}})).then(function(e){return{options:e.map(function(e){return iz(e.id)})}})}}})(rz),sz=(n("vr4i"),new B.b("files")),lz=Object(mi.a)(pi.a),cz=(h.b.arrayOf(h.b.shape({id:h.b.string,ts:h.b.number})),h.b.string,h.b.string,h.b.shape({key:h.b.string,offset:h.b.number}),h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.object.isRequired,h.b.string,h.b.func,h.b.bool.isRequired,h.b.func,{files:[],filetype:"",user:"",scrollmark:void 0,fetchFilesPre:d.a,fetchFilesPost:d.a,saveScrollmark:d.a,setFiletype:d.a,setUser:d.a,previewFile:d.a,focusKey:null,clogFileClick:d.a,setFocusKey:d.a}),uz=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["onFileClick","onScroll","fetchPre","fetchPost","fetchAround","renderRow","renderFile","clogFileClick","clogPricingLinkClick","renderBody","focus","isEmpty","isFocusableItem","onItemTabWithin"]),n.requestPre=null,n.requestPost=null,n.reachedStart=!1,n.reachedEnd=!1,n.keys=null,n.layout=new di.a,n.list=m.a.createRef(),n.flexpane=m.a.createRef(),n.layout.heightCache.DEFAULT_HEIGHT=69,n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.scrollmark,n=e.clogger,a=e.overStorageLimit;if(t){var r=t.key,i=t.offset;this.layout.setAnchor(r,i),this.props.saveScrollmark(null)}a&&n.track(le.EventId.GROWTH_PRICING,{contexts:{ui_context:{action:le.UiAction.IMPRESSION,step:le.UiStep.FILE_PANE,ui_component:le.UiComponent.FILE_STORAGE_LIMIT_BANNER}}});var o=this.props,s=o.focusKey,l=o.files;"files"===s&&l.length&&(this.setFocusOnFirstItem(),this.clearFocusKey())}},{key:"componentDidUpdate",value:function(e){var t=e.focusKey,n=this.props,a=n.focusKey,r=n.files;"files"===a&&a!==t&&r.length&&(this.setFocusOnFirstItem(),this.clearFocusKey()),"files"===a&&r.length&&(this.setFocusOnFirstItem(),this.clearFocusKey())}},{key:"onFileClick",value:function(e){var t=e.id,n=this.list.current;n&&(t&&(this.props.clogger.track(le.EventId.FLEXPANE_FILE_CLICKED,{click_file_id:t}),this.props.saveScrollmark({key:t,offset:this.layout.getOffsetForKey(t)-n.getScrollTop()}),this.props.previewFile({fileId:t,flexOrigin:"files"})))}},{key:"onItemTabWithin",value:function(){var e=this.flexpane.current;e&&e.setInitialActiveSection()}},{key:"onScroll",value:function(){this.layout.anchor&&this.layout.setAnchor(!1)}},{key:"setFocusOnFirstItem",value:function(){var e=this.keys[0],t=this.list.current;t&&t.focusOnKey(e)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props,n=t.filetype,a=t.user;e.filetype===n&&e.user===a||(this.requestPre&&this.requestPre.cancel(),this.requestPost&&this.requestPost.cancel(),this.requestPre=null,this.requestPost=null,this.reachedStart=!1,this.reachedEnd=!1,this.layout&&this.layout.setAnchor(!1))}},{key:"clearFocusKey",value:function(){this.props.setFocusKey(null)}},{key:"clogFileClick",value:function(e,t){this.props.clogFileClick({file:t,payload:e})}},{key:"clogPricingLinkClick",value:function(){this.props.clogger.track(le.EventId.GROWTH_PRICING,{contexts:{ui_context:{action:le.UiAction.CLICK,step:le.UiStep.FILE_PANE,ui_element:le.UiElement.PRICING_LINK,ui_component:le.UiComponent.FILE_STORAGE_LIMIT_BANNER}}})}},{key:"fetchAround",value:function(){return(!this.requestPre||!this.requestPost)&&(this.reachedEnd?this.fetchPre():this.reachedStart?this.fetchPost():this.fetchPre())}},{key:"fetchPost",value:function(){var e=this;if(this.requestPost)return!1;if(this.reachedEnd)return!1;var t=this.props,n=t.filetype,a=t.user;return this.requestPost=this.props.fetchFilesPost({types:n,user:a}),this.requestPost.then(function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).paging;t.page>=t.pages&&(e.reachedEnd=!0)}).finally(function(){e.requestPost=null})}},{key:"fetchPre",value:function(){var e=this;if(this.requestPre)return!1;if(this.reachedStart)return!1;var t=this.props,n=t.filetype,a=t.user;return this.requestPre=this.props.fetchFilesPre({types:n,user:a}),this.requestPre.then(function(){1===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).paging.page&&(e.reachedStart=!0)}).finally(function(){e.requestPre=null})}},{key:"focus",value:function(){var e=this.list.current;e&&e.focus()}},{key:"isEmpty",value:function(){return!this.props.files.length&&this.reachedStart&&this.reachedEnd}},{key:"isFocusableItem",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).key;return Object(nV.a)(e)}},{key:"renderBody",value:function(){var e=this,t=this.props,n=t.files,a=t.overStorageLimit,r=n.map(function(e){return e.id});return this.keys=[].concat(ti()(r)),this.reachedEnd||this.keys.push("Loading"+this.keys.length),this.isEmpty()&&this.keys.push("Placeholder"),m.a.createElement(m.a.Fragment,null,a&&this.renderStorageWarningBanner(),m.a.createElement("div",{className:"p-file_list"},m.a.createElement(ni.a,null,function(t){var n=t.width,a=t.height;return m.a.createElement(ui.a,{width:n,height:a,keys:e.keys,layout:e.layout,rowRenderer:e.renderRow,onScroll:e.onScroll,ref:e.list,loadAround:e.fetchAround,loadPre:e.fetchPre,loadPost:e.fetchPost,onItemTabWithin:e.onItemTabWithin,onItemClick:e.onFileClick,isFocusableItem:e.isFocusableItem,"aria-label":sz.t("Files")})})))}},{key:"renderFile",value:function(e){var t=this.props.files[e]&&this.props.files[e].id;if(!t)return null;var n=e===this.props.files.length-1,a=f()("p-file_list__file",{"p-file_list__file--last":n});return m.a.createElement(lz,{fileId:t,className:a,clogLinkClick:this.clogFileClick,fullWidth:!0,useRowAction:!0})}},{key:"renderRow",value:function(e){var t=this.keys[e];if(!t)return null;switch(t[0]){case"L":return m.a.createElement("div",{className:"p-file_list__loading"},sz.t("Loading\u2026"));case"P":return m.a.createElement("div",{className:"p-file_list__empty"},sz.t("No matching files were found."));default:return this.renderFile(e)}}},{key:"renderStorageWarningBanner",value:function(){var e=this;return m.a.createElement("div",{className:"p-file_flexpane__storage-warning-container"},m.a.createElement("div",{className:"display_flex"},m.a.createElement(ta.b,{className:"p-message_limit_banner__graphic",type:"eye-closed"}),m.a.createElement("div",null,m.a.createElement("span",null,sz.rt("Some additional results aren\u2019t visible because your workspace has passed the free plan\u2019s 5 GB storage limit. <a>See paid plans</a>",null,function(t){var n=t.text;return m.a.createElement(la.a,{href:"/pricing?ui_step="+le.UiStep.FILE_PANE+"&ui_element="+le.UiElement.PRICING_LINK,onClick:e.clogPricingLinkClick,target:"new","data-qa":"file-flexpane__pricing-link"},n)})))))}},{key:"render",value:function(){var e=this,t=this.props,n=t.filetype,a=t.user;return m.a.createElement(UV.b,{ref:this.flexpane,focus:this.focus,isEmpty:this.isEmpty(),title:sz.t("Files"),className:f()("p-file_flexpane","p-file_flexpane--list"),bodyClassName:"p-file_flexpane__body",renderBody:this.renderBody,renderControls:function(){return m.a.createElement("div",{className:"p-file_list__filters"},m.a.createElement(hi.a,{filetype:n,onChange:e.props.setFiletype}),m.a.createElement(oz,{userId:a,onChange:function(t){e.props.setUser(t)}}))},viewId:"file-list",kbNavOrder:Object(ae.a)()?void 0:4.8})}}]),t}(p.PureComponent);uz.displayName="FileList",uz.defaultProps=cz;var dz={fetchFilesPre:function(){return Av.c.apply(void 0,arguments)},fetchFilesPost:function(){return Av.b.apply(void 0,arguments)},saveScrollmark:function(){return Av.i.apply(void 0,arguments)},setFiletype:function(){return Av.j.apply(void 0,arguments)},setUser:function(){return Av.k.apply(void 0,arguments)},previewFile:function(){return jn.c.apply(void 0,arguments)},clogFileClick:function(){return oV.a.apply(void 0,arguments)},setFocusKey:function(e){return Object(I_.a)(e)}},pz=Object(g.b)(function(e){return{files:Object(Av.e)(e),scrollmark:Object(Av.f)(e),filetype:Object(Av.d)(e),user:Object(Av.g)(e),clogger:Object(re.a)({state:e}),overStorageLimit:Object(De.C)(Object(we.d)(e)),focusKey:Object(S_.a)(e)}},dz)(function(e){var t=e.forwardedRef,n=Ep()(e,["forwardedRef"]);return m.a.createElement(uz,ye()({ref:t},n))}),mz=m.a.forwardRef(function(e,t){return m.a.createElement(pz,ye()({forwardedRef:t},e))}),hz=(n("5NHF"),new B.b("member_directory")),bz=(h.b.bool,h.b.bool,h.b.func,h.b.string,h.b.func,h.b.string,h.b.bool,h.b.bool,h.b.arrayOf(h.b.string),h.b.string,h.b.func,h.b.bool,{isEnterprise:!1,isAdmin:!1,isRestricted:!1,setSearchQuery:d.a,setFilter:d.a,searchQuery:"",filter:"people",featureSonicMemberDirectory:!1,isVisible:!1,flexParams:[],teamUrl:"/",fetchMemberCountsForTeam:d.a}),fz=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["onSearchInputChange","onMenuItemSelected","renderMenu","renderBody","focus","onItemTabWithin"]),n.state={externalTeams:[]},n.list=m.a.createRef(),n.flexpane=m.a.createRef(),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.fetchExternalTeams()}},{key:"onSearchInputChange",value:function(e){var t=e.target.value||"";this.props.setSearchQuery(t)}},{key:"onMenuItemSelected",value:function(e){this.props.setFilter(e)}},{key:"onItemTabWithin",value:function(){var e=this.flexpane.current;e&&e.setInitialActiveSection()}},{key:"getTitle",value:function(){var e=this.props,t=e.featureSonicMemberDirectory,n=e.isEnterprise;return t?n?hz.t("Organization Directory"):hz.t("Workspace Directory"):null}},{key:"focus",value:function(){var e=this.list.current;e&&e.focus()}},{key:"fetchExternalTeams",value:function(){var e=this;this.props.fetchMemberCountsForTeam().then(function(t){t&&t.external_teams&&e.setState(function(){return{externalTeams:Object.keys(t.external_teams)}})})}},{key:"renderSearch",value:function(){return this.props.featureSonicMemberDirectory?m.a.createElement("div",{className:"p-member_directory__search"},m.a.createElement(Zv.a,{value:this.props.searchQuery,onChange:this.onSearchInputChange,placeholder:hz.t("Search by name or title"),icon:"search",autoFocus:!0,inputAriaLabel:hz.t("Search members by name or title",{fallbackHash:"4be82cb9b1458f2d26a012d16010b3630c49c611"})})):null}},{key:"renderMenu",value:function(e){return m.a.createElement(Ty,{onMenuItemSelected:this.onMenuItemSelected,selectedFilter:this.props.filter,menuProps:e,externalTeams:this.state.externalTeams})}},{key:"renderFilterIconButton",value:function(){if(!this.props.featureSonicMemberDirectory)return null;if(this.props.isRestricted)return null;var e="people"!==this.props.filter,t=e?hz.t("Filter members (filter active)"):hz.t("Filter members");return m.a.createElement(na.e,{renderMenu:this.renderMenu,position:"bottom-left"},m.a.createElement(Qp.a,{icon:"filters","data-qa":"p-member_directory_menu_trigger",showBadge:e,"aria-label":t}))}},{key:"renderBody",value:function(){return m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:"p-member_directory__search_filter_container","data-qa":"member_directory"},this.renderSearch(),this.renderFilterIconButton()),m.a.createElement(_y,{ref:this.list,onItemTabWithin:this.onItemTabWithin,"aria-label":this.getTitle()}))}},{key:"render",value:function(){var e=this.props,t=e.isVisible,n=e.flexParams,a=e.teamUrl;return e.featureSonicMemberDirectory&&t?n.length?null:m.a.createElement(UV.b,{ref:this.flexpane,focus:this.focus,title:this.getTitle(),renderBody:this.renderBody,kbNavOrder:Object(ae.a)()?void 0:5,viewId:"member-directory",headerProps:{optionsHref:this.props.isAdmin?a+"admin":void 0,optionsIconType:"cog-o",optionsTooltipText:hz.t("Manage members")}}):null}}]),t}(p.Component);fz.displayName="MemberDirectoryFlexpane",fz.defaultProps=bz;var gz={setSearchQuery:function(){return Yv.f.apply(void 0,arguments)},setFilter:function(){return Yv.d.apply(void 0,arguments)},fetchMemberCountsForTeam:function(){return Qv.a.apply(void 0,arguments)}},_z=Object(g.b)(function(e){var t=Object(A.j)(e),n=!Object(ae.a)()&&"team"===t||"directory"===t;return{featureSonicMemberDirectory:Object(y.m)(e,"feature_sonic_member_directory"),isEnterprise:Object(y.q)(e),isAdmin:Object(eo.eb)(Object(xo.b)(e)),isRestricted:Object(eo.Gb)(Object(xo.b)(e)),searchQuery:Vv(e),filter:zv(e),flexParams:Object(A.e)(e),teamUrl:Object(De.o)(Object(we.d)(e)),isVisible:n}},gz)(fz),vz=n("1cj1"),yz=n("3JmS"),kz=n("kyN7"),Oz=n("Ect7"),Cz=n("YcId"),Ez=n("RoDk"),jz=new B.b("member_profile"),Sz=(h.b.bool,h.b.object.isRequired,h.b.object.isRequired,h.b.func,h.b.func,h.b.object.isRequired,h.b.func,h.b.bool,h.b.func,{isPresenceActive:!1,openPrefsModal:d.a,showFileList:d.a,toggleUserPresence:d.a,userCanEditCustomResponses:!1,onClick:d.a});function Iz(e){var t=e.isPresenceActive,n=e.member,a=e.menuProps,r=e.openPrefsModal,i=e.showFileList,o=e.team,s=e.toggleUserPresence,l=e.userCanEditCustomResponses,c=e.onClick;if(!Object(jS.a)().featureModernProfileFlexpane)return null;var u=void 0;if(Object(eo.Hb)(n)){var d=void 0;d=t?jz.t("Set yourself away"):jz.t("[AWAY] Set yourself active"),u=[{label:jz.t("View preferences"),click:function(){c(),r()}},{label:jz.t("Account settings"),click:function(){Object(De.R)(o,"/account/settings")},showLinkIndicatorIcon:!0},{type:"separator"},{label:jz.t("View your files"),click:function(){c(),i({user:n.id})}},{label:d,click:function(){c(),s()}}]}else u=[{label:jz.t("View files"),click:function(){c(),i({user:n.id})}}],Object(eo.Ib)(n)&&l&&u.push({label:jz.t("Create/edit Slackbot responses"),href:Object(De.o)(o,"/customize/slackbot")});return Object(AE.a)()&&(u.push({type:"separator"}),u.push({label:jz.t("Copy member ID"),description:n.id,click:function(){c(),Object(AE.b)(n.id)}})),m.a.createElement(RK.a,ye()({},a,{template:u}))}Iz.displayName="MemberProfileOverflowMenu",Iz.defaultProps=Sz;var wz={openPrefsModal:function(){return ul.a.apply(void 0,arguments)},showFileList:function(){return jn.g.apply(void 0,arguments)},toggleUserPresence:function(){return wO.h.apply(void 0,arguments)}},Nz=Object(g.b)(function(e,t){var n=t.member;return{isPresenceActive:Object(wO.f)(e,n.id)===wO.a,userCanEditCustomResponses:Object(Bb.I)(e)}},wz)(Iz),Tz=n("G7w5"),Az=(n("UCMe"),h.b.string,h.b.object,h.b.object,h.b.object,h.b.bool,h.b.object,{currentMemberId:void 0,member:void 0,memberTeam:void 0,team:void 0,canInteract:!0,clogger:{track:d.a}});function Rz(e){var t=e.currentMemberId,n=e.member,a=e.memberTeam,r=e.team,i=e.canInteract,o=e.clogger,s=Object(p.useMemo)(function(){var e=[Tz.a.STATUS,Tz.a.NAME,Tz.a.TIME,Tz.a.PHONE,Tz.a.EMAIL,Tz.a.CUSTOM,Tz.a.GUEST,Tz.a.SHARED_CHANNELS];return n.id!==t&&e.push(Tz.a.SHARED_WORKSPACES),e},[t,n]),l=Object(jS.a)().featureModernProfileFlexpane,c=Object(p.useCallback)(function(){o.track(le.EventId.USER_PROFILE_CLICK)},[o]);if(!l)return null;var u=m.a.createElement(yz.a,{className:"p-member_profile__picture",member:n}),d=m.a.createElement(Oz.a,{className:"p-member_profile__restriction",member:n,team:a}),h=m.a.createElement(Uo.a,{className:"p-member_profile__name",member:n,canInteract:i});return Object(De.M)(a)?m.a.createElement(m.a.Fragment,null,u,d,h,m.a.createElement(Cz.a,{memberTeam:a})):i?m.a.createElement(ni.a,null,function(e){var t=e.width,i=e.height;return m.a.createElement(ck.b,{width:t,height:i,fade:!0},u,d,m.a.createElement(kz.a,{className:"p-member_profile__buttons",includeOverflow:!0,member:n,showCallButton:!0,onClick:c},m.a.createElement(na.e,{offsetY:8,position:"bottom-right",renderMenu:function(e){return m.a.createElement(Nz,{member:n,menuProps:e,team:a,onClick:c})}},m.a.createElement(_e.d,{className:"p-member_profile_buttons__button p-member_profile_buttons__button--overflow",type:"outline"},m.a.createElement(ta.b,{type:"vertical-ellipsis"})))),h,m.a.createElement(Tz.b,{member:n,team:r,types:s,onClick:c}))}):m.a.createElement(m.a.Fragment,null,u,d,h,m.a.createElement(Ez.a,{member:n}))}Rz.displayName="MemberProfileDetails",Rz.defaultProps=Az;var Pz=Object(g.b)(function(e,t){var n=t.memberId,a=Object(xo.d)(e,n);if(!a)return{};var r=Object(y.m)(e,"feature_stranger_danger")?Object(vz.a)(e,n):!Object(eo.Jb)(a);return{currentMemberId:Object(y.c)(e),member:a,memberTeam:Object(we.i)(e,Object(eo.P)(a)),team:Object(we.d)(e),canInteract:r,clogger:Object(re.a)({state:e})}})(Rz),Mz=(n("20nV"),new B.b("menu")),xz=(h.b.func,h.b.bool,h.b.string.isRequired,{fetchTeamProfile:d.a,isEnterprise:!1}),Fz=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isLoading:!0},n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){var e=this;this.props.fetchTeamProfile({reason:"MemberProfileFlexpane"}).finally(function(){e.setState(function(){return{isLoading:!1}})})}},{key:"render",value:function(){var e=this,t=this.props.isEnterprise?Mz.t("Organization Directory"):Mz.t("Workspace Directory");return m.a.createElement(UV.b,{className:"p-member_profile_flexpane",dataQa:"member_profile_pane",flexOrigin:"directory",isLoading:this.state.isLoading,renderBody:function(){return m.a.createElement(Pz,{memberId:e.props.memberId})},title:t,viewId:Ca.H.MEMBER_PROFILE_FLEXPANE,kbNavOrder:Object(ae.a)()?void 0:4.2})}}]),t}(p.PureComponent);Fz.displayName="MemberProfileFlexpane",Fz.defaultProps=xz;var Lz={fetchTeamProfile:function(){return IO.e.apply(void 0,arguments)}},Dz=Object(g.b)(function(e){return{isEnterprise:Object(y.q)(e)}},Lz)(Fz);function Uz(e,t){return{appProfile:e,appId:Object(cI.l)(e),botId:Object(cI.o)(e),isPublished:Object(cI.G)(e),customIntegrationType:Object(cI.d)(e),dateCreated:Object(cI.e)(e),isUserRestricted:Object(eo.Gb)(t)||Object(eo.Mb)(t),installedUserId:Object(cI.v)(e),commands:Object(cI.c)(e),description:Object(cI.f)(e),formattedDescription:Object(cI.h)(e),hideDescriptionExpansion:Object(cI.J)(e)}}var Bz=n("VMwU"),qz=n("yluG"),Hz=new B.b("app_profile");var Wz=function(e){var t=e.appId,n=e.serviceId,a=e.appHomepageUrl,r=e.supportUrl,i=e.isSlackIntegration,o=e.dispatch,s=e.currentTeamId,l=e.currentUserId,c=e.locale,u=e.currentEnterpriseId,d=Object(re.a)({userId:l,teamId:s,locale:c,enterpriseId:u}),p=Object(we.d)(Object(_.getStateByTeamId)(s)),h={app_id:t,bot_id:n},b=function(){return d.track(le.EventId.USER_PROFILE_CLICK,h)};return[{key:"app_homepage",label:Hz.t("App Homepage"),href:a,click:function(){b(),d.track(le.EventId.APP_CLICK_APP_HOMEPAGE_IN_USER_PROFILE,{contexts:{ui_context:{step:le.UiStep.USER_PROFILE,action:le.UiAction.CLICK,ui_element:le.UiElement.APP_HOMEPAGE}}})},show:!!a,dataQa:"app_profile_overflow_homepage"},{key:"app_directory_page",label:Hz.t("View in App Directory"),href:Object(De.o)(p,"/apps/"+t+"?utm_source=in-prod&utm_medium=inprod-link_app_directory-user_profile-click"),click:function(){b(),d.track(le.EventId.APP_CLICK_LINK_APP_DIRECTORY_IN_USER_PROFILE,{contexts:{ui_context:{step:le.UiStep.USER_PROFILE,action:le.UiAction.CLICK,ui_element:le.UiElement.LINK_APP_DIRECTORY}}})},show:!0,dataQA:"app_profile_app_directory_page"},{key:"support",label:Hz.t("Support for this app"),href:r||void 0,click:function(){b(),d.track(le.EventId.APP_CLICK_LINK_APP_SUPPORT_IN_USER_PROFILE,{contexts:{ui_context:{step:le.UiStep.USER_PROFILE,action:le.UiAction.CLICK,ui_element:le.UiElement.LINK_APP_SUPPORT}}}),i&&o(Object(tn.e)({element:m.a.createElement(lI.a,{trigger:"app_support_profile_button"})}))},show:!0}].filter(function(e){return e.show})},Gz=(h.b.bool.isRequired,h.b.string,h.b.object,h.b.func,h.b.string,h.b.string,h.b.string,{customIntegrationType:"",appProfile:void 0,dispatch:h.b.noop,currentTeamId:"",currentUserId:"",currentEnterpriseId:""}),Kz=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["renderMenu"]),n}return u()(t,e),o()(t,[{key:"renderMenu",value:function(e){var t=this.props,n=t.dispatch,a=t.appProfile,r=t.currentTeamId,i=t.currentUserId,o=t.currentEnterpriseId,s=Wz({appId:Object(cI.l)(a),serviceId:Object(cI.o)(a),appHomepageUrl:Object(cI.k)(a),supportUrl:Object(cI.p)(a),isSlackIntegration:Object(cI.H)(a),dispatch:n,currentTeamId:r,currentUserId:i,locale:Object(B.r)(),currentEnterpriseId:o});return s.length?m.a.createElement(na.a,{template:s,stripTerminalSeparators:!0,onMenuItemSelected:e.onMenuItemSelected}):null}},{key:"render",value:function(){return this.props.isDistributed&&!this.props.customIntegrationType?m.a.createElement(na.e,{renderMenu:this.renderMenu,position:"bottom-right"},m.a.createElement(_e.d,{"data-qa":"app_header_overflow_menu_button",className:"p-app_profile_flexpane_header__button p-app_profile_flexpane_header__button_container__button",icon:"chevron-large-down",size:"large"})):null}}]),t}(p.Component);Kz.displayName="AppProfileOverflowMenuButton",Kz.defaultProps=Gz;var Vz=Object(g.b)(function(e,t){var n=t.appProfile;return{isDistributed:Object(cI.D)(n),customIntegrationType:Object(cI.d)(n),currentTeamId:Object(v.b)(e),currentUserId:Object(y.c)(e),currentEnterpriseId:Object(y.q)(e)?Object(we.g)(e).id:void 0}})(Kz),zz=(n("avbl"),new B.b("app_card")),Yz=(h.b.bool,h.b.bool.isRequired,h.b.bool.isRequired,h.b.object,h.b.string,h.b.string,h.b.string,h.b.string,h.b.string.isRequired,h.b.object,h.b.object,{appProfile:void 0,color:"",name:"",tagline:"",settingsUrl:"",clogger:{track:d.a},externalTeam:void 0,isAvatarEmoji:!1}),Qz=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["calculateStyle","renderSettingsButton","onSettingsButtonClick"]),n}return u()(t,e),o()(t,[{key:"onSettingsButtonClick",value:function(){this.props.clogger.track(le.EventId.USER_PROFILE_CLICK,{app_id:Object(cI.l)(this.props.appProfile),bot_id:Object(cI.o)(this.props.appProfile)}),this.props.clogger.track(le.EventId.APP_CLICK_LINK_APP_SETTINGS_IN_USER_PROFILE,{contexts:{ui_context:{step:le.UiStep.USER_PROFILE,action:le.UiAction.CLICK,ui_element:le.UiElement.LINK_APP_SETTINGS}}})}},{key:"calculateStyle",value:function(){var e=this.props.color,t=Object(Bz.f)(e);if(t&&e){var n=it()(t,3);return{background:"linear-gradient(136.53deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0.2) 100%), linear-gradient(312.01deg, "+e+" 0%, rgba("+n[0]+","+n[1]+","+n[2]+",0.75) 100%)",backgroundColor:e}}}},{key:"renderSettingsButton",value:function(){var e=this.props,t=e.isExternal,n=e.isUserRestricted,a=e.settingsUrl;return t||n||!a?null:m.a.createElement(_e.d,{"data-qa":"app_header_settings_button",href:a+"?utm_source=in-prod&utm_medium=inprod-link_app_settings-user_profile-click",className:"p-app_profile_flexpane_header__button p-app_profile_flexpane_header__button_container__button",onClick:this.onSettingsButtonClick},zz.t("Settings"))}},{key:"render",value:function(){var e=this.props,t=e.avatarUrl,n=e.isAvatarEmoji,a=e.color,r=e.isExternal,i=e.name,o=e.tagline,s=e.appProfile,l=e.externalTeam;return m.a.createElement("div",{className:f()({"p-app_profile_flexpane_header":!r,"p-app_profile_flexpane_header--external":r}),style:this.calculateStyle(a)},!!r&&m.a.createElement(qz.a,{externalTeam:l}),m.a.createElement("img",{className:f()("p-app_profile_flexpane_header__icon rounded",{"p-app_profile_flexpane_header__icon--emoji":n}),alt:"app avatar","data-qa":"app_header_icon",src:t}),m.a.createElement("div",{className:"p-app_profile_flexpane_header__text"},m.a.createElement("div",{className:"p-app_profile_flexpane_header__row"},m.a.createElement("span",{className:"p-app_profile_flexpane_header__app_name","data-qa":"app_header_name"},i),m.a.createElement("div",null,m.a.createElement("span",{className:"p-app_profile_flexpane_header__app_label rounded","data-qa":"app_header_app_label"},zz.t("APP")))),!!o&&m.a.createElement("div",{className:"p-app_profile_flexpane_header__tagline overflow_hidden","data-qa":"app_header_tagline"},o),m.a.createElement("div",{className:"p-app_profile_flexpane_header__button_container"},this.renderSettingsButton(),m.a.createElement(Vz,{appProfile:s}))))}}]),t}(p.Component);Qz.displayName="AppProfileHeader",Qz.defaultProps=Yz;var Xz=Object(g.b)(function(e,t){var n=t.appProfile,a=Object(cI.g)(n),r=Object(cI.a)(e,n);return{clogger:Object(re.a)({state:e}),avatarUrl:r,isAvatarEmoji:!!a,customIntegrationType:Object(cI.d)(n),color:Object(cI.b)(n),tagline:Object(cI.q)(n),isExternal:Object(cI.E)(e,n),isDistributed:Object(cI.D)(n),isUserRestricted:Object(eo.Gb)(self)||Object(eo.Mb)(self),settingsUrl:Object(cI.y)(e,n),name:Object(cI.m)(n),externalTeam:Object(cI.u)(e,n)}})(Qz),Jz=(n("W90I"),new B.b("app_profile")),Zz=(h.b.string,h.b.bool,h.b.func,{formattedDescription:"",hideExpandButton:!1,clogLinkClick:d.a});function $z(e){var t=e.formattedDescription,n=e.hideExpandButton,a=e.clogLinkClick,r=Object(p.useState)(!1),i=it()(r,2),o=i[0],s=i[1];return t?m.a.createElement("section",{className:"p-app_profile_flexpane__section","data-qa":"app_profile_how_to_use"},m.a.createElement("div",{className:"p-app_profile_flexpane__section_header"},Jz.t("How to use this app")),m.a.createElement("div",{className:"p-app_profile_flexpane__section_text"},m.a.createElement("div",{className:f()("p-app_profile_flexpane__description",{"p-app_profile_flexpane__description--collapse":!n&&!o})},m.a.createElement(FH,{formattedDescription:t,clogLinkClick:a}),!n&&m.a.createElement(p.Fragment,null,!o&&m.a.createElement("div",{className:"p-app_profile_flexpane__description__fade"}),m.a.createElement(_e.c,{className:f()("p-app_profile_flexpane__description__button",{"p-app_profile_flexpane__description__button--expand":!o,"p-app_profile_flexpane__description__button--collapse":o}),onClick:function(){s(!o)}},o?Jz.t("Collapse"):Jz.t("Expand"),m.a.createElement(ta.b,{type:o?"arrow-up-medium":"arrow-down-medium"})))))):null}$z.displayName="AppProfileDescription",$z.defaultProps=Zz;var eY=Object(jp.a)($z),tY=(h.b.string.isRequired,h.b.shape({name:h.b.string,usage:h.b.string,description:h.b.string}).isRequired,h.b.func,h.b.object.isRequired,{autoFillSlashCommand:d.a}),nY=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"autoFillSlashCommand",value:function(e){this.props.autoFillSlashCommand({commandName:e});var t=this.props,n=t.appId,a=t.clogger;a.track(le.EventId.USER_PROFILE_CLICK,{app_id:n}),a.track(le.EventId.APP_PROFILE_SLASH_COMMAND_CLICK,{app_id:n,contexts:{core:{app_id:n}}})}},{key:"render",value:function(){var e=this,t=this.props.command,n=t.name,a=t.usage,r=t.description;return m.a.createElement(_e.c,{type:"outline","data-qa":n,onClick:function(){return e.autoFillSlashCommand(n)},className:"p-app_profile_flexpane__slash_command"},m.a.createElement("div",{className:"p-app_profile_flexpane__slash_command__title overflow_ellipsis"},m.a.createElement("span",{className:"bold"},n)," ",m.a.createElement("span",null,a)),m.a.createElement("div",{className:"p-app_profile_flexpane__slash_command__description overflow_ellipsis"},r))}}]),t}(p.PureComponent);nY.displayName="AppProfileSlashCommandItem",nY.defaultProps=tY;var aY=Object(g.b)(function(e){return{clogger:Object(re.a)({state:e})}},function(e){return Object(Eg.b)({autoFillSlashCommand:aW.a},e)})(nY),rY=new B.b("app_profile"),iY=(h.b.bool,h.b.string,h.b.object,h.b.string,h.b.string,h.b.string,h.b.bool,h.b.number,h.b.arrayOf(h.b.object),h.b.string,h.b.bool,h.b.bool,h.b.object,{isPublished:!1,installedUserId:"",appProfile:void 0,appId:"",botId:"",customIntegrationType:"",isUserRestricted:!1,dateCreated:void 0,commands:[],formattedDescription:"",hideDescriptionExpansion:!1,showSlashCommands:!1,clogger:{track:d.a}}),oY=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.clogLinkClick=n.clogLinkClick.bind(n),n}return u()(t,e),o()(t,[{key:"getSectionHeaderText",value:function(){switch(this.props.customIntegrationType){case"incoming-webhook":return rY.t("About this Incoming Webhook");case"outgoing-webhook":return rY.t("About this Outgoing Webhook");case"bot":return rY.t("How to use this Bot");case"slash-commands":return rY.t("How to use this Slash Command");default:return null}}},{key:"getSectionText",value:function(){switch(this.props.customIntegrationType){case"outgoing-webhook":return null;case"bot":return rY.t("You can message bots and invite them to channels like other members.");case"slash-commands":return rY.t("Slash commands take actions when you post them in a conversation.");default:return null}}},{key:"clogLinkClick",value:function(){var e=this.props,t=e.clogger,n=e.appId,a=e.botId;t.track(le.EventId.USER_PROFILE_CLICK,{appId:n,botId:a})}},{key:"renderAboutSection",value:function(){var e=this,t=this.props,n=t.customIntegrationType,a=t.dateCreated,r=t.isUserRestricted,i=t.installedUserId;if(n){var o=m.a.createElement(Kx.a,{id:i,onClick:function(t){t.preventDefault(),e.clogLinkClick(),Object(jd.i)(i)}});return m.a.createElement("section",{className:"p-app_profile_flexpane__section","data-qa":"app_profile_about"},m.a.createElement("div",{className:"p-app_profile_flexpane__section_header"},this.getSectionHeaderText(n)),m.a.createElement("div",{className:"p-app_profile_flexpane__section_text"},this.getSectionText(n)," ",!r&&rY.rt("Created by {custom_integration_creator} on {date_created, date, long}.",{custom_integration_creator:o,date_created:1e3*a})))}return null}},{key:"renderCommandsSection",value:function(){var e=this.props,t=e.appId,n=e.commands,a=e.showSlashCommands;return n&&n.length&&a?m.a.createElement("section",{"data-qa":"app_profile_commands",className:"p-app_profile_flexpane__section"},m.a.createElement("div",{className:"p-app_profile_flexpane__section_header"},rY.t("Responds to\u2026",{note:"Refers to slash commands the app responds to."})),n.map(function(e){return m.a.createElement(aY,{key:e.name,command:e,appId:t})})):null}},{key:"renderMetaSection",value:function(){return this.props.isPublished?null:m.a.createElement("section",{className:"p-app_profile_flexpane__section","data-qa":"app_profile_meta"},m.a.createElement("p",null,m.a.createElement("i",{className:"sk_foreground_max"},rY.t("This app has not been reviewed by Slack."))))}},{key:"render",value:function(){var e=this.props,t=e.appProfile,n=e.appId,a=e.botId,r=e.formattedDescription,i=e.hideDescriptionExpansion;return!t||Object(Ub.e)(t)?null:m.a.createElement("div",{className:"p-app_profile_flexpane__container","data-qa":"app_profile_container","data-app_id":n,"data-bot_id":a},m.a.createElement(Xz,{appProfile:t}),m.a.createElement("div",{className:"sk_primary_foreground large_bottom_margin"},this.renderAboutSection(),m.a.createElement(eY,{formattedDescription:r,hideExpandButton:i,clogLinkClick:this.clogLinkClick}),this.renderCommandsSection(),this.renderMetaSection()))}}]),t}(p.PureComponent);oY.displayName="BaseAppProfile",oY.defaultProps=iY;var sY=Object(g.b)(function(e,t){var n=t.serviceId,a=Object(uI.c)(e,{serviceId:n});return ye()({},Uz(a,Object(xo.b)(e)),{showSlashCommands:Object(cI.M)(e,a),clogger:Object(re.a)({state:e})})})(oY),lY=(h.b.string,h.b.object.isRequired,h.b.func,{appId:"",fetchLegacyAppProfile:void 0}),cY=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={appProfile:void 0},n.getAppProfileProps=n.getAppProfileProps.bind(n),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.appId&&this.fetchAppProfile()}},{key:"componentDidUpdate",value:function(e){this.props.appId!==e.appId&&this.fetchAppProfile()}},{key:"getAppProfileProps",value:function(){var e=this.state.appProfile,t=this.props.currentMember;return ye()({},Uz(e,t),{showSettingsSection:!1})}},{key:"fetchAppProfile",value:function(){var e=this;this.props.fetchLegacyAppProfile({appId:this.props.appId}).then(function(t){e.setState(function(){return{appProfile:Object(aW.c)(null,t)}})})}},{key:"render",value:function(){return m.a.createElement(oY,this.getAppProfileProps())}}]),t}(p.Component);cY.displayName="GenericAppProfile",cY.defaultProps=lY;var uY=Object(g.b)(function(e){return{currentMember:Object(xo.b)(e)}},function(e){return Object(Eg.b)({fetchLegacyAppProfile:jG.b},e)})(cY),dY=(n("zbnt"),new B.b("app_profile")),pY=(h.b.string,h.b.string,h.b.string,{serviceId:void 0,appId:void 0,customIntegrationType:""}),mY=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this,t={"incoming-webhook":dY.t("About this Incoming Webhook"),"outgoing-webhook":dY.t("About this Outgoing Webhook"),bot:dY.t("About this Bot"),"slash-commands":dY.t("About this Slash Command")},n=dY.t("About this app"),a=t[this.props.customIntegrationType]||n;return m.a.createElement(UV.b,{className:"p-app_profile_flexpane",dataQa:"app_profile_pane",title:a,viewId:"app-profile-flepane",kbNavOrder:Object(ae.a)()?void 0:4.7,renderBody:function(){return m.a.createElement(ni.a,null,function(t){var n=t.width,a=t.height;return m.a.createElement(ck.b,{width:n,height:a,fade:!0},e.props.serviceId?m.a.createElement(sY,{serviceId:e.props.serviceId}):m.a.createElement(uY,{appId:e.props.appId}))})}})}}]),t}(p.PureComponent);mY.displayName="AppProfilePane",mY.defaultProps=pY;var hY=Object(g.b)(function(e,t){var n=t.serviceId,a=n?Object(uI.c)(e,{serviceId:n}):void 0;return{customIntegrationType:Object(cI.d)(a)}})(mY),bY=n("HYSh"),fY=n("9XiS"),gY=n("DQNL"),_Y=n("3Hq1"),vY=new B.b("a11y");n("Sqd7"),h.b.func.isRequired;function yY(e){var t=e.children;return m.a.createElement(sb.a,null,function(e){var n=e.width,a=e.height,r=e.measureRef;return m.a.createElement("div",{ref:r,className:"c-measure_container"},t({width:n,height:a}))})}yY.displayName="MeasureContainer";var kY=yY,OY=n("0xwB"),CY=n("0VPD"),EY=n("Wy5O"),jY=n("pbgM"),SY=n("kpmE"),IY=n("rVFV"),wY=80,NY=new B.b("user_groups"),TY=void 0,AY=void 0;var RY=Object(gt.b)("Validate user group name",function(e,t,n){var a=n.name,r=n.prevName,i=n.reason;if(function(e,t){Object(y.m)(e,"feature_sonic_user_groups")&&(AY={hasNameRequiredWarning:NY.t("Please enter a name for this group."),hasReservedName:NY.t('The name "{name}" is reserved and cannot be used.',{name:t,fallbackHash:"fc741acb2c5d6bf755a8dfceb173bf447313e359"}),hasMaxLengthWarning:NY.t("Names can\u2019t be more than {maxLength} characters.",{maxLength:wY}),hasNameTakenWarning:NY.t("This name is already in use by another group."),unknownError:NY.t("Sorry, something went wrong. Please try a different name.")})}(t(),a),TY={admins:NY.t("Team Admins"),owners:NY.t("Team Owners")},!a||!a.trim())return Promise.resolve(AY.hasNameRequiredWarning);var o=a.toLowerCase().trim();return r&&o===r.toLowerCase().trim()?Promise.resolve(""):o===TY.admins.toLowerCase()||o===TY.owners.toLowerCase()?Promise.resolve(AY.hasReservedName):Object(IY.a)(a)>wY?Promise.resolve(AY.hasMaxLengthWarning):e(Object(SY.m)({name:a,reason:i})).then(function(e){var t=e.error;return"name_already_exists"===t?AY.hasNameTakenWarning:t?AY.unknownError:""})});RY.meta={name:"validateUserGroupName",key:"utilityValidateUserGroupNameValidateUserGroupName",description:"Validate user group name"},RY.propTypes={name:h.b.string,prevName:h.b.string};var PY=RY,MY=new B.b("user_groups"),xY=80,FY=void 0,LY=void 0;var DY=Object(gt.b)("Validate user group handle",function(e,t,n){var a=n.handle,r=n.prevHandle,i=n.reason;return function(e,t){Object(y.m)(e,"feature_sonic_user_groups")&&(FY={hasHandleRequiredWarning:MY.t("Please enter a handle for this group."),hasMaxLengthWarning:MY.t("Handles can\u2019t be more than {maxLength} characters.",{maxLength:xY}),hasReservedHandle:MY.t("The group name @{handle} is reserved and cannot be used.",{handle:t,fallbackHash:"87ee177397df658b72975b506208aebb74090907"}),hasSpecialsWarning:MY.t("Handles can only contain letters or numbers."),hasPunctuationWarning:MY.t("Handles can only contain letters or numbers."),hasLowercaseWarning:MY.t("Handles can only be in lowercase."),hasHandleTakenWarning:MY.t("This handle is already in use by a member, channel, or another group."),unknownError:MY.t("Sorry, something went wrong. Please try a different handle.")})}(t(),a),LY={admins:MY.t("admins"),owners:MY.t("owners")},a&&a.trim()?a===r?Promise.resolve(""):a.toLowerCase()===LY.admins.toLowerCase()||a.toLowerCase()===LY.owners.toLowerCase()?Promise.resolve(FY.hasReservedHandle):/[ ,;'`~!@#$%^&*+=\\:"<>?|]/.test(a.trim())?Promise.resolve(FY.hasSpecialsWarning):/^[-|_]+$/.test(a)?Promise.resolve(FY.hasPunctuationWarning):/[A-Z]/.test(a)?Promise.resolve(FY.hasLowercaseWarning):Object(IY.a)(a)>xY?Promise.resolve(FY.hasMaxLengthWarning):e(Object(SY.l)({handle:a,reason:i})).then(function(e){var t=e.error;return"handle_already_exists"===t?FY.hasHandleTakenWarning:t?FY.unknownError:""}):Promise.resolve(FY.hasHandleRequiredWarning)});DY.meta={name:"validateUserGroupHandle",key:"utilityValidateUserGroupHandleValidateUserGroupHandle",description:"Validate user group handle"},DY.propTypes={handle:h.b.string,prevHandle:h.b.string};var UY=DY,BY=n("dI1W"),qY=new B.b("user_groups"),HY=(h.b.array,h.b.func,h.b.bool.isRequired,{selectedChannels:[],onChange:d.a}),WY={entities:{channels:{includePublic:!0,includePrivate:!0,includeFromAnotherTeam:!1,includeMpims:!1,includeArchived:!1,searchPreviousNames:!1,onlyVisibleMpims:!1,includeRequired:!0}},limit:100,tiered:!0,sort:{frecency:!0}},GY=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"getSelectedOptions",value:function(){return(this.props.selectedChannels||[]).map(function(e){return{value:e}})}},{key:"renderChannelOption",value:function(e){return m.a.createElement($b.a,{channel:e.entity,channelId:e.value})}},{key:"render",value:function(){if(!this.props.featureSonicUserGroups)return null;var e=this.props.onChange,t=qY.t("Default channels"),n=qY.t("Group members are added to these channels automatically.");return m.a.createElement(ja.a,{htmlFor:"user_group_default_channel_select",id:"user_group_default_channel",key:"user_group_default_channel",text:t,optional:!0},m.a.createElement(Vb.c,{selectedOptions:this.getSelectedOptions(),renderOption:this.renderChannelOption,width:"100%",optionsRowHeight:32,onSelectedItemsChange:e,selectId:"user_group_default_channel_select",searcherOptions:WY}),m.a.createElement(BY.a,null,n))}}]),t}(p.PureComponent);GY.displayName="UserGroupDefaultChannelPicker",GY.defaultProps=HY;var KY={search:ez.c},VY=Object(g.b)(function(e){return{getChannelById:function(t){return Object(G.e)(e,t)},featureSonicUserGroups:Object(y.m)(e,"feature_sonic_user_groups")}},KY)(GY),zY=new B.b("user_groups"),YY=(h.b.object.isRequired,h.b.shape({name:h.b.string,handle:h.b.string,purpose:h.b.string,channels:h.b.array}),h.b.func.isRequired,h.b.func.isRequired,h.b.func.isRequired,h.b.bool.isRequired,h.b.func.isRequired,h.b.func.isRequired,h.b.shape({nameError:h.b.string,handleError:h.b.string,purposeError:h.b.string}),h.b.string,h.b.func.isRequired,h.b.number.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.state={name:e.detailsFormValues.name,handle:e.detailsFormValues.handle,purpose:e.detailsFormValues.purpose,channels:e.detailsFormValues.channels};var a=!n.state.name||!n.state.handle;return n.props.setRequiredFieldsEmpty(a),n.validateUserGroupName=Object(Gt.a)(n.validateUserGroupName,300).bind(n),n.validateUserGroupHandle=Object(Gt.a)(n.validateUserGroupHandle,300).bind(n),Object(Kt.a)(n,["onNameChange","onHandleChange","onPurposeChange","onChannelsUpdate","getFormValues","setUserGroupFormRef","maybeRenderApiError","focusNameInput"]),n.postValidateHandle=null,n.postValidateName=null,n.nameInputRef=m.a.createRef(),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.onRef(this),this.focusNameInput()}},{key:"componentDidUpdate",value:function(e){if(e!==this.props){var t=!this.state.name||!this.state.handle;this.props.setRequiredFieldsEmpty(t)}}},{key:"componentWillUnmount",value:function(){this.props.onRef(void 0)}},{key:"onNameChange",value:function(e){return this.postValidateName&&(this.postValidateName.cancel(),this.postValidateName=null),this.setState(function(){return{name:e}}),this.validateUserGroupName(e)}},{key:"onHandleChange",value:function(e){this.postValidateHandle&&(this.postValidateHandle.cancel(),this.postValidateHandle=null);var t=e.replace(/ /g,"");return this.setState(function(){return{handle:t}})," "!==e.charAt(0)?this.validateUserGroupHandle(t):Promise.resolve()}},{key:"onPurposeChange",value:function(e){this.props.onPurposeChange(e),this.setState(function(){return{purpose:e}})}},{key:"onChannelsUpdate",value:function(e){var t=e.map(function(e){return e.value});this.setState(function(){return{channels:t}})}},{key:"getFormValues",value:function(){return this.state}},{key:"setUserGroupFormRef",value:function(e){this.defaultChannelsRef=e}},{key:"focusNameInput",value:function(){this.nameInputRef.current.focus()}},{key:"validateUserGroupHandle",value:function(e){var t=this,n=this.props.userGroup;return this.props.validateUserGroupHandle({handle:e,prevHandle:Object(gY.f)(n,{includeAtSign:!1}),reason:"user-group-edit-create-form"}).then(function(e){t.props.setFormErrors({handleError:e})}).finally(function(){t.postValidateHandle=null})}},{key:"validateUserGroupName",value:function(e){var t=this,n=this.props.userGroup;return this.props.validateUserGroupName({name:e,prevName:Object(gY.h)(n),reason:"user-group-edit-create-form"}).then(function(e){t.props.setFormErrors({nameError:e})}).finally(function(){t.postValidateName=null})}},{key:"hasValidationErrors",value:function(e){return Object(Dd.a)(e,function(e){return e})}},{key:"maybeRenderApiError",value:function(){if(!this.props.featureSonicUserGroups)return null;if(this.props.submitError){var e=zY.t("We\u2019re not sure why, but that didn\u2019t work. Try again?");return m.a.createElement(Fb.a,{level:"error",type:"inline",className:"margin_bottom_100"},e)}return!1}},{key:"maybeRenderAutogeneratedUserGroupAlert",value:function(){var e=this.props.userGroup;if(!Object(gY.n)(e))return null;var t=zY.t("This user group is automatically generated for Workspace Admins.",{fallbackHash:"0cf6a765aa60fc4bc7f34f9ec7e18139d7ab4c37"}),n=zY.t("This user group is automatically generated for Workspace Owners.",{fallbackHash:"18d8fa9ec13425420cc46bc2669fc1f2055284c6"}),a=void 0;return Object(gY.p)(e)&&(a=n),Object(gY.o)(e)&&(a=t),m.a.createElement(Fb.a,{level:"info",type:"inline",className:"margin_bottom_100"},a)}},{key:"renderUserGroupNameField",value:function(){var e=this;if(!this.props.featureSonicUserGroups)return null;var t=zY.t("Name"),n=zY.t("e.g. Accounts Team");return m.a.createElement("div",null,m.a.createElement(ja.a,{htmlFor:"name_label",id:"user_group_name",key:"user_group_name",text:t},m.a.createElement(Ia.a,{name:"user_group_name",ref:this.nameInputRef,id:"name_input",placeholder:n,labelId:"user_group_name",value:this.state.name,type:"text",onChange:function(t){return e.onNameChange(t)},errorText:this.props.errors.nameError,isRequired:!0,useInlineAlert:!0,isDisabled:Object(gY.n)(this.props.userGroup)})))}},{key:"renderUserGroupHandleField",value:function(){var e=this;if(!this.props.featureSonicUserGroups)return null;var t=zY.t("e.g. accounts-team"),n=zY.t("You\u2019ll use the display name to get the group\u2019s attention. It should be all lowercase, with no spaces."),a=zY.t("Handle");return m.a.createElement("div",null,m.a.createElement(ja.a,{htmlFor:"handle_label",id:"user_group_handle",key:"user_group_handle",text:a},m.a.createElement(Ia.a,{name:"user_group_handle",id:"handle_input",placeholder:t,labelId:"user_group_handle",value:this.state.handle,type:"text",onChange:function(t){return e.onHandleChange(t)},errorText:this.props.errors.handleError,hintText:n,isRequired:!0,icon:"mentions",useInlineAlert:!0,isDisabled:Object(gY.n)(this.props.userGroup)})))}},{key:"renderUserGroupPurposeField",value:function(){var e=this;if(!this.props.featureSonicUserGroups)return null;var t=zY.t("Purpose"),n=zY.t("What is this group about?");return m.a.createElement("div",null,m.a.createElement(ja.a,{htmlFor:"purpose_label",id:"user_group_purpose",key:"user_group_purpose",text:t,optional:!0},m.a.createElement(cu.a,{name:"user_group_purpose",id:"purpose_input",labelId:"user_group_purpose",value:this.state.purpose,type:"text",onChange:function(t){return e.onPurposeChange(t)},errorText:this.props.errors.purposeError,hintText:n,maxCharacterLimit:this.props.purposeMaxLength,useInlineAlert:!0})))}},{key:"renderDefaultChannelSelect",value:function(){return m.a.createElement(VY,{selectedChannels:this.state.channels,onChange:this.onChannelsUpdate})}},{key:"render",value:function(){return this.props.featureSonicUserGroups?m.a.createElement("div",null,this.maybeRenderApiError(),this.maybeRenderAutogeneratedUserGroupAlert(),m.a.createElement("form",{className:"p-user_group_create_form"},this.renderUserGroupNameField(),this.renderUserGroupHandleField(),this.renderUserGroupPurposeField(),this.renderDefaultChannelSelect())):null}}]),t}(p.PureComponent));YY.displayName="UserGroupEditCreateForm",YY.defaultProps={detailsFormValues:{name:"",handle:"",purpose:"",channels:[]},errors:{nameError:"",handleError:"",purposeError:""},submitError:""};var QY={validateUserGroupName:PY,validateUserGroupHandle:UY},XY=Object(g.b)(function(e){return{featureSonicUserGroups:Object(y.m)(e,"feature_sonic_user_groups")}},QY)(YY),JY=(n("UJZI"),new B.b("user_groups")),ZY=(h.b.func,h.b.func,h.b.array,h.b.bool,h.b.string,{onSelectedItemsChange:d.a,getMemberById:d.a,userGroupMemberIds:[],isEnterprise:null,teamId:null}),$Y=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["getSelectedMembers","renderMemberOption","filterMembers"]),n}return u()(t,e),o()(t,[{key:"getSelectedMembers",value:function(e){var t=this;return e.map(function(e){return t.formatMemberOption(t.props.getMemberById(e))})}},{key:"formatMemberOption",value:function(e){return e?{label:Object(eo.F)(e),value:e.id}:null}},{key:"filterMembers",value:function(e){return!(this.props.isEnterprise&&!Object(eo.o)(e,[this.props.teamId]).length)}},{key:"renderMemberOption",value:function(e){return m.a.createElement(Jb.a,{id:e.value})}},{key:"render",value:function(){var e=this.props.userGroupMemberIds,t=this.getSelectedMembers(e);return m.a.createElement(Vb.c,{isRequired:!0,focusOnMount:!0,key:"user_group_member_select",selectId:"user_group_member_select",renderOption:this.renderMemberOption,selectedOptions:t,onSelectedItemsChange:this.props.onSelectedItemsChange,placeholderText:JY.t("Search by name"),width:"100%",maxHeight:148,optionsRowHeight:32,searcherOptions:{entities:{members:{includeSelf:!0,onlyLocalTeam:!0,includeSlackbot:!1,includeBots:!1,includeDeleted:!1,includeGuests:!1}},allowEmptyQuery:!0,sort:{frecency:!1,selfFirst:!1},limit:40,filter:this.filterMembers}})}}]),t}(p.PureComponent);$Y.displayName="UserGroupMemberSelector",$Y.defaultProps=ZY;var eQ=Object(g.b)(function(e,t){var n=t.groupId,a=Object(bY.e)(e,n);return{userGroupMemberIds:Object(gY.g)(a),getMemberById:function(t){return Object(xo.d)(e,t)},isEnterprise:Object(ig.d)(e),teamId:Object(v.b)(e)}})($Y),tQ=new B.b("user_groups"),nQ=(h.b.string,h.b.func,h.b.array,h.b.func,{groupId:void 0,onSelectedItemsChange:d.a,userGroupMemberIds:[],fetchAndUpsertUserGroupMembers:d.a}),aQ=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={updatedGroupMembers:e.userGroupMemberIds,displayNoMemberError:!1,haveUpsertedExistingMembers:!1},Object(Kt.a)(n,["setAllMembers","onSelectedItemsChange"]),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.groupId;t&&this.props.fetchAndUpsertUserGroupMembers({groupId:t}).then(function(t){e.setState(function(){return{haveUpsertedExistingMembers:!0}}),Object(ls.a)(t)||e.setState(function(){return{updatedGroupMembers:t}})})}},{key:"componentWillUnmount",value:function(){this.keyCommands&&this.keyCommands.reset()}},{key:"onSelectedItemsChange",value:function(e){this.setDisplayNoMemberError(!e.length),this.setAllMembers(e.map(function(e){return e.value})),this.props.onSelectedItemsChange(e)}},{key:"getUpdatedUserGroupMembers",value:function(){return this.state.updatedGroupMembers}},{key:"setDisplayNoMemberError",value:function(e){this.setState(function(){return{displayNoMemberError:e}})}},{key:"setAllMembers",value:function(e){this.setState(function(){return{updatedGroupMembers:e}})}},{key:"validateUpdatedGroupMemberCount",value:function(){var e=this.state.updatedGroupMembers.length>0;return e||this.setDisplayNoMemberError(!0),e}},{key:"maybeRenderNoMembersAlert",value:function(){return this.state.displayNoMemberError?m.a.createElement(Fb.a,{type:"inline",level:"error",className:"margin_right_150 margin_left_150 margin_bottom_100","data-qa-user-group-error":!0},tQ.t("User groups need to have at least one member.")):null}},{key:"renderLoadingSpinner",value:function(){return m.a.createElement("div",{className:"full_height full_width display_flex align_items_center","data-qa-user-group-loading":!0},m.a.createElement(ci.a,{size:"jumbo",className:"inline_block full_width margin_top_200"}))}},{key:"renderUserGroupMemberSelector",value:function(){var e=this.state.haveUpsertedExistingMembers,t=this.props.groupId;return m.a.createElement("div",{className:"p-user_group_member_selector","data-qa-user-group-member-management-body":!0},!t||e?m.a.createElement("div",null,this.maybeRenderNoMembersAlert(),m.a.createElement(eQ,{groupId:this.props.groupId,onSelectedItemsChange:this.onSelectedItemsChange})):m.a.createElement("div",{className:"p-user_group_member_selector_loading_spinner_container"},this.renderLoadingSpinner()))}},{key:"render",value:function(){return this.renderUserGroupMemberSelector()}}]),t}(p.PureComponent);aQ.displayName="UserGroupMemberManagement",aQ.defaultProps=nQ;var rQ={fetchAndUpsertUserGroupMembers:jY.i},iQ=Object(g.b)(function(e,t){var n=t.groupId,a=Object(bY.e)(e,n);return{userGroupMemberIds:Object(gY.g)(a)}},rQ,null,{withRef:!0})(aQ),oQ=Object(gt.b)("Validate the user group form",function(e,t,n){var a=n.name,r=n.handle,i=n.prevName,o=n.prevHandle;return Promise.all([e(PY({name:a,prevName:i})),e(UY({handle:r,prevHandle:o}))]).then(function(e){var t=it()(e,2);return{nameError:t[0],handleError:t[1]}})});oQ.meta={name:"validate",key:"componentsFlexpaneUserGroupsUtilityValidationValidate",description:"Validate the user group form"},oQ.propTypes={name:h.b.string,handle:h.b.string,prevName:h.b.string,prevHandle:h.b.string};var sQ=oQ,lQ=new B.b("user_groups"),cQ=(h.b.object.isRequired,h.b.string,h.b.string,h.b.string,h.b.string,h.b.array,h.b.func.isRequired,h.b.func.isRequired,h.b.func.isRequired,h.b.bool.isRequired,h.b.func,h.b.func,h.b.func,h.b.func.isRequired,{userGroupId:"",userGroupName:null,userGroupHandle:null,userGroupPurpose:"",userGroupDefaultChannels:[],closeModal:d.a,enqueueToast:d.a,showUserGroupDetails:d.a}),uQ=void 0,dQ=Object(Ct.b)(),pQ=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={formSubmitPending:!1,errors:{nameError:"",handleError:"",purposeError:""},formStep:"",submitError:"",requiredFieldsEmpty:!1,detailsFormValues:{name:n.props.userGroupName,handle:n.props.userGroupHandle,purpose:n.props.userGroupPurpose,channels:n.props.userGroupDefaultChannels},purposeTooLong:!1},Object(Kt.a)(n,["setFormErrors","setUserGroupFormRef","setUserGroupMemberManagementRef","setRequiredFieldsEmpty","onSubmitSuccess","onSubmitFailure","onDetailsStepComplete","onEditDialogSubmit","onCreateDialogSubmit","createDialogViewInfo","shouldShowCloseDialogSpeedBump","onSelectedItemsChange","onPurposeChange"]),n.onPurposeChange=Object(Gt.a)(n.onPurposeChange,300).bind(n),n.formRef=null,n}return u()(t,e),o()(t,[{key:"onCreateDialogSubmit",value:function(){var e=this;if(!this.props.featureSonicUserGroups)return null;var t=this.state.detailsFormValues,n=(t=void 0===t?{}:t).name,a=t.handle,r=t.purpose,i=t.channels;if(!this.userGroupMemberManagementRef)return!1;if(!this.userGroupMemberManagementRef.validateUpdatedGroupMemberCount())return this.setRequiredFieldsEmpty(!0),!1;var o=this.userGroupMemberManagementRef.getUpdatedUserGroupMembers();return this.props.createUserGroup({name:Object(Wt.a)(n),handle:a,description:r,channels:i,users:o,reason:"onCreateDialogSubmit"}).then(function(t){var n=t.id;e.props.showUserGroupDetails({groupId:n}),e.props.addUserGroupIds([n])}).then(function(){e.props.enqueueToast({element:m.a.createElement(Cn.b,null,lQ.t("User group created!"))}),e.onSubmitSuccess()}).catch(function(t){dQ.error("Error creating user group: "+t),e.onSubmitFailure(t)})}},{key:"onDetailsStepComplete",value:function(){var e=this,t=this.formRef.getFormValues();return this.setFormSubmitPending(!0),this.props.validate(ye()({},t,{prevName:this.props.userGroupName,prevHandle:this.props.userGroupHandle})).then(function(n){e.setFormErrors(n),e.hasValidationErrors(n)?e.setFormSubmitPending(!1):e.state.formStep===uQ.edit.id?e.onEditDialogSubmit(t):(e.setDetailsFormValues(t),e.setDialogStep(uQ.members.id),e.setFormSubmitPending(!1))})}},{key:"onEditDialogSubmit",value:function(e){var t=this,n=e.name,a=e.handle,r=e.purpose,i=e.channels;if(!this.props.featureSonicUserGroups)return null;var o=this.props.userGroupId;return this.props.updateUserGroup({groupId:o,name:Object(Wt.a)(n),handle:a,description:r,channels:i,reason:"onEditDialogSubmit"}).then(function(){t.props.enqueueToast({element:m.a.createElement(Cn.b,null,lQ.t("Group has been updated."))}),t.onSubmitSuccess()}).catch(function(e){dQ.error("Error editing user group: "+e),t.onSubmitFailure(e)})}},{key:"onPurposeChange",value:function(e){var t=e.length>140;this.setState(function(){return{purposeTooLong:t}})}},{key:"onSelectedItemsChange",value:function(e){this.setRequiredFieldsEmpty(!e.length)}},{key:"onSubmitFailure",value:function(e){this.setFormSubmitPending(!1),this.setApiError(e)}},{key:"onSubmitSuccess",value:function(){this.setFormSubmitPending(!1),this.props.closeModal(),this.setApiError("")}},{key:"getDetailsFormDialogProps",value:function(){if(!this.props.featureSonicUserGroups)return null;var e=this.state.formStep,t=Object(Dd.a)(uQ,function(t){return t.id===e});return{title:t.title,contentLabel:t.title,goButtonText:t.goButtonText,onGo:this.onDetailsStepComplete,shouldCloseOnCancel:!0,cancelText:lQ.t("Cancel"),shouldCloseOnGo:!1,footerText:t.footerText}}},{key:"getMemberSelectorDialogProps",value:function(){var e=this;return this.props.featureSonicUserGroups?{title:uQ.members.title,contentLabel:uQ.members.title,shouldCloseOnGo:!0,bodyClassName:"p-user_group_member_management__dialog_body",onGo:this.onCreateDialogSubmit,goButtonText:uQ.members.goButtonText,shouldCloseOnCancel:!1,cancelText:lQ.t("Back"),onCancel:function(){e.setDialogStep(uQ.details.id)},footerText:uQ.members.footerText}:null}},{key:"setApiError",value:function(e){this.setState(function(){return{submitError:e}})}},{key:"setDetailsFormValues",value:function(e){this.setState(function(t){return{detailsFormValues:ye()({},t.detailsFormValues,e)}})}},{key:"setDialogStep",value:function(e){this.setState(function(){return{formStep:e}})}},{key:"setFormErrors",value:function(e){this.setState(function(t){return{errors:ye()({},t.errors,e)}})}},{key:"setFormSubmitPending",value:function(e){this.setState(function(){return{formSubmitPending:e}})}},{key:"setRequiredFieldsEmpty",value:function(e){this.setState(function(){return{requiredFieldsEmpty:e}})}},{key:"setUserGroupFormRef",value:function(e){this.formRef=e}},{key:"setUserGroupMemberManagementRef",value:function(e){this.userGroupMemberManagementRef=e&&e.getWrappedInstance?e.getWrappedInstance():e}},{key:"UNSAFE_componentWillMount",value:function(){this.createDialogViewInfo(),this.props.userGroupId?this.setDialogStep(uQ.edit.id):this.setDialogStep(uQ.details.id)}},{key:"createDialogViewInfo",value:function(){this.props.featureSonicUserGroups&&(uQ={details:{id:"details",footerText:lQ.t("Step 1 of 2"),title:lQ.t("Create User Group"),goButtonText:lQ.t("Next")},members:{id:"members",footerText:lQ.t("Step 2 of 2"),title:lQ.t("Add members"),goButtonText:lQ.t("Create Group")},edit:{id:"edit",footerText:null,title:lQ.t("Edit User Group"),goButtonText:lQ.t("Save")}})}},{key:"hasValidationErrors",value:function(e){return!!Object(Dd.a)(e,function(e){return e.length})}},{key:"shouldShowCloseDialogSpeedBump",value:function(e){if("go"===e||this.state.formStep===uQ.members.id)return!1;var t=this.formRef.getFormValues();return!Object(Ox.a)(this.state.detailsFormValues,t)}},{key:"renderDetailsForm",value:function(){var e=this;return m.a.createElement("div",null,m.a.createElement(XY,ye()({},this.props,{detailsFormValues:this.state.detailsFormValues,errors:this.state.errors,submitError:this.state.submitError,setFormErrors:this.setFormErrors,onRef:function(t){return e.setUserGroupFormRef(t)},setRequiredFieldsEmpty:this.setRequiredFieldsEmpty,onPurposeChange:this.onPurposeChange,purposeMaxLength:140,userGroup:this.props.userGroup})))}},{key:"renderDialogStep",value:function(){return this.state.formStep===uQ.details.id||this.state.formStep===uQ.edit.id?this.renderDetailsForm():this.state.formStep===uQ.members.id?this.renderMemberSelector():""}},{key:"renderMemberSelector",value:function(){return this.props.featureSonicUserGroups?m.a.createElement(iQ,{groupId:this.props.userGroupId,ref:this.setUserGroupMemberManagementRef,onSelectedItemsChange:this.onSelectedItemsChange}):null}},{key:"render",value:function(){if(!this.props.featureSonicUserGroups)return null;var e=this.hasValidationErrors(this.state.errors)||this.state.requiredFieldsEmpty||this.state.purposeTooLong,t=this.state.formStep===uQ.details.id||this.state.formStep===uQ.edit.id?this.getDetailsFormDialogProps():this.getMemberSelectorDialogProps();return m.a.createElement(nn.b,ye()({showCancelButton:!0,goButtonIsDisabled:e,goButtonIsPending:this.state.formSubmitPending},t,{getShouldShowSpeedBump:this.shouldShowCloseDialogSpeedBump,speedBumpCancelButtonText:lQ.t("Keep Editing"),speedBumpContinueButtonText:lQ.t("Close"),speedBumpTitleText:lQ.t("Your work won\u2019t be saved - are you sure you want to close?")}),this.renderDialogStep())}}]),t}(p.PureComponent);pQ.displayName="UserGroupEditCreateDialog",pQ.defaultProps=cQ;var mQ={createUserGroup:jY.f,updateUserGroup:jY.n,closeModal:tn.a,enqueueToast:en.c,showUserGroupDetails:jn.n,validate:sQ,addUserGroupIds:fY.a},hQ=Object(g.b)(function(e,t){var n=Object(bY.e)(e,t.userGroupId);return n?{userGroup:n,userGroupName:Object(gY.h)(n),userGroupHandle:Object(gY.f)(n,{includeAtSign:!1}),userGroupPurpose:Object(gY.e)(n),userGroupDefaultChannels:Object(gY.d)(e,n),featureSonicUserGroups:Object(y.m)(e,"feature_sonic_user_groups")}:{userGroup:{},userGroupName:"",userGroupHandle:"",userGroupPurpose:"",userGroupDefaultChannels:[],featureSonicUserGroups:Object(y.m)(e,"feature_sonic_user_groups")}},mQ)(pQ),bQ=(h.b.string.isRequired,h.b.bool.isRequired,h.b.bool.isRequired,h.b.bool,h.b.bool,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.object,h.b.func,{isDetailsView:!1,featureSonicUserGroups:!1,onEnableUserGroup:d.a,onDisableUserGroup:d.a,canEditUserGroups:d.a,canCreateAndDeleteUserGroups:d.a,openModal:d.a,menuProps:{},onClick:d.a}),fQ=new B.b("user_groups"),gQ=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["onEnableUserGroup","onDisableUserGroup","onEditDetails","onEditMembers"]),n}return u()(t,e),o()(t,[{key:"onEnableUserGroup",value:function(){return this.props.onClick(),this.props.onEnableUserGroup()}},{key:"onDisableUserGroup",value:function(){this.props.openModal({element:this.renderConfirmationDialog({action:"disable_group",onSubmit:this.props.onDisableUserGroup})}),this.props.onClick()}},{key:"onEditDetails",value:function(){this.props.openModal({element:this.renderEditDialog(this.props.groupId)})}},{key:"onEditMembers",value:function(){this.props.openModal({element:this.renderEditMembersDialog()})}},{key:"getEditMenuItems",value:function(){if(!this.props.featureSonicUserGroups)return null;var e=this.props,t=e.isAutoGenerated,n=e.isDetailsView;if(t&&n)return null;var a=[];return n||t||a.push({key:"menu-edit-members",label:fQ.t("Edit group members..."),onSelected:this.onEditMembers}),a.push({key:"menu-edit-details",label:fQ.t("Edit group details..."),onSelected:this.onEditDetails}),a}},{key:"getMenuItems",value:function(){var e=this;if(!this.props.featureSonicUserGroups)return null;var t=[];if(this.userGroupIsEditable()){var n=this.getEditMenuItems();n&&t.push.apply(t,ti()(n))}return this.canEnableUserGroup()?t.push({key:"menu-enable",label:fQ.t("Enable group"),onSelected:function(){return e.onEnableUserGroup()}}):this.canDisableUserGroup()&&t.push({key:"menu-disable",label:fQ.t("Deactivate group"),danger:!0,onSelected:function(){return e.onDisableUserGroup()}}),t}},{key:"userGroupIsEditable",value:function(){return this.props.canEditUserGroups()&&this.props.isActive}},{key:"canDisableUserGroup",value:function(){return this.props.canCreateAndDeleteUserGroups()&&this.props.isActive}},{key:"canEnableUserGroup",value:function(){return this.props.canCreateAndDeleteUserGroups()&&!this.props.isActive}},{key:"renderConfirmationDialog",value:function(e){var t=e.action,n=e.onSubmit,a=this.props.groupId;return m.a.createElement(RQ,{groupId:a,action:t,onSubmit:n})}},{key:"renderEditDialog",value:function(e){return m.a.createElement(hQ,{userGroupId:e})}},{key:"renderEditMembersDialog",value:function(){var e=this.props.groupId;return m.a.createElement(HQ,{groupId:e})}},{key:"render",value:function(){return this.props.featureSonicUserGroups?m.a.createElement(na.f,ye()({},this.props.menuProps,{width:"auto"}),this.getMenuItems().map(function(e){return m.a.createElement(na.b,e)})):null}}]),t}(p.PureComponent);gQ.displayName="UserGroupContextMenu",gQ.defaultProps=bQ;var _Q=Object(g.b)(function(e,t){var n=t.groupId,a=t.isDetailsView,r=Object(bY.e)(e,n);return{isActive:Object(gY.u)(r),isAutoGenerated:Object(gY.n)(r),isDetailsView:a,canEditUserGroups:function(){return Object(gY.c)(e)},canCreateAndDeleteUserGroups:function(){return Object(gY.b)(e)},featureSonicUserGroups:Object(y.m)(e,"feature_sonic_user_groups")}},function(e,t){var n=t.groupId;return{openModal:function(){return e(tn.e.apply(void 0,arguments))},onLoad:function(){return e(Object(jY.i)({groupId:n}))},onDisableUserGroup:function(){e(Object(jY.g)({groupId:n})).then(function(){return e(Object(jn.o)())})},onEnableUserGroup:function(){e(Object(jY.h)({groupId:n})).then(function(){return e(Object(jn.n)({groupId:n}))})}}})(gQ),vQ=(n("sQIv"),new B.b("user_groups")),yQ=(h.b.object,h.b.func.isRequired,h.b.func.isRequired,h.b.bool.isRequired,{userGroup:void 0}),kQ=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderUserGroupOptionsMenu=n.renderUserGroupOptionsMenu.bind(n),n}return u()(t,e),o()(t,[{key:"renderUserGroupOptionsMenu",value:function(e){return m.a.createElement(_Q,{menuProps:e,groupId:this.props.userGroup.id,isDetailsView:!0})}},{key:"renderUserGroupOptions",value:function(){if(!this.props.featureSonicUserGroups)return null;var e=vQ.t("More actions");return m.a.createElement(na.e,{renderMenu:this.renderUserGroupOptionsMenu,position:"bottom-right"},m.a.createElement(qi.c,{tip:e,delay:qi.a,position:"top-right"},m.a.createElement(_e.d,{type:"outline",className:"p-user_group_details__button--options","data-qa-user-group-details-group-options-btn":!0,"aria-label":e,icon:"ellipsis"})))}},{key:"renderEditMembersButton",value:function(){return this.props.featureSonicUserGroups?m.a.createElement(_e.d,{type:"outline",className:"p-user_group_details__button--edit",onClick:this.props.onEditMembers,"data-qa-user-group-details-edit-members-btn":!0},vQ.t("Edit Members")):null}},{key:"renderEditDetailsButton",value:function(){return this.props.featureSonicUserGroups?m.a.createElement(_e.d,{type:"outline",className:"p-user_group_details__button--edit",onClick:this.props.onEditDetails,"data-qa-user-group-details-edit-details-btn":!0},vQ.t("Edit Details")):null}},{key:"renderPrimaryAction",value:function(){return Object(gY.n)(this.props.userGroup)?this.renderEditDetailsButton():this.renderEditMembersButton()}},{key:"render",value:function(){return this.props.featureSonicUserGroups?m.a.createElement("div",{className:"p-user_group_details__actions"},this.renderPrimaryAction(),this.renderUserGroupOptions()):null}}]),t}(p.Component);kQ.displayName="UserGroupsDetailsActionBar";kQ.defaultProps=yQ;var OQ=Object(g.b)(function(e,t){var n=t.groupId;return{userGroup:Object(bY.e)(e,n),featureSonicUserGroups:Object(y.m)(e,"feature_sonic_user_groups")}})(kQ),CQ="members",EQ="channels",jQ=new B.b("user_groups"),SQ=(h.b.shape({created_by:h.b.string,date_create:h.b.number,date_delete:h.b.number,date_update:h.b.number,deleted_by:h.b.string,description:h.b.string,enterprise_subteam_id:h.b.string,handle:h.b.string,id:h.b.string,is_external:h.b.bool,is_subteam:h.b.bool,is_usergroup:h.b.bool,name:h.b.string,prefs:h.b.shape({channels:h.b.array,groups:h.b.array}),team_id:h.b.string,updated_by:h.b.string,user_count:h.b.number,users:h.b.array,_name_lc:h.b.string}),h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.string.isRequired,h.b.array,h.b.array,h.b.array,h.b.bool,{userGroup:{},fetchUserGroupMembers:d.a,onChannelSwitch:d.a,removeMember:d.a,removeChannel:d.a,openModal:d.a,openUserGroupList:d.a,enqueueToast:d.a,canEditUserGroups:d.a,canCreateAndDeleteUserGroups:d.a,userGroupMembers:[],newMembers:[],userGroupDefaultChannels:[],showMemberProfile:d.a,getPrefCompliantMemberNameLowerCase:d.a,featureSonicUserGroups:!1}),IQ=Object(Ct.b)(),wQ=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={sortedMembers:[],freshMount:!0},Object(Kt.a)(n,["onViewProfile","onRemoveFromGroup","onAddMembers","onAddChannels","renderMemberItem","renderChannelItem","renderChannelsList","renderMembersList","renderListItemOptionsMenu","renderConfirmationDialog","renderContent","focus","getAriaLabelForChannelRow","getAriaLabelForMemberRow","onItemTabWithin","sortMembers","setSortedMembers","setAndUpdateSortedMembers"]),n.memberList=m.a.createRef(),n.channelsList=m.a.createRef(),n.flexpane=m.a.createRef(),n.channelListKeys=null,n.memberListKeys=null,n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){Object(gY.u)(this.props.userGroup)&&this.props.fetchUserGroupMembers("user-group-details/componentDidMount")}},{key:"componentDidUpdate",value:function(e){var t=e.userGroup,n=(t.users,Ep()(t,["users"])),a=this.props.userGroup,r=(a.users,Ep()(a,["users"])),i=this.props.userGroupMembers,o=this.state.freshMount;Object(Ox.a)(n,r)||this.props.fetchUserGroupMembers("user-group-details/componentDidUpdate"),(o&&!Object(Ox.a)(e.userGroupMembers,i)||o&&e.userGroupMembers.length)&&this.setSortedMembers(this.sortMembers(i)),o||Object(Ox.a)(e.userGroupMembers,i)||this.setAndUpdateSortedMembers(this.state.sortedMembers,i)}},{key:"onRemoveMember",value:function(e){var t=this;this.props.featureSonicUserGroups&&this.props.openModal({element:this.renderConfirmationDialog({action:"remove_member",onSubmit:function(){t.props.removeMember(e).then(function(){t.props.enqueueToast({element:m.a.createElement(Cn.b,null,jQ.t("Member removed from group."))})}).catch(function(e){IQ.error("Error removing member from user group: "+e),"no_users_provided"===e.data.error&&t.props.enqueueToast({element:m.a.createElement(Cn.b,null,jQ.t("User groups need to have at least one member."))})})},id:e})})}},{key:"onRemoveChannel",value:function(e){var t=this;this.props.featureSonicUserGroups&&this.props.openModal({element:this.renderConfirmationDialog({action:"remove_channel",onSubmit:function(){t.props.removeChannel(e).then(function(){t.props.enqueueToast({element:m.a.createElement(Cn.b,null,jQ.t("Channel removed from group."))})}).catch(function(e){IQ.error("Error removing default channel from user group: "+e)})},id:e})})}},{key:"onAddMembers",value:function(){this.displayMemberManagementDialog()}},{key:"onAddChannels",value:function(){this.displayEditDetailsDialog()}},{key:"onRemoveFromGroup",value:function(e){var t=e.type,n=e.id;t===CQ?this.onRemoveMember(n):t===EQ&&this.onRemoveChannel(n)}},{key:"onViewProfile",value:function(e){var t=e.type,n=e.id;return t===CQ?this.props.showMemberProfile({memberId:n}):t===EQ?this.props.onChannelSwitch(n):null}},{key:"onItemTabWithin",value:function(){var e=this.flexpane.current;e&&e.setInitialActiveSection()}},{key:"setSortedMembers",value:function(e){this.setState(function(){return{sortedMembers:e}})}},{key:"setAndUpdateSortedMembers",value:function(e,t){var n=Object(CY.a)(e,t),a=Object(EY.a)(t,e);n=n.concat(a),this.setState(function(){return{sortedMembers:n}})}},{key:"getTabs",value:function(){if(!this.props.featureSonicUserGroups)return null;var e=this.props,t=e.userGroup,n=e.userGroupDefaultChannels,a=void 0===n?[]:n,r=Object(gY.l)(t);return[{title:jQ.rt("Members"),titleCount:r,id:"user-groups-members-tab",content:this.renderMembersList()},{title:jQ.rt("Channels"),titleCount:a.length,id:"user-groups-channels-tab",content:this.renderChannelsList()}]}},{key:"getAriaLabelForChannelRow",value:function(e){var t=e.index;if(this.channelListKeys){var n=this.props.userGroupDefaultChannels[t];return{"aria-label":uR({type:Object(K.v)(n),displayName:Object(K.w)(n),isShared:Object(K.ab)(n),isOrgShared:Object(K.vb)(n),isArchived:Object(K.X)(n)})}}}},{key:"getAriaLabelForMemberRow",value:function(e){var t=e.index;if(this.memberListKeys){var n=this.props.userGroupMembers[t];return{"aria-label":Object(BN.a)({name:Object(eo.K)(n),isDeleted:Object(eo.mb)(n),isAppOrBot:!1,isGuest:!1})}}}},{key:"sortMembers",value:function(e){var t=this;return this.setState(function(){return{freshMount:!1}}),Object(Jm.a)(e,function(e){return t.props.getPrefCompliantMemberNameLowerCase(e)})}},{key:"focus",value:function(){var e=this.memberList.current||this.channelsList.current;e&&e.focus()}},{key:"displayMemberManagementDialog",value:function(){this.props.openModal({element:this.renderEditMembersDialog()})}},{key:"displayEditDetailsDialog",value:function(){this.props.openModal({element:this.renderEditDetailsDialog()})}},{key:"userGroupIsEditable",value:function(){var e=this.props.userGroup;return this.props.canEditUserGroups()&&Object(gY.u)(e)}},{key:"canRemoveItem",value:function(e){var t=this.props.userGroup;return e!==CQ||!Object(gY.n)(t)}},{key:"renderHeader",value:function(){var e=this.props.userGroup;return m.a.createElement("div",{className:"p-user_group_details__section"},m.a.createElement("div",{className:"p-user_group_details__name"},Object(gY.h)(e)),m.a.createElement("div",{className:"p-user_group_details__description"},Object(gY.e)(e)),m.a.createElement("div",{className:"p-user_group_details__handle"},Object(gY.f)(e,{includeAtSign:!0})))}},{key:"renderActions",value:function(){var e=this;return this.props.featureSonicUserGroups&&this.userGroupIsEditable()&&this.props.canEditUserGroups()?m.a.createElement("div",{className:"p-user_group_details__section"},m.a.createElement(OQ,{groupId:this.props.groupId,onEditMembers:function(){return e.displayMemberManagementDialog()},onEditDetails:function(){return e.displayEditDetailsDialog()}})):null}},{key:"renderTabs",value:function(){var e=this.getTabs();return m.a.createElement(Y.a,{tabs:e,defaultTabId:"user-groups-members-tab",fullHeight:!0,fullWidthMenu:!0})}},{key:"renderListItemOptionsMenu",value:function(e){var t=this,n=e.menuProps,a=e.id,r=e.type;if(!this.props.featureSonicUserGroups)return null;var i=r===EQ?jQ.t("Open channel"):jQ.t("View profile"),o=[m.a.createElement(na.b,{key:a,label:i,onSelected:function(){return t.onViewProfile({type:r,id:a})}})];return this.canRemoveItem(r)&&o.push(m.a.createElement(na.b,{key:a,label:jQ.t("Remove from group..."),onSelected:function(){return t.onRemoveFromGroup({type:r,id:a})},danger:!0})),m.a.createElement(na.f,ye()({},n,{width:"auto"}),o)}},{key:"renderMemberItem",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.userGroupIsEditable(),a=Object(fs.a)(this.props.newMembers,t),r={className:f()("p-user_group_details__list_item",{"p-user_group_details__list_item--has_options":n,"p-user_group_base_row--active":a}),isContextButtonVisible:n,tooltip:this.renderTooltip(),onClick:function(){return e.onViewProfile({type:CQ,id:t.id})},renderMenu:function(n){return e.renderListItemOptionsMenu({menuProps:n,id:t.id,type:CQ})},customProps:{key:t.id,"data-qa-user-group-details-members-list-item":!0,"data-qa-user-group-details-members-list-item-id":t.id},id:t.id};return m.a.createElement(UQ,r)}},{key:"renderChannelItem",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.userGroupIsEditable(),a={className:f()("p-user_group_details__list_item",{"p-user_group_details__list_item--has_options":n}),isContextButtonVisible:n,tooltip:this.renderTooltip(),onClick:function(){return e.onViewProfile({type:EQ,id:t.id})},renderMenu:function(n){return e.renderListItemOptionsMenu({menuProps:n,id:t.id,type:EQ})},customProps:{key:t.id,"data-qa-user-group-details-channels-list-item":!0,"data-qa-user-group-details-channels-list-item-id":t.id},id:t.id};return m.a.createElement(UQ,a)}},{key:"renderTooltip",value:function(){return this.props.featureSonicUserGroups?jQ.t("More actions"):null}},{key:"renderMembersList",value:function(){var e=this,t=this.props,n=t.userGroup,a=t.userGroupMembers,r=this.state.sortedMembers;if(!a||Object(ls.a)(a))return this.renderEmptyMemberState();this.memberListKeys=Object(ft.a)(r,"id");var i=Object(gY.h)(n);return m.a.createElement(sb.a,null,function(t){var n=t.width,a=t.height,o=t.measureRef;return m.a.createElement("div",{className:"p-user_group_details__list","data-qa-user-group-details-members-list":!0,ref:o},m.a.createElement(ui.a,{ref:e.memberList,width:n,height:a,keys:e.memberListKeys,rowRenderer:function(t){return e.renderMemberItem(r[t])},"aria-label":jQ.t("{userGroupName} Members",{userGroupName:i}),getPropsForItem:e.getAriaLabelForMemberRow,onItemTabWithin:e.onItemTabWithin}))})}},{key:"renderChannelsList",value:function(){var e=this,t=this.props,n=t.userGroupDefaultChannels,a=t.userGroup;if(!n||Object(ls.a)(n))return this.renderEmptyChannelState();this.channelListKeys=Object(ft.a)(n,"id");var r=Object(gY.h)(a);return m.a.createElement(sb.a,null,function(t){var a=t.width,i=t.height,o=t.measureRef;return m.a.createElement("div",{className:"p-user_group_details__list","data-qa-user-group-details-channels-list":!0,ref:o},m.a.createElement(ui.a,{ref:e.channelsList,width:a,height:i,keys:e.channelListKeys,rowRenderer:function(t){return e.renderChannelItem(n[t])},"aria-label":jQ.t("{userGroupName} Default Channels",{userGroupName:r}),getPropsForItem:e.getAriaLabelForChannelRow,onItemTabWithin:e.onItemTabWithin}))})}},{key:"renderEmptyMemberState",value:function(){if(!this.props.featureSonicUserGroups)return null;var e=jQ.t("Nobody\u2019s in this group"),t=jQ.t("Add Members");return m.a.createElement("div",{className:"p-user_group_details__empty_list","data-qa-user-group-members-empty-list":!0},m.a.createElement(iy.a,{title:e,description:"You can add a few people with the button below.",primaryActionText:t,onClickPrimaryAction:this.onAddMembers}))}},{key:"renderEmptyChannelState",value:function(){if(!this.props.featureSonicUserGroups)return null;var e=jQ.t("Add Default Channels"),t=jQ.t("No default channels"),n=jQ.t("All members of a user group are automatically added to its default channels.");return m.a.createElement("div",{className:"p-user_group_details__empty_list"},m.a.createElement(iy.a,{title:t,description:n,primaryActionText:e,onClickPrimaryAction:this.onAddChannels}))}},{key:"renderConfirmationDialog",value:function(e){var t=e.action,n=e.onSubmit,a=e.id,r=this.props.groupId;return m.a.createElement(RQ,{action:t,onSubmit:n,id:a,groupId:r})}},{key:"renderEditMembersDialog",value:function(){var e=this.props.groupId;return m.a.createElement(HQ,{groupId:e})}},{key:"renderEditDetailsDialog",value:function(){var e=this.props.groupId;return m.a.createElement(hQ,{userGroupId:e})}},{key:"renderContent",value:function(){if(!this.props.featureSonicUserGroups)return null;var e=this.props.userGroup;return m.a.createElement("div",{className:"p-user_group_details p-user_group__content","data-qa-user-group-details":!0,"data-qa-user-group-details-id":e.id},this.renderHeader(),this.renderActions(),this.renderTabs())}},{key:"render",value:function(){return this.props.featureSonicUserGroups?m.a.createElement(UV.b,{ref:this.flexpane,focus:this.focus,className:"p-user_groups_flexpane_container",onOptionsClick:this.onCreateUserGroup,renderBody:this.renderContent,title:jQ.t("User Groups"),viewId:"user-group-details",kbNavOrder:Object(ae.a)()?void 0:7}):null}}]),t}(p.PureComponent);wQ.displayName="UserGroupDetails",wQ.defaultProps=SQ;var NQ=Object(g.b)(function(e,t){var n=t.groupId,a=Object(bY.e)(e,n),r=Object(y.m)(e,"feature_sonic_user_groups");if(Object(gY.t)(a))return{userGroup:a,featureSonicUserGroups:r};var i=Object(gY.g)(a),o=Object(ft.a)(i,function(t){return Object(xo.d)(e,t)}),s=Object(gY.d)(e,a);return{userGroup:a,featureSonicUserGroups:r,userGroupMembers:o,userGroupDefaultChannels:Object(ft.a)(s,function(t){return Object(G.e)(e,t)}),canEditUserGroups:function(){return Object(gY.c)(e)},canCreateAndDeleteUserGroups:function(){return Object(gY.b)(e)},getPrefCompliantMemberNameLowerCase:function(t){return Object(eo.X)(e,t)}}},function(e,t){var n=t.groupId;return{openModal:function(){return e(tn.e.apply(void 0,arguments))},fetchUserGroupMembers:function(t){return e(Object(jY.i)({groupId:n,reason:t}))},removeMember:function(t){return e(Object(jY.m)({groupId:n,memberId:t}))},removeChannel:function(t){return e(Object(jY.l)({groupId:n,channelId:t}))},onChannelSwitch:function(t){return e(Object(aD.a)({id:t}))},openUserGroupList:function(){return e(Object(jn.o)())},enqueueToast:function(){return e(en.c.apply(void 0,arguments))},showMemberProfile:function(){return e(jn.j.apply(void 0,arguments))}}})(wQ),TQ=new B.b("user_groups"),AQ=(h.b.oneOf(Object(mb.a)({disable_group:"disable_group",remove_member:"remove_member",remove_channel:"remove_channel"})).isRequired,h.b.func.isRequired,h.b.string,h.b.string,h.b.bool,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onGo=n.onGo.bind(n),n}return u()(t,e),o()(t,[{key:"onGo",value:function(){return this.props.onSubmit()}},{key:"getTitle",value:function(){if(!this.props.featureSonicUserGroups)return"";var e=this.props,t=e.action,n=e.groupName;switch(t){case"disable_group":return TQ.t("Deactivate {groupName}?",{groupName:n});case"remove_member":return TQ.t("Remove from group?");case"remove_channel":return TQ.t("Remove default channel?")}return""}},{key:"getButtonText",value:function(){if(!this.props.featureSonicUserGroups)return"";switch(this.props.action){case"disable_group":return TQ.t("Deactivate");case"remove_member":case"remove_channel":return TQ.t("Remove")}return""}},{key:"getDialogBody",value:function(){if(!this.props.featureSonicUserGroups)return"";var e=this.props,t=e.groupName,n=e.label;switch(e.action){case"disable_group":return TQ.rt("If you deactivate this user group, you won\u2019t be able to use <strong>{groupName}</strong> or view a list of its members. You can reactivate this group at any time.",{groupName:t});case"remove_member":return TQ.rt("Are you sure you want to remove <strong>{label}</strong> from the <strong>{groupName}</strong> user group?",{label:n,groupName:t});case"remove_channel":return TQ.rt("Are you sure you want to remove <strong>{label}</strong> as a default channel for the <strong>{groupName}</strong> user group?",{label:n,groupName:t})}return""}},{key:"render",value:function(){return m.a.createElement(nn.b,{showHeader:!0,showGoButton:!0,title:this.getTitle(),goButtonText:this.getButtonText(),goButtonType:"danger",onGo:this.onGo},m.a.createElement("p",null,this.getDialogBody()))}}]),t}(p.Component));AQ.displayName="UserGroupConfirmationDialog",AQ.defaultProps={label:"",groupName:"",featureSonicUserGroups:!1};var RQ=Object(g.b)(function(e,t){var n=t.id,a=t.groupId,r="",i=Object(bY.e)(e,a);if(Object(_a.a)(n)){var o=Object(G.e)(e,n);r=Object(K.x)(e,o)}else if(Object(zb.a)(n)){var s=Object(xo.d)(e,n);r=Object(eo.K)(s)}return{groupName:Object(gY.h)(i),label:r,featureSonicUserGroups:Object(y.m)(e,"feature_sonic_user_groups")}})(AQ),PQ=n("8pCN"),MQ=n("6ne/"),xQ=n("/foC"),FQ=(n("/VNe"),h.b.string,h.b.func.isRequired,h.b.string,h.b.bool,h.b.func,h.b.string,new B.b("user_groups")),LQ={id:null,className:"",isContextButtonVisible:!1,onClick:d.a,tooltip:void 0},DQ=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"getTooltipLabel",value:function(){return this.props.tooltip||FQ.t("Edit user groups")}},{key:"renderContextButton",value:function(){var e=this.props,t=e.isContextButtonVisible,n=e.renderMenu;if(!t)return null;var a={tooltip:this.getTooltipLabel(),icon:"ellipsis",tooltipPosition:"top-right",onClick:n,menuProps:{renderMenu:n,width:"auto"}};return m.a.createElement(PQ.b,{customClasses:"p-user_group_base_row__list_item_option"},m.a.createElement(PQ.a,a))}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.id,a=e.onClick,r=f()("p-user_group_base_row__list_item","p-user_group_base_row__entity",{"p-user_group_base_row__entity_group":n&&Object(aV.a)(n)},t);return Object(_a.a)(n)?m.a.createElement(xQ.a,{channelId:n,secondaryContent:this.renderContextButton(),showPurpose:!1,onClick:a,className:r}):Object(zb.a)(n)?m.a.createElement(sy.a,{className:r,id:n,secondaryContent:this.renderContextButton()}):m.a.createElement(MQ.a,{id:n,secondaryContent:this.renderContextButton(),className:r})}}]),t}(p.PureComponent);DQ.displayName="UserGroupBaseRow",DQ.defaultProps=LQ;var UQ=DQ,BQ=new B.b("user_groups"),qQ=(h.b.bool,h.b.string.isRequired,h.b.func.isRequired,h.b.func.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={searchResultMode:!1,disableGoButton:!1},Object(Kt.a)(n,["onSave","onUpsertSuccess","onToggleSearchResultsMode","setUserGroupMemberManagementRef","onSelectedItemsChange"]),n.userGroupMemberManagementRef=null,n}return u()(t,e),o()(t,[{key:"onSave",value:function(){if(!this.userGroupMemberManagementRef)return!1;if(!this.userGroupMemberManagementRef.validateUpdatedGroupMemberCount())return!1;var e=this.userGroupMemberManagementRef.getUpdatedUserGroupMembers();return this.props.bulkUpsertUserGroupMembers(e).then(this.onUpsertSuccess).catch(this.onUpsertFailure)}},{key:"onSelectedItemsChange",value:function(e){this.setState(function(){return{disableGoButton:!e.length}})}},{key:"onUpsertSuccess",value:function(){this.props.featureSonicUserGroups&&this.props.enqueueToast({element:m.a.createElement(Cn.b,null,BQ.t("Group has been updated."))})}},{key:"onUpsertFailure",value:function(e){Object(Ct.b)().error("Error updating user group members: "+JSON.stringify(e))}},{key:"onToggleSearchResultsMode",value:function(){this.setState(function(e){return{searchResultMode:!e.searchResultMode}})}},{key:"setUserGroupMemberManagementRef",value:function(e){this.userGroupMemberManagementRef=e&&e.getWrappedInstance?e.getWrappedInstance():e}},{key:"render",value:function(){if(!this.props.featureSonicUserGroups)return null;var e=BQ.t("Edit members");return m.a.createElement(nn.b,{showHeader:!0,showGoButton:!0,showFooter:!0,bodyClassName:"p-user_group_member_management__dialog_body",title:e,contentLabel:e,goButtonText:BQ.t("Save"),onGo:this.onSave,goOnEnterPressed:!1,goButtonIsDisabled:this.state.disableGoButton},m.a.createElement(iQ,{groupId:this.props.groupId,ref:this.setUserGroupMemberManagementRef,onSelectedItemsChange:this.onSelectedItemsChange}))}}]),t}(p.PureComponent));qQ.displayName="UserGroupMemberManagementDialog",qQ.defaultProps={featureSonicUserGroups:!1};var HQ=Object(g.b)(function(e){return{featureSonicUserGroups:Object(y.m)(e,"feature_sonic_user_groups")}},function(e,t){var n=t.groupId;return{bulkUpsertUserGroupMembers:function(t){return e(Object(jY.e)({groupId:n,users:t}))},enqueueToast:function(){return e(en.c.apply(void 0,arguments))}}})(qQ),WQ=n("F3Uw"),GQ=(n("hZjP"),h.b.string,h.b.bool,h.b.array,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={newMembers:[],timeoutId:null,searchTerm:""},Object(Kt.a)(n,["onSearchInputChange","onClearSearch"]),n}return u()(t,e),o()(t,[{key:"componentDidUpdate",value:function(e){var t=this,n=[];if(e.userGroupMembers.length&&!Object(Ox.a)(e.userGroupMembers,this.props.userGroupMembers)&&(n=Object(WQ.a)(this.props.userGroupMembers,e.userGroupMembers,"id")),n.length){this.setState(function(){return{newMembers:n}});var a=this.state.timeoutId;a&&clearTimeout(a);var r=setTimeout(function(){t.setState(function(){return{newMembers:[]}})},1050);this.setState(function(){return{timeoutId:r}})}}},{key:"onSearchInputChange",value:function(e){var t=e.target.value;this.setState(function(){return{searchTerm:t}})}},{key:"onClearSearch",value:function(){this.setState(function(){return{searchTerm:""}})}},{key:"render",value:function(){if(!this.props.featureSonicUserGroups)return null;var e=this.props.groupId,t=this.state,n=t.newMembers,a=t.searchTerm;return e?m.a.createElement(NQ,{groupId:e,newMembers:n}):m.a.createElement(kX,{searchTerm:a,onSearchInputChange:this.onSearchInputChange,onClearSearch:this.onClearSearch})}}]),t}(p.PureComponent));GQ.displayName="UserGroupsFlexpane",GQ.defaultProps={groupId:null,featureSonicUserGroups:!1,userGroupMembers:[]};Object(g.b)(function(e){var t=Object(A.e)(e)[0],n=Object(bY.e)(e,t),a=Object(gY.g)(n);return{groupId:t,userGroupMembers:Object(ft.a)(a,function(t){return Object(xo.d)(e,t)}),featureSonicUserGroups:Object(y.m)(e,"feature_sonic_user_groups")}})(GQ),n("Oxmb"),h.b.string.isRequired,h.b.string.isRequired,h.b.string,h.b.bool,h.b.string,h.b.number.isRequired,h.b.func.isRequired,h.b.func.isRequired,h.b.bool,h.b.func,h.b.func.isRequired;var KQ={description:null,isActive:!1,handle:void 0,featureSonicUserGroups:!1,onClick:d.a},VQ=new B.b("user_groups"),zQ=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["onMenuClick","renderContextMenu"]),n}return u()(t,e),o()(t,[{key:"onMenuClick",value:function(e){var t=this.props.id;this.props.onClick(e,t)}},{key:"renderName",value:function(){var e=this.props,t=e.name,n=e.isActive;if(!e.featureSonicUserGroups)return null;var a=f()("black",{sk_foreground_max:!n}),r=n?t:VQ.t("{name} (Deactivated)",{name:t});return m.a.createElement("div",{className:a},r)}},{key:"renderDescription",value:function(){var e=this.props,t=e.description,n=e.isActive;if(!t)return null;var a=f()("overflow_ellipsis",{sk_foreground_max:!n});return m.a.createElement("div",{className:a},t)}},{key:"renderHandle",value:function(){var e=this.props.handle;return e?m.a.createElement("span",{className:"p-user_group_row__handle"},e):null}},{key:"renderContextMenu",value:function(e){return m.a.createElement(_Q,{menuProps:e,groupId:this.props.id,onClick:this.onMenuClick})}},{key:"render",value:function(){var e=this.props,t=e.userCount,n=e.isActive;if(!e.featureSonicUserGroups)return null;var a=f()("p-user_group_row",{"p-user_group_row--inactive":!n}),r={renderMenu:this.renderContextMenu,className:a,isContextButtonVisible:this.props.canEditUserGroups()||this.props.canCreateAndDeleteUserGroups(),id:this.props.id,isActive:n};return m.a.createElement(UQ,r,this.renderName(),this.renderDescription(),this.renderHandle(),m.a.createElement("span",{className:"p-user_group_row__count"},VQ.t("{userCount, plural, =1 {# member} other {# members}}",{userCount:t})))}}]),t}(p.PureComponent);zQ.displayName="UserGroupRow",zQ.defaultProps=KQ;var YQ={showUserGroupDetails:jn.n},QQ=Object(g.b)(function(e,t){var n=t.id,a=Object(bY.e)(e,n),r={canEditUserGroups:function(){return Object(gY.c)(e)},canCreateAndDeleteUserGroups:function(){return Object(gY.b)(e)},featureSonicUserGroups:Object(y.m)(e,"feature_sonic_user_groups")};return a?ye()({name:Object(gY.h)(a),description:Object(gY.e)(a),handle:Object(gY.f)(a),userCount:Object(gY.l)(a),isActive:Object(gY.u)(a)},r):r},YQ)(zQ),XQ=n("sK36"),JQ=n("uqAm"),ZQ=new B.b("user_groups"),$Q=(h.b.object,h.b.arrayOf(h.b.string),h.b.bool,h.b.string,{userGroup:{},defaultChannelNames:void 0,showToggle:!1,creator:void 0}),eX=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onButtonClick=n.onButtonClick.bind(n),n}return u()(t,e),o()(t,[{key:"onButtonClick",value:function(e,t){var n=this.props.userGroup;Object(JQ.c)({action:t,userGroup:n})}},{key:"maybeRenderDescription",value:function(e){var t=this.props.userGroup,n=Object(gY.e)(t);return n?m.a.createElement("p",{className:e},n):null}},{key:"maybeRenderHandle",value:function(){var e=this.props.userGroup,t=Object(gY.f)(e,{includeAtSign:!0});return t?m.a.createElement("span",{className:"subtle_silver"},t):null}},{key:"maybeRenderToggle",value:function(){var e=this;return this.props.showToggle?m.a.createElement(m.a.Fragment,null,m.a.createElement(qi.c,{position:"left",zIndex:"above_fs",tip:ZQ.t("Enable group")},m.a.createElement(En.a,{"data-action":"enable_user_group",className:"user_group_toggle_btn no_bottom_margin subtle_silver small small_right_padding",onClick:function(t){return e.onButtonClick(t,"enable")},"aria-label":ZQ.t("Enable group")},m.a.createElement("i",{className:"ts_icon ts_icon_power_off"})))):null}},{key:"maybeRenderDefaultChannels",value:function(){var e=this.props.defaultChannelNames;if(!e||!e.length)return null;var t=Object(B.j)(e,{react:!0,noEscape:!0}).join("");return m.a.createElement("p",{className:"small subtle_silver no_bottom_margin"},m.a.createElement("span",{className:"bold"},ZQ.t("Default channels: {channels}",{channels:t})))}},{key:"maybeRenderCreatedBy",value:function(){var e=this.props,t=e.userGroup,n=e.creator;if(!(t||t.created_by&&t.date_create))return null;var a=ZQ.rt("Created by <strong>{creator}</strong> on {creationDate}",{creator:n,creationDate:Ku()(1e3*t.date_create).format("MMMM Do, YYYY")});return m.a.createElement("p",{className:"small subtle_silver no_bottom_margin"},a)}},{key:"maybeRenderDisableButton",value:function(){var e=this;return this.props.showToggle?m.a.createElement(qi.c,{position:"bottom",zIndex:"above_fs",tip:ZQ.t("Disable group")},m.a.createElement(_e.d,{size:"large",type:"outline",icon:"disable",className:"user_group_toggle_btn",title:""+ZQ.t("Disable"),"data-action":"disable_user_group",onClick:function(t){return e.onButtonClick(t,"disable")}})):null}},{key:"renderDeactivatedRow",value:function(){var e=this.props.userGroup,t=Object(gY.h)(e);return m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:"col span_4_of_6 small_padding no_bottom_margin"},m.a.createElement("p",{className:"no_bottom_margin subtle_silver"},m.a.createElement("span",{className:"bold"},t),ZQ.t("(Disabled)"))),m.a.createElement("div",{className:"col span_2_of_6 small_padding no_bottom_margin float_right align_right"},this.maybeRenderToggle()))}},{key:"renderCount",value:function(){var e=this.props.userGroup,t=e.isExternal||Object(gY.n)(e)?m.a.createElement("i",{className:"ts_icon ts_icon_sync"}):null;return m.a.createElement("p",{className:"user_group_count no_bottom_margin float_right small subtle_silver"},t,m.a.createElement("i",{className:"ts_icon ts_icon_user"}),Object(gY.l)(e))}},{key:"renderSettingsButton",value:function(){var e=this;return m.a.createElement(qi.c,{position:"bottom",tip:ZQ.t("Edit group info"),zIndex:"above_fs"},m.a.createElement(_e.d,{size:"large",type:"outline",icon:"cog_o",title:""+ZQ.t("Settings"),"data-action":"open_form",onClick:function(t){return e.onButtonClick(t,"editInfo")}}))}},{key:"renderMemberButton",value:function(){var e=this,t=this.props.userGroup,n=void 0;return n=Object(gY.n)(t||t.is_external)?ZQ.t("View group members"):ZQ.t("Edit group members"),m.a.createElement(qi.c,{position:"bottom",tip:n,zIndex:"above_fs"},m.a.createElement(_e.d,{size:"large",type:"outline",icon:"user",title:""+ZQ.t("Members"),"data-action":"edit_members",onClick:function(t){return e.onButtonClick(t,"editMembers")}}))}},{key:"render",value:function(){var e=this.props.userGroup;if(!Object(gY.u)(this.props.userGroup))return this.renderDeactivatedRow();var t=Object(gY.h)(e);return m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{className:"col span_3_of_4 small_padding no_bottom_margin"},m.a.createElement("p",{className:"bold no_bottom_margin"},t," ",this.maybeRenderHandle()),this.maybeRenderDescription("small no_bottom_margin"),this.maybeRenderDefaultChannels(),this.maybeRenderCreatedBy()),m.a.createElement("div",{className:"float_right right_padding"},this.renderCount(),m.a.createElement("p",{className:"user_group_actions user_group_actions--modern small no_bottom_margin"},this.maybeRenderDisableButton(),this.renderSettingsButton(),this.renderMemberButton())))}}]),t}(p.Component);eX.displayName="LegacyUserGroupBrowserListItem",eX.defaultProps=$Q;var tX=Object(g.b)(function(e,t){var n=t.id,a=Object(bY.e)(e,n),r=Object(gY.d)(e,a,{includePrivateChannels:!1}),i=r.map(function(t){if(!t)return null;var n=Object(G.e)(e,t);if(!n)return null;var a=Object(K.M)(n);return a?"#"+a:null});return{userGroup:a,defaultChannels:r,defaultChannelNames:i=Object(aa.a)(i),creator:Object(eo.W)(e,a.created_by),showDelete:!Object(gY.n)(a)&&!a.is_external,showToggle:Object(gY.b)(e)}},null,null,{areStatePropsEqual:function(e,t){return Object(ub.a)(e,t,2)}})(eX),nX=new B.b("user_groups"),aX=(h.b.string.isRequired,h.b.object,h.b.func,h.b.bool,{userGroup:{},onClick:d.a,isUserGroupBrowser:!1}),rX=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return u()(t,e),o()(t,[{key:"onClick",value:function(e){return this.props.onClick(e,this.props.id),Object(XQ.d)(e,this.props.id)}},{key:"maybeRenderDescription",value:function(){var e=this.props.userGroup,t=Object(gY.e)(e);return t?m.a.createElement("p",null,t):null}},{key:"maybeRenderCountOrHandle",value:function(){var e=this.props.userGroup,t=Object(gY.l)(e),n=Object(gY.f)(e,{includeAtSign:!1});if(!t&&!n)return null;var a=nX.t("{userCount, plural, =1 {# member} other {# members}}",{userCount:t});return n&&(a=a+" - "+Object(gY.f)(e)),m.a.createElement("p",{className:"subtle_silver tiny_bottom_margin"},a)}},{key:"renderRow",value:function(){var e=this.props,t=e.userGroup,n=e.id;return e.isUserGroupBrowser?m.a.createElement(tX,{id:n}):m.a.createElement("div",{className:"col span_5_of_6 small_padding no_bottom_margin"},m.a.createElement(fh.a,{"data-user-group-id":""+n,onClick:this.onClick},m.a.createElement("h4",null,Object(gY.h)(t)),this.maybeRenderDescription(),this.maybeRenderCountOrHandle()))}},{key:"render",value:function(){var e=this.props.id;return m.a.createElement("div",{className:"user_group_item small_padding bottom_border clearfix","data-qa":"user_group_list_item","data-user-group-id":""+e},this.renderRow())}}]),t}(p.Component);rX.displayName="LegacyUserGroupListItem",rX.defaultProps=aX;var iX=Object(g.b)(function(e,t){var n=t.id;return{userGroup:Object(bY.e)(e,n)}})(rX),oX=n("ITcr"),sX=new B.b("user_groups"),lX=(h.b.bool,h.b.bool,function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"computeAtLabel",value:function(e){var t=e;return"group"===t&&(t="channel"),"@"+Object(oX.b)({ms_name:t})}},{key:"renderContent",value:function(){var e=this.props.isFlexpane,t=e?null:f()("col","span_3_of_4"),n=f()("normal_padding",{dull_grey:e}),a=sX.rt('While commands like <span className="mention">{atEveryone}</span>, <span className="mention">{atChannel}</span>, and <span className="mention">{atHere}</span> call the attention of all members in a conversation, User Groups let you choose exactly who should get your message.',{atEveryone:this.computeAtLabel("everyone"),atChannel:this.computeAtLabel("channel"),atHere:this.computeAtLabel("here"),fallbackHash:"b74e7333e097c646698fe696052060665b263452"}),r=sX.rt('Choose a group name, like <span className="mention">@design</span> or <span className="mention">@marketing</span>, then select the group members. Now, when someone in your workspace mentions the User Group, only its members will be notified. You can even add those members to channels of your choice automatically!',{fallbackHash:"a7c79b0ec617bd1a98db5c6183b5e1f91d52cb31"});return m.a.createElement("div",{className:t},m.a.createElement("div",{className:n},m.a.createElement("p",{className:"user_groups_tip"},a),m.a.createElement("p",{className:"user_groups_tip"},r)))}},{key:"render",value:function(){var e=this.props,t=e.isFlexpane;if(e.featureSonicUserGroups)return null;var n=t?m.a.createElement("div",null,m.a.createElement("span",{className:"user_groups_img"})):null,a=t?null:m.a.createElement("div",{className:"col span_1_of_4 no_right_padding"},m.a.createElement("span",{className:"user_groups_img"}));return m.a.createElement(p.Fragment,null,n,this.renderContent(),a)}}]),t}(p.PureComponent));lX.displayName="LegacyUserGroupEmptyState",lX.defaultProps={isFlexpane:!1,featureSonicUserGroups:!1};var cX=Object(g.b)(function(e,t){var n=t.id;return{userGroup:Object(bY.e)(e,n),featureSonicUserGroups:Object(y.m)(e,"feature_sonic_user_groups")}})(lX),uX=(n("5g6K"),new B.b("user_groups")),dX=(h.b.arrayOf(h.b.object),h.b.shape({key:h.b.string,offset:h.b.number}),h.b.string,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.bool,h.b.object.isRequired,h.b.bool,h.b.bool,h.b.bool,h.b.func,{userGroups:[],scrollmark:void 0,searchQuery:void 0,setCursorMark:d.a,fetchUserGroupsPost:d.a,fetchDeactivatedUserGroupsPost:d.a,saveScrollmark:d.a,onItemClick:d.a,onCreateUserGroup:d.a,onClearSearch:d.a,isLegacy:!1,includeDeactivated:!1,isUserGroupBrowser:!1,featureSonicUserGroups:!1,onItemTabWithin:d.a}),pX=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onGroupClick=n.onGroupClick.bind(n),n.onScroll=n.onScroll.bind(n),n.setListRef=n.setListRef.bind(n),n.fetchPost=n.fetchPost.bind(n),n.handleFetchDeactivatedGroupsResponse=n.handleFetchDeactivatedGroupsResponse.bind(n),n.handleFetchActiveGroupsResponse=n.handleFetchActiveGroupsResponse.bind(n),n.fetchAround=n.fetchAround.bind(n),n.renderRow=n.renderRow.bind(n),n.maybeRenderList=n.maybeRenderList.bind(n),n.focus=n.focus.bind(n),n.getAriaLabelForRow=n.getAriaLabelForRow.bind(n),n.isFocusableItem=n.isFocusableItem.bind(n),n.requestPost=null,n.keys=null,n.list=null,n.layout=new di.a,n.layout.heightCache.DEFAULT_HEIGHT=90,n.totalGroups=0,n.isFirstFetch=!e.userGroups.length&&!e.searchQuery,n.state={reachedEnd:!1,fetchingDeactivatedGroups:!1},n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){if(this.props.scrollmark){var e=this.props.scrollmark,t=e.key,n=e.offset;this.layout.setAnchor(t,n),this.props.saveScrollmark(null)}}},{key:"componentWillUnmount",value:function(){this.requestPost&&(this.requestPost.cancel(),this.requestPost=null)}},{key:"onGroupClick",value:function(e,t){this.list&&t&&this.props.saveScrollmark({key:t,offset:this.layout.getOffsetForKey(t)-this.list.getScrollTop()})}},{key:"onScroll",value:function(){this.layout.anchor&&this.layout.setAnchor(!1)}},{key:"getAriaLabelForRow",value:function(e){var t=e.index;if(this.keys){var n=this.props.userGroups[t];return{"aria-label":function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,n=e.handle,a=e.purpose,r=e.isDeactivated,i=e.memberCount,o=void 0===i?void 0:i;if(!t)return"";var s=!Object(_Y.a)(o);return n&&a&&r&&!s?vY.t("{name}, @{handle}, {purpose} (deactivated)",{name:t,handle:n,purpose:a}):n&&a&&r&&s?vY.t("{name}, @{handle}, {purpose} (deactivated, { memberCount, plural, =1 {# member} other {# members}})",{name:t,handle:n,purpose:a,memberCount:o}):n&&a&&!r&&s?vY.t("{name}, @{handle}, {purpose} ({ memberCount, plural, =1 {# member} other {# members}})",{name:t,handle:n,purpose:a,memberCount:o}):n&&!a&&!r&&s?vY.t("{name}, @{handle} ({ memberCount, plural, =1 {# member} other {# members}})",{name:t,handle:n,memberCount:o}):!n&&a&&!r&&s?vY.t("{name}, {purpose} ({ memberCount, plural, =1 {# member} other {# members}})",{name:t,purpose:a,memberCount:o}):!n&&a&&r&&s?vY.t("{name}, {purpose} (deactivated, { memberCount, plural, =1 {# member} other {# members}})",{name:t,purpose:a,memberCount:o}):!n&&a&&r&&!s?vY.t("{name}, {purpose} (deactivated)",{name:t,purpose:a}):n||!a||r||s?!n&&!a&&r&&s?vY.t("{name} (deactivated, { memberCount, plural, =1 {# member} other {# members}})",{name:t,memberCount:o}):n||a||!r||s?n&&!a&&r&&!s?vY.t("{name}, @{handle} (deactivated)",{name:t,handle:n}):n&&!a&&r&&s?vY.t("{name}, @{handle} (deactivated, { memberCount, plural, =1 {# member} other {# members}})",{name:t,handle:n,memberCount:o}):n||a||r||s?!n||a||r||s?n&&a&&!r&&!s?vY.t("{name}, @{handle}, {purpose}",{name:t,handle:n,purpose:a}):n||a||r||!s?t:vY.t("{name} ({ memberCount, plural, =1 {# member} other {# members}})",{name:t,memberCount:o}):vY.t("{name}, @{handle}",{name:t,handle:n}):t:vY.t("{name} (deactivated)",{name:t}):vY.t("{name}, {purpose}",{name:t,purpose:a})}({name:Object(gY.i)(n),handle:Object(gY.f)(n,!1),purpose:Object(gY.e)(n),isDeactivated:!Object(gY.u)(n),memberCount:Object(gY.l)(n)})}}}},{key:"setListRef",value:function(e){this.list=e}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props.searchQuery;e.searchQuery!==t&&(this.setState(function(){return{reachedEnd:!1,fetchingDeactivatedGroups:!1}}),this.requestPost&&this.requestPost.cancel(),this.requestPost=null,this.totalGroups=0,this.layout&&this.layout.setAnchor(!1))}},{key:"fetchActiveGroups",value:function(){return this.props.fetchUserGroupsPost({searchQuery:this.props.searchQuery}).then(this.handleFetchActiveGroupsResponse)}},{key:"fetchAround",value:function(){return!this.requestPost&&!this.state.reachedEnd&&this.fetchPost()}},{key:"fetchDeactivatedGroups",value:function(){return this.props.fetchDeactivatedUserGroupsPost({searchQuery:this.props.searchQuery}).then(this.handleFetchDeactivatedGroupsResponse)}},{key:"fetchPost",value:function(){var e=this;return!this.requestPost&&(!this.state.reachedEnd&&(this.requestPost=this.state.fetchingDeactivatedGroups?this.fetchDeactivatedGroups():this.fetchActiveGroups(),this.isFirstFetch&&this.props.telemeter.mark("start_user_group_list_show"),this.requestPost.bind(this).finally(function(){e.requestPost=null,e.isFirstFetch&&(e.props.telemeter.measureAndClear("start_user_group_list_show","user_group_list_show_lazy"),e.isFirstFetch=!1)})))}},{key:"focus",value:function(){this.list&&this.list.focus()}},{key:"handleFetchActiveGroupsResponse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.items,n=e.num_found;this.totalGroups=n,(this.props.userGroups.length>=this.totalGroups||!t.length)&&(this.props.includeDeactivated?(this.props.setCursorMark(null),this.setState(function(){return{fetchingDeactivatedGroups:!0}}),this.requestPost=this.fetchDeactivatedGroups()):this.setState(function(){return{reachedEnd:!0}}))}},{key:"handleFetchDeactivatedGroupsResponse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.items,n=e.num_found,a=this.totalGroups+n;(this.props.userGroups.length>=a||!t.length)&&this.setState(function(){return{reachedEnd:!0}})}},{key:"isFocusableItem",value:function(e){return e.key!==this.loadingIndicatorKey}},{key:"maybeRenderList",value:function(e){var t=this;return!e.length&&this.state.reachedEnd?this.renderEmptyListView():(this.state.reachedEnd||(this.loadingIndicatorKey="Loading"+e.length,e.push(this.loadingIndicatorKey)),m.a.createElement(kY,null,function(n){var a=n.width,r=n.height;return m.a.createElement(ui.a,{width:a,height:r,keys:e,layout:t.layout,rowRenderer:t.renderRow,onScroll:t.onScroll,onItemClick:t.props.onItemClick,ref:t.setListRef,loadAround:t.fetchAround,loadPost:t.fetchPost,isFocusableItem:t.isFocusableItem,onItemTabWithin:t.props.onItemTabWithin,"aria-label":uX.t("User Groups"),getPropsForItem:t.getAriaLabelForRow})}))}},{key:"renderEmptyListView",value:function(){var e=this.props,t=e.featureSonicUserGroups,n=e.searchQuery,a=e.onClearSearch,r=e.onCreateUserGroup,i=e.isLegacy,o=e.isUserGroupBrowser,s=void 0,l=void 0,c=void 0,u=void 0,d=!!n.length;if(d)l=uX.rt("No matches found for <strong>{searchTerm}</strong>",{searchTerm:n}),c=uX.t("Clear Search"),u=a;else{if(i&&!t)return m.a.createElement(cX,{isFlexpane:!o});Object(OY.a)()?(s=uX.t("Organize your team"),c=uX.t("Create a User Group"),u=r):s=uX.t("No user groups yet"),l=uX.t("User groups make it easy to get the attention of many members at once.")}var p=f()({"p-user_group_list__empty_list":!d,"p-user_group_list__empty_search_results":d});return m.a.createElement("div",{className:p,"data-qa":"searchable_ug_list_empty_state"},m.a.createElement(iy.a,{title:s,description:l,primaryActionText:c,onClickPrimaryAction:u}))}},{key:"renderRow",value:function(e){var t=this.keys[e];return t?t===this.loadingIndicatorKey?m.a.createElement("div",{className:"margin_top_200"},m.a.createElement(ci.a,{color:"blue"})):this.renderUserGroup(e):null}},{key:"renderUserGroup",value:function(e){var t=this.props,n=t.userGroups,a=t.isLegacy,r=t.isUserGroupBrowser,i=n[e].id;return i?a?m.a.createElement(iX,{id:i,isUserGroupBrowser:r,onClick:this.onGroupClick}):m.a.createElement(QQ,{id:i,onClick:this.onGroupClick}):null}},{key:"render",value:function(){var e=this.props.userGroups;return this.keys=this.props.includeDeactivated?e.map(function(e){return e.id}):e.filter(function(e){return!e.isDeactivated}).map(function(e){return e.id}),m.a.createElement("div",{className:"p-user_group_list","aria-live":"polite"},this.maybeRenderList(this.keys))}}]),t}(p.PureComponent);pX.displayName="SearchableUserGroupsList",pX.defaultProps=dX;var mX=Object(O_.createSelector)([bY.a,fY.e],function(e,t){return t.map(function(t){var n=e[t];return n?{id:n.id,isDeactivated:!!n.date_delete,name:n.name,handle:n.handle,user_count:n.user_count}:null}).filter(function(e){return e})}),hX={fetchUserGroupsPost:fY.d,saveScrollmark:fY.h,setSearchQuery:fY.j,setCursorMark:fY.i,fetchDeactivatedUserGroupsPost:fY.c},bX=Object(g.b)(function(e){return{userGroups:mX(e),scrollmark:Object(fY.f)(e),searchQuery:Object(fY.g)(e),featureSonicUserGroups:Object(y.m)(e,"feature_sonic_user_groups"),telemeter:Object(KC.c)({state:e})}},hX)(function(e){var t=e.forwardedRef,n=Ep()(e,["forwardedRef"]);return m.a.createElement(pX,ye()({ref:t},n))}),fX=m.a.forwardRef(function(e,t){return m.a.createElement(bX,ye()({forwardedRef:t},e))}),gX=(h.b.object,h.b.bool,h.b.func,h.b.string,h.b.string,h.b.func,h.b.func,h.b.func,h.b.bool,h.b.func,h.b.func,{userGroups:{},featureSonicUserGroups:!1,openModal:d.a,searchTerm:"",searchQuery:"",onSearchInputChange:d.a,onClearSearch:d.a,setSearchQuery:d.a,shouldDisplayCreateUserGroupOption:!1,isActive:d.a,showUserGroupDetails:d.a}),_X=new B.b("user_groups"),vX=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["onCreateUserGroup","onSearchInputChange","renderRow","renderContent","onClearSearch","focus","onItemClick","onItemTabWithin"]),n.searchableGroupList=m.a.createRef(),n.groupList=m.a.createRef(),n.flexpane=m.a.createRef(),n}return u()(t,e),o()(t,[{key:"onItemClick",value:function(e){var t=e.id;this.props.isActive(t)&&this.props.showUserGroupDetails({groupId:t})}},{key:"onCreateUserGroup",value:function(){this.props.openModal({element:this.renderCreateEditDialog()})}},{key:"onSearchInputChange",value:function(e){return this.props.setSearchQuery(e.target.value)}},{key:"onClearSearch",value:function(){return this.props.setSearchQuery("")}},{key:"onItemTabWithin",value:function(){var e=this.flexpane.current;e&&e.setInitialActiveSection()}},{key:"getGroupedUserGroups",value:function(e){var t=Object(Zm.a)(e,function(e){return Object(gY.u)(e)?"active":"inactive"});return t.active=t.active||[],t.inactive=t.inactive||[],t.active.concat(t.inactive)}},{key:"getSearchResults",value:function(e,t){var n=this;return t?Object(aa.a)(e,function(e){if(!e)return!1;var a=Object(gY.h)(e),r=Object(gY.f)(e)||"",i=Object(gY.e)(e)||"";return!!n.checkForMatch(a,t)||(!!n.checkForMatch(r,t)||!!n.checkForMatch(i,t,!1))}):Object.values(e)}},{key:"getSortedResults",value:function(e){return Object(Jm.a)(e,function(e){return Object(gY.h)(e).toLocaleLowerCase()})}},{key:"focus",value:function(){var e=this.searchableGroupList.current||this.groupList.current;e&&e.focus()}},{key:"checkForMatch",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.prepStringForSearch(e,n).includes(this.prepStringForSearch(t,n))}},{key:"prepStringForSearch",value:function(e,t){if(!e)return"";var n=e.toLocaleLowerCase();return t&&(n=n.replace(/[\s-_]/g,"")),Object(B.a)(n)}},{key:"renderSearch",value:function(){var e=this.props.searchQuery;return this.props.featureSonicUserGroups?m.a.createElement("div",{className:"p-user_group_list__search"},m.a.createElement(Zv.a,{value:e,onChange:this.onSearchInputChange,placeholder:_X.t("Find by name..."),autoFocus:!0,icon:"search"})):null}},{key:"renderRow",value:function(e){var t=this.keys[e];return m.a.createElement(QQ,{id:t})}},{key:"renderEmptySearchResults",value:function(){return this.props.featureSonicUserGroups?m.a.createElement("div",{className:"p-user_group_list__empty_search_results"},m.a.createElement("div",{className:"p-user_group_list__empty_search_results_subtext"},_X.rt("No matches found for <strong>{searchTerm}</strong>",{searchTerm:this.props.searchTerm})),m.a.createElement(_e.d,{type:"outline",size:"small",onClick:this.props.onClearSearch},_X.t("Clear Search"))):null}},{key:"renderSearchableList",value:function(){return m.a.createElement(fX,{ref:this.searchableGroupList,onCreateUserGroup:this.onCreateUserGroup,includeDeactivated:!0,onClearSearch:this.onClearSearch,onItemClick:this.onItemClick,onItemTabWithin:this.onItemTabWithin})}},{key:"renderContent",value:function(){return m.a.createElement("div",{className:"p-user_group__content"},this.renderSearch(),this.renderSearchableList())}},{key:"renderCreateEditDialog",value:function(){return m.a.createElement(hQ,null)}},{key:"render",value:function(){var e=this.props,t=e.featureSonicUserGroups,n=e.shouldDisplayCreateUserGroupOption;if(!t)return null;var a={renderBody:this.renderContent,title:_X.t("User Groups"),viewId:"user-group-list"};return n&&(a.onOptionsClick=this.onCreateUserGroup,a.headerProps={optionsIconType:"compose-dm",optionsTooltipText:_X.t("Create a user group")}),m.a.createElement(UV.b,ye()({ref:this.flexpane,focus:this.focus,className:"p-user_groups_flexpane_container"},a,{kbNavOrder:Object(ae.a)()?void 0:7}))}}]),t}(p.PureComponent);vX.displayName="UserGroupList",vX.defaultProps=gX;var yX={openModal:tn.e,setSearchQuery:fY.j,showUserGroupDetails:jn.n},kX=Object(g.b)(function(e,t){var n=Object(bY.a)(e),a=Object(y.m)(e,"feature_sonic_user_groups"),r=Object(gY.b)(e);return ye()({userGroups:n,searchQuery:Object(fY.g)(e),featureSonicUserGroups:a,shouldDisplayCreateUserGroupOption:r,isActive:function(t){return Object(gY.u)(Object(bY.e)(e,t))}},t)},yX)(vX),OX=n("hWiY"),CX=Object(gt.b)("If All Threads is open and the thread is present, request it to be focused via the all-threads-store",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.channelId,r=n.threadTs,i=Object(Pn.c)(a,r),o=Object(Ct.a)({getState:t,label:"MAYBE-JUMP-THREAD"}),s=t(),l=Object(E.a)(t()),c=Object(A.k)(t())||!Object(A.g)(t());if(l!==XI.a.allThreads||!c)return o.info("All Threads not open"),!1;var u=Object(HI.e)(s);return u?Object(Dd.a)(u,{threadKey:i})?(o.info("Requesting "+i),e(Object(HI.p)(i)),!0):(o.info("Thread not found"),!1):(o.info("No threads"),!1)});CX.meta={name:"maybeFocusThreadInAllThreads",key:"actionsMaybeFocusThreadInAllThreadsMaybeFocusThreadInAllThreads",description:"If All Threads is open and the thread is present, request it to be focused via the all-threads-store"},CX.propTypes={channelId:h.b.string,threadTs:h.b.string};var EX=CX,jX=(n("XThT"),n("34TR"),new B.b("message_kit")),SX=(h.b.object.isRequired,h.b.string,h.b.bool,h.b.func,h.b.bool,h.b.bool,h.b.string,{className:void 0,highlight:void 0,clearHighlight:void 0,focused:!1,renderActionsOffscreen:!1,parentId:void 0}),IX=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.msg,n=e.highlight,a=e.clearHighlight,r=e.focused,i=e.renderActionsOffscreen,o=e.parentId,s=f()("c-message_kit__message","c-message_kit__thread_message","c-message_kit__thread_message--root",this.props.className);return m.a.createElement(hm.a,{msg:t},m.a.createElement(bm.a,{msg:t,className:s,highlight:n,clearHighlight:a},m.a.createElement(fm.a,{hovered:r},m.a.createElement(gm.a,{msg:t,showComment:!1,showShare:!1,showJump:!0,messageContainerType:Ca.H.THREADS_FLEXPANE,position:"inside",renderOffscreen:i,parentId:o},m.a.createElement(io.a,{msg:t},m.a.createElement(Om.a,{msg:t},m.a.createElement(oo.a,{light:m.a.createElement(so.a,{msg:t})},m.a.createElement(Sm,{msg:t},m.a.createElement(lo.a,{msg:t}),"\xa0",m.a.createElement(ho.a,{msg:t,full:!0,clickable:!0},jX.t("Open in channel")),m.a.createElement("br",null),m.a.createElement(Im.a,null,m.a.createElement(co.a,{msg:t}),m.a.createElement(uo.a,{msg:t,blocksContainerContext:am.a.threads_flexpane}),m.a.createElement(mo.b,{msg:t}),m.a.createElement(rm.a,{msg:t,blocksContainerContext:am.a.threads_flexpane}),m.a.createElement(sm.a,{msg:t}))))))))))}}]),t}(p.PureComponent);IX.displayName="ThreadRootMessage";var wX=IX;IX.defaultProps=SX;h.b.object.isRequired,h.b.string,h.b.bool,h.b.func,h.b.bool,h.b.bool,h.b.string;var NX={className:void 0,highlight:void 0,clearHighlight:void 0,focused:!1,renderActionsOffscreen:!1,parentId:void 0},TX=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.msg,n=e.highlight,a=e.clearHighlight,r=e.focused,i=e.renderActionsOffscreen,o=e.parentId,s=f()("c-message_kit__message","c-message_kit__thread_message",this.props.className);return m.a.createElement(hm.a,{msg:t},m.a.createElement(bm.a,{msg:t,className:s,highlight:n,clearHighlight:a},m.a.createElement(fm.a,{hovered:r},m.a.createElement(gm.a,{msg:t,showComment:!1,showShare:!1,messageContainerType:Ca.H.THREADS_FLEXPANE,renderOffscreen:i,parentId:o},m.a.createElement(Om.a,{msg:t,showBroadcast:!0},m.a.createElement(oo.a,{light:m.a.createElement(so.a,{msg:t})},m.a.createElement(Sm,{msg:t},m.a.createElement(lo.a,{msg:t}),"\xa0\xa0",m.a.createElement(ho.a,{msg:t,relative:!0}),m.a.createElement("br",null),m.a.createElement(Im.a,null,m.a.createElement(PB,{msg:t},m.a.createElement(co.a,{msg:t}),m.a.createElement(uo.a,{msg:t,blocksContainerContext:am.a.threads_flexpane}),m.a.createElement(mo.b,{msg:t}),m.a.createElement(rm.a,{msg:t,blocksContainerContext:am.a.threads_flexpane})),m.a.createElement(sm.a,{msg:t})))))))))}}]),t}(p.PureComponent);TX.displayName="ThreadReplyMessage";var AX=TX;TX.defaultProps=NX;n("l31K");var RX=new B.b("flexpane");h.b.oneOf(["light","dark"]);function PX(e){var t=e.clientTheme,n="light"===t?cdn_url+"/80588/img/loading_hash_animation_@2x_vogue.gif":cdn_url+"/80588/img/loading_hash_animation_@2x_vogue_dark.gif",a="light"===t?cdn_url+"/80588/img/loading_hash_animation_vogue.gif":cdn_url+"/80588/img/loading_hash_animation_vogue_dark.gif",r=RX.t("loading\u2026"),i=a+" 1x, "+n+" 2x";return m.a.createElement("div",{className:"p-flexpane_loading","data-qa":"flexpane_loading"},m.a.createElement("img",{className:"p-flexpane_loading__spinner",src:n,alt:r,srcSet:i}),m.a.createElement("br",null),r)}PX.displayName="FlexpaneLoading",PX.defaultProps={clientTheme:"light"};var MX=PX,xX=(n("vOUN"),new B.b("threads")),FX=(h.b.string,h.b.string,h.b.bool,h.b.number,h.b.string,{channelId:void 0,threadTs:void 0,isMpim:!1,numMpimMembers:0,mpimName:void 0});function LX(e){var t=e.channelId,n=e.threadTs,a=e.isMpim,r=e.numMpimMembers,i=e.mpimName,o=void 0;return o=a?m.a.createElement("div",{className:"p-threads_flexpane__header_channel_name"},m.a.createElement(qi.c,{tip:i},m.a.createElement("span",null,xX.t("Direct message with {count} others",{count:r})))):m.a.createElement(Yp.a,{channelId:t,className:"p-threads_flexpane__header_channel_name",inline:!0,iconProps:{inherit:!0}}),m.a.createElement(la.a,{className:"p-threads_flexpane__header_permalink",href:Object(et.v)(t,n)},o)}LX.displayName="Header",LX.defaultProps=FX;var DX=Object(g.b)(function(e,t){var n=t.channelId,a=Object(G.e)(e,n),r={};if(a&&"mpim"===Object(K.v)(a)){r.isMpim=!0;var i=Object(K.I)(a)||[];r.numMpimMembers=i.length-1,r.mpimName=Object(K.x)(e,a)}return r})(LX),UX=(n("uS0p"),new B.b("threads"));h.b.number;function BX(e){var t=e.replyCount,n=Math.max(1,t),a=UX.t("{count, plural, =1 {# reply} other {# replies}}",{count:n,fallbackHash:"45d5eeb729c4b8d8b91f810f9387e5a97b3e6ce5"});return m.a.createElement("div",{className:"p-threads_flexpane__separator"},m.a.createElement("span",{className:"p-threads_flexpane__separator_count"},a),m.a.createElement("hr",{className:"p-threads_flexpane__separator_line"}))}BX.displayName="Separator",BX.defaultProps={replyCount:0};var qX=Object(g.b)(function(e,t){var n=t.channelId,a=t.threadTs,r=Object(Ze.a)(e,n,a);return{replyCount:Object(et.S)(r)}})(BX),HX=(n("x++y"),new B.b("threads")),WX=(h.b.func,{tryAgain:d.a});function GX(e){var t=e.tryAgain;return m.a.createElement("div",{className:"p-threads_flexpane__error","data-qa":"threads_flexpane_error"},m.a.createElement("div",{className:"p-threads_flexpane__error_contents"},m.a.createElement("div",{className:"p-threads_flexpane__error_emoji"},m.a.createElement(Gs.b,{text:":mag:",emojiSize:Gs.a.LARGE})),m.a.createElement("p",{className:"p-threads_flexpane__error_header"},HX.t("Couldn't load thread")),m.a.createElement("p",{className:"p-threads_flexpane__error_body"},HX.rt("If the problem persists, please <a>drop us a line.</a>",null,function(e){var t=e.text,n=e.key;return m.a.createElement(la.a,{href:"https://slack.com/help/contact",rel:"noopener noreferrer",key:n},t)})),m.a.createElement(_e.d,{type:"primary",onClick:t,"data-qa":"threads_flexpane_error_try_again"},HX.t("Try Again"))))}GX.displayName="ThreadsError",GX.defaultProps=WX;var KX=GX,VX=new B.b("threads"),zX=yp(wX),YX=yp(AX),QX=(h.b.string,h.b.string,h.b.string,h.b.bool,h.b.string,h.b.string,h.b.string,h.b.string,h.b.arrayOf(h.b.string),h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.string,h.b.array,h.b.object,h.b.string,h.b.string,h.b.string,h.b.bool,h.b.string,h.b.number,h.b.string,h.b.func,h.b.func,h.b.func,h.b.func,h.b.string,h.b.bool,h.b.string,h.b.bool,h.b.string,h.b.func,h.b.func,h.b.func,h.b.object,h.b.func,h.b.func,h.b.string,h.b.func,h.b.func,h.b.func,h.b.string,h.b.func,h.b.func,h.b.object,h.b.bool,h.b.bool,h.b.bool,h.b.number,h.b.bool,h.b.string,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.func,h.b.string,h.b.bool,h.b.func,h.b.bool,{threadTs:void 0,channelId:void 0,teamId:void 0,subscribed:void 0,lastRead:void 0,maxMarkableTs:void 0,oldest:void 0,latest:void 0,timestamps:[],reachedStart:!1,reachedEnd:!1,prevReachedEnd:!1,userHasUnreadThreads:!1,fileId:void 0,comments:[],messages:{},startTs:void 0,highlightTs:void 0,highlightKey:void 0,showDragOverlay:!1,scrollMarkTs:void 0,scrollMarkOffset:0,serializationKey:void 0,clearSerializedDataForKey:d.a,requestHistory:d.a,clearHighlight:d.a,markThread:d.a,primaryView:void 0,windowFocused:!1,userAttention:"",featureAriaApplicationMode:!1,clientTheme:"light",logInfo:d.a,logWarn:d.a,logError:d.a,clogger:{track:d.a},jumpToMessage:d.a,setFocusRequestedTs:d.a,focusRequested:void 0,setFocusRequested:d.a,maybeFocusThreadInAllThreads:function(){return!1},maybeFocusThreadInAllUnreads:d.a,focusInput:null,setFocusInput:d.a,makeMessageSummary:d.a,channel:void 0,channelIsYou:!1,channelIsMuted:!1,channelHasDraft:!1,channelBadgeCount:0,isChannelUnavailable:!1,unavailableTeamId:"",readOnly:!1,featureAnnounceOnly:!1,isFileExpanding:!1,featureOfflineMode:!1,isOffline:!1,truncateThreadHistory:d.a,impressionLoggingWebGroup:"control",hasReceivedThreadedMessage:!0,setUserPrefByApi:d.a,featureMessageNavigationShortcuts:!1}),XX=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.requestHistory=n.requestHistory.bind(n),n.renderRow=n.renderRow.bind(n),n.renderList=n.renderList.bind(n),n.tryAgain=n.tryAgain.bind(n),n.toggleComments=n.toggleComments.bind(n),n.isFocusableItem=n.isFocusableItem.bind(n),n.onFocusEnter=n.onFocusEnter.bind(n),n.onFocusLeave=n.onFocusLeave.bind(n),n.clogThreadEvent=n.clogThreadEvent.bind(n),n.onArrowKeyLeft=n.onArrowKeyLeft.bind(n),n.shouldIgnoreArrowKeys=n.shouldIgnoreArrowKeys.bind(n),n.onKeyDown=n.onKeyDown.bind(n),n.getAriaLabelForRow=n.getAriaLabelForRow.bind(n),n.renderBody=n.renderBody.bind(n),n.renderSubtitle=n.renderSubtitle.bind(n),n.focus=n.focus.bind(n),n.blur=n.blur.bind(n),n.onItemTabWithin=n.onItemTabWithin.bind(n),n.onVisibleRowsChanged=n.onVisibleRowsChanged.bind(n),n.onItemFocusEnter=n.onItemFocusEnter.bind(n),n.onUpArrowInEmptyInput=n.onUpArrowInEmptyInput.bind(n),n.keys=null,n.rows=null,n.historyRateLimiter=new gb,n.listRef=m.a.createRef(),n.flexpane=m.a.createRef(),n.state={degraded:dL(),commentsExpanded:!1,hasKeyboardFocus:!1,errored:!1},e.scrollMarkTs||e.scrollMarkOffset?n.initialScrollMark={mark:e.scrollMarkTs,offset:e.scrollMarkOffset}:n.initialScrollMark={},n.attachMessageImpressionsLogger(e),n}return u()(t,e),o()(t,null,[{key:"getRowsAndKeys",value:function(e,t){var n=e.threadTs,a=e.reachedStart,r=e.reachedEnd,i=e.prevReachedEnd,o=e.timestamps,s=e.comments,l=e.messages,c=t.commentsExpanded,u=t.degraded,d=[],p=[];if(Object(ls.a)(o))return{rows:p,keys:d};var m=Object(_b.a)(o)===n,h=Object(Jd.a)(o,n);return a||u||(d.push("loading-start-"+Object(_b.a)(h)),p.push({type:"loading"})),m&&(d.push(n),p.push({type:"root",ts:n}),Object(ls.a)(s)||(d.push("comments-toggle"),p.push({type:"comments-toggle"}),c&&s.forEach(function(e){d.push(e.id),p.push({type:"comment",comment:e})})),h.length&&(d.push("separator"),p.push({type:"separator"}))),h.forEach(function(e,t){var n=l[e];Object(et.gb)(n)||(d.push(e),p.push({type:"reply",ts:e,prevTs:h[t-1]}))}),r||i?(d.push("input"),p.push({type:"input"})):u||(d.push("loading-end"),p.push({type:"loading"})),{rows:p,keys:d}}}]),o()(t,[{key:"componentDidMount",value:function(){this.checkUnreads(),Object(ae.a)()&&this.maybeFocus();var e=this.props,t=e.scrollMarkTs,n=e.scrollMarkOffset,a=e.serializationKey;(t||n)&&a&&this.props.clearSerializedDataForKey(a),this.props.hasReceivedThreadedMessage||this.props.setUserPrefByApi({pref:"has_received_threaded_message",value:!0})}},{key:"shouldComponentUpdate",value:function(e,t){if(!Object(ub.a)(this.state,t))return!0;var n=this.props,a=(n.messages,Ep()(n,["messages"])),r=(e.messages,Ep()(e,["messages"]));return!Object(ub.a)(a,r)}},{key:"componentDidUpdate",value:function(e){this.checkUnreads();var t=this.props,n=t.threadTs,a=t.channelId,r=Object(Pn.c)(a,n),i=e.threadTs,o=e.channelId,s=Object(Pn.c)(o,i);r!==s&&this.historyRateLimiter.reset(),s&&r!==s&&this.props.truncateThreadHistory({threadKey:s}),this.maybeFocus()}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.focusInput,n=e.channelId,a=e.threadTs;t===Object(Pn.c)(n,a)&&this.props.setFocusInput(null),this.props.truncateThreadHistory({threadKey:Object(Pn.c)(n,a)});try{this.messageImpressionLogger.flushAllVisibleMessages()}catch(e){this.props.logError("THREAD-FLEXPANE","threads_flexpane_unable_log_message_impressions","ThreadsFlexpane unable to log message impressions",e)}delete this.messageImpressionLogger}},{key:"onArrowKeyLeft",value:function(){var e=this,t=this.props,n=t.channelId,a=t.threadTs,r=t.primaryView;if(Object(fs.a)([Ms.a.allUnreads,"Punreads"],r))return this.props.maybeFocusThreadInAllUnreads(Object(Pn.c)(n,a)),Promise.resolve();if(r===Ms.a.allThreads&&this.props.maybeFocusThreadInAllThreads({channelId:n,threadTs:a}))return Promise.resolve();return this.props.jumpToMessage({channelId:this.props.channelId,ts:this.props.threadTs}).then(function(){e.props.setFocusRequestedTs(e.props.threadTs)})}},{key:"onFocusEnter",value:function(e){this.setState(function(){return{hasKeyboardFocus:e.isKeyboardFocus}})}},{key:"onFocusLeave",value:function(){this.setState(function(){return{hasKeyboardFocus:!1}})}},{key:"onItemTabWithin",value:function(){var e=this.flexpane.current;e&&e.setInitialActiveSection()}},{key:"onKeyDown",value:function(e){XD({e:e,isMenuVisible:Object(na.g)()})&&this.focusInput()}},{key:"onItemFocusEnter",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).id;this.props.featureMessageNavigationShortcuts&&(this.state.hasKeyboardFocus||this.setState(function(){return{hasKeyboardFocus:!0}}),"input"===e&&this.focusInput())}},{key:"onUpArrowInEmptyInput",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).cmd,t=void 0!==e&&e,n=this.props.featureMessageNavigationShortcuts;!t&&n&&this.focusLastMessage()}},{key:"onVisibleRowsChanged",value:function(e,t){var n=this;try{this.messageImpressionLogger.setCurrentlyVisibleMessages(t.map(function(e){return n.props.messages[e]}))}catch(e){this.props.logError("THREAD-FLEXPANE","threads_flexpane_unable_log_message_impressions","ThreadsFlexpane unable to log message impressions",e)}}},{key:"getAriaLabelForRow",value:function(e){var t=e.index;if(this.props.makeMessageSummary){var n=this.rows[t];if(n&&n.type)if("root"===n.type||"reply"===n.type)return{"aria-label":this.props.makeMessageSummary({channelId:this.props.channelId,ts:n.ts,hasFocus:this.state.hasKeyboardFocus,day:{ts:n.ts,isFirstDay:!1,isLastDay:!1},viewContext:Ca.H.THREADS_FLEXPANE})}}}},{key:"componentDidCatch",value:function(e){this.setState(function(){return{errored:!0}}),this.props.logError("THREAD-FLEXPANE","ThreadsFlexpane componentDidCatch","threads_flexpane_did_catch",e)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=Object(Pn.c)(this.props.channelId,this.props.threadTs),n=Object(Pn.c)(e.channelId,e.threadTs);this.state.errored&&t!==n&&this.setState(function(e){return ye()({},e,{errored:!1})}),this.props.teamId!==e.teamId&&this.attachMessageImpressionsLogger(e)}},{key:"attachMessageImpressionsLogger",value:function(e){this.messageImpressionLogger=new rp({teamId:e.teamId,experimentGroup:e.impressionLoggingWebGroup,clogger:e.clogger,messageViewLocation:op})}},{key:"focusLastMessage",value:function(){var e=Object(lA.a)(this.rows,{type:"reply"})||Object(Dd.a)(this.rows,{type:"root"});e&&this.listRef.current.list.focusOnKey(e.ts)}},{key:"focusInput",value:function(){var e=Object(Ci.a)({viewContext:Ca.H.THREADS_FLEXPANE,channelId:this.props.channelId,threadTs:this.props.threadTs});if(e){var t=function(){e.focus()};Object(Yo.c)()?setTimeout(t,0):t()}}},{key:"blur",value:function(){var e=this.listRef.current&&this.listRef.current.list;e&&e.blur()}},{key:"checkUnreads",value:function(){var e=this.props,t=e.channelId,n=e.threadTs,a=e.subscribed,r=e.lastRead,i=e.reachedEnd,o=e.maxMarkableTs,s=e.userAttention,l=e.userHasUnreadThreads,c=e.logInfo;if(a&&i&&o){var u=Object(Pn.c)(t,n);if(!r||r<o){if(Object(ae.a)()){if(s!==Ed.a.MESSAGE_PANE)return void c("THREAD-FLEXPANE","Not marking "+u+" to "+o+" because "+s)}else if(!Object(jd.f)())return void c("THREAD-FLEXPANE","Not marking "+u+" to "+o+" because "+Object(jd.c)());if(!l)return void c("THREAD-FLEXPANE","Not marking "+u+" to "+o+" because no unread threads yet");c("THREAD-FLEXPANE","Marking "+Object(Pn.c)(t,n)+": "+o),this.props.markThread({channelId:t,ts:n,lastRead:o,reason:"mark-thread-as-read-from-flexpane"})}}}},{key:"checkUserAttentionIsOnChat",value:function(){return Object(ae.a)()?this.props.userAttention===Ed.a.MESSAGE_PANE:Object(jd.f)()}},{key:"clogThreadEvent",value:function(e){var t=e.event,n=e.metadata,a=this.props,r=a.channelId,i=a.threadTs;a.clogger.track(t,ye()({parent_message_id:i,channel_id:r,is_threads_view:0,is_flexpane:1},n))}},{key:"focus",value:function(){var e=this.listRef.current&&this.listRef.current.list;if(e){this.setState(function(){return{hasKeyboardFocus:!0}});var t=e.getInitialActiveItem();if(t)return e.scrollToKey(t),void e.setActiveItem(t);e.focus()}}},{key:"isFocusableItem",value:function(e){var t=e.index,n=this.rows[t];return!!n&&("loading"!==n.type&&("separator"!==n.type&&!("input"===n.type&&!this.props.featureMessageNavigationShortcuts)))}},{key:"isListScrollable",value:function(){var e=this.listRef.current&&this.listRef.current.list;return!(e&&e.layout.getHeightValidity("input"))||e.getContentHeight()>e.getContainerHeight()}},{key:"maybeFocus",value:function(){var e=this.props,t=e.focusRequested,n=e.timestamps,a=e.channelId,r=e.threadTs;t!==Object(Pn.c)(a,r)||Object(ls.a)(n)||(this.focus(),this.props.setFocusRequested(null))}},{key:"requestHistory",value:function(e){var t=this,n=e.oldest,a=e.latest,r=this.props,i=r.channelId,o=r.threadTs,s=r.requestHistory,l=r.logError,c=r.logWarn;if(this.historyRateLimiter.isRequestPending({oldest:n,latest:a}))return!1;if(this.historyRateLimiter.shouldPreventHistoryRequest({oldest:n,latest:a}))return this.beaconedRateLimit?c("THREAD-FLEXPANE","Rate-limited thread: "+Object(Pn.c)(i,o)):(l("THREAD-FLEXPANE","Rate-limited thread: "+Object(Pn.c)(i,o)),this.beaconedRateLimit=!0),!1;this.beaconedRateLimit=!1;var u=s({oldest:n,latest:a,channelId:i,threadTs:o});return u&&this.historyRateLimiter.logHistoryRequest({oldest:n,latest:a,promise:u}),u.then(function(e){return t.setState(function(e){return ye()({},e,{errored:!1})}),e}).catch(function(e){return t.setState(function(e){return ye()({},e,{errored:!0})}),Promise.reject(e)})}},{key:"shouldIgnoreArrowKeys",value:function(e){return!!Object(Sd.a)(e.target)||(!this.checkUserAttentionIsOnChat()||!this.state.hasKeyboardFocus)}},{key:"toggleComments",value:function(){var e=this.state.commentsExpanded;this.setState(function(){return{commentsExpanded:!e}})}},{key:"tryAgain",value:function(){this.setState(function(e){return ye()({},e,{errored:!1})})}},{key:"renderBody",value:function(){var e=this.props,t=e.channelId,n=e.threadTs,a=e.timestamps,r=e.showDragOverlay,i=e.featureOfflineMode,o=e.isOffline,s=e.clientTheme,l=this.state.errored;if(i&&o&&Object(ls.a)(a))return m.a.createElement("div",{className:"p-threads_flexpane"},m.a.createElement(yd,null));if(l)return m.a.createElement("div",{className:"p-threads_flexpane"},m.a.createElement(KX,{tryAgain:this.tryAgain}));var c=m.a.createElement(p.Fragment,null,this.renderMessageList(),Object(ls.a)(a)&&m.a.createElement(MX,{clientTheme:s}),r&&m.a.createElement(Pq,null));return Object(ae.a)()?m.a.createElement(Lq,{location:Mq.THREAD,channelId:t,threadTs:n,className:"p-threads_flexpane",viewContext:Ca.H.THREADS_FLEXPANE,elementProps:{onKeyDown:this.onKeyDown}},c):m.a.createElement("div",{className:"p-threads_flexpane",onKeyDown:this.onKeyDown},c)}},{key:"renderList",value:function(e){var n=this,a=t.getRowsAndKeys(this.props,this.state),r=a.rows,i=a.keys;this.rows=r,this.keys=i;var o=this.state.degraded?uL:ui.a,s=this.props,l=s.reachedEnd,c=s.reachedStart,u=s.featureAriaApplicationMode,d=s.channel,p=s.channelId,h=s.channelIsYou,b=s.channelIsMuted,f=s.channelHasDraft,g=s.channelBadgeCount,_=s.threadTs,v=s.readOnly,y=s.featureAnnounceOnly,k=s.featureOfflineMode,O=s.isOffline,C=[{keys:["left"],handler:this.onArrowKeyLeft,filter:this.shouldIgnoreArrowKeys}],E=uR({type:Object(K.v)(d),displayName:Object(K.w)(d),isShared:Object(K.ab)(d),isOrgShared:Object(K.vb)(d),hasUnreads:!!Object(K.U)(d),isArchived:Object(K.X)(d),unreadCount:Object(K.U)(d),isYou:h,isMuted:b,hasDraft:f,badgeCount:g,isSelected:!1,userActive:!1,isTyping:!1,isThread:!0,canPost:!v,featureAnnounceOnly:y}),j=function(){if(!n.rows.length)return null;var e=n.rows.filter(function(e){return"reply"===e.type})[0];return e?e.ts:_}(),S=Object(Pn.e)(Object(Pn.c)(p,_));return m.a.createElement(sb.a,null,function(t){var a=t.measureRef,r=t.width,s=t.height;return m.a.createElement("div",{className:"flex_one no_min_height",ref:a},m.a.createElement(o,ye()({},e,{id:S,keys:i,width:r,height:s,rowRenderer:n.renderRow,isFocusableItem:n.isFocusableItem,ignoreKeyCommandsOnInputs:!n.props.featureMessageNavigationShortcuts,initialActiveItem:j,onFocusEnter:n.onFocusEnter,onItemTabWithin:n.onItemTabWithin,onItemFocusEnter:n.onItemFocusEnter,onFocusLeave:n.onFocusLeave,reachedEnd:l,reachedStart:c,"aria-label":E,getPropsForItem:n.getAriaLabelForRow,persistentKeys:["input"],keyCommands:C,useAriaApplicationMode:u,featureOfflineMode:k,isOffline:O,shouldIgnoreArrowKeys:n.shouldIgnoreArrowKeys})))})}},{key:"renderMessageList",value:function(){if(this.props.isChannelUnavailable){var e=this.props,t=e.unavailableTeamId,n=e.channelId;return m.a.createElement(BL,{unavailableTeamId:t,channelId:n,isThread:!0})}var a=this.props,r=a.channelId,i=a.threadTs,o=a.oldest,s=a.latest,l=a.timestamps,c=a.startTs,u=a.highlightTs,d=a.highlightKey,p=a.reachedStart,h=a.reachedEnd,b=a.comments,f=a.clientTheme;if(!r||!i)return null;var g={comments:b,commentsExpanded:this.state.commentsExpanded,highlightTs:u,highlightKey:d},_=this.initialScrollMark,v=_.mark,y=_.offset;return m.a.createElement(kb,ye()({oldest:o,latest:s,timestamps:l,listRenderer:this.renderList,startTs:v||c,startTsOffset:y,highlightKey:d,requestHistory:this.requestHistory,reachedStart:p,reachedEnd:h,isFileExpanding:this.props.isFileExpanding,clientTheme:f,ref:this.listRef},g,{key:Object(Pn.c)(r,i),onVisibleRowsChanged:this.onVisibleRowsChanged}))}},{key:"renderRow",value:function(e,t){var n=t.hasFocus,a=t.itemId,r=this.props,i=r.channelId,o=r.highlightTs,s=r.threadTs,l=r.comments,c=r.fileId,u=r.focusInput,d=r.featureOfflineMode,p=r.isOffline,h=this.state.commentsExpanded,b=this.rows[e];if(!b)return null;var f=this.state.hasKeyboardFocus;switch(b.type){case"separator":return m.a.createElement(qX,{channelId:i,threadTs:s});case"root":return m.a.createElement(zX,{channelId:i,ts:b.ts,highlight:b.ts===o,clearHighlight:this.props.clearHighlight,focused:n,renderActionsOffscreen:f,parentId:a});case"reply":return m.a.createElement(YX,{channelId:i,ts:b.ts,highlight:b.ts===o,clearHighlight:this.props.clearHighlight,focused:n,renderActionsOffscreen:f,parentId:a});case"input":return m.a.createElement(nq,{channelId:i,threadTs:s,focusInputOnMount:u===Object(Pn.c)(i,s)&&!this.isListScrollable(),viewContext:Ca.H.THREADS_FLEXPANE,clogThreadEvent:this.clogThreadEvent,onFocus:this.onItemTabWithin,onUpArrow:this.onUpArrowInEmptyInput});case"comments-toggle":return m.a.createElement(OV,{commentCount:l.length,expanded:h,toggleList:this.toggleComments});case"comment":return m.a.createElement(vV,{comment:b.comment,fileId:c});case"loading":return d&&p?m.a.createElement(Lp,null):m.a.createElement("div",{className:"p-threads_flexpane__loading"},VX.t("Loading messages..."));default:return null}}},{key:"renderSubtitle",value:function(){var e=this.props,t=e.channelId,n=e.threadTs;return m.a.createElement(DX,{channelId:t,threadTs:n})}},{key:"render",value:function(){var e=this.props,t=e.channelId,n=e.threadTs;if(!t||!n)return null;var a=Object(ae.a)()?d.a:this.focus,r=Object(ae.a)()?d.a:this.blur;return m.a.createElement(UV.b,{ref:this.flexpane,focus:this.focus,title:VX.t("Thread"),renderSubtitle:this.renderSubtitle,renderBody:this.renderBody,flexName:"convo",viewId:Ca.H.THREADS_FLEXPANE,kbNavOrder:Object(ae.a)()?void 0:4,bodyClassName:"p-threads_flexpane_container",onFocus:a,onBlur:r})}}]),t}(p.Component);XX.displayName="ThreadsFlexpane",XX.defaultProps=QX;var JX=Object(NL.a)(XX,{getStateToSerialize:d.a,getDerivedProps:function(e){var t=e.instance;if(!t.listRef||!t.listRef.current)return{};var n=t.listRef.current.getScrollmark(),a=n.mark,r=n.offset,i=n.stickToBottom;return{scrollMarkTs:i?"input":a,scrollMarkOffset:i?0:r}}});var ZX=Object(uV.a)(JX,{alwaysFetchOnMount:!0}),$X=Object(g.b)(function(e,t){var n=(Object(A.e)(e)[0]||"").split("-"),a=it()(n,2),r=a[0],i=a[1],o=t.threadTs||i,s=t.channelId||r,l=Object(G.e)(e,s);if(!o||!s)return{};var c=Object(qd.h)(e)||o,u=Object(qd.f)(e),d=u.highlightTs,p=u.highlightKey,m=Object(Pn.c)(s,o),h=Object($e.f)(e,m,c),b=h.start,f=h.end,g=h.timestamps,_=h.reachedStart,k=h.reachedEnd,O=h.prevReachedEnd,C=Object(cB.d)(e,{channelId:s,ts:o}),j=void 0,S=void 0,I=Object(Ze.a)(e,s,o,!1);if(I&&I.files&&1===I.files.length){S=I.files[0];var w=Object(ev.c)(e,S);w&&(j=w.comments)}var N={};Object(ae.a)()?N.userAttention=Object(Ed.c)(e):N.windowFocused=Object(RN.g)(e);var T=Object(Ct.a)({state:e}),R=Object(re.a)({state:e}),P=Object(kx.e)(e);return ye()({isFileExpanding:P,threadTs:o,channelId:s,teamId:Object(v.b)(e),channel:l,subscribed:C&&C.subscribed,lastRead:C&&C.lastRead,maxMarkableTs:dB(e,s,g),oldest:b,latest:f,timestamps:g,reachedStart:_,reachedEnd:k,prevReachedEnd:O,userHasUnreadThreads:Object(y.m)(e,"feature_incremental_unread_counts")?Object(te.j)(e):Object(ee.c)(e),fileId:S,comments:j,messages:Object(Ze.b)(e,s)||{},startTs:c,highlightTs:d,highlightKey:p,showDragOverlay:Object(qd.g)(e),primaryView:Object(E.a)(e)},N,{featureAriaApplicationMode:Object(y.m)(e,"feature_aria_application_mode"),logInfo:T.info,logWarn:T.warn,logError:T.error,clogger:R,channelIsYou:Object(K.Tb)(e,l),channelIsMuted:Object(Ad.c)(e,s),channelHasDraft:Object(K.y)(e,s),channelBadgeCount:Object(G.d)(e,l),focusRequested:Object(qd.e)(e),focusInput:Object(qd.d)(e),isChannelUnavailable:Object(K.Lb)(e,l),unavailableTeamId:Object(K.T)(e,l),readOnly:Object(K.Eb)(e,l),featureAnnounceOnly:Object(y.m)(e,"feature_announce_only"),featureOfflineMode:Object(y.m)(e,"feature_offline_mode"),isOffline:!Object(Qt.c)(e),clientTheme:Object(D.c)(e),impressionLoggingWebGroup:Object(Xt.c)(e,"impression_logging_web"),hasReceivedThreadedMessage:Object(Zt.j)(e,"has_received_threaded_message"),featureMessageNavigationShortcuts:Object(y.m)(e,"feature_message_navigation_shortcuts")})},function(e){return{requestHistory:function(){return e(qd.j.apply(void 0,arguments))},clearHighlight:function(){return e(qd.a.apply(void 0,arguments))},markThread:function(){return e(cB.e.apply(void 0,arguments))},jumpToMessage:function(){return e(Gf.a.apply(void 0,arguments))},setFocusRequestedTs:function(){return e(cj.j.apply(void 0,arguments))},setFocusRequested:function(){return e(qd.l.apply(void 0,arguments))},setFocusInput:function(){return e(qd.k.apply(void 0,arguments))},makeMessageSummary:function(){return e(Xd.apply(void 0,arguments))},maybeFocusThreadInAllThreads:function(){return e(EX.apply(void 0,arguments))},maybeFocusThreadInAllUnreads:function(){return e(hs.c.apply(void 0,arguments))},clearSerializedDataForKey:function(){return e(OX.b.apply(void 0,arguments))},truncateThreadHistory:function(){return e(qd.o.apply(void 0,arguments))},setUserPrefByApi:function(){return e(Tn.f.apply(void 0,arguments))}}})(ZX),eJ=n("Xthn"),tJ=new B.b("mentions"),nJ=Object(gt.b)("build message summary for aria labels",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.channelId,r=n.messageTs,i=n.hasFocus,o=n.viewContext,s=e(Xd({channelId:a,ts:r,hasFocus:i,viewContext:o}));if(s){var l=t(),c=Object(Ze.a)(l,a,r),u=Object(D_.b)(c),d=Object(L_.e)(l,u),p=Object(y.m)(l,"feature_a11y_message_summary"),m=Object(y.c)(l),h=Object(Jd.a)(Object(dt.a)(Object(Db.a)(d,"users")),m),b="";if(h.length<=2){var f=h.map(function(e){return Object(eJ.a)(l,{userId:e})});b=tJ.t("{names} reacted to your message",{names:Object(B.j)(f).join("")})}else b=p?tJ.t("Several people reacted to your message"):"";return b+" "+s}});nJ.meta={name:"makeReactionsSummary",key:"actionsMakeReactionsSummaryMakeReactionsSummary",description:"build message summary for aria labels"},nJ.propTypes={channelId:h.b.string.isRequired,messageTs:h.b.string.isRequired,hasFocus:h.b.bool,viewContext:h.b.string};var aJ=nJ,rJ=new B.b("mentions"),iJ={prefExcludeAtChannel:"mentions_exclude_at_channels",prefExcludeReactions:"mentions_exclude_reactions",prefExcludeUserGroups:"mentions_exclude_at_user_groups"},oJ=(h.b.func,h.b.bool,h.b.func,h.b.bool,h.b.bool,h.b.bool,h.b.func,h.b.func,h.b.arrayOf(h.b.object),{closeModal:d.a,featureSonicActivity:!1,onGo:d.a,prefExcludeAtChannel:!1,prefExcludeReactions:!1,prefExcludeUserGroups:!1,removeActivityByType:d.a,setUserPrefByApi:d.a,userGroups:void 0}),sJ=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["togglePref"]),n.state={initialPrefs:{prefExcludeAtChannel:e.prefExcludeAtChannel,prefExcludeReactions:e.prefExcludeReactions,prefExcludeUserGroups:e.prefExcludeUserGroups}},n}return u()(t,e),o()(t,[{key:"onClose",value:function(){var e=this.props,t=e.onGo,n=e.prefExcludeAtChannel,a=e.prefExcludeReactions,r=e.prefExcludeUserGroups,i=this.state.initialPrefs;i.prefExcludeAtChannel===n&&i.prefExcludeReactions===a&&i.prefExcludeUserGroups===r||(n&&!i.prefExcludeAtChannel&&this.props.removeActivityByType("channel"),a&&!i.prefExcludeReactions&&this.props.removeActivityByType("reaction"),r&&!i.prefExcludeUserGroups&&this.props.removeActivityByType("user_group"),t())}},{key:"togglePref",value:function(e){var t=e.target.name,n=iJ[t];this.props.setUserPrefByApi({pref:n,value:!e.target.checked})}},{key:"renderUserGroupList",value:function(){var e=this.props,t=e.featureSonicActivity,n=e.userGroups;if(!t)return null;var a=n.filter(function(e){return Object(gY.u)(e)&&Object(gY.m)(e)});if(Object(ls.a)(a))return rJ.t("User Groups are collections of individual members");var r=a.slice(0,3).map(function(e){return m.a.createElement("strong",null,Object(gY.f)(e))});return a.length<=3?rJ.rt("You\u2019re a member of {groups}",{groups:Object(B.j)(r,{react:!0})}):rJ.rt("You\u2019re a member of {group1}, {group2}, {group3}, and {numOthers, plural, =1 {# other} other {# others}}",{group1:r[0],group2:r[1],group3:r[2],numOthers:a.length-3})}},{key:"render",value:function(){var e=this,t=this.props,n=t.featureSonicActivity,a=t.prefExcludeAtChannel,r=t.prefExcludeReactions,i=t.prefExcludeUserGroups;return n?m.a.createElement($S.a,{closeModal:function(){e.onClose(),e.props.closeModal()}},m.a.createElement($S.h,null,m.a.createElement($S.j,{id:"activity_options__title-bar",title:rJ.t("Activity view options")})),m.a.createElement($S.d,null,m.a.createElement($S.e,null,m.a.createElement("p",null,rJ.rt("Your activity view will always include <r1>mentions</r1> and <r1>keywords</r1>. You can also choose to show or hide the following:",null,function(e){var t=e.text;return m.a.createElement("strong",null,t)})),m.a.createElement(ja.a,{type:"inline",cursor:"pointer",text:rJ.t("@channel mentions")},m.a.createElement(Sa.a,{onChange:this.togglePref,checked:!a,name:"prefExcludeAtChannel"})),m.a.createElement(ja.a,{type:"inline",cursor:"pointer",text:rJ.t("Reactions")},m.a.createElement(Sa.a,{onChange:this.togglePref,checked:!r,name:"prefExcludeReactions"})),m.a.createElement(ja.a,{type:"inline",cursor:"pointer",text:rJ.t("User Groups"),className:"margin_bottom_175",subtext:this.renderUserGroupList()},m.a.createElement(Sa.a,{onChange:this.togglePref,checked:!i,name:"prefExcludeUserGroups"}))))):null}}]),t}(m.a.Component);sJ.displayName="ActivityOptionsDialog",sJ.defaultProps=oJ;var lJ={closeModal:function(){return tn.a.apply(void 0,arguments)},removeActivityByType:function(){return k_.h.apply(void 0,arguments)},setUserPrefByApi:function(){return Tn.f.apply(void 0,arguments)}},cJ=Object(g.b)(function(e){return{prefExcludeAtChannel:Object(Zt.j)(e,"mentions_exclude_at_channels"),prefExcludeReactions:Object(Zt.j)(e,"mentions_exclude_reactions"),prefExcludeUserGroups:Object(Zt.j)(e,"mentions_exclude_at_user_groups"),featureSonicActivity:Object(y.m)(e,"feature_sonic_activity"),userGroups:Object(bY.b)(e)}},lJ)(sJ),uJ=(n("YjF7"),new B.b("mentions")),dJ=(h.b.arrayOf(h.b.shape({channelId:h.b.string.isRequired,messageTs:h.b.string.isRequired,threadTs:h.b.string,ts:h.b.string.isRequired,type:h.b.string.isRequired})),h.b.func,h.b.bool,h.b.bool,h.b.bool,h.b.func,h.b.func,h.b.func,h.b.func,{activityList:[],enqueueToast:d.a,featureSonicActivity:!1,hasMore:!1,isLoading:!1,fetchActivityMentions:d.a,openModal:d.a,makeMessageSummary:d.a,makeReactionsSummary:d.a}),pJ=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["fetchMentions","fetchMoreMentions","openOptionsDialog","renderEmpty","focus","onItemTabWithin"]),n.list=m.a.createRef(),n.flexpane=m.a.createRef(),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.fetchMentions()}},{key:"onItemTabWithin",value:function(){var e=this.flexpane.current;e&&e.setInitialActiveSection()}},{key:"fetchMentions",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).afterTs;this.props.fetchActivityMentions({afterTs:e,limit:20})}},{key:"fetchMoreMentions",value:function(){var e=this.props,t=e.activityList,n=e.hasMore;if(!e.isLoading&&n){var a=t[t.length-1].ts;this.fetchMentions({afterTs:a})}}},{key:"focus",value:function(){var e=this.list.current;e&&e.getWrappedInstance().focus()}},{key:"openOptionsDialog",value:function(){var e=this;this.props.featureSonicActivity&&this.props.openModal({element:m.a.createElement(cJ,{onGo:function(){e.fetchMentions(),e.props.enqueueToast({element:m.a.createElement(Cn.b,ye()({},UV.a,{position:"top-right",invert:!0}),uJ.t("Activity view updated"))})}})})}},{key:"renderEmpty",value:function(e){var t=e.isOffline;return this.props.featureSonicActivity?t?m.a.createElement(iy.a,{title:uJ.t("Couldn\u2019t load your recent activity"),description:uJ.t("Try again when you\u2019re online"),primaryActionText:uJ.t("Retry"),onClickPrimaryAction:this.fetchMentions}):m.a.createElement(iy.a,{imageUrl:cdn_url+"/80588/img/accent-bird.png",imageUrl2x:cdn_url+"/80588/img/accent-bird@2x.png",title:uJ.t("Never miss a beat"),description:uJ.t("When a team member mentions you or adds a reaction to your message, that message will appear here."),secondaryActionText:uJ.t("View options"),onClickSecondaryAction:this.openOptionsDialog}):null}},{key:"render",value:function(){var e=this,t=this.props,n=t.activityList,a=t.isLoading;return t.featureSonicActivity?m.a.createElement(UV.b,{ref:this.flexpane,focus:this.focus,className:"p-activity_flexpane",isEmpty:Object(ls.a)(n),isLoading:a,onOptionsClick:this.openOptionsDialog,renderBody:function(){return m.a.createElement(X_,{ref:e.list,fetchActivity:e.fetchMoreMentions,isLoading:a,items:n,onItemTabWithin:e.onItemTabWithin,makeMessageSummary:e.props.makeMessageSummary,makeReactionsSummary:e.props.makeReactionsSummary})},renderEmpty:this.renderEmpty,title:uJ.t("Activity"),viewId:Ca.H.ACTIVITY_FLEXPANE,kbNavOrder:Object(ae.a)()?void 0:4.1}):null}}]),t}(m.a.Component);pJ.displayName="ActivityFlexpane",pJ.defaultProps=dJ;var mJ={enqueueToast:function(){return en.c.apply(void 0,arguments)},fetchActivityMentions:function(){return k_.c.apply(void 0,arguments)},openModal:function(){return tn.e.apply(void 0,arguments)},makeMessageSummary:function(){return Xd.apply(void 0,arguments)},makeReactionsSummary:function(){return aJ.apply(void 0,arguments)}},hJ=Object(g.b)(function(e){return{activityList:Object(k_.d)(e),hasMore:Object(k_.e)(e),isLoading:Object(k_.f)(e),featureSonicActivity:Object(y.m)(e,"feature_sonic_activity")}},mJ)(pJ),bJ=new B.b("whats_new"),fJ=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onChange=n.onChange.bind(n),n}return u()(t,e),o()(t,[{key:"onChange",value:function(e){var t=this.props,n=t.clogger,a=t.latestNewsTimestamp,r=t.setUserPrefByApi;!!e.target.checked?(n.track(le.EventId.WHATSNEW_ACTION,{action:"opt_in",trigger:"checkbox_whats_new",step:String(a)}),r({pref:"whats_new_read",value:a||Math.floor(Date.now()/1e3)})):(n.track(le.EventId.WHATSNEW_ACTION,{action:"opt_out",trigger:"checkbox_whats_new",step:String(a)}),r({pref:"whats_new_read",value:-1}))}},{key:"render",value:function(){var e=-1!==this.props.whatsNewRead;return m.a.createElement(ja.a,{text:bJ.t("Notify me about updates"),type:"inline",cursor:"pointer"},m.a.createElement(Sa.a,{checked:e,onChange:this.onChange}))}}]),t}(p.PureComponent);fJ.displayName="NotifyCheckbox",fJ.defaultProps={latestNewsTimestamp:null};var gJ={setUserPrefByApi:function(){return Tn.f.apply(void 0,arguments)}},_J=Object(g.b)(function(e){return{clogger:Object(re.a)(e),latestNewsTimestamp:Object(cw.d)(e),whatsNewRead:Object(Zt.j)(e,"whats_new_read")}},gJ)(fJ),vJ=(h.b.number,h.b.string,h.b.string,h.b.string,h.b.bool,h.b.bool,h.b.string,h.b.bool,h.b.bool,h.b.number,h.b.object,{timestamp:void 0,url:"",titleUrl:"",title:"",isTitleHtml:!1,isDescriptionHtml:!1,description:"",isLast:!1,isNew:!1,latestNewsTimestamp:void 0,clogger:void 0}),yJ=function(e){var t=e.url,n=e.isTitleHtml,a=e.title,r=e.onClick,i=n?m.a.createElement("span",{dangerouslySetInnerHTML:{__html:a}}):a;return m.a.createElement(WA.a,{href:t,target:"new",onClick:r,"data-qa":"whats_new_title_link"},i)};yJ.displayName="mkLinkedTitle";var kJ=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["handleDescriptionLinkClick","handleTitleClick","handleMoreLinkClick"]),n}return u()(t,e),o()(t,[{key:"clogAction",value:function(e,t){var n=e.target;if(n&&n.href){var a=this.props,r=a.clogger,i=a.latestNewsTimestamp;r.track(le.EventId.WHATSNEW_ACTION,{action:"view_update",trigger:t,page_url:n.href,step:String(i)})}}},{key:"handleDescriptionLinkClick",value:function(e){this.clogAction(e,"description_link")}},{key:"handleTitleClick",value:function(e){this.clogAction(e,"heading_link")}},{key:"handleMoreLinkClick",value:function(e){this.clogAction(e,"read_more_link")}},{key:"render",value:function(){var e=this.props,t=e.timestamp,n=e.url,a=e.title,r=e.titleUrl,i=e.isDescriptionHtml,o=e.isTitleHtml,s=e.description,l=e.isLast,c=e.isNew,u=Object(Ps.d)(t,"{date}"),d=n?yJ({url:n,isTitleHtml:o,title:a,onClick:this.handleTitleClick}):a,p=i?m.a.createElement("div",{role:"presentation",dangerouslySetInnerHTML:{__html:s},onClick:this.handleDescriptionLinkClick}):s,h=f()("p-whats_new__item",{"p-whats_new__item_last":l});return m.a.createElement("div",{className:h,"data-qa":"whats_new_item_"+t},m.a.createElement("h5",{className:"p-whats_new__date"},u),m.a.createElement("h3",{className:"p-whats_new__title"},c&&m.a.createElement(ta.b,{type:"presence-online",size:"inherit",className:"p-whats_new__blue_dot"}),d),p,n&&r&&m.a.createElement(WA.a,{className:"p-whats_new__link",href:n,onClick:this.handleMoreLinkClick,target:"new","data-qa":"whats_new_more_link"},r,m.a.createElement(ta.b,{type:"chevron-medium-right",className:"align_bottom",size:"inherit"})))}}]),t}(p.PureComponent);kJ.displayName="Update",kJ.defaultProps=vJ,kJ.displayName="Update";var OJ=Object(g.b)(function(e){return{clogger:Object(re.a)({state:e}),latestNewsTimestamp:Object(cw.d)(e)}})(kJ),CJ=new B.b("whats_new"),EJ=(h.b.arrayOf(Hd.a.WhatsNewUpdate.isRequired),h.b.func,h.b.number,h.b.string,h.b.func,{items:[],onItemTabWithin:d.a,whatsNewRead:-1,focusKey:null,setFocusKey:d.a}),jJ=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["renderItem","focus"]),n.list=m.a.createRef(),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.focusKey,n=e.items;"whats_new"===t&&n.length&&this.setFocusOnFirstItem()}},{key:"componentDidUpdate",value:function(e){var t=e.focusKey,n=this.props,a=n.focusKey,r=n.items;"whats_new"===a&&a!==t&&r.length&&this.setFocusOnFirstItem()}},{key:"setFocusOnFirstItem",value:function(){var e=this.getItemKeys()[0],t=this.list.current;t&&t.focusOnKey(e),this.props.setFocusKey(null)}},{key:"getItemKeys",value:function(){return this.props.items.map(function(e,t){return"update-"+t})}},{key:"focus",value:function(){var e=this.list.current;e&&e.focus()}},{key:"renderItem",value:function(e){var t=this.props,n=t.items,a=t.whatsNewRead,r=n[e],i=e===n.length-1,o=-1!==a&&a<r.timestamp;return m.a.createElement(OJ,{isLast:i,timestamp:r.timestamp,url:r.url,titleUrl:r.url_title,title:r.title,isTitleHtml:r.html_title,isDescriptionHtml:r.html,description:r.description,isNew:o})}},{key:"render",value:function(){var e=this,t=this.getItemKeys(),n=CJ.t("What\u2019s New");return m.a.createElement(ni.a,null,function(a){var r=a.width,i=a.height;return m.a.createElement(qA.a,{ref:e.list,width:r,height:i,keys:t,rowRenderer:e.renderItem,animateOnScroll:!1,"aria-label":n,onItemTabWithin:e.props.onItemTabWithin})})}}]),t}(p.PureComponent);jJ.displayName="UpdatesList";jJ.defaultProps=EJ;var SJ=Object(g.b)(function(e){return{focusKey:Object(S_.a)(e)}},function(e){return{setFocusKey:function(t){return e(Object(I_.a)(t))}}},null,{withRef:!0})(jJ),IJ=(n("BfV3"),new B.b("whats_new")),wJ=(h.b.bool,h.b.arrayOf(Hd.a.WhatsNewUpdate.isRequired),h.b.func,h.b.number.isRequired,{isLoading:!1,updates:[],setUserPrefByApi:d.a}),NJ=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["renderBody","renderControls","focus","onItemTabWithin"]),n.list=m.a.createRef(),n.flexpane=m.a.createRef(),n.initialWhatsNewRead=e.whatsNewRead,n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.maybeUpdateWhatsReadPref()}},{key:"componentDidUpdate",value:function(){this.maybeUpdateWhatsReadPref()}},{key:"componentWillUnmount",value:function(){this.timer&&clearTimeout(this.timer),this.timer=null}},{key:"onItemTabWithin",value:function(){var e=this.flexpane.current;e&&e.setInitialActiveSection()}},{key:"maybeUpdateWhatsReadPref",value:function(){var e=this,t=this.props.updates;if(-1!==this.props.whatsNewRead&&!Object(ls.a)(t)){var n=t[0].timestamp;this.props.whatsNewRead>=n||(this.timer&&clearTimeout(this.timer),this.timer=null,this.timer=setTimeout(function(){e.props.setUserPrefByApi({pref:"whats_new_read",value:n})},1e3))}}},{key:"focus",value:function(){var e=this.list.current;e&&e.getWrappedInstance().focus()}},{key:"renderBody",value:function(){var e=this.props.updates;return m.a.createElement(SJ,{ref:this.list,items:e,whatsNewRead:this.initialWhatsNewRead,onItemTabWithin:this.onItemTabWithin})}},{key:"renderControls",value:function(){return m.a.createElement(_J,null)}},{key:"render",value:function(){var e=this.props,t=e.isLoading,n=e.updates,a=IJ.t("What\u2019s New");return m.a.createElement(UV.b,{ref:this.flexpane,focus:this.focus,isEmpty:Object(ls.a)(n),isLoading:t,renderBody:this.renderBody,renderControls:this.renderControls,title:a,viewId:Ca.H.WHATS_NEW,kbNavOrder:Object(ae.a)()?void 0:4.4})}}]),t}(p.PureComponent);NJ.displayName="WhatsNew",NJ.defaultProps=wJ;var TJ={setUserPrefByApi:function(){return Tn.f.apply(void 0,arguments)}},AJ=Object(g.b)(function(e){return{updates:Object(cw.f)(e),isLoading:Object(cw.c)(e),whatsNewRead:Object(Zt.j)(e,"whats_new_read")}},TJ)(NJ),RJ=new B.b("starred_items"),PJ=(h.b.func,h.b.bool,h.b.arrayOf(h.b.object.isRequired),h.b.string,{fetchStarsList:d.a,isLoading:!1,starredItems:void 0,cursorMark:void 0}),MJ=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["fetchMoreStarredItems","renderEmpty","focus","fetchStarredItems","onItemTabWithin"]),n.list=m.a.createRef(),n.flexpane=m.a.createRef(),n.requestStars=null,n}return u()(t,e),o()(t,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.starredItems,a=t.cursorMark;!Object(ls.a)(e.starredItems)&&Object(ls.a)(n)&&a&&this.fetchStarredItems(a)}},{key:"onItemTabWithin",value:function(){var e=this.flexpane.current;e&&e.setInitialActiveSection()}},{key:"focus",value:function(){var e=this.list.current;e&&e.focus()}},{key:"fetchStarredItems",value:function(e){var t=this;return!this.requestStars&&(this.requestStars=this.props.fetchStarsList({exclude:"Ch,Gh,Dh",limit:20,cursor:e}),this.requestStars.finally(function(){t.requestStars=null}))}},{key:"fetchMoreStarredItems",value:function(){var e=this.props,t=e.isLoading,n=e.cursorMark;t||n&&this.fetchStarredItems(n)}},{key:"renderEmpty",value:function(e){return e.isOffline?m.a.createElement(iy.a,{title:RJ.t("Couldn\u2019t load your Starred Items"),description:RJ.t("Try again when you\u2019re online"),primaryActionText:RJ.t("Retry"),onClickPrimaryAction:this.fetchStarredItems}):m.a.createElement(iy.a,{imageUrl:cdn_url+"/80588/img/posts.png",imageUrl2x:cdn_url+"/80588/img/posts@2x.png",title:RJ.t("No starred items",{fallbackHash:"d46c3b7fbafdaa0aee845d35ce59b0d5f6de8b70"}),description:RJ.t("Star a message or file to save it here. Mark your to-dos, or save something for later \u2014 only you can see your starred items, so use them however you like!",{fallbackHash:"02f88652fff0da938a523c5543e133eefa38b085"})})}},{key:"render",value:function(){var e=this;return m.a.createElement(UV.b,{ref:this.flexpane,focus:this.focus,className:"p-starred_items_flexpane",isEmpty:Object(ls.a)(this.props.starredItems),isLoading:this.props.isLoading,renderBody:function(){return m.a.createElement(Iv,{ref:e.list,fetchMoreItems:e.fetchMoreStarredItems,isLoading:e.props.isLoading,items:e.props.starredItems,onItemTabWithin:e.onItemTabWithin})},renderEmpty:this.renderEmpty,title:RJ.t("Starred Items"),viewId:Ca.H.STARS_FLEXPANE,kbNavOrder:Object(ae.a)()?void 0:4.3})}}]),t}(p.PureComponent);MJ.displayName="StarredItemsFlexpane",MJ.defaultProps=PJ;var xJ={fetchStarsList:function(){return $_.c.apply(void 0,arguments)}},FJ=Object(g.b)(function(e){return{isLoading:Object($_.f)(e),starredItems:Object($_.d)(e),totalPages:Object($_.g)(e),cursorMark:Object($_.e)(e)}},xJ)(MJ),LJ=n("0agN"),DJ=(n("WJwm"),h.b.bool.isRequired,h.b.string,h.b.func,h.b.func,h.b.node,h.b.node,h.b.string,h.b.string,h.b.bool,h.b.string,h.b.func,h.b.object,{sectionId:"",expand:d.a,collapse:d.a,header:null,children:null,sectionClasses:"",key:null,featureM11nChannelDetails:!1,focusKey:null,setFocusKey:d.a,clogger:{track:d.a}}),UJ=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["onClick","focus","onAnimationTick","onAnimationEnd"]),n.headerButtonRef=m.a.createRef(),n.contentRef=m.a.createRef(),n.state={contentHeight:e.isExpanded?"auto":0,isAnimating:!1,isExpanding:!1},n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.focusKey&&this.props.focusKey===this.props.sectionId&&this.setFocusForKeyboardUsers()}},{key:"componentDidUpdate",value:function(e){var t=e.focusKey,n=e.isExpanded,a=this.props,r=a.isExpanded,i=a.focusKey,o=!n&&r;(o||n&&!r)&&this.startAnimation(o),i&&t!==i&&i===this.props.sectionId&&this.setFocusForKeyboardUsers()}},{key:"componentWillUnmount",value:function(){this.animation&&this.animation.cancel()}},{key:"onClick",value:function(){var e,t=this.props,n=t.collapse,a=t.clogger,r=t.expand,i=t.isExpanded;"apps"===t.sectionId&&a.track(le.EventId.APP_CLICK_EXPAND_APP_LIST_IN_CHANNEL_DETAILS,{contexts:fe()({},le.ClientEventKeys.ui_context,(e={},fe()(e,le.UiContextKeys.action,le.UiAction.CLICK),fe()(e,le.UiContextKeys.step,le.UiStep.CHANNEL_DETAILS),fe()(e,le.UiContextKeys.ui_element,le.UiElement.EXPAND_APP_LIST),e))});return i?n():r()}},{key:"onAnimationTick",value:function(e){var t=e.value,n=e.nextTick;this.contentRef.current&&this.setState(function(){return{contentHeight:t}},n)}},{key:"onAnimationEnd",value:function(){this.animation=null,this.setState(function(e){return{isExpanding:!1,contentHeight:e.isExpanding?"auto":0,isAnimating:!1}})}},{key:"setFocusForKeyboardUsers",value:function(){this.focus(),this.props.focusKey&&this.props.setFocusKey(null)}},{key:"focus",value:function(){var e=this.headerButtonRef.current;e&&(e.focus(),e.scrollIntoView())}},{key:"startAnimation",value:function(e){var t=this;this.setState(function(){return{isExpanding:e,isAnimating:!0}},function(){if(t.contentRef.current){t.animation&&t.animation.cancel();var n=t.contentRef.current.scrollHeight,a=e?0:n,r=e?n:0;t.animation=Object(UA.a)({fromValue:a,toValue:r,duration:160,easing:"easeInOutQuad",onTick:t.onAnimationTick,onComplete:t.onAnimationEnd})}else Object(Ct.b)().warn("The element to animate was not rendered. Ensure that `this.state.isAnimating` is set to true")})}},{key:"render",value:function(){var e=this.props,t=e.isExpanded,n=e.header,a=e.children,r=e.sectionClasses,i=e.key;if(!e.featureM11nChannelDetails)return null;var o=f()("p-channel_details_section",r),s=this.state,l=s.contentHeight,c=s.isAnimating,u=0!==l||c,d=f()("p-channel_details_section__content",{"p-channel_details_section__content--active":u&&!c}),p=t?"caret-down":"caret-right";return m.a.createElement("div",{className:o,key:i},m.a.createElement(fh.a,{className:"p-channel_details_section__header",onClick:this.onClick,"aria-expanded":t,ref:this.headerButtonRef},n,m.a.createElement(ta.b,{type:p,inline:!0,className:"p-channel_details_section__caret_icon"})),u&&m.a.createElement("div",{"data-qa":"section_container_content",className:d,ref:this.contentRef,style:{height:l}},a))}}]),t}(p.PureComponent);UJ.displayName="SectionContainer";UJ.defaultProps=DJ;var BJ=Object(g.b)(function(e,t){var n=Object(A.e)(e)[0],a=Object(S_.a)(e);return{featureM11nChannelDetails:Object(y.m)(e,"feature_m11n_channel_details"),isExpanded:n===t.sectionId,focusKey:a,clogger:Object(re.a)({state:e})}},function(e){return{setFocusKey:function(t){return e(Object(I_.a)(t))}}},null,{withRef:!0})(UJ),qJ=(n("N5rH"),h.b.string,h.b.node.isRequired,h.b.bool,function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"maybeRenderIcon",value:function(){var e=this.props.iconType;return e?m.a.createElement(ta.b,{type:e,inline:!0,className:"p-channel_details_section__icon"}):null}},{key:"render",value:function(){var e=this.props,t=e.sectionTitle;return e.featureM11nChannelDetails?m.a.createElement("span",{className:"p-channel_details_section__title"},this.maybeRenderIcon(),m.a.createElement("span",{className:"p-channel_details_section__title-content"},t)):null}}]),t}(p.PureComponent));qJ.displayName="SectionHeader";qJ.defaultProps={iconType:null,featureM11nChannelDetails:!1};var HJ=Object(g.b)(function(e){return{featureM11nChannelDetails:Object(y.m)(e,"feature_m11n_channel_details")}})(qJ),WJ=n("MYD1"),GJ=(n("zBLs"),new B.b("channel_details")),KJ=(h.b.object.isRequired,h.b.string.isRequired,h.b.func.isRequired,function(e){var t=e.pin,n=e.channelId,a=e.openModal,r=Object(p.useCallback)(function(){a({element:m.a.createElement(WJ.a,{pin:t,channelId:n})})},[t,n,a]);if(!Object(jS.a)().featureM11nChannelDetails)return null;var i=GJ.t("Un-pin this item");return m.a.createElement(mg.c,{tip:i,delay:mg.a,position:"bottom-right"},m.a.createElement(fh.a,{className:"p-pinned_items__remove_item",onClick:r,"aria-label":i},m.a.createElement(ta.b,{type:"times-small"})))});KJ.displayName="PinnedItemRemove";var VJ={openModal:function(){return tn.e.apply(void 0,arguments)}},zJ=Object(g.b)(null,VJ)(KJ),YJ=(n("W3Yc"),new B.b("channel_details")),QJ=(h.b.string.isRequired,h.b.array.isRequired,h.b.bool.isRequired,h.b.bool.isRequired,h.b.bool.isRequired,h.b.bool.isRequired,h.b.func.isRequired,h.b.func.isRequired,function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"componentDidUpdate",value:function(e){this.props.channelId!==e.channelId&&this.props.maybeFetchPins(),this.props.isMember&&!e.isMember&&this.props.fetchPins()}},{key:"render",value:function(){var e=this.props.pinnedItemsToRender,t=this.props.channelId;if(!Object(Sr.a)(e)||e.length<1){var n=null;if(this.props.featureM11nChannelDetails)if(this.props.isImOrMpim)n=YJ.rt("No items have been pinned yet! Open the context menu on important messages or files and choose <span>Pin to this conversation</span> to stick them here.",{},function(e){var t=e.text,n=e.key;return m.a.createElement("span",{key:n,className:"p-pinned_items__empty_list_action"},t)});else{var a=this.props.featureLongerChannelNames?m.a.createElement(Lo.a,{channelId:t}):m.a.createElement(Yp.a,{channelId:t,inline:!0});n=YJ.rt("No items have been pinned yet! Open the context menu on important messages or files and choose <span>Pin to {channelName}</span> to stick them here.",{channelName:a},function(e){var t=e.text,n=e.key;return m.a.createElement("span",{key:n,className:"p-pinned_items__empty_list_action"},t)})}return m.a.createElement("p",{className:"p-pinned_items__empty_list"},n)}return m.a.createElement("ul",{className:"p-pinned_items no_bullets"},e.map(function(e){return m.a.createElement("li",{key:e.ts||e.id,className:"p-pinned_items__item"},m.a.createElement(uG.a,{pin:e}),m.a.createElement(zJ,{pin:e,channelId:t}))}))}}]),t}(p.Component));QJ.displayName="PinnedItemsList";var XJ=Object(g.b)(function(e,t){var n=t.channelId,a=Object(G.e)(e,n),r=Object(kt.h)(e,n)||[],i=Object(y.m)(e,"feature_m11n_channel_details"),o=Object(y.m)(e,"feature_longer_channel_names");return{pinnedItemsToRender:r,isImOrMpim:Object(K.hb)(a)||Object(K.pb)(a),isMember:Object(K.nb)(a),featureM11nChannelDetails:i,featureLongerChannelNames:o}},function(e,t){var n={channelId:t.channelId};return{maybeFetchPins:function(){e(Object(kt.k)(n))},fetchPins:function(){e(Object(kt.e)(n))}}})(QJ),JJ=(h.b.string.isRequired,h.b.func.isRequired,h.b.bool.isRequired,h.b.number.isRequired,h.b.func.isRequired,h.b.bool.isRequired,h.b.func.isRequired,new B.b("channel_details")),ZJ=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.fetchPins(),this.focus=this.focus.bind(this),this.sectionContainerRef=m.a.createRef()}},{key:"componentDidUpdate",value:function(e){this.props.channelId!==e.channelId&&this.props.fetchPins()}},{key:"focus",value:function(){var e=this.sectionContainerRef.current;if(e){var t=e.getWrappedInstance();t&&t.focus()}}},{key:"maybeRenderSpinner",value:function(){return this.props.isLoading?m.a.createElement(ci.a,{size:"jumbo"}):null}},{key:"render",value:function(){var e=this.props,t=e.featureM11nChannelDetails,n=e.count,a=e.channelId,r=e.expandPinsSection,i=e.collapse;if(!t)return null;var o=0===n?JJ.t("Pinned Items"):JJ.t("{count, plural, =1 {# Pinned Item} other {# Pinned Items}}",{count:n}),s=m.a.createElement(HJ,{iconType:"thumb-tack",sectionTitle:o});return m.a.createElement(BJ,{ref:this.sectionContainerRef,expand:r,collapse:i,sectionId:"pins",header:s,sectionClasses:"p-channel_details__pinned_items_section",key:"pins"},m.a.createElement(XJ,{channelId:a}),this.maybeRenderSpinner())}}]),t}(p.Component);ZJ.displayName="PinnedItemsSection";var $J=Object(g.b)(function(e,t){var n=t.channelId,a=Object(G.e)(e,n);return{channelId:n,count:Object(K.O)(a)||0,featureM11nChannelDetails:Object(y.m)(e,"feature_m11n_channel_details"),isLoading:Object(kt.i)(e,n)===kt.b.LOADING}},function(e,t){var n={channelId:t.channelId};return{fetchPins:function(){e(Object(kt.e)(n))},expandPinsSection:function(){return e(Object(jn.e)({sectionId:"pins"}))}}},null,{withRef:!0})(ZJ),eZ=n("wBxZ"),tZ=n("9soY"),nZ=(n("zJYr"),new B.b("team")),aZ=(h.b.string.isRequired,h.b.arrayOf(h.b.string).isRequired,h.b.func.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderRow=n.renderRow.bind(n),n.fetchPost=n.fetchPost.bind(n),n.onSearchInputChange=n.onSearchInputChange.bind(n),n.state={filteredTeamIds:[],searchQuery:"",marker:void 0,fullyLoaded:!1},n.loading=!1,n}return u()(t,e),o()(t,[{key:"onSearchInputChange",value:function(e){var t=this,n=e.target.value;this.setState(function(){return{searchQuery:n,filteredTeamIds:[],fullyLoaded:!1,marker:void 0}},function(){t.fetchTeams()})}},{key:"fetchPost",value:function(){this.fetchTeams()}},{key:"fetchTeams",value:function(){var e=this,t=this.props.teamIds,n=this.state,a=n.searchQuery,r=n.fullyLoaded,i=n.marker;return this.loading||r?null:(this.loading=!0,this.props.fetchAndUpsertTeamsWithQuery({query:a,ids:t,marker:i,count:50,reason:"enterprise-teams-dialog/fetchPost"}).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.teams,a=t.next_cursor_mark;e.setState(function(e){return{filteredTeamIds:Object(VW.a)(e.filteredTeamIds,Object(ft.a)(n,"id")),marker:a,fullyLoaded:!a||Object(ls.a)(n)}},function(){e.loading=!1})}).catch(function(){e.loading=!1}))}},{key:"renderSearch",value:function(){return this.props.teamIds.length<=10?null:m.a.createElement("div",{className:"p-enterprise_teams_dialog__search"},m.a.createElement(Zv.a,{value:this.state.searchQuery,onChange:this.onSearchInputChange,placeholder:nZ.t("Search workspaces"),icon:"search",autoFocus:!0}))}},{key:"renderTeam",value:function(e){return m.a.createElement("div",{className:"p-enterprise_teams_dialog__team"},m.a.createElement(WO.b,{id:e,size:20,className:"p-enterprise_teams_dialog__team_icon"}),m.a.createElement("span",{className:"p-enterprise_teams_dialog__team_name"},m.a.createElement(Lb.a,{id:e})))}},{key:"renderRow",value:function(e){var t=this.state.filteredTeamIds[e];return t?this.renderTeam(t):null}},{key:"renderList",value:function(){var e=this,t=this.state.filteredTeamIds;return m.a.createElement("div",{className:"p-enterprise_teams_dialog__list"},m.a.createElement(sb.a,null,function(n){var a=n.measureRef,r=n.width,i=n.height;return m.a.createElement("div",{className:"flex_one no_min_height",ref:a},m.a.createElement(ui.a,{width:r,height:i,keys:t,rowRenderer:e.renderRow,loadAround:e.fetchPost,loadPost:e.fetchPost}))}))}},{key:"render",value:function(){var e=this.props.title;return m.a.createElement(nn.b,{title:e,showGoButton:!1,showCancelButton:!1,showFooter:!1},m.a.createElement("div",{className:"p-enterprise_teams_dialog__dialog"},this.renderSearch(),this.renderList()))}}]),t}(p.PureComponent));aZ.displayName="EnterpriseTeamsDialog";var rZ=Object(g.b)(null,function(e){return{fetchAndUpsertTeamsWithQuery:function(){return e(tZ.c.apply(void 0,arguments))}}})(aZ),iZ=new B.b("teams"),oZ=(h.b.string,h.b.arrayOf(h.b.string),h.b.object,{channelDisplayName:"",internalTeamIds:[],currentMember:void 0}),sZ=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.channelDisplayName,n=e.internalTeamIds,a=e.currentMember;if(!a)return null;var r=n;Object(eo.Gb)(a)&&(r=Object(eo.o)(a,n));var i=iZ.t("{team_count, number} workspaces in {channel_name}",{team_count:r.length,channel_name:t});return m.a.createElement(rZ,{title:i,teamIds:r})}}]),t}(p.PureComponent);sZ.displayName="ChannelWorkspacesDialog",sZ.defaultProps=oZ;var lZ=Object(g.b)(function(e,t){var n=t.channelId,a=Object(G.e)(e,n);return{channelDisplayName:Object(K.x)(e,a),internalTeamIds:Object(K.B)(e,a),currentMember:Object(xo.b)(e)}})(sZ),cZ=new B.b("channel_details"),uZ=(h.b.object.isRequired,h.b.string,h.b.object,h.b.array,h.b.object,h.b.func,{enterpriseName:"",enterpriseTeam:void 0,internalTeamIds:void 0,currentMember:void 0,openModal:d.a}),dZ=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.seeAllWorkspaces=n.seeAllWorkspaces.bind(n),n}return u()(t,e),o()(t,[{key:"seeAllWorkspaces",value:function(){var e=this.props.channel;this.props.openModal({element:m.a.createElement(lZ,{channelId:e.id})})}},{key:"renderHeading",value:function(){return m.a.createElement("h4",{className:"p-channel_details__heading p-channel_details__heading--workspaces"},cZ.t("Workspaces",{fallbackHash:"205b4561ed36923d5a51de1b34c70044bf82e111",fallbackHashNs:"channel_pages"}))}},{key:"renderOrgWide",value:function(){var e=this.props,t=e.enterpriseName,n=e.enterpriseTeam;if(!n||!t)return null;var a=m.a.createElement(WO.b,{id:n.id,size:34,className:"p-channel_details__team_icon"});return m.a.createElement("p",{className:"p-channel_details__workspaces_row"},a,m.a.createElement("span",null,cZ.t("Shared with all workspaces in the {enterprise_org_name} organization",{enterprise_org_name:t,fallbackHash:"e66187091a690d71cfc89449bb9c1436d1f3fe20",fallbackHashNs:"channel_pages"})))}},{key:"renderOrgShared",value:function(){var e=this.props,t=e.internalTeamIds,n=e.currentMember;if(!t||!n)return null;var a=t;Object(eo.Gb)(n)&&(a=Object(eo.o)(n,t));var r=Object(eZ.a)(a,10).map(function(e){var t=e;return m.a.createElement("div",{className:"p-channel_details__workspaces_row",key:t},m.a.createElement(WO.b,{id:e,size:34,className:"p-channel_details__team_icon"}),m.a.createElement(Lb.a,{id:e}))}),i=void 0;return a.length>10&&(i=m.a.createElement(_e.d,{onClick:this.seeAllWorkspaces,type:"outline",size:"small"},cZ.t("See all {total_teams_count, number} workspaces",{total_teams_count:a.length,fallbackHash:"e7958956b6e81d7b4d36988146dbe7ff402bbe38",fallbackHashNs:"channel_pages"}))),m.a.createElement("div",{className:"margin_bottom_100"},r,i)}},{key:"render",value:function(){var e=this.props.channel;if(!e||!Object(K.vb)(e))return null;var t=Object(K.xb)(e)?this.renderOrgWide():this.renderOrgShared();return t?m.a.createElement(m.a.Fragment,null,this.renderHeading(),t):null}}]),t}(p.PureComponent);dZ.displayName="ChannelDetailsWorkspaces",dZ.defaultProps=uZ;var pZ=Object(g.b)(function(e,t){var n=t.channel;return{enterpriseName:Object(we.e)(e),enterpriseTeam:Object(we.g)(e),internalTeamIds:Object(K.B)(e,n),currentMember:Object(xo.b)(e)}},function(e){return{openModal:function(){return e(tn.e.apply(void 0,arguments))}}})(dZ),mZ=n("fgg+"),hZ=new B.b("channel_details"),bZ=(h.b.object.isRequired,h.b.string,h.b.object,h.b.arrayOf(h.b.string),{currentTeamId:void 0,memberCounts:void 0,pendingAndConnectedTeamIds:[]}),fZ=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"renderHeading",value:function(){var e=hZ.t("Organizations",{fallbackHash:"07605242f7a070b43bdc103189dccf6a5cc43506",fallbackHashNs:"channel_pages"});return m.a.createElement("h4",{className:"p-channel_details__heading p-channel_details__heading--workspaces"},e)}},{key:"renderMemberCount",value:function(e){var t=this.props,n=t.memberCounts,a=t.currentTeamId;if(!n||!n.counts)return null;var r=void 0;if(n.counts.teams_member_count&&!Object(_Y.a)(n.counts.teams_member_count[e]))r=n.counts.teams_member_count[e];else if(e===a){var i=Object(cs.a)(Object(mb.a)(n.counts.teams_member_count));r=n.counts.member_count-i}return hZ.t("{count, plural, =1 {# member} other {# members}}",{count:r,fallbackHash:"03cd6f56ce61c03b5e511a02466ea71e50eab325",fallbackHashNs:"channel_pages"})}},{key:"renderTeams",value:function(){var e=this,t=this.props,n=t.pendingAndConnectedTeamIds,a=t.channel,r=n.map(function(t){var n=Object(K.zb)(a,t);return m.a.createElement("div",{className:"p-channel_details__workspaces_row",key:t},m.a.createElement(WO.b,{id:t,size:34,className:"p-channel_details__team_icon",isPendingShared:n}),m.a.createElement("div",null,m.a.createElement(Lb.a,{id:t}),m.a.createElement("div",{className:"p-channel_details__workspaces_row_member_count"},n?hZ.t("Waiting for them to join\u2026",{fallbackHash:"d180f395db2335524b00cd84b96a7e075edf1694",fallbackHashNs:"channel_pages"}):e.renderMemberCount(t))))});return m.a.createElement("div",{className:"margin_bottom_100"},r)}},{key:"render",value:function(){var e=this.props,t=e.channel,n=e.pendingAndConnectedTeamIds;return!Object(K.ab)(t)||Object(ls.a)(n)?null:m.a.createElement(m.a.Fragment,null,this.renderHeading(),this.renderTeams(),!Object(K.vb)(t)&&m.a.createElement(mZ.a,{channel:t}))}}]),t}(p.PureComponent);fZ.displayName="ChannelDetailsExtShared",fZ.defaultProps=bZ;var gZ=Object(g.b)(function(e,t){var n=t.channel;return{currentTeamId:Object(v.c)(e),memberCounts:Object(Fj.f)(e,n.id),pendingAndConnectedTeamIds:Object(K.N)(e,n,{includeSelfTeamId:!0})}})(fZ),_Z=n("DO5Y"),vZ=n("ejSh"),yZ=n("IRiz"),kZ=Object(gt.b)("Fetch highlights items list for channel",function(e,t,n){return e(Object(yZ.c)(n)).then(function(t){var a=Object(ne.a)(t,"highlightMsgs.messages",[]);if(Object(ls.a)(a))return[];var r=e(Object(_Z.a)({imsgs:a,channelId:n}));return e(Object(vZ.a)(r)),r}).catch(function(e){throw Object(Ct.a)({getState:t}).error("HIGHLIGHTS-STORE",e,{subtype:"error_fetching_channel_highlights"}),e})});kZ.meta={name:"fetchHighlightsListForChannel",key:"highlightsStoreFetchHighlightsListForChannel",description:"Fetch highlights items list for channel"},kZ.propTypes={channelId:h.b.string};var OZ=Object(gt.b)("Fetch highlights items list for channel",function(e,t,n){return e(Object(yZ.d)(n)).then(function(e){return{topContributors:Object(ne.a)(e,"resp.top_contributors.users",[]),similarChannels:Object(ne.a)(e,"resp.similar_channels.channels",[])}}).catch(function(e){throw Object(Ct.a)({getState:t}).error("HIGHLIGHTS-STORE",e,{subtype:"error_fetching_top_contributors"}),e})});OZ.meta={name:"fetchTopContributorsAndRelatedChannels",key:"highlightsStoreFetchTopContributorsAndRelatedChannels",description:"Fetch highlights items list for channel"},OZ.propTypes={channelId:h.b.string};var CZ=n("0++q"),EZ=n("71a+"),jZ=n("lkgS"),SZ=n("B/i4"),IZ=(h.b.string,h.b.number,function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.channelId,n=e.memberCount,a=Object(SZ.a)({channelId:t}),r=0===n?"\u2013":n;return m.a.createElement("div",{key:t,className:"p-channel_details__similar_channels_item"},m.a.createElement("div",{className:"p-channel_details__similar_channels_channel"},m.a.createElement(la.a,{className:"p-channel_details__similar_channels_channel_link",href:a,target:Object(jZ.a)(a)},m.a.createElement(Lo.a,{channelId:t,truncate:!0}))),m.a.createElement("div",{className:"p-channel_details__member_count"},m.a.createElement(ta.b,{type:"user",inline:!0,size:"inherit",className:"p-channel_details__member_count__icon"}),m.a.createElement("span",null,r)))}}]),t}(p.Component));IZ.displayName="ChannelDetailsSimilarChannel";IZ.defaultProps={channelId:"",memberCount:0};var wZ=Object(g.b)(function(e,t){var n=Object(Fj.f)(e,t.channelId);return n.counts&&n.counts.member_count?{memberCount:n.counts.member_count}:{memberCount:0}},null)(IZ),NZ=new B.b("channel_details"),TZ=(h.b.object.isRequired,h.b.bool,h.b.func,{featureM11nChannelDetails:!1,fetchTopContributorsAndRelatedChannels:d.a}),AZ=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isLoading:!1,topContributors:[],similarChannels:[]},n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.fetchTopContributorsAndRelatedChannels()}},{key:"componentDidUpdate",value:function(e){this.props.channel.id!==e.channel.id&&(this.resetState(),this.fetchTopContributorsAndRelatedChannels())}},{key:"componentWillUnmount",value:function(){this.pendingContributorsAndChannelsFetch&&this.pendingContributorsAndChannelsFetch.cancel()}},{key:"resetState",value:function(){this.setState(function(){return{topContributors:[],similarChannels:[]}})}},{key:"fetchTopContributorsAndRelatedChannels",value:function(){var e=this,t=this.props.channel;this.setState(function(){return{isLoading:!0}}),this.pendingContributorsAndChannelsFetch=this.props.fetchTopContributorsAndRelatedChannels(t.id).then(function(t){e.setState(function(){return{topContributors:t.topContributors,similarChannels:t.similarChannels,isLoading:!1}})}).catch(function(){e.setState(function(){return{topContributors:[],similarChannels:[],isLoading:!1}})}).finally(function(){e.pendingContributorsAndChannelsFetch=null})}},{key:"renderTopContributors",value:function(){var e=this.props.featureM11nChannelDetails,t=this.state.topContributors;if(t.length<1||!e)return null;var n=t.map(function(e){return m.a.createElement(EZ.a,{key:e,userId:e},m.a.createElement("div",{className:"p-channel_detais__top_contributor_item"},m.a.createElement(CZ.a,{id:e,size:"medium",showPresence:!0,showStatus:!0})," "))});return m.a.createElement("div",{className:"p-channel_details__subsection"},m.a.createElement("h4",{className:"p-channel_details__heading"},NZ.rt("Questions? Try asking...",{fallbackHash:"0f6ef28a0f900aa53c3851aa2411634470e68586",fallbackHashNs:"highlights"})),n)}},{key:"renderSimilarChannels",value:function(){var e=this.state.similarChannels;if(e.length<1)return null;var t=e.map(function(e){return m.a.createElement(wZ,{key:e,channelId:e})});return m.a.createElement("div",{className:"p-channel_details__subsection"},m.a.createElement("h4",{className:"p-channel_details__heading"},NZ.rt("Related channels",{fallbackHash:"d8396f482fcfaa760ddc8eb1b3b36c193d53b70c",fallbackHashNs:"highlights"})),t)}},{key:"render",value:function(){return this.state.isLoading?m.a.createElement(ci.a,{size:"jumbo"}):m.a.createElement("div",null,this.renderTopContributors(),this.renderSimilarChannels())}}]),t}(p.Component);AZ.displayName="ChannelDetailsInsights";AZ.defaultProps=TZ;var RZ=Object(g.b)(function(e){return{featureM11nChannelDetails:Object(y.m)(e,"feature_m11n_channel_details")}},function(e){return{fetchTopContributorsAndRelatedChannels:function(){return e(OZ.apply(void 0,arguments))}}})(AZ),PZ=new B.b("channel_details"),MZ=(h.b.object.isRequired,h.b.bool,h.b.func,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.object,h.b.func,h.b.func,h.b.func.isRequired,h.b.func,h.b.bool,h.b.bool,{collapse:d.a,featureM11nChannelDetails:!1,userIsChannelMember:!0,userCanPost:!0,userCanRenameChannel:!0,userCanSetPurpose:!1,currentMember:null,openModal:d.a,openChannelOptions:d.a,jumpToMessage:d.a,featureChangePurposeToDescription:!1,featureLongerChannelNames:!1}),xZ=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["focus","onChannelNameClick","onPurposeLinkClick","onCreatedLinkClick"]),n.sectionContainerRef=m.a.createRef(),n.createdTime=null,n}return u()(t,e),o()(t,[{key:"onChannelNameClick",value:function(){var e=this.props.channel;this.props.openChannelOptions({channelId:e.id,section:"rename"})}},{key:"onPurposeLinkClick",value:function(){this.props.userCanSetPurpose&&this.props.openModal({element:m.a.createElement(Xx,{channelId:this.props.channel.id})})}},{key:"onCreatedLinkClick",value:function(){return this.props.jumpToMessage({channelId:this.props.channel.id,ts:this.createdTime})}},{key:"focus",value:function(){var e=this.sectionContainerRef.current;if(e){var t=e.getWrappedInstance();t&&t.focus()}}},{key:"renderName",value:function(){var e=this.props,t=e.channel,n=e.userCanRenameChannel;return e.featureLongerChannelNames?m.a.createElement(p.Fragment,null,m.a.createElement("h4",{className:"p-channel_details__heading"},PZ.t("Name"),n&&m.a.createElement(En.a,{"aria-label":PZ.t("Edit channel name"),className:"p-channel_details__edit_link",onClick:this.onChannelNameClick},PZ.t("edit"))),m.a.createElement("div",{className:"p-channel_details__section"},m.a.createElement(Lo.a,{channelId:t.id}))):null}},{key:"renderWorkspaces",value:function(){var e=this.props.channel;return Object(K.vb)(e)?m.a.createElement(pZ,{channel:e}):Object(K.ab)(e)?m.a.createElement(gZ,{channel:e}):null}},{key:"renderNonEditablePurpose",value:function(e){var t=this.props,n=t.featureChangePurposeToDescription,a=t.channel,r=""===e,i=m.a.createElement(Lo.a,{channelId:a.id}),o=n?PZ.rt("A description has not been set for {channel_name}.",{channel_name:i,fallbackHash:"b82c50c4275d22bf40adba6201f394c53a0e9d94",fallbackHashNs:"channel_pages"}):PZ.rt("A purpose has not been set for {channel_name}.",{channel_name:i,fallbackHash:"a40d5e0c32239cb9c70163694d4dfeebda2e2491",fallbackHashNs:"channel_pages"});return m.a.createElement(p.Fragment,null,m.a.createElement("h4",{className:"p-channel_details__heading"},n?PZ.t("Description"):PZ.t("Purpose")),m.a.createElement("div",{className:"p-channel_details__detail_purpose"},m.a.createElement("div",null,r&&o),m.a.createElement(pg.a,{text:e})))}},{key:"renderPurpose",value:function(){var e=Object(K.Q)(this.props.channel),t=this.props,n=t.featureChangePurposeToDescription,a=t.userCanPost,r=t.userCanSetPurpose,i=""===e;if(!t.userIsChannelMember||!a||!r)return this.renderNonEditablePurpose(e);var o=m.a.createElement(En.a,{"aria-label":n?PZ.t("Edit channel description"):PZ.t("Edit channel purpose",{fallbackHash:"7ff753625338e5788341fc682acb970c97b1d8e2",fallbackHashNs:"dialogs_purpose"}),className:"p-channel_details__edit_link",onClick:this.onPurposeLinkClick,"data-qa":"channel-details-edit-purpose"},PZ.t("edit",{fallbackHash:"9ead47a82a0d25985f22f10651d1f93b3abba317",fallbackHashNs:"channel_pages"})),s=m.a.createElement(En.a,{className:"p-channel_details__set_purpose",onClick:this.onPurposeLinkClick,"data-qa":"channel-details-set-purpose"},n?PZ.t("Set a channel description"):PZ.t("Set a channel purpose",{fallbackHash:"947ff23f775a3d91b205763ca7b53a2da4279733",fallbackHashNs:"channel_pages"}));return m.a.createElement(p.Fragment,null,m.a.createElement("h4",{className:"p-channel_details__heading"},n?PZ.t("Description"):PZ.t("Purpose"),!i&&o),m.a.createElement("p",{className:"p-channel_details__detail_purpose"},i&&s,m.a.createElement(pg.a,{text:e})))}},{key:"renderCreated",value:function(){var e=this.props,t=e.channel,n=e.currentMember,a=Object(K.r)(t),r=Object(K.q)(t),i=r&&Object(Ps.n)(r);this.createdTime=r;var o=void 0;try{o=PZ.rt("Created by {creator_name} {days_since_creation, select, 0 {today} 1 {yesterday} other {on {creation_date, date, long}}}",{creator_name:a?m.a.createElement(kF.a,{id:a}):m.a.createElement(Gx.a,null),days_since_creation:i&&Object(Ps.b)(new Date,i),creation_date:i&&i.getTime()}),n&&n.id===a&&(o=PZ.rt("Created by you {days_since_creation, select, 0 {today} 1 {yesterday} other {on {creation_date, date, long}}}",{days_since_creation:i&&Object(Ps.b)(new Date,i),creation_date:i&&i.getTime(),fallbackHash:"20d8301c36c420754114799216822e21d87573a3",fallbackHashNs:"channel_pages"}))}catch(e){return null}return m.a.createElement("div",{className:"p-channel_details__subsection"},m.a.createElement("h4",{className:"p-channel_details__heading"},PZ.t("Created")),m.a.createElement(En.a,{className:"p-channel_details__created_link",onClick:this.onCreatedLinkClick},o))}},{key:"render",value:function(){var e=this.props,t=e.featureM11nChannelDetails,n=e.channel,a=e.collapse,r=e.expandInfoSection;if(!t)return null;if(Object(K.hb)(n)||Object(K.pb)(n))return null;var i=m.a.createElement(HJ,{iconType:"channel-info",sectionTitle:PZ.t("Channel Details")});return m.a.createElement(BJ,{ref:this.sectionContainerRef,sectionId:"info",expand:r,collapse:a,header:i,sectionClasses:"p-channel_details__channel_details_section",key:ab.d+"_DETAILS_SECTION"},this.renderName(),this.renderWorkspaces(),this.renderPurpose(),this.renderCreated(),m.a.createElement(RZ,{channel:n}))}}]),t}(p.Component);xZ.displayName="ChannelDetailsSection";xZ.defaultProps=MZ;var FZ=Object(g.b)(function(e,t){var n=Object(y.m)(e,"feature_m11n_channel_details"),a=Object(y.m)(e,"feature_change_purpose_to_description"),r=Object(y.m)(e,"feature_longer_channel_names"),i=t.channel,o=i.id;return{userIsChannelMember:Object(K.Rb)(i),userCanPost:Object(Bb.p)(e,o),userCanRenameChannel:Object(Bb.O)(e,o).ok,userCanSetPurpose:Object(Bb.v)(e,o).ok,currentMember:Object(xo.b)(e),featureM11nChannelDetails:n,featureChangePurposeToDescription:a,featureLongerChannelNames:r}},function(e){return{openModal:function(){return e(tn.e.apply(void 0,arguments))},expandInfoSection:function(){return e(Object(jn.e)({sectionId:"info"}))},jumpToMessage:function(){return e(Gf.a.apply(void 0,arguments))},openChannelOptions:function(){return e(LE.a.apply(void 0,arguments))}}},null,{withRef:!0})(xZ),LZ=n("OISv"),DZ=(h.b.object,h.b.func,{msg:void 0,previewFile:d.a}),UZ=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["onFileClick"]),n}return u()(t,e),o()(t,[{key:"onFileClick",value:function(e,t){t&&this.props.previewFile({fileId:t.id,flexOrigin:"details",flexOriginId:"highlights"})}},{key:"render",value:function(){var e=this.props.msg;return e&&e.ts?m.a.createElement(LZ.a,{msg:e,timestampClickable:!0,onFileClick:this.onFileClick,flexOrigin:"details",flexOriginId:"highlights"}):null}}]),t}(p.PureComponent);UZ.displayName="HighlightsItem",UZ.defaultProps=DZ;var BZ=Object(g.b)(function(e,t){var n=t.highlightMsg.ts;return{msg:Object(Ze.a)(e,t.channelId,n)}},function(e){return{previewFile:function(){return e(jn.c.apply(void 0,arguments))}}})(UZ);var qZ=new B.b("channel_details"),HZ=(h.b.object.isRequired,h.b.string.isRequired,h.b.bool.isRequired,h.b.func.isRequired,h.b.bool.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isLoading:!1,highlightsMsgs:[]},n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.fetchHighlights()}},{key:"componentDidUpdate",value:function(e){this.props.channelId!==e.channelId&&(this.resetState(),this.fetchHighlights())}},{key:"componentWillUnmount",value:function(){this.pendingHighlightsFetch&&this.pendingHighlightsFetch.cancel()}},{key:"getTitleText",value:function(e){if(!this.props.featureM11nChannelDetails)return null;switch(e){case"this-week-header":return qZ.rt("This week",{fallbackHash:"7b72883e078a6858cf0c79bf3e93e72e765e9ada",fallbackHashNs:"channel_pages"});case"this-month-header":return qZ.rt("This month",{fallbackHash:"1b4785331db3b08cd8e3cfa4bd36216731a79e54",fallbackHashNs:"channel_pages"});case"within-three-months-header":return qZ.rt("More than a month ago",{fallbackHash:"89d5943beaee33befc436bdb3150890cc429cdf2",fallbackHashNs:"channel_pages"});case"within-six-months-header":return qZ.rt("More than 3 months ago",{fallbackHash:"d78be90f6b3e1fa97548920440fd9a31bd4395cc",fallbackHashNs:"channel_pages"});case"older-header":return qZ.rt("More than 6 months ago",{fallbackHash:"6707456354b81ac81d62b826dc37ccb8e017739b",fallbackHashNs:"channel_pages"});default:return null}}},{key:"resetState",value:function(){this.setState(function(){return{highlightsMsgs:[]}})}},{key:"fetchHighlights",value:function(){var e=this,t=this.props,n=t.channel,a=t.channelId;Object(K.hb)(n)||Object(K.pb)(n)||!a||(this.setState(function(){return{isLoading:!0}}),this.pendingHighlightsFetch=this.props.fetchHighlightsListForChannel(a).then(function(t){t?e.setState(function(){return{highlightsMsgs:t,isLoading:!1}}):e.setState(function(){return{highlightsMsgs:[],isLoading:!1}})}).catch(function(){e.setState(function(){return{highlightsMsgs:[],isLoading:!1}})}).finally(function(){e.pendingHighlightsFetch=null}))}},{key:"renderTitle",value:function(e){return e?m.a.createElement("div",{key:e,className:"p-highlights_section__group_title"},m.a.createElement("div",{className:"p-highlights_section__group_title_line"}),m.a.createElement("div",{className:"p-highlights_section__group_title_label bold"},this.getTitleText(e))):null}},{key:"renderEmptyState",value:function(){return m.a.createElement("p",{className:"p-channel_details__subtitle"}," ",qZ.rt("<strong>Nothing yet.</strong> When this channel gets a bit more active, check back here.",{fallbackHash:"0312eef94042834b79371db2371832bb4f8b361f",fallbackHashNs:"channel_pages"})," ")}},{key:"render",value:function(){var e=this,t=this.props,n=t.channelId,a=t.featureM11nChannelDetails,r=t.featureLongerChannelNames,i=this.state,o=i.isLoading,s=i.highlightsMsgs;if(!a)return null;if(o)return m.a.createElement(ci.a,{size:"jumbo"});if(0===s.length)return this.renderEmptyState();var l=function(e){if(!e)return null;var t=[],n=!1,a=!1,r=!1,i=!1,o=!1,s=new Date/1e3,l=Object(Jm.a)(e,"ts");return Object(Xm.a)(l),Object(qp.a)(l,function(e){e.ts>=s-604800?(n||(t.push({type:"header",content:"this-week-header"}),n=!0),t.push({type:"message",content:e})):e.ts>=s-2678400?(a||(t.push({type:"header",content:"this-month-header"}),a=!0),t.push({type:"message",content:e})):e.ts>=s-8035200?(r||(t.push({type:"header",content:"within-three-months-header"}),r=!0),t.push({type:"message",content:e})):e.ts>=s-16070400?(i||(t.push({type:"header",content:"within-six-months-header"}),i=!0),t.push({type:"message",content:e})):(o||(t.push({type:"header",content:"older-header"}),o=!0),t.push({type:"message",content:e}))}),t}(s),c=r?m.a.createElement(Lo.a,{channelId:n}):m.a.createElement(Yp.a,{channelId:n,inline:!0}),u=qZ.rt("Below {count, plural, =1 {is the top message} other {are a few of the top messages}} in <strong>{channel_name}</strong>.",{count:s.length,channel_name:c,fallbackHash:"1992d0038710cbd48278cc708a9ea5db8b4be72a",fallbackHashNs:"channel_pages"});return m.a.createElement("div",null,m.a.createElement("p",{className:"p-channel_details__subtitle"},u),m.a.createElement("ul",{className:"p-highlights_section no_bullets"},l.map(function(t){return"header"===t.type?e.renderTitle(t.content):m.a.createElement("li",{key:t.content.ts||t.content.id,className:"p-highlights_section__item"},m.a.createElement(BZ,{highlightMsg:t.content,channelId:e.props.channelId}))})))}}]),t}(p.Component));HZ.displayName="HighlightsList";var WZ=Object(g.b)(function(e){return{featureM11nChannelDetails:Object(y.m)(e,"feature_m11n_channel_details"),featureLongerChannelNames:Object(y.m)(e,"feature_longer_channel_names")}},function(e){return{fetchHighlightsListForChannel:function(){return e(kZ.apply(void 0,arguments))}}})(HZ),GZ=(n("6S4m"),new B.b("channel_details")),KZ=(h.b.object.isRequired,h.b.func,h.b.string.isRequired,h.b.bool,h.b.func.isRequired,{collapse:d.a,featureM11nChannelDetails:!1}),VZ=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.focus=n.focus.bind(n),n.sectionContainerRef=m.a.createRef(),n}return u()(t,e),o()(t,[{key:"focus",value:function(){var e=this.sectionContainerRef.current;if(e){var t=e.getWrappedInstance();t&&t.focus()}}},{key:"renderHighlights",value:function(){return m.a.createElement(WZ,{channel:this.props.channel,channelId:this.props.channelId})}},{key:"render",value:function(){var e=this.props,t=e.featureM11nChannelDetails,n=e.channel,a=e.collapse,r=e.expandHighlightsSection;if(!t)return null;if(Object(K.hb)(n)||Object(K.pb)(n))return null;var i=m.a.createElement(HJ,{iconType:"sparkles",sectionTitle:GZ.t("Highlights")});return m.a.createElement(BJ,{ref:this.sectionContainerRef,sectionId:"highlights",expand:r,collapse:a,header:i,sectionClasses:"p-channel_details__highlights_section",key:ab.d+"_DETAILS_SECTION"},this.renderHighlights())}}]),t}(p.Component);VZ.displayName="HighlightsSection";VZ.defaultProps=KZ;var zZ=Object(g.b)(function(e,t){var n=Object(y.m)(e,"feature_m11n_channel_details");return{channelId:t.channel.id,featureM11nChannelDetails:n}},function(e){return{expandHighlightsSection:function(){return e(Object(jn.e)({sectionId:"highlights"}))}}},null,{withRef:!0})(VZ),YZ=n("Z7NI"),QZ=Object(YZ.a)(Jb.a,{useShortMode:!0}),XZ={className:"p-channel_details__member_list_entity"};function JZ(e){var t=e.memberId;return m.a.createElement(XW.a,{userId:t,position:"left-bottom",includeRemoveFromChannelAction:!0},m.a.createElement(QZ,{id:t,className:"p-channel_details__member_list__member_btn","data-qa":"member_row_btn",listEntityProps:XZ}))}JZ.displayName="MemberRow";var ZZ=JZ,$Z=(h.b.array,h.b.string.isRequired,h.b.func.isRequired,function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.fetchMembersAboveTheFold()}},{key:"componentDidUpdate",value:function(e){this.props.channelId!==e.channelId&&this.props.fetchMembersAboveTheFold()}},{key:"render",value:function(){var e=this.props.memberList;if(!e)return null;var t=e.slice(0,Ca.F).map(function(e){return m.a.createElement("li",{key:e,className:"p-channel_details__member_list__member"},m.a.createElement(ZZ,{memberId:e}))});return m.a.createElement("ul",{className:"p-channel_details__member_list"},t)}}]),t}(p.Component));$Z.displayName="MemberList",$Z.defaultProps={memberList:[]};var e$=Object(g.b)(function(e,t){var n=t.channelId;return{memberList:Object(GW.c)(e,n)}},function(e,t){var n=t.channelId;return{fetchMembersAboveTheFold:function(){return e(Object(GW.b)({channelId:n,count:Ca.F}))}}})($Z),t$=(n("SaAd"),new B.b("channel_details")),n$=(h.b.string.isRequired,h.b.func.isRequired,h.b.bool.isRequired,h.b.number,h.b.number,h.b.object.isRequired,h.b.bool,h.b.bool,h.b.func,h.b.func,h.b.func,h.b.func.isRequired,h.b.object.isRequired,{memberCount:void 0,restrictedMemberCount:void 0,openDmBrowserModal:d.a,startChannelInviteModal:d.a,openModal:d.a,showInviteButton:!1,showSeeAllMembersButton:!1}),a$=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["handleSeeAllClick","handleInviteClick","focus"]),n.sectionContainerRef=m.a.createRef(),n}return u()(t,e),o()(t,[{key:"focus",value:function(){var e=this.sectionContainerRef.current;if(e){var t=e.getWrappedInstance();t&&t.focus()}}},{key:"handleSeeAllClick",value:function(){var e=this.props.memberCount;this.props.openModal({element:m.a.createElement(eG,{channelId:this.props.channelId,memberCount:e})})}},{key:"handleInviteClick",value:function(){if(Object(K.pb)(this.props.channel)){var e=Object(K.I)(this.props.channel);this.props.openDmBrowserModal({memberIds:e,source:xE.b.MPIM})}else this.props.startChannelInviteModal({channelId:this.props.channelId,entryPoint:"channel_details_add_people"}),this.props.clogger.track(le.EventId.CHANNEL_CREATE_FLOW,{contexts:{ui_context:{step:"add_people_modal",action:le.UiAction.IMPRESSION,entry_point:"channel_details_add_people"}}})}},{key:"renderSeeAllMembersButton",value:function(){var e=this.props.memberCount;if(!this.props.showSeeAllMembersButton)return null;if(!e||e<Ca.F)return null;var t=t$.t("See All {total_member_count, number} Members",{total_member_count:e,fallbackHash:"20a6f972248d119a0e90fbfc724fd70f2d54cdd2",fallbackHashNs:"channel_pages"});return m.a.createElement(_e.d,{className:"margin_top_50",onClick:this.handleSeeAllClick,type:"outline"},t)}},{key:"renderHeader",value:function(){if(!this.props.featureM11nChannelDetails)return null;var e=this.props,t=e.memberCount,n=e.restrictedMemberCount,a=void 0;a=Object(mt.a)(t)?t$.rt("{memberCount, plural, =1 {# Member} other {# Members}}",{memberCount:t}):t$.rt("\u2013 Members",{memberCount:t});var r=Object(mt.a)(n)&&n>0,i=Object(mt.a)(n)&&n>0?t$.rt("{restrictedMemberCount, plural, =1 {# Guest} other {# Guests}}",{restrictedMemberCount:n}):null,o=m.a.createElement(qi.c,{tip:i,position:"top"},m.a.createElement("div",{className:"p-channel_details__member_list__guests"},m.a.createElement(ta.b,{type:"lock-o",inline:!0,className:"p-channel_details__member_list__guests_icon"}),n)),s=m.a.createElement(p.Fragment,null,a,r&&o);return m.a.createElement(HJ,{iconType:"user",sectionTitle:s})}},{key:"render",value:function(){var e=this.props,t=e.featureM11nChannelDetails,n=e.channel,a=e.channelId,r=e.memberCount,i=e.collapse,o=e.expandMembersSection,s=e.showInviteButton,l=e.showSeeAllMembersButton;if(Object(K.hb)(n)||!t)return null;var c=t$.t("Add People",{fallbackHash:"8d158f5400b7631734fdbff564885963c8b7b76d"}),u=f()("p-channel_details__members_list_buttons",{"p-channel_details__members_list_button":!l});return m.a.createElement(BJ,{ref:this.sectionContainerRef,sectionId:"members",expand:o,collapse:i,header:this.renderHeader(),sectionClasses:"p-channel_details__members_list_section",key:"members"},r>0&&m.a.createElement(e$,{memberCount:r,channelId:a}),m.a.createElement("div",{className:u},this.renderSeeAllMembersButton(),s&&m.a.createElement(_e.d,{onClick:this.handleInviteClick,type:"outline","data-qa":"members-list-invite-button"},c)))}}]),t}(p.PureComponent);a$.displayName="MemberListSection",a$.defaultProps=n$;var r$=Object(g.b)(function(e,t){var n=t.channelId,a=Object(Fj.f)(e,n),r=Object(G.e)(e,n),i=a&&a.counts?a.counts.member_count:void 0,o=a&&a.counts?a.counts.restricted_member_count:void 0;return{featureM11nChannelDetails:Object(y.m)(e,"feature_m11n_channel_details"),memberCount:i,restrictedMemberCount:o,channel:r,showInviteButton:Object(Bb.K)(e,n)||Object(K.pb)(r),showSeeAllMembersButton:i&&i>=Ca.F,clogger:Object(re.a)({state:e})}},function(e){return{openDmBrowserModal:function(){return e(dO.a.apply(void 0,arguments))},startChannelInviteModal:function(){return e(FE.b.apply(void 0,arguments))},openModal:function(){return e(tn.e.apply(void 0,arguments))},expandMembersSection:function(){return e(Object(jn.e)({sectionId:"members"}))}}},null,{withRef:!0})(a$),i$=n("4ZGf"),o$=(h.b.string.isRequired,h.b.string.isRequired,h.b.string,h.b.string,h.b.object.isRequired,h.b.bool.isRequired,{appId:void 0,botId:void 0}),s$={className:"p-channel_details_apps__member_list_entity",forceRealName:!0},l$=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["handleNameClick"]),n}return u()(t,e),o()(t,[{key:"trackClick",value:function(e){var t,n,a,r=this.props,i=r.appId,o=r.botId,s=r.channelId,l=r.clogger,c=(t={},fe()(t,le.UiContextKeys.action,le.UiAction.CLICK),fe()(t,le.UiContextKeys.ui_element,e),t);return l.track("APP_CHANNEL_DETAIL_LIST",{contexts:(a={},fe()(a,le.ClientEventKeys.ui_context,c),fe()(a,le.ClientEventKeys.core,(n={},fe()(n,le.CoreKeys.app_id,i),fe()(n,le.CoreKeys.bot_id,o),fe()(n,le.CoreKeys.channel_id,s),n)),a)}),c}},{key:"handleNameClick",value:function(){this.trackClick(le.UiElement.BTN_APP_NAME)}},{key:"render",value:function(){var e=this.props,t=e.featureM11nChannelDetails,n=e.userId;return t?m.a.createElement(EZ.a,{position:"left-bottom",offsetX:0,onClick:this.handleNameClick,userId:n},m.a.createElement(QZ,{"data-qa":"channel_apps_section_row",className:"p-channel_details_apps__row",id:n,listEntityProps:s$})):null}}]),t}(p.PureComponent);l$.displayName="AppsSectionItem",l$.defaultProps=o$;var c$=Object(g.b)(function(e,t){var n=t.userId,a=Object(xo.d)(e,n);return{appId:Object(eo.p)(a),botId:Object(eo.q)(a),clogger:Object(re.a)({state:e}),featureM11nChannelDetails:Object(y.m)(e,"feature_m11n_channel_details")}})(l$),u$=new B.b("channel_details"),d$=(h.b.string.isRequired,h.b.object.isRequired,h.b.bool.isRequired,h.b.bool.isRequired,h.b.arrayOf(h.b.string),h.b.bool.isRequired,h.b.func,h.b.bool,{userIds:[],openAppsBrowserModal:d.a,canAddAppsToChannel:!1}),p$=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleAddAppsClick=n.handleAddAppsClick.bind(n),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.fireImpressionClog()}},{key:"componentDidUpdate",value:function(e){var t=this.props.channelId;e.channelId!==t&&this.fireImpressionClog()}},{key:"fireImpressionClog",value:function(){var e,t=this.props,n=t.channelId;t.clogger.track(le.EventId.APP_CHANNEL_DETAIL_LIST,{contexts:(e={},fe()(e,le.ClientEventKeys.ui_context,fe()({},le.UiContextKeys.action,le.UiAction.EXPAND)),fe()(e,le.ClientEventKeys.core,fe()({},le.CoreKeys.channel_id,n)),e)})}},{key:"handleAddAppsClick",value:function(){var e,t,n=this.props,a=n.clogger,r=n.channelId,i=(e={},fe()(e,le.UiContextKeys.action,le.UiAction.CLICK),fe()(e,le.UiContextKeys.ui_element,le.UiElement.BTN_ADD_APPS),e);a.track(le.EventId.APP_CHANNEL_DETAIL_LIST,{contexts:(t={},fe()(t,le.ClientEventKeys.ui_context,i),fe()(t,le.ClientEventKeys.core,fe()({},le.CoreKeys.channel_id,r)),t)}),a.track(le.EventId.APP_CLICK_BTN_ADD_APPS_IN_CHANNEL_DETAILS,{contexts:fe()({},le.ClientEventKeys.ui_context,ye()({},i,fe()({},le.UiContextKeys.step,le.UiStep.CHANNEL_DETAILS)))}),this.props.featureM11nAppsBrowser&&this.props.openAppsBrowserModal({addAppsVariant:!0,referringEventId:le.EventId.APP_CHANNEL_DETAIL_LIST,referringUiContext:i,channelId:r})}},{key:"render",value:function(){var e=this.props,t=e.channelId,n=e.featureM11nChannelDetails,a=e.isLoading,r=e.userIds,i=e.canAddAppsToChannel;if(!n)return null;if(a)return m.a.createElement(ci.a,{size:"jumbo"});var o=f()("p-channel_details_apps",{"p-channel_details_apps__button_only":r.length<1});return m.a.createElement("div",null,m.a.createElement("ul",{className:o},r.map(function(e){return m.a.createElement("li",{className:"no_margin",key:e},m.a.createElement(c$,{channelId:t,userId:e}))})),i&&m.a.createElement(_e.d,{className:"p-channel_details_apps__row--add",onClick:this.handleAddAppsClick,type:"outline","data-qa":"channel_apps_section_add"},u$.t("Add App",{fallbackHash:"1ae2c6ac44fb57fa370643de37789a2d84fa5202",fallbackHashNs:"channel_details"})))}}]),t}(p.PureComponent);p$.displayName="AppsSectionList",p$.defaultProps=d$;var m$=Object(g.b)(function(e,t){var n=t.channelId,a=Object(i$.b)(e,n);return{clogger:Object(re.a)({state:e}),featureM11nChannelDetails:Object(y.m)(e,"feature_m11n_channel_details"),isLoading:Object(Ub.d)(a),userIds:a.userIds,featureM11nAppsBrowser:Object(y.m)(e,"feature_m11n_apps_browser"),canAddAppsToChannel:Object(Bb.x)(e,n)}},function(e){return{openAppsBrowserModal:function(){return e(DE.a.apply(void 0,arguments))}}})(p$),h$=(n("Q2Pv"),new B.b("channel_details")),b$=(h.b.string.isRequired,h.b.func.isRequired,h.b.number,h.b.bool.isRequired,h.b.bool,h.b.func.isRequired,{appCount:void 0,isImWithApp:!1}),f$=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.focus=n.focus.bind(n),n.sectionContainerRef=m.a.createRef(),n}return u()(t,e),o()(t,[{key:"focus",value:function(){var e=this.sectionContainerRef.current;if(e){var t=e.getWrappedInstance();t&&t.focus()}}},{key:"render",value:function(){var e=this.props,t=e.featureM11nChannelDetails,n=e.channelId,a=e.isImWithApp,r=e.appCount,i=e.collapse,o=e.expandAppsSection;if(!t)return null;if(a)return null;var s=r?h$.t("{appCount, plural, =1 {# App} other {# Apps}}",{appCount:r}):h$.t("Apps"),l=m.a.createElement(HJ,{iconType:"gn-menu",sectionTitle:s});return m.a.createElement(BJ,{ref:this.sectionContainerRef,sectionId:"apps",expand:o,collapse:i,header:l,sectionClasses:"p-channel_details__apps_section",key:"apps"},m.a.createElement(m$,{channelId:n}))}}]),t}(p.PureComponent);f$.displayName="AppsSection",f$.defaultProps=b$;var g$=Object(g.b)(function(e,t){var n=t.channelId,a=Object(Fj.f)(e,n);return{appCount:Object(ne.a)(a,"counts.app_count"),featureM11nChannelDetails:Object(y.m)(e,"feature_m11n_channel_details"),isImWithApp:Object(K.lb)(e,n)}},function(e){return{expandAppsSection:function(){return e(Object(jn.e)({sectionId:"apps"}))}}},null,{withRef:!0})(f$),_$=new B.b("channel_details"),v$=(h.b.object.isRequired,h.b.string.isRequired,h.b.bool,h.b.func.isRequired,h.b.func.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.showMoreFiles=n.showMoreFiles.bind(n),n.state={isLoading:!0,fileIds:[],hasMore:!1},n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.fetchFiles()}},{key:"componentDidUpdate",value:function(e){e.channelId!==this.props.channelId&&this.fetchFiles()}},{key:"fetchFiles",value:function(){var e=this,t=this.props,n=t.channelId,a=t.logger;this.setState(function(){return{isLoading:!0}}),this.props.listAndUpsertFiles({channelId:n,count:10,reason:"shared-files-section/fetchFiles"}).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.files,a=t.paging,r=Object(Xm.a)(Object(Jm.a)(n,function(e){return Object(tv.o)(e)}));e.setState(function(){return{isLoading:!1,fileIds:Object(ft.a)(r,"id"),hasMore:a&&a.pages>1}})}).catch(function(t){e.setState(function(){return{isLoading:!1,fileIds:[]}}),a.logError("SHARED-FILES",t,{subtype:"shared_files_loading_failed"})})}},{key:"showMoreFiles",value:function(){this.props.openFromFilesMenu()}},{key:"renderEmptyState",value:function(){return this.props.featureM11nChannelDetails?m.a.createElement("div",{className:"p-channel_details__shared_files__empty"},_$.rt("There are no files to see here right now! But there could be \u2014 drag and drop any file into the message pane to add it to this conversation.",{fallbackHash:"32dfdcb3bc1f3bbe4a27120ff93d9d0a90312489",fallbackHashNs:"channel_pages"})):null}},{key:"renderFiles",value:function(){var e=this.state,t=e.fileIds,n=e.hasMore;if(!this.props.featureM11nChannelDetails)return null;var a=Object(ft.a)(t,function(e){return m.a.createElement(fG,{key:e,fileId:e})}),r=void 0;return n&&(r=m.a.createElement("div",{className:"p-channel_details__shared_files__more"},m.a.createElement(_e.d,{type:"outline",onClick:this.showMoreFiles},_$.rt("See All Files",{fallbackHash:"af3d09ab48b386df129640b14786b79264a4fa87",fallbackHashNs:"menu"})))),m.a.createElement(m.a.Fragment,null,a,r)}},{key:"render",value:function(){var e=this.state,t=e.isLoading,n=e.fileIds;return t?m.a.createElement(ci.a,{size:"jumbo"}):n.length?this.renderFiles():this.renderEmptyState()}}]),t}(p.PureComponent));v$.displayName="SharedFilesList",v$.defaultProps={featureM11nChannelDetails:!1};var y$=Object(g.b)(function(e){var t=Object(y.m)(e,"feature_m11n_channel_details");return{logger:Object(Ct.a)({state:e}),featureM11nChannelDetails:t}},function(e){return{listAndUpsertFiles:function(){return e(Av.h.apply(void 0,arguments))},openFromFilesMenu:function(){return e(ry.e.apply(void 0,arguments))}}})(v$),k$=(n("r/YP"),new B.b("channel_details")),O$=(h.b.string.isRequired,h.b.func,h.b.bool,h.b.func.isRequired,{collapse:d.a,featureM11nChannelDetails:!1}),C$=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.focus=n.focus.bind(n),n.sectionContainerRef=m.a.createRef(),n}return u()(t,e),o()(t,[{key:"focus",value:function(){var e=this.sectionContainerRef.current;if(e){var t=e.getWrappedInstance();t&&t.focus()}}},{key:"render",value:function(){var e=this.props,t=e.featureM11nChannelDetails,n=e.channelId,a=e.collapse,r=e.expandSharedFilesSection;if(!t||!n)return null;var i=m.a.createElement(HJ,{iconType:"all-files",sectionTitle:k$.t("Shared Files")});return m.a.createElement(BJ,{ref:this.sectionContainerRef,sectionId:"shared_files",expand:r,collapse:a,header:i,sectionClasses:"p-channel_details__shared_files_section",key:ab.d+"_DETAILS_SECTION"},m.a.createElement(y$,{channelId:n}))}}]),t}(p.Component);C$.displayName="SharedFilesSection";C$.defaultProps=O$;var E$=Object(g.b)(function(e){return{featureM11nChannelDetails:Object(y.m)(e,"feature_m11n_channel_details")}},function(e){return{expandSharedFilesSection:function(){return e(Object(jn.e)({sectionId:"shared_files"}))}}},null,{withRef:!0})(C$),j$=(n("o2sZ"),new B.b("channel_details")),S$=(h.b.string.isRequired,h.b.func.isRequired,h.b.bool.isRequired,h.b.bool.isRequired,h.b.bool.isRequired,h.b.string,h.b.string,h.b.string,h.b.object.isRequired,h.b.func,h.b.func,h.b.func.isRequired,{desktopSetting:void 0,mobileSetting:void 0,notificationDisabledType:null,openChannelNotificationPrefsModal:d.a,openPrefsModal:d.a}),I$=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["handleEditPreferencesClick","focus"]),n.sectionContainerRef=m.a.createRef(),n}return u()(t,e),o()(t,[{key:"getDisabledNotificationsText",value:function(){var e=this,t=j$.t("You\u2019ve disallowed notifications in your browser. You\u2019ll need to open your browser preferences to change that.",{fallbackHash:"1a4db9df0870ea9d3249727659a462c79ca89790",fallbackHashNs:"prefs"}),n=j$.rt("You have not yet allowed desktop notifications. Open the <button>Preferences Dialog</button> and follow the instructions to set them up.",{fallbackHash:"19c9da8051d592482b03309bbfcae4f052791067",fallbackHashNs:"prefs"},function(t){var n=t.key,a=t.text;return m.a.createElement(En.a,{onClick:e.props.openPrefsModal,key:n},a)}),a=j$.rt("Your browser does not support desktop notifications. <a>Try using our app instead.</a>",{fallbackHash:"38d4c3b2088ba1759fed9615fb958c7a90fbfb4b",fallbackHashNs:"prefs"},function(e){var t=e.key,n=e.text;return m.a.createElement(WA.a,{target:"_blank",key:t,href:"/downloads"},n)});switch(this.props.notificationDisabledType){case"not_allowed":return t;case"not_yet_allowed":return n;case"impossible":return a;default:return null}}},{key:"focus",value:function(){var e=this.sectionContainerRef.current;if(e){var t=e.getWrappedInstance();t&&t.focus()}}},{key:"handleEditPreferencesClick",value:function(){var e=this.props.channelId;this.props.openChannelNotificationPrefsModal({channelId:e,entryPoint:"notification_prefs_section"})}},{key:"renderHeader",value:function(){return this.props.featureM11nChannelDetails?m.a.createElement(HJ,{iconType:"bell-o",sectionTitle:j$.rt("Notification Preferences")}):null}},{key:"renderStandardNotificationPrefText",value:function(e){var t=j$.t("All new messages",{fallbackHash:"9b6c1f2aedfe68e695cee3b82fa493c77114ede1",fallbackHashNs:"channel_pages"}),n=j$.t("Mentions & keywords",{fallbackHash:"92a10c6a3a84448a8c091d6947909b8a0335f595",fallbackHashNs:"channel_pages"}),a=j$.t("Nothing",{fallbackHash:"4481948392a8846400c954e77f58d76cdaa73963",fallbackHashNs:"channel_pages"});switch(e){case"everything":return t;case"mentions_dms":return n;case"nothing":return a;default:return null}}},{key:"renderDesktopNotificationText",value:function(){var e=this.props,t=e.notificationsAllowed,n=e.notificationDisabledType;return!t&&n?m.a.createElement("div",{className:"p-channel_details__notification_prefs_section__notification_warning"},this.getDisabledNotificationsText()):this.renderStandardNotificationPrefText(this.props.desktopSetting)}},{key:"renderCurrentNotificationPreferences",value:function(){return this.props.isMuted?m.a.createElement("div",null,m.a.createElement("span",{className:"p-channel_details__notification_prefs_section__pref bold"},j$.t("This channel is muted",{fallbackHash:"cc1784b8b4d0f3f15c487e68c7ace48ce5d7dd7d",fallbackHashNs:"channel_pages"}))):m.a.createElement("div",null,m.a.createElement("div",null,m.a.createElement("span",{className:"p-channel_details__notification_prefs_section__pref_label bold"},j$.t("Desktop Notifications",{fallbackHash:"53a3505aad0eab70ba3cff84cca6f5cdcf527c25",fallbackHashNs:"channel_pages"})),m.a.createElement("span",{className:"p-channel_details__notification_prefs_section__pref"},this.renderDesktopNotificationText())),m.a.createElement("div",null,m.a.createElement("span",{className:"p-channel_details__notification_prefs_section__pref_label bold"},j$.t("Mobile Notifications",{fallbackHash:"872d1b49f956b8bd1bdd73f7e9a1595f7de35ab2",fallbackHashNs:"channel_pages"})),m.a.createElement("span",{className:"p-channel_details__notification_prefs_section__pref"},this.renderStandardNotificationPrefText(this.props.mobileSetting))))}},{key:"render",value:function(){var e=this.props,t=e.featureM11nChannelDetails,n=e.channel,a=e.collapse,r=e.expandNotificationPrefsSection;return Object(K.hb)(n)||!t?null:m.a.createElement(BJ,{ref:this.sectionContainerRef,sectionId:"notification_prefs",expand:r,collapse:a,header:this.renderHeader(),sectionClasses:"p-channel_details__notification_prefs_section",key:"notification_prefs"},this.renderCurrentNotificationPreferences(),m.a.createElement(_e.d,{className:"margin_top_50",onClick:this.handleEditPreferencesClick,type:"outline"},j$.t("Edit Preferences",{fallbackHash:"4cefcb344f3354ae347d4d8d62e31331cb72312f",fallbackHashNs:"channel_details"})))}}]),t}(p.Component);I$.displayName="NotificationPrefsSection",I$.defaultProps=S$;var w$=Object(g.b)(function(e,t){var n=t.channelId,a=Object(G.e)(e,n),r=void 0,i=void 0;Object(K.hb)(a)||(r=Object(Pe.f)(e,n),i=Object(Pe.g)(e,n));var o=Object(Pe.m)().notificationDisabledType;return{featureM11nChannelDetails:Object(y.m)(e,"feature_m11n_channel_details"),isMuted:Object(Ad.c)(e,n),notificationsAllowed:Object(Pe.e)(),notificationDisabledType:o,desktopSetting:r,mobileSetting:i,channel:a}},function(e){return{openChannelNotificationPrefsModal:function(){return e(tO.a.apply(void 0,arguments))},openPrefsModal:function(){return e(Object(ul.a)())},expandNotificationPrefsSection:function(){return e(Object(jn.e)({sectionId:"notification_prefs"}))}}},null,{withRef:!0})(I$),N$=(n("dutO"),new B.b("channel_details")),T$=(h.b.string,h.b.object,h.b.bool,h.b.bool,h.b.bool.isRequired,{memberId:void 0,member:void 0,time24:!1,canInteract:!0}),A$=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.focus=n.focus.bind(n),n.memberRef=m.a.createRef(),n.state={tzUpdateCounter:0},n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.scheduleNextTzUpdate()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.tzUpdater)}},{key:"focus",value:function(){var e=this.memberRef.current;e&&e.focus()}},{key:"scheduleNextTzUpdate",value:function(){var e=this,t=60-(new Date).getSeconds();t<5&&(t=5),this.tzUpdater=setTimeout(function(){e.setState(function(e){return{tzUpdateCounter:e.tzUpdateCounter+1}}),e.scheduleNextTzUpdate()},1e3*t)}},{key:"render",value:function(){var e=this.props,t=e.memberId,n=e.member,a=e.time24,r=e.canInteract,i=e.featureM11nChannelDetails;if(!t||!n)return null;if(!i)return null;var o=Object(eo.Q)(n),s=void 0;if(o&&!Object(eo.kb)(n)){var l=Object(MC.a)(Date.now(),{timeZone:o,timeZoneOffset:Object(eo.R)(n),do24hrTime:a});s=m.a.createElement("div",{className:"p-channel_details__dm_section__tz_section"},m.a.createElement("span",{className:"p-channel_details__dm_section__tz_label"},N$.t("Time zone"))," ",N$.t("{local_time} local time",{local_time:l}))}return m.a.createElement(m.a.Fragment,null,m.a.createElement(EZ.a,{userId:t},m.a.createElement("div",{className:"p-channel_details__dm_section"},m.a.createElement(CZ.a,{ref:this.memberRef,id:t,size:"large",showStatus:r,showPresence:r}))),s)}}]),t}(p.PureComponent);A$.displayName="DmSection",A$.defaultProps=T$;var R$=Object(g.b)(function(e,t){var n=t.channel,a=Object(K.H)(n),r=Object(y.m)(e,"feature_stranger_danger")?Object(vz.a)(e,a):!Object(eo.Jb)(Object(xo.d)(e,a));return{memberId:a,member:Object(xo.d)(e,a),time24:Object(Zt.j)(e,"time24"),canInteract:r,featureM11nChannelDetails:Object(y.m)(e,"feature_m11n_channel_details")}},null,null,{withRef:!0})(A$),P$=(n("qTUc"),new B.b("channel_details")),M$={info:"detailsSectionRef",highlights:"highlightSectionRef",pins:"pinnedSectionRef",members:"memberListSectionRef",apps:"appsSectionRef",shared_files:"sharedFilesSectionRef",notification_prefs:"notificationSectionRef"},x$=(h.b.object,h.b.bool.isRequired,h.b.bool.isRequired,h.b.bool.isRequired,h.b.func.isRequired,h.b.string.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.focus=n.focus.bind(n),n.findFirstSectionRefName=n.findFirstSectionRefName.bind(n),n.detailsSectionRef=m.a.createRef(),n.highlightSectionRef=m.a.createRef(),n.pinnedSectionRef=m.a.createRef(),n.memberListSectionRef=m.a.createRef(),n.appsSectionRef=m.a.createRef(),n.sharedFilesSectionRef=m.a.createRef(),n.notificationSectionRef=m.a.createRef(),n}return u()(t,e),o()(t,[{key:"findFirstSectionRefName",value:function(){var e=this;return M$[this.props.expandedSectionId]||Object.keys(M$).reduce(function(t,n){if(null!==t)return t;var a=M$[n];return e[a].current?a:null},null)}},{key:"focus",value:function(){var e=this.findFirstSectionRefName(),t=this[e]&&this[e].current;if(t){var n=t.getWrappedInstance();n&&n.focus()}}},{key:"renderTitle",value:function(){var e=this.props,t=e.channel,n=e.featureM11nChannelDetails,a=e.featureLongerChannelNames,r=e.isImOrMpim;return n?r?P$.t("About this conversation"):a?P$.t("About this channel"):P$.rt("About {channelName}",{channelName:m.a.createElement(Yp.a,{channel:t,inline:!0})}):null}},{key:"renderBody",value:function(){var e=this,t=this.props,n=t.channel,a=t.collapse,r=t.isImOrMpim;return m.a.createElement(ni.a,null,function(t){var i=t.width,o=t.height;return m.a.createElement(ck.b,{width:i,height:o},m.a.createElement(p.Fragment,null,Object(K.hb)(n)&&m.a.createElement(R$,{ref:e.detailsSectionRef,channel:n}),!r&&m.a.createElement(FZ,{ref:e.detailsSectionRef,channel:n,collapse:a}),!r&&m.a.createElement(zZ,{ref:e.highlightSectionRef,channel:n,collapse:a}),m.a.createElement($J,{ref:e.pinnedSectionRef,channelId:n.id,collapse:a}),!Object(K.hb)(n)&&m.a.createElement(r$,{ref:e.memberListSectionRef,channelId:n.id,collapse:a}),m.a.createElement(g$,{ref:e.appsSectionRef,channelId:n.id,collapse:a}),m.a.createElement(E$,{ref:e.sharedFilesSectionRef,channelId:n.id,collapse:a}),m.a.createElement(w$,{ref:e.notificationSectionRef,channelId:n.id,collapse:a})))})}},{key:"render",value:function(){var e=this,t=this.props,n=t.channel,a=t.featureM11nChannelDetails;if(!n||Object(K.Mb)(n)||!a)return null;var r=this.renderTitle();return m.a.createElement(UV.b,{className:"p-channel_details",focus:this.focus,title:r,renderBody:function(){return e.renderBody()},viewId:Ca.H.CHANNEL_DETAILS_FLEXPANE,kbNavOrder:Object(ae.a)()?void 0:4.5})}}]),t}(p.PureComponent));x$.displayName="ChannelDetails",x$.defaultProps={channel:null};var F$=Object(g.b)(function(e){var t=Object(E.a)(e),n=Object(G.e)(e,t),a=Object(A.e)(e)[0]||"";return{featureM11nChannelDetails:Object(y.m)(e,"feature_m11n_channel_details"),featureLongerChannelNames:Object(y.m)(e,"feature_longer_channel_names"),isImOrMpim:!(!Object(K.hb)(n)&&!Object(K.pb)(n)),expandedSectionId:a,channel:n}},function(e){return{collapse:function(){return e(Object(jn.e)())}}})(x$),L$=n("533h"),D$=n("SAUz"),U$=(n("oP4J"),new B.b("calendar")),B$=(h.b.bool,h.b.bool,function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"focus",value:function(){return null}},{key:"blur",value:function(){return null}},{key:"renderBody",value:function(){var e=this.props,t=e.isLoading;return e.featureCalendarSimpleAgendaView?t?m.a.createElement("div",{className:"p-calendar_flexpane__loading"},U$.t("Loading\u2026")):m.a.createElement("div",null," This is user calendar "):null}},{key:"render",value:function(){return this.props.featureCalendarSimpleAgendaView?m.a.createElement(Mp.a,{component:this,order:4},m.a.createElement(Qs.a,{id:Ca.H.ACTIVITY_FLEXPANE},m.a.createElement("div",{className:"p-calendar_flexpane"},m.a.createElement(L$.a,null,m.a.createElement(D$.a,{size:"medium"}),m.a.createElement("div",null,U$.t("Your calendar"))),this.renderBody()))):null}}]),t}(m.a.Component));B$.displayName="CalendarFlexpane",B$.defaultProps={featureCalendarSimpleAgendaView:!0,isLoading:!0};var q$=Object(g.b)(function(e){return{featureCalendarSimpleAgendaView:Object(y.m)(e,"feature_calendar_simple_agenda_view")}},{})(B$);var H$=n("QLyv"),W$=n("Lnf+"),G$=(n("nfA0"),new B.b("downloads")),K$=(h.b.string.isRequired,h.b.string,h.b.string,h.b.number,h.b.number,h.b.string,h.b.string,h.b.string,h.b.string,h.b.number,h.b.bool,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.func,h.b.bool,h.b.func,h.b.func,{downloadPath:"",downloadState:"",startTime:0,progress:0,fileName:"",imageSource:"",fileType:"",prettyType:"",fileSize:0,highlight:!1,showDownload:d.a,cancelDownload:d.a,retryDownload:d.a,removeDownload:d.a,pauseDownload:d.a,resumeDownload:d.a,hasKeyboardFocusWithin:!1,onFocus:d.a,onBlur:d.a}),V$=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["onShowClick","onCancel","onRetry","onRemove","onPause","onResume"]),n}return u()(t,e),o()(t,null,[{key:"getEstimatedTimeRemaining",value:function(e){var t=e.downloadState,n=e.progress,a=e.startTime;if(!["progressing","paused"].includes(t))return"";if(n>=1)return"";if(-1===n)return"";if(!n)return"";var r=Date.now()-a,i=r*(1/n)-r;return G$.t("{duration} remaining",{duration:H$.a.duration(i,"milliseconds").humanize()})}}]),o()(t,[{key:"onShowClick",value:function(e){e.stopPropagation(),this.props.showDownload(this.props.id)}},{key:"onCancel",value:function(e){e.stopPropagation(),this.props.cancelDownload(this.props.id)}},{key:"onRetry",value:function(e){e.stopPropagation(),this.props.retryDownload(this.props.id)}},{key:"onRemove",value:function(e){e.stopPropagation(),this.props.removeDownload(this.props.id)}},{key:"onPause",value:function(e){e.stopPropagation(),this.props.pauseDownload(this.props.id)}},{key:"onResume",value:function(e){e.stopPropagation(),this.props.resumeDownload(this.props.id)}},{key:"renderDownloadIcon",value:function(){var e=this.props,t=e.fileType,n=e.imageSource,a=function(){return m.a.createElement(ta.b,{type:t,file:!0})};return n?m.a.createElement(pO.a,{src:n,renderPending:a,width:"32",height:"32",className:"p-download_item__image",alt:""}):a()}},{key:"renderExtraActions",value:function(){var e="paused"===this.props.downloadState?m.a.createElement(En.a,{className:"p-download_item__link--resume",onClick:this.onResume},G$.t("Resume")):m.a.createElement(En.a,{className:"p-download_item__link--pause",onClick:this.onPause},G$.t("Pause"));return m.a.createElement("span",{className:"p-download_item__extra_actions"},e,m.a.createElement(En.a,{className:"p-download_item__link--cancel",onClick:this.onCancel},G$.t("Cancel")))}},{key:"render",value:function(){var e=this.props,n=e.downloadPath,a=e.downloadState,r=e.fileName,i=e.imageSource,o=e.fileType,s=e.prettyType,l=e.fileSize,c=e.highlight,u=e.hasKeyboardFocusWithin,d=Math.max(this.props.progress,0),p=r||n.split(/\/|\\/).reverse()[0],h="completed"===a?100:100*d,b=["progressing","paused"].includes(a)&&d?d*l:void 0,g=void 0;g=b?G$.t("{partialSize} of {size} {prettyType}",{partialSize:Object(W$.a)(b,{decimalPlaces:2}),size:Object(W$.a)(l),prettyType:s}):Object(W$.a)(l)+" "+s;var _=t.getEstimatedTimeRemaining(this.props),v=f()("p-download_item",a,{highlight:c,"p-download_item--focus-within":u}),y=f()({"p-download_item__action_icon":!0,"p-download_item__action_icon--image":!!i,fileType:o}),k=Object(ce.p)()?G$.t("Show in Finder"):G$.t("Open containing folder"),O={width:h+"%"},C=G$.t("Remove {file}",{file:p,fallbackHash:"e963907dac5cd5c017869b4c96c18021c9bd058b",fallbackHashNs:"admin"});return m.a.createElement("div",{role:"presentation",className:v,onFocus:this.props.onFocus,onBlur:this.props.onBlur},m.a.createElement("div",{className:"p-download_item__icon_container"},this.renderDownloadIcon(),m.a.createElement(ta.b,{className:y})),m.a.createElement("div",{className:"p-download_item__container"},m.a.createElement("div",{className:"p-download_item__name_row"},m.a.createElement("span",{className:"p-download_item__name overflow_ellipsis"},p),this.renderExtraActions()),m.a.createElement("div",{className:"p-download_item__size_row"},m.a.createElement("span",{className:"p-download_item__size overflow_ellipsis"},m.a.createElement("span",{className:"p-download_item__partial_size"},g)),m.a.createElement("span",{className:"p-download_item__actions"},m.a.createElement(En.a,{className:"p-download_item__link--show",onClick:this.onShowClick},k),m.a.createElement(En.a,{className:"p-download_item__link--retry",onClick:this.onRetry},G$.t("Retry"))),m.a.createElement("span",{className:"p-download_item__time_remaining"},_)),m.a.createElement("div",{className:"p-download_item__progress_row progress_bar"},m.a.createElement("div",{className:"p-download_item__progress progress_bar_progress",style:O}))),m.a.createElement(Qp.a,{"aria-label":C,icon:"close-filled",className:"p-download_item__link--remove",onClick:this.onRemove}))}}]),t}(m.a.Component);V$.displayName="DownloadItem",V$.defaultProps=K$;var z$={showDownload:P.t,cancelDownload:P.a,retryDownload:P.r,removeDownload:P.p,pauseDownload:P.o,resumeDownload:P.q},Y$=Object(Tk.a)(Object(g.b)(null,z$)(V$)),Q$=new B.b("page_client"),X$=(h.b.arrayOf(h.b.object.isRequired),h.b.func,h.b.func,h.b.func,h.b.string,h.b.func,{items:void 0,onItemTabWithin:d.a,openDownload:d.a,retryDownload:d.a,focusKey:null,setFocusKey:d.a}),J$=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["renderItem","onFileClick","focus"]),n.list=m.a.createRef(),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.focusKey,n=e.items;"downloads"===t&&n.length&&(this.setFocusOnFirstItem(),this.clearFocusKey())}},{key:"componentDidUpdate",value:function(e){var t=e.focusKey,n=this.props,a=n.focusKey,r=n.items;"downloads"===a&&a!==t&&r.length&&(this.setFocusOnFirstItem(),this.clearFocusKey())}},{key:"onFileClick",value:function(e){var t=e.id,n=this.getItemKeys(),a=Object(cA.a)(n,t),r=this.props.items[a];if(r){var i=r.downloadState;"completed"!==i?"cancelled"!==i&&"interrupted"!==i||this.props.retryDownload(t):this.props.openDownload(t)}}},{key:"getItemKeys",value:function(){return this.props.items.map(function(e){return e.id})}},{key:"setFocusOnFirstItem",value:function(){var e=this.getItemKeys()[0],t=this.list.current;t&&t.focusOnKey(e)}},{key:"clearFocusKey",value:function(){this.props.setFocusKey(null)}},{key:"focus",value:function(){var e=this.list.current;e&&e.focus()}},{key:"renderItem",value:function(e){var t=this.props.items[e];return m.a.createElement(Y$,ye()({key:t.id},t))}},{key:"render",value:function(){var e=this,t=this.getItemKeys();return m.a.createElement(ni.a,null,function(n){var a=n.width,r=n.height;return m.a.createElement(qA.a,{ref:e.list,width:a,height:r,keys:t,rowRenderer:e.renderItem,animateOnScroll:!1,"aria-label":Q$.t("Downloads"),onItemTabWithin:e.props.onItemTabWithin,onItemClick:e.onFileClick})})}}]),t}(p.PureComponent);J$.displayName="DownloadsList",J$.defaultProps=X$;var Z$=Object(g.b)(function(e){return{focusKey:Object(S_.a)(e)}},function(e){return{openDownload:function(){return e(P.n)},retryDownload:function(){return e(P.r)},setFocusKey:function(t){return e(Object(I_.a)(t))}}})(function(e){var t=e.forwardedRef,n=Ep()(e,["forwardedRef"]);return m.a.createElement(J$,ye()({ref:t},n))}),$$=m.a.forwardRef(function(e,t){return m.a.createElement(Z$,ye()({forwardedRef:t},e))}),e0=(n("erm0"),h.b.array.isRequired,h.b.array.isRequired,h.b.func.isRequired,h.b.bool,h.b.func,h.b.bool,{clearDownloads:d.a,isShowing:!0,featureDownloadsPolish:!1}),t0=new B.b("page_client"),n0=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(Kt.a)(n,["focus","onItemTabWithin"]),n.list=m.a.createRef(),n.flexpane=m.a.createRef(),n}return u()(t,e),o()(t,[{key:"onItemTabWithin",value:function(){var e=this.flexpane.current;e&&e.setInitialActiveSection()}},{key:"UNSAFE_componentWillUpdate",value:function(e){var t=e.fileIdsToFetch;this.props.fileIdsToFetch!==t&&0!==t.length&&(Object(Ox.a)(this.props.fileIdsToFetch,t)||this.props.fetchFileInfo({ids:t}))}},{key:"focus",value:function(){var e=this.list.current;e&&e.focus()}},{key:"render",value:function(){var e=this,t=this.props,n=t.clearDownloads,a=t.downloads,r=t.featureDownloadsPolish;if(!t.isShowing)return null;var i=void 0;return Object(ls.a)(a)||(i={onOptionsClick:n,optionsIconType:"clear",optionsTooltipText:t0.t("Clear all")}),m.a.createElement(UV.b,{isEmpty:Object(ls.a)(a),ref:this.flexpane,focus:this.focus,className:"p-downloads_list",title:t0.t("Downloads"),renderBody:function(){return m.a.createElement($$,{ref:e.list,"aria-label":t0.t("Downloads"),items:a,onItemTabWithin:e.onItemTabWithin})},renderEmpty:function(){return r?m.a.createElement(iy.a,{imageUrl:cdn_url+"/80588/img/downloads_empty.png",imageUrl2x:cdn_url+"/80588/img/downloads_empty@2x.png",title:t0.t("Downloaded files"),description:t0.rt("You can download files by selecting the {icon} icon.",{icon:m.a.createElement(ta.b,{inline:!0,type:"cloud-download"})})}):null},headerProps:i,viewId:"downloads-list",kbNavOrder:Object(ae.a)()?void 0:6})}}]),t}(m.a.Component);n0.displayName="DownloadsFlexpane",n0.defaultProps=e0;var a0=n0,r0=function(e){return e.files},i0=function(e,t){return t.startTime-e.startTime},o0=Object(O_.createSelector)([P.i,r0],function(e,t){return e.map(function(e){return function(e,t){var n=t||Object(dr.e)(e.id)||{};return ye()({},e,{fileName:n.name,imageSource:n.thumb_160||n.thumb_80,fileType:n.filetype,prettyType:n.pretty_type,fileSize:n.size})}(e,t[e.id])}).sort(i0)}),s0=Object(O_.createSelector)([P.h,r0],function(e,t){return e.filter(function(e){return!t[e]})}),l0={fetchFileInfo:P.d,clearDownloads:P.b},c0=Object(g.b)(function(e){var t=Object(A.j)(e);return{downloads:o0(e),fileIdsToFetch:s0(e),isShowing:"downloads"===t,featureDownloadsPolish:Object(y.m)(e,"feature_downloads_polish")}},l0)(a0),u0=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.id,n=e.params;if(!t)return null;switch(t){case"files":if(n&&Object(nV.a)(n[0]))return m.a.createElement($V,{fileId:n[0]});var a=n&&n[0]||"all",r=n&&n[1]||"all";return m.a.createElement(mz,{user:a,filetype:r});case"downloads":return m.a.createElement(c0,null);case"thread":if(!n)return null;var i=Object(Pn.a)(n[0]),o=i.channelId,s=i.threadTs,l="threads-flexpane-"+o+"-"+s;return m.a.createElement($X,{threadTs:s,channelId:o,key:l,serializationKey:l});case"activity":return m.a.createElement(hJ,null);case"directory":return m.a.createElement(_z,null);case"user_profile":return n&&Object(zb.a)(n[0])?m.a.createElement(Dz,{memberId:n[0]}):null;case"app_profile":var c=n[0];return n&&Object(rV.a)(c)?m.a.createElement(hY,{serviceId:c}):n&&Object(O.a)(c)?m.a.createElement(hY,{appId:c}):null;case"user_groups":return n&&Object(aV.a)(n[0])?m.a.createElement(NQ,{groupId:n[0]}):m.a.createElement(kX,null);case"whats_new":return m.a.createElement(AJ,null);case"starred_items":return m.a.createElement(FJ,null);case"shortcuts":return m.a.createElement(LJ.b,null);case"details":return m.a.createElement(F$,null);case"calendar":return m.a.createElement(q$,null);default:throw new Error(t+" flexpane is not implemented!")}}}]),t}(p.PureComponent);u0.displayName="SecondaryView";var d0=u0;u0.defaultProps={id:null,params:null};n("tEVE"),h.b.string.isRequired,h.b.string,h.b.oneOf(R.a),h.b.string,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.arrayOf(h.b.string),h.b.func,h.b.bool,h.b.object,h.b.object.isRequired,h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.func,h.b.func,h.b.bool,h.b.bool,h.b.oneOf(["light","dark"]),h.b.bool,h.b.bool,h.b.bool,h.b.bool,h.b.bool;var p0={primaryView:void 0,secondaryView:void 0,tab:void 0,isPage:!1,hideChannelHeader:!1,isAppSpace:!1,isAppSpaceOpen:!1,isAppHomeTabsEnabled:!1,flexParams:void 0,renderSonicMenu:void 0,featureClassicNav:!1,featureAppHomeUTA:!1,featureComposeFlow:!1,featureModernizeChannelCreateModal:!1,openInviteModal:d.a,openChannelCreateModal:d.a,usePrimarySearch:!1,isWindowFrameless:!1,inCreatorOnboarding:!1,clogger:void 0,clientTheme:"light",systemThemeSync:!1,useTabsHeaderVariant:!1,featureWysiwygComposer:!1,isIAP1Enabled:!1,isIAP1TopSearch:!1},m0=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={locale:Object(Od.a)({teamId:n.props.teamId})||B.b.DEFAULT_LOCALE,showingContextBar:!1},n.setLocaleState=n.setLocaleState.bind(n),n.onInviteClick=n.onInviteClick.bind(n),n.maybePullDownMessagePane=n.maybePullDownMessagePane.bind(n),n.onStorageEvent=n.onStorageEvent.bind(n),n.onCreateChannelClick=n.onCreateChannelClick.bind(n),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.teamId,n=e.primaryView,a=e.clientTheme;Object(Od.b)({teamId:t,fn:this.setLocaleState}),Object(_a.a)(n)||(Object(_.dispatchForClientStore)(Object(k.d)(!1)),Object(_.dispatchForClientStore)(Object(k.c)(!1))),"dark"===a&&document.body.classList.add("sk-client-theme--dark"),this.beaconClientThemeCounts(),window.addEventListener("storage",this.onStorageEvent)}},{key:"componentDidUpdate",value:function(e){this.props.clientTheme!==e.clientTheme&&("dark"===this.props.clientTheme?document.body.classList.add("sk-client-theme--dark"):document.body.classList.remove("sk-client-theme--dark"),this.beaconClientThemeCounts(),window.skFirstPaintStyle&&(window.skFirstPaintStyle.remove(),window.skFirstPaintStyle=null))}},{key:"componentWillUnmount",value:function(){Object(Od.d)({teamId:this.props.teamId}),window.removeEventListener("storage",this.onStorageEvent)}},{key:"onStorageEvent",value:function(e){e.key===D.a&&Object(_.dispatchForClientStore)(Object(D.g)(e.newValue))}},{key:"onInviteClick",value:function(){this.props.clogger.track("SIDEBAR_INVITE_PEOPLE",{contexts:{ui_context:{step:"invite_people",action:"click",ui_properties:{element_type:"button",element_name:"invite_people"}}}}),this.props.openInviteModal()}},{key:"onCreateChannelClick",value:function(){this.props.featureModernizeChannelCreateModal&&this.props.openChannelCreateModal({entryPoint:"channel_sidebar"})}},{key:"setLocaleState",value:function(e){var t=e.locale;this.setState(function(e){return e.locale===t?e:{locale:t}})}},{key:"beaconClientThemeCounts",value:function(){var e=this.props,t=e.clientTheme,n=e.systemThemeSync,a=e.telemeter;a.count("client_theme_"+t),a.count("client_system_theme_sync_"+(n?"on":"off"))}},{key:"maybePullDownMessagePane",value:function(e){this.setState(function(t){return t.contextBarShowing===e?null:{showingContextBar:e}})}},{key:"render",value:function(){var e=Object(_.getStoreInstanceByTeamId)(this.props.teamId),t=f()("p-workspace",{"p-workspace--context-pane-collapsed":!this.props.secondaryView,"p-workspace--context-pane-expanded":this.props.secondaryView,"p-workspace--no-header":this.props.hideChannelHeader,"p-workspace--classic-nav":this.props.featureClassicNav,"p-workspace--classic-nav--frameless":this.props.isWindowFrameless,"p-workspace--primary-search":this.props.usePrimarySearch&&"Vsearch"===this.props.primaryView,"p-workspace--in-creator-onboarding":this.props.inCreatorOnboarding,"p-workspace--context-bar-showing":this.state.showingContextBar,"p-workspace--channel-tabs-header":this.props.useTabsHeaderVariant,"p-workspace--channel-tabs-header-channel":this.props.useTabsHeaderVariant&&Object(_a.a)(this.props.primaryView),"p-workspace--iap1":this.props.isIAP1Enabled,"p-workspace--iap1-topsearch":this.props.isIAP1TopSearch}),n=this.props.useTabsHeaderVariant&&Object(_a.a)(this.props.primaryView)&&m.a.createElement(OK,null),a=m.a.createElement("div",{className:"p-workspace__top_nav"},m.a.createElement(cg.b,{variant:"short",subtype:"top_nav"},m.a.createElement(IN,{renderSonicMenu:this.props.renderSonicMenu,hideChannelHeader:this.props.hideChannelHeader})));this.props.isIAP1Enabled&&(a=this.props.isIAP1TopSearch?m.a.createElement(UK,null):null);var r=this.props.isIAP1Enabled&&m.a.createElement(AK,null),i=this.props.isIAP1Enabled&&m.a.createElement(HK,null);return m.a.createElement(g.a,{store:e,key:this.state.locale},m.a.createElement(yK,null,m.a.createElement($M.a,null),m.a.createElement(cg.a,null,m.a.createElement(Qq,{store:e}),m.a.createElement(Xq.a,{store:e})),m.a.createElement(wG.a,{commands:mK}),m.a.createElement("div",{className:t,role:"tabpanel"},m.a.createElement("div",{className:"p-workspace__banner"},m.a.createElement(Bk,null),m.a.createElement(Xk,null),m.a.createElement(Vk,null)),a,(this.props.isIAP1Enabled||this.props.featureComposeFlow)&&m.a.createElement(uw.a,null),m.a.createElement(cg.b,{subtype:"sidebar"},m.a.createElement("div",{className:"p-workspace__sidebar"},m.a.createElement("div",{className:"p-workspace__channel_sidebar","data-qa":"ws_channel_sidebar"},r,m.a.createElement(dx,{onInviteClick:this.onInviteClick,onCreateChannelClick:this.onCreateChannelClick})))),m.a.createElement(cg.b,{id:this.props.primaryView,subtype:"primary_view"},m.a.createElement("div",{className:"p-workspace__primary_view"},n,m.a.createElement("div",{className:"p-workspace__primary_view_contents"},i,this.props.isAppHomeTabsEnabled&&Object(_a.a)(this.props.primaryView)&&this.props.isAppSpace&&m.a.createElement(cg.b,{id:this.props.primaryView,subtype:"app_home",variant:"short"},m.a.createElement($,null)),"Vall_threads"===this.props.primaryView&&m.a.createElement("div",{className:"p-workspace__primary_view_body"},m.a.createElement(Sq,{clientTheme:this.props.clientTheme})),this.props.usePrimarySearch&&"Vsearch"===this.props.primaryView&&m.a.createElement("div",{className:"p-workspace__primary_view_body"},m.a.createElement(Jq.a,null)),m.a.createElement(yH,null),this.props.isPage&&m.a.createElement(CH,null),this.props.tab&&m.a.createElement(EG,null),Object(_a.a)(this.props.primaryView)&&(!this.props.isAppSpace||!this.props.isAppSpaceOpen)&&!this.props.tab&&m.a.createElement(Lq,{location:Mq.MESSAGE_PANE,channelId:this.props.primaryView,role:this.props.isAppSpace?"tabpanel":null},m.a.createElement("div",{className:"p-workspace__primary_view_body"},m.a.createElement(hD,{serializationKey:"message-pane"})),m.a.createElement("footer",{className:"workspace__primary_view_footer"},m.a.createElement(sB,{key:"wysiwyg_"+this.props.featureWysiwygComposer,maybePullDownMessagePane:this.maybePullDownMessagePane}))),this.props.featureAppHomeUTA&&Object(O.a)(this.props.primaryView)&&!this.props.tab&&m.a.createElement("div",{className:"p-workspace__primary_view_body p-workspace__primary_view_body"},m.a.createElement(IG,{appId:this.props.primaryView})),Object(_a.a)(this.props.primaryView)&&this.props.isAppSpace&&this.props.isAppSpaceOpen&&!this.props.tab&&m.a.createElement("div",{className:"p-workspace__primary_view_body p-workspace__primary_view_body--with-scroll"},m.a.createElement(fW,null))))),m.a.createElement(cg.b,{id:this.props.secondaryView,subtype:"secondary_view"},m.a.createElement("div",{className:"p-workspace__secondary_view"},m.a.createElement("div",{className:"p-workspace__secondary_view_contents"},m.a.createElement(d0,{id:this.props.secondaryView,params:this.props.flexParams}))))),m.a.createElement(qq,null),m.a.createElement(bD.a,null),m.a.createElement(Cn.a,null),!Object(ce.u)()&&m.a.createElement(XK,null),m.a.createElement(tV,null)))}}]),t}(p.PureComponent);m0.displayName="Workspace",m0.defaultProps=p0;t.a=Object(g.b)(function(e){var t=Object(E.a)(e),n=II(e,t),a=Object(JI.e)(e,t),r=a&&Sk(t),i=r&&r.isChannelHeaderHidden&&r.isChannelHeaderHidden(e),o=Object(A.e)(e),s=Object(j.e)(e)||Object(S.a)(e)?N(e):void 0;return{teamId:Object(v.b)(e),primaryView:t,secondaryView:Object(A.j)(e),tab:s,isPage:a,hideChannelHeader:i,isAppSpace:n,isAppSpaceOpen:Object(F.p)(e),flexParams:o&&o.length?o:rR.a,featureClassicNav:Object(y.m)(e,"feature_classic_nav"),featureAppHomeUTA:Object(C.c)(e),featureComposeFlow:Object(T.g)(e),usePrimarySearch:Object(L.a)(e),featureModernizeChannelCreateModal:Object(y.m)(e,"feature_modernize_channel_create_modal"),isWindowFrameless:Object(P.l)(e),inCreatorOnboarding:Object(Yt.d)(e),clogger:Object(re.a)({state:e}),telemeter:Object(KC.c)({state:e}),clientTheme:Object(D.c)(e),systemThemeSync:Object(D.d)(e),useTabsHeaderVariant:Object(j.f)(e),isAppHomeTabsEnabled:Object(S.a)(e),featureWysiwygComposer:Object(lt.a)(e),isIAP1Enabled:Object(pE.b)(e),isIAP1TopSearch:Object(pE.d)(e)}},function(e){return{openInviteModal:function(){return e(M.a.apply(void 0,arguments))},openChannelCreateModal:function(){return e(x.a.apply(void 0,arguments))}}})(m0)},m0k8:function(e,t,n){},m2U7:function(e,t,n){},m5Fn:function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("UXvI"),p=n("kxpR"),m=n.n(p),h=n("aK/h"),b=n("XHGt"),f=n("JrUZ"),g=n("yHhI"),_=n("Zr7G"),v=n("TSYQ"),y=n.n(v),k=n("tn36"),O=n("GbAX"),C=n("tfx1"),E=n("Go8C"),j=n("BrU6"),S=n("Tc5z"),I=n("cMxN"),w=n("1F8+"),N=n("od5y"),T=n("llxT"),A=n("g5qt"),R=n("nNoG"),P=n("Rjjz"),M=n("ROZo"),x=Object(M.b)("TS.client.channel_header.calculateNoDragRegions"),F=(Object(M.b)("TS.client.channel_header.legacySetupDragRegions"),n("F8qq")),L=n("MREy"),D=n("HXD8"),U=n("ifKl"),B=Object(M.b)("TS.view.resize_sig.add",U.a,!0),q=Object(M.b)("TS.view.resize_sig.remove",U.a,!0),H=n("rWF5"),W=n("YDA8"),G=n("NPpR"),K=n("5iqv"),V=new R.b("search"),z=new R.b("jumper"),Y=new R.b("keys"),Q=(h.b.func.isRequired,h.b.string.isRequired,h.b.string,h.b.func.isRequired,h.b.func.isRequired,h.b.func.isRequired,h.b.func.isRequired,h.b.string.isRequired,h.b.bool.isRequired,h.b.object,h.b.bool,h.b.string,{displayQuery:"",telemeter:_.d,isCustomTitlebarShown:!1,lastOpenMethod:""}),X=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(k.a)(n,["onSearchClose","onSearchAutocompleteSuggestionAccept","onSearchAutocompleteSuggestionDelete","onSearchInputBoxEscape","onClickRefreshSearch"]),n.state={appBannerHeightPx:n.getBannerHeight()},n.onSearchInputBoxFocus=Object(d.a)(function(){return n.props.searchPrecache()},6e4),n.onResize=Object(d.a)(n.onResize.bind(n),50),B(n.onResize),n.inputRef=m.a.createRef(),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){A.Q&&Object(A.X)()&&Object(A.cc)([])}},{key:"componentWillUnmount",value:function(){A.Q&&Object(A.X)()&&x(),q(this.onResize)}},{key:"onResize",value:function(){var e=this;this.setState(function(){return{appBannerHeightPx:e.getBannerHeight()}})}},{key:"onSearchAutocompleteSuggestionAccept",value:function(){Object(D.e)(this.props.telemeter),this.props.searchAutocompleteSuggestionAccept()}},{key:"onSearchAutocompleteSuggestionDelete",value:function(){this.inputRef.current&&this.inputRef.current.getWrappedInstance().focusTexty()}},{key:"onSearchInputBoxEscape",value:function(){return this.onSearchClose(),!0}},{key:"onSearchClose",value:function(){Object(L.g)()||this.props.close()}},{key:"onClickRefreshSearch",value:function(){this.props.setRequestFromEditableRequest({fetchSuggestions:!0})}},{key:"getBannerHeight",value:function(){var e=window.$&&window.$("#banner");return e&&e.height()||0}},{key:"clear",value:function(){this.props.setSearchInputBoxUserQuery({textyString:""})}},{key:"renderMode",value:function(){switch(this.props.interfaceMode){case C.a.SEARCH_RESULTS:return this.renderSearchResults();case C.a.EDIT:default:return this.renderQueryEdit()}}},{key:"renderSearchResults",value:function(){return m.a.createElement(K.a,{onClickRefreshSearch:this.onClickRefreshSearch})}},{key:"renderQueryEdit",value:function(){return m.a.createElement("div",{className:"c-search-autocomplete","data-qa":"search_autocomplete"},m.a.createElement(W.a,{userQuery:this.props.userQuery,onAccept:this.onSearchAutocompleteSuggestionAccept,onDelete:this.onSearchAutocompleteSuggestionDelete}))}},{key:"renderCmdKHint",value:function(){if("key_button"===this.props.lastOpenMethod){var e=Object(H.p)()?Y.t("\u2318K"):Y.t("Ctrl+K");return m.a.createElement("div",{className:"c-search_modal__tip_wrapper"},m.a.createElement("div",{className:"c-search_modal__tip"},z.rt("<strong>Tip:</strong> Open this faster with {cmd_shortcut}",{cmd_shortcut:e})))}return null}},{key:"render",value:function(){var e=y()("c-popover","c-search_modal",{"c-search_modal--autocomplete":this.props.interfaceMode===C.a.EDIT,"c-search_modal--custom_titlebar":this.props.isCustomTitlebarShown}),t=V.t("Search");return m.a.createElement(I.a,{ariaRole:"dialog",ariaLabel:t,isOpen:this.props.visible,position:"top-left",targetBounds:{top:0,left:0,bottom:0,right:0},onClose:this.onSearchClose,shouldFade:!1,overlayClassName:e,allowanceX:0,allowanceY:0,shouldFocusAfterRender:!0,shouldReturnFocusAfterClose:!1,contentStyle:{marginTop:this.state.appBannerHeightPx}},m.a.createElement("div",{className:"c-search__input_and_close"},m.a.createElement(G.a,{autoFocus:!0,displayQuery:this.props.displayQuery,onEnter:this.onSearchAutocompleteSuggestionAccept,onEscape:this.onSearchInputBoxEscape,onFocus:this.onSearchInputBoxFocus,ref:this.inputRef}),m.a.createElement(T.a,{className:"c-search__input_and_close__close",onClick:this.props.close,"aria-label":V.t("Cancel"),"data-qa":"search_input_close"},m.a.createElement(N.b,{type:"times"}))),this.renderMode(),this.renderCmdKHint())}}]),t}(p.PureComponent);X.displayName="Search",X.defaultProps=Q;var J={searchAutocompleteSuggestionAccept:F.a,searchPrecache:function(){return P.q.apply(void 0,arguments)},setRequestFromEditableRequest:function(){return f.C.apply(void 0,arguments)},setSearchInputBoxUserQuery:function(){return j.a.apply(void 0,arguments)},close:function(){return w.a.apply(void 0,arguments)}},Z=Object(b.b)(function(e){return{interfaceMode:Object(O.f)(e),displayQuery:Object(E.b)(e),userQuery:Object(E.d)(e),visible:Object(O.u)(e),telemeter:Object(_.c)({state:e}),isCustomTitlebarShown:Object(S.k)(e),lastOpenMethod:Object(O.h)(e)}},J)(X),$=(h.b.object.isRequired,h.b.object.isRequired,h.b.func.isRequired,function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={hasError:!1},n.retryRender=Object(d.a)(n.retryRender.bind(n),100,{leading:!1}),n}return u()(t,e),o()(t,[{key:"componentDidUpdate",value:function(){this.state.hasError&&this.retryRender()}},{key:"componentDidCatch",value:function(e,t){this.props.telemeter.count("search_full_render_fail",1),this.props.logger.error("IMPROVED_SEARCH","Error caught by ProtectedSearch "+t.componentStack,e,{subtype:"search"}),this.setState(function(){return{hasError:!0}}),this.props.resetSearchAfterUnknownUIError()}},{key:"retryRender",value:function(){this.setState(function(){return{hasError:!1}})}},{key:"render",value:function(){return this.state.hasError?null:m.a.createElement(Z,null)}}]),t}(p.PureComponent));$.displayName="ProtectedSearch";var ee={resetSearchAfterUnknownUIError:function(){return f.s.apply(void 0,arguments)}},te=Object(b.b)(function(e){return{logger:Object(g.a)({state:e}),telemeter:Object(_.c)({state:e})}},ee)($);t.a=te},mIgp:function(e,t,n){"use strict";var a=n("oUPN"),r=n("iCc5"),i=n.n(r),o=n("V7oC"),s=n.n(o),l=n("FYw3"),c=n.n(l),u=n("mRg0"),d=n.n(u),p=n("ifKl"),m=n("aK/h"),h=n("kxpR"),b=n.n(h),f=n("uPpK"),g=n("ukTK"),_=n("z0G2"),v=n("tQ8E"),y=(m.b.func.isRequired,m.b.any,m.b.string,m.b.arrayOf(m.b.string).isRequired,m.b.number,m.b.number,m.b.number,m.b.bool,m.b.number,m.b.func,{className:"",onScroll:p.a,scrollElement:null,defaultRowHeight:200,topOffset:0,height:0,isScrolling:!1,scrollTop:0}),k=function(e){function t(){return i()(this,t),c()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d()(t,e),s()(t,[{key:"isScrolling",value:function(){return this.props.scrolling}},{key:"getContainerHeight",value:function(){return this.getContentHeight()}},{key:"getScrollTop",value:function(){return this.props.scrollTop}},{key:"setScrollTop",value:function(e){this.props.scrollElement.scrollTop=Math.ceil(e)}},{key:"getClassName",value:function(){return this.props.className}},{key:"onScroll",value:function(e){this.relayout(),this.props.onScroll(e,{scrollTop:this.getScrollTop(),scrollHeight:this.getContentHeight(),clientHeight:this.props.height})}},{key:"render",value:function(){var e=this.props,t=e.width,n=e.height;if(0===t||0===n)return null;var a=this.getClassName(),r=this.renderContents();return b.a.createElement("div",{className:a,style:{width:t,height:"auto"},onScroll:this.onScroll,role:this.props.role},r)}}]),t}(v.a);k.displayName="FullLengthList";var O=function(e){function t(e){i()(this,t);var n=c()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.heightCache=new g.a({DEFAULT_HEIGHT:n.props.defaultRowHeight}),n.layout=new _.a({heightCache:n.heightCache}),n.list=null,n.setListRef=n.setListRef.bind(n),n}return d()(t,e),s()(t,[{key:"getContentHeight",value:function(){return this.list.getContentHeight()}},{key:"getVisibleRange",value:function(){return this.list.getVisibleRange()}},{key:"setListRef",value:function(e){this.list=e}},{key:"invalidateRowHeights",value:function(){this.heightCache.invalidate()}},{key:"scrollToKey",value:function(){var e;return(e=this.list).scrollToKey.apply(e,arguments)}},{key:"render",value:function(){var e=this,t=this.props,n=t.keys,a=t.className,r=t.rowRenderer,i=t.scrollElement,o=t.topOffset,s=this.props,l=s.height,c=s.isScrolling,u=s.scrollTop,d=i||window;return b.a.createElement(f.a,{disableHeight:!0},function(t){var i=t.width;return b.a.createElement("div",{className:a},b.a.createElement(k,{width:i,height:l,keys:n,layout:e.layout,rowRenderer:r,scrolling:c,scrollTop:Math.max(u-o,0),scrollElement:d,ref:e.setListRef,topOffset:o}))})}}]),t}(h.PureComponent);O.displayName="FullPageList";var C=O;O.defaultProps=y,n.d(t,"a",function(){return C});t.b=a.a},"mZe+":function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("ifKl"),p=n("fujP"),m=n("aK/h"),h=n("kxpR"),b=n.n(h),f=n("XHGt"),g=n("TSYQ"),_=n.n(g),v=n("uPpK"),y=n("8Duq"),k=n("XfeM"),O=n("dhvi"),C=n("Vfgr"),E=n("YVZO"),j=(m.b.string.isRequired,m.b.string.isRequired,m.b.string,m.b.string,m.b.func.isRequired,{threadTs:void 0,initialFileTitle:void 0}),S=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleRename=n.handleRename.bind(n),n}return u()(t,e),o()(t,[{key:"handleRename",value:function(e){var t=this.props,n=t.fileId,a=t.channelId,r=t.threadTs;this.props.renamePendingFile({channelId:a,threadTs:r,fileId:n,title:Object(C.a)(e)})}},{key:"render",value:function(){var e=this.props.initialFileTitle;return b.a.createElement(E.a,{initialFileTitle:e,handleRename:this.handleRename})}}]),t}(h.PureComponent);S.displayName="RenamePendingFileDialog",S.defaultProps=j;var I={renamePendingFile:function(){return y.j.apply(void 0,arguments)}},w=Object(f.b)(null,I)(S),N=n("yPgC"),T=Object(k.b)("Opens the rename file dialog",function(e,t,n){e(Object(O.e)({element:b.a.createElement(w,n),isStackable:!0}))});T.meta={name:"openRenamePendingFileDialog",key:"actionsOpenRenamePendingFileDialogOpenRenamePendingFileDialog",description:"Opens the rename file dialog"},T.propTypes={file:N.a.File().isRequired,channelId:m.b.string.isRequired,threadTs:m.b.string};var A=T,R=n("P9LH"),P=n("nNoG"),M=n("aLpA"),x=n("QbLZ"),F=n.n(x),L=n("8QLk"),D=n("UXvI"),U=n("rWF5"),B=n("lfjV"),q=n("od5y"),H=(m.b.oneOf(["left","right"]).isRequired,m.b.bool,m.b.func,{isShowing:!0,onClick:d.a}),W=function(e){var t=e.arrowDirection,n=e.onClick,a=e.isShowing,r=_()("p-gallery_scroller__arrow","p-gallery_scroller__"+t+"_arrow",{"p-gallery_scroller__arrow_hidden":!a});return b.a.createElement("div",{className:r},b.a.createElement(q.b,{type:"circle-fill",className:"p-gallery_scroller__arrow_fill",size:"inherit"}),b.a.createElement(q.b,{type:"arrow-large-"+t,className:"p-gallery_scroller__arrow_icon",onClick:function(e){return n(e,t)}}))};W.displayName="GalleryScrollerArrow",W.defaultProps=H;var G=W,K=(n("sUzI"),m.b.node.isRequired,m.b.number.isRequired,m.b.number,"right"),V="left",z=50,Y=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onArrowClick=n.onArrowClick.bind(n),n.onScroll=Object(D.a)(n.onScroll,z).bind(n),n.onContentMutation=n.onContentMutation.bind(n),n.setWrapperRef=n.setWrapperRef.bind(n),n.setContentRef=n.setContentRef.bind(n),n.wrapper=void 0,n.content=void 0,n.mutationObserver=new MutationObserver(n.onContentMutation),n.state={scrollLeft:0,scrollWidth:void 0},n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.content&&this.mutationObserver.observe(this.content,{childList:!0,subtree:!0})}},{key:"componentWillUnmount",value:function(){this.mutationObserver.disconnect()}},{key:"onArrowClick",value:function(e,t){e.preventDefault();var n=this.props.pageSize,a=this.state.scrollLeft+(t===K?n:-n),r=this.getMinScroll(),i=this.getMaxScroll(),o=Object(L.a)(a,r,i);i-o<50?o=i:o-r<50&&(o=r),this.scrollWithAnimation(o)}},{key:"onScroll",value:function(e){if(e){var t=e.scrollLeft;this.setState(function(){return{scrollLeft:t}})}}},{key:"onContentMutation",value:function(){var e=this.state.scrollWidth,t=this.content&&this.content.scrollWidth;e!==t&&this.setState(function(e){return F()({},e,{scrollWidth:t})})}},{key:"getMinScroll",value:function(){return 0}},{key:"getMaxScroll",value:function(){if(!this.content)return 0;var e=this.props.width;return this.state.scrollWidth-e}},{key:"setWrapperRef",value:function(e){if(e){this.wrapper=e;var t=this.wrapper.scrollLeft;this.setState(function(e){return F()({},e,{scrollLeft:t})})}}},{key:"setContentRef",value:function(e){if(e){this.content=e;var t=this.content.scrollWidth;this.setState(function(e){return F()({},e,{scrollWidth:t})})}}},{key:"shouldShowArrow",value:function(e){var t=e.arrowDirection,n=this.props.width,a=this.state,r=a.scrollLeft,i=a.scrollWidth,o=this.getMinScroll(),s=this.getMaxScroll();return t===K?r<s&&i>n:r>o}},{key:"scrollWithAnimation",value:function(e){var t=this,n=0;this.trackAnimation&&this.trackAnimation.cancel(),this.trackAnimation=Object(B.a)({fromValue:this.wrapper.scrollLeft,toValue:e,duration:160,delta:!0,onTick:function(e){var a=e.value,r=e.nextTick,i=t.wrapper.scrollLeft+a+n,o=Math.round(i);n=i-o,t.wrapper.scrollLeft=o,r()}})}},{key:"renderArrow",value:function(e){var t=e.arrowDirection,n=this.shouldShowArrow({arrowDirection:t});return b.a.createElement(G,{arrowDirection:t,onClick:this.onArrowClick,isShowing:n})}},{key:"render",value:function(){var e=this,t=this.props,n=t.width,a=t.children,r=_()("p-galler_scroller__wrapper",{"p-galler_scroller__wrapper--can_scroll":Object(U.j)()});return b.a.createElement("div",{className:"p-gallery_scroller",style:{width:n}},b.a.createElement("div",{className:r,ref:this.setWrapperRef,onScroll:function(t){return e.onScroll(t&&t.target)}},b.a.createElement("div",{className:"p-gallery_scroller__content",ref:this.setContentRef},a)),this.renderArrow({arrowDirection:V}),this.renderArrow({arrowDirection:K}))}}]),t}(h.Component);Y.displayName="GalleryScroller",Y.defaultProps={pageSize:100};var Q=Y,X=n("anFW"),J=n("XLFM"),Z=n("RfGh"),$=n("9gIX"),ee=n("wOaD"),te=(n("j4JU"),new P.b("multi_file_upload")),ne=(m.b.object.isRequired,m.b.bool,m.b.string,m.b.func,function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"renderEditFileButton",value:function(){var e=this.props.onEditFile;return e?b.a.createElement(J.c,{className:"p-pending_file__edit_btn","aria-label":te.t("Edit file title"),onClick:e},te.t("Edit")):null}},{key:"render",value:function(){var e=this.props,t=e.file,n=e.className,a=e.isCompact,r=_()("p-pending_file",n,{"p-pending_file--compact":a}),i=a?b.a.createElement(ee.a,{file:t,isCompact:!0}):b.a.createElement($.a,{file:t,showThumbnail:!1},this.renderEditFileButton());return b.a.createElement(Z.a,{file:t,className:r,showActions:!1},i)}}]),t}(h.PureComponent));ne.displayName="PendingFile",ne.defaultProps={isCompact:!1,className:null,onEditFile:null};var ae=ne,re=n("b98e"),ie=n("18Pa"),oe=(n("lKsX"),new P.b("multi_file_upload")),se=(m.b.string,m.b.string,m.b.string,m.b.string,m.b.func,m.b.func,{fileId:void 0,channelId:void 0,threadTs:void 0,title:void 0,closeModal:d.a,openRenamePendingFileDialog:d.a}),le=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.closeModal=n.closeModal.bind(n),n.renameFile=n.renameFile.bind(n),n}return u()(t,e),o()(t,[{key:"closeModal",value:function(){this.props.closeModal()}},{key:"renameFile",value:function(){var e=this.props,t=e.fileId,n=e.channelId,a=e.threadTs,r=e.title;this.props.openRenamePendingFileDialog({fileId:t,channelId:n,threadTs:a,initialFileTitle:r})}},{key:"render",value:function(){var e=this.props.title;return b.a.createElement("div",{className:"p-file_viewer__header"},b.a.createElement("div",{className:"p-file_viewer__header__meta"},b.a.createElement("div",{className:"p-file_viewer__header__meta__stack"},b.a.createElement("div",{className:"bold"},e),b.a.createElement(J.c,{className:"p-file_viewer__header__meta__minor p-file_viewer__header__edit_btn","aria-label":oe.t("Edit file title"),onClick:this.renameFile},oe.t("Edit")))),b.a.createElement("div",{className:"p-file_viewer__header__actions"},b.a.createElement(ie.a,{className:"p-file_viewer__header__button",icon:"times",backgroundStyle:null,onClick:this.closeModal})))}}]),t}(h.PureComponent);le.displayName="Header",le.defaultProps=se;var ce=Object(f.b)(null,function(e){return{closeModal:function(){return e(Object(O.a)())},openRenamePendingFileDialog:function(t){return e(A(t))}}})(le),ue=n("N36p"),de=(m.b.string.isRequired,m.b.string.isRequired,m.b.string,m.b.string,m.b.shape({src:m.b.string,width:m.b.number,height:m.b.number,orientation:m.b.number}),{threadTs:void 0,title:void 0,image:void 0}),pe=function(e){function t(){return r()(this,t),l()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u()(t,e),o()(t,[{key:"render",value:function(){var e=this.props,t=e.image,n=e.title,a=e.fileId,r=e.channelId,i=e.threadTs;return b.a.createElement(re.a,{contentLabel:n},b.a.createElement(ce,{title:n,fileId:a,channelId:r,threadTs:i}),b.a.createElement(ue.a,{title:n,image:t}))}}]),t}(h.Component);pe.displayName="FileViewer",pe.defaultProps=de;var me=Object(f.b)(function(e,t){var n=t.fileId,a=t.channelId,r=t.threadTs,i=t.image;if(!n||!a||!i)return null;var o=Object(y.d)(e,{fileId:n,channelId:a,threadTs:r});return{fileId:n,channelId:a,threadTs:r,title:o.title||o.name,image:i}})(pe),he=Object(k.b)("Opens the PendingFileViewer",function(e,t,n){e(Object(O.e)({element:b.a.createElement(me,n),isStackable:!0}))});he.meta={name:"openPendingFileViewer",key:"actionsOpenPendingFileViewerOpenPendingFileViewer",description:"Opens the PendingFileViewer"},he.propTypes=F()({},me.propTypes);var be=he,fe=n("b0Xh");var ge=function(e){return new Promise(function(t,n){if(e&&e instanceof File)if(window.FileReader)if(e.dataUrl)t({dataUrl:e.dataUrl,orientation:e.orientation,width:e.width,height:e.height});else{var a=new FileReader;a.onload=function(n){var a=n.target.result,r=function(e){for(var t=e.replace(/^data:([^;]+);base64,/gim,""),n=atob(t),a=n.length,r=new Uint8Array(a),i=0;i<a;i++)r[i]=n.charCodeAt(i);return r.buffer}(a),i=Object(fe.readFromBinaryFile)(r),o=i&&"number"==typeof i.Orientation?i.Orientation:null,s=new Image;s.onload=function(){var n=s.width,r=s.height;e.dataUrl=a,e.orientation=o,e.width=n,e.height=r,t({dataUrl:a,orientation:o,width:n,height:r})},s.src=a},a.onloadstart=function(e){Object(d.a)(e)},a.onerror=function(e){a.abort(),n(e)},a.readAsDataURL(e)}else n(new Error("Cannot read file data, browser does not support FileReader"));else n(new Error("Invalid file argument provided to getPendingFileData"))})},_e=n("cD5Y"),ve=(n("TepT"),new P.b("multi_file_upload")),ye=(m.b.object.isRequired,m.b.string,m.b.string,m.b.bool,m.b.string,m.b.func,{channelId:void 0,threadTs:void 0,useThumbnail:!1,className:null,openPendingFileViewer:d.a}),ke=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n.state={dataUrl:void 0,orientation:void 0,height:void 0,width:void 0,isLoading:!0},n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.file;ge(t).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.dataUrl,a=t.orientation,r=t.height,i=t.width;e.setState(function(){return{dataUrl:n,orientation:a,height:r,width:i}}),requestAnimationFrame(function(){e.setState(function(){return{isLoading:!1}})})}).catch(function(e){Object(d.a)(e)})}},{key:"onClick",value:function(e){e.stopPropagation();var t=this.props,n=t.file,a=t.channelId,r=t.threadTs,i=this.state,o=i.dataUrl,s=i.width,l=i.height,c=i.orientation;this.props.openPendingFileViewer({fileId:n.id,channelId:a,threadTs:r,title:n.title||n.name,image:{src:o,width:s,height:l,orientation:c}})}},{key:"renderImage",value:function(){var e=this.props.file,t=this.state.dataUrl;return b.a.createElement("img",{className:"p-pending_image_file__img",src:t,alt:Object(R.k)(e)})}},{key:"renderImageThumbnail",value:function(){var e=this.props.file,t=(this.state||{}).dataUrl,n=t?{backgroundImage:"url('"+t+"')"}:null;return b.a.createElement("span",{className:"p-pending_image_file__thumbnail",style:n,ariaLabel:Object(R.k)(e)})}},{key:"render",value:function(){var e=this.props,t=e.file,n=e.useThumbnail,a=e.className,r=this.state,i=r.isLoading,o=r.orientation,s=r.height,l=r.width,c=n?1:s/l;if(!Object(R.N)(t))return null;var u=_()("p-pending_image_file",a,{"p-pending_image_file__thumbnail_container":n,"p-pending_image_file__loading":i});return b.a.createElement(J.c,{className:"p-pending_image_file__btn",onClick:this.onClick,"aria-label":ve.t("Preview image"),style:Object(R.u)({orientation:o,imageDimensionRatio:c})},b.a.createElement("div",{className:u},n?this.renderImageThumbnail():this.renderImage(),b.a.createElement(_e.a,{size:"large",className:"p-pending_image_file__loading_spinner"})))}}]),t}(h.PureComponent);ke.displayName="PendingImageFile",ke.defaultProps=ye;var Oe=Object(f.b)(null,function(e){return{openPendingFileViewer:function(){return e(be.apply(void 0,arguments))}}})(ke),Ce=new P.b("multi_file_upload"),Ee=(m.b.string.isRequired,m.b.string.isRequired,m.b.string,m.b.func,m.b.bool,{threadTs:null,removePendingFile:d.a,featureMultiFileUpload:!0}),je=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onRemoveFileClick=n.onRemoveFileClick.bind(n),n}return u()(t,e),o()(t,[{key:"onRemoveFileClick",value:function(e){e.stopPropagation();var t=this.props,n=t.fileId,a=t.channelId,r=t.threadTs;n&&a&&this.props.removePendingFile({channelId:a,threadTs:r,fileId:n})}},{key:"render",value:function(){return this.props.featureMultiFileUpload?b.a.createElement(J.c,{className:"p-multi_file_upload__remove_btn",onClick:this.onRemoveFileClick,"aria-label":Ce.t("Remove file")},b.a.createElement(q.b,{type:"circle-fill",className:"p-multi_file_upload__remove_btn_circle"}),b.a.createElement(q.b,{type:"times-circle",className:"p-multi_file_upload__remove_btn_times"})):null}}]),t}(h.PureComponent);je.displayName="RemoveFileButton",je.defaultProps=Ee;var Se=Object(f.b)(null,{removePendingFile:y.i})(je);n("pmpI");n.d(t,"a",function(){return Ne});var Ie=new P.b("multi_file_upload"),we=(m.b.arrayOf(m.b.object),m.b.string.isRequired,m.b.string,m.b.bool,m.b.func,m.b.func,{files:[],threadTs:null,isCompact:!1,onFilesSelected:d.a,openRenamePendingFileDialog:d.a}),Ne=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.hiddenFileInputRef=b.a.createRef(),n.onAddFileClick=n.onAddFileClick.bind(n),n.onPendingFileClick=n.onPendingFileClick.bind(n),n.onFilesSelectedHandler=n.onFilesSelectedHandler.bind(n),n}return u()(t,e),o()(t,[{key:"onAddFileClick",value:function(){this.hiddenFileInputRef&&this.hiddenFileInputRef.current&&this.hiddenFileInputRef.current.click()}},{key:"onPendingFileClick",value:function(e,t){e.stopPropagation();var n=this.props,a=n.channelId,r=n.threadTs,i=t.title||t.name;this.props.openRenamePendingFileDialog({fileId:t.id,channelId:a,threadTs:r,initialFileTitle:i})}},{key:"onFilesSelectedHandler",value:function(e){Object(p.a)(e)||this.props.onFilesSelected(e)}},{key:"getComponentSize",value:function(){var e=this.props,t=e.files;return e.isCompact?"small":t&&1===t.length&&this.shouldRenderPendingImage(t[0])?"large":"medium"}},{key:"shouldRenderPendingImage",value:function(e){return Object(R.N)(e)&&e.size<26214400}},{key:"renderRemoveFileButton",value:function(e){var t=this.props,n=t.files,a=t.channelId,r=t.threadTs;return n&&n.length<2?null:b.a.createElement(Se,{fileId:e,channelId:a,threadTs:r})}},{key:"renderPendingImageFile",value:function(e){var t=this.props,n=t.files,a=t.channelId,r=t.threadTs,i=t.isCompact,o=n&&n.length>1||i;return b.a.createElement(Oe,{file:e,channelId:a,threadTs:r,useThumbnail:o})}},{key:"renderPendingFile",value:function(e){var t=this,n=this.props.isCompact;return b.a.createElement(ae,{file:e,isCompact:n,onEditFile:function(n){return t.onPendingFileClick(n,e)}})}},{key:"renderAddFileButton",value:function(){var e=this.props.files,t=e&&e.length||0,n=t<M.z,a=t>1,r=Ie.t("Add file"),i=Ie.t("({selectedFileCount} of {maxFileUploadCount} selected)",{selectedFileCount:t,maxFileUploadCount:M.z});return b.a.createElement("div",{className:"p-multi_file_upload__add_file_btn_container"},n?b.a.createElement(J.c,{className:"p-multi_file_upload__add_file_btn","aria-label":r,onClick:this.onAddFileClick},r,b.a.createElement(X.a,{ref:this.hiddenFileInputRef,onFilesSelectedHandler:this.onFilesSelectedHandler})):null,a?b.a.createElement("span",{className:"p-multi_file_upload__file_count"},i):null)}},{key:"renderFileGallery",value:function(){var e=this,t=this.props.files;return b.a.createElement("div",{className:"p-multi_file_upload__file_gallery"},t.map(function(t){return b.a.createElement("div",{className:"p-multi_file_upload__file_container",key:t.id},e.shouldRenderPendingImage(t)?e.renderPendingImageFile(t):e.renderPendingFile(t),e.renderRemoveFileButton(t.id))}))}},{key:"renderFileGalleryScroller",value:function(){var e=this;return b.a.createElement(v.a,{disableHeight:!0},function(t){var n=t.width;return b.a.createElement(Q,{width:n,pageSize:230},e.renderFileGallery())})}},{key:"render",value:function(){if(!this.props.files)return null;var e=this.getComponentSize(),t=_()("p-multi_file_upload__container","p-multi_file_upload__container--"+e);return b.a.createElement("div",{className:t},this.renderFileGalleryScroller(),this.renderAddFileButton())}}]),t}(h.Component);Ne.displayName="MultiFileUpload",Ne.defaultProps=we;t.b=Object(f.b)(function(e,t){var n=t.channelId,a=t.threadTs;return{files:Object(y.f)(e,{channelId:n,threadTs:a})}},{openRenamePendingFileDialog:A})(Ne)},mqzt:function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"d",function(){return u}),n.d(t,"c",function(){return d}),n.d(t,"b",function(){return p});var a=n("wd/R"),r=n.n(a),i=n("VyaM"),o=n("vwQE"),s=n("82mD"),l=new(n("nNoG").b)("do_not_disturb"),c=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).currentTime,n=void 0===t?r()().unix():t,a=Object(i.a)(n),s=Object(i.a)(e);return Math.ceil(Object(o.a)(s,a))},u=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).time,t=void 0===e?"09:00":e,n=r()().add(1,"days").format("YYYY-MM-DD"),a=r()(n+" "+t).unix();return c(a)},d=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).time,t=void 0===e?"09:00":e,n=r()().add(1,"week").startOf("isoWeek").format("YYYY-MM-DD"),a=r()(n+" "+t).unix();return c(a)},p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.do24hrTime,a=void 0!==n&&n,i=t.today,o=void 0===i?r()().format("YYYY-MM-DD"):i,c=t.tomorrow,u=void 0===c?r()().add(1,"day").format("YYYY-MM-DD"):c;if(!e)return"";var d=Object(s.p)(e,{do24hrTime:a}),p=Object(s.m)(e,{omitTime:!0});return p===o?l.t("Notifications paused until {time}",{time:d}):p===u?l.t("Notifications paused until tomorrow at {time}",{time:d}):l.t("Notifications paused until {expires}",{expires:Object(s.d)(e,"{status_expiration}",{do24hrTime:a})})}},nTMe:function(e,t,n){},ndUn:function(e,t,n){"use strict";var a=n("QbLZ"),r=n.n(a),i=n("jo6Y"),o=n.n(i),s=n("kxpR"),l=n.n(s),c=n("XHGt"),u=n("aK/h"),d=n("1hAG"),p=n("hXpn"),m=n("kd6D"),h=n("kFoU"),b=(u.b.string,u.b.string.isRequired,u.b.bool,u.b.bool,u.b.node,u.b.object.isRequired,{className:void 0,isActive:!1,isDisabled:!1,secondaryContent:void 0});function f(e){var t=e.className,n=e.id,a=e.isActive,i=e.isDisabled,s=e.secondaryContent,c=e.team,u=o()(e,["className","id","isActive","isDisabled","secondaryContent","team"]),d=void 0;return a?d=i?m.c.highlightDim:m.c.highlightDark:i&&(d=m.c.dim),l.a.createElement(p.a,{className:t,size:"small",style:d,primaryContent:l.a.createElement(h.a,r()({},u,{team:c,invert:d===m.c.highlightDark})),secondaryContent:s,"data-team-id":n})}f.displayName="SmallTeamListEntity",f.defaultProps=b;t.a=Object(c.b)(function(e,t){var n=t.team||Object(d.i)(e,t.id);return{team:n,id:n.id}})(f)},nfA0:function(e,t,n){},o2sZ:function(e,t,n){},"oE+f":function(e,t,n){},"oFS/":function(e,t,n){},oHBb:function(e,t,n){"use strict";var a=n("kxpR"),r=n.n(a),i=n("Cfkr");t.a=r.a.createContext(new i.a)},oP4J:function(e,t,n){},oV5z:function(e,t,n){},oq3d:function(e,t,n){},oqAd:function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("aK/h"),p=n("kxpR"),m=n.n(p),h=n("XHGt"),b=n("TSYQ"),f=n.n(b),g=n("QB+X"),_=n("oRxB"),v=n("t85p"),y=n("quKg"),k=n("K7CU"),O=n("nNoG"),C=n("PM8X"),E=n("yt6e"),j=n("Q+UV"),S=n("hOQf"),I=n("fYfO"),w=n("Lev8"),N=n("Wofk"),T=n("ifKl"),A=n("XLFM"),R=n("od5y"),P=n("RAhH"),M=n("wMtF"),x=new O.b("emoji"),F=(d.b.func.isRequired,d.b.func,d.b.bool,d.b.string,{onEmojiSelected:T.a,featureSonicEmoji:!1,clientTheme:"light"});function L(e){var t=e.onClick,n=e.onEmojiSelected,a=e.featureSonicEmoji,r=e.clientTheme,i=m.a.createElement(P.c,{tip:x.t("Add reaction..."),delay:P.a},m.a.createElement(A.c,{className:f()("c-reaction_add","c-reaction_add--"+r),onClick:t,"aria-label":x.t("Add reaction..."),"data-qa":"add_reaction_button"},m.a.createElement("div",{className:"c-reaction_add__container"},m.a.createElement(R.b,{type:"small-reaction-bg",className:"c-reaction_add__icon c-reaction_add__icon--bg","aria-hidden":!0}),m.a.createElement(R.b,{type:"small-reaction",className:"c-reaction_add__icon c-reaction_add__icon--fg","aria-hidden":!0}))));return a?m.a.createElement(M.a,{onEmojiSelected:n,showHandyReactions:!0},i):i}L.defaultProps=F;var D=n("kOzZ"),U=n("KdfD"),B=n("cnLP"),q=n("qkTT"),H=n("FghR"),W=new O.b("messages"),G={channelId:d.b.string,anchorElement:d.b.instanceOf(Element),closeCoachmark:d.b.func,featureReactjiEducationTip:d.b.bool,clogger:d.b.object.isRequired},K={channelId:void 0,anchorElement:null,closeCoachmark:T.a,featureReactjiEducationTip:!1},V=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onCloseCoachmark=n.onCloseCoachmark.bind(n),n.onButtonClick=n.onButtonClick.bind(n),n}return u()(t,e),o()(t,[{key:"onCloseCoachmark",value:function(){var e=this.props,t=e.clogger,n=e.closeCoachmark;t.track("EDUCATION_IN_CONTEXT_MESSAGE_PANE",{contexts:{ui_context:{step:"whats_this_modal",step_variant:"reaction",action:"click",ui_properties:{element_type:"x"}}}}),n()}},{key:"onButtonClick",value:function(){var e=this.props,t=e.clogger,n=e.closeCoachmark;t.track("EDUCATION_IN_CONTEXT_MESSAGE_PANE",{contexts:{ui_context:{step:"whats_this_modal",step_variant:"reaction",action:"click",ui_properties:{element_type:"button"}}}}),n()}},{key:"render",value:function(){var e=this.props,t=e.featureReactjiEducationTip,n=e.anchorElement,a=e.isOpen;if(!t)return null;var r=W.rt("Say it faster with emoji <sparkles></sparkles>",null,function(e){var t=e.tag,n=e.key;return"sparkles"===t?m.a.createElement(q.b,{key:n,text:":sparkles:",emojiSize:q.a.MEDIUM}):null}),i=W.t("Emoji reactions are a quick way to respond in Slack without having to send a message.");return m.a.createElement("div",{className:"position_relative"},m.a.createElement(H.a,{anchorElement:n,isOpen:a,closeCoachmark:this.onCloseCoachmark,onClickPrimaryButton:this.onButtonClick,onClickSecondaryButton:this.sendMessage,primaryCallToActionText:W.t("Got It"),arrowPosition:50,offsetX:-140,offsetY:-10,orientation:"top"},m.a.createElement("h3",{className:"margin_bottom_50"},r),m.a.createElement("div",{className:"hidden"},W.t("Try It")),m.a.createElement("p",null,i)))}}]),t}(H.a);V.displayName="ReactionEducationCoachmark",V.propTypes=G,V.defaultProps=K;var z=Object(h.b)(function(e){return{featureReactjiEducationTip:Object(v.m)(e,"feature_reactji_education_tip"),clogger:Object(D.a)({state:e})}})(V),Y=(n("7HtE"),new O.b("reactions")),Q=(d.b.bool,d.b.func.isRequired,d.b.func.isRequired,d.b.object.isRequired,{UNOPENED:0,OPEN:1,CLOSED:2}),X=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onHelperNoteClick=n.onHelperNoteClick.bind(n),n.onEducationCoachmarkDismiss=n.onEducationCoachmarkDismiss.bind(n),n.state={coachmarkState:Q.UNOPENED},n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.props.setInProductCoachmarkAsSeen({notification:"reactji_awareness_coachmark",step:"tooltip"})}},{key:"onHelperNoteClick",value:function(){var e=this.props.clogger;this.state.coachmarkState===Q.UNOPENED&&(this.setState(function(){return{coachmarkState:Q.OPEN}}),this.props.setInProductCoachmarkAsSeen({notification:"reactji_awareness_coachmark",step:"dialog"}),e.track("EDUCATION_IN_CONTEXT_MESSAGE_PANE",{contexts:{ui_context:{step:"whats_this_pill",action:"click",step_variant:"reaction"}}}))}},{key:"onEducationCoachmarkDismiss",value:function(){this.setState(function(){return{coachmarkState:Q.CLOSED}}),this.props.setInProductCoachmark(null)}},{key:"render",value:function(){var e=this.props.featureReactjiEducationTip,t=this.state.coachmarkState;if(!e)return null;if(t!==Q.CLOSED){var n=m.a.createElement(z,{isOpen:t===Q.OPEN,closeCoachmark:this.onEducationCoachmarkDismiss});return m.a.createElement(B.b,{coachmarkElement:n,orientation:"top",key:"reaction_education_coachmark_anchor",style:{width:"100%",display:"inline"}},m.a.createElement(A.c,{className:"c-reaction_add__note",onClick:this.onHelperNoteClick,"data-qa":"reaction_education_note"},m.a.createElement(R.b,{type:"arrow-left","aria-hidden":!0}),Y.t("What\u2019s this?",{fallbackHash:"9082edb7e9cfc2988efd8e1a6e0a6f5c0487ee24",fallbackHashNs:"messages"})))}return null}}]),t}(p.Component);X.displayName="ReactionEducationTip",X.defaultProps={featureReactjiEducationTip:!1};var J={setInProductCoachmark:U.e,setInProductCoachmarkAsSeen:U.f},Z=Object(h.b)(function(e){return{featureReactjiEducationTip:Object(v.m)(e,"feature_reactji_education_tip"),clogger:Object(D.a)({state:e})}},J)(X),$=new O.b("reactions"),ee=(d.b.arrayOf(d.b.shape(N.b)),d.b.string,d.b.string,d.b.string,d.b.string,d.b.func.isRequired,d.b.bool,d.b.bool,d.b.string,d.b.bool,d.b.bool,function(e){function t(){r()(this,t);var e=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onAddReaction=e.onAddReaction.bind(e),e.onReactionClick=e.onReactionClick.bind(e),e.onReactionEmojiPickerSelected=e.onReactionEmojiPickerSelected.bind(e),e.onFocusEnter=e.onFocusEnter.bind(e),e.onFocusLeave=e.onFocusLeave.bind(e),e.state={hasKeyboardFocus:!1},e}return u()(t,e),o()(t,[{key:"onAddReaction",value:function(e){Object(C.a)({e:e,rxn_key:this.props.reactionKey})}},{key:"onReactionClick",value:function(e,t){var n=this.props.reactionKey;this.props.changeReactionFromUserAction({key:n,name:e,adding:!t})}},{key:"onReactionEmojiPickerSelected",value:function(e,t){this.onReactionClick(t)}},{key:"onFocusEnter",value:function(e){var t=e.relatedEvent;t&&"keydown"===t.type&&this.setState(function(){return{hasKeyboardFocus:!0}})}},{key:"onFocusLeave",value:function(){this.setState(function(){return{hasKeyboardFocus:!1}})}},{key:"render",value:function(){var e=this,t=this.props,n=t.reactions,a=t.reactionKey,r=t.currentUser,i=t.emojiMode,o=t.featureSonicEmoji,s=t.canReact,l=t.isLatestReactionInChannel,c=t.isInReactjiAwarenessTreatmentGroup,u=t.clientTheme;if(!n||0===n.length)return null;var d=n.map(function(t){var n=t.count,o=t.name,l=t.users,c=t.url;return m.a.createElement(N.a,{name:o,count:n,users:l,url:c,currentUser:r,key:o,reactionKey:a,onClick:e.onReactionClick,emojiMode:i,canReact:s,clientTheme:u})});s&&(d=d.concat(m.a.createElement(L,{onClick:this.onAddReaction,onEmojiSelected:this.onReactionEmojiPickerSelected,key:"reaction-add-button",featureSonicEmoji:o,clientTheme:u}))),s&&l&&c&&(d=d.concat(m.a.createElement(Z,{key:"reaction-education-tip"})));var p=f()(this.props.className,"c-reaction_bar",{"c-reaction_bar--focus":this.state.hasKeyboardFocus}),h=$.t("Reactions",{note:"Screenreader: Label for blind users"});return m.a.createElement(E.a,{onFocusEnter:this.onFocusEnter,onFocusLeave:this.onFocusLeave},m.a.createElement("div",{className:p,role:"group","aria-label":h},d))}}]),t}(m.a.PureComponent));ee.displayName="ReactionBar",ee.defaultProps={reactions:null,reactionKey:null,currentUser:null,className:null,emojiMode:null,featureSonicEmoji:!1,canReact:!0,clientTheme:"light",isLatestReactionInChannel:!1,isInReactjiAwarenessTreatmentGroup:!1};var te={changeReactionFromUserAction:_.a},ne=Object(h.b)(function(e,t){var n=t.reactionKey,a=t.isLatestReactionInChannel,r=Object(j.d)(n),i=r.entityId,o=r.channelId,s=!0;if(Object(j.e)(n)){var l=Object(I.a)(e,o,i);s=Object(S.e)(e,l)}var c=!1;return a&&(c="treatment"===Object(y.c)(e,"reactji_awareness_coachmark")),{canReact:s,reactions:Object(g.e)(e,n),currentUser:Object(v.c)(e),emojiMode:Object(k.h)(e),featureSonicEmoji:Object(v.m)(e,"feature_sonic_emoji"),featureReactjiEducationTip:Object(v.m)(e,"feature_reactji_education_tip"),clientTheme:Object(w.c)(e),isInReactjiAwarenessTreatmentGroup:c}},te)(ee);t.a=ne},p6QP:function(e,t,n){},pVvT:function(e,t,n){},peKf:function(e,t,n){"use strict";function a(e){var t=e.prevUserAttentionIsOnChat,n=e.prevComposerVisible,a=e.currentUserAttentionIsOnChat,r=e.currentComposerVisible;return!(t||!a||r)||!(!n||r||!a)}n.d(t,"a",function(){return a})},pic6:function(e,t,n){},"plp+":function(e,t,n){},pmpI:function(e,t,n){},qMiJ:function(e,t,n){},qOjI:function(e,t,n){"use strict";var a=n("UXvI"),r=n("yHhI"),i=n("lhZz"),o=n("Smdl"),s=n("vWCh");function l(e){var t=Object(o.a)()?Object(i.getClientStoreInstance)():Object(i.getStoreInstanceByTeamId)(e),n=Object(o.a)()?Object(r.b)():Object(r.a)({teamId:e});t?(n.info("NETWORK-CONNECTIVITY","Received offline event! Upserting that the client is offline."),t.dispatch(Object(s.a)(!1))):n.warn("NETWORK-CONNECTIVITY","Received offline event, but no store found.")}function c(e){var t=Object(o.a)()?Object(i.getClientStoreInstance)():Object(i.getStoreInstanceByTeamId)(e),n=Object(o.a)()?Object(r.b)():Object(r.a)({teamId:e});t?(n.info("NETWORK-CONNECTIVITY","Received online event! Upserting that the client is online."),t.dispatch(Object(s.a)(!0))):n.warn("NETWORK-CONNECTIVITY","Received online event, but no store found.")}t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=Object(a.a)(l.bind(null,e),500,{leading:!1});window.addEventListener("offline",t),window.addEventListener("online",function(){return t.cancel(),c(e)})}},qPro:function(e,t,n){"use strict";var a=n("ZHrX");t.a=a.a},qSXi:function(e,t,n){"use strict";var a=n("QbLZ"),r=n.n(a),i=n("negh"),o=n("n2GJ");function s(e){return r()({id:e.id,appId:e.app.id,name:e.name,description:e.app.name,iconSet:e.app.icons||{},uiElement:i.UiElement.APP_ACTION_BUTTON,"data-qa":"app_action_"+e.id},Object(o.e)(e))}var l=n("NFsq"),c=n("c8Bs"),u=n("/X+W");function d(e,t){if(!e)return!1;var n=Object(u.a)(e.name);if(!n)return!1;var a=Object(u.a)(e.description),r=t.split(/\s+/);return Object(c.a)(r,function(e){return Object(l.a)(n,e)||Object(l.a)(a,e)})}n.d(t,"a",function(){return s}),n.d(t,"b",function(){return d})},qTUc:function(e,t,n){},qYtJ:function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("wBxZ"),p=n("GxtX"),m=n("zmn3"),h=n("BeL+"),b=n("uXhx"),f=n("qAkX"),g=n("ifKl"),_=n("aK/h"),v=n("kxpR"),y=n.n(v),k=n("XHGt"),O=n("TSYQ"),C=n.n(O),E=n("t85p"),j=n("XL7r"),S=n("nNoG"),I=n("yt6e"),w=n("qc8s"),N=n("oW4N"),T=n("/k8D"),A=n("VyaM"),R=new S.b("threads");var P=n("3dqR"),M=n("od5y"),x=n("lwWk"),F=n("Fdc0"),L=n("2Zgd"),D=n("J9z2"),U=new S.b("threads"),B=(_.b.array,_.b.number.isRequired,_.b.arrayOf(_.b.string),_.b.number,_.b.string,_.b.string.isRequired,_.b.string.isRequired,_.b.bool,_.b.func,_.b.bool,_.b.bool,_.b.string,_.b.string,{replies:null,do24hrTime:!1,replyUsers:[],replyUsersCount:0,latestReply:null,showThreadIfThreadable:g.a,featureNewRepliesAfterBcast:!1,isThreadExpanded:void 0,threadListId:void 0,className:void 0}),q=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.openThread=n.openThread.bind(n),n.onFocusEnter=n.onFocusEnter.bind(n),n.onFocusLeave=n.onFocusLeave.bind(n),n.state={hasKeyboardFocus:!1},n}return u()(t,e),o()(t,[{key:"onFocusEnter",value:function(e){var t=e.relatedEvent;t&&"keydown"===t.type&&this.setState(function(){return{hasKeyboardFocus:!0}})}},{key:"onFocusLeave",value:function(){this.setState(function(){return{hasKeyboardFocus:!1}})}},{key:"getLastReplyTs",value:function(){if(this.props.latestReply)return this.props.latestReply;if(this.props.replies){var e=Object(f.a)(this.props.replies);if(e)return e.ts}return null}},{key:"openThread",value:function(e){e.preventDefault(),this.props.showThreadIfThreadable({channelId:this.props.channelId,threadTs:this.props.threadTs,requestFocus:this.state.hasKeyboardFocus})}},{key:"renderFaces",value:function(){var e=this,t=void 0;t=this.props.replyUsers&&this.props.replyUsers.length?Object(b.a)(this.props.replyUsers,function(e){return"B00"===e}):Object(h.a)(Object(b.a)(Object(m.a)(this.props.replies,"user"),function(e){return"B00"===e}));var n=this.props.replyUsersCount?this.props.replyUsersCount:t.length;return t.length>5?Object(p.a)(Object(m.a)(Object(d.a)(t,4),function(t){return e.renderSingleAvatar(t)}),this.renderSingleAvatar(t[4],n-5)):Object(m.a)(t,function(t){return e.renderSingleAvatar(t)})}},{key:"renderSingleAvatar",value:function(e,t){var n=Object(D.a)(e),a=!Object(F.nb)({id:e});return y.a.createElement(P.c,{key:e,userId:n?null:e,botId:n?e:null,size:24,additionalOverlay:t,showCard:!0,isInteractive:a})}},{key:"render",value:function(){var e=this.props,t=e.replyCount,n=e.channelId,a=e.threadTs,r=e.do24hrTime,i=e.featureNewRepliesAfterBcast,o=e.isThreadExpanded,s=U.t("{replyCount, plural, =1 {# reply} other {# replies}}",{replyCount:t}),l=Object(L.b)(n,a),c=this.getLastReplyTs(),u="";u=i?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.latestReply,n=e.replyCount,a=e.do24hrTime;return Object(T.a)(Object(A.a)(t),new Date)?1===n?R.t("Today at {time}",{time:Object(w.a)(t,{do24hrTime:a})}):R.t("Last reply today at {time}",{time:Object(w.a)(t,{do24hrTime:a})}):1===n?Object(N.a)(t):R.t("Last reply {time_ago}",{time_ago:Object(N.a)(t)})}({latestReply:c,replyCount:t,do24hrTime:r}):Object(T.a)(Object(A.a)(c),new Date)?1===t?U.t("Today at {time}",{time:Object(w.a)(c,{do24hrTime:r})}):U.t("Last reply today at {time}",{time:Object(w.a)(c,{do24hrTime:r})}):1===t?Object(N.a)(c):U.t("Last reply {time_ago}",{time_ago:Object(N.a)(c)});var d=C()("c-message__reply_bar",this.props.className,{"c-message__reply_bar--focus":this.state.hasKeyboardFocus}),p=!0===o?this.props.threadListId:void 0;return y.a.createElement(I.a,{onFocusEnter:this.onFocusEnter,onFocusLeave:this.onFocusLeave},y.a.createElement("div",{role:"presentation",className:d,onClick:this.openThread,"data-qa":"reply_bar"},this.renderFaces(),y.a.createElement(x.a,{className:"c-message__reply_count",href:l,target:"_blank",rel:"noopener noreferrer","aria-expanded":o,"aria-controls":p},s),y.a.createElement("div",{className:"c-message__reply_bar_description"},y.a.createElement("span",{className:"c-message__reply_bar_last_reply"},u),y.a.createElement("span",{className:"c-message__reply_bar_view_thread"},U.t("View thread"))),y.a.createElement(M.a,{type:"chevron_right",className:"c-message__reply_bar_arrow",align:"baseline","aria-hidden":!0})))}}]),t}(y.a.PureComponent);q.displayName="ReplyBar",q.defaultProps=B;t.a=Object(k.b)(function(e){return{do24hrTime:Object(j.j)(e,"time24"),featureNewRepliesAfterBcast:Object(E.m)(e,"feature_new_replies_after_bcast")}})(q)},qcAq:function(e,t,n){"use strict";var a=n("aK/h"),r=n("XfeM"),i=n("mly0"),o=n("t85p"),s=n("rtjy"),l=n("yPgC"),c=Object(r.b)("Record a frecency event for some message action + maybe a query",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.action,r=n.query,l=void 0===r?"":r,c=a.frecencyId;Object(o.m)(t(),"feature_app_actions_fe_refactor")?e(Object(s.c)({id:c,text:l})):Object(i.c)({id:c},l)});c.meta={name:"recordMessageActionFrecencyEvent",key:"actionsRecordMessageActionFrecencyEventRecordMessageActionFrecencyEvent",description:"Record a frecency event for some message action + maybe a query"},c.propTypes={action:l.a.MessageAction.isRequired,query:a.b.string},t.a=c},qfOp:function(e,t,n){},qiqk:function(e,t,n){},qnZ7:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var a=n("0wDQ"),r=n("XRnC"),i=n("fYfO"),o=n("PxLB");function s(e,t){return function(n,s){var l=Object(i.a)(s(),e,t);if(l){n(Object(a.a)({channelId:e,ts:t})),n(Object(r.d)(l,t));n(Object(o.a)({channelId:e,msg:l,resent:!0}))}}}},qqis:function(e,t,n){},qrk6:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var a=n("x91h"),r=n("nNoG"),i=n("CSaH"),o=n("QLyv"),s=n("VyaM"),l=n("/k8D"),c=n("aLpA"),u=new r.b("aria_msg_summary");function d(e){if(!e)return null;var t=[],n=e.featureA11yMessageSummary,r=e.viewContext,d=e.day,p=d.isFirstDay,m=d.isLastDay,h=e.day.ts/1e3,b=Object(o.a)(),f=Object(o.a)(b).subtract(1,"days"),g=Object(s.a)(h,{returnMoment:!0}),_=Object(l.a)(b,g),v=Object(l.a)(f,g),y=h&&Object(i.a)(h,"{day_divider_pretty}"),k=!r||[c.H.MESSAGE_PANE,c.H.THREADS_FLEXPANE,c.H.THREADS_VIEW,c.H.UNREAD_VIEW].includes(r);return e.isFirstMsgForDay&&!e.isLastMsgForDay&&!p&&k&&(_?t.push(u.t("First message from today.",{day:y})):v?t.push(u.t("First message from yesterday.",{day:y})):t.push(u.t("First message from {day}.",{day:y}))),e.isLastMsgForDay&&!e.isFirstMsgForDay&&!m&&k&&(_?t.push(u.t("Last message from today.",{day:y})):v?t.push(u.t("Last message from yesterday.",{day:y})):t.push(u.t("Last message from {day}.",{day:y}))),(e.isLastMsgForDay&&e.isFirstMsgForDay&&!m&&!p||!k)&&(_?t.push(u.t("Message from today.",{day:y})):v?t.push(u.t("Message from yesterday.",{day:y})):t.push(u.t("Message from {day}.",{day:y}))),e.isFirstUnreadMsg&&k&&t.push(u.t("First unread message.")),e.isTombstone||t.push(u.t("{name} at {time}.",{name:e.name,time:e.time})),e.isEKMOrDLPTombstone&&t.push(e.name),e.channelName&&!k&&t.push(n?u.t("In {channel}.",{channel:e.channelName}):e.channelName),t.push(e.text),e.reactionCount>0&&!e.isTombstone&&t.push(u.t("{count, plural, =1 {# reaction} other {# reactions}}.",{count:e.reactionCount})),e.replyCount>0&&t.push(u.t("{count, plural, =1 {# reply} other {# replies}}.",{count:e.replyCount})),e.isStarred&&r!==c.H.STARS_FLEXPANE&&t.push(u.t("Message is starred.")),e.isPinned&&r!==c.H.PINS_FLEXPANE&&t.push(u.t("Message is pinned.")),e.isEdited&&t.push(n?u.t("Message is edited.",{note:"Part of the description for customers using screen readers: indicates that a message has been edited"}):"Message is edited."),e.attachmentCount>0&&t.push(u.t("{count, plural, =1 {# attachment} other {# attachments}}.",{count:e.attachmentCount})),e.attachmentTexts&&e.attachmentTexts.length>0&&(t=t.concat(e.attachmentTexts)),Object(a.a)(t.join(" "))}},"r/YP":function(e,t,n){},r6UO:function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("kxpR"),p=n.n(d),m=(n("aK/h"),n("O0RF")),h=n("Rszm"),b=n("nNoG"),f=(n("yWse"),new b.b("file-upload")),g=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleChange=n.handleChange.bind(n),n}return u()(t,e),o()(t,[{key:"handleChange",value:function(e){var t=e.target.checked;this.props.onChange(t)}},{key:"render",value:function(){var e=this.props,t=e.channelType,n=e.selectedChannelName,a=e.value,r="";return r="mpim"===t?f.t("Also send to the group"):"im"===t?f.t("Also send as direct message"):f.rt("Also send to <span></span>",null,function(){return p.a.createElement("span",{className:"p-file_upload_dialog__broadcast_channel_name"},n)}),p.a.createElement(m.a,{text:r,className:"p-file_upload_dialog__broadcast_label",htmlFor:"file-upload-broadcast-to-channel",type:"inline"},p.a.createElement(h.a,{className:"p-file_upload_dialog__broadcast_checkbox","data-qa":"file_upload_broadcast_checkbox",id:"file-upload-broadcast-to-channel",checked:a,onChange:this.handleChange}))}}]),t}(d.PureComponent);g.displayName="FileUploadBroadcastCheckbox",t.a=g},rCFu:function(e,t,n){"use strict";n.d(t,"c",function(){return b}),n.d(t,"b",function(){return f}),n.d(t,"a",function(){return g}),n.d(t,"f",function(){return _}),n.d(t,"g",function(){return v}),n.d(t,"i",function(){return y}),n.d(t,"j",function(){return k}),n.d(t,"h",function(){return O}),n.d(t,"d",function(){return j}),n.d(t,"e",function(){return I});var a=n("QbLZ"),r=n.n(a),i=n("kOzZ"),o=n("Smdl"),s=n("g5qt"),l=n("Zr7G"),c=n("lhZz"),u=n("U28S"),d=n("Z7Ay"),p=n("eK5+"),m=n("negh"),h=n("nNoG"),b=0,f=1,g=2;function _(e,t,n,a,s,d,p,_){if(I(s,d,m.EventId.PRQ_CHANNEL_SWITCH_USABLE)){var v=void 0,y=void 0;switch(a){case b:default:v=m.TimingStatus.COMPLETED,y=!1;break;case f:v=m.TimingStatus.ABANDONED,y=!0;break;case g:v=m.TimingStatus.COMPLETED,y=!0}var k=Object(u.b)(1e3*e*1e3,0),O=r()({elapsed_time:k,target_channel_id:n,required_sync:y,end_state:v},C(p,t,_)),E={userId:_,teamId:s,enterpriseId:d,locale:Object(h.r)()};Object(i.a)(E).track(m.EventId.PRQ_CHANNEL_SWITCH_USABLE,O);var j=Object(c.getStoreInstanceByTeamId)(s),S=j&&j.getState(),w=Object(o.a)()?"channel_switch_usable_sonic":"channel_switch_usable_legacy";Object(l.c)({state:S}).store(w,Math.round(e))}}function v(e,t,n,a,s,d,p,_){if(I(s,d,m.EventId.PRQ_CHANNEL_SWITCH_VISIBLE)){var v=void 0,y=void 0;switch(a){case b:default:v=m.TimingStatus.COMPLETED,y=!1;break;case f:v=m.TimingStatus.ABANDONED,y=!0;break;case g:v=m.TimingStatus.COMPLETED,y=!1}var k=Object(u.b)(1e3*e*1e3,0),O=r()({elapsed_time:k,target_channel_id:n,required_sync:y,end_state:v},C(p,t,_)),E={userId:_,teamId:s,enterpriseId:d,locale:Object(h.r)()};Object(i.a)(E).track(m.EventId.PRQ_CHANNEL_SWITCH_VISIBLE,O);var j=Object(c.getStoreInstanceByTeamId)(s),S=j&&j.getState(),w=Object(o.a)()?"channel_switch_visible_sonic":"channel_switch_visible_legacy";Object(l.c)({state:S}).store(w,Math.round(e))}}function y(e,t,n,a,o,s,l,c){if(I(a,o,m.EventId.PRQ_TIME_TO_USABLE)){var d=Object(u.b)(1e3*e*1e3,0),p=E(),b=r()({elapsed_time:d+p,desktop_elapsed_time:p,required_sync:n,end_state:c,start_type:m.MetricStartType.COLD,target_type:m.MetricTargetType.CHANNEL},C(s,t,l)),f={userId:l,teamId:a,enterpriseId:o,locale:Object(h.r)()};Object(i.a)(f).track(m.EventId.PRQ_TIME_TO_USABLE,b)}}function k(e,t,n,a,o,s,l){if(I(a,o,m.EventId.PRQ_TIME_TO_VISIBLE)){var c=Object(u.b)(1e3*e*1e3,0),d=E(),p=r()({elapsed_time:c+d,desktop_elapsed_time:d,required_sync:n,end_state:m.TimingStatus.COMPLETED,start_type:m.MetricStartType.COLD,target_type:m.MetricTargetType.CHANNEL},C(s,t,l)),b={userId:l,teamId:a,enterpriseId:o,locale:Object(h.r)()};Object(i.a)(b).track(m.EventId.PRQ_TIME_TO_VISIBLE,p)}}function O(e,t,n,a,o,s,l){if(I(a,o,m.EventId.PRQ_SESSION_FRAME_STATS)){var c=r()({duration_ms:e,sample_filter:"entire_session",hist_frame_render_time:t,hist_janky_windows:n},C(s,void 0,l)),u={userId:l,teamId:a,enterpriseId:o,locale:Object(h.r)()};Object(i.a)(u).track(m.EventId.PRQ_SESSION_FRAME_STATS,c)}}function C(e,t,n){var a="string"==typeof n&&n.startsWith("W"),i={device:{id:"",make:navigator.platform,model:navigator.platform,os:s.Q?"electron":"webapp",os_version:s.Ib||""}},l=void 0;if(t)switch(i.ui_context={action:"QUICK_SWITCH"===t?"keydown":"click",ui_component:t},t.toUpperCase()){case"APP_ICON":l=m.MetricTrigger.APP_ICON;break;case"MSG_PANE":l=m.MetricTrigger.MSG_PANE;break;case"SIDE_BAR":l=m.MetricTrigger.SIDE_BAR;break;case"QUICK_SWITCH":l=m.MetricTrigger.QUICK_SWITCH;break;default:l=m.MetricTrigger.UNKNOWN}var c=r()({contexts:i,session_id:e,time:Date.now(),app_id:Object(o.a)()?"web_sonic":"web",is_tablet:!1,user_id:a?void 0:n,external_id:a?n:void 0},S());return t&&(c.trigger=l),c}function E(){if(s.Q){var e=Object(s.D)();if(e&&void 0!==e.numTeamsAtLaunch&&void 0!==e.isInitialTeamBooted&&e.numTeamsAtLaunch>0&&e.isInitialTeamBooted){var t=e.BOOT,n=e.PRELOAD_READY,a=Object(s.c)(t,n);return a>0?1e6*a:0}}return 0}function j(){if(s.Q){var e=Object(s.D)();if(e&&void 0!==e.numTeamsAtLaunch&&void 0!==e.isInitialTeamBooted&&e.numTeamsAtLaunch>0){var t=e.PRELOAD_STARTED,n=e.PRELOAD_READY,a=Object(s.c)(t,n);return Math.floor(a)}}return 0}function S(){if(s.Q){var e=Object(s.r)();if(e){var t=e.prerelease?" ("+e.prerelease+")":"",n=void 0;switch("string"==typeof e.prerelease?e.prerelease.match(/(alpha|beta|electron3|sonic)/i)&&e.prerelease.match(/(alpha|beta|electron3|sonic)/i)[1]:"production"){case"alpha":case"electron3":n=m.ClientBuildType.ALPHA;break;case"beta":n=m.ClientBuildType.BETA;break;default:n=m.ClientBuildType.PRODUCTION}return{app_version:e.major+"."+e.minor+"."+e.patch+t,release_version:e.major+"."+e.minor+"."+e.patch,build_type:n}}}return{app_version:"",release_version:"",build_type:m.ClientBuildType.PRODUCTION}}function I(e,t,n){return!(!["E12KS1G65"].includes(t)&&!["T024BE7LD","T5J4Q04QG"].includes(e))||(!(!["E27SFGS2W","E655JKQRX","E7RBBBXHB","E23RHNDU5","E5BRU6WAE","E4XV0NYS0","E7AN7J5RP","E3T9KQULR","E23RE8G4F","E46RWAPHC","E6GDLMBCM","E3U2DUYG4","E783C7HT4","E8YCM8N9L","E30MTJF0C","E4BGDDU1H","E56KHGV6G","E7U335QS3","E8RLKB40H","E61V1AN6R","E7SV3P9PU","E3ZLD3D42"].includes(t)||!Object(p.a)(10))||(!(!["E27SFGS2W"].includes(t)||![m.EventId.PRQ_TIME_TO_USABLE,m.EventId.PRQ_TIME_TO_VISIBLE].includes(n))||(!![m.EventId.PRQ_TIME_TO_USABLE,m.EventId.PRQ_TIME_TO_VISIBLE].includes(n)||(m.EventId.PRQ_SESSION_FRAME_STATS,Object(p.a)(10)))))}Object(d.a)("prq",{getDesktopElapsedTime:E,getDesktopPreloadTime:j,getElectronInfo:S})},rqkC:function(e,t,n){},"s/YD":function(e,t,n){"use strict";n.d(t,"a",function(){return q});var a=n("jo6Y"),r=n.n(a),i=n("QbLZ"),o=n.n(i),s=n("iCc5"),l=n.n(s),c=n("V7oC"),u=n.n(c),d=n("FYw3"),p=n.n(d),m=n("mRg0"),h=n.n(m),b=n("vJtL"),f=n("ifKl"),g=n("kxpR"),_=n.n(g),v=n("XHGt"),y=n("TSYQ"),k=n.n(y),O=n("tn36"),C=n("aK/h"),E=n("dxEi"),j=n("tbBR"),S=n("4EIq"),I=n("cD5Y"),w=n("533h"),N=n("SAUz"),T=n("VymY"),A=n("/Rx2"),R=n("2jER"),P=n("Smdl"),M=n("quKg"),x=n("Srcy"),F=n("a+Oh"),L=n("peKf"),D=n("SNtu"),U=n("Lev8"),B=n("kcos"),q=(n("JlHJ"),{offsetX:24,offsetY:134}),H=function(e){var t=e&&e.current||e;if(t){var n=Object(b.a)(t.getWrappedInstance)?t.getWrappedInstance():t;if(n)return Object(b.a)(n.focus)?n:void 0}},W=(C.b.string,C.b.string,C.b.string,C.b.bool,C.b.bool,C.b.bool,C.b.func,C.b.func,C.b.func.isRequired,C.b.func,C.b.func,C.b.func,C.b.func,C.b.node.isRequired,C.b.string.isRequired,C.b.number,C.b.string,C.b.object,C.b.bool,C.b.bool,C.b.func,C.b.string,C.b.bool,C.b.func,C.b.func,C.b.func,{className:void 0,bodyClassName:void 0,flexOrigin:void 0,isEmpty:!1,isOffline:!1,isLoading:!1,onBlur:f.a,onFocus:f.a,renderEmpty:f.a,renderControls:f.a,renderSubtitle:f.a,onOptionsClick:void 0,kbNavOrder:void 0,dataQa:void 0,headerProps:{},userAttentionIsOnChat:!1,composerVisible:!1,focus:void 0,removeFromSectionNavigation:f.a,addToSectionNavigation:f.a,setInitialActiveSection:f.a,clientTheme:"light",isIAP1Enabled:!1}),G=function(e){function t(e){l()(this,t);var n=p()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(O.a)(n,["focus","blur","setInitialActiveSection"]),n.flexpaneBodyRef=_.a.createRef(),n.flexpaneHeaderRef=_.a.createRef(),n}return h()(t,e),u()(t,[{key:"componentDidUpdate",value:function(e){var t={prevUserAttentionIsOnChat:e.userAttentionIsOnChat,prevComposerVisible:e.composerVisible,currentUserAttentionIsOnChat:this.props.userAttentionIsOnChat,currentComposerVisible:this.props.composerVisible};Object(L.a)(t)&&this.props.addToSectionNavigation(),Object(D.a)(t)&&this.props.removeFromSectionNavigation()}},{key:"setInitialActiveSection",value:function(){this.props.setInitialActiveSection()}},{key:"focusCloseButton",value:function(){var e=H(this.flexpaneHeaderRef);e&&e.focus()}},{key:"focusItemInBody",value:function(){var e=H(this.flexpaneBodyRef);if(e){var t=Object(T.a)(e)[0];t&&t.focus()}}},{key:"focus",value:function(){var e=this.props,t=e.isEmpty,n=e.focus,a=e.onFocus;t?this.focusCloseButton():(n?n():this.focusItemInBody(),Object(P.a)()||a())}},{key:"blur",value:function(){document.activeElement.blur(),Object(P.a)()||this.props.onBlur()}},{key:"isLoading",value:function(){var e=this.props,t=e.isLoading,n=e.isOffline;return t&&!n}},{key:"renderBody",value:function(){var e=this.props,t=e.isEmpty,n=e.isOffline,a=e.renderBody,r=e.renderEmpty;return t?this.isLoading()?null:r({isOffline:n}):a()}},{key:"renderSubtitle",value:function(){var e=this.props,t=e.renderSubtitle;if(e.isIAP1Enabled)return null;var n=t();return n?_.a.createElement("div",{className:"p-flexpane__subtitle","data-qa":"subtitle"},n):null}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.bodyClassName,a=e.flexOrigin,r=e.isEmpty,i=e.onOptionsClick,s=e.title,l=e.viewId,c=e.kbNavOrder,u=e.dataQa,d=e.renderControls,p=e.headerProps,m=e.clientTheme,h=e.isIAP1Enabled,b=_.a.createElement(j.a,{id:l},_.a.createElement("div",{"data-qa":u,className:k()("p-flexpane",{"p-flexpane--iap1":h},t)},_.a.createElement(w.a,o()({ref:this.flexpaneHeaderRef,onOptionsClick:i,renderSecondary:d,clientTheme:m},p),!h&&_.a.createElement(N.a,{flexOrigin:a,size:"medium"}),_.a.createElement("div",{className:"p-flexpane__title_container"},s,this.renderSubtitle())),_.a.createElement("div",{ref:this.flexpaneBodyRef,className:k()("p-flexpane__body",n,"p-flexpane__body--"+m,{"p-flexpane__body--empty":r&&!this.isLoading(),"p-flexpane__body--empty_loading":r&&this.isLoading()})},this.isLoading()&&_.a.createElement("div",{className:"p-flexpane__floating_loader","data-qa":"floating_loader"},_.a.createElement(I.a,{size:"medium",noMargin:!0})),this.renderBody())));return Object(P.a)()?b:_.a.createElement(S.a,{component:this,order:c},b)}}]),t}(_.a.Component);G.displayName="Flexpane",G.defaultProps=W;var K=Object(P.a)()?Object(R.a)(G,"Flexpane",{index:1}):G,V=Object(v.b)(function(e){return{isOffline:!Object(E.c)(e),userAttentionIsOnChat:Object(A.e)(e),composerVisible:(Object(F.a)(e)||"composer_toolbar"===Object(M.c)(e,"composer_toolbar"))&&Object(x.b)(e),clientTheme:Object(U.c)(e),isIAP1Enabled:Object(B.b)(e)}},null,null,{pure:!1})(function(e){var t=e.forwardedRef,n=r()(e,["forwardedRef"]);return _.a.createElement(K,o()({ref:t},n))});t.b=_.a.forwardRef(function(e,t){return _.a.createElement(V,o()({forwardedRef:t},e))})},sQIv:function(e,t,n){},sUzI:function(e,t,n){},skMg:function(e,t,n){},t5GV:function(e,t,n){},tBeP:function(e,t,n){"use strict";var a=n("kxpR"),r=n.n(a),i=n("aK/h"),o=n("dhvi"),s=n("XfeM"),l=n("iCc5"),c=n.n(l),u=n("V7oC"),d=n.n(u),p=n("FYw3"),m=n.n(p),h=n("mRg0"),b=n.n(h),f=n("ifKl"),g=n("fujP"),_=n("TSYQ"),v=n.n(_),y=n("nNoG"),k=n("aolG"),O=n("0f2Y"),C=n("XLFM"),E=n("rJQH"),j=n("P8Y3"),S=n("O0RF"),I=n("Rszm"),w=n("RAhH"),N=n("cD5Y"),T=n("g0Ht"),A=n("QbLZ"),R=n.n(A),P=n("bPB8"),M=n("XHGt"),x=n("tn36"),F=n("81jb"),L=n("4qCO"),D=n("4M+g"),U=n("7oqf"),B=n("t85p"),q=n("6kok"),H=n("vmJv"),W=n("G4ux"),G=n("Qrgz"),K=n("od5y"),V=n("4Twu"),z=new y.b("app_management_modal"),Y=(i.b.object.isRequired,i.b.func.isRequired,i.b.string,i.b.bool,i.b.bool,function(e){function t(e){c()(this,t);var n=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleRemove=n.handleRemove.bind(n),n}return b()(t,e),d()(t,[{key:"handleRemove",value:function(){var e=this.props,t=e.channel.id;(0,e.onRemove)(t)}},{key:"render",value:function(){var e=this.props,t=e.channel,n=e["data-qa"],a=e.featureWtaModalM11n,i=e.canBeRemovedFromChannel;return a?r.a.createElement("li",{className:"p-app_management_modal__channel_list_item padding_top_50 padding_bottom_50","data-qa":n},r.a.createElement(V.a,{className:"flex_one",channel:t,inheritPresenceIconSize:!0}),i&&r.a.createElement(C.c,{className:"p-app_management_modal__channel_list_item_remove position_relative","aria-label":z.t("Remove app from channel"),onClick:this.handleRemove,"data-qa":n+"_remove"},r.a.createElement(K.b,{inline:!0,type:"times-circle"}))):r.a.createElement("li",{className:"p-app_management_modal__channel_list_item","data-qa":n},r.a.createElement(V.a,{className:"flex_one",channel:t,inheritPresenceIconSize:!0}),i&&r.a.createElement(K.a,{className:"p-app_management_modal__channel_list_item_remove position_relative justify_content_end cursor_pointer",type:"times-circle",onClick:this.handleRemove,"data-qa":n+"_remove"}))}}]),t}(a.PureComponent));Y.displayName="AppChannelListItem",Y.displayName="AppChannelListItem",Y.defaultProps={"data-qa":"app_channel_list_item",featureWtaModalM11n:!1,canBeRemovedFromChannel:!1};var Q=Y,X=n("jo6Y"),J=n.n(X),Z=n("kX2h"),$=new y.b("app_management_modal"),ee=(i.b.bool,i.b.bool,i.b.func.isRequired,i.b.string.isRequired,function(e){function t(e){c()(this,t);var n=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(x.a)(n,["buildChannelOptions","optionsFetcher","setSelectorReference","scrollSelectorIntoView"]),n}return b()(t,e),d()(t,[{key:"componentDidMount",value:function(){if(this.selector){var e=this.selector.focusSelectInput;e&&e()}}},{key:"componentWillUnmount",value:function(){clearTimeout(this.mobileKeyboardTimeout)}},{key:"setSelectorReference",value:function(e){this.selector=e}},{key:"buildChannelOption",value:function(e){return{label:r.a.createElement(V.a,{className:"p-app_management_modal__channel_selector_item",channel:e,inheritPresenceIconSize:!0}),value:e.id}}},{key:"buildChannelOptions",value:function(e){return{options:e.map(this.buildChannelOption)}}},{key:"scrollSelectorIntoView",value:function(){if(this.selector){var e=this.selector.select;e&&e.wrapper&&(this.mobileKeyboardTimeout=setTimeout(function(){e.wrapper.scrollIntoView()},this.props.isMobile?200:0))}}},{key:"optionsFetcher",value:function(e){var t=this.props,n=t.forExclusions,a=t.serviceId;return this.props.searchChannelsForApp({query:e,forExclusions:n,serviceId:a}).then(this.buildChannelOptions).tap(this.scrollSelectorIntoView)}},{key:"render",value:function(){var e=this.props,t=(e.serviceId,e.forExclusions,e.searchChannelsForApp,e.isMobile),n=J()(e,["serviceId","forExclusions","searchChannelsForApp","isMobile"]),a=t?36:28;return r.a.createElement(Z.a,R()({},n,{innerRef:this.setSelectorReference,optionsFetcher:this.optionsFetcher,prefetchOptions:!0,className:"p-app_management_modal__channel_selector_input",isAlwaysOpen:!0,optionsListWidth:220,optionsRowHeight:a,placeholder:$.t("Find a channel"),type:"short",usePlaceholderOption:!1,wrapperClassName:"p-app_management_modal__channel_selector"}))}}]),t}(a.PureComponent));ee.displayName="AppChannelListSelector";var te={searchChannelsForApp:U.j};ee.defaultProps={forExclusions:!1,isMobile:!1};var ne=Object(M.b)(null,te)(ee),ae=new y.b("app_management_modal"),re=(i.b.string.isRequired,i.b.string.isRequired,i.b.string.isRequired,i.b.array,i.b.number,i.b.func.isRequired,i.b.func.isRequired,i.b.string,i.b.bool,i.b.bool,i.b.string.isRequired,i.b.bool,i.b.bool,function(e){function t(e){c()(this,t);var n=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={showChannelSelector:!1},Object(x.a)(n,["handleAddChannel","toggleChannelSelector"]),n}return b()(t,e),d()(t,[{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout)}},{key:"setSelectorInputReference",value:function(e){this.selectorInput=e}},{key:"toggleChannelSelector",value:function(){this.setState(function(e){return{showChannelSelector:!e.showChannelSelector}})}},{key:"handleAddChannel",value:function(e){(0,this.props.onAddChannel)(e),this.toggleChannelSelector()}},{key:"renderHiddenChannelCountText",value:function(){var e=this.props,t=e.channels,n=e.hiddenChannelCount;return t.length>0?ae.t("...and {hiddenChannelCount, plural, =1 {# other private conversation} other {# other private conversations}}",{hiddenChannelCount:n}):ae.t("{hiddenChannelCount, plural, =1 {# private conversation} other {# private conversations}}",{hiddenChannelCount:n})}},{key:"renderListItems",value:function(){var e=this.props,t=e.channels,n=e.emptyListText,a=e.featureWtaModalM11n,i=e.hiddenChannelCount,o=e.canBeRemovedFromChannel,s=e.onRemoveChannel,l=e["data-qa"];if(0===t.length&&0===i)return r.a.createElement("li",{className:"p-app_management_modal__channel_list_item sk_foreground_high","data-qa":l+"_empty_message"},n);var c=Object(P.a)(t).map(function(e){return r.a.createElement(Q,{key:e.id,channel:e,canBeRemovedFromChannel:o,onRemove:s,"data-qa":l+"_channel_"+e.id,featureWtaModalM11n:a})});return i>0&&c.push(r.a.createElement("li",{key:"0",className:"p-app_management_modal__channel_list_item","data-qa":l+"_hidden_channels_message"},this.renderHiddenChannelCountText())),c}},{key:"renderChannelSelector",value:function(){var e=this.props,t=e.buttonText,n=e["data-qa"],a=e.isMobile,i=e.forExclusions,o=e.serviceId,s=this.state.showChannelSelector;return r.a.createElement("div",{className:"position_relative"},r.a.createElement(C.d,{className:"p-app_management_modal__channel_list_add",type:"outline",size:"small",onClick:this.toggleChannelSelector,"data-qa":n+"_button"},t),s&&r.a.createElement(ne,{onChange:this.handleAddChannel,onOutsideClick:this.toggleChannelSelector,"data-qa":n+"_selector",isMobile:a,forExclusions:i,serviceId:o}))}},{key:"render",value:function(){var e=this.props,t=e.headerText,n=e["data-qa"];return r.a.createElement(F.a,{className:"p-app_management_modal__card","data-qa":n},r.a.createElement(F.b,{className:"p-app_management_modal__card_header"},r.a.createElement("strong",{className:"flex_one align_self_center margin_right_50"},t),this.renderChannelSelector()),r.a.createElement(F.c,{className:"no_margin no_padding"},r.a.createElement("ul",{className:"no_margin p-app_management_modal__channel_list"},this.renderListItems())))}}]),t}(a.PureComponent));re.displayName="AppChannelList";var ie=function(e,t){return Object(L.a)(Object(q.w)(e),Object(q.w)(t))},oe=function(e,t){return Object.keys(e).map(function(e){return Object(D.e)(t,e)}).filter(function(e){return!Object(q.X)(e)&&!Object(q.Mb)(e)}).sort(ie)};re.defaultProps={channels:[],hiddenChannelCount:0,"data-qa":"app_channel_list",isMobile:!1,forExclusions:!1,featureWtaModalM11n:!1,canBeRemovedFromChannel:!1};var se=Object(M.b)(function(e,t){var n=t.forExclusions,a=t.serviceId,r=t.memberId,i=Object(U.e)(e,a),o=i.exclusionIds,s=i.hiddenChannelCount,l=i.privateChannelIds,c=i.publicChannelIds,u=Object(B.m)(e,"feature_wta_modal_m11n");if(n)return{channels:oe(o,e),featureWtaModalM11n:u};var d=Object(H.a)(e),p=Object(W.d)(e,r),m=Object(G.r)(e,d,p);return{channels:oe(R()({},c,l),e),hiddenChannelCount:s,featureWtaModalM11n:u,canBeRemovedFromChannel:m}})(re),le=n("hbEN"),ce=n("uQWY"),ue=function(e){return r.a.createElement(a.Fragment,null,r.a.createElement(N.a,{size:"small",className:"c-infinite_spinner--inline"}),r.a.createElement("span",{className:"c-infinite_spinner__loading_msg"},e.children))};ue.displayName="InlineInfiniteSpinner";var de=ue,pe=n("qPro"),me=n("mIgp"),he=n("3dqR"),be=n("MREy"),fe=n("w6pt"),ge=n("ZYn4"),_e=n("Fdc0"),ve=new y.b("app_management_modal"),ye=(i.b.string.isRequired,i.b.bool.isRequired,i.b.bool.isRequired,i.b.bool.isRequired,i.b.string.isRequired,i.b.string,function(e){function t(){return c()(this,t),m()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return b()(t,e),d()(t,[{key:"renderIsYou",value:function(){return this.props.isYou?r.a.createElement("span",null,ve.t("(you)")):null}},{key:"renderPrimaryName",value:function(){return r.a.createElement("span",{className:"p-app_management_modal__member_list_primary_name"},this.props.memberPrimaryName," ",this.renderIsYou())}},{key:"renderSecondaryName",value:function(){var e=this.props.memberSecondaryName;return e?r.a.createElement("span",{className:"p-app_management_modal__member_list_secondary_name"},e):null}},{key:"render",value:function(){return this.props.isUnknown?r.a.createElement(fe.a,{type:"unknown"}):this.props.isNonExistent?r.a.createElement(fe.a,{type:"non-existent"}):r.a.createElement("span",{className:"p-app_member_name"},this.renderPrimaryName(),r.a.createElement(ge.a,{memberId:this.props.memberId}),this.renderSecondaryName())}}]),t}(a.PureComponent));ye.displayName="AppMemberName",ye.defaultProps={memberSecondaryName:""};var ke=Object(M.b)(function(e,t){var n=t.memberId,a=Object(W.d)(e,n);return{isYou:Object(B.c)(e)===n,isUnknown:Object(_e.Ob)(a),isNonExistent:Object(_e.Bb)(a),memberPrimaryName:Object(_e.V)(e,a,!1,!1),memberSecondaryName:Object(_e.M)(e,a)}})(ye),Oe=new y.b("app_management_modal"),Ce=(i.b.string,i.b.bool.isRequired,i.b.func,i.b.func,i.b.string.isRequired,i.b.arrayOf(i.b.string).isRequired,{"data-qa":"app_member_list_item",onRevokeButtonClick:f.a,onViewUserPermissionsClick:f.a}),Ee=function(e){function t(e){c()(this,t);var n=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(x.a)(n,["handleViewUserPermissionsClick","renderMenu"]),n}return b()(t,e),d()(t,[{key:"handleViewUserPermissionsClick",value:function(){var e=this.props;(0,e.onViewUserPermissionsClick)(e.userId,e.scopes)}},{key:"renderAvatar",value:function(){var e=this.props.userId;return r.a.createElement(he.c,{className:"p-app_management_modal__member_list_avatar",userId:e,size:36,isInteractive:!1,showCard:!1,showTooltip:!1,tabIndex:"-1"})}},{key:"renderUserName",value:function(){var e=this.props.userId;return r.a.createElement(ke,{memberId:e})}},{key:"renderScopeInfo",value:function(){var e=this.props.scopes;return r.a.createElement("div",null,r.a.createElement(O.a,{className:"p-app_management_modal__member_list_scope_info","data-qa":this.props["data-qa"]+"_permissions_link",onClick:this.handleViewUserPermissionsClick},Oe.t("{scopeCount, plural, =1 {# permission} other {# permissions}} granted",{scopeCount:e.length})))}},{key:"renderMenu",value:function(e){var t=this.props,n=t.isYou,a=t.onRevokeButtonClick;return r.a.createElement(be.f,e,r.a.createElement(be.b,{"data-qa":this.props["data-qa"]+"_menu_permissions",onSelected:this.handleViewUserPermissionsClick,label:Oe.t("View permissions")}),n&&r.a.createElement(be.b,{"data-qa":this.props["data-qa"]+"_menu_revoke",onSelected:a,label:Oe.t("Revoke authorization")}))}},{key:"renderMenuTrigger",value:function(){return r.a.createElement(be.e,{renderMenu:this.renderMenu,position:"bottom-right"},r.a.createElement(C.c,{"data-qa":this.props["data-qa"]+"_menu_trigger"},r.a.createElement(K.b,{type:"ellipsis"})))}},{key:"render",value:function(){return r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:"p-app_management_modal__member_list_gutter"},this.renderAvatar()),r.a.createElement("div",{className:"p-app_management_modal__member_list_content"},this.renderUserName(),this.renderScopeInfo()),this.renderMenuTrigger())}}]),t}(a.PureComponent);Ee.displayName="AppMemberListItem",Ee.displayName="AppMemberListItem",Ee.defaultProps=Ce;var je=Object(M.b)(function(e,t){var n=t.userId;return{isYou:Object(B.c)(e)===n}})(Ee),Se=new y.b("app_management_modal"),Ie=(i.b.string,i.b.bool.isRequired,i.b.arrayOf(i.b.shape({user_id:i.b.string.isRequired,scopes:i.b.arrayOf(i.b.string).isRequired})).isRequired,i.b.string,i.b.any,i.b.func,i.b.func,i.b.func,i.b.string.isRequired,i.b.number,i.b.number,i.b.bool,{"data-qa":"app_member_list",memberQuery:"",modalBodyRef:void 0,onAppSearchUsers:f.a,onRevokeButtonClick:f.a,onViewUserPermissionsClick:f.a,totalResultsCount:0,userCount:0,useVirtualizedList:!0}),we=300,Ne=function(e){function t(e){c()(this,t);var n=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(x.a)(n,["handleScroll","renderListItem","setListRef","setMemberQuery","handleScrollToTopButtonClick"]),n.state={searchValue:"",showScrollToTopButton:!1},n.debouncedFetchMemberList=Object(le.a)(n.fetchMemberList,we),n}return b()(t,e),d()(t,[{key:"componentDidMount",value:function(){this.fetchMemberList()}},{key:"getMemberListKeys",value:function(){var e=this.props,t=e.memberResults,n=e.isLoading,a=t.map(function(e){return e.user_id});return n?a.concat("loading"):a}},{key:"setListRef",value:function(e){this.list=e}},{key:"setMemberQuery",value:function(e){var t=e.target.value;this.setState(function(){return{searchValue:t}}),this.debouncedFetchMemberList(t)}},{key:"fetchMemberList",value:function(e,t){var n=this.props;(0,n.onAppSearchUsers)({serviceId:n.serviceId,query:e,nextPage:t})}},{key:"handleScroll",value:function(e){var t=e.scrollTop,n=this.props,a=n.isLoading,r=n.memberResults,i=n.totalResultsCount,o=n.memberQuery,s=this.state.showScrollToTopButton;if(t>0&&!s?this.setState(function(){return{showScrollToTopButton:!0}}):0===t&&s&&this.setState(function(){return{showScrollToTopButton:!1}}),!a){var l=r.length;if(l!==i)l-(this.list&&this.list.getVisibleRange&&this.list.getVisibleRange().end||0)>5||this.fetchMemberList(o,!0)}}},{key:"handleScrollToTopButtonClick",value:function(){this.props.modalBodyRef.scrollTo(0,0)}},{key:"renderHeader",value:function(){var e=this.props,t=e.memberQuery,n=e.totalResultsCount,a=e.userCount,i=Se.t("Member Results");return t?n&&(i=Se.t("{totalResultsCount} Member Results",{totalResultsCount:n})):i=Se.t("{userCount, plural, =1 {# Member} other {# Members}}",{userCount:a}),r.a.createElement(F.b,{className:"p-app_management_modal__card_header"},r.a.createElement("strong",{className:"flex_one align_self_center margin_right_50","data-qa":this.props["data-qa"]+"_count"},i),r.a.createElement(pe.a,{className:"p-app_management_modal__member_search","data-qa":this.props["data-qa"]+"_search",icon:"search",onChange:this.setMemberQuery,placeholder:Se.t("Search members"),value:this.state.searchValue}))}},{key:"renderListItem",value:function(e){var t=this.props.memberResults;if(e===t.length)return this.renderLoadingItem();var n=t[e];return this.renderMemberItem(n)}},{key:"renderMemberItem",value:function(e){var t=this.props,n=t.onRevokeButtonClick,a=t.onViewUserPermissionsClick,i=this.props["data-qa"]+"_item_"+e.user_id;return r.a.createElement("li",{key:e.user_id,className:"p-app_management_modal__member_list_item p-app_management_modal__member_list_item--member","data-qa":i},r.a.createElement(je,{"data-qa":i,userId:e.user_id,scopes:e.scopes,onRevokeButtonClick:n,onViewUserPermissionsClick:a}))}},{key:"renderLoadingItem",value:function(){var e=this.props.memberQuery;return r.a.createElement("li",{key:"loading",className:"p-app_management_modal__member_list_item p-app_management_modal__member_list_item--loading","data-qa":this.props["data-qa"]+"_loading"},r.a.createElement(de,null,e?Se.t("Loading member results\u2026"):Se.t("Loading members\u2026")))}},{key:"renderEmptyItem",value:function(){return r.a.createElement("li",{key:"empty_message",className:"p-app_management_modal__member_list_item p-app_management_modal__member_list_item--empty_message","data-qa":this.props["data-qa"]+"_empty_message"},Se.t("No matching members found."))}},{key:"renderScrollToTopButton",value:function(){return this.state.showScrollToTopButton?r.a.createElement(C.d,{type:"outline",size:"small",className:"p-app_management_modal__member_list_scroll_button",onClick:this.handleScrollToTopButtonClick,"data-qa":this.props["data-qa"]+"_scroll_button"},r.a.createElement(K.b,{type:"arrow-up-medium"}),"\xa0",Se.t("Back to top")):null}},{key:"renderListItems",value:function(){var e=this,t=this.props,n=t.totalResultsCount,a=t.isLoading,i=t.modalBodyRef,o=t.useVirtualizedList;return n||a?o?r.a.createElement(ce.a,{scrollElement:i,onScroll:this.handleScroll},function(t){var n=t.height,a=t.isScrolling,o=t.onChildScroll,s=t.scrollTop;return r.a.createElement(me.a,{height:n,rowRenderer:e.renderListItem,keys:e.getMemberListKeys(),onScroll:o,isScrolling:a,ref:e.setListRef,scrollTop:s,scrollElement:i})}):this.getMemberListKeys().map(function(t,n){return e.renderListItem(n)}):this.renderEmptyItem()}},{key:"renderBody",value:function(){return r.a.createElement(F.c,{className:"no_margin no_padding"},r.a.createElement("ul",{className:"p-app_management_modal__card_list"},this.renderListItems(),this.renderScrollToTopButton()))}},{key:"render",value:function(){var e=this.props["data-qa"];return r.a.createElement(F.a,{className:"p-app_management_modal__card","data-qa":e},this.renderHeader(),this.renderBody())}}]),t}(a.PureComponent);Ne.displayName="AppMemberList";Ne.defaultProps=Ie;var Te=Object(M.b)(function(e,t){var n=t.serviceId,a=Object(U.f)(e,n);return a?{isLoading:a.isLoading,memberQuery:a.query,memberResults:a.results,totalResultsCount:a.total}:{}})(Ne),Ae=n("uI5u"),Re=new y.b("app_management_modal"),Pe=(i.b.oneOf(["error","addSuccess","removeSuccess","addError","removeError","wildcardAddError","wildcardRemoveError","uninstallError","revokeSuccess","revokeError"]),i.b.string.isRequired,i.b.string,i.b.func,{alertBannerType:void 0,channelId:void 0,onClose:f.a}),Me=function(e){var t=e.alertBannerType,n=e.appName,a=e.channelId,i=e.onClose;if(!t)return null;var o=void 0,s="error",l=a?r.a.createElement(V.a,{channelId:a,inline:!0}):null;switch(t){case"addSuccess":o=Re.rt("{appName} was added to {channelName}",{appName:n,channelName:l}),s="success";break;case"addError":o=Re.rt("Adding {appName} to {channelName} failed. Try again?",{appName:n,channelName:l});break;case"removeSuccess":o=Re.rt("{appName} was removed from {channelName}",{appName:n,channelName:l}),s="success";break;case"removeError":o=Re.rt("Removing {appName} from {channelName} failed. Try again?",{appName:n,channelName:l});break;case"wildcardAddError":o=Re.rt("Adding {appName} to all public channels failed. Try again?",{appName:n,channelName:l});break;case"wildcardRemoveError":o=Re.rt("Removing {appName} from all public channels failed. Try again?",{appName:n,channelName:l});break;case"uninstallError":o=Re.rt("Uninstalling {appName} failed. Try again?",{appName:n});break;case"revokeSuccess":o=Re.rt("Access successfully revoked."),s="success";break;case"revokeError":o=Re.rt("Revoking access to your member data failed. Try again?");break;default:o=Re.t("Hmm, something went wrong. Try again?")}return r.a.createElement(Ae.a,{type:s,topOffset:60,"data-qa":"app_management_modal_alert_banner",showCloseButton:!1,autoFadeout:!0,onClose:i},o)};Me.displayName="AppManagementAlertBanner",Me.defaultProps=Pe;var xe=Me,Fe=(n("TBaU"),new y.b("app_management_modal")),Le=(i.b.bool,i.b.bool,i.b.string.isRequired,i.b.string.isRequired,i.b.string.isRequired,i.b.string,i.b.string,i.b.oneOf(["channel","workspace","user"]).isRequired,i.b.func,i.b.arrayOf(T.a),i.b.arrayOf(T.a),i.b.arrayOf(T.a),i.b.arrayOf(T.a),i.b.string,i.b.string,i.b.bool,i.b.number,i.b.func.isRequired,i.b.func,i.b.func.isRequired,i.b.func.isRequired,i.b.func.isRequired,i.b.func.isRequired,i.b.func.isRequired,i.b.func.isRequired,i.b.func.isRequired,i.b.func.isRequired,i.b.func.isRequired,i.b.bool,i.b.oneOf(["error","addSuccess","removeSuccess","addError","removeError","wildcardAddError","wildcardRemoveError","uninstallError","revokeSuccess","revokeError"]),i.b.string,i.b.bool,i.b.bool,i.b.func.isRequired,i.b.func.isRequired,i.b.bool,i.b.func,i.b.bool,i.b.bool,{showModal:!1,isLoading:!0,workspaceScopeInfo:[],channelScopeInfo:[],userScopeInfo:[],currentUserScopeInfo:[],userCount:0,appHomepageUrl:void 0,appSupportUrl:void 0,showAppDirectoryLink:!0,appIconLarge:void 0,showWildcardToggle:!0,alertBannerType:void 0,activeDialogChannelId:void 0,wildcardEnabled:!1,workspaceName:void 0,userIsAppmin:!1,isMobile:!1,onClose:f.a,onAppSearchUsers:f.a,onSidebarMenuLinkClick:f.a,hasError:!1,featureWtaModalM11n:!1}),De=function(e){function t(e){c()(this,t);var n=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setModalBodyRef=n.setModalBodyRef.bind(n),n}return b()(t,e),d()(t,[{key:"setModalBodyRef",value:function(e){this.modalBodyRef=e}},{key:"renderUserAccessSidebarMenuItem",value:function(){var e=this.props,t=e.currentUserScopeInfo,n=e.userCount,a=e.userIsAppmin,i=e.onSidebarMenuItemClick;return(a?0===n:Object(g.a)(t))?null:r.a.createElement(E.a,{itemId:"user",onClick:i,"data-qa":"app_management_modal_user_access_link"},a?Fe.t("Member data access",{fallbackHash:"54485606f08a3c5d7e73fe0730e62de7b3fe9ea2"}):Fe.t("Access to your data",{fallbackHash:"7284a962539fd4edca8ba9beccf1501937e2f49e"}))}},{key:"renderSidebarMenu",value:function(){var e=this.props,t=e.activeSection,n=e.appId,a=e.appHomepageUrl,i=e.appSupportUrl,o=e.showAppDirectoryLink,s=e.onSidebarMenuItemClick,l=e.onSidebarMenuLinkClick;return r.a.createElement(E.b,{activeItemId:t},r.a.createElement(E.a,{itemId:"channel",onClick:s,"data-qa":"app_management_modal_channel_access_link"},Fe.t("Channel access",{fallbackHash:"93f2f019560a491cf643b739cc7027f2a62c1d38"})),r.a.createElement(E.a,{itemId:"workspace",onClick:s,"data-qa":"app_management_modal_workspace_access_link"},Fe.t("Workspace access",{fallbackHash:"a976c398ad6ec00251f8f90209b8393dd1b68b3a"})),this.renderUserAccessSidebarMenuItem(),a||o||i?r.a.createElement(E.a,{isDivider:!0}):null,a&&r.a.createElement(E.a,{itemId:"homepage",onClick:l,isExternalLink:!0,href:a,"data-qa":"app_management_modal_homepage_link"},Fe.t("App homepage",{fallbackHash:"ee2dbe71c27837ecd0a10d866992e1b3ff0d9b2f"})),o&&r.a.createElement(E.a,{itemId:"directory",onClick:l,isExternalLink:!0,href:"/apps/"+n+"?utm_source=in-prod&utm_medium=inprod-view_in_app_directory-user_profile-click","data-qa":"app_management_modal_directory_link"},Fe.t("View in App Directory")),i&&r.a.createElement(E.a,{itemId:"support",onClick:l,isExternalLink:!0,href:i,"data-qa":"app_management_modal_support_link"},Fe.t("Support for this App")))}},{key:"renderChannelAccessSection",value:function(){var e=this.props,t=e.activeSection,n=e.appName,a=e.channelScopeInfo,i=e.onWorkspaceSectionLinkClick,o=e.onExclusionListAdd,s=e.onExclusionListRemove,l=e.onGrantListAdd,c=e.onGrantListRemove,u=e.wildcardEnabled,d=e.onWildcardCheckboxChange,p=e.userIsAppmin,m=e.showWildcardToggle,h=e.isMobile,b=e.serviceId;if("channel"!==t)return null;var f=Object(y.p)(n),_=r.a.createElement("h3",null,Fe.t("What can {appName} do in a channel?",{appName:f}));if(Object(g.a)(a)){var v=Fe.rt("This app can\u2019t be added to individual channels \u2014 it has access to your entire workspace. Check <Link>Workspace Access</Link> for more.",null,function(e){var t=e.text;return r.a.createElement(O.a,{onClick:i,"data-qa":"app_management_modal_empty_channel_section_link"},t)});return r.a.createElement("div",null,_,r.a.createElement("p",{className:"margin_top_50 sk_foreground_max"},v))}var k=r.a.createElement(I.a,{className:"p-app_management_modal__wildcard_checkbox",checked:u,onChange:d,disabled:!p,"data-qa":"app_management_modal_wildcard_checkbox"});return r.a.createElement("div",null,r.a.createElement("div",null,_,r.a.createElement("p",{className:"margin_top_50 margin_bottom_150"},Fe.t("In channels it\u2019s added to, {appName} can:",{appName:f})),r.a.createElement(j.a,{scopeInfo:a,"data-qa":"app_management_modal_channel_scope_info"})),r.a.createElement("div",{className:"margin_top_250"},r.a.createElement("h3",null,Fe.t("Which channels can {appName} access?",{appName:f})),m&&r.a.createElement("div",{className:"margin_top_50"},r.a.createElement(S.a,{text:Fe.t("All public channels"),cursor:"pointer",type:"inline",subtext:Fe.t("{appName} will join all public channels, in addition to other conversations it\u2019s added to.",{appName:f})},p?k:r.a.createElement(w.c,{offsetX:-5,tip:Fe.t("Only an app admin can change this setting."),"data-qa":"app_management_modal_wilcard_checkbox_tooltip"},r.a.createElement("span",null,k)))),u&&r.a.createElement(se,{isMobile:h,headerText:Fe.t("Excluded Public Channels"),buttonText:Fe.t("Add Excluded Channel"),emptyListText:Fe.t("No public channels excluded."),onAddChannel:o,onRemoveChannel:s,"data-qa":"app_management_modal_exclusion_list",serviceId:b,forExclusions:!0}),r.a.createElement(se,{isMobile:h,headerText:Fe.t("{appName} was individually added to:",{appName:f}),buttonText:Fe.t("Add App to channel",{fallbackHash:"b15a7b87166cf757534bf619b95f1e9b49b6f92a"}),emptyListText:Fe.t("{appName} has not been individually added to any channels.",{appName:f}),onAddChannel:l,onRemoveChannel:c,"data-qa":"app_management_modal_grant_list",serviceId:b})))}},{key:"renderWorkspaceAccessSection",value:function(){var e=this.props,t=e.activeSection,n=e.appName,a=e.workspaceName,i=e.workspaceScopeInfo;if("workspace"!==t)return null;var o=Object(y.p)(n),s=Object(y.p)(a);return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h3",null,Fe.t("What can {appName} do in this workspace?",{appName:o})),r.a.createElement("p",{className:"margin_top_50 margin_bottom_150"},Fe.t("On {workspaceName}, {appName} can:",{appName:o,workspaceName:s})),r.a.createElement(j.a,{scopeInfo:i,"data-qa":"app_management_modal_workspace_scope_info"})),r.a.createElement("div",{className:"margin_top_250"},r.a.createElement("h3",null,Fe.t("Uninstall {appName}",{appName:o})),r.a.createElement("p",{className:"margin_top_50 margin_bottom_100"},Fe.t("Remove this app from the {workspaceName} workspace and revoke all access and authorizations.",{workspaceName:s})),this.renderUninstallButton()))}},{key:"renderAppminUserAccessSection",value:function(){var e=this.props,t=e.activeSection,n=e.appName,a=e.serviceId,i=e.userCount,o=e.userScopeInfo,s=e.workspaceName,l=e.onAppSearchUsers,c=e.onMemberListRevokeClick,u=e.onViewUserPermissionsClick;if("user"!==t||0===i||Object(g.a)(o))return null;var d=Object(y.p)(n),p=Fe.t("{workspaceName} members have allowed {appName} to:",{appName:d,workspaceName:Object(y.p)(s)});return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h3",null,Fe.t("What can {appName} do with member data?",{appName:d})),r.a.createElement("p",{className:"margin_top_50 margin_bottom_150"},p),r.a.createElement(j.a,{scopeInfo:o,"data-qa":"app_management_modal_member_appmin_scope_info"})),r.a.createElement("div",{className:"margin_top_250"},r.a.createElement("h3",null,Fe.t("Which members have authorized {appName} to access their data?",{appName:d})),r.a.createElement(Te,{modalBodyRef:this.modalBodyRef,onAppSearchUsers:l,onRevokeButtonClick:c,onViewUserPermissionsClick:u,serviceId:a,userCount:i})))}},{key:"renderUserAccessSection",value:function(){var e=this.props,t=e.activeSection,n=e.appName,a=e.currentUserScopeInfo,i=e.onRevokeButtonClick;if("user"!==t||Object(g.a)(a))return null;var o=Object(y.p)(n);return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h3",null,Fe.t("What can {appName} do with your data?",{appName:o})),r.a.createElement("p",{className:"margin_top_50 margin_bottom_150"},Fe.t("You\u2019ve allowed {appName} to:",{appName:o,fallbackHash:"7313b20011628c3948a6a709c3e227ae089e2c81"})),r.a.createElement(j.a,{scopeInfo:a,"data-qa":"app_management_modal_member_scope_info"})),r.a.createElement("div",{className:"margin_top_250"},r.a.createElement("h3",null,Fe.t("Revoke access")),r.a.createElement("p",{className:"margin_top_50 margin_bottom_100"},Fe.t("{appName} will no longer be able to access your data or take actions for you.",{appName:o})),r.a.createElement(C.d,{"data-qa":"app_management_modal_revoke_button",type:"outline",onClick:i},Fe.t("Revoke"))))}},{key:"renderUninstallButton",value:function(){var e=this.props,t=e.userIsAppmin,n=e.onUninstallButtonClick;return r.a.createElement("div",null,r.a.createElement(C.d,{type:"outline",disabled:!t,onClick:n,"data-qa":"app_management_modal_uninstall_button"},Fe.t("Uninstall App")),!t&&r.a.createElement("span",{className:"margin_left_100 sk_foreground_max"},Fe.t("Only an app admin can uninstall this app.")))}},{key:"renderAlertBanner",value:function(){var e=this.props,t=e.appName,n=e.activeDialogChannelId,a=e.alertBannerType,i=e.onAlertBannerClose;return a?r.a.createElement(xe,{alertBannerType:a,appName:t,channelId:n,onClose:i}):null}},{key:"renderModalContents",value:function(){var e=this.props,t=e.featureWtaModalM11n,n=e.isLoading,i=e.userIsAppmin;return t&&n?r.a.createElement(N.a,null):r.a.createElement(a.Fragment,null,this.renderAlertBanner(),r.a.createElement("div",{className:"p-app_management_modal__sidebar_container"},this.renderSidebarMenu()),r.a.createElement("div",{className:"p-app_management_modal__content_container"},this.renderChannelAccessSection(),this.renderWorkspaceAccessSection(),i?this.renderAppminUserAccessSection():this.renderUserAccessSection()))}},{key:"render",value:function(){var e=this.props,t=e.appIconLarge,n=e.appName,a=e.featureWtaModalM11n,i=e.hasError,o=e.isMobile,s=e.onClose,l=e.showModal;if(a?i:!l)return null;var c=n?Fe.t("{appName} Settings",{appName:Object(y.p)(n)}):n;return r.a.createElement(k.a,{onCancel:s,showCancelButton:!1,showGoButton:!1,title:c,modalClasses:v()("p-app_management_modal",{"p-app_management_modal--mobile":o}),modalBodyOpenClassName:"p-app_management_modal__ReactModal__Body--open",position:"fixed",withHeader:!0,headerImage:t,setBodyRef:this.setModalBodyRef},this.renderModalContents())}}]),t}(a.PureComponent);De.displayName="AppManagementModal",De.defaultProps=Le;var Ue=De,Be=n("YEIV"),qe=n.n(Be),He=n("syB0"),We=n("7EGn"),Ge=n("qafc"),Ke=n("dCAd"),Ve=n("ns4K"),ze=n("1hAG"),Ye=n("1zbP"),Qe=n("V/As"),Xe=n("EOYu"),Je=n("h9PG"),Ze=n("5mKg"),$e=n("NV5S"),et=n("1Oc4"),tt=n("f8fv"),nt=n("U3Q0"),at=new y.b("app_management_modal"),rt=(i.b.string.isRequired,i.b.string.isRequired,i.b.string,i.b.string,i.b.oneOfType([i.b.string,i.b.object]),i.b.oneOfType([i.b.string,i.b.object]),i.b.func.isRequired,i.b.func,{workspaceName:void 0,title:void 0,workspaceAccessCheckboxText:void 0,channelAccessCheckboxText:void 0,onCancel:f.a}),it=function(e){function t(e){c()(this,t);var n=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={workspaceConfirmChecked:!1,channelConfirmChecked:!e.channelAccessCheckboxText,confirmInProgress:!1},Object(x.a)(n,["handleConfirm","handleCheckboxChange"]),n}return b()(t,e),d()(t,[{key:"handleConfirm",value:function(){var e=this.props.onGo;return this.setState(function(){return{confirmInProgress:!0}}),e()}},{key:"handleCheckboxChange",value:function(e){var t=e.target,n=t.name,a=t.checked;this.setState(function(){return qe()({},n+"Checked",a)})}},{key:"renderCheckbox",value:function(e,t){return r.a.createElement(S.a,{type:"inline",cursor:"pointer",text:t},r.a.createElement(I.a,{onChange:this.handleCheckboxChange,name:e,isRequired:!0,"data-qa":"app_uninstall_dialog_"+Object(tt.a)(e)+"_checkbox"}))}},{key:"renderWorkspaceAccessConfirmCheckbox",value:function(){var e=this.props,t=e.appName,n=e.workspaceName,a=e.workspaceAccessCheckboxText||at.rt("I understand members of the <strong>{workspaceName}</strong> workspace will no longer be able to use {appName}.",{appName:t,workspaceName:n});return this.renderCheckbox("workspaceConfirm",a)}},{key:"renderChannelAccessConfirmCheckbox",value:function(){var e=this.props.channelAccessCheckboxText;return e?this.renderCheckbox("channelConfirm",e):null}},{key:"renderTitle",value:function(){var e=this.props,t=e.appName,n=e.workspaceName;return e.title||at.t("Uninstall {appName} from {workspaceName}?",{appName:Object(y.p)(t),workspaceName:Object(y.p)(n)})}},{key:"render",value:function(){var e=this.props,t=e.onCancel,n=e.appIcon,a=this.state,i=a.workspaceConfirmChecked,o=a.channelConfirmChecked,s=a.confirmInProgress,l=!(i&&o)||s;return r.a.createElement(nt.b,{contentLabel:this.renderTitle(),title:this.renderTitle(),titleImage:n,truncateTitle:!1,goButtonText:at.t("Uninstall App"),onGo:this.handleConfirm,goButtonType:"danger",goButtonIsDisabled:l,goButtonIsPending:s,showCancelButton:!0,onCancel:t,"data-qa":"app_uninstall_dialog"},this.renderWorkspaceAccessConfirmCheckbox(),this.renderChannelAccessConfirmCheckbox())}}]),t}(a.PureComponent);it.displayName="AppUninstallDialog",it.displayName="AppUninstallDialog",it.defaultProps=rt;var ot=it,st=n("negh"),lt=n("kOzZ"),ct=n("AE1P"),ut=new y.b("app_management_modal"),dt=(i.b.string.isRequired,i.b.func.isRequired,i.b.func,i.b.bool.isRequired,{onCancel:f.a}),pt=function(e){function t(e){c()(this,t);var n=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={confirmInProgress:!1},n.handleConfirm=n.handleConfirm.bind(n),n}return b()(t,e),d()(t,[{key:"handleConfirm",value:function(){var e=this.props.onGo;return this.setState(function(){return{confirmInProgress:!0}}),e()}},{key:"render",value:function(){var e=this.props,t=e.appName,n=e.wildcardEnabled,a=e.onCancel,i=this.state.confirmInProgress,o=Object(y.p)(t),s=void 0,l=void 0;return n?(s={title:ut.t("Remove {appName} from all public channels?",{appName:o}),goButtonText:ut.t("Remove"),goButtonType:"danger","data-qa":"app_wildcard_disable_dialog"},l=ut.t("{appName} will only be able to post in channels it\u2019s individually added to.",{appName:o})):(s={title:ut.t("Allow {appName} access to all public channels?",{appName:o}),goButtonText:ut.t("Allow"),"data-qa":"app_wildcard_enable_dialog"},l=ut.t("{appName} will be added to all public channels (quietly, of course).",{appName:o})),r.a.createElement(nt.b,R()({showCancelButton:!0,contentLabel:s.title,truncateTitle:!1,onGo:this.handleConfirm,onCancel:a,goButtonIsPending:i,goButtonIsDisabled:i},s),r.a.createElement("p",{className:"margin_bottom_0"},l))}}]),t}(a.PureComponent);pt.displayName="AppWildcardDialog",pt.defaultProps=dt,pt.displayName="AppWildcardDialog";var mt=pt,ht=new y.b("app_management_modal"),bt=(i.b.string.isRequired,i.b.func,i.b.func.isRequired,i.b.string.isRequired,{onCancel:f.a}),ft=function(e){function t(e){c()(this,t);var n=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={confirmInProgress:!1},n.handleConfirm=n.handleConfirm.bind(n),n}return b()(t,e),d()(t,[{key:"handleConfirm",value:function(){var e=this.props.onGo;return this.setState(function(){return{confirmInProgress:!0}}),e()}},{key:"render",value:function(){var e=this.props,t=e.appName,n=e.onCancel,a=e.workspaceName,i=this.state.confirmInProgress,o=ht.t("Revoke access to your member data?"),s=ht.t("{appName} will remain installed on {workspaceName}, but will no longer be able to access your member data.",{appName:Object(y.p)(t),workspaceName:Object(y.p)(a)});return r.a.createElement(nt.b,{"data-qa":"app_revoke_dialog",goButtonIsDisabled:i,goButtonIsPending:i,goButtonText:ht.t("Revoke"),goButtonType:"danger",onCancel:n,onGo:this.handleConfirm,showCancelButton:!0,title:o,truncateTitle:!1},r.a.createElement("p",{className:"margin_bottom_0"},s))}}]),t}(a.PureComponent);ft.displayName="AppRevokeDialog",ft.defaultProps=bt,ft.displayName="AppRevokeDialog";var gt=ft,_t=n("CpTu"),vt=new y.b("app_management_modal"),yt=(i.b.string.isRequired,i.b.arrayOf(T.a),i.b.bool,i.b.string,i.b.func,i.b.func,i.b.arrayOf(i.b.string),i.b.arrayOf(T.a),{currentUserScopeInfo:[],isMemberCurrentUser:!1,memberName:void 0,onGo:f.a,onClose:f.a,scopes:[],userScopeInfo:[]}),kt={memberId:i.b.string.isRequired},Ot=function(e,t){return t.map(function(t){return function(e,t){return Object(_t.a)(e,function(e){return e.scopes[0]===t})}(e,t)})},Ct=function(e){var t=e.appName,n=e.currentUserScopeInfo,a=e.isMemberCurrentUser,i=e.memberName,o=e.onGo,s=e.onClose,l=e.scopes,c=e.userScopeInfo,u=void 0;u=a?n:Ot(c,l);var d=Object(y.p)(t),p=a?vt.t("You\u2019ve allowed {appName} to:",{appName:d,fallbackHash:"7313b20011628c3948a6a709c3e227ae089e2c81"}):vt.t("{memberName} has allowed {appName} to:",{appName:d,memberName:Object(y.p)(i)});return r.a.createElement(nt.b,{cancelText:vt.t("Done"),"data-qa":"app_user_permissions_dialog",goButtonType:"outline",goButtonText:vt.t("Revoke All"),showGoButton:a,reverseButtons:!0,truncateTitle:!1,onGo:o,onCancel:s,title:p},r.a.createElement("div",{className:"margin_bottom_400"},r.a.createElement(j.a,{scopeInfo:u})))};Ct.displayName="AppUserPermissionsDialog",Ct.defaultProps=yt;var Et=Object(M.b)(function(e,t){var n=t.memberId;return{isMemberCurrentUser:n===Object(B.c)(e),memberName:Object(_e.W)(e,n)}})(Ct);Et.propTypes=kt;var jt=Et,St=new y.b("app_management_modal"),It=(i.b.string,i.b.object,i.b.func,i.b.bool,i.b.func,i.b.bool,i.b.string,i.b.object,i.b.string,i.b.func,i.b.string,i.b.string,i.b.string,i.b.func.isRequired,i.b.func.isRequired,i.b.func.isRequired,i.b.func.isRequired,i.b.func.isRequired,i.b.func.isRequired,i.b.func.isRequired,i.b.func.isRequired,i.b.func.isRequired,i.b.func.isRequired,i.b.func.isRequired,i.b.func.isRequired,i.b.bool,i.b.string,i.b.number,i.b.number,i.b.func,i.b.func,i.b.arrayOf(T.a),i.b.arrayOf(T.a),i.b.bool,i.b.number,i.b.bool,i.b.bool,i.b.bool,i.b.bool,i.b.object.isRequired,{onUninstall:f.a,showAppDirectoryLink:!0,isMobile:!1,workspaceName:"",enqueueToast:f.a,serviceId:void 0,appProfile:void 0,appId:void 0,appUserId:void 0,appName:void 0,wildcardEnabled:!1,onClose:f.a,appIcon:void 0,privateChannelCount:0,publicChannelCount:0,openModal:f.a,closeModal:f.a,currentUserScopeInfo:[],userScopeInfo:[],userCount:0,userIsAppmin:!1,referringEventId:void 0,referringUiContext:void 0,showModal:!1,isLoading:!0,hasError:!1,featureWtaModalM11n:!1}),wt=function(e){function t(e){c()(this,t);var n=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={alertBannerType:null,activeDialogChannelId:null,addChannelScopeInfo:null,activeSection:"channel"},Object(x.a)(n,["handleSidebarMenuItemClick","handleWorkspaceSectionLinkClick","handleUninstallButtonClick","handleAlertBannerClose","handleWildcardCheckboxChange","handleAppSearchUsers","handleExclusionListAdd","handleExclusionListRemove","handleGrantListAdd","handleGrantListRemove","handleRevokeButtonClick","handleMemberListRevokeClick","handleViewUserPermissionsClick"]),n.referringEventId=e.referringEventId,n.referringUiContext=e.referringUiContext,n}return b()(t,e),d()(t,null,[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.currentUserScopeInfo,a=e.userIsAppmin,r=e.userCount;return"user"===t.activeSection&&(a?0===r:Object(g.a)(n))?{activeSection:"channel"}:null}}]),d()(t,[{key:"componentDidUpdate",value:function(e,t){var n=this.props,a=n.featureWtaModalM11n,r=n.isLoading,i=n.hasError,o=n.showModal,s=this.state.activeSection;a&&!e.hasError&&i?this.handleError():(a?!e.isLoading||r:e.showModal||!o)&&t.activeSection===s||this.trackClog(qe()({},st.UiContextKeys.action,st.UiAction.IMPRESSION))}},{key:"componentWillUnmount",value:function(){this.props.clearAppPermissions(),this.trackClog(qe()({},st.UiContextKeys.action,st.UiAction.CLOSE))}},{key:"getClogStep",value:function(){var e=this.props.userIsAppmin;switch(this.state.activeSection){case"workspace":return st.UiStep.WORKSPACE_ACCESS_SECTION;case"user":return e?st.UiStep.APPMIN_MEMBER_ACCESS_SECTION:st.UiStep.MEMBER_ACCESS_SECTION;default:return st.UiStep.CHANNEL_ACCESS_SECTION}}},{key:"trackClog",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"APP_SETTINGS_MODAL",r=this.props,i=r.appId,o=r.clogger,s=R()(qe()({},st.UiContextKeys.step,"APP_SETTINGS_MODAL"===a?this.getClogStep():void 0),t);o.track(a,qe()({contexts:(e={},qe()(e,st.ClientEventKeys.ui_context,s),qe()(e,st.ClientEventKeys.referring_ui_context,this.referringUiContext),qe()(e,st.ClientEventKeys.core,R()(qe()({},st.CoreKeys.app_id,i),n)),e)},st.ClientEventKeys.referring_event_id,this.referringEventId)),this.referringEventId=a,this.referringUiContext=s}},{key:"trackClogForSidebarMenuClick",value:function(e){var t,n=void 0;switch(e){case"workspace":n=st.UiElement.LINK_WORKSPACE_ACCESS_SECTION;break;case"channel":n=st.UiElement.LINK_CHANNEL_ACCESS_SECTION;break;case"user":n=this.props.userIsAppmin?st.UiElement.LINK_APPMIN_MEMBER_ACCESS_SECTION:st.UiElement.LINK_MEMBER_ACCESS_SECTION;break;case"homepage":n=st.UiElement.LINK_APP_HOMEPAGE;break;case"directory":n=st.UiElement.LINK_APP_DIRECTORY;break;case"support":n=st.UiElement.LINK_APP_SUPPORT;break;default:n=void 0}this.trackClog((t={},qe()(t,st.UiContextKeys.action,st.UiAction.CLICK),qe()(t,st.UiContextKeys.ui_element,n),t))}},{key:"handleError",value:function(){this.props.featureWtaModalM11n&&(this.props.closeModal(),this.props.enqueueToast({element:r.a.createElement(Ge.b,{offsetY:80,icon:"warning-filled",iconClassName:"sk_raspberry_red margin_right_75"},r.a.createElement("span",{"data-qa":"app_management_modal_error_toast"},St.t("Hmm, something went wrong. Try again?")))}))}},{key:"handleSidebarMenuItemClick",value:function(e){this.trackClogForSidebarMenuClick(e),e!==this.state.activeSection&&this.setState(function(){return{activeSection:e}})}},{key:"handleWorkspaceSectionLinkClick",value:function(){this.handleSidebarMenuItemClick("workspace")}},{key:"showUninstallToast",value:function(){var e=this.props,t=e.appName,n=e.workspaceName;this.props.enqueueToast({element:r.a.createElement(Ge.b,{offsetY:80},r.a.createElement("span",{"data-qa":"app_management_modal_uninstall_toast"},St.t("{appName} was removed from {workspaceName}",{appName:Object(y.p)(t),workspaceName:Object(y.p)(n)})))})}},{key:"handleUninstallConfirm",value:function(){var e=this,t=this.props,n=t.onUninstall,a=t.appId,r=t.onClose;return this.props.fetchAppUninstall({appId:a}).then(function(){n(),e.showUninstallToast(),r(),e.props.closeModal()}).catch(function(){e.setState(function(){return{alertBannerType:"uninstallError"}})})}},{key:"toggleWildcardEnabled",value:function(){var e=this,t=this.props,n=t.appUserId,a=t.wildcardEnabled,r=t.serviceId,i="fetchAppWildcard"+(a?"Disable":"Enable");return this.props[i]({appUserId:n}).then(function(t){e.props.maybeUpdateAppPermissionsAfterWildcardChange({appUserId:n,wildcardEnabled:!a}),a||e.props.updatePublicChannelCount({countDelta:t,serviceId:r})}).catch(function(t){var n=Object(We.a)(t,"data.error");"permission_exists"===n||"no_resource_to_remove"===n||e.setState(function(){return{alertBannerType:a?"wildcardRemoveError":"wildcardAddError"}})})}},{key:"handleChannelAddOrRemove",value:function(e,t,n){var a;this.trackClog((a={},qe()(a,st.UiContextKeys.action,st.UiAction.CLICK),qe()(a,st.UiContextKeys.ui_element,n),a),qe()({},st.CoreKeys.channel_id,e)),this[t](e)}},{key:"handleExclusionListAdd",value:function(e){this.handleChannelAddOrRemove(e,"showRemoveDialog",st.UiElement.BTN_APP_ADD_EXCLUSION)}},{key:"handleExclusionListRemove",value:function(e){this.handleChannelAddOrRemove(e,"showAddDialog",st.UiElement.BTN_APP_REMOVE_EXCLUSION)}},{key:"handleGrantListAdd",value:function(e){this.handleChannelAddOrRemove(e,"showAddDialog",st.UiElement.BTN_APP_ADD_CHANNEL)}},{key:"handleGrantListRemove",value:function(e){this.handleChannelAddOrRemove(e,"showRemoveDialog",st.UiElement.BTN_APP_REMOVE_CHANNEL)}},{key:"showRemoveDialog",value:function(e){var t=this,n=this.props.appName;this.setState(function(){return{activeDialogChannelId:e,alertBannerType:null}});var a={appName:n,channelId:e,onConfirm:function(){return t.trackClog(qe()({},st.UiContextKeys.action,st.UiAction.OK),qe()({},st.CoreKeys.channel_id,e),"APP_CHANNEL_REMOVE_DIALOG"),t.handleRemoveChannel()},onCancel:function(){return t.trackClog(qe()({},st.UiContextKeys.action,st.UiAction.CLOSE),qe()({},st.CoreKeys.channel_id,e),"APP_CHANNEL_REMOVE_DIALOG")}};this.props.openModal({element:r.a.createElement(et.a,a),isStackable:!0}),this.trackClog(qe()({},st.UiContextKeys.action,st.UiAction.IMPRESSION),qe()({},st.CoreKeys.channel_id,e),"APP_CHANNEL_REMOVE_DIALOG")}},{key:"handleRemoveChannel",value:function(){var e=this,t=this.props.appUserId,n=this.state.activeDialogChannelId,a={alertBannerType:"removeSuccess"};return this.props.fetchAppRemoveResource({appUserId:t,channelId:n}).then(function(){e.props.maybeUpdateAppPermissionsAfterChannelRemove({appUserId:t,channelId:n}),e.setState(function(){return a})}).catch(function(t){"no_resource_to_remove"===Object(We.a)(t,"data.error")?e.setState(function(){return a}):e.setState(function(){return{alertBannerType:"removeError"}})})}},{key:"showAddDialog",value:function(e){var t=this,n=this.props,a=n.appUserId,i=n.appName,o=n.appIcon;return this.props.fetchAppAddResource({appUserId:a,channelId:e,didConfirm:!1}).then(function(n){t.setState(function(){return{activeDialogChannelId:e,addChannelScopeInfo:n,alertBannerType:null}});var a={channelId:e,appName:i,appIcon:o,scopeInfo:n,onAuthorize:function(){t.trackClog(qe()({},st.UiContextKeys.action,st.UiAction.ALLOW),qe()({},st.CoreKeys.channel_id,e),"APP_CHANNEL_ADD_DIALOG"),t.handleAddChannel()},onDismiss:function(){t.trackClog(qe()({},st.UiContextKeys.action,st.UiAction.DO_NOT_ALLOW),qe()({},st.CoreKeys.channel_id,e),"APP_CHANNEL_ADD_DIALOG")},onClose:function(){t.trackClog(qe()({},st.UiContextKeys.action,st.UiAction.CLOSE),qe()({},st.CoreKeys.channel_id,e),"APP_CHANNEL_ADD_DIALOG")}};t.props.openModal({element:r.a.createElement($e.b,a),isStackable:!0}),t.trackClog(qe()({},st.UiContextKeys.action,st.UiAction.IMPRESSION),qe()({},st.CoreKeys.channel_id,e),"APP_CHANNEL_ADD_DIALOG")}).catch(function(n){"already_has_resource"===Object(We.a)(n,"data.error")?t.setState(function(){return{addChannelScopeInfo:null,alertBannerType:"addSuccess"}}):t.setState(function(){return{activeDialogChannelId:e,alertBannerType:"addError"}})})}},{key:"handleAddChannel",value:function(){var e=this,t=this.props.appUserId,n=this.state.activeDialogChannelId;return this.props.fetchAppAddResource({appUserId:t,channelId:n,didConfirm:!0}).then(function(){e.props.maybeUpdateAppPermissionsAfterChannelAdd({appUserId:t,channelId:n}),e.setState(function(){return{addChannelScopeInfo:null,alertBannerType:"addSuccess"}})}).catch(function(){e.setState(function(){return{alertBannerType:"addError"}})})}},{key:"handleAlertBannerClose",value:function(){this.setState(function(){return{alertBannerType:null}})}},{key:"handleWildcardCheckboxChange",value:function(){var e;this.trackClog((e={},qe()(e,st.UiContextKeys.action,st.UiAction.CLICK),qe()(e,st.UiContextKeys.ui_element,st.UiElement.APP_WILDCARD_CHECKBOX),e)),this.showWildcardDialog()}},{key:"showWildcardDialog",value:function(){var e,t=this,n=this.props,a=n.wildcardEnabled,i=n.appName,o=a?st.UiElement.APP_WILDCARD_DISABLE_DIALOG:st.UiElement.APP_WILDCARD_ENABLE_DIALOG,s={appName:i,wildcardEnabled:a,onGo:function(){var e;return t.trackClog((e={},qe()(e,st.UiContextKeys.action,st.UiAction.OK),qe()(e,st.UiContextKeys.ui_element,o),e)),t.toggleWildcardEnabled()},onCancel:function(){var e;return t.trackClog((e={},qe()(e,st.UiContextKeys.action,st.UiAction.CLOSE),qe()(e,st.UiContextKeys.ui_element,o),e))}};this.props.openModal({element:r.a.createElement(mt,s),isStackable:!0}),this.trackClog((e={},qe()(e,st.UiContextKeys.action,st.UiAction.IMPRESSION),qe()(e,st.UiContextKeys.ui_element,o),e))}},{key:"handleUninstallButtonClick",value:function(){var e;this.trackClog((e={},qe()(e,st.UiContextKeys.action,st.UiAction.CLICK),qe()(e,st.UiContextKeys.ui_element,st.UiElement.BTN_APP_UNINSTALL),e)),this.showUninstallDialog()}},{key:"showUninstallDialog",value:function(){var e,t=this,n=this.props,a=n.appName,i=n.appIcon,o=n.workspaceName,s=n.publicChannelCount,l=n.privateChannelCount,c={appName:a,appIcon:i,workspaceName:o,publicChannelCount:s,privateChannelCount:l,onGo:function(){var e;return t.trackClog((e={},qe()(e,st.UiContextKeys.action,st.UiAction.ALLOW),qe()(e,st.UiContextKeys.ui_element,st.UiElement.APP_UNINSTALL_DIALOG),e)),t.handleUninstallConfirm()},onCancel:function(){var e;return t.trackClog((e={},qe()(e,st.UiContextKeys.action,st.UiAction.CLOSE),qe()(e,st.UiContextKeys.ui_element,st.UiElement.APP_UNINSTALL_DIALOG),e))}},u=void 0;s>0?u=l>0?St.rt("I understand {appName} will no longer be able to access <strong>{publicChannelCount, plural, =1 {# public channel} other {# public channels}} and {privateChannelCount, plural, =1 {# other private conversation} other {# other private conversations}}</strong>.",{appName:a,publicChannelCount:s,privateChannelCount:l}):St.rt("I understand {appName} will no longer be able to access <strong>{publicChannelCount, plural, =1 {# public channel} other {# public channels}}</strong>.",{appName:a,publicChannelCount:s}):l>0&&(u=St.rt("I understand {appName} will no longer be able to access <strong>{privateChannelCount, plural, =1 {# private conversation} other {# private conversations}}</strong>.",{appName:a,privateChannelCount:l})),c.channelAccessCheckboxText=u,this.props.openModal({element:r.a.createElement(ot,c),isStackable:!0}),this.trackClog((e={},qe()(e,st.UiContextKeys.action,st.UiAction.IMPRESSION),qe()(e,st.UiContextKeys.ui_element,st.UiElement.APP_UNINSTALL_DIALOG),e))}},{key:"handleRevokeButtonClick",value:function(){var e;this.trackClog((e={},qe()(e,st.UiContextKeys.action,st.UiAction.CLICK),qe()(e,st.UiContextKeys.ui_element,st.UiElement.BTN_APP_REVOKE),e)),this.showRevokeDialog()}},{key:"handleMemberListRevokeClick",value:function(){var e;this.trackClog((e={},qe()(e,st.UiContextKeys.action,st.UiAction.CLICK),qe()(e,st.UiContextKeys.ui_element,st.UiElement.APP_MEMBER_LIST_MENU_REVOKE),e)),this.showRevokeDialog()}},{key:"showRevokeDialog",value:function(){var e,t=this,n=this.props,a=n.appName,i=n.workspaceName;this.setState(function(){return{alertBannerType:null}});var o={appName:a,onGo:function(){var e;return t.trackClog((e={},qe()(e,st.UiContextKeys.action,st.UiAction.OK),qe()(e,st.UiContextKeys.ui_element,st.UiElement.APP_REVOKE_DIALOG),e)),t.handleRevokeConfirm()},onCancel:function(){var e;return t.trackClog((e={},qe()(e,st.UiContextKeys.action,st.UiAction.CLOSE),qe()(e,st.UiContextKeys.ui_element,st.UiElement.APP_REVOKE_DIALOG),e))},workspaceName:i};this.props.openModal({element:r.a.createElement(gt,o),isStackable:!0}),this.trackClog((e={},qe()(e,st.UiContextKeys.action,st.UiAction.IMPRESSION),qe()(e,st.UiContextKeys.ui_element,st.UiElement.APP_REVOKE_DIALOG),e))}},{key:"handleRevokeConfirm",value:function(){var e=this,t=this.props.serviceId;return this.props.fetchAppRevokeUserAndUpdateAppPermissions({serviceId:t}).then(function(){e.setState(function(){return{alertBannerType:"revokeSuccess"}})}).catch(function(){e.setState(function(){return{alertBannerType:"revokeError"}})})}},{key:"handleViewUserPermissionsClick",value:function(e,t){var n;this.trackClog((n={},qe()(n,st.UiContextKeys.action,st.UiAction.CLICK),qe()(n,st.UiContextKeys.ui_element,st.UiElement.LINK_APP_VIEW_PERMISSIONS),n)),this.showUserPermissionsDialog(e,t)}},{key:"showUserPermissionsDialog",value:function(e,t){var n,a=this,i=this.props,o={appName:i.appName,currentUserScopeInfo:i.currentUserScopeInfo,memberId:e,onGo:function(){return Object(He.a)(function(){return a.showRevokeDialog()})},onClose:function(){var e;return a.trackClog((e={},qe()(e,st.UiContextKeys.action,st.UiAction.CLOSE),qe()(e,st.UiContextKeys.ui_element,st.UiElement.APP_USER_PERMISSIONS_DIALOG),e))},scopes:t,userScopeInfo:i.userScopeInfo};this.props.openModal({element:r.a.createElement(jt,o),isStackable:!0}),this.trackClog((n={},qe()(n,st.UiContextKeys.action,st.UiAction.IMPRESSION),qe()(n,st.UiContextKeys.ui_element,st.UiElement.APP_USER_PERMISSIONS_DIALOG),n))}},{key:"handleAppSearchUsers",value:function(e){var t,n=this;e.query&&this.trackClog((t={},qe()(t,st.UiContextKeys.action,st.UiAction.SEARCH),qe()(t,st.UiContextKeys.ui_element,st.UiElement.APP_MEMBER_LIST_SEARCH),t));return this.props.searchUsersForApp(e).catch(function(){n.setState(function(){return{alertBannerType:"error"}})})}},{key:"render",value:function(){var e=R()({onSidebarMenuItemClick:this.handleSidebarMenuItemClick,onSidebarMenuLinkClick:this.trackClogForSidebarMenuClick,onWorkspaceSectionLinkClick:this.handleWorkspaceSectionLinkClick,onRevokeButtonClick:this.handleRevokeButtonClick,onMemberListRevokeClick:this.handleMemberListRevokeClick,onUninstallButtonClick:this.handleUninstallButtonClick,onExclusionListAdd:this.handleExclusionListAdd,onExclusionListRemove:this.handleExclusionListRemove,onGrantListAdd:this.handleGrantListAdd,onGrantListRemove:this.handleGrantListRemove,onWildcardCheckboxChange:this.handleWildcardCheckboxChange,onAlertBannerClose:this.handleAlertBannerClose,onViewUserPermissionsClick:this.handleViewUserPermissionsClick,onAppSearchUsers:this.handleAppSearchUsers},this.props,this.state);return r.a.createElement(Ue,e)}}]),t}(a.PureComponent);wt.displayName="AppManagementModalContainer",wt.displayName="AppManagementModalContainer",wt.defaultProps=It;var Nt={clearAppPermissions:U.b,enqueueToast:Ve.c,fetchAppAddResource:Ke.a,fetchAppRemoveResource:Ke.h,fetchAppUninstall:Ke.k,fetchAppWildcardDisable:Ke.l,fetchAppWildcardEnable:Ke.m,fetchAppRevokeUserAndUpdateAppPermissions:U.d,maybeUpdateAppPermissionsAfterChannelAdd:U.g,maybeUpdateAppPermissionsAfterChannelRemove:U.h,maybeUpdateAppPermissionsAfterWildcardChange:U.i,searchUsersForApp:U.k,updatePublicChannelCount:U.l,openModal:o.e,closeModal:o.a},Tt=Object(M.b)(function(e,t){var n=t.appProfile,a=t.serviceId,r=Object(ze.d)(e),i=r?Object(Ze.f)(r):"",o={},s=Object(ct.f)(e);if(n)o=function(e){var t=e.app_user_id,n=e.id,a=e.name,r=e.support_url,i=e.url;return{appUserId:t,appIcon:Object(Qe.b)(e,48),appIconLarge:Object(Qe.b)(e,88),appId:n,appName:a,appSupportUrl:r,appHomepageUrl:i}}(n);else if(a){var l=Object(Xe.c)(e,{serviceId:a});l&&(o=function(e,t){var n=e.app_user,a=e.app_id,r=e.profile,i=e.directory_profile;return{appUserId:n.id,appIcon:Object(Qe.b)(r,48,t),appIconLarge:Object(Qe.b)(r,88,t),appId:a,appName:r.name,appSupportUrl:i.support_url,appHomepageUrl:i.home_url}}(l,s))}var c=Object(U.e)(e,a);return R()({workspaceName:i,userIsAppmin:!Object(Je.a)(e,"app_whitelist_enabled")||Object(W.k)(e),showModal:Object(Ye.b)(c),isLoading:Object(Ye.d)(c),hasError:Object(Ye.c)(c)||Object(g.a)(o),showWildcardToggle:Object(U.a)(c,"channel"),featureWtaModalM11n:Object(B.m)(e,"feature_wta_modal_m11n")},o,c,{clogger:Object(lt.a)({state:e})})},Nt)(wt),At=Object(s.b)("Opens app app management modal in client",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.a.createElement(Tt,n);e(Object(o.e)({element:a}))});At.meta={name:"openAppManagementModal",key:"actionsOpenAppManagementModalOpenAppManagementModal",description:"Opens app app management modal in client"},At.propTypes={serviceId:i.b.string,appProfile:i.b.object,onClose:i.b.func,showAppDirectoryLink:i.b.bool,onUninstall:i.b.func,isMobile:i.b.bool,referringEventId:i.b.string,referringUiContext:i.b.object};t.a=At},tEVE:function(e,t,n){},tFl5:function(e,t,n){},tLal:function(e,t,n){},tMdt:function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("zmn3"),p=n("fujP"),m=n("ifKl"),h=n("aK/h"),b=n("kxpR"),f=n.n(b),g=n("XHGt"),_=n("TSYQ"),v=n.n(_),y=n("pfyZ"),k=n("RAhH"),O=n("nNoG"),C=n("od5y"),E=n("XLFM"),j=n("lek6"),S=n("MREy"),I=new O.b("message"),w=(h.b.string.isRequired,h.b.string.isRequired,h.b.bool,h.b.shape({loading:h.b.bool,isHighlight:h.b.bool,feedbackOptions:h.b.object,justification:h.b.string,feedback:h.b.string}),h.b.func,h.b.func,{isHovered:!1,sliHighlight:null,onSliHighlightsDefaultFeedback:m.a,onSliHighlightsSecondaryFeedbackOption:m.a}),N=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onSliHighlightsFeedbackDefaultPositive=n.onSliHighlightsFeedbackDefaultPositive.bind(n),n.onSliHighlightsFeedbackDefaultNegative=n.onSliHighlightsFeedbackDefaultNegative.bind(n),n.renderNegativeFeedbackMenu=n.renderNegativeFeedbackMenu.bind(n),n}return u()(t,e),o()(t,[{key:"onSliHighlightsFeedbackDefaultPositive",value:function(){this.props.sliHighlight.feedback||this.props.onSliHighlightsDefaultFeedback(!0)}},{key:"onSliHighlightsFeedbackDefaultNegative",value:function(){this.props.sliHighlight.feedback||this.props.onSliHighlightsDefaultFeedback(!1)}},{key:"renderPositiveHighlightLabel",value:function(){return f.a.createElement("span",null,f.a.createElement("span",{className:"c-message__label__highlight_title"},I.t("Highlight")),(this.props.sliHighlight.justification||this.props.isHovered)&&" \u2014 ",this.renderFeedbackControls())}},{key:"renderFeedbackControls",value:function(){var e=this.props,t=e.isHovered,n="default_positive"===e.sliHighlight.feedback;if(t){var a=v()({"c-message__label__highlight_positive":!0,"c-message__label__highlight_positive--active":n}),r=v()({"c-message__label__highlight_negative":!0,"c-message__label__highlight_negative--inactive":n});return f.a.createElement("span",null,I.t("Is this helpful?"),f.a.createElement(k.c,{tip:n?I.t("Thank you!"):I.t("This was helpful")},f.a.createElement(E.c,{className:a,onClick:this.onSliHighlightsFeedbackDefaultPositive},f.a.createElement(C.b,{type:"thumbs-up",size:"inherit",inline:!0}))),f.a.createElement(k.c,{tip:I.t("This wasn\u2019t helpful")},f.a.createElement(E.c,{className:r,onClick:this.onSliHighlightsFeedbackDefaultNegative},f.a.createElement(C.b,{type:"thumbs-down",size:"inherit",inline:!0}))))}return f.a.createElement(j.a,{text:this.props.sliHighlight.justification})}},{key:"renderNegativeHighlightLabel",value:function(){return f.a.createElement("span",null,f.a.createElement("strong",null,I.t("What\u2019s not working about this highlight?"))," ",I.t("Let us know, and we\u2019ll adjust."),"\xa0",f.a.createElement(S.e,{renderMenu:this.renderNegativeFeedbackMenu,position:"right",offsetX:0,offsetY:0},f.a.createElement(E.c,{className:"c-message__label__feedback_dropdown btn_unstyle sk_highlight_accent"},I.t("Give Feedback")," ",f.a.createElement(C.b,{type:"chevron-down",inline:!0}))))}},{key:"renderNegativeFeedbackMenu",value:function(e){var t=this,n=this.props.sliHighlight.feedbackOptions;return Object(p.a)(n)?null:f.a.createElement(S.f,e,Object(d.a)(n.negative,function(e){return f.a.createElement(S.b,{key:e.args.ts,label:f.a.createElement(j.a,{text:e.text,noLinking:!0,showTooltips:!1}),onSelected:function(){return t.props.onSliHighlightsSecondaryFeedbackOption(e.args)}})}))}},{key:"render",value:function(){var e=this.props.sliHighlight;return e.feedback&&"default_positive"!==e.feedback?this.renderNegativeHighlightLabel():this.renderPositiveHighlightLabel()}}]),t}(b.PureComponent);N.displayName="SliHighlightsMessageLabel",N.defaultProps=w,t.a=Object(g.b)(null,function(e,t){var n=t.channelId,a=t.ts,r=t.sliHighlight;return{onSliHighlightsDefaultFeedback:function(t){return e(Object(y.g)({channelId:n,ts:a,feedback:t?"default_positive":"default_negative",leftFeedback:t,args:r.feedbackOptions[t?"default_positive":"default_negative"].args,requestId:r.requestId}))},onSliHighlightsSecondaryFeedbackOption:function(t){return e(Object(y.g)({channelId:n,ts:a,feedback:"negative",leftFeedback:!0,args:t,requestId:r.requestId}))}}})(N)},thgq:function(e,t,n){},tx91:function(e,t,n){},uC0n:function(e,t,n){},uI5u:function(e,t,n){"use strict";var a=n("YEIV"),r=n.n(a),i=n("iCc5"),o=n.n(i),s=n("V7oC"),l=n.n(s),c=n("FYw3"),u=n.n(c),d=n("mRg0"),p=n.n(d),m=n("ifKl"),h=n("kxpR"),b=n.n(h),f=n("aK/h"),g=n("nNoG"),_=n("TSYQ"),v=n.n(_),y=n("tn36"),k=n("VymY"),O=n("18Pa"),C=n("lfjV"),E=(n("K1NN"),new g.b("sk_banner")),j=(f.b.oneOf(["info","success","warning","urgent","neutral"]),f.b.any.isRequired,f.b.bool,f.b.bool,f.b.number,f.b.string,f.b.bool,f.b.string,f.b.func,f.b.func,f.b.func,{type:"success",showCloseButton:!0,autoFadeout:!1,topOffset:0,className:null,isFixedPosition:!0,"data-qa":"banner",onClose:m.a,onFocus:m.a,onBlur:m.a}),S=function(e){function t(e){o()(this,t);var n=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isShowing:!0,opacity:1},Object(y.a)(n,["handleCloseButtonClick","focus"]),n.handleCloseButtonClick=n.handleCloseButtonClick.bind(n),n.cancelAnimation=m.a,n.banner=b.a.createRef(),n}return p()(t,e),l()(t,[{key:"componentDidMount",value:function(){this.fadeOutMaybe()}},{key:"componentWillUnmount",value:function(){this.cancelAnimation()}},{key:"handleCloseButtonClick",value:function(){var e=this.props.onClose;this.setState(function(){return{isShowing:!1}}),e()}},{key:"fadeOutMaybe",value:function(){var e=this,t=this.props,n=t.autoFadeout,a=t.onClose;if(n){var r=Object(C.a)({delay:2e3,fromValue:1,toValue:0,duration:2e3,easing:"easeOutQuad",onTick:function(t){var n=t.value,a=t.nextTick;e.setState(function(){return{opacity:n}}),a()},onComplete:function(){e.setState(function(){return{isShowing:!1}}),a()}});this.cancelAnimation=r.cancel}}},{key:"focus",value:function(){var e=Object(k.b)(this.banner.current);e&&e.focus()}},{key:"render",value:function(){var e,t=this.props,n=t.type,a=t.children,i=t.showCloseButton,o=t.topOffset,s=t.className,l=t.isFixedPosition,c=t["data-qa"],u=this.state,d=u.isShowing,p=u.opacity;if(!d)return!1;var m=v()("c-banner",(e={},r()(e,"c-banner--"+n,!!n),r()(e,"c-banner--fixed",l),e),s),h="warning"!==n?"dark":void 0;return b.a.createElement("div",{role:"alert",className:m,style:{top:o,opacity:p},"data-qa":c,ref:this.banner,onFocus:this.props.onFocus,onBlur:this.props.onBlur},b.a.createElement("div",{className:"c-banner__text"},a),i&&b.a.createElement(O.a,{className:"c-banner__close",icon:"times",onClick:this.handleCloseButtonClick,backgroundStyle:h,"aria-label":E.t("Dismiss")}))}}]),t}(h.PureComponent);S.displayName="Banner",S.defaultProps=j,S.displayName="Banner";var I=S;t.a=I},uS0p:function(e,t,n){},um7Q:function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return o});n("NFsq"),n("CpTu");var a=n("t85p"),r=n("cErB");var i=function(e,t){return"https://"+function(e,t){return(t||"my")+"."+Object(r.d)(Object(a.e)(e,"abs_root_url"))}(e,t)},o=function(e,t){return"https://"+function(e,t){return t+".enterprise."+Object(r.d)(Object(a.e)(e,"abs_root_url"))}(e,t)}},"v+20":function(e,t,n){},vKzi:function(e,t,n){},vOUN:function(e,t,n){},vP1t:function(e,t,n){"use strict";var a=n("QbLZ"),r=n.n(a),i=n("iCc5"),o=n.n(i),s=n("V7oC"),l=n.n(s),c=n("FYw3"),u=n.n(c),d=n("mRg0"),p=n.n(d),m=n("ifKl"),h=n("kxpR"),b=n.n(h),f=n("aK/h"),g=n("XHGt"),_=n("TSYQ"),v=n.n(_),y=n("yPgC"),k=n("yHhI"),O=n("Zr7G"),C=n("uvIC"),E=n("RfGh"),j=n("9gIX"),S=n("MAit"),I=(y.a.File().isRequired,y.a.File().isRequired,f.b.number,f.b.func,f.b.string,f.b.bool,f.b.func,f.b.object,f.b.object,{index:null,clogLinkClick:m.a,className:null,fullWidth:!1,onClick:m.a,logger:{error:m.a},telemeter:O.d}),w=function(e){function t(e){o()(this,t);var n=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return p()(t,e),l()(t,[{key:"onClick",value:function(e){e.preventDefault(),e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),this.props.onClick(e,{file:this.props.file,index:this.props.index})}},{key:"componentDidCatch",value:function(e,t){this.props.telemeter.count("search_ui_files_result_file_render_error"),this.props.logger.error("IMPROVED_SEARCH","Error caught by SearchFile "+t.componentStack)}},{key:"render",value:function(){var e=this.props,t=e.file,n=e.fileFromRedux,a=e.clogLinkClick,i=e.fullWidth,o=v()("p-search_file",this.props.className),s=n&&n.title,l=n&&n.name,c=r()({},n,{title:t.search_title||t.title||s,name:t.search_name||t.name||l});return b.a.createElement(E.a,{file:c,className:o,fullWidth:i,clogLinkClick:a,"data-qa":"search_result_file"},b.a.createElement(j.a,{file:c,onClick:this.onClick},b.a.createElement(S.a,{file:c,excludeTime:!0})))}}]),t}(h.PureComponent);w.displayName="SearchFile",w.defaultProps=I;t.a=Object(g.b)(function(e,t){var n=t.file;return{fileFromRedux:n?Object(C.c)(e,n.id):null,logger:Object(k.a)({state:e}),telemeter:Object(O.c)({state:e})}})(w)},vVZ5:function(e,t,n){"use strict";var a=n("CpTu"),r=n("kxpR"),i=n.n(r),o=n("XfeM"),s=n("dhvi"),l=n("sk9p"),c=n.n(l),u=n("iCc5"),d=n.n(u),p=n("V7oC"),m=n.n(p),h=n("FYw3"),b=n.n(h),f=n("mRg0"),g=n.n(f),_=n("OZf9"),v=n("7EGn"),y=n("HI9p"),k=n("S1sa"),O=n("Z0Cl"),C=n("zmn3"),E=n("ifKl"),j=n("aK/h"),S=n("tn36"),I=n("TSYQ"),w=n.n(I),N=n("XHGt"),T=n("uPpK"),A=n("nNoG"),R=n("bmfP"),P=n("U3Q0"),M=n("eK0w"),x=n("kd6D"),F=n("Zhly"),L=n("a69O"),D=n("XLFM"),U=n("od5y"),B=n("jYCR"),q=n("t85p"),H=n("4M+g"),W=n("brL+"),G=n("S3eg"),K=n("RMmo"),V=n("6kok"),z=n("Fdc0"),Y=n("5mKg"),Q=n("Zr7G"),X=n("rtjy"),J=n("k2C/"),Z=n("toaU"),$=n("kLJo"),ee=n("V2L1"),te=n("ndUn"),ne=n("5tH5");n("/7Bh");function ae(e,t){var n=[];return Object(_.a)(e,function(e){var a=e.item;if(!Object(J.b)(a.id)){if(Object(J.a)(a.id)){if(a.id===t)return;if(!Object(Y.K)(a))return}n.push(a)}}),n}var re=new A.b("quick_switcher"),ie=(j.b.bool,j.b.func,j.b.func.isRequired,j.b.func.isRequired,j.b.func.isRequired,j.b.string.isRequired,j.b.func.isRequired,j.b.bool.isRequired,j.b.object.isRequired,j.b.func.isRequired,j.b.func.isRequired,{featureSonicQuickSwitcher:!1,search:E.a}),oe={open:!1,searchQuery:"",results:[],index:0,deletedResults:[],initialFocusSet:!1,searchMetaData:[]},se={entities:{appActions:!0,channels:{includePublic:!0,includePrivate:!0,includeFromAnotherTeam:!0,includeMpims:!0,includeArchived:!0,onlyIfMember:!1,searchPreviousNames:!0,onlyVisibleMpims:!1},members:{includeSelf:!0,includeSlackbot:!0,includeBots:!0,onlyLocalTeam:!1,onlyAdmins:!1,includeDeleted:!0},teams:!0,userGroups:!1,views:!1},limit:24,sort:{preferExactMatch:!0,frecency:!0,preferChannelsUserBelongsTo:!0,selfFirst:!0},allowEmptyQuery:!0,returnMetadata:!0,tiered:!0},le=function(e){function t(e){d()(this,t);var n=b()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(S.a)(n,["onInput","renderResult","onShowDeactivatedClick","onItemClick","handleUpOrShiftTabKey","handleDownOrTabKey","handleEnterKey","getBestFormerName"]),n.state=oe,n.searchInputRef=i.a.createRef(),n}return g()(t,e),m()(t,[{key:"componentDidMount",value:function(){this.bindKeyCommands(),this.setResultsToUnreadsAndDrafts()}},{key:"componentDidUpdate",value:function(e,t){var n=this.props.telemeter;n.getLatestMark("qs_input_change")&&n.measureAndClear("qs_input_change","qs_result_rendering_ms"),!t.initialFocusSet&&this.searchInputRef.current&&(this.setInitialFocus(),this.searchInputRef.current.focus())}},{key:"componentWillUnmount",value:function(){this.unbindKeyCommands()}},{key:"onItemClick",value:function(){this.openChannelOrDm()}},{key:"onItemHover",value:function(e){this.state.index!==e&&this.setState(function(){return{index:e}})}},{key:"onShowDeactivatedClick",value:function(){var e=Object(O.a)(this.state.results,function(e){return"hasDeactivated"!==e.id});e=e.concat(this.state.deletedResults),this.setState(function(){return{results:e,deletedResults:[]}})}},{key:"onInput",value:function(e){this.props.telemeter.mark("qs_input_change");var t=e.target.value;this.setState(function(){return{searchQuery:t}}),this.search(t)}},{key:"setResultsToUnreadsAndDrafts",value:function(){this.resetResultsState(this.props.getDraftAndUnreadChannels())}},{key:"setInitialFocus",value:function(){this.setState(function(){return{initialFocusSet:!0}})}},{key:"setSearchMetaData",value:function(e){this.setState(function(){return{searchMetaData:e}})}},{key:"getBestFormerName",value:function(e){var t=this.state.searchMetaData,n=Object(a.a)(t,["item.id",e]);if(!n)return null;var r=Object(v.a)(n,"bestPreviousNameMatch");return r||null}},{key:"handleUpOrShiftTabKey",value:function(e){e.preventDefault(),e.stopPropagation();var t=this.state,n=t.index,a=t.results;this.setState(function(){return{index:0===n?a.length-1:n-1}})}},{key:"handleDownOrTabKey",value:function(e){e.preventDefault(),e.stopPropagation();var t=this.state,n=t.index,a=t.results;this.setState(function(){return{index:(n+1)%a.length}})}},{key:"handleEnterKey",value:function(e){e.preventDefault(),this.openChannelOrDm()}},{key:"bindKeyCommands",value:function(){var e=[{keys:["up","shift+tab"],handler:this.handleUpOrShiftTabKey},{keys:["down","tab"],handler:this.handleDownOrTabKey},{keys:["enter"],handler:this.handleEnterKey}];this.keyCommands||(this.keyCommands=new K.a(document.body)),this.keyCommands.bindAll(e)}},{key:"unbindKeyCommands",value:function(){this.keyCommands&&this.keyCommands.reset()}},{key:"openChannelOrDm",value:function(){var e=this.state,t=e.results,n=e.index,a=e.searchQuery,r=this.props,i=r.currentTeamId,o=r.getTeamIdForChannelFromAnotherTeam,s=t[n],l=s.id;if(Object(J.a)(l))Object($.g)(Z.a,{teamId:l},{reason:"quickswitcher:openChannelOrDm"});else{var c=Object(V.cb)(s)?o(s):i;this.props.recordFrecencyEvent({id:l,text:a}),this.props.setPrimaryView({id:l,teamId:c}),this.setState(function(){return oe}),this.props.closeModal()}}},{key:"search",value:function(e){var t=this;return this.remoteSearchPromise&&this.remoteSearchPromise.isPending()&&this.remoteSearchPromise.cancel(),e?this.props.search({query:e,options:se}).then(function(e){t.remoteSearchPromise=e.promise,t.setSearchMetaData(e);var n=ae(e,t.props.currentTeamId);return t.resetResultsState(n),t.remoteSearchPromise.then(function(e){t.setSearchMetaData(e);var n=ae(e,t.props.currentTeamId);t.resetResultsState(n,!1)})}):(this.setResultsToUnreadsAndDrafts(),null)}},{key:"resetResultsState",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=Object(k.a)(e,function(e){return Object(z.mb)(e)||t.props.isChannelDeletedMember(e)}),r=c()(a,2),i=r[0],o=r[1],s=void 0,l=void 0;i.length>1&&o.length?(s=o.concat({id:"hasDeactivated"}),l=i):(s=o.concat(i),l=[]);var u=this.state,d=u.index,p=u.results,m=0;if(!n&&p.length){var h=p[d];h&&h.id&&(m=Object(y.a)(s,function(e){return h.id===e.id}))}this.setState(function(){return{results:s,deletedResults:l,index:-1===m?0:m}})}},{key:"renderResult",value:function(e){var t=this;if(!this.props.featureSonicQuickSwitcher)return null;var n=this.state.results[e].id,a=this.getBestFormerName(n),r=e===this.state.index;if("hasDeactivated"===n)return this.renderDeletedOptionRow();var o=w()("p-quick_switcher__searcher_result",{"p-quick_switcher__searcher_result--selected":e===this.state.index}),s=void 0;return s=n===ne.a.allThreads?i.a.createElement(L.a,{invert:r,label:re.t("Threads"),prefix:i.a.createElement(U.b,{type:"comment-alt",size:"inherit"}),"data-qa":"quick_switcher_result_threads"}):Object(J.a)(n)?i.a.createElement(te.a,{id:n,isActive:r}):i.a.createElement(F.a,{channelId:n,isActive:r,"data-qa":"quick_switcher_result_channel",bestFormerName:a,displayFormerNames:x.d.bestOnly}),i.a.createElement(D.c,{onClick:this.onItemClick,onMouseMove:function(){return t.onItemHover(e)},className:o,"data-qa":"quick_switcher_result"},s)}},{key:"renderEmptyResults",value:function(){if(!this.props.featureSonicQuickSwitcher)return null;var e=this.state.searchQuery,t=re.t("Create a channel named #{channelName}",{channelName:e}),n=re.t("No matches found. Did you spell it correctly?");return i.a.createElement("div",{className:"p-quick_switcher__empty_results_container","data-qa":"quick_switcher_empty_results"},i.a.createElement("span",{className:"p-quick_switcher__empty_results_label"},n),i.a.createElement(ee.a,null,i.a.createElement(D.d,{type:"outline",size:"small"},t)))}},{key:"renderDeletedOptionRow",value:function(){var e=w()("p-quick_switcher__show_deactivated"),t=re.t("Show { deletedLength, plural, =1 { # deactivated account } other { # deactivated accounts }}",{deletedLength:this.state.deletedResults.length,fallbackHash:"feba4c19a527da3284a69be904d33a90e6fb3f17",fallbackHashNs:"jumper"});return i.a.createElement(D.c,{onClick:this.onShowDeactivatedClick,className:e},t)}},{key:"renderResultsFromSearcher",value:function(){var e=this,t=this.state,n=t.results,a=t.index;this.keys=Object(C.a)(n,"id");var r=this.keys[a],o=Math.min(38*n.length,300);return i.a.createElement("div",{"data-qa":"quick_switcher_results"},i.a.createElement(T.a,{disableHeight:!0},function(t){var n=t.width;return i.a.createElement(M.a,{width:n,height:o,keys:e.keys,rowRenderer:e.renderResult,itemToScroll:r,animateOnScroll:!1})}))}},{key:"renderResults",value:function(){return this.state.results.length?this.renderResultsFromSearcher():this.state.searchQuery?this.renderEmptyResults():null}},{key:"renderFooter",value:function(){var e=re.rt('{iconUpArrow}{iconDownArrow} to navigate {iconEnter} to select <strong className="margin_left_150">esc</strong> to dismiss',{iconUpArrow:i.a.createElement(U.b,{type:"arrow-large-up",size:"inherit",className:"p-quick_switcher__footer_icon"}),iconDownArrow:i.a.createElement(U.b,{type:"arrow-large-down",size:"inherit",className:"p-quick_switcher__footer_icon"}),iconEnter:i.a.createElement(U.b,{type:"enter",size:"inherit",className:"p-quick_switcher__footer_icon margin_left_150"}),fallbackHash:"6073ad556716a850199fe235793ca2e2a12dc636",fallbackHashNs:"jumper"});if(!this.props.featureOfflineMode)return i.a.createElement("div",{className:"t-display-as-micro"},e);var t=re.rt("{iconOffline} No connection \u2014\xa0some results may not be available.",{iconOffline:i.a.createElement(U.b,{type:"cloud-offline",size:"inherit",className:"p-quick_switcher__footer_icon p-quick_switcher__footer_icon_offline"})});return i.a.createElement("div",{className:"t-display-as-micro"},i.a.createElement(R.b,null,e),i.a.createElement(R.a,null,t))}},{key:"render",value:function(){return this.props.featureSonicQuickSwitcher?i.a.createElement(P.b,{showHeader:!1,showFooter:!0,className:"p-quick_switcher","data-qa":"quick_switcher",showCancelButton:!1,showCloseButton:!1,showGoButton:!1,footerText:this.renderFooter(),overlayClassName:"p-quick_swticher_overlay",titleAria:re.t("Quick Switcher")},i.a.createElement("input",{placeholder:re.t("Jump to..."),className:"p-quick_switcher__input","data-qa":"quick_switcher_input",onChange:this.onInput,value:this.state.searchQuery,ref:this.searchInputRef,spellCheck:!1}),this.renderResults()):null}}]),t}(r.PureComponent);le.displayName="QuickSwitcher",le.defaultProps=ie;var ce={search:B.c,setPrimaryView:G.a,closeModal:s.a,recordFrecencyEvent:X.c},ue=Object(N.b)(function(e){return{featureSonicQuickSwitcher:Object(q.m)(e,"feature_sonic_quick_switcher"),getDraftAndUnreadChannels:function(){return Object(H.i)(e)},getTeamIdForChannelFromAnotherTeam:function(t){return Object(V.Zb)(e,t)},isChannelDeletedMember:function(t){return Object(V.mb)(e,t)},currentTeamId:Object(W.b)(e),featureOfflineMode:Object(q.m)(e,"feature_offline_mode"),telemeter:Object(Q.c)({state:e})}},ce)(le),de=n("3zPy"),pe=n("jeHR"),me=n("YYb+"),he=n("iH/p"),be=n("1F8+"),fe=Object(o.b)("toggle the omniswitcher using command+k",function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).key;Object(me.e)(t())?e(Object(be.a)()):e(Object(he.g)({key:n}))});fe.meta={name:"toggleFromQuickSwitcherCmd",key:"actionsUniversalSearchToggleFromToggleFromQuickSwitcherCmd",description:"toggle the omniswitcher using command+k"},fe.propTypes={key:j.b.string.isRequired},n.d(t,"b",function(){return _e});var ge="quick-switcher";function _e(e){var t=Object(s.c)(e);return!!Object(a.a)(t,{name:ge})}var ve=Object(o.b)("maybe shows quick switcher modal",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.event,o=n.keyCode;if(r&&r.preventDefault(),Object(pe.b)(t())){var l=void 0;return o&&o===de.codes.k?l="k":o&&o===de.codes.t&&(l="t"),e(fe({key:l||"button"})),!0}return!!function(e,t){var n=Object(s.c)(t());Object(a.a)(n,{name:ge})?e(Object(s.a)()):e(Object(s.e)({element:i.a.createElement(ue,null),name:ge}))}(e,t)});ve.meta={name:"maybeShowQuickSwitcher",key:"componentsQuickSwitcherQuickSwitcherToggleMaybeShowQuickSwitcher",description:"maybe shows quick switcher modal"},ve.propTypes={event:j.b.object,keyCode:j.b.number};t.a=ve},vr4i:function(e,t,n){},vv9w:function(e,t,n){},wMxR:function(e,t,n){},wb76:function(e,t,n){},wljo:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var a=n("nNoG"),r=n("9/ob"),i=n("0f2Y"),o=(n("aK/h"),n("kxpR")),s=n.n(o),l=new a.b("search");function c(e){var t=e.onClick,n=e.short,a=e.className;return s.a.createElement(r.a,{enabled:["feature_tinyspeck"]},s.a.createElement("span",{className:a},n?"":l.t("Something off?")+" ",s.a.createElement(i.a,{onClick:t},l.t("Give feedback"))))}c.displayName="FeedbackLink",c.defaultProps={className:"",short:!1}},wvq5:function(e,t,n){"use strict";var a=n("rEtx"),r=n.n(a);t.a=function(e,t,n){if(!t||!t.setAttribute)throw new TypeError("React mount point must be a valid HTML element");t.setAttribute("data-reactroot",""),r.a.render(e,t,n)}},"x++y":function(e,t,n){},x4cI:function(e,t,n){},xRgT:function(e,t,n){"use strict";var a=n("QbLZ"),r=n.n(a),i=n("iCc5"),o=n.n(i),s=n("V7oC"),l=n.n(s),c=n("FYw3"),u=n.n(c),d=n("mRg0"),p=n.n(d),m=n("sk9p"),h=n.n(m),b=n("m1cH"),f=n.n(b),g=n("ifKl"),_=n("kxpR"),v=n.n(_),y=n("XHGt"),k=n("aK/h"),O=n("nNoG"),C=n("TSYQ"),E=n.n(C),j=n("ngQI"),S=n("tn36"),I=n("g5qt"),w=n("lhZz"),N=n("kLJo"),T=n("toaU"),A=n("HuaI"),R=n("IY6O"),P=n("s5Is"),M=n("t85p"),x=n("Tc5z"),F=n("peKf"),L=n("SNtu"),D=n("rWF5"),U=n("RQI5"),B=n("2jER"),q=n("/Rx2"),H=n("Smdl"),W=n("yHhI"),G=n("negh"),K=n("kOzZ"),V=n("JvzI"),z=n("od5y"),Y=n("RAhH"),Q=n("llxT"),X=n("XL7r"),J=n("lE2N"),Z=n("MREy"),$=n("5zUo"),ee=n("v8Qo"),te=n("Ejsr"),ne=n("RMmo"),ae=n("2fzK"),re=n("2Y1Y"),ie=n("tVnY"),oe=n("Bce3"),se=n("XLFM"),le=(k.b.node,k.b.string,k.b.bool,k.b.oneOfType([k.b.string,k.b.func]),k.b.string.isRequired,k.b.func.isRequired,k.b.func,{children:null,className:void 0,disabled:!1,tooltip:void 0,onTrigger:g.a}),ce=function(e){function t(e){o()(this,t);var n=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onMouseDown=n.onMouseDown.bind(n),n.onMouseUp=n.onMouseUp.bind(n),n.pressTimer=void 0,n}return p()(t,e),l()(t,[{key:"componentWillUnmount",value:function(){this.pressTimer&&clearTimeout(this.pressTimer),window.removeEventListener("mouseup",this.onMouseUp)}},{key:"onMouseDown",value:function(e){var t=this;this.props.disabled||0===e.button&&(e.persist(),this.pressTimer=setTimeout(function(){return t.props.onTrigger(e)},300),window.addEventListener("mouseup",this.onMouseUp))}},{key:"onMouseUp",value:function(){this.pressTimer&&clearTimeout(this.pressTimer),window.removeEventListener("mouseup",this.onMouseUp)}},{key:"render",value:function(){var e=this.props,t=e.disabled,n=e.tooltip,a=e["aria-label"],r=E()("p-global_nav__top_button",this.props.className,{"p-global_nav__top_button--disabled":t});return v.a.createElement(function(e){var n=e.tip,a=e.children;return t||!n?a:v.a.createElement(Y.c,{tip:n,delay:800,position:"bottom",offsetY:Gn,tipClassName:"p-global_nav__top_history_tip"},a)},{tip:n},v.a.createElement(se.c,{className:r,disabled:t,onClick:this.props.onClick,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,"aria-label":a},this.props.children))}}]),t}(_.PureComponent);ce.displayName="HistoryButton",ce.defaultProps=le;var ue=ce,de=n("brL+"),pe=n("4Twu"),me=new O.b("global_nav"),he=(k.b.string,k.b.string,k.b.string,k.b.string,k.b.string,k.b.string,k.b.bool,{viewId:void 0,viewName:void 0,teamId:void 0,teamName:void 0,teamIcon:void 0,currentTeamId:void 0,featureGlobalNav:!1}),be=function(e){function t(){return o()(this,t),u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p()(t,e),l()(t,[{key:"renderTeamIcon",value:function(){var e=this.props,t=e.teamIcon,n=e.teamName;return v.a.createElement(Y.c,{tip:n,position:"bottom",zIndex:"above_fs"},v.a.createElement("div",{className:"p-global_nav__top_history_item_team_icon",style:{backgroundImage:"url("+t+")"}}))}},{key:"renderThreads",value:function(){var e=this.props,t=e.teamId,n=e.currentTeamId;if(!e.featureGlobalNav)return null;var a=t===n?v.a.createElement(z.b,{type:"small-reply",className:"p-global_nav__top_history_item_synth_icon"}):this.renderTeamIcon(),r=me.t("Threads");return v.a.createElement(_.Fragment,null,a,r)}},{key:"renderUnreads",value:function(){var e=this.props,t=e.teamId,n=e.currentTeamId;if(!e.featureGlobalNav)return null;var a=t===n?v.a.createElement(z.b,{type:"list",className:"p-global_nav__top_history_item_synth_icon"}):this.renderTeamIcon(),r=me.t("All Unreads");return v.a.createElement(_.Fragment,null,a,r)}},{key:"render",value:function(){var e=this.props,t=e.viewId,n=e.viewName,a=e.teamId,r=e.currentTeamId;return"Vall_threads"===t?this.renderThreads():"Vall_unreads"===t?this.renderUnreads():a===r?v.a.createElement(pe.a,{channelId:t,className:"p-global_nav__top_history_item_channel_name"}):v.a.createElement(_.Fragment,null,this.renderTeamIcon(),n)}}]),t}(_.Component);be.displayName="HistoryItem",be.defaultProps=he;var fe=Object(y.b)(function(e){return{currentTeamId:Object(de.b)(e),featureGlobalNav:Object(M.m)(e,"feature_global_nav")}})(be),ge=new O.b("global_nav"),_e=(k.b.object.isRequired,k.b.func,k.b.func,k.b.func,k.b.func,k.b.func,k.b.bool,k.b.object.isRequired,{back:g.a,forward:g.a,index:g.a,sync:g.a,action:k.b.func,featureGlobalNav:!1}),ve=function(e){function t(e){o()(this,t);var n=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onBackClick=n.onBackClick.bind(n),n.onForwardClick=n.onForwardClick.bind(n),n.renderBackMenu=n.renderBackMenu.bind(n),n.renderForwardMenu=n.renderForwardMenu.bind(n),n.renderBackTooltip=n.renderBackTooltip.bind(n),n.renderForwardTooltip=n.renderForwardTooltip.bind(n),n}return p()(t,e),l()(t,[{key:"componentDidMount",value:function(){var e=this;if(Object(ie.c)()){Object(oe.b)(function(){return e.props.sync()});var t=Object(D.B)(),n=[{keys:t?"alt+left":["command+[","command+left"],handler:function(t){e.shouldPreventShortcut(t)||(t.preventDefault(),e.props.action("GLOBAL-NAV","Navigating back in history with key command"),e.props.back(),e.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"KEYDOWN",ui_component:"GLOBAL_NAV",ui_element:"NAV_HISTORY_KEYBOARD_BACK"}}}))}},{keys:t?"alt+right":["command+]","command+right"],handler:function(t){e.shouldPreventShortcut(t)||(t.preventDefault(),e.props.action("GLOBAL-NAV","Navigating forward in history with key command"),e.props.forward(),e.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"KEYDOWN",ui_component:"GLOBAL_NAV",ui_element:"NAV_HISTORY_KEYBOARD_FORWARD"}}}))}}];this.keyCommands||(this.keyCommands=new ne.a),this.keyCommands.bindAll(n)}}},{key:"componentWillUnmount",value:function(){this.keyCommands&&this.keyCommands.reset()}},{key:"onBackClick",value:function(){this.props.back(),this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_HISTORY_BACK"}}})}},{key:"onForwardClick",value:function(){this.props.forward(),this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_HISTORY_FORWARD"}}})}},{key:"shouldPreventShortcut",value:function(e){if(e.metaKey&&("ArrowRight"===e.key||"ArrowLeft"===e.key)&&!(Object(ae.a)()&&Object(re.g)(document.activeElement)||document.activeElement===document.body))return!0;return!1}},{key:"renderStackMenu",value:function(e,t){var n=this,a=function(e){return e.viewId+":"+e.teamId},i=Object(J.a)(e,a).map(function(e){return{label:v.a.createElement(fe,e),key:a(e),click:function(){n.props.index({target:e.index}),n.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_HISTORY_STACK_ITEM"}}})},className:"p-global_nav__top_history_item"}});return v.a.createElement(Z.a,r()({},t,{template:i}))}},{key:"renderBackMenu",value:function(e){var t=Object(te.a)(this.props.history);return t?(this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_HISTORY_BACK_STACK"}}}),this.renderStackMenu(t.reverse(),e)):null}},{key:"renderForwardMenu",value:function(e){var t=Object(te.b)(this.props.history);return t?(this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_HISTORY_FORWARD_STACK"}}}),this.renderStackMenu(t,e)):null}},{key:"renderBackTooltip",value:function(){if(!this.props.featureGlobalNav)return null;var e=Object(D.p)()?"\u2318[":ge.t("Alt+Left Arrow");return v.a.createElement(_.Fragment,null,ge.t("Go back"),v.a.createElement("span",{className:"p-global_nav__tip_shortcut"},e))}},{key:"renderForwardTooltip",value:function(){if(!this.props.featureGlobalNav)return null;var e=Object(D.p)()?"\u2318]":"Alt+Right Arrow";return v.a.createElement(_.Fragment,null,ge.t("Go forward"),v.a.createElement("span",{className:"p-global_nav__tip_shortcut"},e))}},{key:"render",value:function(){var e=this.props,t=e.history;if(!e.featureGlobalNav)return null;if(!Object(ie.c)())return null;var n=!Object(te.a)(t)||!Object(te.a)(t).length,a=!Object(te.b)(t)||!Object(te.b)(t).length,i={position:"bottom-left",offsetX:-12,offsetY:Kn,customTrigger:!0};return v.a.createElement(_.Fragment,null,v.a.createElement(Z.e,r()({renderMenu:this.renderBackMenu},i),v.a.createElement(ue,{className:"p-global_nav__top_history p-global_nav__top_history--back",onClick:this.onBackClick,disabled:n,tooltip:this.renderBackTooltip,"aria-label":ge.t("Go back")},v.a.createElement(z.b,{type:"chevron-large-left",className:"p-global_nav__top_button_icon"}))),v.a.createElement(Z.e,r()({renderMenu:this.renderForwardMenu},i),v.a.createElement(ue,{className:"p-global_nav__top_history",onClick:this.onForwardClick,disabled:a,tooltip:this.renderForwardTooltip,"aria-label":ge.t("Go forward")},v.a.createElement(z.b,{type:"chevron-large-right",className:"p-global_nav__top_button_icon"}))))}}]),t}(_.Component);ve.displayName="History",ve.defaultProps=_e;var ye={back:ee.a,forward:ee.b,index:ee.c,sync:ee.f},ke=Object(y.b)(function(e){return{history:Object($.b)(e),featureGlobalNav:Object(M.m)(e,"feature_global_nav"),action:Object(W.a)({state:e}).action,clogger:Object(K.a)({state:e})}},ye)(ve),Oe=n("1hAG"),Ce=n("5mKg"),Ee=n("bmfP"),je=n("jo6Y"),Se=n.n(je),Ie=n("6Jf9"),we=n("SQvH"),Ne=n("XUHR"),Te=n("qN/r"),Ae=n("ROZo"),Re=Object(Ae.b)("TS.ui.workspaces.start"),Pe=n("8vJI"),Me=n("N/g+"),xe=Object(Ae.b)("TS.magic_login.execute"),Fe=(k.b.string.isRequired,k.b.string,k.b.string,k.b.string,{org:void 0,icon:void 0,url:void 0}),Le=function(e){var t=e.name,n=e.icon,a=e.org,r=e.url;return v.a.createElement("div",{className:"p-global_nav__top_menu_header"},v.a.createElement("div",{className:"p-global_nav__top_menu_header_icon",style:{backgroundImage:n&&"url("+n+")"}}),v.a.createElement("div",{className:"p-global_nav__top_menu_header_right"},v.a.createElement("div",{className:"p-global_nav__top_menu_header_name"},t),v.a.createElement("div",{className:"p-global_nav__top_menu_header_sub"},a||r)))};Le.displayName="TeamHeader",Le.defaultProps=Fe;var De=Object(y.b)(function(e){var t=Object(Oe.d)(e);return{name:Object(Ce.f)(t),org:t.enterprise_name,icon:t.icon&&t.icon.image_88||void 0,url:t.domain+".slack.com"}})(Le),Ue=n("G4ux"),Be=n("syB0"),qe=n("rEtx"),He=n.n(qe),We=n("wvq5"),Ge=n("Tnrt").a,Ke=n("yg0S"),Ve=function(e,t){var n=document.getElementById("connected_workspaces_dialog_mount_point");if(!e)throw new Error("mountChannelOptions must be called with a teamId parameter");var a=Object(w.getStoreInstanceByTeamId)(e);Object(We.a)(v.a.createElement(y.a,{store:a},v.a.createElement(Ke.a,null,v.a.createElement(Ge,r()({},t,{onClose:function(){Object(Be.a)(function(){He.a.unmountComponentAtNode(n)})}})))),n)},ze=n("ONPw"),Ye=new O.b("global_nav"),Qe=(k.b.object,k.b.object.isRequired,k.b.bool,k.b.string,k.b.bool,k.b.bool,{menuProps:void 0,isEnterprise:!1,enterpriseURL:void 0,isAppmin:!1,featureGlobalNav:!1}),Xe=function(e){var t=e.featureGlobalNav,n=e.team,a=e.isEnterprise,i=e.enterpriseURL,o=e.isAppmin,s=e.menuProps;if(!t)return null;var l=[{label:Ye.t("Manage members"),href:Object(Ce.o)(n,"/admin")},{label:Ye.t("Workspace settings"),href:Object(Ce.o)(n,"/admin/settings")},{label:Ye.t("Organization settings"),href:"https://"+i+"/manage",hide:!a},{label:Ye.t("Manage apps"),href:Object(Ce.o)(n,"/apps/manage?utm_source=in-prod&utm_medium=inprod-apps_link-slack_menu-click"),hide:a||!o},{label:Ye.t("Manage shared channels"),click:function(){return Ve(n.id)},hide:!Object(ze.a)()}].filter(function(e){return!e.hide});return v.a.createElement(Z.a,r()({},s,{template:l}))};Xe.displayName="TeamAdminSubmenu",Xe.defaultProps=Qe;var Je=Object(y.b)(function(e){var t=Object(Oe.d)(e);return{team:t,isEnterprise:Object(Ce.s)(t),enterpriseURL:Object(M.e)(e,"enterprise_url"),isAppmin:Object(Ue.k)(e),featureGlobalNav:Object(M.m)(e,"feature_global_nav")}})(Xe),Ze=n("0BC7"),$e=n("7EGn"),et=n("h9PG"),tt=n("AE1P"),nt=n("Fdc0"),at=n("x4bP"),rt=n("Qrgz"),it=n("0xwB");function ot(e){var t=Object(Ue.b)(e),n=Object(Oe.d)(e),a=Object(nt.eb)(t),r=Object(nt.Eb)(t),i=Object(nt.Gb)(t),o=Object(M.q)(e),s=Object(Ce.D)(n),l=a,c=Object(it.b)(),u=Object(M.m)(e,"feature_builder_can_access"),d=a||!i&&(!Object(et.a)(e,"emoji_only_admins")||!Object(et.a)(e,"slackbot_responses_only_admins")||!Object(et.a)(e,"loading_only_admins")),p=o&&Object(tt.g)(e)&&Object(Ue.k)(e),m=a||!Object(et.a)(e,"stats_only_admins")&&!i,h=(r||Object(X.j)(e,"purchaser")||Object(et.a)(e,"all_users_can_purchase"))&&s,b=!s&&!Object(I.O)(),f=o&&!Object(nt.Gb)(t),g=s&&Object(rt.k)(e),_=Object(M.e)(e,"help_url"),v=Object(M.m)(e,"feature_tinyspeck")||D.k,y=o&&!i,k=Object(M.g)(e).length-1,O=(Object(at.a)()?k:k+Object($e.a)(t,"enterprise_user.teams.length",1))>=1&&!I.Q;return{administration:l,invite:c,launchWorkflowBuilder:u,customize:d,manageApps:p,analytics:m,billing:h,plans:b,orgShared:f,externalShared:g,help:_,version:v,findWorkspaces:y,switchWorkspaces:O,signin:!O&&!!Object(M.e)(e,"signin_url")}}var st=new O.b("global_nav"),lt=(k.b.object,k.b.object.isRequired,k.b.func,k.b.func,k.b.string.isRequired,k.b.string,k.b.string,k.b.func,k.b.func,k.b.func,k.b.bool,k.b.bool,{actions:{},signOut:g.a,openPrefsModal:g.a,openSharedChannelIntroductionModal:g.a,openInviteModal:g.a,signoutURL:void 0,signinURL:void 0,renderSonicMenu:void 0,featureGlobalNav:!1,featureSharedChannelsRemoveBetaLabel:!1}),ct=function(e){function t(e){o()(this,t);var n=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onSigninClick=n.onSigninClick.bind(n),n.onOpenAppClick=n.onOpenAppClick.bind(n),n.renderAdminSubmenu=n.renderAdminSubmenu.bind(n),n.renderWorkspacesSubmenu=n.renderWorkspacesSubmenu.bind(n),n}return p()(t,e),l()(t,[{key:"onSigninClick",value:function(e){I.Q&&(e.preventDefault(),Object(I.Wb)())}},{key:"onOpenAppClick",value:function(e){e.preventDefault(),xe({fallback_to_browser:!0,browser_uri:"/downloads",app_uri:"/ssb/open"})}},{key:"renderAdminSubmenu",value:function(e){return v.a.createElement(Je,{menuProps:e})}},{key:"renderWorkspacesSubmenu",value:function(e){return v.a.createElement(Ze.a,{menuProps:e})}},{key:"render",value:function(){var e=this,t=this.props,n=t.actions,a=t.renderSonicMenu,i=t.featureGlobalNav,o=t.signoutName,s=t.signoutURL,l=t.signinURL,c=t.team,u=t.featureSharedChannelsRemoveBetaLabel,d=Se()(t,["actions","renderSonicMenu","featureGlobalNav","signoutName","signoutURL","signinURL","team","featureSharedChannelsRemoveBetaLabel"]);if(!i)return null;var p=[{type:"submenu",label:"Sonic",renderSubmenu:a,hide:!a},{type:"separator"},{type:"custom",children:v.a.createElement(De,{key:"team-header"})},{type:"separator"},{label:st.t("Preferences"),shortcut:Object(D.p)()&&I.Q&&"\u2318,",click:function(){return e.props.openPrefsModal()}},{type:"separator"},{type:"submenu",label:st.t("Administration"),renderSubmenu:this.renderAdminSubmenu,hide:!n.administration},{label:st.t("Analytics"),hide:!n.analytics,href:Object(Ce.o)(c,"/stats")},{label:st.t("Billing"),hide:!n.billing,href:Object(Ce.o)(c,"/admin/billing")},{label:st.t("See paid plans"),hide:!n.plans,href:Object(Ce.o)(c,"/pricing")},{label:st.t("Customize Slack"),hide:!n.customize,href:Object(Ce.o)(c,"/customize?utm_source=in-prod&utm_medium=inprod-customize_link-slack_menu-click"),target:"_blank"},{type:"separator"},{label:st.t("Invite people"),hide:!n.invite,click:function(){return e.props.openInviteModal({source:"team_menu"})}},{label:st.t("Manage apps"),hide:!n.manageApps,href:"/apps/manage?utm_source=in-prod&utm_medium=inprod-apps_link-slack_menu-click"},{label:u?st.t("Shared channels"):st.t("Shared channels (beta)"),hide:!n.externalShared,click:function(){return Object(H.a)()?e.props.openSharedChannelIntroductionModal():Object(we.a)()}},{type:"separator"},{label:st.t("Help & feedback"),hide:!n.help,click:Pe.a},{label:"Version info (TS only)",hide:!n.version,click:Me.a},{type:"separator"},{label:st.t("Find more workspaces"),hide:!n.findWorkspaces,click:function(){return Re()}},{type:"submenu",label:st.t("Switch workspaces"),hide:Object(H.a)()||!n.switchWorkspaces,renderSubmenu:this.renderWorkspacesSubmenu},{label:st.t("Sign in to another workspace"),hide:!n.signin,href:l,click:this.onSigninClick},{label:st.rt("Sign out of <strong>{signoutName}</strong>",{signoutName:o}),hide:!Object(H.a)(),click:function(){return e.props.signOut(c.id)},dataQa:"logout"},{label:st.rt("Sign out of <strong>{signoutName}</strong>",{signoutName:o}),hide:Object(H.a)(),href:s,target:"_self",dataQa:"logout"},{type:"separator"},{label:st.rt("Open the Slack App"),hide:I.Q,href:Object(Ce.o)(c,"/ssb/open"),click:this.onOpenAppClick}].filter(function(e){return!e.hide});return v.a.createElement(Z.a,r()({},d,{template:p,menuClassNames:"p-global_nav__top_team_menu",stripTerminalSeparators:!0}))}}]),t}(_.Component);ct.displayName="TeamMenu",ct.defaultProps=lt;var ut=Object(y.b)(function(e){var t=Object(Oe.d)(e);return{actions:ot(e),team:t,signoutName:t.enterprise_name||Object(Ce.f)(t),signoutURL:Object(Ce.s)(t)?Object(M.e)(e,"enterprise_logout_url"):Object(M.e)(e,"logout_url"),signinURL:Object(M.e)(e,"signin_url"),featureGlobalNav:Object(M.m)(e,"feature_global_nav"),featureSharedChannelsRemoveBetaLabel:Object(M.m)(e,"feature_shared_channels_remove_beta_label")}},function(e){return{signOut:function(){return e(P.removeWorkspace.apply(void 0,arguments))},openPrefsModal:function(){return e(Object(Te.a)())},openSharedChannelIntroductionModal:function(){return e(Ne.a.apply(void 0,arguments))},openInviteModal:function(){return e(Ie.a.apply(void 0,arguments))}}})(ct),dt=new O.b("global_nav"),pt=(k.b.string,k.b.bool,k.b.bool,k.b.object.isRequired,k.b.func,{name:void 0,featureGlobalNav:!1,featureOfflineMode:!1,renderSonicMenu:void 0}),mt=function(e){function t(e){o()(this,t);var n=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n.renderMenu=n.renderMenu.bind(n),n.renderIcon=n.renderIcon.bind(n),n}return p()(t,e),l()(t,[{key:"onClick",value:function(){this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_TEAM_MENU"}}})}},{key:"renderMenu",value:function(e){return v.a.createElement(ut,r()({},e,{renderSonicMenu:this.props.renderSonicMenu}))}},{key:"renderIcon",value:function(){return this.props.featureOfflineMode?v.a.createElement(_.Fragment,null,v.a.createElement(Ee.b,null,v.a.createElement(z.b,{type:"chevron-down",className:"p-global_nav__top_name_icon"})),v.a.createElement(Ee.a,null,v.a.createElement(Y.c,{tip:dt.t("No network connection"),position:"bottom"},v.a.createElement(z.b,{type:"cloud-offline-small",className:"p-global_nav__top_name_icon margin_left_25"})))):v.a.createElement(z.b,{type:"chevron-down",className:"p-global_nav__top_name_icon"})}},{key:"render",value:function(){var e=this.props,t=e.name,n=e.featureGlobalNav;return t&&n?v.a.createElement(Z.e,{renderMenu:this.renderMenu,position:"bottom-left",offsetX:-4,offsetY:-4,allowanceX:12,onClick:this.onClick},v.a.createElement(se.c,{className:"p-global_nav__top_name","data-qa":"team_menu","aria-label":dt.t("Team menu")},v.a.createElement("div",{className:"overflow_ellipsis"},t),this.renderIcon())):null}}]),t}(_.Component);mt.displayName="Name",mt.defaultProps=pt;var ht=Object(y.b)(function(e){var t=Object(Oe.d)(e);return{name:t?Object(Ce.f)(t):void 0,featureGlobalNav:Object(M.m)(e,"feature_global_nav"),featureOfflineMode:Object(M.m)(e,"feature_offline_mode"),clogger:Object(K.a)({state:e})}})(mt),bt=n("eqKo"),ft=n("3dqR"),gt=n("6avh"),_t=n("ZYn4"),vt=n("/LVU"),yt=n("W045"),kt=n("yZEV"),Ot=n("vmJv"),Ct=n("4M+g"),Et=n("4vzu"),jt=n("s19S"),St=n("/Qam"),It=(k.b.string,k.b.string,k.b.string,k.b.bool,k.b.bool,{name:void 0,secondary:void 0,userId:void 0,inDnd:!1,inDndBySnooze:!1}),wt=function(e){var t=e.name,n=e.secondary,a=e.userId,r=e.inDnd,i=e.inDndBySnooze,o=n?v.a.createElement("div",{className:"p-global_nav__top_menu_header_sub"},n):null,s=E()("p-global_nav__top_menu_header","p-global_nav__top_menu_header--full","p-global_nav__top_menu_header--user",{"p-global_nav__top_menu_snooze_background":r&&i,"p-global_nav__top_menu_schedule_background":r&&!i});return v.a.createElement("div",{className:s},v.a.createElement(ft.c,{userId:a,size:36,isInteractive:!1,className:"p-global_nav__top_menu_header_icon",tabIndex:"-1"}),v.a.createElement("div",{className:"p-global_nav__top_menu_header_right"},v.a.createElement("div",{className:"p-global_nav__top_menu_header_name"},t),o))};wt.displayName="UserHeader",wt.defaultProps=It;var Nt=Object(y.b)(function(e){var t=Object(Ue.b)(e),n=Object(Et.f)(e).snoozeEnabled;return{name:Object(nt.V)(e,t),secondary:Object(nt.M)(e,t),userId:t.id,inDnd:!!Object(Et.d)(e,t.id),inDndBySnooze:n}})(wt),Tt=n("mqzt"),At=(n("1iAE"),new O.b("do_not_disturb")),Rt=(k.b.bool.isRequired,k.b.number,k.b.number,k.b.bool,{snoozeEndTs:void 0,dndEndTs:void 0,do24hrTime:!1}),Pt=function(e){function t(){return o()(this,t),u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p()(t,e),l()(t,[{key:"render",value:function(){var e=this.props,t=e.inDndBySnooze,n=e.snoozeEndTs,a=e.dndEndTs,r=e.do24hrTime,i=E()("p-dnd_header",{"p-dnd_header__snooze_background":t,"p-dnd_header__schedule_background":!t}),o=t?n:a,s=Object(Tt.b)(o,{do24hrTime:r});return v.a.createElement("div",{className:i},v.a.createElement("div",{className:"p-dnd_header__status"},v.a.createElement("div",null,v.a.createElement("strong",null,At.t("Do Not Disturb: ON",{fallbackHash:"e9f808845f44c3345ade56f562f58e9da896e00e"}))),v.a.createElement("div",{className:"p-dnd_header__sub_text"},s)))}}]),t}(_.PureComponent);Pt.displayName="DndHeader",Pt.defaultProps=Rt;var Mt=Object(y.b)(function(e){var t=Object(M.c)(e),n=Object(Et.e)(e,t).nextDndEndTs,a=Object(Et.f)(e);return{inDndBySnooze:a.snoozeEnabled,snoozeEndTs:a.snoozeEndTs,dndEndTs:n,do24hrTime:Object(X.j)(e,"time24")}})(Pt);function xt(e){var t=Object(M.m)(e,"feature_tinyspeck");return{help:Object(M.e)(e,"help_url"),version:t||D.k}}var Ft=new O.b("global_nav"),Lt=(k.b.object,k.b.object,k.b.string,k.b.func,k.b.func,k.b.object,k.b.bool,k.b.bool,k.b.func,k.b.func,k.b.bool,k.b.func,k.b.func,k.b.func,{actions:void 0,currentMember:void 0,currentPresence:void 0,onTriggerClose:g.a,openCustomStatusDialog:g.a,currentChannel:void 0,inDnd:!1,inDndBySnooze:!1,endDndSnooze:g.a,endDndSchedule:g.a,featureGlobalNav:!1,toggleUserPresence:g.a,updateCurrentMemberProfile:g.a,openPrefsModal:g.a}),Dt=function(e){function t(e){o()(this,t);var n=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderDndMenu=n.renderDndMenu.bind(n),n.renderPresenceLabel=n.renderPresenceLabel.bind(n),n}return p()(t,e),l()(t,[{key:"renderDndMenu",value:function(e){var t=this.props.currentChannel;return v.a.createElement(St.a,{currentChannel:t,menuProps:e,useGlobalNav:!0})}},{key:"renderPresenceLabel",value:function(){var e=this.props,t=e.currentPresence;if(!e.featureGlobalNav)return null;switch(t){case"active":return Ft.rt("Set yourself to <strong>away</strong>",null,function(e){var t=e.text,n=e.key;return v.a.createElement("strong",{key:n},t)});case"away":return Ft.rt("<status>Away</status> Set yourself to <strong>active</strong>",null,function(e){var t=e.tag,n=e.text,a=e.key;switch(t){case"status":return v.a.createElement("strong",{className:"half_opacity",key:a},n);case"strong":return v.a.createElement("strong",{key:a},n);default:return null}});default:return null}}},{key:"render",value:function(){var e=this,t=this.props,n=(t.actions,t.currentMember),a=t.inDnd,i=t.inDndBySnooze,o=t.featureGlobalNav,s=Se()(t,["actions","currentMember","inDnd","inDndBySnooze","featureGlobalNav"]);if(!o)return null;var l=[{type:"custom",children:v.a.createElement(Nt,{key:"user-header"})},{type:"custom",children:v.a.createElement(Mt,{key:"dnd-header"}),hide:!a},{type:"submenu",label:Ft.rt("Turn on <strong>Do Not Disturb</strong>"),renderSubmenu:this.renderDndMenu,hide:a},{label:Ft.t("Resume notifications now"),key:"turn-off-dnd",hide:!a,click:i?this.props.endDndSnooze:this.props.endDndSchedule},{type:"submenu",label:Ft.t("Adjust time"),renderSubmenu:this.renderDndMenu,hide:!a||a&&!i},{label:Ft.t("Adjust schedule\u2026",{fallbackHash:"ce0d0efeb198eef758ed1a5393ca0a0f33012be6"}),key:"adjust-dnd-schedule",hide:!a||a&&i,click:function(){return e.props.openPrefsModal({activeSection:"notifications",activeSubsection:"prefs_dnd"})}},{type:"separator",key:"dnd-separator",hide:!a},{label:Ft.t("Clear status"),hide:!Object(nt.ab)(n),click:function(){e.props.updateCurrentMemberProfile({profile:{status_text:"",status_emoji:"",status_text_canonical:"",status_expiration:0}})}},{label:Object(nt.ab)(n)?Ft.t("Edit status"):Ft.t("Set a status"),shortcut:Object(D.p)()?"\u2318\u21e7Y":"Ctrl+Shift+Y",click:this.props.openCustomStatusDialog},{label:this.renderPresenceLabel(),key:"set-active-away",click:this.props.toggleUserPresence},{type:"separator",key:"header-separator"},{label:Ft.t("Profile & account"),click:function(){return Object(jt.i)(n.id)}},{label:Ft.rt("Notification preferences"),key:"notification-preferences",click:function(){return e.props.openPrefsModal({activeSection:"notifications"})}},{type:"custom",children:v.a.createElement("div",{className:"p-global_nav__top_menu_cap",key:"user-menu-bottom-cap"})}].filter(function(e){return!e.hide}),c=E()({"p-global_nav__top_user_menu":!0,"p-global_nav__top_user_menu--dnd":a});return v.a.createElement(Z.a,r()({},s,{template:l,menuClassNames:c,noMargin:!0}))}}]),t}(_.Component);Dt.displayName="UserMenu",Dt.defaultProps=Lt;var Ut={openCustomStatusDialog:bt.a,toggleUserPresence:kt.h,updateCurrentMemberProfile:yt.a,endDndSnooze:vt.b,endDndSchedule:vt.a,openPrefsModal:Te.a},Bt=Object(y.b)(function(e){var t=Object(Ue.b)(e),n=Object(Ot.a)(e),a=Object(Et.f)(e).snoozeEnabled;return{actions:xt(e),currentMember:t,currentPresence:Object(kt.e)(e),currentChannel:Object(Ct.e)(e,n,!1)||void 0,inDnd:!!Object(Et.d)(e,t.id),inDndBySnooze:a,featureGlobalNav:Object(M.m)(e,"feature_global_nav")}},Ut)(Dt),qt=new O.b("global_nav"),Ht=(k.b.string,k.b.bool,k.b.func,k.b.bool,k.b.object.isRequired,{userId:void 0,hasCustomStatus:!1,openCustomStatusDialog:g.a,featureGlobalNav:!1}),Wt=function(e){function t(e){o()(this,t);var n=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onUserClick=n.onUserClick.bind(n),n.onStatusClick=n.onStatusClick.bind(n),n.renderMenu=n.renderMenu.bind(n),n}return p()(t,e),l()(t,[{key:"onUserClick",value:function(){this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_USER_MENU"}}})}},{key:"onStatusClick",value:function(){this.props.openCustomStatusDialog(),this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_CUSTOM_STATUS"}}})}},{key:"renderMenu",value:function(e){return v.a.createElement(Bt,e)}},{key:"render",value:function(){var e=this.props,t=e.userId,n=e.hasCustomStatus,a=e.featureGlobalNav;if(!t||!a)return null;var r=n&&v.a.createElement(se.c,{onClick:this.onStatusClick,className:"p-global_nav__top_user_status_button","aria-label":qt.t("Edit status")},v.a.createElement(gt.b,{memberId:t,tipPosition:"bottom-right",className:"p-global_nav__top_user_status"}),v.a.createElement(z.b,{type:"pencil",className:"p-global_nav__top_user_status_edit"}));return v.a.createElement("div",{className:"p-global_nav__top_user"},r,v.a.createElement(Z.e,{renderMenu:this.renderMenu,position:"bottom-right",offsetX:4,offsetY:10,allowanceX:12,onClick:this.onUserClick},v.a.createElement(se.c,{"aria-label":qt.t("User menu")},v.a.createElement(ft.c,{userId:t,size:32,showBadge:!1,isInteractive:!1,className:E()({"p-global_nav__top_user_avatar":!0,"p-global_nav__top_user_avatar--beside-status":n}),tabIndex:"-1"}),v.a.createElement(_t.a,{memberId:t,className:"p-global_nav__top_user_presence",inline:!1}))))}}]),t}(_.Component);Wt.displayName="User",Wt.defaultProps=Ht;var Gt={openCustomStatusDialog:bt.a},Kt=Object(y.b)(function(e){return{userId:Object(M.c)(e),hasCustomStatus:Object(nt.ab)(Object(Ue.b)(e)),featureGlobalNav:Object(M.m)(e,"feature_global_nav"),clogger:Object(K.a)({state:e})}},Gt)(Wt),Vt=n("yU6Y"),zt=n.n(Vt),Yt=n("V0Bv"),Qt=n("F6LU"),Xt=n("qkTT"),Jt=n("zoXk"),Zt=n("HvGc"),$t=n("KDee"),en=(k.b.string.isRequired,k.b.string.isRequired,k.b.node.isRequired,k.b.string.isRequired,k.b.bool,k.b.node,k.b.string,k.b.func.isRequired,k.b.func.isRequired,k.b.func.isRequired,k.b.object.isRequired,{active:!1,children:void 0,className:void 0}),tn=function(e){function t(e){o()(this,t);var n=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n}return p()(t,e),l()(t,[{key:"onClick",value:function(){var e=this.props,t=e.pane,n=e.active,a=e.clogger;"team"===t?Object(jt.m)():"starred_items"===t&&Object(H.a)()?n?this.props.closeFlexpane():this.props.showStarredItemsList():"activity"===t?this.props.toggleActivityFlexpane():Object($t.d)(t),"mentions"===t?a.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_FLEX_ACTIVITY"}}}):"stars"===t&&a.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_FLEX_STARS"}}})}},{key:"render",value:function(){var e=this.props,t=e.icon,n=e.tooltip,a=e.pane,r=e.active,i=e.children,o=e["aria-label"],s=E()("p-global_nav__top_button","p-global_nav__top_flex","p-global_nav__top_flex--"+a,r&&"p-global_nav__top_flex--active",this.props.className);return v.a.createElement(Y.c,{tip:n,delay:Y.a,position:"bottom",offsetY:Gn},v.a.createElement(se.c,{className:s,onClick:this.onClick,"aria-label":o},v.a.createElement(z.b,{type:t,className:"p-global_nav__top_button_icon"}),i))}}]),t}(_.PureComponent);tn.displayName="FlexButton",tn.defaultProps=en;var nn=Object(y.b)(function(e,t){var n=t.pane;return{active:Object(Jt.j)(e)===n,clogger:Object(K.a)({state:e})}},function(e){return{toggleActivityFlexpane:function(){return e(Object(Zt.q)())},showStarredItemsList:function(){return e(Object(Zt.k)())},closeFlexpane:function(){return e(Object(Zt.a)())}}})(tn),an=new O.b("global_nav"),rn=(k.b.shape({emoji:k.b.string,memberName:k.b.string,channelName:k.b.string}),k.b.bool,k.b.bool,{reactionToast:void 0,noAnimation:!1,featureGlobalNav:!1}),on=function(e){var t=e.reactionToast,n=e.noAnimation;if(!e.featureGlobalNav)return null;var a=t&&v.a.createElement(Xt.b,{text:":"+t.emoji+":",emojiSize:Xt.a.LARGE,className:"p-global_nav__top_activity_toast"}),r=!(zt.a.chrome&&!I.Q)&&v.a.createElement("span",{className:"p-global_nav__tip_shortcut"},Object(D.p)()?"\u2318\u21e7M":"Ctrl+Shift+M"),i=t?v.a.createElement(_.Fragment,null,Object(Qt.a)(t.memberName),v.a.createElement("br",null),v.a.createElement("span",{className:"sk_foreground_high"},Object(Qt.a)(t.channelName))):v.a.createElement(_.Fragment,null,an.t("Activity"),r),o=E()({"p-global_nav__top_activity":!0,"p-global_nav__top_activity--no-animation":n,"p-global_nav__top_activity--toasting":t});return v.a.createElement("div",{className:o},v.a.createElement(nn,{icon:"mentions",pane:"activity",tooltip:i,"aria-label":an.t("Activity")}),a)};on.displayName="ActivityButton",on.defaultProps=rn;var sn=Object(y.b)(function(e){return{reactionToast:Object(Yt.b)(e),noAnimation:!Object(X.j)(e,"a11y_animations"),featureGlobalNav:Object(M.m)(e,"feature_global_nav")}})(on),ln=new O.b("global_nav"),cn=(k.b.bool,k.b.bool,k.b.bool,k.b.string,k.b.func,k.b.func,k.b.func,k.b.func,k.b.func,k.b.func,k.b.bool,k.b.bool,k.b.bool,k.b.func,k.b.object.isRequired,{isUserRestricted:!1,isPaid:!1,isEnterprise:!1,userId:void 0,showFileList:g.a,showDownloads:g.a,showKeyboardShortcuts:g.a,showWhatsNew:g.a,showUserGroupList:g.a,showUserCalendar:g.a,featureCalendarSimpleAgendaView:!1,featureGlobalNav:!1,featureSonicUserGroups:!1,openHelpModal:g.a}),un=function(e){function t(e){o()(this,t);var n=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onTriggerClick=n.onTriggerClick.bind(n),n.clogItem=n.clogItem.bind(n),n.renderMenu=n.renderMenu.bind(n),n}return p()(t,e),l()(t,[{key:"onTriggerClick",value:function(){this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_FLEX_MENU"}}})}},{key:"clogItem",value:function(e){this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_FLEX_MENU_ITEM"}},flex_name:e})}},{key:"renderMenu",value:function(e){var t=this,n=this.props,a=n.featureGlobalNav,i=n.featureSonicUserGroups,o=n.isUserRestricted,s=n.isPaid,l=n.isEnterprise,c=n.userId;if(!a)return null;var u=[{label:ln.t("Your events"),icon:v.a.createElement(z.b,{type:"all-files-alt"}),click:function(){t.props.showUserCalendar(),t.clogItem("calendar")},hide:!this.props.featureCalendarSimpleAgendaView},{label:ln.t("Files"),icon:v.a.createElement(z.b,{type:"all-files-alt"}),click:function(){t.props.showFileList({user:c}),t.clogItem("files_user")}},{label:ln.t("Downloads"),icon:v.a.createElement(z.b,{type:"cloud-download"}),click:function(){t.props.showDownloads({user:c}),t.clogItem("downloads")},hide:!I.Q},{type:"separator"},{label:l?ln.t("Organization Directory"):ln.t("Workspace Directory"),icon:v.a.createElement(z.b,{type:"team-directory"}),shortcut:!zt.a.firefox&&(Object(D.p)()?"\u2318\u21e7E":"Ctrl+Shift+E"),click:function(){Object(jt.m)(),t.clogItem("team")}},{label:ln.t("User Groups"),icon:v.a.createElement(z.b,{type:"user-groups"}),click:function(){i?t.props.showUserGroupList():Object(jt.l)(),t.clogItem("groups")},hide:o||!s},{type:"separator"},{label:ln.t("What\u2019s New"),icon:v.a.createElement(z.b,{type:"emoji-celebration"}),click:function(){t.props.showWhatsNew(),t.clogItem("whats_new")}},{label:ln.t("Keyboard Shortcuts"),icon:v.a.createElement(z.b,{type:"keyboard"}),shortcut:Object(D.p)()?"\u2318/":"Ctrl+/",click:function(){t.props.showKeyboardShortcuts(),t.clogItem("shortcuts")}},{label:ln.t("Help"),icon:v.a.createElement(z.b,{type:"question-circle"}),click:function(){t.props.openHelpModal({trigger:"flex_menu"}),t.clogItem("help")}}].filter(function(e){return!e.hide});return v.a.createElement(Z.a,r()({},e,{menuClassNames:"p-global_nav__top_flexpanes_menu",template:u,stripTerminalSeparators:!0,width:Object(D.p)()?void 0:360}))}},{key:"render",value:function(){return this.props.featureGlobalNav?v.a.createElement(Z.e,{position:"bottom-right",renderMenu:this.renderMenu,offsetY:Kn,onClick:this.onTriggerClick},v.a.createElement(Y.c,{tip:ln.t("More options"),position:"bottom",delay:Y.a,offsetY:Gn},v.a.createElement(se.c,{className:"p-global_nav__top_button p-global_nav__top_button--flexpanes","aria-label":ln.t("More options")},v.a.createElement(z.b,{type:"vertical-ellipsis",className:"p-global_nav__top_button_icon"})))):null}}]),t}(_.PureComponent);un.displayName="FlexpanesMenu",un.defaultProps=cn;var dn={showFileList:Zt.g,showKeyboardShortcuts:function(){return Zt.h.apply(void 0,arguments)},showDownloads:Zt.f,showWhatsNew:Zt.p,showUserGroupList:Zt.o,showUserCalendar:Zt.m,openHelpModal:Pe.a},pn=Object(y.b)(function(e){return{isUserRestricted:Object(nt.Gb)(Object(Ue.b)(e)),isPaid:Object(Ce.D)(Object(Oe.d)(e)),isEnterprise:Object(M.q)(e),userId:Object(M.c)(e),featureCalendarSimpleAgendaView:Object(M.m)(e,"feature_calendar_simple_agenda_view"),featureGlobalNav:Object(M.m)(e,"feature_global_nav"),featureSonicUserGroups:Object(M.m)(e,"feature_sonic_user_groups"),clogger:Object(K.a)({state:e})}},dn)(un),mn=n("Go8C"),hn=n("7ARk"),bn=n("m5Fn"),fn=n("UXvI"),gn=n("cMxN"),_n=n("YYb+"),vn=n("9/ob"),yn=n("HXD8"),kn=n("F8qq"),On=n("Zr7G"),Cn=n("YDA8"),En=n("Rjjz"),jn=n("NPpR"),Sn=(k.b.bool.isRequired,k.b.func.isRequired,k.b.func.isRequired,k.b.func.isRequired,k.b.func.isRequired,k.b.string,k.b.object,{displayQuery:"",telemeter:On.d}),In=function(e){function t(e){o()(this,t);var n=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(S.a)(n,["onClick","onSearchInputBoxFocus","onSearchInputBoxEscape","onSearchAutocompleteSuggestionAccept"]),n.precacheSearch=Object(fn.a)(n.precacheSearch.bind(n),6e4),n}return p()(t,e),l()(t,[{key:"onClick",value:function(){this.props.autocompleteIsOpen||this.props.openSearchAutocomplete()}},{key:"onSearchInputBoxFocus",value:function(){this.props.openSearchAutocomplete(),this.precacheSearch()}},{key:"onSearchInputBoxEscape",value:function(){this.props.closeSearchAutocomplete()}},{key:"onSearchAutocompleteSuggestionAccept",value:function(){Object(yn.e)(this.props.telemeter),this.props.searchAutocompleteSuggestionAccept()}},{key:"precacheSearch",value:function(){this.props.searchPrecache()}},{key:"render",value:function(){var e=E()({"p-global_nav__top_search":!0,"p-global_nav__top_search--browser":!I.Q,"p-global_nav__top_search--primarysearch":!0,"p-global_nav__top_search--primarysearch_open":this.props.autocompleteIsOpen});return v.a.createElement(vn.a,{enabled:["feature_primary_search"]},v.a.createElement(se.c,{className:e,onClick:this.onClick},v.a.createElement(jn.a,{autoFocus:!1,displayQuery:this.props.displayQuery,onEnter:this.onSearchAutocompleteSuggestionAccept,onEscape:this.onSearchInputBoxEscape,onFocus:this.onSearchInputBoxFocus})))}}]),t}(_.PureComponent);In.displayName="AutocompleteInputInPrimarySearch",In.defaultProps=Sn;var wn={searchPrecache:En.q,openSearchAutocomplete:_n.f,closeSearchAutocomplete:_n.a,searchAutocompleteSuggestionAccept:kn.a},Nn=Object(y.b)(function(e){return{autocompleteIsOpen:Object(_n.e)(e),displayQuery:Object(mn.b)(e),telemeter:Object(On.c)({state:e})}},wn)(In),Tn=(k.b.bool.isRequired,k.b.string.isRequired,k.b.func.isRequired,k.b.func.isRequired,k.b.object,{telemeter:On.d}),An=function(e){function t(e){o()(this,t);var n=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(S.a)(n,["handleClick","onSearchAutocompleteSuggestionAccept","handleAutocompleteRef"]),n.calculatePopoverConstraints=Object(fn.a)(n.calculatePopoverConstraints.bind(n),1e3),n.searchHeaderBackdrop=Object(_.createRef)(),n.state={hasCalculatedConstraints:!1,overlayStyle:{marginTop:0},contentStyle:{top:0,left:0,width:200}},n.autocompleteInputRef=null,n}return p()(t,e),l()(t,[{key:"onSearchAutocompleteSuggestionAccept",value:function(){Object(yn.e)(this.props.telemeter),this.props.searchAutocompleteSuggestionAccept()}},{key:"calculatePopoverConstraints",value:function(){if(this.autocompleteInputRef){var e=Object(qe.findDOMNode)(this.autocompleteInputRef),t=e.getBoundingClientRect(),n=e.parentElement.getBoundingClientRect();this.setState(function(){return{hasCalculatedConstraints:!0,overlayStyle:{marginTop:n.bottom},contentStyle:{top:0,left:t.left-10,width:t.width+20}}})}}},{key:"handleAutocompleteRef",value:function(e){this.autocompleteInputRef=e,e&&this.calculatePopoverConstraints()}},{key:"handleClick",value:function(e){this.searchHeaderBackdrop&&this.searchHeaderBackdrop.current===e.target&&this.props.closeAutocomplete()}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.closeAutocomplete,a=t&&this.state.hasCalculatedConstraints;return v.a.createElement(vn.a,{enabled:["feature_primary_search"]},a&&v.a.createElement("div",{className:"c-search_autocomplete__header_backdrop",ref:this.searchHeaderBackdrop,onClick:this.handleClick}),v.a.createElement(Nn,{ref:this.handleAutocompleteRef}),v.a.createElement(gn.a,{ariaRole:"dialog",ariaLabel:"Search",isOpen:a,position:"bottom-right",onClose:n,shouldFade:!1,overlayClassName:"c-popover c-search_modal c-search_modal--autocomplete c-search_modal--primarysearch",allowanceX:20,allowanceY:0,shouldFocusAfterRender:!1,shouldReturnFocusAfterClose:!1,onResize:this.calculatePopoverConstraints,shouldObserveResize:!0,contentStyle:this.state.contentStyle,overlayStyle:this.state.overlayStyle},t&&v.a.createElement("div",{className:"c-search-autocomplete"},v.a.createElement(Cn.a,{userQuery:this.props.userQuery,onAccept:this.onSearchAutocompleteSuggestionAccept}))))}}]),t}(_.PureComponent);An.displayName="AutocompleteInPrimarySearch",An.defaultProps=Tn;var Rn={closeAutocomplete:_n.a,searchAutocompleteSuggestionAccept:kn.a},Pn=Object(y.b)(function(e){return{userQuery:Object(mn.d)(e),isOpen:Object(_n.e)(e),telemeter:Object(On.c)({state:e})}},Rn)(An),Mn=n("lek6"),xn=n("iH/p"),Fn=n("V18M");function Ln(e){return"Vsearch"===Object(Ot.a)(e)}var Dn=new O.b("search"),Un=(k.b.string,k.b.func,k.b.string,k.b.string,k.b.object.isRequired,k.b.func,k.b.func.isRequired,k.b.bool.isRequired,k.b.bool.isRequired,{displayQuery:void 0,orgName:void 0,teamName:void 0,openFromClick:g.a,clearSearchInputField:g.a}),Bn=function(e){function t(e){o()(this,t);var n=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClick=n.onClick.bind(n),n.onClearClick=n.onClearClick.bind(n),n}return p()(t,e),l()(t,[{key:"onClick",value:function(){this.props.isPrimarySearchFeatureEnabled?this.props.openSearchAutocomplete():this.props.openFromClick(),this.props.clogger.track("GLOBAL_NAV",{contexts:{ui_context:{action:"CLICK",ui_component:"GLOBAL_NAV",ui_element:"NAV_SEARCH"}}})}},{key:"onClearClick",value:function(e){e.stopPropagation(),this.props.clearSearchInputField()}},{key:"render",value:function(){var e=this.props,t=e.displayQuery,n=e.orgName,a=e.teamName,r=e.isPrimarySearchFeatureEnabled,i=e.showSearchAsActive,o=t?v.a.createElement(_.Fragment,null,v.a.createElement(Mn.a,{text:t,className:"p-global_nav__top_search_text",customLineEnding:" ",showTooltips:!1,noLinking:!0,noSpecials:!0,noHighlights:!0}),v.a.createElement(se.c,{className:"p-global_nav__top_search_clear",onClick:this.onClearClick,label:Dn.t("Clear")},v.a.createElement(z.b,{type:"times-small"}))):v.a.createElement("span",{className:"p-global_nav__top_search_text p-global_nav__top_search_text--placeholder"},Dn.rt("Search {teamName}",{teamName:n||a||""})),s=E()({"p-global_nav__top_search":!0,"p-global_nav__top_search--no_history":!Object(ie.c)()}),l=!r||!i;return v.a.createElement(_.Fragment,null,l&&v.a.createElement(se.c,{className:s,onClick:this.onClick},v.a.createElement(z.b,{type:"search-medium",className:"p-global_nav__top_search_icon"}),o),!r&&v.a.createElement(bn.a,null),!l&&v.a.createElement(Pn,null))}}]),t}(_.Component);Bn.displayName="SearchPlaceholderInput",Bn.defaultProps=Un;var qn={openSearchAutocomplete:_n.f,openFromClick:xn.a,clearSearchInputField:hn.a},Hn=Object(y.b)(function(e){return{displayQuery:Object(mn.b)(e),orgName:Object(Oe.e)(e)||"",teamName:Object(Ce.f)(Object(Oe.d)(e)),clogger:Object(K.a)({state:e}),isPrimarySearchFeatureEnabled:Object(Fn.a)(e),showSearchAsActive:Ln(e)||Object(_n.e)(e)}},qn)(Bn),Wn=(n("AByf"),new O.b("global_nav")),Gn=-12,Kn=-4,Vn=(k.b.string,k.b.func,k.b.bool,{theme:void 0,renderSonicMenu:void 0,featureGlobalNav:!1}),zn=function(e){var t=e.theme,n=e.renderSonicMenu;if(!e.featureGlobalNav)return null;var a=E()("p-global_nav__top",t&&"p-global_nav__top--theme-"+t);return v.a.createElement("div",{className:a},v.a.createElement(ht,{renderSonicMenu:n}),v.a.createElement(ke,null),v.a.createElement("div",{className:"p-global_nav__top_spacer"}),v.a.createElement(Hn,null),v.a.createElement("div",{className:"p-global_nav__top_spacer--fill"}),v.a.createElement(sn,null),v.a.createElement(nn,{icon:"star-o",pane:Object(H.a)()?"starred_items":"stars",tooltip:v.a.createElement(_.Fragment,null,Wn.t("Starred items"),v.a.createElement("span",{className:"p-global_nav__tip_shortcut"},Object(D.p)()?"\u2318\u21e7S":"Ctrl+Shift+S")),"aria-label":Wn.t("Starred items")}),v.a.createElement(pn,null),v.a.createElement("div",{className:"p-global_nav__top_spacer"}),v.a.createElement(Kt,null))};zn.displayName="TopNav",zn.defaultProps=Vn;Object(y.b)(function(e){return{theme:Object(X.j)(e,"sidebar_theme"),featureGlobalNav:Object(M.m)(e,"feature_global_nav")}})(zn);var Yn=new O.b("team_picker"),Qn=(k.b.func.isRequired,k.b.bool,k.b.bool,function(e){function t(){return o()(this,t),u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p()(t,e),l()(t,[{key:"render",value:function(){var e=this.props,t=e.featureClassicNav,n=e.isDragInProgress,a={onClick:this.props.startWorkspaceSignIn},i=E()("p-team_sidebar__add_button",{"p-team_sidebar__add_button--mac":t&&Object(D.p)()}),o={opacity:n?0:1},s=Yn.t("Add a new workspace");return v.a.createElement(Y.c,{tip:s,position:t?"right":"bottom-left",delay:Y.a,offsetX:t?5:0,offsetY:t?0:Gn,style:o},v.a.createElement(Q.a,r()({"aria-label":s},a,{className:i}),v.a.createElement(z.b,{type:"plus-thick",className:"p-team_sidebar__add_button_icon"})))}}]),t}(_.PureComponent));Qn.displayName="AddTeamButton",Qn.defaultProps={featureClassicNav:!1,isDragInProgress:!1};var Xn,Jn=Object(y.b)(function(){return{locale:Object(V.a)()}})(Qn),Zn=n("9oTK"),$n=n("vJtL"),ea=n("eD8c"),ta=n("G3Sk"),na=n("derf"),aa=(Xn=Object(Zn.coroutine)(regeneratorRuntime.mark(function e(t){var a,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Zn.resolve)(Promise.resolve().then(n.bind(null,"s5Is")));case 2:return a=e.sent,r=a.removeWorkspaceFromPreviousWorkspaces,e.next=6,Object(Zn.resolve)(Promise.resolve().then(n.bind(null,"lhZz")));case 6:i=e.sent,(0,i.dispatchForClientStore)(r(t));case 9:case"end":return e.stop()}},e,this)})),function(e){return Xn.apply(this,arguments)}),ra=new O.b("team_picker"),ia=(k.b.string.isRequired,k.b.func.isRequired,k.b.string.isRequired,k.b.func.isRequired,k.b.bool.isRequired,k.b.shape({image_default:k.b.bool,image_34:k.b.string,image_44:k.b.string,image_68:k.b.string,image_88:k.b.string,image_102:k.b.string,image_132:k.b.string,image_230:k.b.string}),k.b.number,k.b.bool,k.b.bool,k.b.number,k.b.bool,k.b.number,k.b.bool,k.b.bool,k.b.oneOfType([k.b.object,k.b.func]),k.b.bool,k.b.object,k.b.object,k.b.func,{order:0,isActive:!1,failedToBoot:!1,shadow:1,hasUnreads:!1,mentionCount:0,icon:null,shouldShowKeyboardShortcut:!1,hasSessionExpired:!1,forwardedRef:void 0,isDragging:!1,draggableProps:{},dragHandleProps:{},onItemActive:g.a}),oa=function(e){function t(e){o()(this,t);var n=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object(S.a)(n,["getContextMenuTemplate","renderShortcutHint","renderBadge","setRef"]),n}return p()(t,e),l()(t,[{key:"componentDidMount",value:function(){this.props.isActive&&this.props.onItemActive(this.ref)}},{key:"componentDidUpdate",value:function(e){this.props.isActive&&!e.isActive&&this.props.onItemActive(this.ref)}},{key:"getTooltip",value:function(){var e=this.props,t=e.teamName,n=e.order+1;if(!I.Q||n>9)return t;var a=Object(D.p)()?"\u2318"+n:"Ctrl+"+n,r=ra.t("Press {shortcut} to switch",{shortcut:a});return v.a.createElement("span",null,t," ",v.a.createElement("span",{className:"sk_foreground_high"},r))}},{key:"getContextMenuTemplate",value:function(){var e=this.props,t=e.teamId,n=e.teamName,a=e.signOutFromTeam,r=e.hasTeamBooted,i=e.hasSessionExpired,o=n&&n.replace(/&/g,"&&");return[{label:ra.t("&Sign out of")+" "+o,enabled:i||r,click:function(){Object(W.b)().info("TEAM-SIDEBAR","context-menu sign-out teamId:"+t+" hasSessionExpired:"+i),i?aa(t):a(t)}}]}},{key:"setRef",value:function(e){if(e){this.ref=e;var t=this.props.forwardedRef;t&&(Object($n.a)(t)?t(e):t.current=e)}}},{key:"renderShortcutHint",value:function(){var e=this.props,t=e.order,n=e.shouldShowKeyboardShortcut,a=t+1,r=E()("p-team_sidebar__shortcut_hint",{"p-team_sidebar__shortcut_hint--visible":n});return a<=9?v.a.createElement("div",{className:r},a):null}},{key:"renderBadge",value:function(){var e=this.props,t=e.hasUnreads,n=e.mentionCount,a="";return e.hasSessionExpired?a=v.a.createElement("div",{className:"p-team_sidebar__signed_out_badge"},v.a.createElement(z.b,{type:"warning",className:"p-team_sidebar__signed_out_badge__stroke"}),v.a.createElement(z.b,{type:"warning-filled"})):n?a=v.a.createElement("div",{className:"p-team_sidebar__mentions_badge"},v.a.createElement("span",null,n>99?"99+":n)):t&&(a=v.a.createElement("div",{className:"p-team_sidebar__unread_dot"})),a}},{key:"render",value:function(){var e=this.props,t=e.icon,n=e.isActive,a=e.teamName,i=e.hasTeamBooted,o=e.draggableProps,s=e.dragHandleProps,l=e.isDragging,c=e.onClick,u=e.teamId,d=E()("p-team_sidebar__item",{"p-team_sidebar__item--active":n,"p-team_sidebar__item--is_dragging":l,"p-team_sidebar__item--mac":Object(D.p)()}),p=E()("p-team_sidebar__icon",{"p-team_sidebar__icon--active":n,"p-team_sidebar__icon--is_dragging":l}),m=i?na.b:na.a;return v.a.createElement(Y.c,{position:"right",offsetX:5,tip:this.getTooltip()},v.a.createElement(se.c,r()({},o,s,{ref:this.setRef,onClick:function(){return c(u)},className:d,"data-qa":"team_sidebar_item","aria-label":a,role:"tab","aria-selected":n}),v.a.createElement(ea.a,{getTemplate:this.getContextMenuTemplate,overrideDefaultMenu:!0,desktopAppOnly:!1},v.a.createElement("div",{className:p},v.a.createElement(m,{icon:t,size:36,teamName:a,className:"p-team_sidebar__image"}))),this.renderBadge(),this.renderShortcutHint()))}}]),t}(_.Component);oa.displayName="TeamSidebarItem",oa.defaultProps=ia;var sa=Object(y.b)(function(e,t){if(function(e){return e&&e.workspaces}(e)||t.failedToBoot)return r()({},t,{hasTeamBooted:!1});var n=Object(Oe.d)(e),a=Object(Ce.i)(n);return{hasTeamBooted:!0,hasUnreads:Object(ta.o)(e),mentionCount:Object(ta.f)(e),icon:a,teamName:n.name}})(oa),la=v.a.forwardRef(function(e,t){return v.a.createElement(sa,r()({},e,{forwardedRef:t}))}),ca=n("W+QA"),ua=n("Lev8"),da=n("VMwU"),pa=(k.b.string.isRequired,k.b.string.isRequired,k.b.bool,k.b.string,k.b.bool,{"-3":.7,"-2":.8,"-1":.9,0:1,1:1.1,2:1.25,3:1.5}),ma=function(e){var t=e.sidebarTheme,n=e.sidebarThemeCustomValues,a=e.featureClassicNav,r=e.clientTheme,i=e.isWindowFrameless,o=Object(_.useState)(I.Q&&Object(I.K)()),s=h()(o,2),l=s[0],c=s[1],u=Object(_.useCallback)(function(){c(I.Q&&Object(I.K)())},[]);Object(_.useEffect)(function(){return window.addEventListener("resize",u),function(){window.removeEventListener("resize",u)}},[u]);var d=void 0;try{d=JSON.parse(n)}catch(e){d=da.a}var p,m,b,f=Object(ca.c)(t,d,{clientTheme:r})||da.a,g=f.text_color,y=Object(da.c)(f.column_bg,20),k=a?y:f.column_bg,O=pa[l]||1,C="\n\t\t.p-client--show-team-sidebar {\n\t\t\tgrid-template-columns: "+Math.round(68/O)+"px auto;\n\t\t}\n\t\t.p-team_sidebar--frameless:before {\n\t\t\twidth: "+Math.round(68/O)+"px;\n\t\t}\n\t",E="\n\t\t.p-team_sidebar,\n\t\t.p-team_sidebar--frameless::before {\n\t\t\tbackground: "+k+";\n\t\t}\n\n\t\t.p-team_sidebar__item {\n\t\t\tcolor: "+f.text_color+";\n\t\t}\n\n\t\t.p-team_sidebar__add_button,\n\t\t.p-team_sidebar__add_button:hover,\n\t\t.p-team_sidebar__add_button:focus,\n\t\t.p-team_sidebar__add_button:active {\n\t\t\tcolor: "+Object(da.i)(f.text_color,50)+";\n\t\t}\n\n\t\t.p-team_sidebar__add_button {\n\t\t\tbackground: "+k+";\n\t\t\tborder-color: "+Object(da.l)(f.text_color,.3)+";\n\t\t}\n\n\t\t.p-team_sidebar__add_button:hover,\n\t\t.p-team_sidebar__add_button:focus,\n\t\t.p-team_sidebar__add_button:active {\n\t\t\tborder-color: "+f.text_color+";\n\t\t\tbackground: "+Object(da.c)(f.column_bg,60)+";\n\t\t\tbox-shadow: 0 0 0 3px "+k+",\n\t\t\t0 0 0 6px "+Object(da.l)(f.text_color,.3)+";\n\t\t}\n\n\t\t.p-team_sidebar__unread_dot,\n\t\t.p-team_sidebar__mentions_badge {\n\t\t\tborder-color: "+k+";\n\t\t}\n\n\t\t.p-team_sidebar__mentions_badge {\n\t\t\tbackground: "+f.badge+";\n\t\t}\n\n\t\t.p-team_sidebar__unread_dot {\n\t\t\tbackground: "+f.text_color+"\n\t\t}\n\n\t\t.p-team_sidebar__item.c-button--focus-visible:focus,\n\t\t.p-team_sidebar__add_button.c-link--focus-visible:focus {\n\t\t\tbox-shadow: "+(p=g,m=k,b=Object(da.l)(g,.3),"0 0 0 3px "+m+", 0 0 0 4px "+p+", 0 0 0 6px "+b)+";\n\t\t}\n\n\t\t.c-button--focus-visible:focus .p-team_sidebar__icon--active {\n\t\t\tbox-shadow: none;\n\t\t}\n\n\t\t.p-team_sidebar__signed_out_badge__stroke {\n\t\t\t-webkit-text-stroke: 6px "+k+";\n\t\t\tcolor: "+k+";\n\t\t}\n\n\t\t.p-team_sidebar__icon:hover {\n\t\t\tbox-shadow: 0 0 0 3px "+k+",\n\t\t\t0 0 0 6px "+Object(da.l)(f.text_color,.3)+";\n\t\t}\n\n\t\t.p-team_sidebar__icon--active,\n\t\t.p-team_sidebar__icon--active:hover {\n\t\t\tbox-shadow: 0 0 0 3px "+k+",\n\t\t\t0 0 0 6px "+f.text_color+";\n\t\t}\n\n\t\t"+(I.Q&&i?C:"")+"\n\t";return v.a.createElement("style",{className:"p-team_sidebar__theme"},E)};ma.displayName="TeamSidebarTheme",ma.defaultProps={featureClassicNav:!1,clientTheme:"light",isWindowFrameless:!1};var ha=Object(y.b)(function(e){return{sidebarTheme:Object(X.j)(e,"sidebar_theme"),sidebarThemeCustomValues:Object(X.j)(e,"sidebar_theme_custom_values"),featureClassicNav:Object(M.m)(e,"feature_classic_nav"),clientTheme:Object(ua.c)(e),isWindowFrameless:Object(x.l)(e)}})(ma),ba=n("YEIV"),fa=n.n(ba),ga=n("TGBA"),_a=n("kiPk"),va=n("MIIS"),ya=(k.b.arrayOf(k.b.string).isRequired,function(e){function t(e){o()(this,t);var n=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onWorkspaceBadgeUpdated=n.onWorkspaceBadgeUpdated.bind(n),n.updateAggregatedBadge=n.updateAggregatedBadge.bind(n),n}return p()(t,e),l()(t,[{key:"onWorkspaceBadgeUpdated",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=e.unreadCnt,a=e.unreadHighlightCnt,i=e.badgeDockIcon;this.setState(function(e){return r()({},e,fa()({},t,{unreadHighlightCnt:a,unreadCnt:n,badgeDockIcon:i}))},this.updateAggregatedBadge)}},{key:"updateAggregatedBadge",value:function(){var e=Object(ga.a)(this.state),t=Object(_a.a)(e,function(e){return e.unreadHighlightCnt}),n=Object(_a.a)(e.filter(function(e){return e.badgeDockIcon}),function(e){return e.unreadCnt}),a=e.some(function(e){return e.badgeDockIcon});Object(I.Jb)(t,n,a)}},{key:"render",value:function(){var e=this;return this.props.workspaces.map(function(e){return{teamId:e,store:Object(w.getStoreInstanceByTeamId)(e)}}).map(function(t){var n=t.teamId,a=t.store;return v.a.createElement(va.a,{store:a,key:n,render:function(t){return v.a.createElement(Oa,{id:n,onBadgeUpdated:e.onWorkspaceBadgeUpdated,unreadHighlightCnt:Object(ta.f)(t),unreadCnt:Object(ta.g)(t),badgeDockIcon:Object(X.j)(t,"mac_ssb_bullet")})}})})}}]),t}(v.a.PureComponent));ya.displayName="DockBadgeListener";var ka=ya,Oa=function(e){function t(){return o()(this,t),u()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p()(t,e),l()(t,[{key:"componentDidUpdate",value:function(){this.props.onBadgeUpdated({id:this.props.id,unreadCnt:this.props.unreadCnt,unreadHighlightCnt:this.props.unreadHighlightCnt,badgeDockIcon:this.props.badgeDockIcon})}},{key:"render",value:function(){return null}}]),t}(v.a.PureComponent);Oa.displayName="WorkspaceBadgeItem",Oa.defaultProps={unreadCnt:!1,unreadHighlightCnt:0,badgeDockIcon:!0};n("3dej");var Ca=new O.b("sonic-toolbar"),Ea=(k.b.object.isRequired,k.b.string.isRequired,k.b.string,k.b.func.isRequired,k.b.func.isRequired,k.b.func.isRequired,k.b.func.isRequired,k.b.object,k.b.arrayOf(k.b.string),k.b.arrayOf(k.b.string),k.b.string,k.b.bool,k.b.array,k.b.bool,k.b.bool,k.b.bool,k.b.func,k.b.func,k.b.object,{selectedTeamStore:void 0,bootedWorkspaces:{},failedToBootWorkspaces:[],className:void 0,featureClassicNav:!1,allWorkspaces:[],isWindowFrameless:!1,willNavigateToUnbootedWorkspaceId:void 0,composerVisible:!1,userAttentionIsOnChat:!1,removeFromSectionNavigation:g.a,addToSectionNavigation:g.a,clogger:{track:g.a}}),ja=49,Sa=57,Ia=97,wa=105,Na=function(e){function t(e){o()(this,t);var n=u()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isModifierPressed:!1},n.currentActiveTeamIndex=null,Object(S.a)(n,["onKeyDown","onKeyUp","onWindowBlur","selectTeamByIndex","onDragEnd","onItemActive","focus","selectTeam"]),n}return p()(t,e),l()(t,[{key:"componentDidMount",value:function(){I.Q&&(window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp),window.addEventListener("blur",this.onWindowBlur))}},{key:"componentDidUpdate",value:function(e){var t={prevUserAttentionIsOnChat:e.userAttentionIsOnChat,prevComposerVisible:e.composerVisible,currentUserAttentionIsOnChat:this.props.userAttentionIsOnChat,currentComposerVisible:this.props.composerVisible};Object(F.a)(t)&&this.props.addToSectionNavigation(),Object(L.a)(t)&&this.props.removeFromSectionNavigation()}},{key:"componentWillUnmount",value:function(){I.Q&&(window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp),window.removeEventListener("blur",this.onWindowBlur))}},{key:"onWindowBlur",value:function(){this.state.isModifierPressed&&this.setState(function(){return{isModifierPressed:!1}})}},{key:"onKeyDown",value:function(e){var t=Object.keys(this.props.teams).length,n=Object(D.p)()?e.metaKey:e.ctrlKey;if(!e.shiftKey&&n&&t>0){var a=this.keyCodeInRange(e,ja,Sa),r=this.keyCodeInRange(e,Ia,wa);if(a||r){e.preventDefault();var i=e.keyCode-(a?ja:Ia);t>i&&this.selectTeamByIndex(i)}}n&&!e.shiftKey?this.setState(function(){return{isModifierPressed:!0}}):this.state.isModifierPressed&&this.setState(function(){return{isModifierPressed:!1}}),!e.shiftKey&&e.ctrlKey&&"Tab"===e.key?(e.preventDefault(),this.currentActiveTeamIndex>=this.props.allWorkspaces.length-1?this.selectTeamByIndex(0):this.selectTeamByIndex(this.currentActiveTeamIndex+1)):e.shiftKey&&e.ctrlKey&&"Tab"===e.key&&(e.preventDefault(),this.currentActiveTeamIndex<1?this.selectTeamByIndex(this.props.allWorkspaces.length-1):this.selectTeamByIndex(this.currentActiveTeamIndex-1))}},{key:"onKeyUp",value:function(e){!(Object(D.p)()?e.metaKey:e.ctrlKey)&&this.state.isModifierPressed&&this.setState(function(){return{isModifierPressed:!1}})}},{key:"onItemActive",value:function(e){this.activeItemRef=e}},{key:"onDragEnd",value:function(e){var t=e.destination,n=e.source;if(t){var a,r,i,o,s,l,c=this.props,u=c.allWorkspaces,d=c.setTeamOrder;if(!(n.index>=u.length))d((a=u,r=n.index,i=t.index,o=[].concat(f()(a)),s=o.splice(r,1),l=h()(s,1)[0],o.splice(i,0,l),o))}}},{key:"focus",value:function(){this.activeItemRef&&this.activeItemRef.focus()}},{key:"keyCodeInRange",value:function(e,t,n){var a=e.keyCode;return a>=t&&a<=n}},{key:"selectTeam",value:function(e){var t=this.props,n=t.bootedWorkspaces,a=t.failedToBootWorkspaces,r=t.teams,i=t.selectedTeamStore,o=t.selectedTeamId,s=t.clogger;if(Object(q.b)(i.getState())){var l=n.includes(e),c=a.includes(e),u=r[e]&&r[e].isExpired;!l&&!c&&!u?this.props.setWillNavigateToUnbootedWorkspaceId(e):(this.props.setWillNavigateToUnbootedWorkspaceId(null),Object(N.g)(T.a,{teamId:e},{reason:"team-sidebar/selectTeam"}),s.track(G.EventId.TEAM_SIDEBAR_CLICK,{team_id:e,target_team_id:o,items_count:Object.keys(r).length}))}else Object(W.b)().info("TEAM-SIDEBAR","Cannot switch workspaces because canUserSwitchWorkspaces returned false.")}},{key:"selectTeamByIndex",value:function(e){var t=this.props.allWorkspaces;t[e]&&this.selectTeam(t[e])}},{key:"renderSidebarItem",value:function(e,t){var n=this,a=this.props,i=a.signOutFromTeam,o=a.teams,s=a.bootedWorkspaces,l=a.selectedTeamId,c=a.failedToBootWorkspaces,u=a.willNavigateToUnbootedWorkspaceId,d=this.state.isModifierPressed,p=o[e],m=p.icon,h=p.name,b=p.isExpired,f=s.includes(e),g=c.includes(e),_=function(e){var t=e.teamId,n=e.selectedTeamId,a=e.willNavigateToUnbootedWorkspaceId;return t===a||!a&&t===n}({teamId:e,selectedTeamId:l,willNavigateToUnbootedWorkspaceId:u});e===l&&this.currentActiveTeamIndex!==t&&(this.currentActiveTeamIndex=t);var k={teamId:e,teamName:h,icon:m,order:t,isActive:_,onClick:this.selectTeam,signOutFromTeam:function(){return i(e)},key:e,shouldShowKeyboardShortcut:d,hasSessionExpired:b,failedToBoot:g};return v.a.createElement(j.b,{draggableId:e,key:e,index:t,disableInteractiveElementBlocking:!0},function(t,a){var i=a.isDragging,o=v.a.createElement(la,r()({ref:t.innerRef},k,{draggableProps:t.draggableProps,dragHandleProps:t.dragHandleProps,isDragging:i,onItemActive:n.onItemActive}));return f?v.a.createElement(y.a,{store:Object(w.getStoreInstanceByTeamId)(e),key:e},o):o})}},{key:"renderAddTeamButton",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return v.a.createElement(y.a,{store:this.props.selectedTeamStore},v.a.createElement(Jn,r()({startWorkspaceSignIn:this.props.startWorkspaceSignIn},e)))}},{key:"renderTeamSidebarContents",value:function(e,t){var n=this,a=t.isDraggingOver,i=this.props,o=i.allWorkspaces,s=i.featureClassicNav,l=o.map(function(e,t){return n.renderSidebarItem(e,t)});return s?v.a.createElement(_.Fragment,null,v.a.createElement("div",r()({role:"presentation",ref:e.innerRef},e.droppableProps,{className:"p-team_sidebar__teams"}),l,e.placeholder),this.renderAddTeamButton({featureClassicNav:!0,isDragInProgress:a})):v.a.createElement(_.Fragment,null,this.renderAddTeamButton(),v.a.createElement("div",{ref:e.innerRef,className:"p-team_sidebar__teams"},l,e.placeholder))}},{key:"renderDesktopComponents",value:function(){var e=this.props.bootedWorkspaces;return v.a.createElement(v.a.Fragment,null,v.a.createElement(ka,{workspaces:e}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.selectedTeamId,a=t.selectedTeamStore,i=t.featureClassicNav,o=t.isWindowFrameless,s=a&&v.a.createElement(y.a,{store:a,key:n},v.a.createElement(ha,null)),l=E()(this.props.className,"p-team_sidebar",{"p-team_sidebar--classic_nav":i,"p-team_sidebar--frameless":o});return v.a.createElement(_.Fragment,null,s,I.Q?this.renderDesktopComponents():null,v.a.createElement(j.a,{onDragEnd:this.onDragEnd},v.a.createElement(j.c,{droppableId:"droppable"},function(t,n){var a=n.isDraggingOver;return v.a.createElement("div",r()({role:"tablist","aria-label":Ca.t("Teams"),ref:t.innerRef},t.droppableProps,{"data-qa":"team_sidebar_scroll_container",className:l}),e.renderTeamSidebarContents(t,{isDraggingOver:a}))})))}}]),t}(_.Component);Na.displayName="TeamSidebar",Na.defaultProps=Ea;var Ta,Aa={startWorkspaceSignIn:P.startWorkspaceSignIn,signOutFromTeam:P.removeWorkspace,setTeamOrder:A.setWorkspaceOrder,setWillNavigateToUnbootedWorkspaceId:A.setWillNavigateToUnbootedWorkspaceId},Ra=Object(H.a)()?Object(B.a)(Na,"TeamSidebar",{index:4}):Na,Pa=Object(y.b)(function(e,t){var n=Object(w.getStoreInstanceByTeamId)(t.selectedTeamId),a=Object(R.getAllWorkspaces)(e),r=Object(R.getWillNavigateToUnbootedWorkspaceId)(e),i=Object(R.getFailedToBootWorkspaces)(e),o=Object(R.hasWorkspaceFailedToBoot)(e,t.selectedTeamId);return{teams:Object(R.getWorkspacesMeta)(e),willNavigateToUnbootedWorkspaceId:r,selectedTeamStore:n,allWorkspaces:a,bootedWorkspaces:Object(R.getBootedWorkspaces)(e),failedToBootWorkspaces:i,isWindowFrameless:Object(x.l)(e),featureClassicNav:o||n&&Object(M.m)(n.getState(),"feature_classic_nav"),clogger:Object(K.a)({state:n.getState()})}},Aa)((Ta=Ra,v.a.forwardRef(function(e,t){return v.a.createElement(U.a.Consumer,null,function(n){return v.a.createElement(Ta,r()({ref:t},e,{userAttentionIsOnChat:n}))})})));t.a=Pa},xrsA:function(e,t,n){"use strict";var a=n("kxpR"),r=n.n(a),i=n("aK/h"),o=n("dhvi"),s=n("XfeM"),l=n("G4ux"),c=n("Fdc0"),u=n("nNoG"),d=n("kOzZ"),p=n("U3Q0"),m=n("iCc5"),h=n.n(m),b=n("V7oC"),f=n.n(b),g=n("FYw3"),_=n.n(g),v=n("mRg0"),y=n.n(v),k=n("fvjX"),O=n("XHGt"),C=n("4qCO"),E=n("nlS/"),j=n("6kok"),S=n("4Twu"),I=n("eR+M"),w=n("4M+g"),N=n("wfE8"),T=n("3C31"),A=n("WD4z"),R=(n("e31y"),new u.b("channel_invite")),P={DISABLED:"disabled",LOADING:"loading",ENABLED:"enabled"},M=(i.b.object.isRequired,i.b.string.isRequired,i.b.arrayOf(i.b.object),i.b.func.isRequired,i.b.func.isRequired,i.b.func.isRequired,function(e){function t(e){h()(this,t);var n=_()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={addButtonState:P.DISABLED,isAlreadyMember:!1,selectedChannelId:void 0},n.onChannelSelected=n.onChannelSelected.bind(n),n.onAddToChannel=n.onAddToChannel.bind(n),n}return y()(t,e),f()(t,[{key:"onChannelSelected",value:function(){var e=this,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).value,n=this.props.member.id;return this.setState(function(){return{selectedChannelId:t,addButtonState:P.LOADING}}),this.props.getChannelMembershipInfoForUsers({channelId:t,userIds:[n]}).then(function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).membershipInfo,a=t[n].isMember;return e.setState(function(){return{addButtonState:a?P.DISABLED:P.ENABLED,isAlreadyMember:a}}),t})}},{key:"onAddToChannel",value:function(){var e=this.state.selectedChannelId,t=this.props.member,n=t.id;Object(c.jb)(t)?this.props.addAppToChannel({appUserId:n,channelId:e,referringEventId:"INVITE_TO_CHANNEL_DIALOG",referringUiContext:{action:"IMPRESSION"}}):this.props.submitInviteToChannel({channelId:e,users:n})}},{key:"renderChannelOption",value:function(e){return r.a.createElement(S.a,{channelId:e.value})}},{key:"renderChannelPicker",value:function(){var e=this.props,t=e.channels,n=e.memberName,a=this.state.isAlreadyMember,i=t.map(function(e){return{label:Object(j.M)(e),value:e.id}});return r.a.createElement(r.a.Fragment,null,r.a.createElement(E.e,{options:i,placeholderText:R.t("Select a channel"),ariaLabel:R.t("Select a channel"),selectId:"searchSelectChannelOptions",size:"medium",selectDataQa:"search-select-channel-options",renderOption:this.renderChannelOption,renderSelectedOption:this.renderChannelOption,onOptionSelected:this.onChannelSelected}),a&&r.a.createElement(A.a,{type:"inline",level:"error",className:"p-invite_member_to_channel_dialog__error"},r.a.createElement("span",null,R.t("{name} is already a member of this channel.",{name:n,__react:!0}))))}},{key:"render",value:function(){var e=this.props.memberName,t=this.state.addButtonState,n=R.t("Add {name} to a channel",{name:e,__react:!0});return r.a.createElement(p.b,{title:n,goButtonIsDisabled:t===P.DISABLED,goButtonIsPending:t===P.LOADING,goButtonText:R.t("Add"),onGo:this.onAddToChannel},r.a.createElement("div",{className:"p-invite_member_to_channel_dialog__body"},this.renderChannelPicker()))}}]),t}(r.a.Component));M.displayName="BaseInviteMemberToChannelDialog",M.defaultProps={channels:[]};var x=Object(O.b)(function(e,t){var n=t.member;return{channels:Object(w.t)(e).sort(Object(C.b)("name")),memberName:Object(c.V)(e,n,!1)}},function(e){return Object(k.b)({getChannelMembershipInfoForUsers:I.g,submitInviteToChannel:N.M,addAppToChannel:T.a},e)})(M);n.d(t,"a",function(){return D});var F=new u.b("channel_invite");function L(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.title,n=e.body;return Object(o.e)({element:r.a.createElement(p.b,{title:t,goButtonText:F.t("OK",{fallbackHash:"9ce3bd4224c8c1780db56b4125ecf3f24bf748b7",fallbackHashNs:"fullscreen_modal"}),showCancelButton:!1},n)})}var D=Object(s.b)("Opens app dialog",function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).memberId,a=t(),i=Object(l.b)(a),s=Object(l.d)(a,n),u=Object(d.a)({state:a}),p=Object(c.V)(a,s,!1),m=F.t("Add {name} to a channel",{name:p,__react:!0});u.track("INVITE_TO_CHANNEL_DIALOG",{contexts:{ui_context:{action:"IMPRESSION"}}}),Object(c.Mb)(i)?e(L({title:m,body:F.t("You are not allowed to add other members to channels.")})):Object(c.Mb)(s)?e(L({title:m,body:F.t("{name} cannot be added to any new channels.",{name:p,__react:!0})})):Object(c.Gb)(s)&&!Object(c.eb)(i)?e(L({title:m,body:F.t("Only a Workspace Admin can add {name} into new channels.",{name:p,__react:!0})})):e(Object(o.e)({element:r.a.createElement(x,{member:s})}))});D.meta={name:"openInviteMemberToChannelDialog",key:"actionsOpenInviteMemberToChannelDialogOpenInviteMemberToChannelDialog",description:"Opens app dialog"},D.propTypes={memberId:i.b.string.isRequired}},"y/bS":function(e,t,n){},y4ZY:function(e,t,n){},y5qN:function(e,t,n){},"yNt+":function(e,t,n){},yWse:function(e,t,n){},yg0S:function(e,t,n){"use strict";var a=n("XHGt"),r=n("gLeh"),i=n("1Ji4");t.a=Object(a.b)(function(e){return{isScreenReaderEnabled:Object(r.b)(e)}})(i.a)},yluG:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var a=n("aK/h"),r=n("kxpR"),i=n.n(r),o=n("derf"),s=n("5mKg"),l=(n("6mX7"),a.b.object,{externalTeam:void 0});function c(e){var t=e.externalTeam,n=Object(s.f)(t),a=Object(s.j)(t);return t&&n?i.a.createElement("div",{className:"p-app_external_team_banner"},i.a.createElement("span",{className:"p-app_external_team_banner__team_name overflow_ellipsis bold"},n),a&&i.a.createElement(o.b,{id:a,className:"p-app_external_team_banner__team_icon"})):null}c.displayName="AppExternalTeamBanner",c.defaultProps=l},ym0a:function(e,t,n){},yqYT:function(e,t,n){},yw6X:function(e,t,n){"use strict";var a=n("iCc5"),r=n.n(a),i=n("V7oC"),o=n.n(i),s=n("FYw3"),l=n.n(s),c=n("mRg0"),u=n.n(c),d=n("ifKl"),p=n("aK/h"),m=n("kxpR"),h=n.n(m),b=n("XHGt"),f=n("TSYQ"),g=n.n(f),_=n("XLFM"),v=n("c695"),y=n("od5y"),k=n("w8qk"),O=n("YB7p"),C=n("Smdl"),E=n("kOzZ"),j=n("negh"),S=n("nNoG"),I=(n("C8Zo"),new S.b("migration_blocker_page")),w=(p.b.string,p.b.bool,p.b.string,p.b.string,p.b.string,p.b.bool,p.b.bool,p.b.bool,p.b.bool,p.b.string,p.b.bool,p.b.object,p.b.func,{isOrgOwner:!1,isWorkspaceOwner:!1,isOrgAdmin:!1,isWorkspaceAdmin:!1,enterpriseName:null,teamURL:null,migrationID:null,sendEmail:!1,teamId:null,teamName:null,migrationIsComplete:!1,clogger:{track:d.a},pollMigrationStatus:d.a}),N=function(e){function t(e){r()(this,t);var n=l()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={loading:!1},n.handleReload=n.handleReload.bind(n),n}return u()(t,e),o()(t,[{key:"componentDidMount",value:function(){this.clogImpression(),Object(C.a)()&&this.props.pollMigrationStatus(this.props.teamId)}},{key:"componentDidUpdate",value:function(e){e.migrationIsComplete===this.props.migrationIsComplete&&e.teamId===this.props.teamId||this.clogImpression()}},{key:"clogImpression",value:function(){var e=this.props,t=e.migrationIsComplete;e.clogger.track(j.EventId.ENTERPRISE_MIGRATIONS,{contexts:{ui_context:{action:j.UiAction.IMPRESSION,ui_properties:{element_name:t?"migration_blocker_reload":"migration_blocker_page"}}}})}},{key:"handleReload",value:function(){var e=this.props,t=e.teamId,n=e.clogger;this.setState(function(){return{loading:!0}}),Object(O.a)({reason:"MigrationBlockerPage: Grid Migration for team "+t+" is complete, user triggered client reload",reasonKey:"migration_blocker_reload"}),n.track(j.EventId.ENTERPRISE_MIGRATIONS,{contexts:{ui_context:{action:j.UiAction.CLICK,ui_element:j.UiElement.BTN_RELOAD,ui_properties:{element_type:j.ElementType.BUTTON,element_name:"migration_blocker_reload"}}}}),n.sendDataAndEmptyQueue()}},{key:"renderMigrationTitle",value:function(){var e=this.props,t=e.teamName,n=e.enterpriseName,a=e.migrationIsComplete?I.t("Welcome to Slack Enterprise Grid!"):I.rt("The {teamName} workspace is joining {enterpriseName}!",{teamName:t,enterpriseName:n});return h.a.createElement("h3",{className:"p-migration_blocker_page__title"},a)}},{key:"renderMigrationMessage",value:function(){var e=this.props,t=e.enterpriseName,n=e.sendEmail,a=I.rt("It\u2019s moving day! Your workspace is being migrated into the <b>{enterpriseName}</b> Enterprise Grid organization, and will be temporarily unavailable until the process is complete.",{enterpriseName:t,fallbackHash:"f805600b955705eefe22feb6f32b1871508f03bd"});return h.a.createElement("div",{className:"p-migration_blocker_page__description"},a,n?I.t(" You\u2019ll receive an email when it\u2019s all done."):"")}},{key:"renderMigrationCompleteMessage",value:function(){var e=this.props.enterpriseName,t=e?I.rt("Starting today, your workspace is part of the <b>{enterprise_name}</b> organization. That means you can now message and share files with anyone at {enterprise_name} \u2014 even if you\u2019re not in the same workspace. Continue to your workspace, and we\u2019ll show you what\u2019s new.",{enterprise_name:e}):I.t("Starting today, your workspace is part of an organization. That means you can now message and share files with anyone in the organization \u2014 even if you\u2019re not on the same workspace. Continue to your workspace, and we\u2019ll show you what\u2019s new.");return h.a.createElement("div",{className:"p-migration_blocker_page__description"},h.a.createElement("p",null,I.t("Your workspace has just been upgraded to Slack Enterprise Grid, which makes it simpler for large organizations to work together.")),h.a.createElement("p",null,t),h.a.createElement("div",{className:"align_center margin_top_150"},h.a.createElement(v.a,{type:"primary",size:"large",onClick:this.handleReload,disabled:this.state.loading,loading:this.state.loading},I.t("Continue to Your Workspace"))))}},{key:"renderMigrationButton",value:function(){var e=this.props,t=e.migrationID,n=e.isOrgOwner,a=e.isWorkspaceOwner,r=e.isOrgAdmin,i=e.isWorkspaceAdmin,o=e.teamURL;return e.migrationIsComplete?null:n||a||r||i?h.a.createElement(_.c,{className:"p-migration_blocker_page__button",href:o+"migrations/"+t+"/status"},h.a.createElement("div",{className:"p-migration_blocker_page__button__text"},h.a.createElement("span",{className:"p-migration_blocker_page__button__title"},I.t("View migration status")),h.a.createElement("span",{className:"p-migration_blocker_page__button__subtitle"},I.t("Migration status is only visible to owners and admins."))),h.a.createElement("span",{className:"p-migration_blocker_page__button_icon"},h.a.createElement(y.b,{type:"chevron-large-right"}))):null}},{key:"render",value:function(){var e=this.props.migrationIsComplete,t=g()("p-migration_blocker_page","p-migration_blocker_page--large"),n=g()("p-migration_blocker_page__icon",{"p-migration_blocker_page__icon--complete":e});return h.a.createElement("div",{className:t},h.a.createElement("div",{className:"p-migration_blocker_text"},h.a.createElement("div",{className:n}),this.renderMigrationTitle(),e?this.renderMigrationCompleteMessage():this.renderMigrationMessage()),this.renderMigrationButton())}}]),t}(m.Component);N.displayName="MigrationBlockerPage",N.defaultProps=w;var T={pollMigrationStatus:k.a};t.a=Object(b.b)(function(e){return{clogger:Object(E.a)({state:e})}},T)(N)},yywf:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var a=n("sk9p"),r=n.n(a),i=n("ZBlo"),o=n("zmn3"),s=n("xWuZ");function l(e,t){return Object(s.a)(Object(o.a)(Object(i.a)(e.split(/(\ue000[^\ue001]+\ue001)/g),2),function(e,n){var a=r()(e,2),i=a[0],o=a[1];return[i,o?t(o.replace(/\ue000/g,"").replace(/\ue001/g,""),n):""]}))}},zBLs:function(e,t,n){},zG9j:function(e,t,n){},zJYr:function(e,t,n){},zXku:function(e,t,n){},zaOK:function(e,t,n){"use strict";var a=n("QbLZ"),r=n.n(a),i=n("TGBA"),o=n("wBxZ"),s=n("m8R6"),l=n("ifKl"),c=n("r31G"),u=n("sk9p"),d=n.n(u),p=n("iCc5"),m=n.n(p),h=n("V7oC"),b=n.n(h),f=n("kOzZ"),g=n("g5qt"),_=function(){function e(){m()(this,e)}return b()(e,[{key:"reportLocale",value:function(){if(g.Q){var e=Object(g.jb)();e&&Object(f.a)().track("SYSTEM_LOCALE",e)}}},{key:"reportCrash",value:function(){if(g.Q){var e=Object(g.fb)();e&&Object(f.a)().track("DESKTOP_CRASH",e)}}},{key:"reportHang",value:function(){if(g.Q){var e=Object(g.hb)();e&&Object(f.a)().track("DESKTOP_HANG",e)}}},{key:"reportDisplays",value:function(){if(g.Q){var e=Object(g.x)();if(e&&e.displays&&e.windowFrame){var t=e.displays,n=e.windowFrame,a=n.size,r=n.position,i=d()(a,2),o=i[0],s=i[1],l=d()(r,2),c=[o||0,s||0,l[0]||0,l[1]||0],u=[];t.forEach(function(e){e&&e.size&&e.size.width&&e.size.height&&(u.push(e.size.width),u.push(e.size.height)),u.push(e.scaleFactor||1)}),Object(f.a)().track("DISPLAY_INFO",{display_resolutions:u,window_frame:c})}}}}]),e}(),v=n("rWF5"),y=function(){function e(){m()(this,e)}return b()(e,[{key:"updateElements",value:function(e){var t=this,n=[];return Array.isArray(e)&&e.filter(function(e){return e&&e.getBoundingClientRect}).forEach(function(e){return n.push(t.updateElement(e))}),n}},{key:"updateElement",value:function(e,t){var n=t||e.id||e.type+"."+e.classList.toString().replace(/ /g,"."),a=e.getBoundingClientRect(),r={id:n,width:Math.round(a.width+2),height:Math.round(a.height+2),top:Math.round(a.top),left:Math.round(a.left)},i=Object(v.v)("3.0.0");if(r.width<2&&r.height<2&&i){var o=Object(g.kb)(),s=o.filter(function(e){return e.id!==r.id});o.length>s.length&&Object(g.vb)(s)}else Object(g.vb)(r);return r}}]),e}(),k=n("H9m0"),O=n("GdsW"),C=n("lnxZ"),E=n("s19S"),j=n("QLsh"),S=n("ROZo"),I=Object(S.b)("TS.inline_videos.maybeStopInlineVideoPlayback"),w=n("N/g+"),N=n("2Y1Y"),T=n("i1Fx"),A=n("HvGc"),R=n("rMey"),P=n("qN/r"),M=n("eCgt"),x=n("iH/p"),F=n("gLeh"),L=n("t85p"),D=n("Tc5z"),U=n("XL7r"),B=n("yZEV"),q=n("vmJv"),H=n("brL+"),W=n("G4ux"),G=n("fYfO"),K=n("1hAG"),V=n("5mKg"),z=n("Cfkr"),Y=n("VMwU"),Q=n("yHhI"),X=n("T5R/"),J=n("tVnY"),Z=n("YB7p"),$=n("cErB"),ee=n("s5Is"),te=["https://www.dropbox.com/chooser?","https://www.dropbox.com/saver?","https://account.box.com/index.php?","https://account.box.com/webviews/login/box_select?","https://app.box.com/index.php?","https://app.boxcn.net","https://ent.box.com","https://onedrive.live.com",/^https:\/\/[\w.-]+my\.sharepoint\.com\//,"https://login.microsoftonline.com/"],ne=["files/import/box","files/import/dropbox","files/import/gdrive","files/create/gdrive/auth","files/import/onedrive","files/import/onedrive/redirect",/files\/(T[A-Z0-9]{8,}|W[A-Z0-9]{8,}|U[A-Z0-9]{8,})\/F[A-Z0-9]{8,}(\/[a-zA-Z0-9_]+)?/],ae=Object(Q.b)();t.a=r()({analytics:new _,nodrag:new y},j,{accessibilitySupportChanged:function(){return Object(F.c)(Object(g.U)())},canOpenURLInWindow:function(e,t){if(!t)return!1;if(t.startsWith("chrome://"))return!0;if(Object($.g)(t))return!0;if(te.some(function(e){return e instanceof RegExp?e.test(t):t.startsWith(e)}))return!0;var n=Object(V.o)(Object(K.d)(e)),a=Object($.k)(t),r=a.hostname;return ne.some(function(e){return e instanceof RegExp&&Object($.h)(r)&&e.test(t)?t.startsWith(a.protocol+"//"+a.hostname):e instanceof RegExp?t.startsWith(""+n)&&e.test(t):t.startsWith(""+n+e)})},closeCall:T.a,focusNextWorkspace:ee.focusNextWorkspace,focusPreviousWorkspace:ee.focusPreviousWorkspace,getCurrentUserId:L.c,getCurrentUserName:function(e){return Object(W.b)(e).name},getEnterpriseId:H.a,getSelectedInputText:function(){var e=document.activeElement,t=Object(N.b)(e);return Object(N.d)(e,t.start,t.length)},getThemeValues:function(e){try{var t=JSON.parse(Object(U.j)(e,"sidebar_theme_custom_values"));return Object(J.b)(e)?r()({},t,Object(J.a)(t)):t}catch(e){return Y.a}},getTokenFromBootData:L.i,getUserPref:U.j,getWebappVersionUid:L.k,handleDeepLinkWithArgs:O.g,handleDeepLinkFromDesktop:R.b,isOnBetaReleaseChannel:function(){return!1},maybeTickleMS:k.a,notificationActivated:function(e,t,n,a){ae.info("DESKTOP","notificationActivated",{channelId:t,messageTs:n,threadTs:a}),e(Object(c.a)({channelId:t,messageTs:n,threadTs:a}))},notificationClicked:c.a,openDialog:function(e,t,n){switch(n){case"prefs":e(Object(P.a)());break;case"shortcuts":e(Object(A.h)());break;default:ae.warn("openDialog failed, unrecognized dialog: "+n)}},openFromCmdF:x.b,recentMessagesFromCurrentChannel:function(e){var t=Object(q.a)(e),n=[];return t&&(n=Object(o.a)(Object(i.a)(Object(G.b)(e,t)),50),Object(v.p)()||Object(v.v)("3.3.0")||(n=n.map(function(e){return e.subtype?e:Object(s.a)(e,"subtype")}))),{user_id:Object(L.c)(e),msgs:n}},reload:Z.b,replyToNotification:function(){for(var e=void 0,t=void 0,n=void 0,a=arguments.length,r=Array(a),i=0;i<a;i++)r[i]=arguments[i];return 4===r.length?(e=r[0],t=r[1],n=r[3]):(e=r[0],t=r[1],n=r[2]),Object(M.a)({channelId:e,text:t,replyToTs:n})},setCurrentMemberPresence:B.g,setFocusedWorkspace:ee.setFocusedWorkspace,ssbChromeClicked:l.a,systemTextSettingsChanged:function(){Object(X.a)({bustCache:!0})},teamSelectionChanged:function(e,t){Object(w.b)(),Object(E.b)(),I(),e(Object(D.s)(t))},track:z.d,updateDownloadsView:C.b,updateState:D.v})},zbnt:function(e,t,n){},ztz9:function(e,t,n){},zzVd:function(e,t,n){}}]);